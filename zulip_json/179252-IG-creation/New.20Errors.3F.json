[
    {
        "content": "<p>Getting a bunch of new errors like:</p>\n<div class=\"codehilite\"><pre><span></span>eCR MessageHeader.MessageHeader.focus   error   The target profile http://hl7.org/fhir/StructureDefinition/Resource is not valid constraint on the base ([CanonicalType[http://hl7.org/fhir/StructureDefinition/Resource]])\n</pre></div>\n\n\n<p>and</p>\n<div class=\"codehilite\"><pre><span></span>eCR Organization Extension.Extension.value[x]   error   The target profile null is not valid constraint on the base ([])\n</pre></div>",
        "id": 185681161,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579080311
    },
    {
        "content": "<blockquote>\n<p>Getting a bunch of new errors like:</p>\n</blockquote>\n<p>eCR MessageHeader.MessageHeader.focus   error   The target profile <a href=\"http://hl7.org/fhir/StructureDefinition/Resource\" target=\"_blank\" title=\"http://hl7.org/fhir/StructureDefinition/Resource\">http://hl7.org/fhir/StructureDefinition/Resource</a> is not valid constraint on the base ([CanonicalType[http://hl7.org/fhir/StructureDefinition/Resource]])</p>\n<div class=\"codehilite\"><pre><span></span>and\n</pre></div>\n\n\n<p>eCR Organization Extension.Extension.value[x]   error   The target profile null is not valid constraint on the base ([])</p>\n<div class=\"codehilite\"><pre><span></span>\n</pre></div>\n\n\n<p>I also get the error with the target profile.</p>",
        "id": 185681521,
        "sender_full_name": "Michaela Ziegler",
        "timestamp": 1579080609
    },
    {
        "content": "<p>I think <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> might have changed something that is causing them.</p>",
        "id": 185682191,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579081233
    },
    {
        "content": "<p>where are you getting these?</p>",
        "id": 185690541,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1579089244
    },
    {
        "content": "<p>I mean, how can I reproduce this?</p>",
        "id": 185690545,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1579089252
    },
    {
        "content": "<p>I'm getting these, too, in IPS. :(</p>",
        "id": 185700556,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1579097525
    },
    {
        "content": "<p>I don't know how you can reproduce but all of a sudden I am getting them in eCR: <a href=\"http://build.fhir.org/ig/HL7/case-reporting/branches/master/qa.html#_scratch_ig-build-temp-S7TPY6_repo_source_resources_structuredefinition_ecr-messageheader\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/case-reporting/branches/master/qa.html#_scratch_ig-build-temp-S7TPY6_repo_source_resources_structuredefinition_ecr-messageheader\">http://build.fhir.org/ig/HL7/case-reporting/branches/master/qa.html#_scratch_ig-build-temp-S7TPY6_repo_source_resources_structuredefinition_ecr-messageheader</a></p>\n<p>The message is: </p>\n<div class=\"codehilite\"><pre><span></span>eCR MessageHeader.MessageHeader.focus   error   The target profile http://hl7.org/fhir/StructureDefinition/Resource is not valid constraint on the base ([CanonicalType[http://hl7.org/fhir/StructureDefinition/Resource]])\n</pre></div>\n\n\n<p>I haven't changed anything (not that that means there is nothing wrong!) in that profile for ages.</p>\n<p>The profile has:</p>\n<div class=\"codehilite\"><pre><span></span>      &lt;element id=&quot;MessageHeader.focus&quot;&gt;\n            &lt;path value=&quot;MessageHeader.focus&quot;/&gt;\n            &lt;min value=&quot;1&quot;/&gt;\n            &lt;max value=&quot;1&quot;/&gt;\n            &lt;type&gt;\n                &lt;code value=&quot;Reference&quot;/&gt;\n                &lt;targetProfile value=&quot;http://hl7.org/fhir/us/ecr/StructureDefinition/ecr-task&quot;/&gt;\n            &lt;/type&gt;\n            &lt;mustSupport value=&quot;true&quot;/&gt;\n        &lt;/element&gt;\n</pre></div>\n\n\n<p>There are a few other similar ones.</p>",
        "id": 185756660,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579131854
    },
    {
        "content": "<p>Here is another one: </p>\n<div class=\"codehilite\"><pre><span></span>eCR Organization Extension.Extension.value[x]   error   The target profile null is not valid constraint on the base ([])\n</pre></div>\n\n\n<p>And the code:</p>\n<div class=\"codehilite\"><pre><span></span>    &lt;element id=&quot;Extension.value[x]&quot;&gt;\n      &lt;path value=&quot;Extension.value[x]&quot; /&gt;\n      &lt;min value=&quot;1&quot; /&gt;\n      &lt;type&gt;\n        &lt;code value=&quot;Reference&quot; /&gt;\n        &lt;targetProfile value=&quot;http://hl7.org/fhir/us/ecr/StructureDefinition/ecr-organization&quot; /&gt;\n      &lt;/type&gt;\n    &lt;/element&gt;\n</pre></div>",
        "id": 185756815,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579132012
    },
    {
        "content": "<p>they'll go away next release</p>",
        "id": 185756963,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1579132122
    },
    {
        "content": "<p>unless they are really invalid, which is possible</p>",
        "id": 185756974,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1579132134
    },
    {
        "content": "<p>Ok, will wait and see...</p>",
        "id": 185757011,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579132166
    },
    {
        "content": "<p>Have 300+ new errors in eICR and 400+ new errors in BSeR that weren't there yesterday.</p>\n<p>Most (all?) with the following two formats:</p>\n<div class=\"codehilite\"><pre><span></span>The extension http://hl7.org/fhir/us/ecr/StructureDefinition/eicr-trigger-code-flag-extension is not allowed to be used at this point (allowed = e:Composition.section.entry, e:Encounter.diagnosis)\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span>Problem evaluating slicing expression for element in profile http://hl7.org/fhir/us/ecr/StructureDefinition/eicr-composition path resource.section[3].entry[0] (fhirPath = true and resolve().conformsTo(&#39;http://hl7.org/fhir/us/odh/StructureDefinition/odh-PastOrPresentJob&#39;)): null\n</pre></div>",
        "id": 185976333,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579315834
    },
    {
        "content": "<p>And one more:</p>\n<div class=\"codehilite\"><pre><span></span>StructureDefinition/BSeR-ReferralFeedbackComposition: StructureDefinition.snapshot.element[1].type[0]   error   The extension http://hl7.org/fhir/StructureDefinition/structuredefinition-fhir-type is not allowed to be used at this point (allowed = e:ElementDefinition.type.code)\n</pre></div>",
        "id": 185977082,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579317398
    },
    {
        "content": "<p>Is the first one right? What’s the path?</p>",
        "id": 185979624,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1579322797
    },
    {
        "content": "<p>I’ll have to debug the second</p>",
        "id": 185979630,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1579322836
    },
    {
        "content": "<p>The third - not sure what to do - the error is in the base spec</p>",
        "id": 185979634,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1579322864
    },
    {
        "content": "<p>I don't think the first one is correct. Every single extension is coming up with the same error:</p>\n<div class=\"codehilite\"><pre><span></span>StructureDefinition/date-determined-extension: StructureDefinition.snapshot.element[1].type[0]  error   The extension http://hl7.org/fhir/StructureDefinition/structuredefinition-fhir-type is not allowed to be used at this point (allowed = e:ElementDefinition.type.code)\n</pre></div>\n\n\n<p>BSeR doesn't define any of it's own extensions and it's getting the same errors:</p>\n<div class=\"codehilite\"><pre><span></span>StructureDefinition/BSeR-Organization: StructureDefinition.snapshot.element[37].type[0] error   The extension http://hl7.org/fhir/StructureDefinition/structuredefinition-fhir-type is not allowed to be used at this point (allowed = e:ElementDefinition.type.code)\n</pre></div>",
        "id": 185980827,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579325299
    },
    {
        "content": "<p>Oh that extension one I just pasted - that's a base spec error? It's very very similar to the pattern of the other extension errors.</p>",
        "id": 185980840,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579325347
    },
    {
        "content": "<p>Taking a look at this error: </p>\n<div class=\"codehilite\"><pre><span></span>Observation/observation-pregnancy-status-eve-everywoman: Observation.component[0]   error   The extension http://hl7.org/fhir/us/ecr/StructureDefinition/date-determined-extension is not allowed to be used at this point (allowed = e:Observation)\n</pre></div>\n\n\n<p>This is the xml in the example:</p>\n<div class=\"codehilite\"><pre><span></span>&lt;component&gt;\n      &lt;extension url=&quot;http://hl7.org/fhir/us/ecr/StructureDefinition/date-determined-extension&quot;&gt;\n         &lt;valueDateTime value=&quot;2017-10-01&quot;/&gt;\n      &lt;/extension&gt;\n      &lt;code&gt;\n         &lt;coding&gt;\n            &lt;system value=&quot;http://loinc.org&quot;/&gt;\n            &lt;code value=&quot;53691-2&quot;/&gt;\n            &lt;display value=&quot;Gestational age Estimated from patient reported estimated date of conception&quot;/&gt;\n         &lt;/coding&gt;\n      &lt;/code&gt;\n      &lt;valueQuantity&gt;\n         &lt;value value=&quot;143&quot;/&gt;\n         &lt;unit value=&quot;d&quot;/&gt;\n      &lt;/valueQuantity&gt;\n   &lt;/component&gt;\n</pre></div>\n\n\n<p>And this is the xml in the structureDefinition:</p>\n<div class=\"codehilite\"><pre><span></span>    &lt;element id=&quot;Observation.component:sliceEstimatedGestationalAgeOfPregnancy.extension&quot;&gt;\n            &lt;path value=&quot;Observation.component.extension&quot;/&gt;\n            &lt;short value=&quot;Estimated gestational age of pregnancy determination date.&quot;/&gt;\n            &lt;definition value=&quot;Represents the date on which the estimated gestational age of pregnancy was determined.&quot;/&gt;\n            &lt;max value=&quot;1&quot;/&gt;\n            &lt;type&gt;\n                &lt;code value=&quot;Extension&quot;/&gt;\n                &lt;profile value=&quot;http://hl7.org/fhir/us/ecr/StructureDefinition/date-determined-extension&quot;/&gt;\n            &lt;/type&gt;\n            &lt;mustSupport value=&quot;true&quot;/&gt;\n        &lt;/element&gt;\n</pre></div>\n\n\n<p>I can't see anything wrong with it. Maybe there is something I'm missing...</p>",
        "id": 185981046,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579325768
    },
    {
        "content": "<p>Just realized the StructureDefinition itself is also throwing an error for each extension:</p>\n<div class=\"codehilite\"><pre><span></span>StructureDefinition/pregnancy-status-observation: StructureDefinition.snapshot.element[1].type[0]   error   The extension http://hl7.org/fhir/StructureDefinition/structuredefinition-fhir-type is not allowed to be used at this point (allowed = e:ElementDefinition.type.code)\n</pre></div>",
        "id": 185981095,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579325902
    },
    {
        "content": "<p>I feel like if that latter error is in the base spec it's causing problems further up the stack.</p>",
        "id": 185981102,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579325947
    },
    {
        "content": "<p>Here are the two QA reports: <br>\n<a href=\"http://build.fhir.org/ig/HL7/case-reporting/branches/master/qa.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/case-reporting/branches/master/qa.html\">http://build.fhir.org/ig/HL7/case-reporting/branches/master/qa.html</a></p>\n<p><a href=\"http://build.fhir.org/ig/HL7/bser/branches/master/qa.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/bser/branches/master/qa.html\">http://build.fhir.org/ig/HL7/bser/branches/master/qa.html</a></p>",
        "id": 185981148,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579326048
    },
    {
        "content": "<p>According to the definition of date-determined-extension, it can only be used on Observation. But you are using it on Observation.component. Hence the error. You need to fix up the definition of the extension if you want to use it there</p>",
        "id": 185987644,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1579339096
    },
    {
        "content": "<p>Ohhhh... Ok will check it out tomorrow.</p>",
        "id": 185992159,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579348067
    },
    {
        "content": "<p>So I added the extra context and it now doesn't error on the <strong>standalone </strong> Observation.  <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>\n<p>Though I am unsure about whether I should be using \"fhirpath\" and \"Observation.component\" or \"element\" and \"Observation.component\" for the context - they seem to both do the same thing (\"fhirpath\" results in a few less duplicate errors in the Bundle). \"fhirpath\" seems like it should be more correct but none of the \"official\" fhir extensions that drill down to a lower level use \"fhirpath\", so I've used \"element\".</p>\n<p>But it is still erroring on the <strong>Bundle that contains the Observation</strong> (which is just a copy and paste of the standalone Observation).</p>\n<div class=\"codehilite\"><pre><span></span>Bundle/bundle-eicr-document-pertussis-zika: resource.component[0]   error   The extension http://hl7.org/fhir/us/ecr/StructureDefinition/date-determined-extension is not allowed to be used at this point (allowed = e:Observation, e:Observation.component)\n</pre></div>\n\n\n<p>One thing that looks weird is the \"e:\" namespace (?) in all the paths - can't remember seeing that before?</p>",
        "id": 186021666,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579401262
    },
    {
        "content": "<p>Gotta say I was pretty careless with my extension.contexts... Just updated about 6 of them thanks to the new validation!</p>",
        "id": 186024318,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579407045
    },
    {
        "content": "<p>e: means element. p: means fhirpath, x: means extension</p>",
        "id": 186026836,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1579412628
    },
    {
        "content": "<p>always use element if you can</p>",
        "id": 186026837,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1579412636
    },
    {
        "content": "<p>Getting a crash since the last IG Pub release. It's got to be something I'm doing because nobody else is getting it, but I can't find it.</p>\n<p>I haven't made any changes since it last worked, I just rebuilt.</p>\n<div class=\"codehilite\"><pre><span></span>Stack Dump (for debugging):                                                      (00:28.0196)\norg.hl7.fhir.exceptions.FHIRException: Unable to locate the profile &#39;http://hl7.org/fhir/us/ecr/http://hl7.org/fhir/us/ecr/StructureDefinition/eicr-document-bundle&#39; in order to validate against it\n    at org.hl7.fhir.r5.validation.InstanceValidator.getSpecifiedProfile(InstanceValidator.java:640)\n    at org.hl7.fhir.r5.validation.InstanceValidator.validate(InstanceValidator.java:789)\n    at org.hl7.fhir.igtools.publisher.Publisher.validate(Publisher.java:4194)\n    at org.hl7.fhir.igtools.publisher.Publisher.validate(Publisher.java:4068)\n    at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:781)\n    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:663)\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:6861)\n</pre></div>\n\n\n<p>I defintely don't have the extra ig url on anything in my code so I must be putting in the full url somewhere the IG publisher is expecting just \"StructureDefinition/eicr-document-bundle\".</p>\n<p>The places I can find \"<a href=\"http://hl7.org/fhir/us/ecr/StructureDefinition/eicr-document-bundle\" target=\"_blank\" title=\"http://hl7.org/fhir/us/ecr/StructureDefinition/eicr-document-bundle\">http://hl7.org/fhir/us/ecr/StructureDefinition/eicr-document-bundle</a>\" are:</p>\n<ul>\n<li>StructureDefinition.differential.element.type.targetProfile</li>\n<li>StructureDefinition.url</li>\n<li>ImplementationGuide.definition.resource.exampleCanonical</li>\n<li>Bundle.meta.profile</li>\n<li>CapabilityStatement.rest.resource.supportedProfile</li>\n<li>CapabilityStatement.text.div</li>\n</ul>\n<p><a href=\"http://build.fhir.org/ig/HL7/case-reporting/branches/master/build.log\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/case-reporting/branches/master/build.log\">http://build.fhir.org/ig/HL7/case-reporting/branches/master/build.log</a></p>",
        "id": 186057939,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579470723
    },
    {
        "content": "<p>I had the same error, exactly as you describe.  I had the \"full\" urls for the exampleCanonical references in the ImplementationGuide resource, and fixed it by changing them to begin with \"StructureDefinition/...\".</p>",
        "id": 186059536,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1579472531
    },
    {
        "content": "<p>Hmmmm... That seems wrong. And it's definitely not the way it's shown in the example for the ImplementationGuide in the spec (<a href=\"https://www.hl7.org/fhir/implementationguide-example.xml.html\" target=\"_blank\" title=\"https://www.hl7.org/fhir/implementationguide-example.xml.html\">https://www.hl7.org/fhir/implementationguide-example.xml.html</a>). </p>\n<p>I thought \"canonical\" was the full url. Maybe I'm getting confused (highly likely!!). Plus there's this: <a href=\"https://www.hl7.org/fhir/references.html#canonical\" target=\"_blank\" title=\"https://www.hl7.org/fhir/references.html#canonical\">https://www.hl7.org/fhir/references.html#canonical</a></p>",
        "id": 186059966,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579473143
    },
    {
        "content": "<p>Yeah.  I agree that it seems wrong for the idea of \"canonical\", but it does seem to be the \"right\" way to make it work at the moment.  It is consistent with the resource references.  Maybe the choice should be exampleReference, instead? (the IG resource is still FMM1)</p>",
        "id": 186060222,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1579473666
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> agreed about getting it to work at the moment! <br>\n<span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> can you comment?</p>",
        "id": 186060483,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579474122
    },
    {
        "content": "<p>Theoretially you could put a reference in exampleCanonical to, say, a US Core profile which isn't part of your IG...</p>",
        "id": 186060537,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579474203
    },
    {
        "content": "<p>BTW, thanks for fixing the other errors <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> my 350 errors from yesterday are now down to 4! (After getting it building with the exampleCanonical change above).</p>",
        "id": 186061797,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579475883
    },
    {
        "content": "<p>so that is my bug. I'll fix it</p>",
        "id": 186067063,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1579483576
    },
    {
        "content": "<p>I have one pesky error left:</p>\n<div class=\"codehilite\"><pre><span></span>eRSD PlanDefinition.action.trigger.data.PlanDefinition.action.trigger.data.profile  error   The target profile null is not a valid constraint on the base ([CanonicalType[http://hl7.org/fhir/StructureDefinition/StructureDefinition]])\n</pre></div>\n\n\n<p>It's doubling up on the path for some reason: \"eRSD PlanDefinition.action.trigger.data.PlanDefinition.action.trigger.data.profile\"</p>\n<p>This looks a little odd too: \"[CanonicalType[http://hl7.org/fhir/StructureDefinition/StructureDefinition]]\" with the double StructureDefinition.</p>\n<p>I can't see anything (obvious) wrong with the StructureDefinition: <a href=\"https://github.com/HL7/case-reporting/blob/master/source/resources/structuredefinition/ersd-plandefinition.xml\" target=\"_blank\" title=\"https://github.com/HL7/case-reporting/blob/master/source/resources/structuredefinition/ersd-plandefinition.xml\">https://github.com/HL7/case-reporting/blob/master/source/resources/structuredefinition/ersd-plandefinition.xml</a></p>",
        "id": 186068994,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579486908
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> any insights on this error - I can't figure out what is wrong with the profile.</p>",
        "id": 186129433,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579550425
    },
    {
        "content": "<blockquote>\n<p>so that is my bug. I'll fix it</p>\n</blockquote>\n<p>Do we have an ETA on a fix for the exampleCanonical bug?</p>",
        "id": 186130034,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579551077
    },
    {
        "content": "<p>I'm trying to get a clean build now so I can get it out. It's my priority</p>",
        "id": 186130509,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1579551630
    },
    {
        "content": "<p>Thanks - sorry to keep bugging you about stuff...</p>",
        "id": 186131345,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579552515
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191918\">@Sarah Gaunt</span> your structureDefinition seems fine</p>",
        "id": 186131920,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1579553136
    },
    {
        "content": "<p>i cannot build your IG as it is on github because it seems you have a different version of the template</p>",
        "id": 186131974,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1579553165
    },
    {
        "content": "<blockquote>\n<p>This looks a little odd too: \"[CanonicalType[http://hl7.org/fhir/StructureDefinition/StructureDefinition]]\" with the double StructureDefinition.<br>\nI can't see anything (obvious) wrong with the StructureDefinition: <a href=\"https://github.com/HL7/case-reporting/blob/master/source/resources/structuredefinition/ersd-plandefinition.xml\" target=\"_blank\" title=\"https://github.com/HL7/case-reporting/blob/master/source/resources/structuredefinition/ersd-plandefinition.xml\">https://github.com/HL7/case-reporting/blob/master/source/resources/structuredefinition/ersd-plandefinition.xml</a></p>\n</blockquote>\n<p>Is this a new issue? Your structuredefinitions are in the structuredefinitions folder, so the fact that they show up as structuredefinition/structuredefinition does not scare me - unless it doesn't build..</p>",
        "id": 186132035,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1579553279
    },
    {
        "content": "<p>Well, a new issue since Grahame released the ig publisher over the weekend...</p>",
        "id": 186132278,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579553548
    },
    {
        "content": "<p>Thanks for taking a look...</p>",
        "id": 186132284,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579553560
    },
    {
        "content": "<p>So this error has morphed into two errors wtih the latest IG publisher:</p>\n<div class=\"codehilite\"><pre><span></span>PlanDefinition.action.trigger.data.profile  error   The target profile http://hl7.org/fhir/us/ecr/StructureDefinition/eicr-encounter is not a valid constraint on the base ([CanonicalType[http://hl7.org/fhir/StructureDefinition/StructureDefinition]])\nPlanDefinition.action.trigger.data.profile  error   The target profile http://hl7.org/fhir/us/ecr/StructureDefinition/eicr-composition is not a valid constraint on the base ([CanonicalType[http://hl7.org/fhir/StructureDefinition/StructureDefinition]])\n</pre></div>\n\n\n<p>I have changed it so many times now I can't even remember what I had originally - but I still cannot figure out what is wrong.</p>\n<p>This is the StructureDefintion: <a href=\"https://github.com/HL7/case-reporting/blob/master/source/resources/structuredefinition/ersd-plandefinition.xml\" target=\"_blank\" title=\"https://github.com/HL7/case-reporting/blob/master/source/resources/structuredefinition/ersd-plandefinition.xml\">https://github.com/HL7/case-reporting/blob/master/source/resources/structuredefinition/ersd-plandefinition.xml</a></p>\n<p>And the offending xml:</p>\n<div class=\"codehilite\"><pre><span></span>&lt;element id=&quot;PlanDefinition.action:sliceCloseOutEICR.trigger.data&quot;&gt;\n      &lt;path value=&quot;PlanDefinition.action.trigger.data&quot; /&gt;\n      &lt;short value=&quot;Trigger when Encounter.period.end is added.&quot; /&gt;\n      &lt;definition value=&quot;Trigger when encounter.period.end is added.&quot; /&gt;\n      &lt;min value=&quot;1&quot; /&gt;\n      &lt;max value=&quot;1&quot; /&gt;\n      &lt;mustSupport value=&quot;true&quot; /&gt;\n    &lt;/element&gt;\n    &lt;element id=&quot;PlanDefinition.action:sliceCloseOutEICR.trigger.data.type&quot;&gt;\n      &lt;path value=&quot;PlanDefinition.action.trigger.data.type&quot; /&gt;\n      &lt;fixedCode value=&quot;Encounter&quot; /&gt;\n    &lt;/element&gt;\n    &lt;element id=&quot;PlanDefinition.action:sliceCloseOutEICR.trigger.data.profile&quot;&gt;\n      &lt;path value=&quot;PlanDefinition.action.trigger.data.profile&quot; /&gt;\n      &lt;min value=&quot;1&quot; /&gt;\n      &lt;max value=&quot;1&quot; /&gt;\n      &lt;type&gt;\n        &lt;code value=&quot;canonical&quot; /&gt;\n        &lt;targetProfile value=&quot;http://hl7.org/fhir/us/ecr/StructureDefinition/eicr-encounter&quot; /&gt;\n      &lt;/type&gt;\n      &lt;mustSupport value=&quot;true&quot; /&gt;\n    &lt;/element&gt;\n</pre></div>\n\n\n<p>(plus the equivalent for the other error message)</p>",
        "id": 186224068,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579638776
    },
    {
        "content": "<p>PlanDefinition.action.trigger.data.profile is a canonical(StructureDefinition) - that is, a reference to a profile</p>",
        "id": 186224302,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1579638914
    },
    {
        "content": "<p>what you've done is said that you're replacing it with a canonical that must refer to something that conforms to an eicr-encounter</p>",
        "id": 186224419,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1579638972
    },
    {
        "content": "<p>so you want it to be an encounter, not a StructureDefinition.</p>",
        "id": 186224445,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1579638987
    },
    {
        "content": "<p>I think you want a fixed value of <code>http://hl7.org/fhir/us/ecr/StructureDefinition/eicr-encounter</code>, not a constraint on the target of the canonical</p>",
        "id": 186224518,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1579639022
    },
    {
        "content": "<p>Ohhhh... Ok, will try that.</p>",
        "id": 186224653,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579639124
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> - that worked. Makes so much sense once I actually see it in the code...</p>",
        "id": 186239714,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579649490
    },
    {
        "content": "<p>Something else.<br>\nI'm using the IGPublisher ( 1.0.49) on a STU3 implementation guide and am getting the following error on dependency[0] in the output. There is no dependency element in the input file. I'm not sure whether it is new.</p>\n<div class=\"codehilite\"><pre><span></span>The extension http://hl7.org/fhir/4.0/StructureDefinition/extension-ImplementationGuide.dependsOn.packageId is not allowed to be used at this point (allowed = e:ImplementationGuide.dependsOn; this element is [[ImplementationGuide.dependency, BackboneElement])\n</pre></div>",
        "id": 186760645,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1580198834
    },
    {
        "content": "<p>I think that this is an IGPublisher problem</p>",
        "id": 186760741,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1580198945
    },
    {
        "content": "<p>It is not there in v1.0.42 but is in 1.0.45</p>",
        "id": 186762676,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1580201121
    },
    {
        "content": "<p>interesting. I'll have to think about it</p>",
        "id": 186763810,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580202181
    },
    {
        "content": "<p>The files are available <a href=\"https://github.com/AuDigitalHealth/ci-fhir-stu3/tree/master/output/SharedMedicinesList\" target=\"_blank\" title=\"https://github.com/AuDigitalHealth/ci-fhir-stu3/tree/master/output/SharedMedicinesList\">https://github.com/AuDigitalHealth/ci-fhir-stu3/tree/master/output/SharedMedicinesList</a></p>",
        "id": 186769717,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1580207483
    },
    {
        "content": "<p>The ig.json file is called      ig-sharedmedicineslist-1.json and is at <a href=\"https://github.com/AuDigitalHealth/ci-fhir-stu3\" target=\"_blank\" title=\"https://github.com/AuDigitalHealth/ci-fhir-stu3\">https://github.com/AuDigitalHealth/ci-fhir-stu3</a></p>",
        "id": 186769855,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1580207619
    },
    {
        "content": "<p>I have 197 new bad links in BSeR. I haven't changed anything - just rebuilt it today (last time was sometime last week).</p>\n<p>Here is an example:</p>\n<div class=\"codehilite\"><pre><span></span>BSeR-ArthritisFeedbackObservation.html#/html/body/div/div/div/div/div/p/a at Line 679, column 41    error   The link &#39;BSeR-ArthritisFeedbackObservation.sch&#39; for &quot;Schematron&quot; cannot be resolved\n</pre></div>\n\n\n<p>That Schematron link leads to a \"404 Not Found\" page. AFAIK, I have no control over that link or its target...</p>\n<p>This is the link: <a href=\"http://build.fhir.org/ig/HL7/bser/branches/master/BSeR-ArthritisReferralSupportingInformation.sch\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/bser/branches/master/BSeR-ArthritisReferralSupportingInformation.sch\">http://build.fhir.org/ig/HL7/bser/branches/master/BSeR-ArthritisReferralSupportingInformation.sch</a></p>",
        "id": 186844426,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580256631
    },
    {
        "content": "<p>Also getting this one:</p>\n<div class=\"codehilite\"><pre><span></span>AdaptationforAdditionalReferralUseCases.html#/html/body/div/div/div/div/div/ul/li/p/strong/a at Line 144, column 17 error   The link &#39;StructureDefinition-BSeR-ReferralMessageHeader-definitions.html#MessageHeader.reason&#39; for &quot;BSeR_ReferralMessageHeader.reason&quot; cannot be resolved\n</pre></div>\n\n\n<p>So I can see that the link has changed from this - which worked last week:<br>\n<a href=\"http://build.fhir.org/ig/HL7/bser/branches/master/StructureDefinition-BSeR-ReferralMessageHeader-definitions.html#MessageHeader.reason\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/bser/branches/master/StructureDefinition-BSeR-ReferralMessageHeader-definitions.html#MessageHeader.reason\">http://build.fhir.org/ig/HL7/bser/branches/master/StructureDefinition-BSeR-ReferralMessageHeader-definitions.html#MessageHeader.reason</a> <br>\nTo this - which works today: <br>\n<a href=\"http://build.fhir.org/ig/HL7/bser/branches/master/BSeR-ReferralMessageHeader-definitions.html#MessageHeader.reason\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/bser/branches/master/BSeR-ReferralMessageHeader-definitions.html#MessageHeader.reason\">http://build.fhir.org/ig/HL7/bser/branches/master/BSeR-ReferralMessageHeader-definitions.html#MessageHeader.reason</a></p>\n<p>But why?</p>\n<p>Do I really have to go and change all the links I manually added to the narrative??</p>",
        "id": 186844790,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580257014
    },
    {
        "content": "<p>I see this thread: <a href=\"#narrow/stream/179252-IG-creation/topic/Changes.20to.20file.20names.3F\" title=\"#narrow/stream/179252-IG-creation/topic/Changes.20to.20file.20names.3F\">https://chat.fhir.org/#narrow/stream/179252-IG-creation/topic/Changes.20to.20file.20names.3F</a></p>\n<p>Which makes it sound like this change was months ago. I am so confused about all this stuff and how it is constantly changing. Having a very hard time keeping up.</p>",
        "id": 186844912,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580257108
    },
    {
        "content": "<p>Last week the link was:<br>\n<a href=\"http://build.fhir.org/ig/HL7/bser/branches/master/Patient-patient-us-core-patient-eve-everywoman.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/bser/branches/master/Patient-patient-us-core-patient-eve-everywoman.html\">http://build.fhir.org/ig/HL7/bser/branches/master/Patient-patient-us-core-patient-eve-everywoman.html</a><br>\nToday it builds to this:<br>\n<a href=\"http://build.fhir.org/ig/HL7/bser/branches/master/patient-us-core-patient-eve-everywoman.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/bser/branches/master/patient-us-core-patient-eve-everywoman.html\">http://build.fhir.org/ig/HL7/bser/branches/master/patient-us-core-patient-eve-everywoman.html</a></p>",
        "id": 186845234,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580257498
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191918\">@Sarah Gaunt</span> sounds like you have the same issue as me, but my issue was because I used a hacked template, so I was asking for it. Once I reverted to the standard templates, the issue was gone</p>",
        "id": 186846500,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580259070
    },
    {
        "content": "<p>But the opposite is true for the Schematron files - the link that is produced is:<br>\n<a href=\"http://build.fhir.org/ig/HL7/bser/branches/master/BSeR-ArthritisReferralSupportingInformation.sch\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/bser/branches/master/BSeR-ArthritisReferralSupportingInformation.sch\">http://build.fhir.org/ig/HL7/bser/branches/master/BSeR-ArthritisReferralSupportingInformation.sch</a><br>\nAnd the link that actually works is:<br>\n<a href=\"http://build.fhir.org/ig/HL7/bser/branches/master/StructureDefinition-BSeR-ArthritisReferralSupportingInformation.sch\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/bser/branches/master/StructureDefinition-BSeR-ArthritisReferralSupportingInformation.sch\">http://build.fhir.org/ig/HL7/bser/branches/master/StructureDefinition-BSeR-ArthritisReferralSupportingInformation.sch</a></p>",
        "id": 186846515,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580259101
    },
    {
        "content": "<p>Hmmm... <span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span> I haven't hacked the template (well, not that I remember!). What did you hack?</p>",
        "id": 186846566,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580259137
    },
    {
        "content": "<p>Anyway - this is on the CI build. It just goes and grabs the latest template, doesn't it?</p>",
        "id": 186846579,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580259172
    },
    {
        "content": "<p>If you don't remember hacking it, then you definitely didn't.</p>",
        "id": 186846599,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580259212
    },
    {
        "content": "<p>Ha! That is not necessarily a true statement... But, I actually don't think I did. This IG I'm just letting the template do its thing.</p>",
        "id": 186846647,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580259254
    },
    {
        "content": "<p>hacking a template is not something we do by accident, so let me assume that.</p>",
        "id": 186846661,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580259292
    },
    {
        "content": "<p>Yes.</p>",
        "id": 186846676,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580259319
    },
    {
        "content": "<p>Plus, I made zero changes to anything between the last time it ran cleanly and today.</p>",
        "id": 186846693,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580259351
    },
    {
        "content": "<p>I wonder if it's got something to do with what I have on Git. Like for some reason I have a template directory there - I feel like that maybe shouldn't be there because the build goes and gets the latest version every time. But then it probably just ingores that folder anyway. Not sure.</p>",
        "id": 186847052,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580259750
    },
    {
        "content": "<p>no, the template directory is overwritten every time.</p>",
        "id": 186847086,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580259814
    },
    {
        "content": "<p>it should not matter to the build</p>",
        "id": 186847094,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580259829
    },
    {
        "content": "<p>Yeah, that's what I thought. It just uses what's in the input dir. <br>\nI do find it somewhat coincidental that you had the same issue yesterday...</p>",
        "id": 186847156,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580259888
    },
    {
        "content": "<p>Kicking myself for hitting re-build. We're supposed to be sending this IG to the TSC today for publication approval.</p>",
        "id": 186847188,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580259950
    },
    {
        "content": "<p>may be related but not the same reason. my reason is that I use custom template and I messed it up.</p>",
        "id": 186847206,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580259962
    },
    {
        "content": "<p>I'm building your IG locally to see what's up</p>",
        "id": 186847240,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580259984
    },
    {
        "content": "<p>your build runs fine over here</p>",
        "id": 186847299,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580260071
    },
    {
        "content": "<p>(except for some value sets not found)</p>",
        "id": 186847363,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580260118
    },
    {
        "content": "<p>so, suggestions: </p>\n<ol>\n<li>delete \"template\" folder from your repo (this will retrigger the build)</li>\n</ol>",
        "id": 186847386,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580260160
    },
    {
        "content": "<p>Really? Well that gives me hope - you don't get the 196 bad links? I dont' get any errors - just bad links...</p>",
        "id": 186847390,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580260168
    },
    {
        "content": "<p>ah wait</p>",
        "id": 186847397,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580260178
    },
    {
        "content": "<p>Ok, will try that.</p>",
        "id": 186847398,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580260179
    },
    {
        "content": "<p>i did not look at qa.html</p>",
        "id": 186847403,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580260184
    },
    {
        "content": "<p>ok, sorry if I was misleading.</p>",
        "id": 186847459,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580260217
    },
    {
        "content": "<p>My issue yesterday was that the whole thing broke - the page was not navigable anymore.</p>",
        "id": 186847467,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580260240
    },
    {
        "content": "<p>you do not have that issue</p>",
        "id": 186847474,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580260245
    },
    {
        "content": "<p>you do have a lot of links that are missing indeed <a href=\"/user_uploads/10155/0pgJqy3wNCx337AdGURaFMj5/qa.html\" target=\"_blank\" title=\"qa.html\">qa.html</a></p>",
        "id": 186847499,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580260278
    },
    {
        "content": "<p>Yeah, no errors. Just this: <a href=\"https://build.fhir.org/ig/HL7/bser/branches/master/qa.html\" target=\"_blank\" title=\"https://build.fhir.org/ig/HL7/bser/branches/master/qa.html\">https://build.fhir.org/ig/HL7/bser/branches/master/qa.html</a></p>",
        "id": 186847502,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580260282
    },
    {
        "content": "<p>sorry if I misled you.</p>",
        "id": 186847621,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580260441
    },
    {
        "content": "<p>It super weird because in some cases the working link doesn't have the <code>&lt;ResourceType&gt;-</code> prefix and the published link does have it and in other cases, the working link does have the extra &lt;ResourceType&gt;- and the published link doesn't.</p>",
        "id": 186847681,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580260474
    },
    {
        "content": "<p>No problem - thanks for looking into it!</p>",
        "id": 186847689,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580260488
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> anything in these changes could trigger this issue? somehow the resource type is added to the reference.</p>\n<p><a href=\"https://github.com/HL7/fhir-ig-publisher/commit/ef0de4db15ca2ce9ab8f4bd225a7d5a3337d7807\" target=\"_blank\" title=\"https://github.com/HL7/fhir-ig-publisher/commit/ef0de4db15ca2ce9ab8f4bd225a7d5a3337d7807\">https://github.com/HL7/fhir-ig-publisher/commit/ef0de4db15ca2ce9ab8f4bd225a7d5a3337d7807</a></p>",
        "id": 186847693,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580260490
    },
    {
        "content": "<p>Though I guess that the ones where it isn't looking for the prefix any more are my manually added ones (which worked last week. I can fix those manually if I have to. </p>\n<p>It's just the Schematron links that I have no control over.</p>",
        "id": 186847783,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580260579
    },
    {
        "content": "<p>The thing is - surely everybody using the new template would be getting bad links, not just me if it was a problem with the publisher. Though I do seem to be a problem-magnet!</p>",
        "id": 186847814,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580260638
    },
    {
        "content": "<p>you are in the front so you get all the headwind :)</p>",
        "id": 186847906,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580260751
    },
    {
        "content": "<p>I'm going to look shortly but these sound like template issues</p>",
        "id": 186847965,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580260811
    },
    {
        "content": "<p>Yes, they do. But I don't think <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>  has changed the template recently...</p>",
        "id": 186847991,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580260883
    },
    {
        "content": "<p>with regard to the schematron error., this looks like <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> broke it to me. I used to generate the schematrons at 'BSeR-ArthritisFeedbackObservation.sch', but Lloyd asked me to move them to 'StructureDefinition-BSeR-ArthritisFeedbackObservation.sch' for consistency - so I did. that was about 2 months ago.</p>",
        "id": 186848581,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580261663
    },
    {
        "content": "<p>but specifying the link is a template thing, not the IG Publisher</p>",
        "id": 186848600,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580261715
    },
    {
        "content": "<p>Right. Super confused. It worked last week, but not today.<br>\nI can manually remove the \"StructureDefinition-\" from the links on my description etc. pages, but that seems to be the opposite of adding the prefix for the Schematron. <br>\nWhich wouldn't be consistent and worried I'd have to change them all back.</p>",
        "id": 186848686,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580261834
    },
    {
        "content": "<p>you'd have to add StructureDefinition-</p>",
        "id": 186848701,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580261872
    },
    {
        "content": "<p>No, not for these links. That's what I'm saying. The other issue is the oppositve. I HAVE structuredefnition-, but that page doesn't exist. So I'd actually have to REMOVE the prefix.</p>\n<p><code>The link 'StructureDefinition-BSeR-ReferralMessageHeader-definitions.html#MessageHeader.reason' for \"BSeR_ReferralMessageHeader.reason\" cannot be resolved</code></p>",
        "id": 186848796,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580261991
    },
    {
        "content": "<p>They should be StructureDefinition-BSeR....  The template I have locally expects them to be there.  I don't know why the template that's checked in doesn't.  It must be something that got messed up during the roll-back.  I expect to roll forward (with Sean's permission) shortly.  We'll see if that fixes things.</p>",
        "id": 186848947,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1580262220
    },
    {
        "content": "<p>looks like a package problem - what is committed is   &lt;p&gt;Other representations of profile: &lt;a href=\"{{[type]}}-{{[id]}}.sch\"&gt;Schematron&lt;/a&gt;</p>",
        "id": 186849001,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580262261
    },
    {
        "content": "<p>Please don't roll forward until after BSeR is published.<br>\nBut could you just fix that one thing, because I can't publish with broken links.</p>",
        "id": 186849004,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580262271
    },
    {
        "content": "<p>what is in the package</p>",
        "id": 186849032,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580262316
    },
    {
        "content": "<p>&lt;p&gt;Other representations of profile: &lt;a href=\"{{[id]}}.sch\"&gt;Schematron&lt;/a&gt;</p>",
        "id": 186849033,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580262317
    },
    {
        "content": "<p>Unless you roll forward but add some functionality to allow me point to an earlier version of the template...</p>",
        "id": 186849296,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580262678
    },
    {
        "content": "<p>Pointing to an earlier version of the template isn't currently possible (and not sure if it will be).  If Trifolia works with the new template, what's the concern about rolling forward?</p>",
        "id": 186849456,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1580262899
    },
    {
        "content": "<p>Sarah doesn't want you to break anything. and you've been rolling backwards and forwards a bit...</p>",
        "id": 186849531,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580262963
    },
    {
        "content": "<p>I'm not using Trifolia - I'm using your template though. This IG uses the current version of the template. It has gone through workgroup and FMG approval for publication. If you change the template you will break the IG as it currently is. TSC hasn't yet approved it and it will then need to be published.</p>",
        "id": 186849564,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580263059
    },
    {
        "content": "<p>So the question is - how do we manage the long publication process with everything changing all the time?</p>",
        "id": 186849630,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580263110
    },
    {
        "content": "<p>Shoud I constantly re-build and change stuff in an IG that was working last week?</p>",
        "id": 186849640,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580263139
    },
    {
        "content": "<p>Also - in terms of approval. If we (well, just me) are really splitting hairs. The committees approved the IG looking a certain way. Who is to say that changing the template doesn't change something that nobody notices and then we are actually publishing an IG that hasn't been properly approved /checked. Probably not explaining that very well, but hopefully it makes sense.</p>",
        "id": 186849724,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580263255
    },
    {
        "content": "<p>I don't think we;re talking about changing look and feel?</p>",
        "id": 186849749,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580263314
    },
    {
        "content": "<p>No, I know (I'm just saying). The real issue is that AGES to get through all the approvals. How many times can I be expected to re-build and update an IG that was workign fine at the beginning of the process?</p>",
        "id": 186849809,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580263378
    },
    {
        "content": "<p>I actually assumed I was finished with BSeR last week. And then I re-ran it this morning, just to check. And now I've spent more time, trying to get to the bottom of what is wrong. I know things like this are going to happen, but if we could just minimize them at all possible...</p>",
        "id": 186849880,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580263466
    },
    {
        "content": "<p>And it is a possibility that changing the template could break something that nobody notices until an IG has been published. Because there is essentially no QA other than us and the workgroups etc, looking at the IG. So if something changes and then it goes straight to publication, it could happen. Might be a remote possibility, but it's not impossible.</p>",
        "id": 186850051,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580263703
    },
    {
        "content": "<p>mostly the changes correspond to me picking something up that is a problem and adding rules for them</p>",
        "id": 186850075,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580263749
    },
    {
        "content": "<p>That's the IG publisher - not the template.</p>",
        "id": 186850094,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580263769
    },
    {
        "content": "<p>The IG publisher makes it very known when things are broken! :-P</p>",
        "id": 186850104,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580263789
    },
    {
        "content": "<p>Anyway, just saying. It sure would be nice to be able to pick a previous version of the template to use if there are going to be changes.</p>",
        "id": 186850191,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580263881
    },
    {
        "content": "<p>actually, you can. you can nominate the version of the template - it's just a package. Only in this case, I don't think that there's any previous version to depend on since Lloyd hasn't done any versioning</p>",
        "id": 186850286,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580264009
    },
    {
        "content": "<p>THAT's exactly what we need!</p>",
        "id": 186850541,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580264338
    },
    {
        "content": "<p>But coudlnt you start versioning now?</p>",
        "id": 186850549,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580264353
    },
    {
        "content": "<p>unfortunately no. the versioning infrastructure is broken for templates. I just realised. I',m working on that too</p>",
        "id": 186850630,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580264450
    },
    {
        "content": "<p>but.. good news... I think...</p>",
        "id": 186850640,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580264474
    },
    {
        "content": "<p>you should get a good build if you do it now</p>",
        "id": 186850715,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580264617
    },
    {
        "content": "<p>somehow there was a bad build of one of the templates</p>",
        "id": 186850855,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580264819
    },
    {
        "content": "<p>Yay! You fixed it!  Thankyou!! (See I definitely AM a problem-magnet - why didn't anybody else have a problem???)</p>",
        "id": 186851001,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580265111
    },
    {
        "content": "<p>a couple of people reported it to me yesterday, I just didn't get to it</p>",
        "id": 186851142,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580265323
    },
    {
        "content": "<p>you might decide that the forthcoming IGPublisher will give you problems to fix. It won't create any new messages, but will give you much more info about the ones you already have</p>",
        "id": 186851187,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580265371
    },
    {
        "content": "<p>Ok - that makes me feel better.</p>",
        "id": 186851190,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580265388
    },
    {
        "content": "<p>Ok, will check it out.</p>",
        "id": 186851192,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580265396
    },
    {
        "content": "<p>From a related discussion - would be good to point to a specific version of the ig template and of the publisher</p>",
        "id": 186851318,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580265615
    },
    {
        "content": "<p>But at some point we should have something that will not change</p>",
        "id": 186851333,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580265653
    },
    {
        "content": "<p>Some of us just want to work on the<br>\nDev version</p>",
        "id": 186851334,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580265653
    },
    {
        "content": "<p>well, you can point to a specific version of the publisher, but the CI build will always use the current one. Also, old IG publishers have a habit of not running due to server dependencies</p>",
        "id": 186851345,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580265664
    },
    {
        "content": "<p>Where to point to a specific version of the publisher?</p>",
        "id": 186851359,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580265720
    },
    {
        "content": "<p>and I'm simply not interested in supporting old versions of the publisher. My first response will always be, it's only an issue if it's current</p>",
        "id": 186851399,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580265724
    },
    {
        "content": "<p>Yeah, I pretty much only use the CI build as I can't handle how much my machine slows down if I run locally.</p>",
        "id": 186851401,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580265739
    },
    {
        "content": "<p>all IG publishers are released through maven, so you just get the version you want from maven</p>",
        "id": 186851405,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580265749
    },
    {
        "content": "<p>the trade off for running the current ig publisher is that I generally fix issues same day...</p>",
        "id": 186851421,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580265814
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> I've negotiated with <span class=\"user-mention\" data-user-id=\"191505\">@Sean McIlvenna</span> and you can release the new version of the template. He's going to fix up BSeR while I sleep and we'll hold off sending to TSC until it works again tomorrow...</p>",
        "id": 186851428,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580265830
    },
    {
        "content": "<blockquote>\n<p>it's only an issue if it's current</p>\n</blockquote>\n<p>I think that's more than adequate</p>",
        "id": 186851639,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580266143
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> please just give me 30min notice on the new release if it happens in the next few hours...</p>",
        "id": 186851765,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580266347
    },
    {
        "content": "<p>it just happened</p>",
        "id": 186851933,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580266635
    },
    {
        "content": "<p>I know, I saw - I was just about to hit push on my commit. Phew...</p>",
        "id": 186852003,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580266788
    },
    {
        "content": "<p>The new version is now pushed - and it has a distinct version number (now up to 0.0.2).</p>",
        "id": 186852283,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1580267177
    },
    {
        "content": "<p>So now with the new template / new publisher - there are 63 new warnings on BSeR - they are all the same and none of them say which resource has an issue:</p>\n<div class=\"codehilite\"><pre><span></span>warning Unable to find description for the resource. Descriptions are strongly encouraged to allow proper population of the artifact list.\n</pre></div>\n\n\n<p>Any ideas, <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> or <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 186938047,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580339123
    },
    {
        "content": "<p>that'll be from the template</p>",
        "id": 186938145,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580339195
    },
    {
        "content": "<p>it's wanting you to fill out <a href=\"http://hl7.org/fhir/implementationguide-definitions.html#ImplementationGuide.definition.resource.description\" target=\"_blank\" title=\"http://hl7.org/fhir/implementationguide-definitions.html#ImplementationGuide.definition.resource.description\">http://hl7.org/fhir/implementationguide-definitions.html#ImplementationGuide.definition.resource.description</a></p>",
        "id": 186938192,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580339241
    },
    {
        "content": "<p>Ok. I can see on the artifact page which don't have descriptions, but something saying which ones in the QA would be super-helpful.</p>",
        "id": 186938218,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580339274
    },
    {
        "content": "<p>Yeah, I know what it means, it's just not super useful having a long list of warnings without saying WHICH resource is affected.</p>",
        "id": 186938289,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580339307
    },
    {
        "content": "<p>Doesn't it take the resource description from the actual resource if there's nothing in the ig?</p>",
        "id": 186938411,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580339417
    },
    {
        "content": "<p>Oh, must be all the examples.</p>",
        "id": 186938576,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580339568
    },
    {
        "content": "<p>It'll probably be the examples.  They don't have names or descriptions when you expect the publisher to grab them magically, so it's best to at least enumerate those.  I'm sorry for not spitting out more context in the message.  I'll try to fix that soon.</p>",
        "id": 186948612,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1580349356
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> Do we need to increment the version number for a minor change like that (which means incrementing the version number on all dependencies), or can we get away with only doing that for changes that affect inputs, outputs or validation logic?</p>",
        "id": 186948665,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1580349412
    },
    {
        "content": "<p>the version number is nominal right now. there's no release cycle yet. Soon...</p>",
        "id": 186949109,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580350058
    },
    {
        "content": "<p>I think some controls and constraints need to be placed on IG publishing tools. Maybe we should have formal reviews before new templates are dropped on our heads. This process is not a process, lacks standard operating procedures, quality processes, and is OUT OF CONTROL!</p>",
        "id": 186949738,
        "sender_full_name": "Mark Kramer",
        "timestamp": 1580350887
    },
    {
        "content": "<p>To confirm, no need to increment version number (for now) when just correcting an error message to be more expressive?</p>",
        "id": 186949739,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1580350889
    },
    {
        "content": "<p>Mark, the challenge, as always, is limited resources.  When IGs aren't publishing correctly, are reporting spurious error messages or are failing, those impacted want the fixes \"ASAP\".  When the fixes are made and impact others, the message is to slow down.  The number of people who could conduct a meaningful review is quite limited, generally in different time-zones and are all very busy.  Adding additional processes will slow things down and may keep content from publishing on proposed timelines, or with lower quality.  The reality is that the IGPublishing stack is still not terribly mature.  We're at a similar place to where we were with the core publisher a couple of years ago.  As the mechanisms stabilize (which has required time for us to discover what was even needed/desired), the tooling should stabilize as well - and more rigorous change processes might be feasible.  (Though we still haven't introduced those for the core publication - perhaps because changes are so much less common.)  The template machinery was introduced \"just in time\" in September and, by my evaluation, would still be in \"Alpha\" state.  Yes, breaking changes are annoying, but they should be expected.</p>\n<p>Note that with the newest publishing machinery, you can update to the new publisher only when you're ready (though you do need to use the newest publisher when going for official publication or using the CI build).  It should also be possible to lock your publication to a specific version of the template, though again the expectation is that official publications will use the most recent release.  (If the most recent release is profoundly broken, obviously we'd relax that requirement.)</p>\n<p>I'm also not trying to shut down discussion on process improvements.  If we can figure out something that provides a meaningful difference in the experience of IG publishers, doesn't have a significant negative impact on response time and can be managed with our existing pool of contributors, we should absolutely take a look at it.  I don't see any obvious solutions, but that doesn't mean that there aren't any.</p>",
        "id": 186950217,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1580351636
    },
    {
        "content": "<p>Lloyd, there is certainly truth in what you say about limited resources, but you are not approaching this in a sound software engineering manner. You are flinging out code changes that are breaking IGs right and left. I feel for the level of effort you are putting in. But this cannot continue.</p>",
        "id": 186950400,
        "sender_full_name": "Mark Kramer",
        "timestamp": 1580351878
    },
    {
        "content": "<p>The door is open for a concrete alternative proposal.  The reality is we're in a position where the organization has little choice but to rely on \"alpha\" code.  Expecting the platform to behave in a stable production manner is unrealistic.</p>",
        "id": 186950540,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1580352095
    },
    {
        "content": "<p>Let's work on it. There are professional software development practices that have been developed to avoid this type of problem.  We embrace quality practices elsewhere in HL7, but not here.  The lack of process is driving IG developers to tears and anger. This cannot continue.</p>",
        "id": 186950670,
        "sender_full_name": "Mark Kramer",
        "timestamp": 1580352275
    },
    {
        "content": "<p>One change we could institute is a 1 day waiting period between changes being pushed to base and when they're pushed to the derived templates.  That would give IG authors a chance to experiment with the new version to see if there ar issues.  We might even be able to auto check some of the most recently published successful ci builds against the new template to see if there are any unexpected  impacts.  (And to ensure that expected impacts are properly highlighted.)</p>",
        "id": 186950817,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1580352518
    },
    {
        "content": "<p>That is an idea. Let's think more about moving deliberately between working versions, with adequate migration time, notification, communication, regression tests, version control, and the same assurances the rest of the software world uses.</p>",
        "id": 186950997,
        "sender_full_name": "Mark Kramer",
        "timestamp": 1580352746
    },
    {
        "content": "<p>Regression tests are hard in this space.  Publishing an IG takes a significant chunk of time and any change to any of the headers and footers makes automated comparison hard and creates a huge amount of work to maintain.  Keep in mind that whatever process we're using should be tuned for an alpha environment with high-frequency change.</p>",
        "id": 186951187,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1580353069
    },
    {
        "content": "<p>Let's work together to find something that works better for you and the IG community, that takes into account the constraints and pressures we all feel.</p>",
        "id": 186951318,
        "sender_full_name": "Mark Kramer",
        "timestamp": 1580353274
    },
    {
        "content": "<p>so the IG publisher itself is fairly mature now. I'm mostly making fixes in the validator, and it's picking up new quality issues left and right, but publishing has been pretty solid since the technical correction - which we knew was going to be a process disaster.(I think there's been one break since then).</p>\n<p>Now the template is going through rapid change as it settles. What we need is version control over the template. The problem is that my scheme for version controlling the template depends on an external resource that I can't bring into line under my control - that is, <a href=\"http://packages.fhir.org\" target=\"_blank\" title=\"http://packages.fhir.org\">packages.fhir.org</a></p>",
        "id": 186954967,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580359548
    },
    {
        "content": "<p>switching to using <a href=\"http://packages.fhir.org\" target=\"_blank\" title=\"http://packages.fhir.org\">packages.fhir.org</a> itself will introduce instability into the system as we refine the processes associated with that, but I'm keen to get to that as soon as the current development issues are resolved. It's just taking a long time to get them resolved</p>",
        "id": 186955016,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580359626
    },
    {
        "content": "<p>I would like to schedule an IG Creators Birds of a Feather at Sydney to discuss these issues. Would that be productive? What evening could that take place?</p>",
        "id": 186979836,
        "sender_full_name": "Mark Kramer",
        "timestamp": 1580386936
    },
    {
        "content": "<p>I think it could be very productive. I haven't had time to even consider schedule yet. Will look tomorrow morning. Maybe Sunday?</p>",
        "id": 186980425,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580387467
    },
    {
        "content": "<p>That's the first day of the Connectathon (everything is shifted +1 day).  We can work on it then, but it would be smart to engage openly during the WG meeting in a Q5 or Q6 official Birds of Feather.</p>",
        "id": 186980532,
        "sender_full_name": "Mark Kramer",
        "timestamp": 1580387581
    },
    {
        "content": "<p>I agree, I'm up for a Q5/Q6 discussion on this in Sydney. It is extremely frustrating not only to those working on IGs, but to all project managers, stakeholders, etc. when an IG developer says \"zero errors and warnings, ready for HL7 approvals\", then suddenly everything is broken the next morning. There needs to be some predictability to the process.</p>",
        "id": 186995240,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1580396845
    },
    {
        "content": "<blockquote>\n<p>The door is open for a concrete alternative proposal.  The reality is we're in a position where the organization has little choice but to rely on \"alpha\" code.  Expecting the platform to behave in a stable production manner is unrealistic.</p>\n</blockquote>\n<p>This discussion seems to be much about the complaints we get \"this was working yesterday, now it's broken\". <br>\n1. Grahame points to version control of the IG templates and once that's in, i think <strong>all those complaints are removed</strong> - we will have predictability. If i use a specific version, what was working yesterday stays working today (and what was broken yesterday is still broken today because we have one development branch) .</p>",
        "id": 187001378,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580400330
    },
    {
        "content": "<blockquote>\n<p>Grahame points to version control of the IG templates and once that's in, i think all those complaints are removed - we will have predictability.</p>\n</blockquote>\n<p>If the auto-build respects requests to use older versions of the publisher and older versions of the templates, then yes.  If it forces the newest versions (as I think it does now), then there is still some risk w/ the autobuild; and autobuild is the only allowed way for producing official IGs for ballot/publication.</p>",
        "id": 187002664,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1580401066
    },
    {
        "content": "<ol start=\"2\">\n<li>Implement an <strong>extremely lightweight</strong> change process (Jira-based, although for some of us Jira-based and lightweight are not concurrent terms), where we can park the needed changes (insteaf of only zulip) and check them as done. This is extremely useful also in documenting the changes.</li>\n</ol>",
        "id": 187002699,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580401083
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span> yes, I assume this is easy once we get the template to be able to point to a specific version</p>",
        "id": 187002958,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580401217
    },
    {
        "content": "<p>So, I think we have 2 options:</p>\n<ol>\n<li>The IG points to a specific version of the template, and that version of the template points to a specific version of the Publisher</li>\n<li>The IG points to a specific version of the template and to a specific version of the publisher</li>\n</ol>",
        "id": 187003102,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580401307
    },
    {
        "content": "<p>option 1 feels safer</p>",
        "id": 187003109,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580401311
    },
    {
        "content": "<blockquote>\n<p>suddenly everything is broken the next morning</p>\n</blockquote>\n<p>This is effectively saying, I would rather not know what is wrong and go ahead anyway. And I also want FMG to ignore what is potentially wrong as well and not ask.</p>",
        "id": 187017266,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580409987
    },
    {
        "content": "<p>this is predicated on the fact that most of the changes that happen to the publisher are bug fixes and validation improvements. The actual IG publication is stable.</p>",
        "id": 187017735,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580410277
    },
    {
        "content": "<p>I disagree. There needs to be some way of discovering that something is ready for the work group and FMG at the time you fill out the publication request, and having that be stable. If I have zero errors and warnings at that time, and then the morning (or even an hour before) FMG review a change is made that suddenly results in a bunch of new issues (even if they are validation improvements) then that is very problematic from the perspective of those developing IGs, and any project plans, etc. that depend on it.</p>",
        "id": 187020968,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1580412137
    },
    {
        "content": "<p>which bit do you disagree with? You prefer to be in ignorance?</p>",
        "id": 187021048,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580412206
    },
    {
        "content": "<p>If there are problems, there are problems.  If it's necessary to publish without fixing the issues, the FMG can approve that (and has in the past).  However, if there <em>aren't</em> pressing reasons to publish right away (e.g. ballot deadline, rulemaking deadline), then yes it's possible you might think you're done only to discover at the last minute that there's a few days more work because you're suddenly aware of problems you didn't know about before.  </p>\n<p>I think the default for the CI build should always be \"current publisher, current template\".  I also think that should be the default expectation for publishing.  However, I think it should be possible in the ig.ini to point to a prior template and/or publisher and use that instead.  Doing so should automatically spit warnings out in the qa.html.  The project would need to convince the FMG or the publication manager (i.e. Lynn/Grahame) why using the latest and greatest isn't possible/appropriate.  (There may be some situations where either the template or publisher are actually <em>broken</em>, meaning they can't be used.  In other cases, the amount of effort to support the latest version might be unreasonable due to pressing timelines.  If neither of those apply, then the expectation would be to do the work, even if it means publishing a few days later than planned.</p>\n<p>One candidate for the BoF would be Tuesday lunch (our normal Monday lunch session).  My plan had been to go over Jira and template plans and issues, and this would certainly fall into that category.</p>",
        "id": 187029207,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1580417468
    },
    {
        "content": "<p>when FMG is approving, if the IG wasn't being built with the latest IG publisher, I would certainly build it with the latest IG publisher and compare issues. So either way, you'll be comparing issues.</p>",
        "id": 187029505,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580417666
    },
    {
        "content": "<p>and asking FMG for approval</p>",
        "id": 187029525,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580417680
    },
    {
        "content": "<p>I think the situation is different with templates</p>",
        "id": 187029542,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580417699
    },
    {
        "content": "<p>The situation is definitely different with templates. </p>\n<p>I'm actually  not so much worried about seeing more issues with my IG when I re-build again.</p>\n<p>It's the having to work through, say 400 errors that weren't there yesterday and aren't actually issues with the IG but are issues with the publisher that can be a bit of a problem (and yes, <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> is awesome at getting those fixes as quickly as possible), but it also takes a significant amount of time to work through and let Grahame know what the issues are - i.e. trying to figure out if they are my IG issues or just an issue with the IG publisher. </p>\n<p>I am fine with fixing any *actual * errors in my IG.</p>\n<p>The biggest thing (for me) over the past couple of weeks has been the template release with no warning which immediately broke, as in totally crashed my IG build. On the morning before the day we were to get a phase of the publication approval.</p>\n<p>Plus, and I agree that it's probably a very slight chance, I think that a new release of the template could potentially break things in the IG that might never get noticed until after publication. And if one is in the middle of the publication process when a new template is dropped, it could be an issue. Pointing to an earlier known working version of the template would solve all of that.</p>",
        "id": 187033197,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580419869
    },
    {
        "content": "<p>For the IG publisher, maybe a dev version re-build of say, the IGs that have been built in the past 6 months (or some other time frame) before release and if there is a massive jump in errors or bad links, maybe a bit more testing is warranted? Or even just checking to see if there are a bunch of errors that weren't there before, and aren't the new warnings/errors that are expected with the new validation code?</p>",
        "id": 187033581,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580420083
    },
    {
        "content": "<p>Tuesday lunch sounds good.</p>",
        "id": 187033834,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580420232
    },
    {
        "content": "<p>we do actually have test IGs but maintaining them has proven too time-consuming. (unlike the test cases for validation and snapshot generation which are the foundation on which the stability we do have is built on)</p>",
        "id": 187034168,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580420452
    },
    {
        "content": "<p>Yes, I can imagine. What about just usingthe actual existing (recent) ones?</p>",
        "id": 187034329,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580420526
    },
    {
        "content": "<p>It definitely wouldn't be perfect, but a quick delta between validation before and after might be useful?</p>",
        "id": 187034406,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580420579
    },
    {
        "content": "<p>+1 for Tuesday lunch</p>",
        "id": 187034568,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580420657
    },
    {
        "content": "<p>so the process would be:</p>\n<p>for the last X IGs built in on the CI-Build:</p>\n<ul>\n<li>git clone the repository</li>\n<li>build the IG</li>\n<li>compare the count of errors with the last on the CI-build</li>\n<li>review the grounds for any differences</li>\n</ul>\n<p>Not clear how much of that is automatable</p>",
        "id": 187034631,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580420702
    },
    {
        "content": "<p>I think using the last X could be the canary in the coal mine, but not much more than that</p>",
        "id": 187034701,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580420752
    },
    {
        "content": "<p>Yes, something like that.  I'm sort of thinking that if there is a big jump in the count it would warrant a check. And that last bullet would definitely be manual. And probably you! Though, I'd also be fine looking into issues. Like if one of my IGs has a big jump, let me know, I can help debug. Better than desperately trying to figure it out when it goes live!</p>",
        "id": 187035027,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580420939
    },
    {
        "content": "<blockquote>\n<blockquote>\n<p>suddenly everything is broken the next morning</p>\n</blockquote>\n<p>This is effectively saying, I would rather not know what is wrong and go ahead anyway. And I also want FMG to ignore what is potentially wrong as well and not ask.</p>\n</blockquote>\n<p>Not to speak for <span class=\"user-mention\" data-user-id=\"191407\">@Rick Geimer</span> (but he's probably on his 14 hour flight by now - did I mention my flight is only an hour?! ha!), but I think he's probably more talking about what I was mentioning - the times where the IG is broken, but they aren't actually issues with the IG, but are issues with the publisher.</p>",
        "id": 187035537,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580421268
    },
    {
        "content": "<p>I think some other automated flow will be inevitable, so why not that?</p>",
        "id": 187036242,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580421786
    },
    {
        "content": "<p>For sure! Automation always makes me happy...</p>",
        "id": 187036587,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580422044
    },
    {
        "content": "<blockquote>\n<p>so why not that</p>\n</blockquote>\n<p>why not what?</p>",
        "id": 187037579,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580422833
    },
    {
        "content": "<p>Why not design an automatable solution, even if using a test ig, instead of looking at what we can do with a sample of igs, then do manual work...</p>",
        "id": 187037751,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580422979
    },
    {
        "content": "<p>well, there's a bunch of test IGs and they have JUnits associated with them. I just can't maintain them.</p>",
        "id": 187038051,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580423186
    },
    {
        "content": "<p>just to be clear: I spend about 80%of my time supporting the validator and the publisher, which we provide for free. I cannot afford to do that - either financially or practically (I have some support from US Govt for it, but not as much as it needs). So I don't have time to invest in the testing we're talking about here</p>",
        "id": 187038310,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580423389
    },
    {
        "content": "<p>That is my point - we either find a way to get this off your back (including maintaining the test igs) or people's first reaction to any issue will be @ mentioning you, which is not good</p>",
        "id": 187038883,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580423781
    },
    {
        "content": "<p>well, <span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span> will be gradually picking up the work - that's one thing we've picked up, and a lot of that focus will be on quality</p>",
        "id": 187039192,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580424009
    },
    {
        "content": "<p>Exactly. I didn't realize you were doing so much for free. This seems like maybe something that we can be getting other people to help with?</p>",
        "id": 187039212,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580424029
    },
    {
        "content": "<p>Well, that's good. I think <span class=\"user-mention\" data-user-id=\"191505\">@Sean McIlvenna</span> has also expressed interest in helping out?</p>",
        "id": 187039240,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580424064
    },
    {
        "content": "<p>unfortunately very often other people doing the work increases my work load. At least initially, for ure</p>",
        "id": 187039252,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580424082
    },
    {
        "content": "<p>Oh, I hear you and know EXACTLY what you mean... One of my biggest problems - you're damned if you do and damned if you don't!!</p>",
        "id": 187039337,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580424141
    },
    {
        "content": "<p>also, for those reading this thead.. the IG Publisher is a system, not a standalone piece of software. In addition to the IG publisher, publishing also uses:</p>\n<ul>\n<li>the packaging distibution system</li>\n<li>the packages for the core spec</li>\n<li>the current build infrastructure (whether you are current build or not)</li>\n<li><a href=\"http://tx.fhir.org\" target=\"_blank\" title=\"http://tx.fhir.org\">tx.fhir.org</a> </li>\n<li><a href=\"http://test.fhir.org\" target=\"_blank\" title=\"http://test.fhir.org\">test.fhir.org</a></li>\n</ul>",
        "id": 187043329,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580427369
    },
    {
        "content": "<p>And the templates.  And failures with any one of those can result in failures in the build itself (both visible in qa.html and not)</p>",
        "id": 187052488,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1580438388
    },
    {
        "content": "<p>I'm not sure about \"last n\" because that ends up being pretty random.  It might be better to identify specific IGs which are known to be 'entertaining' and, so long as they've built successfully on the current CI-build, build them with the new version and generate a diff of the qa.txt files.</p>",
        "id": 187052558,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1580438471
    },
    {
        "content": "<p>a static list of IGs isn't so hard.... do we have a set of IGs to list?</p>",
        "id": 187053281,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580439685
    },
    {
        "content": "<p>I figured you'd be in the best position to nominate the \"most interesting\".  IPS for sure.  Not sure what else?</p>",
        "id": 187053660,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1580440471
    },
    {
        "content": "<p>my list: SDC IPS ECR  us-core au-base + the 3 main templates</p>",
        "id": 187053703,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580440562
    },
    {
        "content": "<p>Would there be a mechanism to allow release of a template and testing with those without it impacting anyone else?  Or would every IG have to hard-code to a specific template version and just get a warning if they're not using 'current'?</p>",
        "id": 187054452,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1580441880
    },
    {
        "content": "<p>testing templates is harder. let me think about</p>",
        "id": 187054508,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580441958
    },
    {
        "content": "<p>I think we could use the same mechanism, and just use 'alpha' or 'preview'  templates<br>\nThus:</p>\n<ol>\n<li>By default all igs get 'current' template version</li>\n<li>IG editors could explicitly use another template version<br>\n2.1 conservative or production publication uses version 'stable' or '0.0.2'<br>\n2.2 bold users/reviewers can point to 'alpha' version of template<br>\n2.3 the automated testing (and template maintainer) can even use a 'SecretTemplateVersionJust4Lloyd'</li>\n</ol>",
        "id": 187055681,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580444177
    },
    {
        "content": "<p>Happy to see a stable list of igs instead of a random list. In future I think we should list the IG features and simply make sure we cover all of them</p>",
        "id": 187055771,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580444355
    },
    {
        "content": "<p>Features : </p>\n<ul>\n<li>XHTML/ Markdown</li>\n<li>each of the layouts - profiles / Logical models / valuesets...</li>\n<li>Profiles with / without examples</li>\n<li>Derived templates</li>\n<li>OpenAPI</li>\n<li>Active Tables</li>\n<li>With and without inherited invariants<br>\n...<br>\n(for which I was really happy to see just even a small note in the commit to keep track of those)</li>\n</ul>",
        "id": 187056559,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580445858
    },
    {
        "content": "<p>Another approach to the whole thing would be feature toggle, but I don't think it is the most adequate here.</p>",
        "id": 187056701,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580446195
    },
    {
        "content": "<p>Add BSeR - has nested bundles which were challenging...</p>",
        "id": 187057754,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580448115
    },
    {
        "content": "<p>well, I set it up on my machine - 3 templates + USCore, AUBase, SDC ECR IPS MHD - it take s15minutes to run all of that. I'll think about how to make it portable (lots of reasons why it's not portable right now)</p>",
        "id": 187058849,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580449595
    },
    {
        "content": "<p><a href=\"https://github.com/FHIR/fhir-ig-test-record\" target=\"_blank\" title=\"https://github.com/FHIR/fhir-ig-test-record\">https://github.com/FHIR/fhir-ig-test-record</a></p>",
        "id": 187065909,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580460719
    },
    {
        "content": "<p>Should we just be checking counts or should we be doing an actual diff of the errors and warnings found and seeing what's different (whether more or less - as either could be a problem)</p>",
        "id": 187066420,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1580461253
    },
    {
        "content": "<p>the unit tests check the counts. Anything more is manual check - probably a diff on qa.txt between current and [current-ver] is the easiest</p>",
        "id": 187066511,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580461372
    },
    {
        "content": "<p>It seems that this steps relies on one thing that is perhaps obvious, but not for me:<br>\n(How will we tell an IG to use a specific version of the template, and a specific version of the publisher ?</p>",
        "id": 187071289,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580466144
    },
    {
        "content": "<p>you can't, right now.</p>",
        "id": 187113362,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580497701
    },
    {
        "content": "<p>Did we decide on a time when we are going to discuss release processes? Are we locked in for Tuesday lunch?</p>",
        "id": 187183415,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580604482
    },
    {
        "content": "<p>We will certainly have some discussion in that timeslot.  I'm open to discussion beyond that too.  (I don't want to use the whole of Mon. lunch for that topic as there are other things we need to talk about too.)</p>",
        "id": 187183912,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1580605447
    },
    {
        "content": "<p>Mon lunch? Or Tues lunch? Confused!</p>",
        "id": 187191990,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580622727
    },
    {
        "content": "<p>Sorry.  \"The normal Monday lunch session that we have shifted to Tuesday for Australian cultural reasons\" :)</p>",
        "id": 187199350,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1580638211
    },
    {
        "content": "<p>we're all day confused here</p>",
        "id": 187200692,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580640957
    },
    {
        "content": "<p>ok, I'm just releasing a new IGPublisher that makes versioning work for templates. The way it works is that if you nominate a package for the template e.g. </p>\n<div class=\"codehilite\"><pre><span></span><span class=\"k\">[IG]</span>\n<span class=\"na\">template</span><span class=\"o\">=</span><span class=\"s\">hl7.fhir.template</span>\n</pre></div>\n\n\n<p>Then you can now specify a version like so:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"k\">[IG]</span>\n<span class=\"na\">template</span><span class=\"o\">=</span><span class=\"s\">hl7.fhir.template#0.0.5</span>\n</pre></div>\n\n\n<p>if you don't specify a version, that means 'current' - whatever is in github that the authors are playing with.</p>",
        "id": 187204010,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580647284
    },
    {
        "content": "<p>tomorrow I'll set up a history page so you can see the latest versions of the templates</p>",
        "id": 187204012,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580647301
    },
    {
        "content": "<p>done:</p>\n<ul>\n<li><a href=\"http://fhir.org/templates/fhir.base.template/history.html\" target=\"_blank\" title=\"http://fhir.org/templates/fhir.base.template/history.html\">http://fhir.org/templates/fhir.base.template/history.html</a></li>\n<li><a href=\"http://fhir.org/templates/hl7.base.template/history.html\" target=\"_blank\" title=\"http://fhir.org/templates/hl7.base.template/history.html\">http://fhir.org/templates/hl7.base.template/history.html</a></li>\n<li><a href=\"http://fhir.org/templates/hl7.fhir.template/history.html\" target=\"_blank\" title=\"http://fhir.org/templates/hl7.fhir.template/history.html\">http://fhir.org/templates/hl7.fhir.template/history.html</a></li>\n</ul>",
        "id": 187216204,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580670746
    },
    {
        "content": "<p>though most of you will only need <a href=\"http://fhir.org/templates/hl7.fhir.template/history.html\" target=\"_blank\" title=\"http://fhir.org/templates/hl7.fhir.template/history.html\">http://fhir.org/templates/hl7.fhir.template/history.html</a></p>",
        "id": 187216208,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580670762
    },
    {
        "content": "<p>Nice! Thanks <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> !</p>",
        "id": 187223402,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1580683738
    },
    {
        "content": "<p>Agreed, thanks Grahame. <span class=\"user-mention\" data-user-id=\"191505\">@Sean McIlvenna</span> Let's see if we can work template versioning into Trifolia in the near future so we can fall back to an older template if needed. Would be nice to have a GUI option to select from a list of available templates.</p>",
        "id": 187232708,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1580702281
    },
    {
        "content": "<p><a href=\"http://fhir.org/templates/hl7.fhir.template/package-list.json\" target=\"_blank\" title=\"http://fhir.org/templates/hl7.fhir.template/package-list.json\">http://fhir.org/templates/hl7.fhir.template/package-list.json</a> if you want a parseable list</p>",
        "id": 187233153,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580703044
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  and <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> --  I think there might be something that isn't working correctly w/ the new IG Publisher and template versioning.  I noticed that the fhir-shorthand documentation was down and saw that the auto-build failed.  It seems it is failing for others as well.</p>\n<p>The build log says:</p>\n<div class=\"codehilite\"><pre><span></span>Load Template from hl7.fhir.template#current                                     (00:01.0460)\nInstalling hl7.fhir.template#current to the package cache\n  Fetching:\n  Installing:  done.\n Load Template from hl7.base.template#0.0.1                                      (00:01.0509)\nPublishing Content Failed: Unable to find the package source for &#39;hl7.base.template#0.0.1&#39; at http://fhir.org/templates/fhir.base.template/0.0.1/package.tgz (00:01.0621)\n                                                                                 (00:01.0622)\nUse -? to get command line help                                                  (00:01.0622)\n                                                                                 (00:01.0622)\nStack Dump (for debugging):                                                      (00:01.0622)\norg.hl7.fhir.exceptions.FHIRException: Unable to find the package source for &#39;hl7.base.template#0.0.1&#39; at http://fhir.org/templates/fhir.base.template/0.0.1/package.tgz\n    at org.hl7.fhir.utilities.cache.PackageCacheManager.loadPackage(PackageCacheManager.java:708)\n    at org.hl7.fhir.igtools.templates.TemplateManager.loadPackage(TemplateManager.java:219)\n    at org.hl7.fhir.igtools.templates.TemplateManager.installTemplate(TemplateManager.java:87)\n    at org.hl7.fhir.igtools.templates.TemplateManager.installTemplate(TemplateManager.java:101)\n    at org.hl7.fhir.igtools.templates.TemplateManager.loadTemplate(TemplateManager.java:73)\n    at org.hl7.fhir.igtools.publisher.Publisher.initializeFromIg(Publisher.java:1263)\n    at org.hl7.fhir.igtools.publisher.Publisher.initialize(Publisher.java:1204)\n    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:659)\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:6937)\n</pre></div>\n\n\n<p>I noticed that even though we asked (in ig.ini) for <code>hl7.fhir.template#current</code>, the error happens trying to resolve <code>hl7.base.template#0.0.1</code>.  I'm guessing it's trying to resolve <code>hl7.base.template#0.0.1</code> because that must be what <code>hl7.fhir.template</code> is based on.  So that may be fine (and expected).</p>\n<p>But I also noticed that even though it is trying to resolve <code>hl7.base.template#0.0.1</code>, the error message indicates it is looking for it at <code>http://fhir.org/templates/fhir.base.template/0.0.1/package.tgz</code>.  Note that the path contains <code>fhir.base.template</code>, <em>instead of</em> the expected <code>hl7.base.template</code>.  I suspect that perhaps this is at the root of the problem?  Either that or v0.0.1 of that template does not really exist.</p>\n<p>I was able to reproduce this locally and temporarily fix it by switching our template from <code>hl7.fhir.template</code> to <code>hl7.base.template</code> (which actually <em>does</em> resolve fine for v0.0.2).</p>",
        "id": 187286440,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1580752512
    },
    {
        "content": "<p>Quick update:  I temporarily switched <code>fhir-shorthand</code> to <code>hl7.base.template</code> and although it fixed the original problem, now it is failing with a different one (on autobuild only, works locally).  I see that other IGs are failing on this problem too:</p>\n<div class=\"codehilite\"><pre><span></span>IG template is not trusted.  No scripts will be executed                         (00:01.0876)\nPublishing Content Failed: Unable to execute &#39;onLoad&#39; in script &#39;scripts/ant.xml&#39; as the script is not trusted (00:02.0534)\n                                                                                 (00:02.0534)\nUse -? to get command line help                                                  (00:02.0535)\n                                                                                 (00:02.0535)\nStack Dump (for debugging):                                                      (00:02.0535)\norg.hl7.fhir.exceptions.FHIRException: Unable to execute &#39;onLoad&#39; in script &#39;scripts/ant.xml&#39; as the script is not trusted\n    at org.hl7.fhir.igtools.templates.Template.runScriptTarget(Template.java:162)\n    at org.hl7.fhir.igtools.templates.Template.onLoadEvent(Template.java:322)\n    at org.hl7.fhir.igtools.publisher.Publisher.initializeFromIg(Publisher.java:1276)\n    at org.hl7.fhir.igtools.publisher.Publisher.initialize(Publisher.java:1204)\n    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:659)\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:6937)\n</pre></div>",
        "id": 187287295,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1580753086
    },
    {
        "content": "<p>Let me see if I can check what's up</p>",
        "id": 187291927,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580756047
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span> 's analysis is right, <br>\nit is looking for hl7.base.template at <a href=\"http://fhir.org/templates/fhir.base.template/0.0.1/package.tgz\" target=\"_blank\" title=\"http://fhir.org/templates/fhir.base.template/0.0.1/package.tgz\">http://fhir.org/templates/fhir.base.template/0.0.1/package.tgz</a>, instead of the expected hl7.base.template<br>\nI don't know how to fix that, the references in the templates seem ok</p>",
        "id": 187294518,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580757835
    },
    {
        "content": "<p>sigh. this is my fault - a typo in the package-list.json. And I also failed to clear out my package cache before testing</p>",
        "id": 187297983,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580760160
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> you were going to update the current templates to all refer to current?</p>",
        "id": 187298041,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580760202
    },
    {
        "content": "<p>ok it's fixed now</p>",
        "id": 187298350,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580760379
    },
    {
        "content": "<p>confirm, fixed. Thanks</p>",
        "id": 187299565,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580761310
    },
    {
        "content": "<p>Thanks, <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> and <span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span>!</p>",
        "id": 187309290,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1580766964
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> and <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> <br>\nTo use a specific version of a template, I would put this in the ig.ini file, right</p>\n<div class=\"codehilite\"><pre><span></span>template = hl7.fhir.template#0.0.5\ntemplate = hl7.fhir.template#current\n</pre></div>",
        "id": 187318100,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1580773957
    },
    {
        "content": "<p>and is <code>template = hl7.fhir.template</code> the same as <code>template = hl7.fhir.template#current</code></p>",
        "id": 187318125,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1580773993
    },
    {
        "content": "<p>yes and yes</p>",
        "id": 187318627,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580774507
    },
    {
        "content": "<p>thx</p>",
        "id": 187318678,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1580774525
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191407\">@Rick Geimer</span> I'll add \"template\" as an extension to IG that the user can specify. If no value is specified, it will default to \"hl7.fhir.template#current\", otherwise it will use what the user enters, and provide suggestions for known templates based on the package-list.json that <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> mentioned.</p>",
        "id": 187318719,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1580774595
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> , any hopes for a single json file that represents all known templates and their versions in the future?</p>",
        "id": 187318732,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1580774610
    },
    {
        "content": "<p>i.e. hl7.cda.template</p>",
        "id": 187318743,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1580774630
    },
    {
        "content": "<p>If no value is specified, I would default to the base template</p>",
        "id": 187319231,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580775084
    },
    {
        "content": "<blockquote>\n<p>any hopes for a single json file that represents all known templates and their versions in the future?</p>\n</blockquote>\n<p>I woudn't consider that but I would consider adding a templates.json to <a href=\"http://fhir.org/templates\" target=\"_blank\" title=\"http://fhir.org/templates\">http://fhir.org/templates</a></p>",
        "id": 187319337,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580775202
    },
    {
        "content": "<p>ok. thanks <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  now that I know of <a href=\"http://fhir.org/templates\" target=\"_blank\" title=\"http://fhir.org/templates\">http://fhir.org/templates</a>, though... I'm wondering if you could add hl7.cda.template to it? I assume that with these changes, I will no longer be able to publish cda-core-2.0 or cda-ccda-2.2 using the new template system until hl7.cda.template gets added to this list of published templates</p>",
        "id": 187326040,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1580784970
    },
    {
        "content": "<p>I have to add a few more templates to the system. Who maintains hl7.cda.template?</p>",
        "id": 187326053,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580785010
    },
    {
        "content": "<p>I suppose I do</p>",
        "id": 187326063,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1580785041
    },
    {
        "content": "<p>:)</p>",
        "id": 187326064,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1580785042
    },
    {
        "content": "<p>ok, so, here's how it works:</p>\n<ul>\n<li>the stated version, and the version of it's dependencies has to be \"current\"</li>\n<li>there'll be a package-list.json; you set up new releases by editing that. </li>\n<li>once you're ready to go, let me know, and I'll update the versions to all correct and release a new version</li>\n</ul>",
        "id": 187327205,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580786936
    },
    {
        "content": "<p>ok inducted and published as v 0.0.4</p>",
        "id": 187332849,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580796217
    },
    {
        "content": "<p>I am getting a new error<br>\nError : Fatal error during transformation using C:\\PQCMC_IG\\template\\scripts\\onGenerate.genJson.xslt: Processing terminated by xsl:message at line 7 in onGenerate.genJson.xslt; SystemID: file:/C:/PQCMC_IG/template/scripts/onGenerate.genJson.xslt; Line#: 7; Column#: -1</p>\n<p>Line #7 is &lt;xsl:message terminate=\"yes\"&gt;IG must include a definition parameter with a code of 'releaselabel'.  Value can be 'CI build' or some other status.&lt;/xsl:message&gt;</p>\n<p>Is this looking for a parameter in the control file?  I already have   \"status\" : \"ci-build\" in package-list.json.</p>",
        "id": 187338671,
        "sender_full_name": "Catherine Hosage Norman",
        "timestamp": 1580804779
    },
    {
        "content": "<p>I added  the following  to the control xml file.  Seems redundant to the ig.ini  info.  I am past these errors.  <br>\n&lt;parameter&gt;<br>\n      &lt;code value=\"releaselabel\"/&gt;<br>\n      &lt;value value=\"CI Build\"/&gt;<br>\n    &lt;/parameter&gt;<br>\n    &lt;parameter&gt;<br>\n      &lt;code value=\"copyrightyear\"/&gt;<br>\n      &lt;value value=\"2020+\"/&gt;<br>\n    &lt;/parameter&gt;</p>\n<p>Now on to the next error.  Have you stopped supporting spreadsheets?  Files that worked last week do not work anymore.  I have a sample xml profile that works fine, but when I use the '-spreadsheet' suffix it cannot find the file.  If I take off the suffix, it finds the file but cannot parse it.</p>",
        "id": 187339861,
        "sender_full_name": "Catherine Hosage Norman",
        "timestamp": 1580806360
    },
    {
        "content": "<p>The parameter needs to be in the IG xml itself</p>",
        "id": 187339948,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1580806449
    },
    {
        "content": "<p>Thank Jose,  do you know if there is a new parameter for spreadsheets?  It just stopped working since last week.</p>",
        "id": 187340027,
        "sender_full_name": "Catherine Hosage Norman",
        "timestamp": 1580806548
    },
    {
        "content": "<p>I don't think there's been any change there</p>",
        "id": 187340201,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1580806724
    },
    {
        "content": "<p>The parameter goes into your ImplementationGuide, not structure definitions.  I'll fix your IG</p>",
        "id": 187341299,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1580807867
    },
    {
        "content": "<p>Though it looks like you need to commit first because the version in Git isn't using ig.ini yet.  (<span class=\"user-mention\" data-user-id=\"197370\">@Catherine Hosage Norman</span> )</p>",
        "id": 187341914,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1580808437
    },
    {
        "content": "<p>I cannot get it to build locally so I have not put it in git.   Is there a parameter for using the spreadsheets?  Both of these worked last week, now they cannot be found.</p>",
        "id": 187342159,
        "sender_full_name": "Catherine Hosage Norman",
        "timestamp": 1580808643
    },
    {
        "content": "<p>I have tried all sorts of options.   I put back in <br>\n                    &lt;extension url=\"<a href=\"http://hl7.org/fhir/StructureDefinition/implementationguide-spreadsheet-profile\" target=\"_blank\" title=\"http://hl7.org/fhir/StructureDefinition/implementationguide-spreadsheet-profile\">http://hl7.org/fhir/StructureDefinition/implementationguide-spreadsheet-profile</a>\"&gt;<br>\n                &lt;valueBoolean value=\"true\"/&gt;<br>\n            &lt;/extension&gt;<br>\nafter I had taken it out a couple of weeks ago because it was throwing an error on saving.  Now the save is ok, but still getting unable to find if I save the Excel file as pharmqualityspecification-spreadsheet.xml and get \"unable to parse\" if I save it as pharmqualityspecification.xml  I am successful  with small profile defined as xml method and no spreadsheet.  I really did not want to convert to xml definition at this point, but it there is no other option in the short term let me know.</p>",
        "id": 187343973,
        "sender_full_name": "Catherine Hosage Norman",
        "timestamp": 1580810257
    },
    {
        "content": "<p>Spreadsheets should work fine.  Commit the current state and I'll work on making it build tomorrow night Sydney time.</p>",
        "id": 187354512,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1580819786
    }
]