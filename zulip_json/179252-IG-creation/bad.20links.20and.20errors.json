[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span>  and <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  <br>\nthis branch has bad links  all pointing spuriously to us core - @GG  I think you know about that one...</p>\n<p><a href=\"https://github.com/HL7/davinci-deqm/tree/20190314_badlinksanderrors\" target=\"_blank\" title=\"https://github.com/HL7/davinci-deqm/tree/20190314_badlinksanderrors\">https://github.com/HL7/davinci-deqm/tree/20190314_badlinksanderrors</a></p>\n<p>1. has 7 bad links  all pointing to erroneously  tp us core - @GG  I think you know about that one already<br>\n2. the errors for the measurereport are urls that do not resolve  @ Bryn  can you verify these are correct and  @GG if these are legit but non resolveable measure definitions can we get pass?<br>\ne.g.  </p>\n<div class=\"codehilite\"><pre><span></span>/scratch/ig-build-temp-PFXVT0/repo/source/examples/MeasureReport-indv-measurereport01.json\nPath    Severity    Message\nMeasureReport/indv-measurereport01: MeasureReport.measure   error   Unable to resolve resource &#39;https://ncqa.org/fhir/ig/Measure/measure-mrp&#39;\nMeasureReport/indv-measurereport01: MeasureReport.evaluatedResources    warning A Reference without an actual reference or identifier should have a display\n</pre></div>\n\n\n<p>3. @GG , the errors for the cap statements are curious this is the R4 canonicals for this (<strong>R4</strong>) operation and does not resolve when stick in browser either.   I'm not sure if is a problem being in a STU3 ig.  I think we should get a pass on this one too.<br>\ne.g.. </p>\n<div class=\"codehilite\"><pre><span></span>CapabilityStatement/consumer-server: CapabilityStatement.rest.operation[1].definition   error   Unable to resolve resource &#39;http://hl7.org/fhir/OperationDefinition/Measure-submit-data&#39;\n</pre></div>",
        "id": 160842415,
        "sender_full_name": "Eric Haas",
        "timestamp": 1552618358
    },
    {
        "content": "<p>#1yes I know about them</p>",
        "id": 160845956,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552623696
    },
    {
        "content": "<p>#2 - I'm not sure I follow what is intended here?</p>",
        "id": 160846002,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552623743
    },
    {
        "content": "<p>2. Bryn needs to take crack at it first.</p>",
        "id": 160846346,
        "sender_full_name": "Eric Haas",
        "timestamp": 1552624276
    },
    {
        "content": "<p>MeasureReport.measure is type Reference and in example is using a presumably valid uri value in reference that does not resolve.  hence the error</p>",
        "id": 160846534,
        "sender_full_name": "Eric Haas",
        "timestamp": 1552624562
    },
    {
        "content": "<p>well, it's the 'presumably valid' bit I don't follow</p>",
        "id": 160846640,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552624753
    },
    {
        "content": "<p>#3 - is a FHIR version issue. The error is correct because the IG is R3 and the operation was only defined in R4</p>",
        "id": 160847333,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552625965
    },
    {
        "content": "<p>And I'm not minded to give you a pass on that one</p>",
        "id": 160847339,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552625988
    },
    {
        "content": "<p>What I was trying to do with #2 was use what will really be the URL for the Measure; it's a HEDIS measure, so it won't be published as an HL7 IG, so the measure URL we want it to be is <a href=\"http://ncqa.org/fhir/hedis/Measure/measure-mrp\" target=\"_blank\" title=\"http://ncqa.org/fhir/hedis/Measure/measure-mrp\">http://ncqa.org/fhir/hedis/Measure/measure-mrp</a>, but I can't use <a href=\"http://ncqa.org\" target=\"_blank\" title=\"http://ncqa.org\">http://ncqa.org</a> as a base in the IG publisher, so it's actually <a href=\"http://hl7.org/fhir/us/hedis/Measure/measure-mrp\" target=\"_blank\" title=\"http://hl7.org/fhir/us/hedis/Measure/measure-mrp\">http://hl7.org/fhir/us/hedis/Measure/measure-mrp</a> right now.</p>",
        "id": 160850632,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1552631092
    },
    {
        "content": "<p>So try updating it to that value (though it still won't actually resolve, because the real link is in the current build: <a href=\"http://build.fhir.org/ig/cqframework/hedis-ig/Measure-measure-mrp.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/cqframework/hedis-ig/Measure-measure-mrp.html\">http://build.fhir.org/ig/cqframework/hedis-ig/Measure-measure-mrp.html</a>)</p>",
        "id": 160850703,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1552631212
    },
    {
        "content": "<blockquote>\n<p>I can't use <a href=\"http://ncqa.org\" target=\"_blank\" title=\"http://ncqa.org\">http://ncqa.org</a> as a base in the IG publisher</p>\n</blockquote>\n<p>because?</p>",
        "id": 160850725,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552631278
    },
    {
        "content": "<p>The link checking at the end says the links are bad, right? Or was that restriction removed?</p>",
        "id": 160852362,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1552633810
    },
    {
        "content": "<p>I don't know why it would say that <a href=\"http://ncqa.org\" target=\"_blank\" title=\"http://ncqa.org\">ncqa.org</a> links are valid or not</p>",
        "id": 160852371,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552633853
    },
    {
        "content": "<p>Okay that built locally and I just committed. I know that was an issue at some point with the ig publisher, but I haven't tried it in a while, so I don't know when that changed. It used to require the canonical base start with <a href=\"http://hl7.org/fhir\" target=\"_blank\" title=\"http://hl7.org/fhir\">hl7.org/fhir</a>.</p>",
        "id": 160854129,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1552636446
    },
    {
        "content": "<p>So now the measure example is here: <a href=\"http://build.fhir.org/ig/cqframework/hedis-ig/Measure-measure-mrp.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/cqframework/hedis-ig/Measure-measure-mrp.html\">http://build.fhir.org/ig/cqframework/hedis-ig/Measure-measure-mrp.html</a></p>",
        "id": 160854194,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1552636564
    },
    {
        "content": "<p>And has the canonical <a href=\"http://ncqa.org/fhir/us/hedis/Measure/measure-mrp\" target=\"_blank\" title=\"http://ncqa.org/fhir/us/hedis/Measure/measure-mrp\">http://ncqa.org/fhir/us/hedis/Measure/measure-mrp</a></p>",
        "id": 160854199,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1552636583
    },
    {
        "content": "<blockquote>\n<p>It used to require the canonical base start with <a href=\"http://hl7.org/fhir\" target=\"_blank\" title=\"http://hl7.org/fhir\">hl7.org/fhir</a>.</p>\n</blockquote>\n<p>a very very long time ago</p>",
        "id": 160868870,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552652022
    },
    {
        "content": "<p>So on #3 (the links to R4 profiles), what should we do there?</p>",
        "id": 160877757,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1552658975
    },
    {
        "content": "<p>They are links to R4 OperationDefinitions.  I can add to capability statement doco and remove the element as a work around,  but the fundamental question remains,  can we reference a R4 artifact in an R3 IG ?  </p>\n<p>My other concern is that the R4 operation canonical are not resolving  should they?</p>\n<p>R4  canonical that does not resolve :  <a href=\"http://hl7.org/fhir/OperationDefinition/Measure-submit-data\" target=\"_blank\" title=\"http://hl7.org/fhir/OperationDefinition/Measure-submit-data\">http://hl7.org/fhir/OperationDefinition/Measure-submit-data</a>  for <a href=\"http://build.fhir.org/measure-operation-submit-data.html\" target=\"_blank\" title=\"http://build.fhir.org/measure-operation-submit-data.html\">http://build.fhir.org/measure-operation-submit-data.html</a></p>",
        "id": 160920754,
        "sender_full_name": "Eric Haas",
        "timestamp": 1552691044
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span>  TY</p>",
        "id": 160921284,
        "sender_full_name": "Eric Haas",
        "timestamp": 1552691559
    },
    {
        "content": "<p>no you can't reference an R4 artifact from an R3 IG. If you want to pre-adopt, publish the R4 operation definition in the IG as an R3 operation definition</p>",
        "id": 160921304,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552691598
    },
    {
        "content": "<p>......arrgghhhh.....   OK</p>",
        "id": 160921527,
        "sender_full_name": "Eric Haas",
        "timestamp": 1552691855
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span>  I need to set up the hedis-ig as a dependency for that to work.  What is the location to put in ig.json so the package gets uploaded.   Othewise I can make it a display element for now...</p>",
        "id": 160923371,
        "sender_full_name": "Eric Haas",
        "timestamp": 1552694063
    },
    {
        "content": "<p>you shouldn't need a location. just use the package id</p>",
        "id": 160923523,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552694238
    },
    {
        "content": "<p>either way I don't know it</p>",
        "id": 160923549,
        "sender_full_name": "Eric Haas",
        "timestamp": 1552694271
    },
    {
        "content": "<p><a href=\"http://build.fhir.org/ig/cqframework/hedis-ig/package-list.json\" target=\"_blank\" title=\"http://build.fhir.org/ig/cqframework/hedis-ig/package-list.json\">http://build.fhir.org/ig/cqframework/hedis-ig/package-list.json</a></p>",
        "id": 160923618,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1552694327
    },
    {
        "content": "<p>Well, that’s where it’s supposed to be. I guess I don’t have one set up yet.</p>",
        "id": 160923668,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1552694391
    },
    {
        "content": "<p>To build it locally, it’s <a href=\"http://github.com/cqframework/hedis-ig\" target=\"_blank\" title=\"http://github.com/cqframework/hedis-ig\">http://github.com/cqframework/hedis-ig</a></p>",
        "id": 160923762,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1552694454
    },
    {
        "content": "<p>And the package name is us-hedis</p>",
        "id": 160923782,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1552694469
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 160923841,
        "sender_full_name": "Eric Haas",
        "timestamp": 1552694527
    },
    {
        "content": "<blockquote>\n<p>package name is us-hedis</p>\n</blockquote>\n<p>That's not a valid package name. It should be something like hl7.fhir.us.hedis</p>",
        "id": 160923886,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552694637
    },
    {
        "content": "<p>Gotcha, one sec...</p>",
        "id": 160924029,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1552694809
    },
    {
        "content": "<p>ncqa.fhir.us.hedis ?</p>",
        "id": 160924606,
        "sender_full_name": "Eric Haas",
        "timestamp": 1552695582
    },
    {
        "content": "<p>Yes, that's what I set it to and just committed that</p>",
        "id": 160924660,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1552695631
    },
    {
        "content": "<p>also I get this error</p>\n<div class=\"codehilite\"><pre><span></span>Stack Dump (for debugging):\njava.lang.Exception: Can&#39;t have an exampleFor unless the file has exactly one resource\n    at org.hl7.fhir.igtools.publisher.Publisher.load(Publisher.java:1838)\n    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:563)\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:5098)\nException in thread &quot;main&quot; java.lang.NullPointerException\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:5108)\nErics-Air-2:hedis-ig ehaas$\n</pre></div>\n\n\n<p>when i run locally?</p>",
        "id": 160924807,
        "sender_full_name": "Eric Haas",
        "timestamp": 1552695894
    },
    {
        "content": "<p>...</p>",
        "id": 160924911,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1552696050
    },
    {
        "content": "<p>nm ....I fixed it</p>",
        "id": 160925204,
        "sender_full_name": "Eric Haas",
        "timestamp": 1552696440
    },
    {
        "content": "<p>rather commented out the offending bits</p>",
        "id": 160925252,
        "sender_full_name": "Eric Haas",
        "timestamp": 1552696459
    },
    {
        "content": "<p>I don't get that error</p>",
        "id": 160925253,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1552696461
    },
    {
        "content": "<p>I even refreshed from the latest build</p>",
        "id": 160925261,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1552696483
    },
    {
        "content": "<p>in the implementation guide resource.   I did not see what the error was either.</p>",
        "id": 160925272,
        "sender_full_name": "Eric Haas",
        "timestamp": 1552696511
    },
    {
        "content": "<blockquote>\n<p>ncqa.fhir.us.hedis</p>\n</blockquote>\n<p>if the root is ncqa, they own whatever follows, not us. ncqa is US realm, so I would think ncqa.fhir.hedis but it's their call</p>",
        "id": 160926345,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552698114
    },
    {
        "content": "<p>Okidoki that was bit of effort to get to work </p>\n<p>BTW @GG  ig.json requires both  package <em>and</em> location for this to work:</p>\n<div class=\"codehilite\"><pre><span></span>...\n    {\n      &quot;version&quot;: &quot;dev&quot;,\n      &quot;name&quot;: &quot;ushedis&quot;,\n      &quot;package&quot; : &quot;ncqa.fhir.us.hedis&quot;,\n      &quot;location&quot;: &quot;http://ncqa.org/fhir/us/hedis&quot;\n    }\n...\n</pre></div>\n\n\n<p>get NPE if location is missing and some other error if package is missing.</p>",
        "id": 160926394,
        "sender_full_name": "Eric Haas",
        "timestamp": 1552698137
    },
    {
        "content": "<p>it should only need package, though it's a struggle for me till we get a real package server. Where's the NPE?</p>",
        "id": 160926598,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552698475
    },
    {
        "content": "<p>I think its documented this way actually</p>\n<p>here is error when is: </p>\n<div class=\"codehilite\"><pre><span></span>...\n    {\n      &quot;version&quot;: &quot;dev&quot;,\n      &quot;name&quot;: &quot;ushedis&quot;,\n      &quot;location&quot;: &quot;http://ncqa.org/fhir/us/hedis&quot;\n    }\n...\n</pre></div>\n\n\n<p>gives me...</p>\n<div class=\"codehilite\"><pre><span></span>Stack Dump (for debugging):                                                      (39.0255sec)\norg.hl7.fhir.exceptions.FHIRException: Error fetching package list for us-hedis from http://ncqa.org/fhir/us/hedis/package-list.json: com.google.gson.stream.MalformedJsonException: Use JsonReader.setLenient(true) to accept malformed JSON at line 2 column 2 path $\n    at org.hl7.fhir.utilities.cache.PackageCacheManager.loadPackage(PackageCacheManager.java:611)\n    at org.hl7.fhir.igtools.publisher.Publisher.resolveDependency(Publisher.java:1636)\n    at org.hl7.fhir.igtools.publisher.Publisher.loadIg(Publisher.java:1561)\n    at org.hl7.fhir.igtools.publisher.Publisher.initializeFromJson(Publisher.java:1181)\n    at org.hl7.fhir.igtools.publisher.Publisher.initialize(Publisher.java:976)\n    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:549)\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:5099)\nCaused by: com.google.gson.JsonSyntaxException: com.google.gson.stream.MalformedJsonException: Use JsonReader.setLenient(true) to accept malformed JSON at line 2 column 2 path $\n    at com.google.gson.JsonParser.parse(JsonParser.java:65)\n    at com.google.gson.JsonParser.parse(JsonParser.java:45)\n    at org.hl7.fhir.utilities.cache.PackageCacheManager.fetchJson(PackageCacheManager.java:646)\n    at org.hl7.fhir.utilities.cache.PackageCacheManager.loadPackage(PackageCacheManager.java:609)\n    ... 6 more\nCaused by: com.google.gson.stream.MalformedJsonException: Use JsonReader.setLenient(true) to accept malformed JSON at line 2 column 2 path $\n    at com.google.gson.stream.JsonReader.syntaxError(JsonReader.java:1568)\n    at com.google.gson.stream.JsonReader.checkLenient(JsonReader.java:1409)\n    at com.google.gson.stream.JsonReader.doPeek(JsonReader.java:542)\n    at com.google.gson.stream.JsonReader.peek(JsonReader.java:425)\n    at com.google.gson.JsonParser.parse(JsonParser.java:60)\n    ... 9 more\nException in thread &quot;main&quot; java.lang.NullPointerException\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:5109)\n</pre></div>",
        "id": 160926664,
        "sender_full_name": "Eric Haas",
        "timestamp": 1552698586
    },
    {
        "content": "<p>what if you just have the package?</p>",
        "id": 160926729,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552698654
    },
    {
        "content": "<p>btw that location implies that it's actually going to published at <a href=\"http://ncqa.org/fhir\" target=\"_blank\" title=\"http://ncqa.org/fhir\">http://ncqa.org/fhir</a> - which is good if it is, but I'll be surprised if that is sorted and agreed</p>",
        "id": 160926754,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552698691
    },
    {
        "content": "<p>when locatiion is missing is an NPE;</p>\n<div class=\"codehilite\"><pre><span></span>...\n    {\n      &quot;version&quot;: &quot;dev&quot;,\n      &quot;name&quot;: &quot;ushedis&quot;,\n      &quot;package&quot; : &quot;ncqa.fhir.us.hedis&quot;\n\n    }\n...\n</pre></div>\n\n\n<p>gives me...</p>\n<div class=\"codehilite\"><pre><span></span>Load qicore (http://hl7.org/fhir/us/qicore) from hl7.fhir.us.qicore#current      (29.0328sec)\nLoad uscore (http://hl7.org/fhir/us/core) from hl7.fhir.us.core#2.0.0            (30.0405sec)\nLoad ushedis (http://ncqa.org/fhir/us/hedis) from ncqa.fhir.us.hedis#dev         (31.0131sec)\nPublishing Content Failed: null                                                  (31.0133sec)\n                                                                                 (31.0133sec)\nUse -? to get command line help                                                  (31.0133sec)\n                                                                                 (31.0134sec)\nStack Dump (for debugging):                                                      (31.0134sec)\njava.lang.NullPointerException\n    at org.hl7.fhir.igtools.publisher.Publisher.loadIg(Publisher.java:1574)\n    at org.hl7.fhir.igtools.publisher.Publisher.initializeFromJson(Publisher.java:1181)\n    at org.hl7.fhir.igtools.publisher.Publisher.initialize(Publisher.java:976)\n    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:549)\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:5099)\nException in thread &quot;main&quot; java.lang.NullPointerException\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:5109)\n</pre></div>",
        "id": 160926763,
        "sender_full_name": "Eric Haas",
        "timestamp": 1552698712
    },
    {
        "content": "<p>I'm happy is working with both package and location and can live with that ...</p>",
        "id": 160926827,
        "sender_full_name": "Eric Haas",
        "timestamp": 1552698773
    },
    {
        "content": "<p>ok</p>",
        "id": 160926842,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552698790
    },
    {
        "content": "<blockquote>\n<p>btw that location implies that it's actually going to published at <a href=\"http://ncqa.org/fhir\" target=\"_blank\" title=\"http://ncqa.org/fhir\">http://ncqa.org/fhir</a> - which is good if it is, but I'll be surprised if that is sorted and agreed</p>\n</blockquote>",
        "id": 160926905,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1552698871
    },
    {
        "content": "<p>It's not, just to be clear, but it's close enough for now.</p>",
        "id": 160926908,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1552698890
    },
    {
        "content": "<p>Working on it.</p>",
        "id": 160926909,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1552698893
    },
    {
        "content": "<p>ok</p>",
        "id": 160926922,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552698906
    },
    {
        "content": "<p>assuming @Bryn will have a 'current'  package for when I run on autobuid  :-)</p>",
        "id": 160926932,
        "sender_full_name": "Eric Haas",
        "timestamp": 1552698952
    },
    {
        "content": "<p>This is a good question, what happens when it hits the autobuild?</p>",
        "id": 160927112,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1552699208
    },
    {
        "content": "<p>looks for current</p>",
        "id": 160927117,
        "sender_full_name": "Eric Haas",
        "timestamp": 1552699222
    },
    {
        "content": "<p>Does it need a package-list.json on the current build directory?</p>",
        "id": 160927118,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1552699224
    },
    {
        "content": "<p>Or is it going to hit <a href=\"http://ncqa.org/fhir/us/hedis\" target=\"_blank\" title=\"http://ncqa.org/fhir/us/hedis\">http://ncqa.org/fhir/us/hedis</a>?</p>",
        "id": 160927122,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1552699241
    },
    {
        "content": "<p>Which will clearly 404 :)</p>",
        "id": 160927128,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1552699261
    },
    {
        "content": "<p>no it hits the build server for current</p>",
        "id": 160930196,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552704021
    }
]