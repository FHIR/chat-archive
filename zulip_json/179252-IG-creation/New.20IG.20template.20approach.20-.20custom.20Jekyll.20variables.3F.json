[
    {
        "content": "<p>We are looking to make use of <a href=\"https://jekyllrb.com/docs/datafiles/\" target=\"_blank\" title=\"https://jekyllrb.com/docs/datafiles/\">Jekyll's custom data capability</a>, to efficiently set various values for narrative text in an IG's markdown files. <br>\nIn the ig.json / old template arrangement, this was easily done by adding a folder \"./pages/_data\" alongside the \"./pages/_includes\" folder with (eg) yaml files containing static narrative values; eg a file \"ig-config.yml\" with </p>\n<div class=\"codehilite\"><pre><span></span>static_text: &quot;text goes here&quot;\n</pre></div>\n\n\n<p>Then if this text is required across multiple markdown files, we can add <code>{{ site.data.ig-config.static_text }}</code>into whichever markdown files and the \"text goes here\" gets populated accordingly.</p>\n<p>However, looking into the new IG template approach (using IGP v1.0.70 and custom template that inherits from <a href=\"https://github.com/HL7/ig-template-base\" target=\"_blank\" title=\"https://github.com/HL7/ig-template-base\">https://github.com/HL7/ig-template-base</a>), I have not figured out how this can be done. I have added a \"_data\" folder with a yml file (with above details) into various locations and nothing yet seems to work. That is, adding into the input IG rather than the template IG, into \"./input\", \"./input/includes\", \"./input/pagecontent\" - all have no impact. As does a json file instead.</p>\n<p>Just wondering if this capability is available with the new template approach  - and if so, any clues as to how would I get it to work?</p>",
        "id": 190042083,
        "sender_full_name": "Rob Eastwood",
        "timestamp": 1583731000
    },
    {
        "content": "<p>It's not something built in right now.  it's something we could potentially add support for (or you could do it with a custom template that inherits from the base).  Do you want to create a Git issue against the base template?</p>",
        "id": 190084738,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1583769503
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> <a href=\"#narrow/stream/179252-IG-creation/topic/New.20IG.20template.20approach.20-.20custom.20Jekyll.20variables.3F/near/190084738\" title=\"#narrow/stream/179252-IG-creation/topic/New.20IG.20template.20approach.20-.20custom.20Jekyll.20variables.3F/near/190084738\">said</a>:</p>\n<blockquote>\n<p>It's not something built in right now.  it's something we could potentially add support for (or you could do it with a custom template that inherits from the base).  Do you want to create a Git issue against the base template?</p>\n</blockquote>\n<p>Thank you very much <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> - I'll have a tinker with our custom template as well as creating a git issue, as suggested.</p>",
        "id": 190124207,
        "sender_full_name": "Rob Eastwood",
        "timestamp": 1583792492
    },
    {
        "content": "<p>what would be the location for a jekyll data file in both those scenarios?</p>\n<ol>\n<li>in the template</li>\n<li>for one IG</li>\n</ol>",
        "id": 204533616,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1595328721
    },
    {
        "content": "<p>The template would have to decide on an appropriate folder and copy whatever was in it to temp/pages/_data</p>",
        "id": 204554959,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1595342178
    },
    {
        "content": "<p>My leaning for a folder name would be 'data'</p>",
        "id": 204555034,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1595342219
    },
    {
        "content": "<p>:) indeed i created a folder called \"data\" - from your answer the template does not have the feature to copy that over to the temp folder. Should I add this to ant.xml?</p>",
        "id": 204555236,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1595342315
    },
    {
        "content": "<p>y.  From both template/data and input/data.  Not sure if we have to pass the filenames in or not</p>",
        "id": 204559021,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1595343880
    },
    {
        "content": "<p>i'd copy the whole folder, recursively.</p>",
        "id": 204559932,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1595344260
    },
    {
        "content": "<p>start with template, then add input (allows input to override template).</p>",
        "id": 204560636,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1595344584
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192270\">@Rob Eastwood</span>  you can add custom variables to your IG put your yaml, or json or csv file in the input/data folder.   like so...<br>\n<a href=\"/user_uploads/10155/zJWruzMaKPYTAawe9cRG8Rub/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/zJWruzMaKPYTAawe9cRG8Rub/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/zJWruzMaKPYTAawe9cRG8Rub/image.png\"></a></div>",
        "id": 204562507,
        "sender_full_name": "Eric Haas",
        "timestamp": 1595345325
    },
    {
        "content": "<p>you can retrieve these variable using  for example {{site.data.,my_params.title}}  for example.</p>\n<p>Unfortunately, you can't use _config.yaml directly.</p>",
        "id": 204562883,
        "sender_full_name": "Eric Haas",
        "timestamp": 1595345491
    },
    {
        "content": "<p>you can also add custom params into the ig resource </p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">definition</span><span class=\"p\">:</span>\n  <span class=\"nt\">parameter</span><span class=\"p\">:</span>\n    <span class=\"p p-Indicator\">-</span> <span class=\"nt\">code</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">foo</span>\n      <span class=\"nt\">value</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">bar</span>\n</code></pre></div>\n\n\n<p>but I think the only way you can access them is via the method described above.</p>",
        "id": 204563488,
        "sender_full_name": "Eric Haas",
        "timestamp": 1595345755
    },
    {
        "content": "<p>you can even stick you resources in here and manipulate the elements directly as variables</p>",
        "id": 204563870,
        "sender_full_name": "Eric Haas",
        "timestamp": 1595345901
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191401\">Eric Haas</span> <a href=\"#narrow/stream/179252-IG-creation/topic/New.20IG.20template.20approach.20-.20custom.20Jekyll.20variables.3F/near/204562883\">said</a>:</p>\n<blockquote>\n<p>you can retrieve these variable using  for example {{site.data.,my_params.title}}  for example.</p>\n</blockquote>\n<p>Great, thanks <span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> - that works for me; much appreciated.</p>",
        "id": 204639788,
        "sender_full_name": "Rob Eastwood",
        "timestamp": 1595405518
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191401\">Eric Haas</span> <a href=\"#narrow/stream/179252-IG-creation/topic/New.20IG.20template.20approach.20-.20custom.20Jekyll.20variables.3F/near/204563488\">said</a>:</p>\n<blockquote>\n<p>you can also add custom params into the ig resource <br>\n...<br>\nbut I think the only way you can access them is via the method described above.</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> - I have been making use of some of the standard ImplementationGuide resource parameters, but had not come across adding custom ones. Not sure what you mean by \"method described above\" though - is it via the ant.xml mentioned by Jose? Or something else? Any pointers in that direction would be appreciated.</p>",
        "id": 204640662,
        "sender_full_name": "Rob Eastwood",
        "timestamp": 1595406248
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191401\">Eric Haas</span> <a href=\"#narrow/stream/179252-IG-creation/topic/New.20IG.20template.20approach.20-.20custom.20Jekyll.20variables.3F/near/204563870\">said</a>:</p>\n<blockquote>\n<p>you can even stick you resources in here and manipulate the elements directly as variables</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span>  - this sounds most interesting, however I must confess to not understanding what you mean here. Do you have a shareable working example that I could examine?</p>\n<p>Thank you very much for your time.</p>",
        "id": 204640885,
        "sender_full_name": "Rob Eastwood",
        "timestamp": 1595406420
    },
    {
        "content": "<p>what Eric means is that since FHIR resources are json files, nothing prevents you from throwing them in the data folder and read it as a variable file</p>",
        "id": 204641806,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1595407106
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191832\">Jose Costa Teixeira</span> <a href=\"#narrow/stream/179252-IG-creation/topic/New.20IG.20template.20approach.20-.20custom.20Jekyll.20variables.3F/near/204641806\">said</a>:</p>\n<blockquote>\n<p>what Eric means is that since FHIR resources are json files, nothing prevents you from throwing them in the data folder and read it as a variable file</p>\n</blockquote>\n<p>Thank you <span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span> - ahh yes makes sense, although we would need to shift away from xml resources, which is our local pattern. That aside, the option is available - thanks for pointing that out.</p>",
        "id": 204648018,
        "sender_full_name": "Rob Eastwood",
        "timestamp": 1595411941
    },
    {
        "content": "<p>The IG Publisher will generate JSON for your XML.  You'd just have to supplement the standard publisher script to copy your JSON files to the _data folder.  We could potentially even do that as part of the standard template...</p>",
        "id": 204672170,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1595427836
    },
    {
        "content": "<p>Adding all resources as data?</p>",
        "id": 204675246,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1595429121
    },
    {
        "content": "<p>Copying them, y</p>",
        "id": 204688876,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1595435080
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> <a href=\"#narrow/stream/179252-IG-creation/topic/New.20IG.20template.20approach.20-.20custom.20Jekyll.20variables.3F/near/204672170\">said</a>:</p>\n<blockquote>\n<p>The IG Publisher will generate JSON for your XML.  You'd just have to supplement the standard publisher script to copy your JSON files to the _data folder.  We could potentially even do that as part of the standard template...</p>\n</blockquote>\n<p>Thanks <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> - of course, I had forgotten about the generated JSON. Re copying JSON resources into data via the standard template - if no-one else is wanting this, then I'd say hold off; I'm just exploring options at present rather than having a specific use in mind.</p>\n<p>And re \"supplementing the standard publisher script\" idea - I haven't yet explored this option and have been struggling to find a starting point. I am familiar with some forms of scripting outside of the FHIR toolchain (ruby, bash...) but not ant and its integration with IG Publisher. Are there any good resources for someone getting started with custom scripting for IG Publisher? I have poked around here and devdays videos and not yet come up with anything.</p>\n<p>And thanks again to all of you - such a rich melting pot of ideas; its very invigorating</p>",
        "id": 204725588,
        "sender_full_name": "Rob Eastwood",
        "timestamp": 1595453679
    },
    {
        "content": "<p>Not much documentation on Jira ant scripts yet, though there is some in the <a href=\"http://github.com/fhir/ig-guidance\">http://github.com/fhir/ig-guidance</a> ig.  Other than that, it's asking questions of myself or <span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span>.</p>",
        "id": 204731769,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1595458149
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span></p>",
        "id": 204776781,
        "sender_full_name": "Rob Eastwood",
        "timestamp": 1595496779
    }
]