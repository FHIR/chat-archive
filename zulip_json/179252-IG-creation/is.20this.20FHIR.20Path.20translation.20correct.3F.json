[
    {
        "content": "<p>We have a tracker to change :<br>\nthe invariant for  \"A code in Condition.category SHOULD be from US Core Condition Category Codes value set.\"</p>\n<p>from:</p>\n<p><code>where(category in 'http://hl7.org/fhir/us/core/ValueSet/us-core-condition-category').exists()</code></p>\n<p>to:</p>\n<p><code>where(category.memberOf('http://hl7.org/fhir/us/core/ValueSet/us-core-condition-category')).exists()</code></p>\n<p>I tested it and am not getting any build errors but also not getting expected best practice notice in QA using either syntax above.  I'm not really concerned about the failure to get a best practice warning if is a tooling issue. (can live with that).   I am more concerned if the FHIR Path is wrong.</p>\n<p>FYI the salient part in the SD is here:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">constraint</span><span class=\"p\">:</span>\n  <span class=\"p p-Indicator\">-</span> <span class=\"nt\">extension</span><span class=\"p\">:</span>\n      <span class=\"p p-Indicator\">-</span> <span class=\"nt\">url</span><span class=\"p\">:</span> <span class=\"s\">&#39;http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice&#39;</span>\n        <span class=\"nt\">valueBoolean</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">true</span>\n    <span class=\"nt\">key</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">us-core-1</span>\n    <span class=\"nt\">severity</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">warning</span>\n    <span class=\"nt\">human</span><span class=\"p\">:</span> <span class=\"p p-Indicator\">&gt;-</span>\n      <span class=\"no\">A code in Condition.category SHOULD be from US Core Condition Category</span>\n      <span class=\"no\">Codes value set.</span>\n    <span class=\"nt\">expression</span><span class=\"p\">:</span> <span class=\"p p-Indicator\">&gt;-</span>\n      <span class=\"no\">where(category.memberOf(&#39;http://hl7.org/fhir/us/core/ValueSet/us-core-condition-category&#39;)).exists()</span>\n    <span class=\"nt\">xpath</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">(no xpath equivalent)</span>\n</code></pre></div>",
        "id": 202214551,
        "sender_full_name": "Eric Haas",
        "timestamp": 1593309230
    },
    {
        "content": "<p>also a tracker to change this:</p>\n<p><code>($this.agent.who.resolve().is Practitioner or Device) implies exists()</code></p>\n<p>to </p>\n<p><code>\"(($this.agent.who.resolve() is Practitioner) or ($this.agent.who.resolve() is Device)) implies exists()\"</code></p>\n<p>but again not able to test - there is no error in ig when element missing and reference is Practitioner<br>\ndoes it look correct</p>",
        "id": 202367912,
        "sender_full_name": "Eric Haas",
        "timestamp": 1593464712
    },
    {
        "content": "<p>is there a way to test it outside of IG ?</p>",
        "id": 202368033,
        "sender_full_name": "Eric Haas",
        "timestamp": 1593464786
    },
    {
        "content": "<p>I don't know of a way to test this one</p>",
        "id": 202369586,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1593465649
    }
]