[
    {
        "content": "<p>Does the auto-ig-builder work for template-based IGs?  The <a href=\"https://github.com/FHIR/auto-ig-builder\" target=\"_blank\" title=\"https://github.com/FHIR/auto-ig-builder\">auto-ig-builder README</a> indicates that the IG must have an <code>ig.json</code> file, but template-based IGs do not have one.  It <em>looks</em> like the <code>auto-ig-builder</code> successfully built <a href=\"https://github.com/FHIR/ig-guidance/\" target=\"_blank\" title=\"https://github.com/FHIR/ig-guidance/\">HL7/ig-guidance</a> last week, but I don't understand how it worked, because the logs contain this command:</p>\n<div class=\"codehilite\"><pre><span></span>DEBUG:root:running: java -Xms14000m -Xmx14000m -jar ../publisher.jar -ig ig.json -auto-ig-build -target https://build.fhir.org/ig/FHIR/ig-guidance/ -out /scratch/ig-build-temp-F4NQ3N/repo\n</pre></div>\n\n\n<p>If I try to run the publisher w/ <code>-ig ig.json</code> against a template-based IG locally, the publisher fails.</p>",
        "id": 183280881,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1576171277
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> <span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span></p>",
        "id": 183280985,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1576171337
    },
    {
        "content": "<p>For templates, it should be running against ig.ini.  There wouldn't typically even <em>be</em> an ig.json...</p>",
        "id": 183281660,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1576171804
    },
    {
        "content": "<p>Yes, that's basically the crux of my question.  Auto-IG-Builder says it _requires_ <code>ig.json</code>, and logs seem to confirm that it _assumes_ it -- and yet your <code>ig-guidance</code> IG somehow succeeded the auto-build.  I guess maybe I should just try mine and see what happens?</p>",
        "id": 183282039,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1576172085
    },
    {
        "content": "<p>Yup</p>",
        "id": 183283206,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1576172945
    },
    {
        "content": "<p>It worked! <a href=\"http://build.fhir.org/ig/HL7/fhir-shorthand/branches/master/index.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/fhir-shorthand/branches/master/index.html\">http://build.fhir.org/ig/HL7/fhir-shorthand/branches/master/index.html</a></p>",
        "id": 183283670,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1576173286
    },
    {
        "content": "<p>And did the log say it was using ig.ini or ig.json?</p>",
        "id": 183284546,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1576173882
    },
    {
        "content": "<p>ig.json</p>\n<div class=\"codehilite\"><pre><span></span>DEBUG:root:running: java -Xms14000m -Xmx14000m -jar ../publisher.jar -ig ig.json -auto-ig-build -target https://build.fhir.org/ig/HL7/fhir-shorthand/ -out /scratch/ig-build-temp-THA7KV/repo\n</pre></div>\n\n\n<p>Maybe the <code>-auto-ig-build</code> flag invokes some special-case logic that looks for ig.ini if ig.json is not found?</p>",
        "id": 183284704,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1576174000
    },
    {
        "content": "<p>Yup, I think that's it.  If I run the publisher locally <em>without</em> the <code>-auto-ig-build</code> flag, it fails because it can't find <code>ig.json</code>.  But if I run it <em>with</em> the <code>-auto-ig-build</code> flag, it seems to do the right thing, despite <code>-ig ig.json</code>.</p>",
        "id": 183284894,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1576174135
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> Is the process spitting out something hard-coded to the log that isn't actually true?</p>",
        "id": 183285223,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1576174328
    },
    {
        "content": "<p>no. the Publisher has some magic somewhere to accept the ini instead of the json on the autobuild</p>",
        "id": 183291231,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1576177936
    },
    {
        "content": "<p>Wow, glad Grahame invented magic here ;-) Does someone want to send a PR to the documentation explaining this exception (i.e. <code>ig.json</code> not required for template-based builds)?</p>",
        "id": 183293696,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1576179549
    },
    {
        "content": "<p>done</p>",
        "id": 183294185,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1576179882
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> just looking at <a href=\"https://build.fhir.org/ig/qas.json\" target=\"_blank\" title=\"https://build.fhir.org/ig/qas.json\">https://build.fhir.org/ig/qas.json</a> for some processing purpose, and I note that the url field has a fantasy value</p>",
        "id": 183312486,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1576191959
    },
    {
        "content": "<p>unless it is intended to be the canonical URL? I was expecting it to contain the actual link to the built files?</p>",
        "id": 183312569,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1576192005
    },
    {
        "content": "<p>Interesting. Do we use it anywhere?</p>",
        "id": 183312754,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1576192177
    },
    {
        "content": "<p>turns out that I do. As the canonical URL. I was just about to say that. So that's what it is. could probably have a better name but let's not change that now</p>",
        "id": 183313041,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1576192394
    }
]