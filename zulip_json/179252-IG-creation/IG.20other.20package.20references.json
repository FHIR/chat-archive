[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  I am attempting to build <a href=\"http://build.fhir.org/ig/hl7au/au-fhir-pd\" target=\"_blank\" title=\"http://build.fhir.org/ig/hl7au/au-fhir-pd\">http://build.fhir.org/ig/hl7au/au-fhir-pd</a> which references au-fhir-base</p>\n<div class=\"codehilite\"><pre><span></span>&quot;dependencyList&quot;: [\n    {\n       &quot;name&quot; : &quot;aubase&quot;,\n       &quot;location&quot; : &quot;http://hl7.org.au/fhir&quot;,\n       &quot;version&quot; : &quot;current&quot;\n    }\n  ],\n</pre></div>\n\n\n<p>in my ig.json file<br>\npackage list is resolved at <a href=\"http://hl7.org.au/fhir/package-list.json\" target=\"_blank\" title=\"http://hl7.org.au/fhir/package-list.json\">http://hl7.org.au/fhir/package-list.json</a><br>\nbuild seems to work fine<br>\nwhen I look in the PD IG .e.g <a href=\"http://build.fhir.org/ig/hl7au/au-fhir-pd/StructureDefinition-au-pd-practitionerrole.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/hl7au/au-fhir-pd/StructureDefinition-au-pd-practitionerrole.html\">http://build.fhir.org/ig/hl7au/au-fhir-pd/StructureDefinition-au-pd-practitionerrole.html</a><br>\nthe extensions in AU base are not resolved - just getting the canonical url e.g. <a href=\"http://hl7.org.au/fhir/StructureDefinition/meta-source\" target=\"_blank\" title=\"http://hl7.org.au/fhir/StructureDefinition/meta-source\">http://hl7.org.au/fhir/StructureDefinition/meta-source</a> and <a href=\"http://hl7.org.au/fhir/StructureDefinition-au-assigningauthority.html\" target=\"_blank\" title=\"http://hl7.org.au/fhir/StructureDefinition-au-assigningauthority.html\">http://hl7.org.au/fhir/StructureDefinition-au-assigningauthority.html</a> <br>\nthese are available e.g. <a href=\"http://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-meta-source.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-meta-source.html\">http://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-meta-source.html</a> which is where I thought the PD IG output would point due to the dependency load above; and the package-list referencing <a href=\"http://build.fhir.org/ig/hl7au/au-fhir-base\" target=\"_blank\" title=\"http://build.fhir.org/ig/hl7au/au-fhir-base\">http://build.fhir.org/ig/hl7au/au-fhir-base</a> <br>\nIs this a problem or have I got something wrong?</p>",
        "id": 153967985,
        "sender_full_name": "Brett Esler",
        "timestamp": 1528423016
    },
    {
        "content": "<p>your location looks wrong to me - why are you claiming the location of <a href=\"http://hl7.org.au/fhir\" target=\"_blank\" title=\"http://hl7.org.au/fhir\">http://hl7.org.au/fhir</a>?</p>",
        "id": 153974182,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1530910102
    },
    {
        "content": "<p>location is where the package-list.json is <a href=\"http://hl7.org.au/fhir/package-list.json\" target=\"_blank\" title=\"http://hl7.org.au/fhir/package-list.json\">http://hl7.org.au/fhir/package-list.json</a> - CI build entry is<br>\n  {<br>\n      \"version\": \"current\",<br>\n      \"date\": \"n/a\",<br>\n      \"desc\": \"Continuous Integration Build (latest in version control)\",<br>\n      \"path\": \"<a href=\"http://build.fhir.org/ig/hl7au/au-fhir-base\" target=\"_blank\" title=\"http://build.fhir.org/ig/hl7au/au-fhir-base\">http://build.fhir.org/ig/hl7au/au-fhir-base</a>\",<br>\n      \"status\": \"ci-build\"<br>\n    },</p>",
        "id": 153975903,
        "sender_full_name": "Brett Esler",
        "timestamp": 1531869235
    },
    {
        "content": "<p>IG builder locates the reference ok but all links point at <a href=\"http://hl7.org.au/fhir\" target=\"_blank\" title=\"http://hl7.org.au/fhir\">http://hl7.org.au/fhir</a> rather than <a href=\"http://build.fhir.org/ig/hl7au/au-fhir-base\" target=\"_blank\" title=\"http://build.fhir.org/ig/hl7au/au-fhir-base\">http://build.fhir.org/ig/hl7au/au-fhir-base</a></p>",
        "id": 153975904,
        "sender_full_name": "Brett Esler",
        "timestamp": 1531869320
    },
    {
        "content": "<p>should location be  <a href=\"http://build.fhir.org/ig/hl7au/au-fhir-base\" target=\"_blank\" title=\"http://build.fhir.org/ig/hl7au/au-fhir-base\">http://build.fhir.org/ig/hl7au/au-fhir-base</a> ?  how to resolve package-list.json?</p>",
        "id": 153975905,
        "sender_full_name": "Brett Esler",
        "timestamp": 1531869408
    },
    {
        "content": "<p>I'm running into a similar issue with an IG; not sure if it's the same issue, but I've added a package-list to QI-Core, but it's only in the CI build, and when I point the dependency there using the location, I get a canonical mismatch. But I can't put the package-list on the HL7 site where the canonical will match (because it's not published yet). How do I reference an unpublished IG as a dependency?</p>",
        "id": 153976491,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1532033192
    },
    {
        "content": "<p>use [package-name]-dev</p>",
        "id": 153976506,
        "sender_full_name": "Eric Haas",
        "timestamp": 1532033673
    },
    {
        "content": "<p>e.g., <code>hl7.fhir.smart-dev</code></p>",
        "id": 153976509,
        "sender_full_name": "Eric Haas",
        "timestamp": 1532033750
    },
    {
        "content": "<p>Like this:<br>\n      \"dependencyList\": [<br>\n        {<br>\n          \"name\": \"qicore-dev\",<br>\n          \"location\": \"<a href=\"http://hl7.org/fhir/us/qicore\" target=\"_blank\" title=\"http://hl7.org/fhir/us/qicore\">http://hl7.org/fhir/us/qicore</a>\",<br>\n          \"version\": \"3.0.1\",<br>\n          \"source\": \"lib/qicore\"<br>\n        }<br>\n      ],</p>",
        "id": 153976526,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1532036447
    },
    {
        "content": "<p>When I do that I get \"package name must be a valid token: 'qicore-dev'\"</p>",
        "id": 153976527,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1532036477
    },
    {
        "content": "<p>is it in your directory?</p>",
        "id": 153976538,
        "sender_full_name": "Eric Haas",
        "timestamp": 1532037980
    },
    {
        "content": "<p>In lib/qicore, yes</p>",
        "id": 153976545,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1532038353
    },
    {
        "content": "<p>Should it be <code>hl7.fhir.us.qicore-dev</code>?</p>",
        "id": 153976547,
        "sender_full_name": "Christopher Schuler",
        "timestamp": 1532038421
    },
    {
        "content": "<p>Here's the one from qicore though:</p>\n<div class=\"codehilite\"><pre><span></span>&quot;dependencyList&quot;: [\n    {\n      &quot;name&quot;: &quot;uscore&quot;,\n      &quot;location&quot;: &quot;http://hl7.org/fhir/us/core&quot;,\n      &quot;version&quot;: &quot;1.0.1&quot;,\n      &quot;source&quot;: &quot;lib/uscore&quot;\n    }\n  ],\n</pre></div>",
        "id": 153976557,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1532038726
    },
    {
        "content": "<p>I'm building us-core locally so I can send an example</p>",
        "id": 153976569,
        "sender_full_name": "Eric Haas",
        "timestamp": 1532039018
    },
    {
        "content": "<p>Hmm. Well <a href=\"http://hl7.org/fhir/us/qicore/package-list.json\" target=\"_blank\" title=\"http://hl7.org/fhir/us/qicore/package-list.json\">http://hl7.org/fhir/us/qicore/package-list.json</a> results in a 404. Whereas <a href=\"http://hl7.org/fhir/us/core/package-list.json\" target=\"_blank\" title=\"http://hl7.org/fhir/us/core/package-list.json\">http://hl7.org/fhir/us/core/package-list.json</a> has several packages.</p>",
        "id": 153976573,
        "sender_full_name": "Christopher Schuler",
        "timestamp": 1532039070
    },
    {
        "content": "<p>Right, and I've created the package-list for qi-core, and put it in the current build, but until it gets published, it won't actually be available at the canonical url.</p>",
        "id": 153976577,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1532039163
    },
    {
        "content": "<p>Which would be true in general of any IG, so wondering how we would support declaring a dependency on an IG that isn't yet published.</p>",
        "id": 153976579,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1532039195
    },
    {
        "content": "<p>so package resolution is basically broken right now until we can get a package server up. but that's not going to happen in the near term. So the resolution process goes like this:</p>\n<ul>\n<li>look in the local package cache (and anything you build locally will be in there)</li>\n<li>look on <a href=\"http://build.fhir.org\" target=\"_blank\" title=\"http://build.fhir.org\">build.fhir.org</a> current build package list</li>\n<li>look for package-list.json at the canonical URL</li>\n</ul>",
        "id": 153976582,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1532039301
    },
    {
        "content": "<p>I can upload the package-list manually now.</p>",
        "id": 153976584,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1532039308
    },
    {
        "content": "<p>but you should not need that.</p>",
        "id": 153976585,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1532039314
    },
    {
        "content": "<p>you should actually specify the package properly as your dependency and then it should resolve</p>",
        "id": 153976587,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1532039334
    },
    {
        "content": "<p>here is what my local package cache looks like ( I just built US-Core locally)<br>\n<a href=\"/user_uploads/10155/Ly49ih8yeBKjTCxAkWY8bAgL/Screen-Shot-2018-07-19-at-3.26.41-PM.png\" target=\"_blank\" title=\"Screen-Shot-2018-07-19-at-3.26.41-PM.png\">Screen-Shot-2018-07-19-at-3.26.41-PM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/Ly49ih8yeBKjTCxAkWY8bAgL/Screen-Shot-2018-07-19-at-3.26.41-PM.png\" target=\"_blank\" title=\"Screen-Shot-2018-07-19-at-3.26.41-PM.png\"><img src=\"/user_uploads/10155/Ly49ih8yeBKjTCxAkWY8bAgL/Screen-Shot-2018-07-19-at-3.26.41-PM.png\"></a></div>",
        "id": 153976590,
        "sender_full_name": "Eric Haas",
        "timestamp": 1532039373
    },
    {
        "content": "<p>and here is my dependency for US Core dev: ( ignore the fact that is a csv file)</p>\n<div class=\"codehilite\"><pre><span></span>dependencyList.name,uscore\ndependencyList.location,http://hl7.org/fhir/us/core\ndependencyList.source,dependencies/uscore-vp\ndependencyList.version,dev\n</pre></div>",
        "id": 153976593,
        "sender_full_name": "Eric Haas",
        "timestamp": 1532039456
    },
    {
        "content": "<p>so in theory this should work......</p>",
        "id": 153976594,
        "sender_full_name": "Eric Haas",
        "timestamp": 1532039564
    },
    {
        "content": "<p>Okay, that was it, thanks <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> , the version needs to be dev:</p>",
        "id": 153976596,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1532039630
    },
    {
        "content": "<p>\"dependencyList\": [<br>\n    {<br>\n      \"name\": \"qicore\",<br>\n      \"location\": \"<a href=\"http://hl7.org/fhir/us/qicore\" target=\"_blank\" title=\"http://hl7.org/fhir/us/qicore\">http://hl7.org/fhir/us/qicore</a>\",<br>\n      \"version\": \"dev\"<br>\n    }<br>\n  ],</p>",
        "id": 153976597,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1532039633
    },
    {
        "content": "<p>So this worked to get a local build, but when I push it, the CI build fails. How can I get the dev QI-Core loaded into the package cache used by the CI build?</p>",
        "id": 153977073,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1532276185
    },
    {
        "content": "<p>hmm should automatically downgrade to current on the CI build</p>",
        "id": 153977091,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1532287373
    },
    {
        "content": "<p>does current work for you?</p>",
        "id": 153977092,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1532287383
    },
    {
        "content": "<p>It should, but I think it can't resolve because the package-list isn't present on the canonical IG site.</p>",
        "id": 153977106,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1532291311
    },
    {
        "content": "<p>current is not resolved via package-list.</p>",
        "id": 153977109,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1532291417
    },
    {
        "content": "<p>I tried changing to current locally but it says it can't resolve the package list. I just pushed the change to the repository to see if it behaves differently there.</p>",
        "id": 153977116,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1532293511
    },
    {
        "content": "<p>It just errored: Publishing Content Failed: Error fetching package list for hl7.fhir.us.qicore from <a href=\"http://hl7.org/fhir/us/qicore/package-list.json\" target=\"_blank\" title=\"http://hl7.org/fhir/us/qicore/package-list.json\">http://hl7.org/fhir/us/qicore/package-list.json</a>: <a href=\"http://hl7.org/fhir/us/qicore/package-list.json\" target=\"_blank\" title=\"http://hl7.org/fhir/us/qicore/package-list.json\">http://hl7.org/fhir/us/qicore/package-list.json</a></p>",
        "id": 153977118,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1532293561
    },
    {
        "content": "<p>I tried changing the canonical reference to the build url, but then got a canonical mismatch.</p>",
        "id": 153977119,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1532293588
    },
    {
        "content": "<p>I'll have a look soon. I'm close to catching up on applying all the substantiative changes for R4</p>",
        "id": 153977165,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1532319519
    },
    {
        "content": "<p>at least for the foundation</p>",
        "id": 153977166,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1532319525
    },
    {
        "content": "<p>Pinging on this, is there a workaround that I can use to get the HEDIS-IG back up?</p>",
        "id": 153979203,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1532896304
    },
    {
        "content": "<p>can I reproduce this?</p>",
        "id": 153979223,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1532907949
    },
    {
        "content": "<p>Should be able to by just cloning the hedis-ig and running it. With the Qi-core version set to current, it tries to download the package from the canonical uri. <a href=\"https://github.com/cqframework/hedis-ig\" target=\"_blank\" title=\"https://github.com/cqframework/hedis-ig\">https://github.com/cqframework/hedis-ig</a></p>",
        "id": 153979520,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1532976448
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> were you able to repro this issue?</p>",
        "id": 153983227,
        "sender_full_name": "Christopher Schuler",
        "timestamp": 1533659824
    },
    {
        "content": "<p>no but it's on my list for today</p>",
        "id": 153983344,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1533674312
    },
    {
        "content": "<p>Awesome, thank you sir!</p>",
        "id": 153983387,
        "sender_full_name": "Christopher Schuler",
        "timestamp": 1533676471
    },
    {
        "content": "<p>ok this should be fixed once the next build completes</p>",
        "id": 153984003,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1533785196
    },
    {
        "content": "<p>Yessir, that did the trick. Thanks!</p>",
        "id": 153984023,
        "sender_full_name": "Christopher Schuler",
        "timestamp": 1533791376
    }
]