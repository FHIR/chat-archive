[
    {
        "content": "<p>Hello, We're having some trouble in upgrading FHIR from DSTU3 to R4 in Consent2Share project.<br>\n<a href=\"https://github.com/bhits/consent2share\">https://github.com/bhits/consent2share</a><br>\n<a href=\"https://okmis.info/hapi-fhir-jpaserver/\">https://okmis.info/hapi-fhir-jpaserver/</a><br>\nWe got the following the issue and not sure how to solve the issue:<br>\nIncorrect resource type found, expected \"Conformance\" but found \"CapabilityStatement\"<br>\nCan you please help this?</p>\n<p>Here is error log file. <a href=\"/user_uploads/10155/RW2bD7gpjYE8rI28TF98frpU/error.log\">error.log</a></p>",
        "id": 203882505,
        "sender_full_name": "vladimir matryshov",
        "timestamp": 1594758073
    },
    {
        "content": "<p>Can you give a little more detail on what you mean by \"upgrading FHIR\"?  The Consent2Share project was a DSTU3 FHIR IG, are you upgrading that or upgrading  the HAPI server? What are you doing when you get that error?</p>",
        "id": 203884114,
        "sender_full_name": "David Pyke",
        "timestamp": 1594758779
    },
    {
        "content": "<p>Hello, David. Thank you for your response.<br>\nYes. You're correct. The consent2share project was a DSTU3. I was going to upgrade the FHIR version of C2S to R4.<br>\nIn order to do this, I used hapi-fhir-jpaserver-starter project (<a href=\"https://github.com/hapifhir/hapi-fhir-jpaserver-starter\">https://github.com/hapifhir/hapi-fhir-jpaserver-starter</a>) and I updated some configurations of C2S so that C2S works on the new FHIR(R4).<br>\nWhen I run the provider-ui of C2S to create/update a patient, it calls FHIR REST APIs using fhir client while it calls ums(user management system) of C2S and I got the above error. Please check the error.log file I attached.</p>",
        "id": 203893162,
        "sender_full_name": "vladimir matryshov",
        "timestamp": 1594763657
    },
    {
        "content": "<p>Updating Consent2Share is more than just converting the resources.  You're going to have a lot of work to convert the whole IG.  The error for the Conformance resource is only the first of many issues that need to be solved as the changes from STU3 to R4 were large and varied.  For this error, the Conformance resource was deprecated and replaced with the CapabilityStatement, a completely different resource.</p>",
        "id": 203894176,
        "sender_full_name": "David Pyke",
        "timestamp": 1594764305
    },
    {
        "content": "<p>Yeah, I think so the Conformance resource was deprecated and no longer used in R4.<br>\nSo I tried to find the source code that is related the Conformance resource and replace it with CapabilityStatement but I couldn't find.<br>\nWhich part of the C2S should I modify to solve the issue?</p>",
        "id": 203895121,
        "sender_full_name": "vladimir matryshov",
        "timestamp": 1594764991
    },
    {
        "content": "<p>You'll need to create the CapabilityStatement for the R4 version of C2S and then modify the server to hand it out.  This is not a small change, you're likely to set a project to do the update of C2S from DSTU3 to R4</p>",
        "id": 203896941,
        "sender_full_name": "David Pyke",
        "timestamp": 1594766378
    },
    {
        "content": "<p>Yeah, I've set the project to do the update of C2S from DSTU3 to R4.<br>\nI'm not sure about creating the CapabilityStatement for the R4 version of C2S. Can you tell me about it in detail?</p>",
        "id": 203897526,
        "sender_full_name": "vladimir matryshov",
        "timestamp": 1594766788
    },
    {
        "content": "<p>The base information is here: <a href=\"http://hl7.org/fhir/capabilitystatement.html\">http://hl7.org/fhir/capabilitystatement.html</a></p>",
        "id": 203897815,
        "sender_full_name": "David Pyke",
        "timestamp": 1594767009
    },
    {
        "content": "<p>Can you refer a C2S freelancer to assist with the salvage?</p>",
        "id": 203964596,
        "sender_full_name": "vladimir matryshov",
        "timestamp": 1594824390
    },
    {
        "content": "<p>Yes, I can.</p>",
        "id": 203968695,
        "sender_full_name": "David Pyke",
        "timestamp": 1594826230
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"317069\">@vladimir matryshov</span>  from your log it looks like your server and client are not aligned in what version that should be used. It looks like the client speaks STU3 or R4, while your server speaks DSTU2</p>",
        "id": 204005283,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1594843279
    }
]