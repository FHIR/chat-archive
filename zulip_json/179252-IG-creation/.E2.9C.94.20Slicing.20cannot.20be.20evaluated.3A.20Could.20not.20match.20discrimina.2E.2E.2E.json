[
    {
        "content": "<p>Trying to resolve the following QA errors when slicing with a $this discriminator based on the <a href=\"http://build.fhir.org/ig/HL7/fhir-qi-core/StructureDefinition-qicore-organization.html\">QI-Core Organization Profile</a> contained within the example for <a href=\"http://build.fhir.org/ig/HL7/fhir-qi-core/Medication-example.html\">Qi-Core medication example</a>:</p>\n<p><a href=\"/user_uploads/10155/EWGahpZyOl_xPEzcRMv18wjf/Screen-Shot-2021-10-08-at-11.01.58-AM.png\">Error Report</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/EWGahpZyOl_xPEzcRMv18wjf/Screen-Shot-2021-10-08-at-11.01.58-AM.png\" title=\"Error Report\"><img src=\"/user_uploads/10155/EWGahpZyOl_xPEzcRMv18wjf/Screen-Shot-2021-10-08-at-11.01.58-AM.png\"></a></div><p>Slices do have fixed values for <code>system</code> but error is based on [$this] discriminator not having a  fixed value, binding or existence assertion.</p>\n<div class=\"codehilite\"><pre><span></span><code>&lt;Medication xmlns=&quot;http://hl7.org/fhir&quot;&gt;\n  &lt;id value=&quot;example&quot;/&gt;\n  &lt;meta&gt;\n    &lt;profile\n             value=&quot;http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-medication&quot;/&gt;\n  &lt;/meta&gt;\n  &lt;text&gt;\n    &lt;status value=&quot;generated&quot;/&gt;\n    &lt;div xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;&lt;p&gt;&lt;b&gt;Generated Narrative&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;code&lt;/b&gt;: &lt;span title=&quot;Codes: {http://www.nlm.nih.gov/research/umls/rxnorm 1594660}&quot;&gt;alemtuzumab 10 MG/ML [Lemtrada]&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;manufacturer&lt;/b&gt;: &lt;a name=&quot;org6&quot;&gt; &lt;/a&gt;&lt;/p&gt;&lt;blockquote&gt;&lt;p&gt;&lt;b&gt;identifier&lt;/b&gt;: id: ORG-006 (TEMP)&lt;/p&gt;&lt;p&gt;&lt;b&gt;active&lt;/b&gt;: true&lt;/p&gt;&lt;p&gt;&lt;b&gt;name&lt;/b&gt;: Genzyme&lt;/p&gt;&lt;p&gt;&lt;b&gt;telecom&lt;/b&gt;: &lt;a href=&quot;https://www.sanofigenzyme.com/&quot;&gt;https://www.sanofigenzyme.com/&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;address&lt;/b&gt;: Cambridge MA USA (WORK)&lt;/p&gt;&lt;/blockquote&gt;&lt;p&gt;&lt;b&gt;form&lt;/b&gt;: &lt;span title=&quot;Codes: {http://snomed.info/sct 385219001}&quot;&gt;Conventional release solution for injection (dose form)&lt;/span&gt;&lt;/p&gt;&lt;h3&gt;Ingredients&lt;/h3&gt;&lt;table class=&quot;grid&quot;&gt;&lt;tr&gt;&lt;td&gt;-&lt;/td&gt;&lt;td&gt;&lt;b&gt;Item[x]&lt;/b&gt;&lt;/td&gt;&lt;td&gt;&lt;b&gt;Strength&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;*&lt;/td&gt;&lt;td&gt;&lt;span title=&quot;Codes: {http://snomed.info/sct 129472003}&quot;&gt;Alemtuzumab (substance)&lt;/span&gt;&lt;/td&gt;&lt;td&gt;12 mg/1.2 mL&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;h3&gt;Batches&lt;/h3&gt;&lt;table class=&quot;grid&quot;&gt;&lt;tr&gt;&lt;td&gt;-&lt;/td&gt;&lt;td&gt;&lt;b&gt;LotNumber&lt;/b&gt;&lt;/td&gt;&lt;td&gt;&lt;b&gt;ExpirationDate&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;*&lt;/td&gt;&lt;td&gt;9494788&lt;/td&gt;&lt;td&gt;2017-05-22&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/div&gt;\n  &lt;/text&gt;\n  &lt;contained&gt;\n    &lt;Organization&gt;\n      &lt;id value=&quot;org6&quot;/&gt;\n      &lt;meta&gt;\n        &lt;profile\n                 value=&quot;http://hl7.org/fhir/us/qicore/StructureDefinition/qicore-organization&quot;/&gt;\n      &lt;/meta&gt;\n      &lt;identifier&gt;\n        &lt;use value=&quot;temp&quot;/&gt;\n        &lt;system value=&quot;urn:oid:2.16.840.1.113883.4.336&quot;/&gt;\n        &lt;value value=&quot;ORG-006&quot;/&gt;\n      &lt;/identifier&gt;\n      &lt;active value=&quot;true&quot;/&gt;\n      &lt;name value=&quot;Genzyme&quot;/&gt;\n      &lt;telecom&gt;\n        &lt;system value=&quot;url&quot;/&gt;\n        &lt;value value=&quot;https://www.sanofigenzyme.com/&quot;/&gt;\n        &lt;use value=&quot;work&quot;/&gt;\n      &lt;/telecom&gt;\n      &lt;address&gt;\n        &lt;use value=&quot;work&quot;/&gt;\n        &lt;city value=&quot;Cambridge&quot;/&gt;\n        &lt;state value=&quot;MA&quot;/&gt;\n        &lt;country value=&quot;USA&quot;/&gt;\n      &lt;/address&gt;\n    &lt;/Organization&gt;\n  &lt;/contained&gt;\n  &lt;code&gt;\n    &lt;coding&gt;\n      &lt;system value=&quot;http://www.nlm.nih.gov/research/umls/rxnorm&quot;/&gt;\n      &lt;code value=&quot;1594660&quot;/&gt;\n      &lt;display value=&quot;alemtuzumab 10 MG/ML [Lemtrada]&quot;/&gt;\n    &lt;/coding&gt;\n  &lt;/code&gt;\n  &lt;manufacturer&gt;\n    &lt;reference value=&quot;#org6&quot;/&gt;\n  &lt;/manufacturer&gt;\n  &lt;form&gt;\n    &lt;coding&gt;\n      &lt;system value=&quot;http://snomed.info/sct&quot;/&gt;\n      &lt;code value=&quot;385219001&quot;/&gt;\n      &lt;display value=&quot;Conventional release solution for injection (dose form)&quot;/&gt;\n    &lt;/coding&gt;\n  &lt;/form&gt;\n  &lt;ingredient&gt;\n    &lt;itemCodeableConcept&gt;\n      &lt;coding&gt;\n        &lt;system value=&quot;http://snomed.info/sct&quot;/&gt;\n        &lt;code value=&quot;129472003&quot;/&gt;\n        &lt;display value=&quot;Alemtuzumab (substance)&quot;/&gt;\n      &lt;/coding&gt;\n    &lt;/itemCodeableConcept&gt;\n    &lt;strength&gt;\n      &lt;numerator&gt;\n        &lt;value value=&quot;12&quot;/&gt;\n        &lt;system value=&quot;http://unitsofmeasure.org&quot;/&gt;\n        &lt;code value=&quot;mg&quot;/&gt;\n      &lt;/numerator&gt;\n      &lt;denominator&gt;\n        &lt;value value=&quot;1.2&quot;/&gt;\n        &lt;system value=&quot;http://unitsofmeasure.org&quot;/&gt;\n        &lt;code value=&quot;mL&quot;/&gt;\n      &lt;/denominator&gt;\n    &lt;/strength&gt;\n  &lt;/ingredient&gt;\n  &lt;batch&gt;\n    &lt;lotNumber value=&quot;9494788&quot;/&gt;\n    &lt;expirationDate value=&quot;2017-05-22&quot;/&gt;\n  &lt;/batch&gt;\n&lt;/Medication&gt;\n</code></pre></div>",
        "id": 256764897,
        "sender_full_name": "Abdullah Rafiqi",
        "timestamp": 1633710039
    },
    {
        "content": "<p>Two of your slices have patternIdentifier on them: NPI and CLIA.  But you haven't defined patternIdentifier on ein or ccn - and you need to.</p>",
        "id": 256766869,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1633710805
    },
    {
        "content": "<p>Having fixedUri on system doesn't help when slicing is by pattern on the identifier itself.</p>",
        "id": 256767028,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1633710850
    },
    {
        "content": "<p>Thanks for the clarification <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> . Would the pattenIdentifier be defined under the Patterns column within the profile spreadsheet? </p>\n<p><a href=\"/user_uploads/10155/Yh10EXa-8U7jayV2aADOU0bc/Screen-Shot-2021-10-08-at-2.24.51-PM.png\">Profile Spreadsheet</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/Yh10EXa-8U7jayV2aADOU0bc/Screen-Shot-2021-10-08-at-2.24.51-PM.png\" title=\"Profile Spreadsheet\"><img src=\"/user_uploads/10155/Yh10EXa-8U7jayV2aADOU0bc/Screen-Shot-2021-10-08-at-2.24.51-PM.png\"></a></div>",
        "id": 256784201,
        "sender_full_name": "Abdullah Rafiqi",
        "timestamp": 1633717732
    },
    {
        "content": "<p>Yes.  You need to specify the JSON for the Identifier pattern.</p>",
        "id": 256786882,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1633718768
    },
    {
        "content": "<p>It worked for the organization profile (i.e. <code>{\"system\" : \"urn:oid:2.16.840.1.113883.4.336\"}</code>) but when trying to apply the same changes to the <a href=\"http://build.fhir.org/ig/HL7/fhir-qi-core/StructureDefinition-qicore-practitioner.html\">Practitioner profile</a> spreadsheet, getting the following error when running the publisher</p>\n<p><a href=\"/user_uploads/10155/BXZTgIcUOgcIgxIKgprOzjAe/Screen-Shot-2021-10-08-at-4.21.30-PM.png\">Spreadsheet</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/BXZTgIcUOgcIgxIKgprOzjAe/Screen-Shot-2021-10-08-at-4.21.30-PM.png\" title=\"Spreadsheet\"><img src=\"/user_uploads/10155/BXZTgIcUOgcIgxIKgprOzjAe/Screen-Shot-2021-10-08-at-4.21.30-PM.png\"></a></div><p><a href=\"/user_uploads/10155/BB2pOZmUvhcvcQS8e6jv-bFN/Screen-Shot-2021-10-08-at-4.14.37-PM.png\">Error</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/BB2pOZmUvhcvcQS8e6jv-bFN/Screen-Shot-2021-10-08-at-4.14.37-PM.png\" title=\"Error\"><img src=\"/user_uploads/10155/BB2pOZmUvhcvcQS8e6jv-bFN/Screen-Shot-2021-10-08-at-4.14.37-PM.png\"></a></div>",
        "id": 256800081,
        "sender_full_name": "Abdullah Rafiqi",
        "timestamp": 1633724587
    },
    {
        "content": "<p>You need to declare the type (Identifier) on the row that declares the pattern.</p>",
        "id": 256803982,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1633726292
    },
    {
        "content": "<p>(That's a spreadsheet limitation)</p>",
        "id": 256803997,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1633726300
    }
]