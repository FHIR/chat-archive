[
    {
        "content": "<p>Hi All,<br>\nwhen I am running the Implementation Guide at published time I am getting \"Must have Rows Exception\".<br>\nI didn't find anywhere what is the mean of that error.<br>\nif anybody knows about that Exception ping me.<br>\nI also attached the screenshot in below.<br>\n<a href=\"/user_uploads/10155/Qf10O7fbN0VJvJeuuj4YzvFd/rowsException.png\" target=\"_blank\" title=\"rowsException.png\">rowsException.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/Qf10O7fbN0VJvJeuuj4YzvFd/rowsException.png\" target=\"_blank\" title=\"rowsException.png\"><img src=\"/user_uploads/10155/Qf10O7fbN0VJvJeuuj4YzvFd/rowsException.png\"></a></div>",
        "id": 153938556,
        "sender_full_name": "abhishek gupta",
        "timestamp": 1519045146
    },
    {
        "content": "<p>I was able to create a dockerized IG Publisher using the Dockerfile (with some updates for versions) I mentioned before.   I don't have it running completely -- don't know what to use for the ig.json file (haven't spent enough time on it yet).   Does anyone have a sample of the ig.json config file for a starter set?</p>",
        "id": 153938616,
        "sender_full_name": "John Silva",
        "timestamp": 1519059634
    },
    {
        "content": "<p>ig.json belongs to the implementation guide, not the docker</p>",
        "id": 153938650,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1519068825
    },
    {
        "content": "<p>Yes, but when I run the image (jar-ball) inside the docker I pass the -ig option and I need an ig.json for it.</p>",
        "id": 153938704,
        "sender_full_name": "John Silva",
        "timestamp": 1519079147
    },
    {
        "content": "<p>so either use one of the existing Implementation guides, or you are asking how to actually author and IG?</p>",
        "id": 153938707,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1519079312
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"194183\">@John Silva</span> - you need to volume mount the IG folder into the Docker image on run to give the publisher access to the files including ig.json (and a space to put the output). So in my Docker image I had everything setup so that the underlying docker machine expected things to be at a path /ig<br>\ndocker run -it --rm --name publish -v /home/andrew/git/myig:/ig fhir_publisher</p>",
        "id": 153939147,
        "sender_full_name": "Andrew Patterson",
        "timestamp": 1519162645
    },
    {
        "content": "<p>I'm asking for a sample ig.json file -- the config file that controls the IG Publish.  (<span class=\"user-mention\" data-user-id=\"194777\">@abhishek gupta</span>  posted one earlier -- I may try that as a 'starter set')</p>\n<p>BTW,  I used the Dockerfile from robeastwood-agency and modified it to pull a newer version of alpine :<br>\n<a href=\"https://raw.githubusercontent.com/robstwd/assorted-dockerfiles/master/alpine-fhir-ig-publisher/Dockerfile\" target=\"_blank\" title=\"https://raw.githubusercontent.com/robstwd/assorted-dockerfiles/master/alpine-fhir-ig-publisher/Dockerfile\">https://raw.githubusercontent.com/robstwd/assorted-dockerfiles/master/alpine-fhir-ig-publisher/Dockerfile</a> </p>\n<p>Here's my change (addition):</p>\n<p>RUN echo <a href=\"http://dl-4.alpinelinux.org/alpine/v3.7/main/\" target=\"_blank\" title=\"http://dl-4.alpinelinux.org/alpine/v3.7/main/\">http://dl-4.alpinelinux.org/alpine/v3.7/main/</a>  &gt; /etc/apk/repositories<br>\n(just before the RUN apk command)</p>\n<p>(I also had to use ENV vars because of being behind a corporate firewall:</p>\n<p>ENV http_proxy http://&lt;host&gt;:&lt;port&gt;/<br>\nENV https_proxy http://&lt;host&gt;:&lt;port&gt;/</p>\n<p>---- After the docker image is created and running, here's the command to run inside the container, the thing (technical term ;-) ) I'm looking for is the file after the -ig option)</p>\n<p># inside container run<br>\n# java -jar /usr/src/ig-publisher/publisher.jar -ig /usr/src/input/dh-Participants-ig.json</p>",
        "id": 153939352,
        "sender_full_name": "John Silva",
        "timestamp": 1519225034
    },
    {
        "content": "<p>there is  a simple one here : <br>\n{<br>\n  \"tool\" : \"jekyll\",<br>\n  \"paths\" : {<br>\n    \"resources\" : \"resources\",<br>\n    \"pages\" : \"pages\",<br>\n    \"temp\" : \"temp\",<br>\n    \"qa\" : \"qa\",<br>\n    \"output\" : \"output\",<br>\n    \"txCache\" : \"txCache\",<br>\n    \"specification\" : \"<a href=\"http://hl7.org/fhir/2016May\" target=\"_blank\" title=\"http://hl7.org/fhir/2016May\">http://hl7.org/fhir/2016May</a>\"<br>\n  },<br>\n    \"canonicalBase\": \"<a href=\"http://hl7.org/fhir/test-ig-14\" target=\"_blank\" title=\"http://hl7.org/fhir/test-ig-14\">http://hl7.org/fhir/test-ig-14</a>\",<br>\n  \"version\" : \"1.4.0\",<br>\n  \"sct-edition\" :  \"<a href=\"http://snomed.info/sct/900000000000207008\" target=\"_blank\" title=\"http://snomed.info/sct/900000000000207008\">http://snomed.info/sct/900000000000207008</a>\",<br>\n    \"spreadsheets\": [<br>\n        \"diagnosticorder-daf-profile-spreadsheet.xml\"<br>\n    ],  <br>\n    \"defaults\": {<br>\n        \"Any\": {<br>\n        \"template-format\" : \"format.html\",<br>\n      \"template-base\" : \"base.html\"<br>\n        },<br>\n    \"CodeSystem\": {<br>\n      \"template-base\" : \"cs.html\"<br>\n        },<br>\n        \"ValueSet\": {<br>\n      \"template-base\" : \"vs.html\"<br>\n        },<br>\n        \"ConceptMap\": {<br>\n      \"template-base\" : \"cm.html\"<br>\n        },<br>\n        \"StructureDefinition\": {<br>\n      \"template-base\" : \"sd.html\"<br>\n        }<br>\n    },<br>\n    \"source\": \"ig.xml\",<br>\n  \"resources\" : {<br>\n  }<br>\n}</p>\n<p>or here:  <a href=\"https://github.com/Healthedata1/IG-Template2\" target=\"_blank\" title=\"https://github.com/Healthedata1/IG-Template2\">https://github.com/Healthedata1/IG-Template2</a>   but be forwarned I've added extra parameters  which the ig-pub ignores.</p>",
        "id": 153939378,
        "sender_full_name": "Eric Haas",
        "timestamp": 1519229102
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> !   It would be nice to have this docker image to make it easier for others to have/run their own IG Publisher.   I'm new to docker but I was able to create an image using the Dockerfile I mentioned; with this info maybe this docker image could be uploaded to the docker repository and made available for other FHIR users.</p>",
        "id": 153939510,
        "sender_full_name": "John Silva",
        "timestamp": 1519251406
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191649\">@Andrew Patterson</span>  - thanks, I had done that (with a -v mount command to my Windows directory).  The problem is that I don't have an example of the ig.json configuration file.   Somewhere (can't find the page on the FHIR server again) there is a description of how to configure this json file, but it doesn't have an example/starter one to get started. <span class=\"user-mention\" data-user-id=\"194777\">@abhishek gupta</span>  posted a link to his version; I'm hoping to use that as an example/starter version.    As far as the actual ig publisher file, I haven't got that far yet and I also have to decide which version to use because we're still using older an older FHIR version (DSTU2  right now)</p>",
        "id": 153941150,
        "sender_full_name": "John Silva",
        "timestamp": 1519824449
    },
    {
        "content": "<p>the description of the ig json is here: <a href=\"http://wiki.hl7.org/index.php?title=IG_Publisher_Documentation\" target=\"_blank\" title=\"http://wiki.hl7.org/index.php?title=IG_Publisher_Documentation\">http://wiki.hl7.org/index.php?title=IG_Publisher_Documentation</a></p>",
        "id": 153941169,
        "sender_full_name": "Eric Haas",
        "timestamp": 1519832713
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span>  -- I had found it before but couldn't find it again when I went looking.  I thought it was on the <a href=\"http://www.hl7.org/fhir\" target=\"_blank\" title=\"http://www.hl7.org/fhir\">www.hl7.org/fhir</a> page somewhere, not on the Wiki page.</p>",
        "id": 153941189,
        "sender_full_name": "John Silva",
        "timestamp": 1519834852
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191649\">@Andrew Patterson</span>  -- I just got back to this.   What is in your /home/andrew/git/myig directory and where do you get that from?  Is that the ig release from <a href=\"http://fhir.hl7.org\" target=\"_blank\" title=\"http://fhir.hl7.org\">fhir.hl7.org</a> extracted to a folder structure?  Ah, I found that I needed to download the \"Definitions File used by the IG Publisher\" (<a href=\"https://www.hl7.org/fhir/igpack.zip\" target=\"_blank\" title=\"https://www.hl7.org/fhir/igpack.zip\">https://www.hl7.org/fhir/igpack.zip</a>) and then unzip/extract this to a directory on my machine.  I then used the -v volume command to allow the docker image to find this and that works and it actually starts up.  Unfortunately, it fails to connect to the tx server <a href=\"http://tx.fhir.org\" target=\"_blank\" title=\"http://tx.fhir.org\">http://tx.fhir.org</a> so I can't get any further.   Does this need a tx server for this to work?  If so, is there one running that can be used with this?</p>",
        "id": 153949461,
        "sender_full_name": "John Silva",
        "timestamp": 1522435077
    },
    {
        "content": "<p>FYI, here's how I run this from Docker on Windows (I have the igpack.zip files extracted to C:\\temp\\igpub )</p>\n<p>docker run -it --rm -v c:/temp/igpub:/usr/src/input --name myIgPublisher java-ig-pub</p>\n<p>Then, when that docker image starts up I run the following in the docker image:</p>\n<p><code>/usr/src/ig-publisher # java -jar /usr/src/ig-publisher/publisher.jar -ig /usr/src/input/ig.json\nFHIR Implementation Guide Publisher (v3.2.0-13585, gen-code v3.2.0-13475) @ Friday, March 30, 2018 6:40:05 PM\nDetected Java version: 1.8.0_151 from /usr/lib/jvm/java-1.8-openjdk/jre on amd64 (64bit). 441MB available\nLoad Configuration from /usr/src/input/ig.json                                   (00.0000sec)\nRoot directory: /usr/src/input                                                   (00.0062sec)\nTerminology Cache is at /root/fhircache. 0 files in cache                        (00.0086sec)\nLoad Validation Pack (internal)                                                  (00.0087sec)</code></p>",
        "id": 153949463,
        "sender_full_name": "John Silva",
        "timestamp": 1522435258
    },
    {
        "content": "<p>After 10-20sec I get this error:</p>\n<p><code>org.hl7.fhir.r4.utils.client.EFhirClientException: Error sending Http Request: Connection to http://tx.fhir.org refused</code></p>\n<p>(maybe it's a corporate firewall issue -- maybe I need to set the HTTP proxy \"inside\" the docker container?   --- actually, I checked and I do have http_proxy and https_proxy set to my corporate web proxy so that should be OK.  Also, if I manually browse to that URL in my browser it returns a webpage)</p>",
        "id": 153949464,
        "sender_full_name": "John Silva",
        "timestamp": 1522435407
    },
    {
        "content": "<p><a href=\"http://tx.fhir.org\" target=\"_blank\" title=\"http://tx.fhir.org\">tx.fhir.org</a> is a little unstable right now. I'm still trying to figure out why</p>",
        "id": 153949492,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1522440294
    },
    {
        "content": "<p>so that's a possibility</p>",
        "id": 153949493,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1522440307
    },
    {
        "content": "<p>OK, thanks.   (I always assume it's on 'my end' first)</p>",
        "id": 153949499,
        "sender_full_name": "John Silva",
        "timestamp": 1522441899
    }
]