[
    {
        "content": "<p>What is the proper technique to handle attaching multiple code list to many condable concepts?  In rearchStudy the condition element is 0..*.  I needed to add 3 types of conditions. Each has a different code list.  First I tried repeating the condition.coding and assigning the different value sets.  Result - last value set was assigned.</p>\n<p>Next I tried slicing even thought there was no [x].  This did not work.</p>\n<ul>\n<li>condition.coding MS</li>\n<li>condition.coding ^slicing.discriminator.type = #value</li>\n<li>condition.coding ^slicing.discriminator.path = \"code.condition.coding.display\"</li>\n<li>condition.coding ^slicing.rules = #closed</li>\n<li>\n<p>condition.coding contains<br>\n    substudytype 1..1 and<br>\n    storage 1..1 and<br>\n    orientation 0..1</p>\n</li>\n<li>\n<p>condition.coding[substudytype] ^short = \"Sub-Study Type\"</p>\n</li>\n<li>condition.coding[substudytype].code from PqcmcStudyTypeTerminology</li>\n<li>\n<p>condition.coding[substudytype].code.display = \"Sub-Study Type\" (exactly)</p>\n</li>\n<li>\n<p>condition.coding[storage] ^short = \"Storage Conditions Temp.RH\"</p>\n</li>\n<li>condition.coding[storage].code from  PqcmcStorageConditionsTerminology</li>\n<li>\n<p>condition.coding[storage].code.display = \"Storage Conditions\" (exactly)</p>\n</li>\n<li>\n<p>condition.coding[orientation] ^short = \"Container Orientation\"</p>\n</li>\n<li>condition.coding[orientation].code from PqcmcContainerOrientationTerminology</li>\n<li>condition.coding[orientation].code.display = \"Orientation\" (exactly)</li>\n</ul>\n<p>Having a hard fast deadline I wrote and extension:</p>\n<p>Extension: ConditionsExtension<br>\nId:  pq-condtions-extension<br>\nTitle: \"SubStudy Conditions\"<br>\nDescription: \"\"\"Three values lists for substudy characterizaiton\"\"\"</p>\n<ul>\n<li>extension MS</li>\n<li>\n<p>extension contains<br>\n    substudytype 0..1 and<br>\n    storage 0..1 and<br>\n    orientation 0..1</p>\n</li>\n<li>\n<p>extension[substudytype].value[x] only CodeableConcept</p>\n</li>\n<li>extension[substudytype].value[x] ^short = \"Sub-Study Type\"</li>\n<li>\n<p>extension[substudytype].value[x] ^definition = \"\"\"A categorization of studies that identifies whether there are single or multiple phases of the study sometimes simulating the periods of use. [Source: SME Defined]<br>\nExamples: Standard, Cycled-simple.<br>\n\"\"\"</p>\n</li>\n<li>\n<p>extension[substudytype].value[x] from PqcmcStudyTypeTerminology</p>\n</li>\n<li>extension[storage].value[x] only CodeableConcept</li>\n<li>extension[storage].value[x] ^short = \"Storage Conditions Temp.RH\"</li>\n<li>extension[storage].value[x] ^definition = \"The temperature and the relative humidity under which the study was performed. [Source: SME Defined]\"</li>\n<li>extension[storage].value[x] from  PqcmcStorageConditionsTerminology</li>\n<li>extension[orientation].value[x] only CodeableConcept</li>\n<li>extension[orientation].value[x]  ^short = \"Container Orientation\"</li>\n<li>\n<p>extension[orientation].value[x] ^definition = \"\"\"The placement of a container during storage to understand the interactions between the product and the closure. [Source: SME Defined]<br>\nExamples: horizontal, upright.<br>\n\"\"\"</p>\n</li>\n<li>\n<p>extension[orientation].value[x]  from PqcmcContainerOrientationTerminology</p>\n</li>\n</ul>",
        "id": 277659929,
        "sender_full_name": "Catherine Hosage Norman",
        "timestamp": 1649018520
    },
    {
        "content": "<p>First, you should never slice by 'display'.  Display is not computable.  Second, when slicing, the path is relative to where you are.  So if you're already at Condition.code, you'll be slicing on \"coding\".  The slicing will be done by 'value' and you'll declare a 'required' value set on each slice</p>",
        "id": 277661694,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1649020884
    },
    {
        "content": "<p>In this case, I think <span class=\"user-mention\" data-user-id=\"197370\">@Catherine Hosage Norman</span> said she is working with <code>ResearchStudy.condition</code>, which is <code>0..*</code> -- so <em>that's</em> what she actually wants to slice.  So as Lloyd noted, you'd want to slice by <code>value</code> and apply required value set bindings to each slice (assuming the value sets are non-overlapping) -- but you want to slice on <code>$this</code>, since it's the <code>condition</code> array itself that you are slicing.</p>\n<p>It should look something like this:</p>\n<div class=\"codehilite\"><pre><span></span><code>* condition ^slicing.discriminator.type = #value\n* condition ^slicing.discriminator.path = &quot;$this&quot;\n* condition ^slicing.rules = #open // or #closed if you don&#39;t want other concepts\n* condition contains\n    substudytype 1..1 and\n    storage 1..1 and\n    orientation 0..1\n* condition[substudytype] ^short = &quot;Sub-Study Type&quot;\n* condition[substudytype] from PqcmcStudyTypeTerminology\n* condition[storage] ^short = &quot;Storage Conditions Temp.RH&quot;\n* condition[storage] from PqcmcStorageConditionsTerminology\n* condition[orientation] ^short = &quot;Container Orientation&quot;\n* condition[orientation] from PqcmcContainerOrientationTerminology\n</code></pre></div>\n<p><a href=\"https://fshschool.org/FSHOnline/#/share/3Je7xFe\">See it on FSH Online</a></p>",
        "id": 277728260,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1649077795
    },
    {
        "content": "<p>That worked great.  Thanks. Ther is no example on FHS school play with fsh.  Maybe you can put this there,</p>",
        "id": 277812202,
        "sender_full_name": "Catherine Hosage Norman",
        "timestamp": 1649118535
    }
]