[
    {
        "content": "<p>When will the newer resources like MedicinalProductDefinition and SubstanceDefinition be supported.  I am using SUSHI, see attached. Looks like it is using 4.5.0 but not finding the resources.  <a href=\"/user_uploads/10155/eSD1kirF4G-p8WQKD3HCz7pp/sushirun.jpg\">sushirun.jpg</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/eSD1kirF4G-p8WQKD3HCz7pp/sushirun.jpg\" title=\"sushirun.jpg\"><img src=\"/user_uploads/10155/eSD1kirF4G-p8WQKD3HCz7pp/sushirun.jpg\"></a></div>",
        "id": 234326218,
        "sender_full_name": "Catherine Hosage Norman",
        "timestamp": 1618321139
    },
    {
        "content": "<p>If you set the dependency to \"current\" instead of 4.5.0, they are supported</p>",
        "id": 234326683,
        "sender_full_name": "David Pyke",
        "timestamp": 1618321294
    },
    {
        "content": "<p>I did that and it recognized the change to current, but it sill cannot find the paths.  <a href=\"/user_uploads/10155/SvRtYBajuCc8H6bP3MZgP01g/sushirun2.jpg\">sushirun2.jpg</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/SvRtYBajuCc8H6bP3MZgP01g/sushirun2.jpg\" title=\"sushirun2.jpg\"><img src=\"/user_uploads/10155/SvRtYBajuCc8H6bP3MZgP01g/sushirun2.jpg\"></a></div>",
        "id": 234331331,
        "sender_full_name": "Catherine Hosage Norman",
        "timestamp": 1618322867
    },
    {
        "content": "<p>Is there somewhere I can see your FSH code?</p>",
        "id": 234348095,
        "sender_full_name": "David Pyke",
        "timestamp": 1618327668
    },
    {
        "content": "<p>I can't reproduce this.  If I set the <code>fhirVersion</code> to <code>current</code>, then I am able to successfully build this FSH definition:</p>\n<div class=\"codehilite\"><pre><span></span><code>Instance: MyMedicinalProduct\nInstanceOf: MedicinalProductDefinition\n* name.productName = &quot;MyMedicinalProduct&quot;\n* version = &quot;123&quot;\n</code></pre></div>\n<p>As <span class=\"user-mention\" data-user-id=\"192587\">@David Pyke</span> noted, it would be helpful to see your FSH in order to figure out what's really going on here.</p>",
        "id": 234348776,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1618327903
    },
    {
        "content": "<p><a href=\"https://github.com/HL7/FHIR-us-pq-cmc\">https://github.com/HL7/FHIR-us-pq-cmc</a></p>",
        "id": 234348783,
        "sender_full_name": "Catherine Hosage Norman",
        "timestamp": 1618327906
    },
    {
        "content": "<p>Got it.  I am putting the full path in. Thanks</p>",
        "id": 234348963,
        "sender_full_name": "Catherine Hosage Norman",
        "timestamp": 1618327963
    },
    {
        "content": "<p>Ah yes.  You don't need to put the <code>MedicinalProductDefinition</code> bit at the front of the paths.  That's just implied.  One of the ways we make \"short\"hand <em>short</em>. ;-)</p>",
        "id": 234349161,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1618328021
    },
    {
        "content": "<p>Sushi is happy but the IG build is not.   Where it is getting 4.6.0 I do not know. The only version setting it in sushi-config.yaml.</p>\n<p>This is the result when fhirVersion: 4.5.0. is used</p>\n<p>Core Package hl7.fhir.r5.core#current<br>\nInstalling hl7.fhir.r5.core#current to the package cache<br>\n  Fetching:....................................................................<br>\n  Installing: .................................................................... done.<br>\nPublishing Content Failed: Error loading C:\\Users\\Catherine\\.fhir\\packages\\hl7.fhir.r5.core#current\\package\\StructureDefinition-StructureMap.json: Unknown FHIRVersion code '4.6.0' (01:28.0110)</p>\n<p>This is the result when fhirVersion: current is used.</p>\n<p>Publishing Content Failed: Error Parsing File C:\\PQCMC_IG_sushi\\fsh-generated\\resources\\ImplementationGuide-hl7.fhir.us.pq-cmc.json: Unknown FHIRVersion code 'current' (00:54.0134)</p>",
        "id": 234357174,
        "sender_full_name": "Catherine Hosage Norman",
        "timestamp": 1618330875
    },
    {
        "content": "<p>I think that error is misleading.  You've got Version set to current, that should be 0.1.0 (or less).  See if that clears it up</p>",
        "id": 234365095,
        "sender_full_name": "David Pyke",
        "timestamp": 1618333743
    },
    {
        "content": "<p>version: 0.1.0<br>\nfhirVersion: 4.5.0 <br>\nin sushi-config results in:</p>\n<p>Core Package hl7.fhir.r5.core#current<br>\nPublishing Content Failed: Error loading C:\\Users\\Catherine\\.fhir\\packages\\hl7.fhir.r5.core#current\\package\\StructureDefinition-StructureMap.json: Unknown FHIRVersion code '4.6.0' (00:10.0062)</p>\n<p>version: 0.1.0<br>\nfhirVersion: current<br>\nin sushi-config results in:<br>\njava.lang.Exception: Error Parsing File C:\\PQCMC_IG_sushi\\fsh-generated\\resources\\ImplementationGuide-hl7.fhir.us.pq-cmc.json: Unknown FHIRVersion code 'current'</p>",
        "id": 234371732,
        "sender_full_name": "Catherine Hosage Norman",
        "timestamp": 1618336276
    },
    {
        "content": "<p>Ah shoot.  This is sounding too familiar.  I feel like there is another thread somewhere about the IG Publisher not supporting the \"current\" FHIR build.  I feel like it used to work, but I'm afraid it does not seem to work any longer (or I am crazy and it never worked).  I'll try to dig up that thread (I think it was recent).</p>\n<p>Grahame just announced that 4.6.0 is posted, but apparently it is not available in the registry yet.  <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> -- should we expect to be able to get the 4.6.0 package from the FHIR registry at some point soon?  And what about R4B? I can't seem to find that in the registry either...</p>",
        "id": 234380182,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1618339682
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"197370\">@Catherine Hosage Norman</span> -- I found the <a href=\"#narrow/stream/179165-committers/topic/Cached.20R5.20.23dev.20packages.3F/near/232312671\">thread about depending on current build of FHIR Core in IGs</a>.  Unfortunately, it seems it is not possible with the IG Publisher -- and I don't see any workarounds for it. I also don't know if it is something that the IG Publisher will ever support.  We should probably remove support for <code>fhirVersion: current</code> from SUSHI (or issue a very significant warning if someone tries it).  I'm sorry about that.  If/when 4.6.0 is available in the registry (and supported by IG Publisher), I'd expect that to work.</p>",
        "id": 234382524,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1618340628
    },
    {
        "content": "<p>Thanks for digging.  I will continue building the IG on the SUSHI side in hopes that this will resolve.  We are trying to get a document out to industry and would prefer not writing the differential trees in Word.</p>",
        "id": 234383478,
        "sender_full_name": "Catherine Hosage Norman",
        "timestamp": 1618340927
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"197370\">@Catherine Hosage Norman</span> -- I just tried this w/ <code>fhirVersion: 4.5.0</code> and everything worked well (SUSHI and IG Publisher).  As long as you don't need anything that changed post-4.5.0, I think you might be OK for now.  Then if/when 4.6.0 is available, you could try switching to that.</p>\n<p>Can you try it again?  I would suggest that you:</p>\n<ul>\n<li>set <code>fhirVersion: 4.5.0</code> in <code>sushi-config.yaml</code></li>\n<li>delete <code>output</code> and <code>temp</code> folders (to make sure no artifacts from previous attempts interfere)</li>\n<li>run <code>_updatePublisher</code> to ensure you have the latest IG Publisher</li>\n</ul>",
        "id": 234384862,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1618341492
    },
    {
        "content": "<p>OK.  This was really bugging me, so I kept on digging.  I checked out your repo from GitHub and confirmed that it was not working.  I then updated the <code>sushi-config.yaml</code> so it used this <code>version</code> and <code>fhirVersion</code>:</p>\n<div class=\"codehilite\"><pre><span></span><code>version: 0.1.0\nfhirVersion: 4.5.0\n</code></pre></div>\n<p>After that, the IG Publisher gave me this error:</p>\n<blockquote>\n<p>Publishing Content Failed: Error loading /Users/cmoesel/.fhir/packages/hl7.fhir.r5.core#current/package/ConceptMap-101.json: property identifier is a class com.google.gson.JsonArray looking for an object (00:20.0162)</p>\n</blockquote>\n<p>You don't use <code>ConceptMap</code>, so I thought that was kind of weird.  It's also weird because <code>ConceptMap.identifier</code> should be an array, so I don't know why the IG Publisher is expecting it to be an object.  <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>?</p>\n<p>After some experimentation, I found that it would work if I commented out (or deleted) all of the FSH CodeSystem and ValueSet definitions.  After doing that, I got a good build.  I know that's probably not a viable solution, but it seems to be the only solution that currently works.</p>",
        "id": 234395328,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1618345821
    },
    {
        "content": "<p>Well that is stranger still.  Jean Duteau said there would be no support for R4b until after the ballot.  I did write a differential tree in Word today. I have a deadline.</p>",
        "id": 234433136,
        "sender_full_name": "Catherine Hosage Norman",
        "timestamp": 1618368461
    },
    {
        "content": "<p>To be clear, I said that I didn't expect full R4B support in the IG publisher until after R4B has been published.</p>",
        "id": 234434469,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1618369630
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span> I think the reason for the confusion with <code>ConceptMap.identifier</code> being an array vs. object is most likely because the max cardinality of <code>identifier</code> was changed from 1 to * in the StructureDefinition in the CI build on March 29, but those changes weren't carried through to the supporting org.hl7.fhir.core project which builds the validator and publisher.  So the StructureDefinition says it's an array, but the publisher/validator is still looking for an object.  I'm pretty sure that's why we would be seeing this behavior.  <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>?</p>",
        "id": 234495311,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1618405820
    },
    {
        "content": "<p>So (assuming that's correct) more work needs to be done in the FHIR model (and other subprojects) in org.hl7.fhir.core.  And doing that typically is far from trivial.</p>",
        "id": 234497769,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1618406706
    }
]