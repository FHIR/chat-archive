[
    {
        "content": "<p>OK so I tried to create bundle fragments for profiles example instances as discussed here:  <a href=\"#narrow/stream/179252-IG-creation/topic/link.20errors.20for.20uuids.20in.20a.20bundle\" title=\"#narrow/stream/179252-IG-creation/topic/link.20errors.20for.20uuids.20in.20a.20bundle\">https://chat.fhir.org/#narrow/stream/179252-IG-creation/topic/link.20errors.20for.20uuids.20in.20a.20bundle</a></p>\n<p>and frankly is more confusing than having the  invalid isolated resource instances.  so I include a highlighted note<br>\nwherever these invalid profile examples are shown.:</p>\n<blockquote>\n<p>The following examples of this profile are freestanding resource instances. Note that these are technically invalid since the profile is defined to references other resources within the same Da Vinci Notification Message Bundle.  A complete list of examples including bundle examples can be found on the [Examples] page.</p>\n</blockquote>\n<p>in the Da Vinci Notifications IG : <a href=\"http://build.fhir.org/ig/HL7/davinci-alerts/branches/master/index.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/davinci-alerts/branches/master/index.html\">http://build.fhir.org/ig/HL7/davinci-alerts/branches/master/index.html</a><br>\nexample where this note appears is here:  <a href=\"http://build.fhir.org/ig/HL7/davinci-alerts/branches/master/StructureDefinition-notifications-messageheader.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/davinci-alerts/branches/master/StructureDefinition-notifications-messageheader.html\">http://build.fhir.org/ig/HL7/davinci-alerts/branches/master/StructureDefinition-notifications-messageheader.html</a></p>\n<p>example QA errors that are generated for these examples are:</p>\n<p><a href=\"/user_uploads/10155/gFjuUiZGdIkJ3Fa9Ebgnt6fj/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/gFjuUiZGdIkJ3Fa9Ebgnt6fj/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/gFjuUiZGdIkJ3Fa9Ebgnt6fj/pasted_image.png\"></a></div><p>I would like to get the OK from the Product Director to accept that these qa errors are OK for these instance so we can move on to ballot with the IG.</p>\n<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span><br>\n<span class=\"user-mention\" data-user-id=\"191698\">@Riki Merrick</span><br>\n<span class=\"user-mention\" data-user-id=\"193599\">@Lynn Laakso</span></p>",
        "id": 182684284,
        "sender_full_name": "Eric Haas",
        "timestamp": 1575568080
    },
    {
        "content": "<p>and all these link errors as well:</p>\n<p><a href=\"/user_uploads/10155/9jyq33CGN1SvJEYoI8AzpliR/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/9jyq33CGN1SvJEYoI8AzpliR/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/9jyq33CGN1SvJEYoI8AzpliR/pasted_image.png\"></a></div>",
        "id": 182684838,
        "sender_full_name": "Eric Haas",
        "timestamp": 1575568475
    },
    {
        "content": "<p>ok</p>",
        "id": 182950149,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1575894094
    },
    {
        "content": "<p>I'm getting ready to publish Alerts and these errors still persist for the same reason as stated above.  I would like get a variance on them unless there is another way.  Also should these errors be put in the ignore file?</p>\n<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  or <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> ?</p>",
        "id": 207687664,
        "sender_full_name": "Eric Haas",
        "timestamp": 1598045880
    },
    {
        "content": "<p>I'm not sure what you're asking here - there's several different errors</p>",
        "id": 207690514,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1598048030
    },
    {
        "content": "<p>I want a realistic example for a profile that aggregrates within a bundle but have a stand alone view of the profile example as a convienence for the reader</p>\n<p>The errors I displayed are since the references don't resolve since the example is not in a bundle.  and none of  the references will resolve.   I think The validation errors are all due to that.  Are some of them dues to other issues?</p>",
        "id": 207864731,
        "sender_full_name": "Eric Haas",
        "timestamp": 1598286714
    },
    {
        "content": "<p>so looking at this... I have fixed the Publisher to be able to resolve urn:uuid: links in bundles - a bug that I overlooked.</p>",
        "id": 208045935,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1598407486
    },
    {
        "content": "<p>but I think that you should have UUIDs that resolve in your particular case at least</p>",
        "id": 208045954,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1598407507
    },
    {
        "content": "<p>if an instance is only found in a bundle then its linke are only in the context of the bundle.  how would the validator know to look inside a bundle to resolve them if the example is free standing.</p>",
        "id": 208046420,
        "sender_full_name": "Eric Haas",
        "timestamp": 1598408025
    },
    {
        "content": "<p>My desire is to give the reader an view of the isolated resource without having to sift through the bundle to find an example.</p>",
        "id": 208046483,
        "sender_full_name": "Eric Haas",
        "timestamp": 1598408079
    },
    {
        "content": "<p>right that part is fine. But in fact, the IG publisher already looks through the bundles so that examples in bundles can be referred to outside the bundle; exactly this situation. I overlooked a piece of logic to allow uuid matching by full URL</p>",
        "id": 208046530,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1598408161
    },
    {
        "content": "<p>the idea is that you can do what you want but still have a link that does resolve</p>",
        "id": 208046574,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1598408181
    },
    {
        "content": "<p>ok  good to know that I will update.</p>",
        "id": 208118818,
        "sender_full_name": "Eric Haas",
        "timestamp": 1598461204
    },
    {
        "content": "<p>OK  fixed examples so the current errors in them are:</p>\n<p><code>Reference is remote which isn't supported by the specified aggregation mode(s) for the reference</code></p>\n<p>and </p>\n<p><code>Profile http://hl7.org/fhir/us/davinci-alerts/StructureDefinition/discharge-notification-messageheader, Element 'MessageHeader.focus[discharge-notification]': minimum required = 1, but only found 0</code>   </p>\n<p>which  I assume is since can't resolve the reference</p>\n<p>see <a href=\"http://build.fhir.org/ig/HL7/davinci-alerts/qa.html\">http://build.fhir.org/ig/HL7/davinci-alerts/qa.html</a></p>",
        "id": 208144669,
        "sender_full_name": "Eric Haas",
        "timestamp": 1598473931
    },
    {
        "content": "<p>ok if you add an extension to the entry that includes the example, you can turn off aggregation validation:</p>",
        "id": 208177719,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1598503022
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code><span class=\"s2\">&quot;extension&quot;</span> <span class=\"err\">:</span> <span class=\"p\">[{</span>\n                  <span class=\"nt\">&quot;url&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;http://hl7.org/fhir/StructureDefinition/igpublisher-no-check-aggregation&quot;</span><span class=\"p\">,</span>\n                  <span class=\"nt\">&quot;valueBoolean&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;true&quot;</span>\n                <span class=\"err\">]</span><span class=\"p\">}</span>\n</code></pre></div>",
        "id": 208177721,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1598503025
    },
    {
        "content": "<p>I added an example</p>",
        "id": 208177725,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1598503065
    },
    {
        "content": "<p>to be  precise added to <code>ImplementationGuide.definition.resource</code>  element</p>",
        "id": 208218309,
        "sender_full_name": "Eric Haas",
        "timestamp": 1598535960
    },
    {
        "content": "<p>ok done.</p>",
        "id": 208225208,
        "sender_full_name": "Eric Haas",
        "timestamp": 1598539036
    },
    {
        "content": "<p>OK thanks that gets rid of the aggregation error ....still have this error assuming since not resolving the reference</p>\n<p><code>Profile http://hl7.org/fhir/us/davinci-alerts/StructureDefinition/admit-notification-messageheader, Element 'MessageHeader.focus[admit-notification]': minimum required = 1, but only found 0</code></p>",
        "id": 208238203,
        "sender_full_name": "Eric Haas",
        "timestamp": 1598544159
    },
    {
        "content": "<p>it is resolving the reference. but the reference isn't validating as required. See the 'show reasoning' entry above it which explains why it doesn't match. The problem is in the validation of the bundle</p>",
        "id": 208282695,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1598566123
    },
    {
        "content": "<ol>\n<li>Element not found error in isolated example - suspect not resolving to profile.<br>\nmessage</li>\n</ol>\n<div class=\"codehilite\"><pre><span></span><code>Profile http://hl7.org/fhir/us/davinci-\nalerts/StructureDefinition/admit-notification-messageheader, Element\n&#39;MessageHeader.focus[admit-notification]&#39;: minimum required = 1, but\nonly found 0\n</code></pre></div>\n\n\n<p>For example, <a href=\"http://build.fhir.org/ig/HL7/davinci-alerts/MessageHeader-admit-notification-messageheader-01.html\">this example</a> pointing to this resource within this <a href=\"http://build.fhir.org/ig/HL7/davinci-alerts/Bundle-admit-notification-message-bundle-01.json.html\">bundle</a> which clearly shows the profile is correct</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"err\">...</span>\n   <span class=\"p\">{</span>\n      <span class=\"nt\">&quot;fullUrl&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;urn:uuid:5fe62cd5-bfcf-4d3b-a1e9-80d6f75d6f82&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;resource&quot;</span> <span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"nt\">&quot;resourceType&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;Encounter&quot;</span><span class=\"p\">,</span>\n        <span class=\"nt\">&quot;id&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;5fe62cd5-bfcf-4d3b-a1e9-80d6f75d6f82&quot;</span><span class=\"p\">,</span>\n        <span class=\"nt\">&quot;meta&quot;</span> <span class=\"p\">:</span> <span class=\"p\">{</span>\n          <span class=\"nt\">&quot;versionId&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;54&quot;</span><span class=\"p\">,</span>\n          <span class=\"nt\">&quot;lastUpdated&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;2020-04-28T21:32:21.199+00:00&quot;</span><span class=\"p\">,</span>\n          <span class=\"nt\">&quot;source&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;#DlfWMd7j9EX8TaLI&quot;</span><span class=\"p\">,</span>\n          <span class=\"nt\">&quot;profile&quot;</span> <span class=\"p\">:</span> <span class=\"p\">[</span>\n            <span class=\"s2\">&quot;http://hl7.org/fhir/us/core/StructureDefinition/us-core-encounter&quot;</span><span class=\"p\">,</span>\n            <span class=\"s2\">&quot;http://hl7.org/fhir/us/davinci-alerts/StructureDefinition/adt-notification-encounter&quot;</span>\n          <span class=\"p\">]</span>\n          <span class=\"err\">...</span>\n</code></pre></div>",
        "id": 208835770,
        "sender_full_name": "Eric Haas",
        "timestamp": 1599058330
    },
    {
        "content": "<p>This seems to be a publisher bug ....</p>",
        "id": 208835861,
        "sender_full_name": "Eric Haas",
        "timestamp": 1599058367
    },
    {
        "content": "<p>.also the new extension is creating errrors in the <a href=\"http://build.fhir.org/ig/HL7/davinci-alerts/qa.html\">QA</a></p>\n<div class=\"codehilite\"><pre><span></span><code>ImplementationGuide/hl7.fhir.us.davinci-alerts: ImplementationGuide.definition.resource<span class=\"o\">[</span><span class=\"m\">10</span><span class=\"o\">]</span>.extension<span class=\"o\">[</span><span class=\"m\">0</span><span class=\"o\">]</span>  error\nThe extension http://hl7.org/fhir/StructureDefinition/igpublisher-no-check-aggregation is unknown, and not allowed here\n\nImplementationGuide/hl7.fhir.us.davinci-alerts: ImplementationGuide.definition.resource<span class=\"o\">[</span><span class=\"m\">10</span><span class=\"o\">]</span>.extension<span class=\"o\">[</span><span class=\"m\">0</span><span class=\"o\">]</span>.url    error\n    URL value <span class=\"s1\">&#39;http://hl7.org/fhir/StructureDefinition/igpublisher-no-check-aggregation&#39;</span> does not resolve\n</code></pre></div>",
        "id": 208836856,
        "sender_full_name": "Eric Haas",
        "timestamp": 1599058715
    },
    {
        "content": "<p>when I looked, the instance was failing to validate, which is why it's labelled as not present in the source of the reference</p>",
        "id": 208880315,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1599077296
    },
    {
        "content": "<p>I don't understand the error.  here is the info in the messageheader-01 instance:</p>\n<div class=\"codehilite\"><pre><span></span><code>MessageHeader/admit-notification-messageheader-01: MessageHeader.focus[0] (l25/c10) Slicing Information This element\ndoes not match any known slice defined in the profile http://hl7.org/fhir/us/davinci-alerts/StructureDefinition/admit-notification-\nmessageheader Hide Reasoning\n\n\nThis element does not match any known slicedefined_in_the_profilehttp://hl7.org/fhir/us/davinci-alerts/StructureDefinition/admit-\nnotification-messageheader\nMessageHeader.focus[0]: discriminator = true and $this.resolve().conformsTo(&#39;http://hl7.org/fhir/us/davinci-\nalerts/StructureDefinition/adt-notification-encounter&#39;)\n</code></pre></div>",
        "id": 208907520,
        "sender_full_name": "Eric Haas",
        "timestamp": 1599093783
    },
    {
        "content": "<p>but it does <strong>not show</strong> up in the bundle instance that contains the same message header (only the id has been changed)?</p>",
        "id": 208907663,
        "sender_full_name": "Eric Haas",
        "timestamp": 1599093917
    },
    {
        "content": "<p>so I don't know if and how to fix it.</p>",
        "id": 208907765,
        "sender_full_name": "Eric Haas",
        "timestamp": 1599094041
    },
    {
        "content": "<p>Here is the profile in question...</p>\n<p><a href=\"/user_uploads/10155/ZcsGqD6843XsszbKXwTQvq6p/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/ZcsGqD6843XsszbKXwTQvq6p/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/ZcsGqD6843XsszbKXwTQvq6p/image.png\"></a></div>",
        "id": 208908167,
        "sender_full_name": "Eric Haas",
        "timestamp": 1599094455
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  ?</p>",
        "id": 209192810,
        "sender_full_name": "Eric Haas",
        "timestamp": 1599334735
    },
    {
        "content": "<p>looking into this, you have different resources with the same id (e.g. 5fe62cd5-bfcf-4d3b-a1e9-80d6f75d6f82). Can you clean this up so that ids are only used once? if that doesn't resolve this issue, then I can look with out being confused about which resource is which</p>",
        "id": 209250109,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1599442031
    }
]