[
    {
        "content": "<p>I am noticing that my source markdown files (./input/pagecontent) are ending up in the IG build output folder (./output). This likely is not doing any serious harm. The staging system for the IHE publication web site is a github repo, and thus github is trying to convert these markdown files and complaining about missing links and such. These complaints are not too worrisome. </p>\n<p>I am more worried that there is code copying these markdown files with no good reason, and this code might be either not intended or potentially going to cause problems in the future if it is unknown behavior.</p>\n<p>I do know there are some folders that we are expecting the build to copy the contents, (e.g. ./input/images). There are other folders that are NOT copied (e.g. ./input/fsh). So someone put in the code to copy pagecontent, and we all might not know this is being done.</p>\n<p>Is this a problem I should create an issue about? (Presume it would be an IG builder issue, not template.)</p>",
        "id": 247957870,
        "sender_full_name": "John Moehrke",
        "timestamp": 1627931504
    },
    {
        "content": "<p>i just checked two of my IGs that I built recently and the *.md files aren't in the output folder.</p>",
        "id": 247958283,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1627931690
    },
    {
        "content": "<p>This might be something the IHE template is doing?  <span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span></p>",
        "id": 247961640,
        "sender_full_name": "John Moehrke",
        "timestamp": 1627933187
    },
    {
        "content": "<p>There goes my evil plot to expose markdown files. <br>\n #MarkdownLeaks</p>",
        "id": 247964865,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1627934849
    },
    {
        "content": "<p>I have no idea. I think there was a similar issue before, could be the IHE template has some leftovers, but I doubt. I'll check anyway</p>",
        "id": 247964982,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1627934900
    },
    {
        "content": "<p>seems to copy everything from input\\pagecontent</p>",
        "id": 247965655,
        "sender_full_name": "John Moehrke",
        "timestamp": 1627935280
    },
    {
        "content": "<p>This is a known issue and you mentioned it before.  The publisher pollutes the output with markdown files.  This screws up publishing on Github pages for example.  I wrote a bash script to scrub out the markdown since there was no interest when I brought this issue it up here previously,  perhaps you will have more luck.</p>",
        "id": 247965832,
        "sender_full_name": "Eric Haas",
        "timestamp": 1627935366
    },
    {
        "content": "<p>the generic template does not seem to do it.</p>",
        "id": 247965888,
        "sender_full_name": "John Moehrke",
        "timestamp": 1627935395
    },
    {
        "content": "<p>I don't have any HL7 IGs.. do they do it?</p>",
        "id": 247965911,
        "sender_full_name": "John Moehrke",
        "timestamp": 1627935410
    },
    {
        "content": "<p>it does for me .... let me confirm</p>",
        "id": 247965938,
        "sender_full_name": "Eric Haas",
        "timestamp": 1627935426
    },
    {
        "content": "<p>HotBeverage builds clean. It is using fhir.base.template</p>",
        "id": 247966674,
        "sender_full_name": "John Moehrke",
        "timestamp": 1627935846
    },
    {
        "content": "<p>could it be an IG parameter? Like path-resources or path-pages? -- they are not defined as having a copying behavior.</p>",
        "id": 247967182,
        "sender_full_name": "John Moehrke",
        "timestamp": 1627936084
    },
    {
        "content": "<p>yes it still passes the markdown pages into the output  ( 'docs' folder in this case):<br>\n<a href=\"/user_uploads/10155/fkw2vJWsSBr-hbnimBXrHukx/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/fkw2vJWsSBr-hbnimBXrHukx/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/fkw2vJWsSBr-hbnimBXrHukx/image.png\"></a></div>",
        "id": 247967720,
        "sender_full_name": "Eric Haas",
        "timestamp": 1627936378
    },
    {
        "content": "<p>so, I have a different IG that is using base template and it does copy... so I don't think it is template</p>",
        "id": 247967779,
        "sender_full_name": "John Moehrke",
        "timestamp": 1627936417
    },
    {
        "content": "<p>I think it is the IG publisher parameter path-pages.   Given that my markdown are in pagecontent,  I don't need to specify this, but I do because I saw it recommended somewhere.<br>\nI am also using sushi-config.yaml and no IG xml...</p>",
        "id": 247968677,
        "sender_full_name": "John Moehrke",
        "timestamp": 1627936841
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> do you use path-pages?</p>",
        "id": 247969287,
        "sender_full_name": "John Moehrke",
        "timestamp": 1627937172
    },
    {
        "content": "<p>yes  I do:</p>\n<div class=\"codehilite\" data-code-language=\"YAML\"><pre><span></span><code>  <span class=\"nt\">path-pages</span><span class=\"p\">:</span>\n    <span class=\"p p-Indicator\">-</span> <span class=\"l l-Scalar l-Scalar-Plain\">input/pagecontent</span>\n    <span class=\"p p-Indicator\">-</span> <span class=\"l l-Scalar l-Scalar-Plain\">fsh-generated/includes</span>\n</code></pre></div>",
        "id": 248172534,
        "sender_full_name": "Eric Haas",
        "timestamp": 1627953059
    },
    {
        "content": "<p>I just ran davinci-crd which uses the current template and current publisher.  It doesn't propagate any of the .md files to the output, so it's not an issue with the base template or the publisher</p>",
        "id": 248174847,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1627955704
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> I think you need to use the path-pages parameter .  Can you confirm?</p>",
        "id": 248216282,
        "sender_full_name": "John Moehrke",
        "timestamp": 1627995319
    },
    {
        "content": "<p>I can confirm that you <em>don't</em> want path-pages.  path-pages will be copied directly to the output folder.  The processing of the pagecontent folder is handled by the config.json in the template - specifically this part:<br>\n    {<br>\n      \"folder\": \"input/pagecontent\",<br>\n      \"relativePath\": \"_includes\",<br>\n      \"transform\": \"template/scripts/processPages.xslt\"<br>\n    },</p>",
        "id": 248220374,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1627997320
    },
    {
        "content": "<p>so it would seem that when using sushi-config.yaml (as the driver), we should NOT include the path-pages that Eric and I have used.</p>",
        "id": 248229147,
        "sender_full_name": "John Moehrke",
        "timestamp": 1628001208
    },
    {
        "content": "<p>Right.</p>",
        "id": 248230377,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1628001757
    },
    {
        "content": "<p>I just removed those lines from three projects with no apparent negative. I am not sure where I got these recommendations, so not clear how to keep future projects from using these in a way not intended. I do think that the hl7 confluence page does not explain this fully.</p>\n<div class=\"codehilite\"><pre><span></span><code>  path-pages:\n    - input/pagecontent\n    - fsh-generated/includes\n</code></pre></div>",
        "id": 248231325,
        "sender_full_name": "John Moehrke",
        "timestamp": 1628002164
    },
    {
        "content": "<p>sureley, explicitvs implicit statement of where the pages live should not lead to different behavior,  additionally if you pages live outside these folders how will the publisher know to grab them?   I think we need to:</p>\n<ol>\n<li>either say you can have content <em>only</em> here and here or...</li>\n<li>fix the bug</li>\n</ol>",
        "id": 248247390,
        "sender_full_name": "Eric Haas",
        "timestamp": 1628009259
    },
    {
        "content": "<p>path-pages is <em>not</em> used to indicate where pages are.  I get that that's confusing, but that's how the templates work.  If we change it now, it will break all downstream templates.</p>",
        "id": 248252192,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1628011597
    },
    {
        "content": "<p>I don't think the template is the problem. I think the definition in the confluence page seems to imply that it would be needed to specify</p>",
        "id": 248252263,
        "sender_full_name": "John Moehrke",
        "timestamp": 1628011638
    },
    {
        "content": "<p>The only way to specify where to look for pages is in the xslt that produces the config.json file.</p>",
        "id": 248252287,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1628011657
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> <a href=\"#narrow/stream/179252-IG-creation/topic/source.20markdown.20copied.20to.20output/near/248252287\">said</a>:</p>\n<blockquote>\n<p>The only way to specify where to look for pages is in the xslt that produces the config.json file.</p>\n</blockquote>\n<p>this is published on the parameters page in confluence:</p>\n<p><a href=\"/user_uploads/10155/Df0j64Ib2lq8tva9mq8O-X3D/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/Df0j64Ib2lq8tva9mq8O-X3D/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/Df0j64Ib2lq8tva9mq8O-X3D/image.png\"></a></div>",
        "id": 248254273,
        "sender_full_name": "Eric Haas",
        "timestamp": 1628012611
    },
    {
        "content": "<p>Having secret rules by the xlst that do the opposite of what is published is not helpful.  The templates are prohibiting an author who want to use a different folder for page content and publish on github pages?</p>",
        "id": 248254477,
        "sender_full_name": "Eric Haas",
        "timestamp": 1628012714
    },
    {
        "content": "<p>The only way to use a different folder is by it being specified in the config.json file and that's generated by an XSLT.  We can provide a mechanism to add additional source folders if the designers of non-HL7 templates need that as a capability.  Agree the documentation needs to be fixed.  path-pages indicates folders whose contents are to be copied directly to output.</p>",
        "id": 248256708,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1628013749
    },
    {
        "content": "<p>How about </p>\n<p>\"path-pages | yes | path | A relative path that contains files that will be directly copied to the output folder in the IG. Default = \"\\pages\". Note that this is not the path of the source for the normal pages (in markdown or xhtml format) - those are handled by the template\"</p>",
        "id": 248257925,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1628014287
    },
    {
        "content": "<p>(nevermind the formatting, markdown is not my friend today)</p>",
        "id": 248258134,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1628014375
    },
    {
        "content": "<p>page-paths is not (and will not) be the element to identify where pages are located unless we're happy to break the existing derived templates</p>",
        "id": 248275244,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1628022115
    },
    {
        "content": "<p>We can add something new, but we can't repurpose that parameter which is used for other purposes.</p>",
        "id": 248275314,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1628022136
    },
    {
        "content": "<p>I don't think I want to repurpose. I simply want to understand the intent. I had no idea that the intent of the parameter was to identify other folders that should also be \"copied\" to the output. If this is indeed the meaning, then the confluence page simply needs to be updated to state that. I am happy to update the confluence page, I just want to update it correctly.</p>",
        "id": 248279937,
        "sender_full_name": "John Moehrke",
        "timestamp": 1628024287
    }
]