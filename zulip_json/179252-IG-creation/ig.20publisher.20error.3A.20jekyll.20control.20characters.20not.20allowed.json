[
    {
        "content": "<p>I'm executing the IG Publisher on an implementation guide and am getting the following errors:</p>",
        "id": 173247764,
        "sender_full_name": "Arvind Jagannathan",
        "timestamp": 1565821292
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span>Jekyll: Source: D:/test igs/generated_output/temp                                (00:01:22.0657sec)\nJekyll: Generating...                                                            (00:01:22.0659sec)\nJekyll: jekyll 3.8.6 | Error:  (D:/test igs/generated_output/temp/_data/structuredefinitions.json): control characters are not allowed at line 1 column 1 (00:01:24.0046sec)\nJekyll has failed - not installed (correcty?). Complete output from running Jekyll: jekyll 3.8.6 | Error:  (D:/test igs/generated_output/temp/_data/structuredefinitions.json): control characters are not allowed at line 1 column 1\n                                                                                                              (00:01:24.0061sec)\nPublishing Content Failed: Process exited with an error: 1 (Exit value: 1)       (00:01:24.0066sec)\n                                                                                 (00:01:24.0066sec)\nUse -? to get command line help                                                  (00:01:24.0067sec)\n                                                                                 (00:01:24.0073sec)\nStack Dump (for debugging):                                                      (00:01:24.0078sec)\norg.apache.commons.exec.ExecuteException: Process exited with an error: 1 (Exit value: 1)\n        at org.apache.commons.exec.DefaultExecutor.executeInternal(DefaultExecutor.java:404)\n        at org.apache.commons.exec.DefaultExecutor.execute(DefaultExecutor.java:166)\n        at org.apache.commons.exec.DefaultExecutor.execute(DefaultExecutor.java:153)\n        at org.hl7.fhir.igtools.publisher.Publisher.runJekyll(Publisher.java:4355)\n        at org.hl7.fhir.igtools.publisher.Publisher.runTool(Publisher.java:4277)\n        at org.hl7.fhir.igtools.publisher.Publisher.generate(Publisher.java:3793)\n        at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:722)\n        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:600)\n        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:6301)\nException in thread &quot;main&quot; java.lang.NullPointerException\n        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:6311)\n</pre></div>",
        "id": 173247767,
        "sender_full_name": "Arvind Jagannathan",
        "timestamp": 1565821296
    },
    {
        "content": "<p>I suspect it has something to do with character encoding... But I'm not sure why this would be an issue.</p>",
        "id": 173247833,
        "sender_full_name": "Arvind Jagannathan",
        "timestamp": 1565821335
    },
    {
        "content": "<p>Additionally, the error is related to a file that is generated by the IG Publisher</p>",
        "id": 173247847,
        "sender_full_name": "Arvind Jagannathan",
        "timestamp": 1565821355
    },
    {
        "content": "<p>The encoding of that file appears to be \"UTF-8 BOM\" while all the resources are encoded as \"UTF-8\"</p>",
        "id": 173247866,
        "sender_full_name": "Arvind Jagannathan",
        "timestamp": 1565821377
    },
    {
        "content": "<p>I'm not sure why the IG Publisher is encoding this generated file as \"UTF-8 BOM\"</p>",
        "id": 173247889,
        "sender_full_name": "Arvind Jagannathan",
        "timestamp": 1565821395
    },
    {
        "content": "<p>Anyone have any ideas?</p>",
        "id": 173247893,
        "sender_full_name": "Arvind Jagannathan",
        "timestamp": 1565821400
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191505\">@Sean McIlvenna</span>  recommends I mention <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> and <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>  :)</p>",
        "id": 173247904,
        "sender_full_name": "Arvind Jagannathan",
        "timestamp": 1565821431
    },
    {
        "content": "<p>is this reproducible on another computer?</p>",
        "id": 173249505,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565823067
    },
    {
        "content": "<p>What's showing up in the referenced JSON file?</p>",
        "id": 173255978,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1565830296
    },
    {
        "content": "<p>Jekyll should not be processing a plain .json file, so it's a bit mystifying.</p>",
        "id": 173256474,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565831022
    },
    {
        "content": "<p>That's a file that might be  being used for lookup info.  That's what the data files are for.  My guess is something not  escaped properly.</p>",
        "id": 173257877,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1565832900
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191667\">@Arvind Jagannathan</span> will have to package up the files into a zip and send them to me so I can test if the same error occurs on my machine. As for what's IN the json file, it just seems to be some lookup information on the various profiles in the IG. I'm surprised you're not aware of it, though, as I was thinking it was generated by the IG Publisher... There was no structuredefinitions.json file in the core IG files, to my knowledge. Again, <span class=\"user-mention\" data-user-id=\"191667\">@Arvind Jagannathan</span> will have to confirm.</p>",
        "id": 173266936,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1565847077
    },
    {
        "content": "<p>I do generate it - I didnâ€™t check the path. But nothing has changed in how it generates...</p>",
        "id": 173270012,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565852091
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/dDRdA8aSElOZ1VMuJYALUHvs/ccda-on-fhir.zip\" target=\"_blank\" title=\"ccda-on-fhir.zip\">ccda-on-fhir.zip</a></p>",
        "id": 173299039,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1565882705
    },
    {
        "content": "<p>I got the same error as <span class=\"user-mention\" data-user-id=\"191667\">@Arvind Jagannathan</span> on my computer</p>",
        "id": 173299052,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1565882713
    },
    {
        "content": "<p>using the package above</p>",
        "id": 173299058,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1565882717
    },
    {
        "content": "<p>looks to me like the error position is wrong from Jekyll. There are bad characters at</p>\n<ul>\n<li>\"such as a radiologists\"</li>\n<li>\"Preferably, the patient\"</li>\n</ul>\n<p>It's not clear to me how that comes about; I am building the file as a string in Java and saving it as UTF-8 (no BOM). I think the input must be badly coded</p>",
        "id": 173314925,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565895532
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191667\">@Arvind Jagannathan</span> please investigate what the invalid characters might be at those two points as mentioned by Grahame... Maybe we could put some validation into Trifolia-on-FHIR to warn the user of characters like that. Or perhaps just remove bad characters automatically during the export.</p>",
        "id": 173324436,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1565902943
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191505\">@Sean McIlvenna</span> sure thing. I'll look into that. Thanks everyone for the help.</p>",
        "id": 173326752,
        "sender_full_name": "Arvind Jagannathan",
        "timestamp": 1565904804
    },
    {
        "content": "<p>should be encoded correctly? Should be possible, at least</p>",
        "id": 173326847,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565904882
    }
]