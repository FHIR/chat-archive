[
    {
        "content": "<p><a href=\"https://wiki.hl7.org/IG_Publisher_Documentation\">https://wiki.hl7.org/IG_Publisher_Documentation</a> doesn't mention an <code>ig.ini</code> format. Can someone point to the right place for learning about this? In the auto builder, we always pass in <code>ig.json</code> to the publisher via <code>-ig ig.json</code> argument. <span class=\"user-mention\" data-user-id=\"191427\">@Jens Villadsen</span> updated the <a href=\"https://github.com/FHIR/auto-ig-builder/\">auto-build README</a> a few months back to say that <code>ig.ini</code> was also supported, but I haven't done any work to make that happen; is there some magic <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> in the publisher that would accept an arg like <code>-ig ig.json</code> even if no such file exists, and somehow default to a <code>.ini</code> instead of the supplied <code>.json</code>?</p>",
        "id": 203292443,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1594226911
    },
    {
        "content": "<p>ig.ini is considerably trimmed now - it is documented inline<br>\n<a href=\"https://github.com/FHIR/sample-ig/blob/master/ig.ini\">https://github.com/FHIR/sample-ig/blob/master/ig.ini</a></p>",
        "id": 203294578,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1594228027
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> how would this be best documented? A link to the sample ig.ini in the wiki?</p>",
        "id": 203295930,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1594228715
    },
    {
        "content": "<p>I would avoid duplicating documentation, hence the approach to document inline in the document itself</p>",
        "id": 203295985,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1594228756
    },
    {
        "content": "<p>Not just a sample, but also its content</p>",
        "id": 203295990,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1594228760
    },
    {
        "content": "<p>the content is just (AFAIK) the implementation guide resource and the template.</p>",
        "id": 203296086,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1594228804
    },
    {
        "content": "<p>Which then should be documented</p>",
        "id": 203296130,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1594228837
    },
    {
        "content": "<p>IMHO</p>",
        "id": 203296158,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1594228852
    },
    {
        "content": "<p>the code also indicates that there is an option to skip the terminology server, but the template handles that automatically. <br>\n(i think this is the code: <a href=\"https://github.com/HL7/fhir-ig-publisher/blob/2daaac0b48791d131924a0964394e43dd616ac9d/org.hl7.fhir.publisher.core/src/main/java/org/hl7/fhir/igtools/publisher/Publisher.java#L1510\">https://github.com/HL7/fhir-ig-publisher/blob/2daaac0b48791d131924a0964394e43dd616ac9d/org.hl7.fhir.publisher.core/src/main/java/org/hl7/fhir/igtools/publisher/Publisher.java#L1510</a></p>",
        "id": 203296205,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1594228880
    },
    {
        "content": "<p>Agree it should be well documented. Isn't this enough?</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\">##########################</span>\n<span class=\"c1\">### ig.ini parameters: ###</span>\n<span class=\"c1\">##########################</span>\n\n<span class=\"c1\">#   ig: the name of the implementation guide resource file.</span>\n<span class=\"c1\"># examples:</span>\n<span class=\"c1\"># ig = input/myig.xml</span>\n<span class=\"c1\"># ig = input/implementationguide-example2.xml</span>\n\n<span class=\"c1\">#   template: the IG template that will be used to create the implementation guide (normally be a package name, but can be a local folder).</span>\n<span class=\"c1\">#   base fhir template:</span>\n<span class=\"c1\">#template = fhir.base.template</span>\n</code></pre></div>",
        "id": 203296257,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1594228918
    },
    {
        "content": "<p>Yep, if it is stated here as well <a href=\"https://confluence.hl7.org/plugins/servlet/mobile?contentId=35718627#content/view/35718627\">https://confluence.hl7.org/plugins/servlet/mobile?contentId=35718627#content/view/35718627</a></p>",
        "id": 203296356,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1594228966
    },
    {
        "content": "<p>yes, that is my point: I think the best is to point in the wiki to the file. This way we don't have to maintain documentation in 2 places</p>",
        "id": 203296419,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1594229006
    },
    {
        "content": "<p>That ought to do it, yes</p>",
        "id": 203296586,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1594229077
    },
    {
        "content": "<p>which makes me wonder ... why have that .ini file in the first place if its only two lines? if those parts fits into the json file, and the json files could be handled with the same sane defaults that are used when parsing the ini-file, it seems a bit gold plated to have two different formats for the same content</p>",
        "id": 203297759,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1594229638
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> - what's your take on it?</p>",
        "id": 203297852,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1594229676
    },
    {
        "content": "<p>json file is old fashion</p>",
        "id": 203297981,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1594229750
    },
    {
        "content": "<p>in what sense?</p>",
        "id": 203298112,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1594229794
    },
    {
        "content": "<p>I meant it is the old way of doing things, because AFAIK it was deprecated some time ago - several of the attributes are now IG parameters, and the remaining ones are in the ig.ini.</p>",
        "id": 203298531,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1594230029
    },
    {
        "content": "<p>right ... ok ... so what about just having those as parameters to the ig publisher (the path to the IG resource and the template)?</p>",
        "id": 203298628,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1594230093
    },
    {
        "content": "<p>The name of the implementation guide varies.  And depending on publishing framework, the location can vary too.  The ini file provide a standard place for the CI build to look when it invokes the publisher</p>",
        "id": 203298801,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1594230176
    },
    {
        "content": "<p>isnt the name in the IG resource (or shouldn't it be)?</p>",
        "id": 203299377,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1594230430
    },
    {
        "content": "<p>my 2 cents are the following: whateever you can specify in the ig.ini should as well be possible to specify as command line parameter</p>",
        "id": 203299583,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1594230516
    },
    {
        "content": "<p>the name of the file that contains the ig</p>",
        "id": 203299588,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1594230519
    },
    {
        "content": "<p>that should be a configurable parameter provided as command line parameter</p>",
        "id": 203299698,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1594230573
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191427\">Jens Villadsen</span> <a href=\"#narrow/stream/179252-IG-creation/topic/ig.2Eini/near/203299583\">said</a>:</p>\n<blockquote>\n<p>my 2 cents are the following: whateever you can specify in the ig.ini should as well be possible to specify as command line parameter</p>\n</blockquote>\n<p>That might be an option, but for the CI builds, we don't know what the command line parameters are, so the ig.ini provides a spot where the publisher can look and get that info.  it makes it easy for us to set up CI builds for all of the various guides.</p>",
        "id": 203299741,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1594230600
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191427\">Jens Villadsen</span> <a href=\"#narrow/stream/179252-IG-creation/topic/ig.2Eini/near/203299698\">said</a>:</p>\n<blockquote>\n<p>that should be a configurable parameter provided as command line parameter</p>\n</blockquote>\n<p>or as a ini file so that people don't have to remember command line instruction</p>",
        "id": 203299787,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1594230605
    },
    {
        "content": "<p>this way the command line is always the same for a given ig, and we avoid command line parameters</p>",
        "id": 203299964,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1594230722
    },
    {
        "content": "<p>I was thinking this was a \"nice to have\" until I saw the impact it has : I have to run several IGs that I don't know much about, and I really don't want to look at file names, or remember command lines that may be different than the creator intended. I ust run the _genOnce which calls the ini. It saved me (and others) a good amount of time so far.</p>",
        "id": 203300297,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1594230880
    },
    {
        "content": "<p>I see - if I understand you correctly the ig.ini is basically a shorthand notation of the configuration of the CI / jenkins job that runs the CI pipeline</p>",
        "id": 203300545,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1594230998
    },
    {
        "content": "<p>that makes sense - now I'm just puzzled that it apparently hasn't been documented, and yet the pipeline works as intended using .ini files ;)</p>",
        "id": 203300610,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1594231045
    },
    {
        "content": "<p>How does the pipeline work? Maybe <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> can shed light? In the auto-build pipeline I call the Publisher.jar with <code>-ig ig.json</code> (hard-coded into my invocation).</p>",
        "id": 203309190,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1594235376
    },
    {
        "content": "<p>there's special code for this circumstance, since you weren't responding to fix the ci-build when I needed it:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">if</span> <span class=\"p\">(</span><span class=\"o\">!</span><span class=\"n\">f</span><span class=\"p\">.</span><span class=\"na\">exists</span><span class=\"p\">()</span> <span class=\"o\">&amp;&amp;</span> <span class=\"n\">mode</span> <span class=\"o\">==</span> <span class=\"n\">IGBuildMode</span><span class=\"p\">.</span><span class=\"na\">AUTOBUILD</span><span class=\"p\">)</span> <span class=\"p\">{</span>\n      <span class=\"n\">String</span> <span class=\"n\">s</span> <span class=\"o\">=</span> <span class=\"n\">Utilities</span><span class=\"p\">.</span><span class=\"na\">getDirectoryForFile</span><span class=\"p\">(</span><span class=\"n\">ig</span><span class=\"p\">);</span>\n      <span class=\"n\">f</span> <span class=\"o\">=</span> <span class=\"k\">new</span> <span class=\"n\">File</span><span class=\"p\">(</span><span class=\"n\">s</span> <span class=\"o\">==</span> <span class=\"kc\">null</span> <span class=\"o\">?</span> <span class=\"n\">System</span><span class=\"p\">.</span><span class=\"na\">getProperty</span><span class=\"p\">(</span><span class=\"s\">&quot;user.dir&quot;</span><span class=\"p\">)</span> <span class=\"p\">:</span> <span class=\"n\">s</span><span class=\"p\">);</span>\n    <span class=\"p\">}</span>\n</code></pre></div>",
        "id": 203313732,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1594237751
    },
    {
        "content": "<p>ig.ini is supposed to contain precisely 2 values: </p>\n<ul>\n<li>where to find the IG</li>\n<li>which template to use - since this has to be loaded <em>before</em> reading the ig</li>\n</ul>\n<p>And these should not and cannot be parameters on the command line since their value never varies</p>",
        "id": 203313922,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1594237837
    },
    {
        "content": "<p>Lloyd added a few more things but he promised to move them out</p>",
        "id": 203313952,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1594237854
    },
    {
        "content": "<p>OK -- so is it fair to say we should document the .ini file with these two parameters at <a href=\"https://wiki.hl7.org/IG_Publisher_Documentation\">https://wiki.hl7.org/IG_Publisher_Documentation</a>?</p>\n<p>Re: auto-build, it's not clear whether/how I should update the code at this point. It seems like things are \"working as expected\"?</p>",
        "id": 203322050,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1594241835
    },
    {
        "content": "<p>Does the logic you wrote above <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> support finding ig.ini only in the project root, or in other places too?</p>",
        "id": 203322207,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1594241899
    },
    {
        "content": "<p>(I want to document this behavior in the README for the auto-builder.)</p>",
        "id": 203322248,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1594241918
    },
    {
        "content": "<p>the ig.ini must be in the root.</p>",
        "id": 203324493,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1594243016
    },
    {
        "content": "<p>it would be a good idea to update the documentation, sure. Thanks</p>",
        "id": 203324563,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1594243032
    },
    {
        "content": "<p>you don't need to make any fix to the code</p>",
        "id": 203324586,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1594243043
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191315\">Josh Mandel</span> <a href=\"#narrow/stream/179252-IG-creation/topic/ig.2Eini/near/203322050\">said</a>:</p>\n<blockquote>\n<p>OK -- so is it fair to say we should document the .ini file with these two parameters at <a href=\"https://wiki.hl7.org/IG_Publisher_Documentation\">https://wiki.hl7.org/IG_Publisher_Documentation</a>?</p>\n</blockquote>\n<p>I'll try to do it tomorrow - but on the new wiki <a href=\"https://confluence.hl7.org/display/FHIR/IG+Publisher+Documentation\">https://confluence.hl7.org/display/FHIR/IG+Publisher+Documentation</a></p>",
        "id": 203325910,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1594243710
    },
    {
        "content": "<p>Perfect! If content from <a href=\"https://wiki.hl7.org/IG_Publisher_Documentation\">https://wiki.hl7.org/IG_Publisher_Documentation</a> has been fully migrated, I'd suggest deleting the content from that page and just including a link, because it's actually kind of hard to spot the \"see Confluence instead\" sentence at the top, and there's a ton of presumably-no-longer-maintained content below.</p>",
        "id": 203328712,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1594245343
    },
    {
        "content": "<p>that's a much wider issue I've been meaning to get on the <a class=\"stream\" data-stream-id=\"179192\" href=\"/#narrow/stream/179192-fmg\">#fmg</a> agenda. google prefers the wiki over confluence and it's causing us operational issues</p>",
        "id": 203329071,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1594245594
    },
    {
        "content": "<p>I did move them out</p>",
        "id": 203329462,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1594245841
    },
    {
        "content": "<p>I still see content, e.g.</p>\n<p><a href=\"user_uploads/10155/nZCIGOMktfqIBdN-I_aqgh7W/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"user_uploads/10155/nZCIGOMktfqIBdN-I_aqgh7W/image.png\" title=\"image.png\"><img src=\"user_uploads/10155/nZCIGOMktfqIBdN-I_aqgh7W/image.png\"></a></div>",
        "id": 203390439,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1594304102
    },
    {
        "content": "<p>Added this to <a class=\"stream-topic\" data-stream-id=\"179192\" href=\"/#narrow/stream/179192-fmg/topic/Agenda.20item\">#fmg &gt; Agenda item</a> so we keep track.</p>",
        "id": 203390709,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1594304222
    },
    {
        "content": "<p>Should be looking at Confluence, not wiki</p>",
        "id": 203391237,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1594304477
    },
    {
        "content": "<p>I'm looking at the page Google sends me to ;-)</p>",
        "id": 203392532,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1594305061
    },
    {
        "content": "<p><a href=\"https://confluence.hl7.org/pages/viewpage.action?pageId=35718627#IGPublisherDocumentation-IGINIfile\">https://confluence.hl7.org/pages/viewpage.action?pageId=35718627#IGPublisherDocumentation-IGINIfile</a></p>",
        "id": 203393344,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1594305426
    },
    {
        "content": "<p>this better?</p>",
        "id": 203393353,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1594305430
    },
    {
        "content": "<p>Yes, that's great. Does it make sense to also update the examples in <a href=\"https://confluence.hl7.org/pages/viewpage.action?pageId=35718627#IGPublisherDocumentation-Runningincommandlinemode\">https://confluence.hl7.org/pages/viewpage.action?pageId=35718627#IGPublisherDocumentation-Runningincommandlinemode</a> so they use ig.ini instead of ig.json (rather than the deprecated \"control file\" format?</p>",
        "id": 203399131,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1594307922
    },
    {
        "content": "<p>And it'd be ideal to update the section title for <a href=\"https://confluence.hl7.org/pages/viewpage.action?pageId=35718627#IGPublisherDocumentation-Controlfile\">https://confluence.hl7.org/pages/viewpage.action?pageId=35718627#IGPublisherDocumentation-Controlfile</a> to indicate \"(deprecated)\".</p>",
        "id": 203399255,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1594307986
    }
]