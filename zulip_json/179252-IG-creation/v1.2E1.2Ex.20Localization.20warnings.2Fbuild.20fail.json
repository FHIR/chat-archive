[
    {
        "content": "<p>(deleted)</p>",
        "id": 202913617,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1593941458
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 202916834,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1593946807
    },
    {
        "content": "<p>My initial posts were about user errors. I fixed those. Not sure what to do about these:</p>\n<div class=\"codehilite\"><pre><span></span><code>FHIR IG Publisher Version <span class=\"m\">1</span>.1.1 <span class=\"o\">(</span>Git# d3432fbc0971<span class=\"o\">)</span>. Built <span class=\"m\">2020</span>-07-04T00:36:51.739Z <span class=\"o\">(</span><span class=\"m\">34</span> hours old<span class=\"o\">)</span>\n...\nProcessing Conformance Resources                                                 <span class=\"o\">(</span><span class=\"m\">00</span>:22.0470<span class=\"o\">)</span>\nTerminology server: Check <span class=\"k\">for</span> supported code systems <span class=\"k\">for</span> urn:iso:std:iso:3166    <span class=\"o\">(</span><span class=\"m\">00</span>:31.0809<span class=\"o\">)</span>\n?Attempting to localize message sdf-16: All element definitions must have unique ids <span class=\"o\">(</span>snapshot<span class=\"o\">)</span> <span class=\"o\">(</span> <span class=\"o\">(</span>ids: ContactPoint,ContactPoint.id,ContactPoint.extension,ContactPoint.system,ContactPoint.system.id,ContactPoint.system.extension,ContactPoint.system.extension:EmailAddressTypeCodelist,ContactPoint.system.extension:EmailAddressTypeCodelist.id,ContactPoint.system.extension:EmailAddressTypeCodelist.extension,ContactPoint.system.extension:EmailAddressTypeCodelist.url,ContactPoint.system.extension:EmailAddressTypeCodelist.value<span class=\"o\">[</span>x<span class=\"o\">]</span>,ContactPoint.system.extension:EmailAddressTypeCodelist.value<span class=\"o\">[</span>x<span class=\"o\">]</span>:valueCodeableConcept,ContactPoint.system.extension:TelecomTypeCodelist,ContactPoint.system.extension:TelecomTypeCodelist.id,ContactPoint.system.extension:TelecomTypeCodelist.extension,ContactPoint.system.extension:TelecomTypeCodelist.url,ContactPoint.system.extension:TelecomTypeCodelist.value<span class=\"o\">[</span>x<span class=\"o\">]</span>,ContactPoint.system.extension:TelecomTypeCodelist.value<span class=\"o\">[</span>x<span class=\"o\">]</span>:valueCodeableConcept,ContactPoint.system.value,ContactPoint.value,ContactPoint.use,ContactPoint.use.id,ContactPoint.use.extension,ContactPoint.use.extension:EmailAddressTypeCodelist,ContactPoint.use.extension:EmailAddressTypeCodelist.id,ContactPoint.use.extension:EmailAddressTypeCodelist.extension,ContactPoint.use.extension:EmailAddressTypeCodelist.url,ContactPoint.use.extension:EmailAddressTypeCodelist.value<span class=\"o\">[</span>x<span class=\"o\">]</span>,ContactPoint.use.extension:EmailAddressTypeCodelist.value<span class=\"o\">[</span>x<span class=\"o\">]</span>:valueCodeableConcept,ContactPoint.use.extension:EmailAddressTypeCodelist.value<span class=\"o\">[</span>x<span class=\"o\">]</span>:valueCodeableConcept,ContactPoint.use.extension:NumberTypeCodelist,ContactPoint.use.extension:NumberTypeCodelist.id,ContactPoint.use.extension:NumberTypeCodelist.extension,ContactPoint.use.extension:NumberTypeCodelist.url,ContactPoint.use.extension:NumberTypeCodelist.value<span class=\"o\">[</span>x<span class=\"o\">]</span>,ContactPoint.use.extension:NumberTypeCodelist.value<span class=\"o\">[</span>x<span class=\"o\">]</span>:valueCodeableConcept,ContactPoint.use.value,ContactPoint.rank,ContactPoint.period<span class=\"o\">))</span> <span class=\"o\">[</span>snapshot.element.id.trace<span class=\"o\">(</span><span class=\"s1\">&#39;ids&#39;</span><span class=\"o\">)</span>.isDistinct<span class=\"o\">()]</span>, but no such equivalent message exists <span class=\"k\">for</span> the <span class=\"nb\">local</span> en_US\nAttempting to localize message sdf-17: All element definitions must have unique ids <span class=\"o\">(</span>diff<span class=\"o\">)</span> <span class=\"o\">(</span> <span class=\"o\">(</span>ids: ContactPoint,ContactPoint.system,ContactPoint.system.extension,ContactPoint.system.extension:EmailAddressTypeCodelist,ContactPoint.system.extension:EmailAddressTypeCodelist.valueCodeableConcept:valueCodeableConcept,ContactPoint.system.extension:TelecomTypeCodelist,ContactPoint.system.extension:TelecomTypeCodelist.valueCodeableConcept:valueCodeableConcept,ContactPoint.value,ContactPoint.use,ContactPoint.use.extension,ContactPoint.use.extension:EmailAddressTypeCodelist,ContactPoint.use.extension:EmailAddressTypeCodelist.valueCodeableConcept:valueCodeableConcept,ContactPoint.use.extension:EmailAddressTypeCodelist.valueCodeableConcept:valueCodeableConcept,ContactPoint.use.extension:NumberTypeCodelist,ContactPoint.use.extension:NumberTypeCodelist.valueCodeableConcept:valueCodeableConcept<span class=\"o\">))</span> <span class=\"o\">[</span>differential.element.id.trace<span class=\"o\">(</span><span class=\"s1\">&#39;ids&#39;</span><span class=\"o\">)</span>.isDistinct<span class=\"o\">()]</span>, but no such equivalent message exists <span class=\"k\">for</span> the <span class=\"nb\">local</span> en_US\nAttempting to localize message eld-13: Types must be unique by the combination of code and profile <span class=\"o\">[</span>type.select<span class=\"o\">(</span>code <span class=\"p\">&amp;</span> profile <span class=\"p\">&amp;</span> targetProfile<span class=\"o\">)</span>.isDistinct<span class=\"o\">()]</span>, but no such equivalent message exists <span class=\"k\">for</span> the <span class=\"nb\">local</span> en_US\n???????Attempting to localize message sdf-8: In any snapshot, all the elements must be in the specified <span class=\"nb\">type</span> <span class=\"o\">[((</span>%resource.kind <span class=\"o\">=</span> <span class=\"s1\">&#39;logical&#39;</span><span class=\"o\">)</span> or <span class=\"o\">(</span>element.first<span class=\"o\">()</span>.path <span class=\"o\">=</span> %resource.type<span class=\"o\">))</span> and element.tail<span class=\"o\">()</span>.all<span class=\"o\">(</span>path.startsWith<span class=\"o\">(</span>%resource.snapshot.element.first<span class=\"o\">()</span>.path <span class=\"p\">&amp;</span> <span class=\"s1\">&#39;.&#39;</span><span class=\"o\">))]</span>, but no such equivalent message exists <span class=\"k\">for</span> the <span class=\"nb\">local</span> en_US\n?????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????????Attempting to localize message eld-2: Min &lt;<span class=\"o\">=</span> Max <span class=\"o\">[</span>min.empty<span class=\"o\">()</span> or max.empty<span class=\"o\">()</span> or <span class=\"o\">(</span><span class=\"nv\">max</span> <span class=\"o\">=</span> <span class=\"s1\">&#39;*&#39;</span><span class=\"o\">)</span> or <span class=\"o\">(</span>min &lt;<span class=\"o\">=</span> max.toInteger<span class=\"o\">())]</span>, but no such equivalent message exists <span class=\"k\">for</span> the <span class=\"nb\">local</span> en_US\n???????????????????????????????????????????????????????????????Exception in thread <span class=\"s2\">&quot;main&quot;</span> java.lang.Error: Access single value, but value count is <span class=\"m\">0</span>\n    at org.hl7.fhir.r5.renderers.utils.ElementWrappers<span class=\"nv\">$PropertyWrapperMetaElement</span>.value<span class=\"o\">(</span>ElementWrappers.java:303<span class=\"o\">)</span>\n    at org.hl7.fhir.r5.renderers.DiagnosticReportRenderer.render<span class=\"o\">(</span>DiagnosticReportRenderer.java:67<span class=\"o\">)</span>\n    at org.hl7.fhir.r5.renderers.ResourceRenderer.render<span class=\"o\">(</span>ResourceRenderer.java:76<span class=\"o\">)</span>\n    at org.hl7.fhir.igtools.publisher.Publisher.generateNarratives<span class=\"o\">(</span>Publisher.java:1068<span class=\"o\">)</span>\n    at org.hl7.fhir.igtools.publisher.Publisher.loadConformance<span class=\"o\">(</span>Publisher.java:3659<span class=\"o\">)</span>\n    at org.hl7.fhir.igtools.publisher.Publisher.createIg<span class=\"o\">(</span>Publisher.java:846<span class=\"o\">)</span>\n    at org.hl7.fhir.igtools.publisher.Publisher.execute<span class=\"o\">(</span>Publisher.java:708<span class=\"o\">)</span>\n    at org.hl7.fhir.igtools.publisher.Publisher.main<span class=\"o\">(</span>Publisher.java:7809<span class=\"o\">)</span>\n</code></pre></div>\n\n\n<p>Thoughts? Reproduction possible using source here: <a href=\"https://github.com/Nictiz/Nictiz-FHIR-IG\">https://github.com/Nictiz/Nictiz-FHIR-IG</a></p>",
        "id": 202918283,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1593949417
    },
    {
        "content": "<p>Note: this must be about something in my input as the vanilla sample-ig this was based on ran without this failure, but without more clues than what was presented it is almost impossible to debug</p>",
        "id": 202918361,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1593949526
    },
    {
        "content": "<p>your zib-OutcomeOfCare2 has no subject. is that intended?</p>",
        "id": 202919566,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1593951693
    },
    {
        "content": "<p>if you \"fix\" that, it seems to build OK (just as a workaround)</p>",
        "id": 202919865,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1593952281
    },
    {
        "content": "<p>What is causing it seems to be the publisher: I think this is the error line that gives the code - perhaps there should be an if statement, since subject is not mandatory: <br>\n<a href=\"https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.r5/src/main/java/org/hl7/fhir/r5/renderers/DiagnosticReportRenderer.java#L67\">https://github.com/hapifhir/org.hl7.fhir.core/blob/master/org.hl7.fhir.r5/src/main/java/org/hl7/fhir/r5/renderers/DiagnosticReportRenderer.java#L67</a></p>",
        "id": 202921396,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1593955190
    },
    {
        "content": "<p>... the example zib-OutcomeOfCare-02.xml ... indeed. Still produces a lot of question marks and things about <code>Attempting to localize message</code>, but yes at least it finishes now.</p>",
        "id": 202922830,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1593957579
    },
    {
        "content": "<p><a href=\"https://github.com/Nictiz/Nictiz-FHIR-IG/blob/master/input/examples/zib-OutcomeOfCare-02.xml\">https://github.com/Nictiz/Nictiz-FHIR-IG/blob/master/input/examples/zib-OutcomeOfCare-02.xml</a></p>",
        "id": 202923092,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1593957986
    },
    {
        "content": "<p>Subject is required in the profile, but that should not be a reason for the validator to quit. It should be a reason to add that notion to QA.html</p>",
        "id": 202923167,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1593958098
    },
    {
        "content": "<p>yes, I think it's the renderer that is \"making it mandatory\" by reading it and crashing if it is not found, so I guess we'll have to see with Grahame if that line of code should have a if statement</p>",
        "id": 202923383,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1593958500
    },
    {
        "content": "<p>the \"?\" is a debugging thing for me I missed when committing. sorry.</p>",
        "id": 202935485,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1593978681
    },
    {
        "content": "<p>I'll fix DiagnosticReport rendering</p>",
        "id": 202935493,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1593978706
    },
    {
        "content": "<p>the \"Attempting to localize message\" error is for me or Mark - nothing anyone else can do about these ones</p>",
        "id": 202935631,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1593978928
    },
    {
        "content": "<p>Nice. Does that also mean I should be on the lookout for actual localization to Dutch for those messages?</p>",
        "id": 202949499,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1594003841
    },
    {
        "content": "<p>well, we've been working on localising the messages produced by the validator, but that hasn't extended to localising the messages produced by the invariants from profiles, and all of these messages you're referring to come from there</p>",
        "id": 202949563,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1594003959
    },
    {
        "content": "<p>This morning I got a new run failure based on the same input source:</p>\n<div class=\"codehilite\"><pre><span></span><code>Stack Dump (for debugging):                                                      (01:40.0031)\njava.lang.IllegalStateException: Not a JSON Object: null\n    at com.google.gson.JsonElement.getAsJsonObject(JsonElement.java:91)\n    at org.hl7.fhir.dstu3.formats.JsonParser.parseProvenanceProperties(JsonParser.java:15193)\n    at org.hl7.fhir.dstu3.formats.JsonParser.parseProvenance(JsonParser.java:15155)\n    at org.hl7.fhir.dstu3.formats.JsonParser.parseResource(JsonParser.java:19713)\n    at org.hl7.fhir.dstu3.formats.JsonParserBase.parse(JsonParserBase.java:122)\n    at org.hl7.fhir.igtools.publisher.Publisher.convertFromElement(Publisher.java:4930)\n    at org.hl7.fhir.igtools.publisher.Publisher.processProvenance(Publisher.java:928)\n    at org.hl7.fhir.igtools.publisher.Publisher.processProvenanceEntries(Publisher.java:902)\n    at org.hl7.fhir.igtools.publisher.Publisher.processProvenanceDetails(Publisher.java:888)\n    at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:857)\n    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:708)\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:7809)\n</code></pre></div>",
        "id": 202958345,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1594018803
    },
    {
        "content": "<p>Given that, afaik, this is running the same source: is this a server thing?</p>",
        "id": 202958381,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1594018832
    },
    {
        "content": "<p>not sure it's related but since yesterday there has been a change in the template, i noticed you have a file that you should remove in your input/history</p>",
        "id": 202958700,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1594019223
    },
    {
        "content": "<p>the h1.json points to the sample IG file myObservation, which you don't have. Try removing that and see if it fixes the issue</p>",
        "id": 202958800,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1594019340
    },
    {
        "content": "<p>It does. I really need to learn how to trouble shoot faster. Thanks!</p>",
        "id": 202960692,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1594021166
    },
    {
        "content": "<p>already found the Provenance one and it'll be fixed next release</p>",
        "id": 202960961,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1594021388
    }
]