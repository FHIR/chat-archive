[
    {
        "content": "<p>It's run out of disk space again. <span aria-label=\"frown\" class=\"emoji emoji-1f641\" role=\"img\" title=\"frown\">:frown:</span>. I'm reorganizing so it won't happen again - will be down for an hour or more</p>",
        "id": 210985315,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1600857791
    },
    {
        "content": "<p>I should be asleep. <span aria-label=\"tears\" class=\"emoji emoji-1f602\" role=\"img\" title=\"tears\">:tears:</span></p>",
        "id": 210985330,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1600857808
    },
    {
        "content": "<p>thanks Grahame</p>",
        "id": 210993406,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1600863668
    },
    {
        "content": "<p>I am taking <a href=\"http://tx.fhir.org\">tx.fhir.org</a> down for an upgrade</p>",
        "id": 213872432,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1603165092
    },
    {
        "content": "<p>ok, it's back. The new terminology server is a fairly large rewrite - shouldn't behave any different but totally different internally. I expect it to be more stable, though I haven't yet moved it to linux (which should help)</p>",
        "id": 213880819,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1603177069
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> I'm getting a 500 error:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ curl -vv tx.fhir.org\n*   Trying 104.196.166.17...\n* TCP_NODELAY set\n* Connected to tx.fhir.org (104.196.166.17) port 80 (#0)\n&gt; GET / HTTP/1.1\n&gt; Host: tx.fhir.org\n&gt; User-Agent: curl/7.64.1\n&gt; Accept: */*\n&gt;\n&lt; HTTP/1.1 500 Internal Server Error\n&lt; Connection: keep-alive\n&lt; Content-Type: text/html; charset=ISO-8859-1\n&lt; Content-Length: 28\n&lt; Date: Tue, 20 Oct 2020 09:55:39 GMT\n&lt; X-Request-Id: 369-8685\n&lt; Server: Health Intersections FHIR Server\n&lt;\n* Connection #0 to host tx.fhir.org left intact\nUnable to find homepage.html* Closing connection 0\n</code></pre></div>",
        "id": 213896715,
        "sender_full_name": "Max Masnick",
        "timestamp": 1603187792
    },
    {
        "content": "<p>It looks like it might just be a configuration issue with the index page, which makes <code>_genonce.sh</code> think the server is down. If I circumvent the connection check (by commenting out <code>curl -sSf tx.fhir.org &gt; /dev/null</code>), everything works.</p>\n<p>(Though there were a bunch of changes to the <code>txcache/*</code> files since I last ran a build ~10 hours ago...only mentioning in case this is unexpected with the rewrite.)</p>",
        "id": 213899313,
        "sender_full_name": "Max Masnick",
        "timestamp": 1603189396
    },
    {
        "content": "<p>oh hmm</p>",
        "id": 213903000,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1603192102
    },
    {
        "content": "<p>I'll look at the home page - didn't realise that was necessary</p>",
        "id": 213903029,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1603192130
    },
    {
        "content": "<p>For the check on the _genonce scripts - is there another way to check if the server is online?</p>",
        "id": 213903149,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1603192222
    },
    {
        "content": "<p>no I'll restore the home page</p>",
        "id": 213903162,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1603192234
    },
    {
        "content": "<p>ok</p>",
        "id": 213903176,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1603192246
    },
    {
        "content": "<p>should be good now</p>",
        "id": 213903966,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1603192812
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> hmm, I'm now getting an error when I try to build the mCODE IG. This was working fine 30 minutes ago and I don't have any local changes...maybe something with the change you just made?</p>\n<div class=\"codehilite\"><pre><span></span><code>Generating Snapshots                                                             (00:21.0358)\nGenerating Narratives                                                            (00:26.0776)\nPublishing Content Failed: null                                                  (00:35.0386)\n                                                                                 (00:35.0387)\nUse -? to get command line help                                                  (00:35.0387)\n                                                                                 (00:35.0387)\nStack Dump (for debugging):                                                      (00:35.0387)\njava.lang.NullPointerException\n    at org.hl7.fhir.r5.context.BaseWorkerContext.validateCodeBatch(BaseWorkerContext.java:808)\n    at org.hl7.fhir.r5.renderers.ValueSetRenderer.getConceptsForCodes(ValueSetRenderer.java:1001)\n    at org.hl7.fhir.r5.renderers.ValueSetRenderer.genInclude(ValueSetRenderer.java:825)\n    at org.hl7.fhir.r5.renderers.ValueSetRenderer.generateComposition(ValueSetRenderer.java:748)\n    at org.hl7.fhir.r5.renderers.ValueSetRenderer.render(ValueSetRenderer.java:84)\n    at org.hl7.fhir.r5.renderers.ValueSetRenderer.render(ValueSetRenderer.java:73)\n    at org.hl7.fhir.r5.renderers.ResourceRenderer.render(ResourceRenderer.java:74)\n    at org.hl7.fhir.igtools.publisher.Publisher.generateNarratives(Publisher.java:1128)\n    at org.hl7.fhir.igtools.publisher.Publisher.loadConformance(Publisher.java:3782)\n    at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:870)\n    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:725)\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:8342)\n</code></pre></div>",
        "id": 213906926,
        "sender_full_name": "Max Masnick",
        "timestamp": 1603194769
    },
    {
        "content": "<p>If you need to repro locally, <code>git clone git@github.com:HL7/fhir-mCODE-ig.git</code> and run <code>_genonce</code> on <code>master</code></p>",
        "id": 213907146,
        "sender_full_name": "Max Masnick",
        "timestamp": 1603194880
    },
    {
        "content": "<p>you know, I thought I had tested my new <a href=\"http://tx.fhir.org\">tx.fhir.org</a> server up hill and down dale, but it turns out that the deployed config is ever so slightly different to my testing config, and bingo, you get a NPE</p>",
        "id": 213923498,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1603202662
    },
    {
        "content": "<p>interesting. starting from an empty cache, the mCode Ig makes 724 calls to <a href=\"http://tx.fhir.org\">tx.fhir.org</a></p>",
        "id": 213926541,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1603203897
    },
    {
        "content": "<p>ok should be good now</p>",
        "id": 213930338,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1603205429
    },
    {
        "content": "<p>At Nictiz, we encountered the same problem. Just did a new run and the problem is solved indeed. Thanks <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>!</p>",
        "id": 213936697,
        "sender_full_name": "Niek van Galen",
        "timestamp": 1603208027
    },
    {
        "content": "<p>Thank you Grahame!</p>",
        "id": 213944875,
        "sender_full_name": "Max Masnick",
        "timestamp": 1603211621
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> with the mCODE IG, I'm seeing a lot more churn than previously in the <code>txcache</code>, accompanied by very long build times (<strong>&gt;20 min</strong>).</p>\n<p>Previously I would get long build times periodically (e.g., if I hadn't run the publisher for a week) but not this long. Since this morning I've had slow \"stale cache\" builds  more than once, and they seem slower than \"stale cache\" builds used to be.</p>\n<p>Is there anything we can do to improve performance when running the publisher? With a hot cache we typically see build times around 3-5 minutes. In case it matters I've got plenty of bandwidth (&gt;200Mbps down) and ample system resources (modern Mac).</p>",
        "id": 213980391,
        "sender_full_name": "Max Masnick",
        "timestamp": 1603228470
    },
    {
        "content": "<p>Here's some of the timing data from the publisher output:</p>\n<div class=\"codehilite\"><pre><span></span><code>empty txcache folder on master (16af2c3b00)\n            Times: loading: 00:01.0446, generate: 23:15.0327, narrative generation: 00:40.0604, realm-rules: 01:25.0364, previous-version: 11:58.0527, jekyll: 00:09.0136, validation: 01:02.0374 (#192), template: 00:01.0821 (#3) (23:38.0398)\n\nre-run with warm cache on master (16af2c3b00)\n            Times: loading: 00:01.0568, generate: 02:42.0468, narrative generation: 00:30.0735, realm-rules: 00:01.0929, previous-version: 00:04.0340, jekyll: 00:07.0380, validation: 00:26.0246 (#192), template: 00:04.0029 (#3) (03:07.0146)\n</code></pre></div>",
        "id": 213980498,
        "sender_full_name": "Max Masnick",
        "timestamp": 1603228548
    },
    {
        "content": "<p>that's pretty much what I'd expect?</p>",
        "id": 213982343,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1603229746
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> will <code>-tx n/a</code> still avoid the \"stale cache\" builds? That's the main issue for me -- waiting 20 min for the IG to build is problematic when troubleshooting or iterating. It's fine if it happens once a week, but multiple times a day is less fun :)</p>",
        "id": 213989791,
        "sender_full_name": "Max Masnick",
        "timestamp": 1603234761
    },
    {
        "content": "<p>-tx n/a doesn't apply to the IG publisher</p>",
        "id": 213989808,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1603234786
    },
    {
        "content": "<p>I guess this is a feature request then to have a way to trust the local cache when being totally up to date isn't important</p>",
        "id": 213989908,
        "sender_full_name": "Max Masnick",
        "timestamp": 1603234821
    },
    {
        "content": "<p>why are you having 'stale cache' builds? It's because you're not following recommended practice, and committing the txCache</p>",
        "id": 213989916,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1603234833
    },
    {
        "content": "<p>there's no flag to not trust the local cache</p>",
        "id": 213989938,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1603234850
    },
    {
        "content": "<p>I have no idea why I'm getting the stale cache builds. We are committing <code>txcache</code> to the git repo</p>",
        "id": 213990001,
        "sender_full_name": "Max Masnick",
        "timestamp": 1603234914
    },
    {
        "content": "<p>it was empty when I synced it</p>",
        "id": 213990067,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1603234950
    },
    {
        "content": "<p>There's a bunch of files in it: <a href=\"https://github.com/HL7/fhir-mCODE-ig/tree/master/input-cache/txcache\">https://github.com/HL7/fhir-mCODE-ig/tree/master/input-cache/txcache</a></p>",
        "id": 213990203,
        "sender_full_name": "Max Masnick",
        "timestamp": 1603235053
    },
    {
        "content": "<p>apparently I'm wrong.</p>",
        "id": 213990226,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1603235070
    },
    {
        "content": "<p>So I <a href=\"https://github.com/HL7/fhir-mCODE-ig/commit/578a37902c93cabb036d6f78437bccd45f433449\">committed</a> a big update to the txcache folder this morning (12 hours ago). If it's helpful, here are the changes to the txcache folder on my system _since_ then (i.e., during the last 12 hours): <a href=\"/user_uploads/10155/WbDCp3UEa_3btyUWVw3yiVwR/txcache_changes.txt\">txcache_changes.txt</a></p>",
        "id": 213990879,
        "sender_full_name": "Max Masnick",
        "timestamp": 1603235668
    },
    {
        "content": "<p>ah. so. The cache gets wiped when the publisher sees that <a href=\"http://tx.fhir.org\">tx.fhir.org</a> has been upgraded. Since I've been doing upgrades today, you'll get the cache being wiped out until you commit after rebuilding it</p>",
        "id": 213991064,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1603235853
    },
    {
        "content": "<p>Ahh ok, thanks</p>",
        "id": 213992692,
        "sender_full_name": "Max Masnick",
        "timestamp": 1603237277
    },
    {
        "content": "<p>one more coming - just found a bug</p>",
        "id": 213993390,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1603237921
    },
    {
        "content": "<p>It's down - I'm reconfiguring it to get more space. and hopefully more reliability</p>",
        "id": 258632648,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1634858307
    },
    {
        "content": "<p>back up and stable</p>",
        "id": 258635655,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1634860208
    },
    {
        "content": "<p>it's going down again for some more work</p>",
        "id": 258907553,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635123498
    },
    {
        "content": "<p>normal service is restored</p>",
        "id": 258914306,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635134049
    },
    {
        "content": "<p>Is it really working? I got these errors just now:<br>\nPrevious POST attempt returned HTTP&lt;422&gt; from url -&gt; <a href=\"http://tx.fhir.org/r4/CodeSystem/$validate-code\">http://tx.fhir.org/r4/CodeSystem/$validate-code</a>?.<br>\nPrevious POST attempt returned HTTP&lt;413&gt; from url -&gt; <a href=\"http://tx.fhir.org/r4/\">http://tx.fhir.org/r4/</a>.</p>",
        "id": 258921027,
        "sender_full_name": "Diana_Ovelgoenne",
        "timestamp": 1635143551
    },
    {
        "content": "<p>those are not errors</p>",
        "id": 258921192,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635143763
    },
    {
        "content": "<p>status notes to alert the maintainers to something that has to be cleaned up</p>",
        "id": 258921222,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635143781
    },
    {
        "content": "<p>After those there was a stack dump, and IG Publisher couldn't complete</p>",
        "id": 258921445,
        "sender_full_name": "Diana_Ovelgoenne",
        "timestamp": 1635144029
    },
    {
        "content": "<p>oh? well, what was that?</p>",
        "id": 258921450,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635144039
    },
    {
        "content": "<p>Previous POST attempt returned HTTP&lt;413&gt; from url -&gt; <a href=\"http://tx.fhir.org/r4/\">http://tx.fhir.org/r4/</a>.<br>\nPublishing Content Failed: null                                                  (03:18.0439)<br>\n                                                                                 (03:18.0441)<br>\nUse -? to get command line help                                                  (03:18.0442)<br>\n                                                                                 (03:18.0444)<br>\nStack Dump (for debugging):                                                      (03:18.0445)<br>\njava.lang.NullPointerException<br>\n        at org.hl7.fhir.r5.context.BaseWorkerContext.validateCodeBatch(BaseWorkerContext.java:832)<br>\n        at org.hl7.fhir.r5.renderers.ValueSetRenderer.getConceptsForCodes(ValueSetRenderer.java:1009)<br>\n        at org.hl7.fhir.r5.renderers.ValueSetRenderer.genInclude(ValueSetRenderer.java:825)<br>\n        at org.hl7.fhir.r5.renderers.ValueSetRenderer.generateComposition(ValueSetRenderer.java:748)<br>\n        at org.hl7.fhir.r5.renderers.ValueSetRenderer.render(ValueSetRenderer.java:84)<br>\n        at org.hl7.fhir.r5.renderers.ValueSetRenderer.render(ValueSetRenderer.java:73)<br>\n        at org.hl7.fhir.r5.renderers.ResourceRenderer.render(ResourceRenderer.java:74)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.generateNarratives(Publisher.java:1159)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.loadConformance(Publisher.java:3912)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:893)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:748)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:8566)</p>",
        "id": 258921463,
        "sender_full_name": "Diana_Ovelgoenne",
        "timestamp": 1635144058
    },
    {
        "content": "<p>what version is this?</p>",
        "id": 258921762,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635144388
    },
    {
        "content": "<p>I just updated the publisher to  1.1.83 and still having the same results, the 422 Errors are gone though</p>",
        "id": 258922163,
        "sender_full_name": "Diana_Ovelgoenne",
        "timestamp": 1635144870
    },
    {
        "content": "<p>what line does it report for the error?</p>",
        "id": 258922302,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635145031
    },
    {
        "content": "<p>It is on Generating Narratives                                                            (02:02.0486)<br>\nBut I tried with another project, and that one compiles fine, so I will dig in my pages, probably there is where the problem is laying, weird thing is that a couple of weeks ago it was working and I just changes a diagram this morning :S <br>\nThanks for your help though</p>",
        "id": 258922964,
        "sender_full_name": "Diana_Ovelgoenne",
        "timestamp": 1635145586
    },
    {
        "content": "<p>So i tried with another project and same problem<br>\nGenerating Narratives                                                            (02:32.0386)<br>\nPrevious POST attempt returned HTTP&lt;413&gt; from url -&gt; <a href=\"http://tx.fhir.org/r4/\">http://tx.fhir.org/r4/</a>.<br>\nPublishing Content Failed: null<br>\nIs it something to do with big IGs?</p>",
        "id": 258923452,
        "sender_full_name": "Diana_Ovelgoenne",
        "timestamp": 1635146021
    },
    {
        "content": "<p>no. tell me which line....</p>",
        "id": 258936645,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635155062
    },
    {
        "content": "<p>I am using the _genonce. bat to call the publisher, sorry for the stupid question, how do I get the line number it crashes so I give it to you?  I tired the logging options, but the temp file isn't getting generated, and when trying to use the GUI of the Publisher, the button for Get Summary just fades away while executing the ini file.</p>",
        "id": 258941723,
        "sender_full_name": "Diana_Ovelgoenne",
        "timestamp": 1635158550
    },
    {
        "content": "<p>I tried now to use the ontoserver and my IG Publisher went through the Narratives (where it gets dumped with <a href=\"http://tx.fhir.org\">tx.fhir.org</a></p>",
        "id": 258957723,
        "sender_full_name": "Diana_Ovelgoenne",
        "timestamp": 1635168105
    },
    {
        "content": "<p>the line number is in the stack dump - I want the stack dump</p>",
        "id": 259000917,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635186640
    },
    {
        "content": "<p>I'm about to take it down for an upgrade for a few minutes</p>",
        "id": 259141554,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635273437
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> - technically this should probably go out on <a class=\"stream\" data-stream-id=\"179294\" href=\"/#narrow/stream/179294-committers.2Fannounce\">#committers/announce</a></p>",
        "id": 259147448,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1635275962
    },
    {
        "content": "<p>probably but this is where everyone complains.</p>",
        "id": 259149162,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635276793
    },
    {
        "content": "<p>If you post there, and they complain here, then we know whose committer access to revoke because they're not actively monitoring <a class=\"stream\" data-stream-id=\"179294\" href=\"/#narrow/stream/179294-committers.2Fannounce\">#committers/announce</a> ... <span aria-label=\"wink\" class=\"emoji emoji-1f609\" role=\"img\" title=\"wink\">:wink:</span></p>",
        "id": 259150530,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1635277430
    }
]