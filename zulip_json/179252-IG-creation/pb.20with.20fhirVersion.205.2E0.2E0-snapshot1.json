[
    {
        "content": "<p>I have a lot of errors and broken links when building the fhir-order-catalog IG in Continuous Integration, based on FHIR 5.0.0-snapshot1. It seems that the errors are triggered by this first one:<br>\nImplementationGuide.fhirVersion[0] : error : The value provided ('5.0.0-snapshot1') is not in the value set 'FHIRVersion' (<a href=\"http://hl7.org/fhir/ValueSet/FHIR-version|4.6.0\">http://hl7.org/fhir/ValueSet/FHIR-version|4.6.0</a>), and a code is required from this value set)<br>\nIs there a discrepancy of files somewhere?</p>",
        "id": 269750062,
        "sender_full_name": "François Macary",
        "timestamp": 1643382543
    },
    {
        "content": "<p>Yes.  There's a difference in capitalization between what's required at different layers in the code.</p>",
        "id": 269750584,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1643382730
    },
    {
        "content": "<p>You mean the code needs corrections. Is it the code of the IG publisher or something wrong with files of the IG itself?</p>",
        "id": 269751581,
        "sender_full_name": "François Macary",
        "timestamp": 1643383081
    },
    {
        "content": "<p>I don't know what the 'right' answer is :)</p>",
        "id": 269754989,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1643384388
    },
    {
        "content": "<p>what's this about case?</p>",
        "id": 269781402,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643394867
    },
    {
        "content": "<p>The code expects the suffixes on versions to be lowercase, but the enumeration expects them to be upper-case</p>",
        "id": 269784894,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1643396247
    },
    {
        "content": "<blockquote>\n<p>but the enumeration expects them to be upper-case</p>\n</blockquote>\n<p>where?</p>",
        "id": 269785588,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643396498
    },
    {
        "content": "<p>Schema?  Not sure</p>",
        "id": 269785928,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1643396624
    },
    {
        "content": "<p>well, I can't find that.</p>",
        "id": 269786151,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643396697
    },
    {
        "content": "<p>and I can't reproduce the problem either</p>",
        "id": 269798304,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643401941
    },
    {
        "content": "<p>I ran into an issue where my Eclipse kindling build choked because the version it received was upper-case and the version it wanted was lower-case.  I guessed that was the same thing happening here, though it might not be.</p>",
        "id": 269802473,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1643404051
    },
    {
        "content": "<p>shouldn't happen at all, but it's certainly not what's happening here</p>",
        "id": 269812317,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643409036
    },
    {
        "content": "<p>Then do you have a clue of what is happening? The QA is available on the continuous integration:<br>\n<a href=\"https://build.fhir.org/ig/HL7/fhir-order-catalog/branches/master/qa.html\">https://build.fhir.org/ig/HL7/fhir-order-catalog/branches/master/qa.html</a></p>",
        "id": 270192330,
        "sender_full_name": "François Macary",
        "timestamp": 1643714844
    },
    {
        "content": "<p>I still can't reproduce that...</p>",
        "id": 270633312,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643930025
    },
    {
        "content": "<p>and I don't have any ideas. what version are you using?</p>",
        "id": 270633323,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643930035
    },
    {
        "content": "<p>Thank you <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> . <span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> and I have migrated the IG from 4.0.1 to 5.0.0-snapshot1. It is one of the couple IGs using this version in the CI, and it's there on Github: <a href=\"https://github.com/HL7/fhir-order-catalog/tree/master\">https://github.com/HL7/fhir-order-catalog/tree/master</a><br>\nWhat I don't understand is why our QA shows Build errors complaining about 4.6.0 and 4.0.1, which we are not using at all.</p>",
        "id": 270690080,
        "sender_full_name": "François Macary",
        "timestamp": 1643967910
    },
    {
        "content": "<p>well, it shouldn't. what version of the IG publisher are you using?</p>",
        "id": 270758496,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1644001346
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> <br>\nIt is the continuous integration, which produces this QA. Therefore the up to date version of the publisher, I imagine.<br>\nJust rebuilt today. The QA displays: <strong>IG Publisher Version: v1.1.99</strong>. <br>\nBut still the same 83 build errors. Same kind as the one below:<br>\nMessageDefinition.status    error   The reference <a href=\"http://hl7.org/fhir/ValueSet/publication-status|4.0.1\">http://hl7.org/fhir/ValueSet/publication-status|4.0.1</a> could not be resolved</p>\n<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> , I checked again ig.ini, package-list.json and input/ig-order-catalog.xml and I don't see any discrepancy. Could you do one more check on your side, please?</p>",
        "id": 271241229,
        "sender_full_name": "François Macary",
        "timestamp": 1644393294
    },
    {
        "content": "<p>Yes, I'll take another look at that, <span class=\"user-mention\" data-user-id=\"192504\">@François Macary</span>, and will see if I'm seeing the same thing ('llI try to do that today after the IPS call).</p>",
        "id": 271258188,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1644403452
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span>  did you have a chance to check?  Could this strange mixing of FHIR versions searched by the publisher caused by some cache of packages somewhere? Given this IG started on 4.0.1, and then moved (unduly) to 4.6.0, and last to 5.0.0-snapshot1.</p>",
        "id": 271400637,
        "sender_full_name": "François Macary",
        "timestamp": 1644482265
    },
    {
        "content": "<p>I haven't yet, <span class=\"user-mention\" data-user-id=\"192504\">@François Macary</span>.  If you haven't already, I agree that I would make sure that <strong>everything</strong> is deleted in your local cache - to be sure that this isn't coming from there.  I will try to find a moment to look at it today.  I guess we don't have a Catalog call tomorrow, but I'll follow up if there's anything that I can find.</p>",
        "id": 271457925,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1644511244
    },
    {
        "content": "<p>I have done that on my local repository: Removal of all the cache of packages. Sadly this did not bring any change to the errors on my local build. I have exactly the same QA as on the Continuous Integration.</p>",
        "id": 271459520,
        "sender_full_name": "François Macary",
        "timestamp": 1644511874
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> anything detected on your side?</p>",
        "id": 272119196,
        "sender_full_name": "François Macary",
        "timestamp": 1645020130
    },
    {
        "content": "<p>I'm taking a look at the errors - most of them seem to be on a few of the extensions and CodeableReference.  I don't have any key insights or solutions at the moment, but I'll see if I can dig in any further.</p>",
        "id": 272139898,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1645029076
    },
    {
        "content": "<p>the errors are in R5 core package</p>",
        "id": 272140401,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1645029256
    },
    {
        "content": "<p>Do we have a solution or workaround?</p>",
        "id": 272140886,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1645029453
    },
    {
        "content": "<p>not at the moment.</p>",
        "id": 272141223,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1645029597
    },
    {
        "content": "<p>Will there be one before May? In other words, is a ballot of the IG in May still a reacheable goal?</p>",
        "id": 272235428,
        "sender_full_name": "François Macary",
        "timestamp": 1645091202
    },
    {
        "content": "<p>yes</p>",
        "id": 272244824,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1645096646
    },
    {
        "content": "<p>We also see a ton of errors on our IG at <a href=\"https://build.fhir.org/ig/hl7-eu/gravitate-health/qa.html\">https://build.fhir.org/ig/hl7-eu/gravitate-health/qa.html</a> - while some of them definitely are related to our own profiling and samples, I think that some of them are also related to internal stuff in the 5.0.0-snapshot1</p>",
        "id": 275631386,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1647512649
    },
    {
        "content": "<p>fix due out for that in the next 42 hours</p>",
        "id": 275645737,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1647521006
    },
    {
        "content": "<p>24 hours</p>",
        "id": 275645741,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1647521009
    },
    {
        "content": "<p>Yes, I see that gravitate-health IG and order-catalog IG have the same kind of QA, with, in addition to the errors already mentioned in this topic, hundreds of thousands of broken links.</p>",
        "id": 275712220,
        "sender_full_name": "François Macary",
        "timestamp": 1647544696
    },
    {
        "content": "<p>Love version 1.113! Thank you <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> <br>\nLots of issues fixed.</p>",
        "id": 275822345,
        "sender_full_name": "François Macary",
        "timestamp": 1647619086
    }
]