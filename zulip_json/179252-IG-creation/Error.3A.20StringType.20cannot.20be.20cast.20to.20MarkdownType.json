[
    {
        "content": "<p>IGPublisher 1.0.63 gives me </p>\n<blockquote>\n<p>Publishing Content Failed: org.hl7.fhir.r5.model.StringType cannot be cast to org.hl7.fhir.r5.model.MarkdownType</p>\n</blockquote>\n<p>But 1.0.62 is fine.<br>\nWhere do I look for the problem?</p>",
        "id": 188075496,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1581565325
    },
    {
        "content": "<p>you tell me where to look</p>",
        "id": 188080025,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1581572593
    },
    {
        "content": "<p>where is this is in the log?</p>",
        "id": 188080030,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1581572606
    },
    {
        "content": "<p>$ pubN ig-dphr.json<br>\nFHIR IG Publisher Version 1.0.63-SNAPSHOT (Git# 9498468512c7). Built 2020-02-13T12:58:23.27+11:00 (78 mins old)<br>\nDetected Java version: 1.8.0_181 from C:\\Program Files\\Java\\jre1.8.0_181 on amd64 (64bit). 3625MB available<br>\nParameters: -ig ig-dphr.json<br>\ndir = C:\\work\\git\\au-fhir-childhealth, path = C:\\Users\\richardtownleyoneill\\bin;C:\\Program Files\\Git\\mingw64\\bin;C:\\Program Files\\Git\\usr\\local\\bin;C:\\Program Files\\Git\\usr\\bin;C:\\Program Files\\Git\\usr\\bin;C:\\Program Files\\Git\\mingw64\\bin;C:\\Program Files\\Git\\usr\\bin;C:\\Users\\richardtownleyoneill\\bin;C:\\Python27;C:\\Python27\\Scripts;C:\\Ruby25-x64\\bin;C:\\ProgramData\\Oracle\\Java\\javapath;C:\\WINDOWS\\system32;C:\\WINDOWS;C:\\WINDOWS\\System32\\Wbem;C:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0;C:\\Program Files\\Calibre2;C:\\Program Files\\Git\\cmd;C:\\Program Files\\TortoiseGit\\bin;C:\\Users\\richardtownleyoneill\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Program Files\\Git\\usr\\bin\\vendor_perl;C:\\Program Files\\Git\\usr\\bin\\core_perl<br>\nRun time = Thursday, 13 February 2020 1:17:21 PM AEST (2020-02-13T13:17:21+10:00)<br>\nPackage Cache: C:\\Users\\richardtownleyoneill\\.fhir\\packages                      (00:00.0237)<br>\nLoad Configuration from C:\\work\\git\\au-fhir-childhealth\\ig-dphr.json             (00:00.0250)<br>\nContacting Build Server...                                                       (00:00.0271)<br>\n ... done                                                                        (00:16.0987)<br>\nRoot directory: C:\\work\\git\\au-fhir-childhealth                                  (00:16.0988)<br>\nTerminology Cache is at C:\\work\\git\\au-fhir-childhealth\\txCache. 4 files in cache (00:26.0311)<br>\nCore Package hl7.fhir.r3.core#3.0.2<br>\nInstalling hl7.fhir.r3.core#3.0.2 to the package cache<br>\n  Fetching:.......................................................................................<br>\n  Installing: ....................................................................................... done.<br>\nPublishing Content Failed: org.hl7.fhir.r5.model.StringType cannot be cast to org.hl7.fhir.r5.model.MarkdownType (00:47.0851)<br>\n                                                                                 (00:47.0851)<br>\nUse -? to get command line help                                                  (00:47.0851)<br>\n                                                                                 (00:47.0851)<br>\nStack Dump (for debugging):                                                      (00:47.0851)<br>\njava.lang.ClassCastException: org.hl7.fhir.r5.model.StringType cannot be cast to org.hl7.fhir.r5.model.MarkdownType<br>\n        at org.hl7.fhir.convertors.conv30_50.OperationDefinition30_50.convertOperationDefinition(OperationDefinition30_50.java:52)<br>\n        at org.hl7.fhir.convertors.VersionConvertor_30_50.convertResource(VersionConvertor_30_50.java:4653)<br>\n        at org.hl7.fhir.convertors.R3ToR5Loader.loadBundle(R3ToR5Loader.java:65)<br>\n        at org.hl7.fhir.r5.context.SimpleWorkerContext.loadFromFileJson(SimpleWorkerContext.java:295)<br>\n        at org.hl7.fhir.r5.context.SimpleWorkerContext.loadDefinitionItem(SimpleWorkerContext.java:233)<br>\n        at org.hl7.fhir.r5.context.SimpleWorkerContext.loadFromPackage(SimpleWorkerContext.java:326)<br>\n        at org.hl7.fhir.r5.context.SimpleWorkerContext.fromPackage(SimpleWorkerContext.java:178)<br>\n        at org.hl7.fhir.igtools.publisher.SpecificationPackage.fromPackage(SpecificationPackage.java:70)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.loadPack(Publisher.java:2245)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.loadCorePackage(Publisher.java:2208)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.initializeFromJson(Publisher.java:1784)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.initialize(Publisher.java:1208)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:659)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:6943)</p>",
        "id": 188081880,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1581575451
    },
    {
        "content": "<p>ok thanks</p>",
        "id": 188082048,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1581575669
    },
    {
        "content": "<p>I'm building a local copy of <a href=\"https://github.com/hl7au/au-fhir-childhealth\" target=\"_blank\" title=\"https://github.com/hl7au/au-fhir-childhealth\">https://github.com/hl7au/au-fhir-childhealth</a></p>",
        "id": 188082590,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1581576527
    },
    {
        "content": "<p>ig-dhpr.json builds a subset of what ig.json does and builds rather faster.</p>",
        "id": 188082657,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1581576647
    },
    {
        "content": "<p>This is the same one that I had. I've patched the code locally in OperationDefinition30_50.java line 52 from:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">tgt</span><span class=\"p\">.</span><span class=\"na\">setCommentElement</span><span class=\"p\">((</span><span class=\"n\">org</span><span class=\"p\">.</span><span class=\"na\">hl7</span><span class=\"p\">.</span><span class=\"na\">fhir</span><span class=\"p\">.</span><span class=\"na\">r5</span><span class=\"p\">.</span><span class=\"na\">model</span><span class=\"p\">.</span><span class=\"na\">MarkdownType</span><span class=\"p\">)</span> <span class=\"n\">VersionConvertor_30_50</span><span class=\"p\">.</span><span class=\"na\">convertType</span><span class=\"p\">(</span><span class=\"n\">src</span><span class=\"p\">.</span><span class=\"na\">getCommentElement</span><span class=\"p\">()));</span>\n</pre></div>\n\n\n<p>to</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">tgt</span><span class=\"p\">.</span><span class=\"na\">setCommentElement</span><span class=\"p\">(</span><span class=\"k\">new</span> <span class=\"n\">org</span><span class=\"p\">.</span><span class=\"na\">hl7</span><span class=\"p\">.</span><span class=\"na\">fhir</span><span class=\"p\">.</span><span class=\"na\">r5</span><span class=\"p\">.</span><span class=\"na\">model</span><span class=\"p\">.</span><span class=\"na\">MarkdownType</span><span class=\"p\">(</span><span class=\"n\">src</span><span class=\"p\">.</span><span class=\"na\">getCommentElement</span><span class=\"p\">().</span><span class=\"na\">asStringValue</span><span class=\"p\">()));</span>\n</pre></div>\n\n\n<p>This happened to be the only instance that needed fixing for me because my input just touched OperationDefinition.comment, but I think all String &gt; MarkDown conversions need some attention.</p>",
        "id": 188086570,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1581582462
    },
    {
        "content": "<p>Mark is working on them. I thought I had found all the ones that mattered for IG production. I'll do another release for that one</p>",
        "id": 188093268,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1581589032
    },
    {
        "content": "<p>IGPublisher 1.0.64 works fine. <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>",
        "id": 188167600,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1581640383
    }
]