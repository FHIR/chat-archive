[
    {
        "content": "<p>Some of the examples in our mCODE IG cause errors to be reported in the qa.html file when the example contains Observation.components that have been sliced.  As best I can tell, the example is actually valid.</p>\n<p>The errors look like this:</p>\n<blockquote>\n<p><strong>Path</strong>: Observation/mCODEGeneticVariantFoundExample01: Observation.component[1]<br>\n<strong>Severity</strong>: error<br>\n<strong>Message</strong>: Error in discriminator at Observation.component-GenomicSourceClass.code.coding: slicing found</p>\n</blockquote>\n<p>This error is repeated for each component in the example, for each component slice in the profile.  (I.e., if the profile defines 4 slices and the example contains 4 components, we'll see an error like the one above a total of 16 times).</p>\n<p>Based on the error message I thought it might be because the slicing discriminator path at <code>Observation.component</code> overlaps the slicing discriminator path at <code>Observation.component.code.coding</code> -- but in reviewing the official FHIR BP profile, I see that it's done the same exact way -- so I assume it is valid.</p>\n<p>Here is a screenshot of part of the FHIR BP profile (on left) and part of our profile (on right):<br>\n<a href=\"/user_uploads/10155/ntvM7QzxtL6OwzRAfyf6uO1F/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/ntvM7QzxtL6OwzRAfyf6uO1F/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/ntvM7QzxtL6OwzRAfyf6uO1F/pasted_image.png\"></a></div><p>Am I missing something or is this potentially an issue in the validator?</p>",
        "id": 163564783,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1555510814
    },
    {
        "content": "<p>This sounds like the validation error discussed in <a href=\"#narrow/stream/179177-conformance/topic/Java.20validator.20and.20Simplifier.20disagree.20on.20slice.20validity\" title=\"#narrow/stream/179177-conformance/topic/Java.20validator.20and.20Simplifier.20disagree.20on.20slice.20validity\">this thread</a> in which case it is actually it's actually a bug in the STU3 spec, specifically an incorrect constraint (corrected for R4). The good news is that it will be fixed in the upcoming technical correction to STU3, cf. <a href=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=20339\" target=\"_blank\" title=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=20339\">GF 20339</a>.</p>",
        "id": 163926885,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1555958817
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"194703\">@Morten Ernebjerg</span> -- thank you for pointing out that thread to me.  I somehow missed it!  I'll look forward to the technical correction then!</p>",
        "id": 163932479,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1555962819
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span>  the error you describe appears also with the current validator on the official blood pressure profile with R4. I described it in <a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=21472\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=21472\">GF#21472</a>. If you change your profile to use pattern/code slicing and patternCodeableConcept within the components you can work around the error message, see:  <a href=\"https://github.com/hapifhir/org.hl7.fhir.core/blob/30803a7a410bec0d9c3f52b34dd799c5aa3a9830/org.hl7.fhir.validation/src/test/resources/validation-examples/observation-bp-profile.xml\" target=\"_blank\" title=\"https://github.com/hapifhir/org.hl7.fhir.core/blob/30803a7a410bec0d9c3f52b34dd799c5aa3a9830/org.hl7.fhir.validation/src/test/resources/validation-examples/observation-bp-profile.xml\">https://github.com/hapifhir/org.hl7.fhir.core/blob/30803a7a410bec0d9c3f52b34dd799c5aa3a9830/org.hl7.fhir.validation/src/test/resources/validation-examples/observation-bp-profile.xml</a></p>",
        "id": 164968698,
        "sender_full_name": "Oliver Egger",
        "timestamp": 1557136251
    }
]