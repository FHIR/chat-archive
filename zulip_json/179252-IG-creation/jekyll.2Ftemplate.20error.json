[
    {
        "content": "<p>I'm getting an error trying to run IG publisher.  It appears the template has been updated, but there are some filename errors.  This happens after running _updatePublisher.  Everything was working fine earlier today.</p>\n<p>Jekyll has failed. Complete output from running Jekyll:   Liquid Exception: Could not locate the included file 'fragment-simpletable.html' in any of [\".../temp/pages/_includes\"]. Ensure it exists in one of those directories and, if it is a symlink, does not point outsid (01:49.0595)</p>\n<p>fragment-simple<strong>T</strong>able.html does exist in temp/pages/_includes.  I renamed it to be all lowercase and ran the jekyll command directly and also got errors with fragment-pagetable.html and fragment-resourcetable.html.  After renaming both of those to all use lowercase \"table\" then jekyll would finish.</p>\n<p>Thanks!</p>",
        "id": 272074984,
        "sender_full_name": "Luke Duncan",
        "timestamp": 1644989048
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> probably a template error (we updated the current template today)</p>",
        "id": 272077027,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1644991540
    },
    {
        "content": "<p>are you using the current template? You could anchor on the latest release instead</p>",
        "id": 272077035,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1644991559
    },
    {
        "content": "<p>template has indeed an error. case mismatches.</p>",
        "id": 272078831,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1644993897
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> I'm about to send PR. <br>\nQuestion: Should I fix only the case mismatches or put everything lowercase? There's a few instances or this : pageTable, simpleTable...</p>",
        "id": 272078899,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1644993970
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"193299\">@Luke Duncan</span> Thanks for posting this, this error stops all my builds. Good to know the crew is on it <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>",
        "id": 272081393,
        "sender_full_name": "Thomas Tveit Rosenlund",
        "timestamp": 1644996548
    },
    {
        "content": "<p><a href=\"https://github.com/HL7/ig-template-base/pull/190\">https://github.com/HL7/ig-template-base/pull/190</a></p>",
        "id": 272082025,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1644997127
    },
    {
        "content": "<p>This should fix it, pending a merge</p>",
        "id": 272082038,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1644997146
    },
    {
        "content": "<p>it still leaves some uppercase filenames, but those that are left are not breaking anything</p>",
        "id": 272082071,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1644997192
    },
    {
        "content": "<p>thanks - I did not have time to investigate this today. However, all of you, if this broke your builds, then you are using the current template, and this is the risk of running the current template. You should rather use the latest release</p>",
        "id": 272082126,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1644997220
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179252-IG-creation/topic/jekyll.2Ftemplate.20error/near/272082126\">said</a>:</p>\n<blockquote>\n<p>thanks - I did not have time to investigate this today. However, all of you, if this broke your builds, then you are using the current template, and this is the risk of running the current template. You should rather use the latest release</p>\n</blockquote>\n<p>Is it only possible to specify either #current or a specific template version in the ig.ini or are there other undocumented options? Would really like to point to #latest-release or something.</p>",
        "id": 272083831,
        "sender_full_name": "Thomas Tveit Rosenlund",
        "timestamp": 1644998656
    },
    {
        "content": "<p>just don't specify a version</p>",
        "id": 272084699,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1644999264
    },
    {
        "content": "<p>then you get the latest released version</p>",
        "id": 272084744,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1644999303
    },
    {
        "content": "<p>That's what gave me the current build actually</p>",
        "id": 272084787,
        "sender_full_name": "Thomas Tveit Rosenlund",
        "timestamp": 1644999345
    },
    {
        "content": "<p>This was my ig.ini line for template: template = <a href=\"https://github.com/HL7/ig-template-base\">https://github.com/HL7/ig-template-base</a></p>",
        "id": 272084867,
        "sender_full_name": "Thomas Tveit Rosenlund",
        "timestamp": 1644999397
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192856\">@Thomas Tveit Rosenlund</span> can you try now?</p>",
        "id": 272085378,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1644999842
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span> Not working for me. I have tried it all:</p>\n<ul>\n<li>template = <a href=\"https://github.com/HL7/ig-template-base\">https://github.com/HL7/ig-template-base</a> (still gives the Liquid error 5 minutes ago)</li>\n<li>template = <a href=\"https://github.com/HL7/ig-template-base#current\">https://github.com/HL7/ig-template-base#current</a> (gives a different error)</li>\n<li>template = <a href=\"https://github.com/HL7/ig-template-base#0.1.0\">https://github.com/HL7/ig-template-base#0.1.0</a> (same error as above)</li>\n</ul>\n<p>If I try to specify a version i get something like this:</p>\n<div class=\"codehilite\"><pre><span></span><code>Publishing Content Failed: Error loading template https://github.com/HL7/ig-template-base#current: Error parsing https://github.com/HL7/ig-template-base#current/archive/master.zip#package/package.json: null (00:07.0941)\n</code></pre></div>\n<p>My runs: <a href=\"https://github.com/HL7Norway/VkpObservation/actions/workflows/vkpobservation-gh-pages.yml\">https://github.com/HL7Norway/VkpObservation/actions/workflows/vkpobservation-gh-pages.yml</a></p>",
        "id": 272085770,
        "sender_full_name": "Thomas Tveit Rosenlund",
        "timestamp": 1645000098
    },
    {
        "content": "<p>which one is your build with base#current?</p>",
        "id": 272085866,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1645000190
    },
    {
        "content": "<p>just use the package id. The versioning doesn't work if you refer to a template directly by URL</p>",
        "id": 272086532,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1645000640
    },
    {
        "content": "<p>template = hl7.fhir.template</p>",
        "id": 272086578,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1645000675
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span> The last one : <a href=\"https://github.com/HL7Norway/VkpObservation/runs/5213074095?check_suite_focus=true\">https://github.com/HL7Norway/VkpObservation/runs/5213074095?check_suite_focus=true</a></p>",
        "id": 272087340,
        "sender_full_name": "Thomas Tveit Rosenlund",
        "timestamp": 1645001131
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> will try that id instead</p>",
        "id": 272087352,
        "sender_full_name": "Thomas Tveit Rosenlund",
        "timestamp": 1645001143
    },
    {
        "content": "<p>right (i missed that). you should use the package id, not url</p>",
        "id": 272089505,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1645002439
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192856\">@Thomas Tveit Rosenlund</span> the comments on ini are #, not //</p>",
        "id": 272089532,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1645002451
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> The id seems to work thanks</p>",
        "id": 272089858,
        "sender_full_name": "Thomas Tveit Rosenlund",
        "timestamp": 1645002658
    },
    {
        "content": "<p>I thought id or url was much the same for this but apparantly not</p>",
        "id": 272089908,
        "sender_full_name": "Thomas Tveit Rosenlund",
        "timestamp": 1645002700
    },
    {
        "content": "<p>it is a different thing, yes. the package id is resolved through the npm package system which supports versioning, but the URL is resolved directly to a working repository</p>",
        "id": 272094777,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1645005627
    },
    {
        "content": "<p>When you explain it like that <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>, it makes perfect sense</p>",
        "id": 272100524,
        "sender_full_name": "Thomas Tveit Rosenlund",
        "timestamp": 1645009001
    },
    {
        "content": "<p>I noticed that all of the derivation IG templates all call upon their previous using #current... is this what we want?<br>\ne.g. <a href=\"https://github.com/HL7/ig-template-fhir/blob/master/package/package.json\">https://github.com/HL7/ig-template-fhir/blob/master/package/package.json</a></p>",
        "id": 272114107,
        "sender_full_name": "John Moehrke",
        "timestamp": 1645017612
    },
    {
        "content": "<p>All the current refer to current, yes. The versioned releases donâ€™t</p>",
        "id": 272123419,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1645022047
    },
    {
        "content": "<p>Still failing</p>",
        "id": 272126872,
        "sender_full_name": "John Moehrke",
        "timestamp": 1645023609
    },
    {
        "content": "<p>The accepted pull request does not seem to be propigating.. even to the ci-build</p>",
        "id": 272126947,
        "sender_full_name": "John Moehrke",
        "timestamp": 1645023628
    },
    {
        "content": "<p>what's still failing?</p>",
        "id": 272127592,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1645023961
    },
    {
        "content": "<p><a href=\"https://github.com/HL7/ig-template-base/pull/191\">https://github.com/HL7/ig-template-base/pull/191</a></p>",
        "id": 272128220,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1645024248
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> I think I missed something, or windows did</p>",
        "id": 272128319,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1645024294
    },
    {
        "content": "<p>can you approve please?</p>",
        "id": 272128337,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1645024300
    },
    {
        "content": "<p>done</p>",
        "id": 272128631,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1645024420
    },
    {
        "content": "<p>seems all of these filenames should have (and going forward be) always lowercase.</p>",
        "id": 272129634,
        "sender_full_name": "John Moehrke",
        "timestamp": 1645024897
    },
    {
        "content": "<p>When I build locally (after running <a href=\"http://_updatePublisher.sh\">_updatePublisher.sh</a>, naturally), everything works well.</p>\n<p>The CI build bombs -- <a href=\"http://build.fhir.org/ig/HL7/codex-radiation-therapy/branches/master/failure/build.log\">http://build.fhir.org/ig/HL7/codex-radiation-therapy/branches/master/failure/build.log</a> </p>\n<div class=\"codehilite\" data-code-language=\"run\"><pre><span></span><code>Jekyll: Source: /scratch/ig-build-temp-L4X7C4/repo/temp/pages                    (04:25.0119)\nJekyll: Generating...                                                            (04:25.0119)\nJekyll has failed. Complete output from running Jekyll: [31m  Liquid Exception: Could not locate the included file 'fragment-simpletable.html' in any of [\"/scratch/ig-build-temp-L4X7C4/repo/temp/pages/_includes\"]. Ensure it exists in one of those directories and, if it is a symlink, does not point outside your (04:25.0276)\nNote: Check that Jekyll is installed correctly                                   (04:25.0276)```\n</code></pre></div>",
        "id": 272130015,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1645025085
    },
    {
        "content": "<p>That error means that it can't find the file you're trying to include.  Can you make sure it's being created by your tooling?</p>",
        "id": 272130565,
        "sender_full_name": "David Pyke",
        "timestamp": 1645025322
    },
    {
        "content": "<p>all these are template issues. Stop using the current template, and you won't have a problem</p>",
        "id": 272131084,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1645025541
    },
    {
        "content": "<p>Why does it work locally, but not on the CI build?  SHouldn't it fail/succeed consistently?</p>",
        "id": 272131757,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1645025821
    },
    {
        "content": "<p>it should work on the ci build. <span class=\"user-mention\" data-user-id=\"193299\">@Luke Duncan</span> ?</p>",
        "id": 272132333,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1645026058
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"215604\">@Saul Kravitz</span> are you on Windows?</p>",
        "id": 272132381,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1645026084
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> Most of us are using some template.. include those using the HL7 FHIR template... where it is THOSE templates that are pulling in base using #current...    so, is THAT right?</p>",
        "id": 272133961,
        "sender_full_name": "John Moehrke",
        "timestamp": 1645026747
    },
    {
        "content": "<p>This is working for me now.</p>\n<p>This was done through a couple of dependencies that are handled using a package.json file, e.g,:<br>\n  \"dependencies\": {<br>\n    \"ihe.fhir.template\": \"current\"<br>\n  }<br>\nIf I remove current, it fails.  Is there a way to get the latest release version without having to update version numbers as releases happen without using current?  Or if I'm starting from something like this:  <a href=\"https://github.com/HL7/ig-template-hl7/blob/master/package/package.json\">https://github.com/HL7/ig-template-hl7/blob/master/package/package.json</a></p>",
        "id": 272134484,
        "sender_full_name": "Luke Duncan",
        "timestamp": 1645026961
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span>  no, I already explained. Released packages do not depend on current</p>",
        "id": 272136096,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1645027505
    },
    {
        "content": "<blockquote>\n<p>s there a way to get the latest release version without having to update version numbers as releases happen without using current?</p>\n</blockquote>\n<p>in what context. In an ig.ini, just don't specify a version, and you get the latest release. but the context of your question suggests you're asking about something different</p>",
        "id": 272136235,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1645027554
    },
    {
        "content": "<p>I don't know why it doesn't work on the CI build, except that that's linux, and fully case sensitive, and other file systems aren't</p>",
        "id": 272136365,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1645027587
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179252-IG-creation/topic/jekyll.2Ftemplate.20error/near/272136235\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p>s there a way to get the latest release version without having to update version numbers as releases happen without using current?</p>\n</blockquote>\n<p>in what context. In an ig.ini, just don't specify a version, and you get the latest release. but the context of your question suggests you're asking about something different</p>\n</blockquote>\n<p>In a package.json file for a template that depends on other templates, you don't seem to have the option to leave off current.  Like in the example I linked for hl7.base.template:  <a href=\"https://github.com/HL7/ig-template-hl7/blob/master/package/package.json\">https://github.com/HL7/ig-template-hl7/blob/master/package/package.json</a>  (which is using fhir.base.template#current)</p>",
        "id": 272138116,
        "sender_full_name": "Luke Duncan",
        "timestamp": 1645028298
    },
    {
        "content": "<p>the github templates are all current, and have no choice but to rely on the current version in github, yes. When I publish the templates, the dependency chain is replaced with the latest release all the way down the chain.</p>",
        "id": 272138610,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1645028532
    },
    {
        "content": "<p>Once we've ironed out the issues with the current template, then I'll be releasing a new set of templates for all the templates</p>",
        "id": 272138688,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1645028574
    }
]