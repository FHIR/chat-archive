[
    {
        "content": "<p>What is the thinking around IG Publisher errors that are caused by a dependency on another IG. We are getting two such errors in eCR - one is an invariant error in US Core that I've raised a JIRA for (<a href=\"https://jira.hl7.org/browse/FHIR-25459?filter=12653\" target=\"_blank\" title=\"https://jira.hl7.org/browse/FHIR-25459?filter=12653\">https://jira.hl7.org/browse/FHIR-25459?filter=12653</a>) and the other is an ODH error that I'm working on getting to the bottom of.</p>\n<p>I could remove the examples from the eCR IG which would remove the errors, but then implementers won't have an example.</p>\n<p>Are these errors we can supress?</p>",
        "id": 185651713,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579043488
    },
    {
        "content": "<p>Right now, errors aren't suppressible.  (In part because implementers who use the validator are going to hit them too - so when preparing to do a release we need to consciously decide if that's ok or not.)</p>",
        "id": 185653416,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1579045000
    },
    {
        "content": "<p>Only exception is broken link issues</p>",
        "id": 185653421,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1579045009
    },
    {
        "content": "<p>Yes, that's my worry - that implementers are going to hit them. I guess the only option, then, is to remove the examples from the IG. (Which won't help implementers at all... )</p>",
        "id": 185655597,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579047141
    },
    {
        "content": "<p>The examples aren't the issue.  The issue is that real valid data will be flagged as in error.</p>",
        "id": 185655828,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1579047387
    },
    {
        "content": "<p>If you must publish before the IG you depend on can be fixed, you might want to flag the known issue in your IG.  (And Perhaps point to the validation results of your example as an example.</p>",
        "id": 185655955,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1579047499
    },
    {
        "content": "<p>Well, the examples are the issue for our IG - we really don't want errors in our QA. But yes, agree about real data.</p>\n<p>That's the issue, I'm not sure we want those examples with errors showing up in our IG. Especially as hopefully it will be a short term issue in that they will be fixed soon and then we have an IG out there published with errors and explanations about errors that are no longer relevant. Very messy, IMO.</p>",
        "id": 185656394,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579048017
    },
    {
        "content": "<p>I do think that it should be a requirement for all FHIR IGs (like CDA IGs require) that they have at least one example for each profile. Creating examples is a very important QA step. The ODH one doesn't have any examples (and I found another issue when creating examples for eCR of an invalid profile earlier - it was just lucky it was before publication so it could be fixed). This latest one didn't actually show up until I was able to declare the dependency after it was published.</p>",
        "id": 185656624,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579048263
    },
    {
        "content": "<p>Agree re: at least one example per profile.  I'll add it for FMG discussion.  I wouldn't worry about QA errors in your IG when you go to publication so long as they've been waved by the FMG/Grahame.  Numerous others have gone to publication that way.</p>",
        "id": 185656733,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1579048382
    },
    {
        "content": "<p>Ok. Not sure whether the client is going to be ok with that though. We'll see...</p>\n<p>Thanks for adding it to FMG discussion!</p>",
        "id": 185656822,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579048474
    },
    {
        "content": "<p>They have the option of waiting for the dependent IG to be fixed... :)</p>",
        "id": 185656938,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1579048573
    },
    {
        "content": "<p>Yeah, no. Been waiting too long for it to be published already!</p>",
        "id": 185657102,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579048790
    },
    {
        "content": "<p>Grahame hasn't waived these yet</p>",
        "id": 185657490,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1579049241
    },
    {
        "content": "<p>Exactly!</p>",
        "id": 185657505,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579049260
    },
    {
        "content": "<p>BTW, this is the eCR IG that has already been approved for publication by FMG, with the caveat that we needed to add ODH as a dependency before publication. Which has caused errors. But only if we include the ODH examples...</p>",
        "id": 185657602,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1579049386
    },
    {
        "content": "<p>I have an error in my IG when adding dependsOn <a href=\"https://build.fhir.org/ig/hl7dk/dk-medcom/branches/master/failure/build.log\" title=\"https://build.fhir.org/ig/hl7dk/dk-medcom/branches/master/failure/build.log\">https://build.fhir.org/ig/hl7dk/dk-medcom/branches/master/failure/build.log</a></p>\n<p>I had the idea that I should state the packageId from the IG that I depend on - being the package ID from <a href=\"http://build.fhir.org/ig/hl7dk/dk-core/\" title=\"http://build.fhir.org/ig/hl7dk/dk-core/\">http://build.fhir.org/ig/hl7dk/dk-core/</a> which is dk.fhir.ig.dk-core. Clearly this is not what is expected. What else should I have written <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> ?</p>",
        "id": 194777082,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587460195
    },
    {
        "content": "<p>token error fixed - now the NpmPackageManager is unable to find spec.internals:</p>\n<div class=\"codehilite\"><pre><span></span>Installing dk.fhir.ig.dk-core#0.9.0 to the package cache\n  Fetching:\n  Installing:  done.\nPublishing Content Failed: Unable to find the file other/spec.internals in the package dk.fhir.ig.dk-core (00:15.0392)\n                                                                                 (00:15.0392)\nUse -? to get command line help                                                  (00:15.0392)\n                                                                                 (00:15.0392)\nStack Dump (for debugging):                                                      (00:15.0392)\njava.io.IOException: Unable to find the file other/spec.internals in the package dk.fhir.ig.dk-core\n    at org.hl7.fhir.utilities.cache.NpmPackage.load(NpmPackage.java:563)\n</pre></div>",
        "id": 194782937,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587464214
    },
    {
        "content": "<p>So where was it downloaded from? fetching the <a href=\"http://build.fhir.org/ig/hl7dk/dk-core/package.tgz\" title=\"http://build.fhir.org/ig/hl7dk/dk-core/package.tgz\">http://build.fhir.org/ig/hl7dk/dk-core/package.tgz</a> shows that there indeed is a spec.internals</p>",
        "id": 194783188,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587464390
    },
    {
        "content": "<p>ahh. that is a simplifier package. It's getting downloaded from <a href=\"http://packages.fhir.org\" title=\"http://packages.fhir.org\">packages.fhir.org</a>, which at this time only contains the simplifier packages. And they don't have any way for me to depend on them when publishing a fhir IG</p>",
        "id": 194784019,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587464904
    },
    {
        "content": "<p>I'll happily do registration on <a href=\"https://github.com/FHIR/ig-registry/blob/master/fhir-ig-list.json\" title=\"https://github.com/FHIR/ig-registry/blob/master/fhir-ig-list.json\">https://github.com/FHIR/ig-registry/blob/master/fhir-ig-list.json</a></p>",
        "id": 194784070,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587464939
    },
    {
        "content": "<p>the only hosting I currently have is the <a href=\"https://build.fhir.org/\" title=\"https://build.fhir.org/\">https://build.fhir.org/</a></p>",
        "id": 194784117,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587464970
    },
    {
        "content": "<p>but if it's published through simplifier, then it'll automatically be picked up. The problem is that I can't use packages published through simplifier</p>",
        "id": 194784149,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587464990
    },
    {
        "content": "<p>as in <a href=\"https://build.fhir.org/ig/hl7dk/dk-core/\" title=\"https://build.fhir.org/ig/hl7dk/dk-core/\">https://build.fhir.org/ig/hl7dk/dk-core/</a></p>",
        "id": 194784151,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587464991
    },
    {
        "content": "<p>right ...</p>",
        "id": 194784210,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587465004
    },
    {
        "content": "<p>well, you don't need to register a current package - that automatically works. But that's not a stable target to reference</p>",
        "id": 194784244,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587465027
    },
    {
        "content": "<p>but is it enough to add the entry in the <a href=\"https://github.com/FHIR/ig-registry/blob/master/fhir-ig-list.json\" title=\"https://github.com/FHIR/ig-registry/blob/master/fhir-ig-list.json\">https://github.com/FHIR/ig-registry/blob/master/fhir-ig-list.json</a> ?</p>",
        "id": 194784250,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587465031
    },
    {
        "content": "<p>I don't need stable right now</p>",
        "id": 194784259,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587465041
    },
    {
        "content": "<p>fluctuating is fine</p>",
        "id": 194784276,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587465053
    },
    {
        "content": "<p>aka [latest] / current</p>",
        "id": 194784317,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587465074
    },
    {
        "content": "<p>you don't need to register it at all to refer to the current build - that automatically works for the java package manager</p>",
        "id": 194784324,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587465079
    },
    {
        "content": "<p>so what should I do?</p>",
        "id": 194784346,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587465092
    },
    {
        "content": "<p>I'm not sure what you're trying to achieve right now, so I don't know what you should do</p>",
        "id": 194784370,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587465109
    },
    {
        "content": "<p>I have a moving target dk-core and I need dk-medcom to depend on that moving target</p>",
        "id": 194784372,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587465110
    },
    {
        "content": "<p>is that possible?</p>",
        "id": 194784417,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587465123
    },
    {
        "content": "<p>you have to make your dependency dk.fhir.ig.dk-core#current - that says to depend on the ci-build version not the version you published through simplifier</p>",
        "id": 194784577,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587465254
    },
    {
        "content": "<p>so      </p>\n<div class=\"codehilite\"><pre><span></span>&lt;dependsOn id=&quot;DKCore&quot;&gt;\n        &lt;uri value=&quot;http://hl7.dk/fhir/core/ImplementationGuide/dk.fhir.ig.dk-core&quot; /&gt;\n        &lt;packageId value=&quot;dk.fhir.ig.dk-core&quot; /&gt;\n        &lt;version value=&quot;0.9.0&quot; /&gt;\n    &lt;/dependsOn&gt;\n</pre></div>\n\n\n<p>should be </p>\n<div class=\"codehilite\"><pre><span></span>&lt;dependsOn id=&quot;DKCore&quot;&gt;\n        &lt;uri value=&quot;http://hl7.dk/fhir/core/ImplementationGuide/dk.fhir.ig.dk-core&quot; /&gt;\n        &lt;packageId value=&quot;dk.fhir.ig.dk-core&quot; /&gt;\n        &lt;version value=&quot;#current&quot; /&gt;\n    &lt;/dependsOn&gt;\n</pre></div>\n\n\n<p>?</p>",
        "id": 194784727,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587465370
    },
    {
        "content": "<p>or without the '#'</p>",
        "id": 194784736,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587465381
    },
    {
        "content": "<p>without the #</p>",
        "id": 194784747,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587465393
    },
    {
        "content": "<p>if you're going to publish through simplifier you might want to take up the question with them of how they're going to deal with the publishing problem.</p>",
        "id": 194785297,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587465801
    },
    {
        "content": "<p>I think the publication process onwards will not rely on simplifier</p>",
        "id": 194785865,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587466271
    },
    {
        "content": "<p>the proces around publishing using the IG publisher - where is that documented? as well as the 'current' version that I just added</p>",
        "id": 194785974,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587466340
    },
    {
        "content": "<p><a href=\"https://confluence.hl7.org/display/FHIR/IG+Publisher+Documentation\" title=\"https://confluence.hl7.org/display/FHIR/IG+Publisher+Documentation\">https://confluence.hl7.org/display/FHIR/IG+Publisher+Documentation</a></p>",
        "id": 194787283,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587467346
    },
    {
        "content": "<p>is it only the control file part that is deprecated?</p>",
        "id": 194787306,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587467379
    },
    {
        "content": "<p>yes, I suppose I should update it. I'll put it on my list of things to do</p>",
        "id": 194787378,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587467416
    },
    {
        "content": "<div class=\"message_inline_image\"><a href=\"https://media.giphy.com/media/hhJv7kGd2NsWc/giphy.gif\" title=\"https://media.giphy.com/media/hhJv7kGd2NsWc/giphy.gif\"><img src=\"https://media.giphy.com/media/hhJv7kGd2NsWc/giphy.gif\"></a></div>",
        "id": 194787587,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587467572
    },
    {
        "content": "<p>I can't see the use of <code>current</code>documented anywhere on <a href=\"https://confluence.hl7.org/display/FHIR/IG+Publisher+Documentation\" title=\"https://confluence.hl7.org/display/FHIR/IG+Publisher+Documentation\">https://confluence.hl7.org/display/FHIR/IG+Publisher+Documentation</a></p>",
        "id": 194790376,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1587469548
    }
]