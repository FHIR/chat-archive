[
    {
        "content": "<p>Trying to build  using the latest v0.12.7 and the latest IG Publisher.... the sushi build is successful, IG Publisher crashes with the message:</p>\n<p>FHIR IG Publisher Version 1.0.100-SNAPSHOT (Git# 6c6b419dd19f). Built 2020-06-07T09:06:40.927+10:00 (64 hours old)<br>\nDetected Java version: 1.8.0_242 from /Library/Java/JavaVirtualMachines/adoptopenjdk-8.jdk/Contents/Home/jre on x86_64 (64bit). 3641MB available<br>\nParameters: -ig ig.ini<br>\ndir = /Users/skravitz/git/fhir-mCODE-ig/fsh/build, path = /Users/skravitz/.rvm/gems/ruby-2.6.3/bin:/Users/skravitz/.rvm/gems/ruby-2.6.3@global/bin:/Users/skravitz/.rvm/rubies/ruby-2.6.3/bin:/Users/skravitz/opt/anaconda3/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/munki:/Users/skravitz/.rvm/bin<br>\nRun time = Tuesday, June 9, 2020 12:01:26 PM EDT (2020-06-09T12:01:26-04:00)<br>\nPackage Cache: /Users/skravitz/.fhir/packages                                    (00:00.0173)<br>\nLoad Template from hl7.fhir.template#0.1.0                                       (00:02.0418)<br>\n Load Template from hl7.base.template#0.1.0                                      (00:02.0619)<br>\n  Load Template from fhir.base.template#0.1.0                                    (00:02.0649)</p>\n<p>onLoad.findSpreadsheets:</p>\n<p>onLoad.updateIg:<br>\n     [xslt] Processing /Users/skravitz/git/fhir-mCODE-ig/fsh/build/template/onLoad-ig-working.xml to /Users/skravitz/git/fhir-mCODE-ig/fsh/build/template/onLoad-ig-updated.xml<br>\n     [xslt] Loading stylesheet /Users/skravitz/git/fhir-mCODE-ig/fsh/build/template/scripts/onLoad.xslt</p>\n<p>onLoad.extend:</p>\n<p>onLoad:<br>\nRoot directory: /Users/skravitz/git/fhir-mCODE-ig/fsh/build                      (00:09.0222)<br>\nCore Package hl7.fhir.r4.core#4.0.1<br>\nTerminology Cache is at /Users/skravitz/git/fhir-mCODE-ig/fsh/build/input-cache/txcache. 5 files in cache (00:29.0919)<br>\nConnect to Terminology Server at <a href=\"http://tx.fhir.org\">http://tx.fhir.org</a>                              (00:32.0962)<br>\nLoad Package hl7.fhir.pubpack#0.0.5<br>\nLoad Package hl7.fhir.xver-extensions#0.0.4<br>\nInitialization complete                                                          (00:37.0428)<br>\nLoad Content                                                                     (00:37.0430)<br>\nProcessing Conformance Resources                                                 (00:38.0863)<br>\nTerminology server: Check for supported code systems for <a href=\"http://snomed.info/sct\">http://snomed.info/sct</a>  (00:43.0466)<br>\nException in thread \"main\" java.lang.Error: Access single value, but value count is 2<br>\n        at org.hl7.fhir.r5.renderers.utils.ElementWrappers$PropertyWrapperMetaElement.value(ElementWrappers.java:299)<br>\n        at org.hl7.fhir.r5.renderers.DiagnosticReportRenderer.render(DiagnosticReportRenderer.java:51)<br>\n        at org.hl7.fhir.r5.renderers.ResourceRenderer.render(ResourceRenderer.java:76)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.generateNarratives(Publisher.java:1034)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.loadConformance(Publisher.java:3610)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:836)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:698)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:7533)</p>\n<p><span class=\"user-mention\" data-user-id=\"239822\">@Nick Freiter</span>  has divined that the problem is example mCODECancerGenomicsReportExample01 which looks valid to us, specifically the category element.  IG Publisher doesn't like its (required) two elements.  Deleting one or the other allows the build to succeed.</p>",
        "id": 200285600,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1591734532
    },
    {
        "content": "<p>CancerGenomicsProfile: <a href=\"http://hl7.org/fhir/us/mcode/StructureDefinition-mcode-cancer-genomics-report.html\">http://hl7.org/fhir/us/mcode/StructureDefinition-mcode-cancer-genomics-report.html</a><br>\nExample of this profile causing an issue: <a href=\"http://hl7.org/fhir/us/mcode/DiagnosticReport-mCODECancerGenomicsReportExample01.html\">http://hl7.org/fhir/us/mcode/DiagnosticReport-mCODECancerGenomicsReportExample01.html</a></p>\n<p>As mentioned, when either element in the <code>category</code> array on the example is deleted, the build succeeds. You should be able to reproduce this using the latest version of the IG Publisher and the <a href=\"https://github.com/HL7/fhir-mCODE-ig\">fhir-mCODE-ig</a></p>",
        "id": 200406447,
        "sender_full_name": "Nick Freiter",
        "timestamp": 1591790418
    },
    {
        "content": "<p>I can no problem, thanks.</p>",
        "id": 200406729,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1591790614
    },
    {
        "content": "<p>will be fixed next release</p>",
        "id": 200406734,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1591790618
    }
]