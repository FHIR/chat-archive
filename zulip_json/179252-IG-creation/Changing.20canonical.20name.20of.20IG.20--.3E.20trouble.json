[
    {
        "content": "<p>As part of a technical correction to the Davinci-pdex drug formulary IG (v1.0.1) we are trying to change the canonical name from:</p>\n<p>* from <a href=\"http://hl7.org/fhir/us/Davinci-drug-formulary\">http://hl7.org/fhir/us/Davinci-drug-formulary</a><br>\n   * to:   <a href=\"http://hl7.org/fhir/us/davinci-drug-formulary\">http://hl7.org/fhir/us/davinci-drug-formulary</a></p>\n<p>You can see the source here:   <a href=\"https://github.com/HL7/davinci-pdex-formulary\">https://github.com/HL7/davinci-pdex-formulary</a><br>\nI suspect we are  running into something (intentionally) fundamental.</p>\n<p>You can see the failure in <a href=\"http://build.fhir.org/ig/HL7/davinci-pdex-formulary/branches/master/failure/build.log\">http://build.fhir.org/ig/HL7/davinci-pdex-formulary/branches/master/failure/build.log</a></p>\n<p>The problem starts </p>\n<p>See <a href=\"http://build.fhir.org/ig/HL7/davinci-pdex-formulary/branches/master/failure/build.log\">http://build.fhir.org/ig/HL7/davinci-pdex-formulary/branches/master/failure/build.log</a></p>\n<p>Installing hl7.fhir.us.davinci-drug-formulary#1.0.0 to the package cache<br>\n  Fetching:.<br>\n  Installing: java.io.IOException: Attempt to import a mis-identified package. Expected <strong>hl7.fhir.us.davinci-drug-formulary</strong>, got <strong>hl7.fhir.us.Davinci-drug-formulary</strong><br>\n        at org.hl7.fhir.utilities.npm.FilesystemPackageCacheManager.addPackageToCache(FilesystemPackageCacheManager.java:356)<br>\n        at org.hl7.fhir.utilities.npm.FilesystemPackageCacheManager.loadPackage(FilesystemPackageCacheManager.java:499)<br>\n        at org.hl7.fhir.igtools.publisher.PreviousVersionComparator.startChecks(PreviousVersionComparator.java:185)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.checkConformanceResources(Publisher.java:3876)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.loadConformance(Publisher.java:3788)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:870)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:725)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:8342)</p>\n<p>With appropriate tribute paid for the trouble being caused, is there a path forward?</p>\n<p>Regards,<br>\nSaul<br>\n<span class=\"user-mention\" data-user-id=\"222957\">@Dave Hill</span></p>",
        "id": 215147650,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1604090420
    },
    {
        "content": "<p>Note that when you push a folder or file name change which only changes the case GitHub won't update the case.</p>\n<p><a href=\"https://stackoverflow.com/questions/17683458/how-do-i-commit-case-sensitive-only-filename-changes-in-git\">https://stackoverflow.com/questions/17683458/how-do-i-commit-case-sensitive-only-filename-changes-in-git</a></p>",
        "id": 215160217,
        "sender_full_name": "Eric Haas",
        "timestamp": 1604098696
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span>  file content changing, not file name.</p>",
        "id": 215171508,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1604114355
    },
    {
        "content": "<p>Especially on windows you need to do a git command line activity<br>\n<code>git mv FileName.json filename.json</code></p>",
        "id": 215276114,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1604287050
    },
    {
        "content": "<p>It looks like it rebuilt for a while, the canonical names for all of the profiles are davinci with a lower case 'd'.<br>\nAny thoughts on why build currently fails much appreciated.    <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 215345324,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1604335677
    },
    {
        "content": "<p>what</p>",
        "id": 215373467,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1604348729
    },
    {
        "content": "<p>what is the error message?</p>",
        "id": 215373476,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1604348733
    },
    {
        "content": "<p><a href=\"http://build.fhir.org/ig/HL7/davinci-pdex-formulary/failure/build.log\">http://build.fhir.org/ig/HL7/davinci-pdex-formulary/failure/build.log</a><br>\nThe problem starts with:</p>\n<p>Installing hl7.fhir.us.davinci-drug-formulary#1.0.0 to the package cache<br>\n  Fetching:.<br>\n  Installing: java.io.IOException: Attempt to import a mis-identified package. Expected hl7.fhir.us.davinci-drug-formulary, got hl7.fhir.us.Davinci-drug-formulary<br>\n    at org.hl7.fhir.utilities.npm.FilesystemPackageCacheManager.addPackageToCache(FilesystemPackageCacheManager.java:356)<br>\n    at org.hl7.fhir.utilities.npm.FilesystemPackageCacheManager.loadPackage(FilesystemPackageCacheManager.java:499)<br>\n    at org.hl7.fhir.igtools.publisher.PreviousVersionComparator.startChecks(PreviousVersionComparator.java:185)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.checkConformanceResources(Publisher.java:3876)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.loadConformance(Publisher.java:3788)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:870)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:725)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:8342)</p>",
        "id": 215380793,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1604352197
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>     Any thoughts on what I'm doing wrong?</p>",
        "id": 215593045,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1604502454
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"215604\">@Saul Kravitz</span>  is this on your local build?  Did you delete the packaged caches?</p>",
        "id": 215611929,
        "sender_full_name": "Eric Haas",
        "timestamp": 1604509724
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span>    This is on all builds, local and the CI build process.  <a href=\"http://build.fhir.org/ig/HL7/davinci-pdex-formulary/failure/build.log\">http://build.fhir.org/ig/HL7/davinci-pdex-formulary/failure/build.log</a>.   (Packaged caches are the stuff under ~/.fhir?... if so, then yes on my local build).</p>",
        "id": 215614244,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1604510734
    },
    {
        "content": "<p>What's the 'id' in your ig.json?</p>",
        "id": 215639126,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1604522801
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> -- I'm building with SUSHI, so I think the ig.json is generated.<br>\nIn the build directory I have:<br>\nig.ini with:<br>\nig = input/ImplementationGuide-hl7.fhir.us.davinci-drug-formulary.json</p>\n<p>In build/input/ImplementationGuide-hl7.fhir.us.davinci-drug-formulary.json<br>\n     \"id\": \"hl7.fhir.us.davinci-drug-formulary\",</p>\n<p><span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span></p>",
        "id": 215651255,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1604530269
    },
    {
        "content": "<p>The original canonical name was Davinci with a capital 'D'.<br>\nWe are trying to change to davinci with a lower case 'd'.</p>",
        "id": 215651795,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1604530657
    },
    {
        "content": "<p>I've got nothing to add to what <span class=\"user-mention\" data-user-id=\"215604\">@Saul Kravitz</span> said -- only that I can't find anywhere in his <code>master</code> branch that the capital <code>D</code> could sneak back in -- and yet the IG Publisher is finding it.  I feel like the IG Publisher is looking up information from some other server and then getting this mismatch based on the data coming back.  But I honestly don't know -- that's just the only way I can think of the <code>D</code> getting into the build process.</p>",
        "id": 215652644,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1604531216
    },
    {
        "content": "<p>the error is in the guide that is referencing it, not the drug formulary itself</p>",
        "id": 215654875,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1604532936
    },
    {
        "content": "<p>the case will be wrong in the pdex-formulary dependency</p>",
        "id": 215654952,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1604532976
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  What is my action item?</p>",
        "id": 215670478,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1604550740
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> Is this something that is on the radar for the eagerly awaited 1.1.40?   Or is this an orthogonal issue?  <br>\nThere is urgency on resolving this one since it relates to publishing an update to  the Formulary IG.</p>",
        "id": 216086080,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1604930128
    },
    {
        "content": "<p>there's nothing for me to resolve, so far as I can see.</p>",
        "id": 216130089,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1604949018
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> running this IG:</p>\n<p><code>Unrecognized package-list status: draft for release 0.1.0</code></p>\n<p>it should recognise the status draft</p>",
        "id": 216131970,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1604949932
    },
    {
        "content": "<p>Should 'draft' versions show up in the Jira dropdowns?</p>",
        "id": 216132880,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1604950326
    },
    {
        "content": "<p>if they've bene published, maybe. I'm not sure. But it certainly should not terminate the process</p>",
        "id": 216132935,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1604950353
    },
    {
        "content": "<p>It terminates the process because I need to know what to do with them.  Any new status we introduce has to be handled</p>",
        "id": 216133250,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1604950513
    },
    {
        "content": "<p>I can't know if they've been published or not - I have to drive from the information in the file.  So either they get put into the list of versions always or never (i.e. status needs to change before they'll get added to Jira)</p>",
        "id": 216133449,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1604950604
    },
    {
        "content": "<p>so make it an entry in qa.html.</p>",
        "id": 216141283,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1604955074
    },
    {
        "content": "<p>I can't, not from there</p>",
        "id": 216142782,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1604955922
    },
    {
        "content": "<p>It's supposed to blow up.  Whenever there's new statuses added, the template will have to be updated before they can be used.  I'm going to go with \"don't put them in Jira\" for now.</p>",
        "id": 216142874,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1604955969
    },
    {
        "content": "<p>Updated template pushed</p>",
        "id": 216142932,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1604956027
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  -- should a rebuild of Formulary work now?  Or is there some other dependency?</p>",
        "id": 216239096,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1605026921
    },
    {
        "content": "<p>Should work</p>",
        "id": 216247533,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1605030655
    },
    {
        "content": "<p>actually, this is a big deal, now I realise what to look at</p>",
        "id": 216257700,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1605034810
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191335\">@Martijn Harthoorn</span> what will happen in the package registry if a package id changes case?</p>",
        "id": 216257806,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1605034845
    },
    {
        "content": "<p>\"this\" = the rename, not the 'draft' status?</p>",
        "id": 216262703,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1605036930
    },
    {
        "content": "<p>yes</p>",
        "id": 216264034,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1605037517
    },
    {
        "content": "<p>I just republished successfully.  Is that a surprise or expected?    THANKS</p>",
        "id": 216274969,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1605042635
    },
    {
        "content": "<p>Expected.  But the lack of surprise is still appreciated :)</p>",
        "id": 216275126,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1605042721
    },
    {
        "content": "<p>well, the ci-build will run. it would always have run from the pov of the case change. But I'm screwed downstream...</p>",
        "id": 216278655,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1605044489
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>, in our server casing is irelevant (and if it isn't we will make it so).  In the npm standard they have moved to package ids must be lower case. In the FHIR package spec, I think we should set it to:<br>\n\"A package id (name) SHOULD be lower case.  A package server MUST ignore caseing when searching or matching on package id\"</p>",
        "id": 217637410,
        "sender_full_name": "Martijn Harthoorn",
        "timestamp": 1606143530
    },
    {
        "content": "<p>well, that's something, at least.</p>",
        "id": 217711695,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1606189464
    },
    {
        "content": "<p>and I agree.</p>",
        "id": 217711699,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1606189472
    }
]