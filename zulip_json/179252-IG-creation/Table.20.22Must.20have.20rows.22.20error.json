[
    {
        "content": "<p>Can anyone shed some light on this one and how to fix it?</p>\n<blockquote>\n<p>Publishing Content Failed: Error generating table for profile <a href=\"http://hl7.org/fhir/ips/StructureDefinition/coding-uv-ips\" target=\"_blank\" title=\"http://hl7.org/fhir/ips/StructureDefinition/coding-uv-ips\">http://hl7.org/fhir/ips/StructureDefinition/coding-uv-ips</a>: Must have rows (21.0366sec)</p>\n</blockquote>",
        "id": 153947890,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1522062026
    },
    {
        "content": "<p>what's the stack?</p>",
        "id": 153947891,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1522062409
    },
    {
        "content": "<p>Stack Dump (for debugging):                                                      (21.0366sec)<br>\norg.hl7.fhir.exceptions.FHIRException: Error generating table for profile <a href=\"http://hl7.org/fhir/ips/StructureDefinition/coding-uv-ips\" target=\"_blank\" title=\"http://hl7.org/fhir/ips/StructureDefinition/coding-uv-ips\">http://hl7.org/fhir/ips/StructureDefinition/coding-uv-ips</a>: Must have rows<br>\n    at org.hl7.fhir.r4.conformance.ProfileUtilities.generateTable(ProfileUtilities.java:2035)<br>\n    at org.hl7.fhir.r4.utils.NarrativeGenerator.generate(NarrativeGenerator.java:3915)<br>\n    at org.hl7.fhir.r4.utils.NarrativeGenerator.generate(NarrativeGenerator.java:315)<br>\n    at org.hl7.fhir.r4.utils.NarrativeGenerator.generate(NarrativeGenerator.java:293)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.generateNarratives(Publisher.java:486)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:419)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:387)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:4247)<br>\nCaused by: org.hl7.fhir.exceptions.FHIRException: Must have rows<br>\n    at org.hl7.fhir.utilities.xhtml.HierarchicalTableGenerator.check(HierarchicalTableGenerator.java:666)<br>\n    at org.hl7.fhir.utilities.xhtml.HierarchicalTableGenerator.checkModel(HierarchicalTableGenerator.java:560)<br>\n    at org.hl7.fhir.utilities.xhtml.HierarchicalTableGenerator.generate(HierarchicalTableGenerator.java:378)<br>\n    at org.hl7.fhir.r4.conformance.ProfileUtilities.generateTable(ProfileUtilities.java:2033)<br>\n    ... 7 more<br>\nException in thread \"main\" java.lang.NullPointerException<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:4257)</p>",
        "id": 153947892,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1522062462
    },
    {
        "content": "<p>I need to add an extension - not sure if that is the cause.</p>",
        "id": 153947893,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1522062622
    },
    {
        "content": "<p>not sure. I think I'll have to debug that one in detail</p>",
        "id": 153947894,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1522062806
    },
    {
        "content": "<p>OK.  Let me try this first before you spend any time on it.  I'll let you know one way or the other.</p>",
        "id": 153947895,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1522062869
    },
    {
        "content": "<p>ok</p>",
        "id": 153947896,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1522062932
    },
    {
        "content": "<p>Looks like it is going to need some debugging.  Adding the translation extension dependency (which itself builds OK) didn't change anything - still get the error.  What do you need?</p>",
        "id": 153947909,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1522064863
    },
    {
        "content": "<p>That one's typically triggered by a differential that doesn't include the root node for the StructureDefinition.  In the IG Publication tool, differentials must include the ancestor nodes of all listed nodes, including the root.</p>",
        "id": 153948024,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1522074366
    },
    {
        "content": "<p>OK, thanks.  I'll take a look at that.</p>",
        "id": 153948037,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1522075855
    },
    {
        "content": "<p>I fixed some URL inconsistencies, but the same error is still persisting.  I'm not seeing a problem with the differential or anything else in particular.  All of the references go to the root node.  But maybe you can spot something.<br>\n<a href=\"/user_uploads/10155/FhJ1v8jG0yCxcIMhKr_NFZja/coding-uv-ips.structuredefinition.xml\" target=\"_blank\" title=\"coding-uv-ips.structuredefinition.xml\">coding-uv-ips.structuredefinition.xml</a> <a href=\"/user_uploads/10155/GKiUfbAgCdBorxTMfPK5-m1q/translation.xml\" target=\"_blank\" title=\"translation.xml\">translation.xml</a></p>",
        "id": 153948056,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1522078454
    },
    {
        "content": "<p>Your differential starts wtih       &lt;element id=\"Coding.display.extension\"&gt;</p>",
        "id": 153948063,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1522079920
    },
    {
        "content": "<p>It needs to start with id=\"Coding\"</p>",
        "id": 153948064,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1522079929
    },
    {
        "content": "<p>(And you'll need to have a node for \"Coding.display\" too)</p>",
        "id": 153948065,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1522079951
    },
    {
        "content": "<p>Parent branches need to be present for every node in the tree</p>",
        "id": 153948066,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1522079968
    },
    {
        "content": "<p>Of course.  I get it and that makes sense - now.</p>",
        "id": 153948067,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1522079979
    },
    {
        "content": "<p>That's not actually a rule in the methodology, but it's a current limitation of the publishing tool</p>",
        "id": 153948068,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1522080013
    },
    {
        "content": "<p>You don't have to actually <em>say</em> anything about the intervening nodes - they just need to be there.</p>",
        "id": 153948069,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1522080029
    },
    {
        "content": "<p>I didn't create that one, but it was generated by Forge.  I'll correct it.</p>",
        "id": 153948070,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1522080094
    },
    {
        "content": "<p>Correct, Forge generates sparse differentials (allowed by the FHIR spec). However the IG builder currently does not handle sparse diff trees (yet), so you have to manually fix the diff (recursively add any missing parent nodes). Hopefully a future version of the IG builder learns how to handle this.</p>",
        "id": 153948073,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1522081570
    },
    {
        "content": "<p>I'll try and address that today. It used to work, and I don't know what happened</p>",
        "id": 153948181,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1522090765
    },
    {
        "content": "<p>It fails when producing the tree view for the differential - couldn't see any evidence that it would ever have worked and hard to break by accident...</p>",
        "id": 153948237,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1522102131
    }
]