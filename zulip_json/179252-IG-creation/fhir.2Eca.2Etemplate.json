[
    {
        "content": "<p>We have an IG that uses a local customization of fhir.ca.template. It builds fine locally, but is failing in the CI build. If we change it to use fhir.ca.template or fhir.base.template as the template it succeeds in both the CI build and locally. The error is about not being able to find fhir.ca.template at <a href=\"http://packages.fhir.org/fhir.ca.template/0.1.0\">http://packages.fhir.org/fhir.ca.template/0.1.0</a>. I think, but am not sure that this is related to the great reclamation, and I've triggered a rebuild of the template, but I think something else is missing. Current code is at <a href=\"https://github.com/HL7-Canada/ca-baseline/tree/master\">https://github.com/HL7-Canada/ca-baseline/tree/master</a> (currently using fhir.ca.template, not the local template). Any ideas?</p>",
        "id": 273280005,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1645820594
    },
    {
        "content": "<p>If all else fails, you can point to the github location and that will work.  Make sure you say current if there's no release that FHIR knows about</p>",
        "id": 273280132,
        "sender_full_name": "David Pyke",
        "timestamp": 1645820657
    },
    {
        "content": "<p>there is a fhir.ca.template - <a href=\"https://fhir.org/templates/\">https://fhir.org/templates/</a></p>",
        "id": 273280402,
        "sender_full_name": "John Moehrke",
        "timestamp": 1645820817
    },
    {
        "content": "<p>but, did it get rebuilt since the great IG purge? If not, then it can cause build errors.</p>",
        "id": 273280451,
        "sender_full_name": "John Moehrke",
        "timestamp": 1645820843
    },
    {
        "content": "<p>I don't know what the issue is but the purge is irrelevant when it comes to released templates</p>",
        "id": 273280585,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1645820910
    },
    {
        "content": "<p>except that there's no evidence I have that the canadian template has ever been released, so of course there's no source for it on <a href=\"http://packages.fhir.org\">packages.fhir.org</a></p>",
        "id": 273281378,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1645821325
    },
    {
        "content": "<p>I'm going to guess that you built your ca template locally, and you'd fail too if you cleared your package cache before building</p>",
        "id": 273281422,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1645821350
    },
    {
        "content": "<p>I recall <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> asking you to do a release of the template, and you doing so.</p>",
        "id": 273281778,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1645821476
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191404\">John Moehrke</span> <a href=\"#narrow/stream/179252-IG-creation/topic/fhir.2Eca.2Etemplate/near/273280402\">said</a>:</p>\n<blockquote>\n<p>there is a fhir.ca.template - <a href=\"https://fhir.org/templates/\">https://fhir.org/templates/</a></p>\n</blockquote>\n<p>I've never seen this. Huh, learn something every day. And to answer your question, no, it hasn't been rebuilt since the purge, but you and Grahame seem to differ on the importance of that.</p>",
        "id": 273290836,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1645826717
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> , yes, you did publish it (or something that I'm not knowledgable enough to distinguish from publishing):</p>\n<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179252-IG-creation/topic/.E2.9C.94.20Unrecognized.20realm.20in.20id/near/262654542\">said</a>:</p>\n<blockquote>\n<p>I have to publish it. What's the github repo ID? And I need to have commit access to it (I will only use that for versioning new releases)<br>\n...<br>\nok done.</p>\n<p>should just automatically work now</p>\n</blockquote>\n<p>After clearing the fhir cache, ./temp, and ./template directories, I get the following when building using fhir.ca.template, although the output uses the correct template:</p>\n<div class=\"codehilite\"><pre><span></span><code>Package Cache: /Users/elliot/.fhir/packages                                      (00:00.0049)\nLoad Template from fhir.ca.template                                              (00:00.0644)\n2022-02-25 15:49:39.245 [main] INFO  o.h.f.u.n.FilesystemPackageCacheManager [FilesystemPackageCacheManager.java:232] Failed to determine latest version of package fhir.ca.template from server: http://packages.fhir.org\n2022-02-25 15:49:40.267 [main] INFO  o.h.f.u.npm.BasePackageCacheManager [BasePackageCacheManager.java:80] Failed to resolve package fhir.ca.template#0.1.0 from server: http://packages.fhir.org (Invalid HTTP response 404 from http://packages.fhir.org/fhir.ca.template/0.1.0 (Not Found) (content in /var/folders/wy/qyscnv3n0v76wp03lr9nvbsw0000gn/T/fhir-http-3.log))\nInstalling fhir.ca.template#0.1.0 to the package cache\n  Fetching:\n  Installing:  done.\n Load Template from fhir.base.template#0.2.2                                     (00:03.0006)\n2022-02-25 15:49:41.337 [main] INFO  o.h.f.u.npm.BasePackageCacheManager [BasePackageCacheManager.java:80] Failed to resolve package fhir.base.template#0.2.2 from server: http://packages.fhir.org (Invalid HTTP response 404 from http://packages.fhir.org/fhir.base.template/0.2.2 (Not Found) (content in /var/folders/wy/qyscnv3n0v76wp03lr9nvbsw0000gn/T/fhir-http-4.log))\nInstalling fhir.base.template#0.2.2 to the package cache\n  Fetching:.\n  Installing: . done.\n</code></pre></div>\n<p>Clearing the cache, and switching to the local template (which is based on fhir.ca.template#current), I get:</p>\n<div class=\"codehilite\"><pre><span></span><code>Load Template from ./cabaseline-template                                         (00:00.0666)\n Load Template from fhir.ca.template#current                                     (00:00.0730)\norg.hl7.fhir.exceptions.FHIRException: Unable to fetch: Invalid HTTP response 404 from https://build.fhir.org/ig/hl7/ig-template-ca/package.tgz (Not Found) (content in /var/folders/wy/qyscnv3n0v76wp03lr9nvbsw0000gn/T/fhir-http-2.log)\n        at org.hl7.fhir.utilities.npm.FilesystemPackageCacheManager.fetchFromUrlSpecific(FilesystemPackageCacheManager.java:523)\n        at org.hl7.fhir.utilities.npm.FilesystemPackageCacheManager.loadFromCIBuild(FilesystemPackageCacheManager.java:531)\n        at org.hl7.fhir.utilities.npm.FilesystemPackageCacheManager.loadPackage(FilesystemPackageCacheManager.java:503)\n        at org.hl7.fhir.igtools.templates.TemplateManager.loadPackage(TemplateManager.java:251)\n        at org.hl7.fhir.igtools.templates.TemplateManager.installTemplate(TemplateManager.java:93)\n        at org.hl7.fhir.igtools.templates.TemplateManager.installTemplate(TemplateManager.java:108)\n        at org.hl7.fhir.igtools.templates.TemplateManager.loadTemplate(TemplateManager.java:79)\n        at org.hl7.fhir.igtools.publisher.Publisher.initializeFromIg(Publisher.java:1831)\n        at org.hl7.fhir.igtools.publisher.Publisher.initialize(Publisher.java:1645)\n        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:794)\n        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:9099)\nCaused by: java.io.IOException: Invalid HTTP response 404 from https://build.fhir.org/ig/hl7/ig-template-ca/package.tgz (Not Found) (content in /var/folders/wy/qyscnv3n0v76wp03lr9nvbsw0000gn/T/fhir-http-2.log)\n        at org.hl7.fhir.utilities.SimpleHTTPClient$HTTPResult.checkThrowException(SimpleHTTPClient.java:75)\n        at org.hl7.fhir.utilities.npm.FilesystemPackageCacheManager.fetchFromUrlSpecific(FilesystemPackageCacheManager.java:517)\n        ... 10 more\nPublishing Content Failed: Error loading template fhir.ca.template#current: Unable to fetch: Invalid HTTP response 404 from https://build.fhir.org/ig/hl7/ig-template-ca/package.tgz (Not Found) (content in /var/folders/wy/qyscnv3n0v76wp03lr9nvbsw0000gn/T/fhir-http-2.log) (00:03.0182)\n</code></pre></div>\n<p>One more time, using the local template, and basing it on fhir.ca.template#0.1.0, I get the following, but the build appears to complete, and the local template is used:</p>\n<div class=\"codehilite\"><pre><span></span><code>Package Cache: /Users/elliot/.fhir/packages                                      (00:00.0056)\nLoad Template from ./cabaseline-template                                         (00:00.0705)\n Load Template from fhir.ca.template#0.1.0                                       (00:00.0765)\n2022-02-25 16:14:10.425 [main] INFO  o.h.f.u.npm.BasePackageCacheManager [BasePackageCacheManager.java:80] Failed to resolve package fhir.ca.template#0.1.0 from server: http://packages.fhir.org (Invalid HTTP response 404 from http://packages.fhir.org/fhir.ca.template/0.1.0 (Not Found) (content in /var/folders/wy/qyscnv3n0v76wp03lr9nvbsw0000gn/T/fhir-http-2.log))\nInstalling fhir.ca.template#0.1.0 to the package cache\n  Fetching:\n  Installing:  done.\n  Load Template from fhir.base.template#0.2.2                                    (00:02.0783)\n2022-02-25 16:14:12.107 [main] INFO  o.h.f.u.npm.BasePackageCacheManager [BasePackageCacheManager.java:80] Failed to resolve package fhir.base.template#0.2.2 from server: http://packages.fhir.org (Invalid HTTP response 404 from http://packages.fhir.org/fhir.base.template/0.2.2 (Not Found) (content in /var/folders/wy/qyscnv3n0v76wp03lr9nvbsw0000gn/T/fhir-http-3.log))\nInstalling fhir.base.template#0.2.2 to the package cache\n  Fetching:.\n  Installing: . done.\n</code></pre></div>\n<p>So, it looks like we can't use fhir.ca.template#current, but specifying 0.1.0 is fine.</p>",
        "id": 273303372,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1645834831
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191380\">@Elliot Silver</span> how do I reproduce this?</p>",
        "id": 273570964,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1646091911
    },
    {
        "content": "<p>You should be able to grab <a href=\"https://github.com/HL7-Canada/ca-baseline/tree/master\">https://github.com/HL7-Canada/ca-baseline/tree/master</a> and play around with which template is specified in ig.ini and in the local template dependency.</p>",
        "id": 273585009,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1646103577
    },
    {
        "content": "<p>well, I rebuilt the ca template and it seems ok now</p>",
        "id": 273588695,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1646107633
    },
    {
        "content": "<p>Looks good from here now too. Did you see the errors before rebuilding?</p>",
        "id": 273588926,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1646107918
    },
    {
        "content": "<p>yes</p>",
        "id": 273589166,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1646108167
    },
    {
        "content": "<p>OK, good to know it wasn't something I was messing up locally. Thank you.</p>",
        "id": 273589179,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1646108202
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191380\">Elliot Silver</span> has marked this topic as resolved.</p>",
        "id": 273589201,
        "sender_full_name": "Notification Bot",
        "timestamp": 1646108235
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191380\">Elliot Silver</span> has marked this topic as unresolved.</p>",
        "id": 273589454,
        "sender_full_name": "Notification Bot",
        "timestamp": 1646108542
    },
    {
        "content": "<p>Weird -- looking at the template QA report, I see the build output is going to <a href=\"http://build.fhir.org/ig/hl7/ig-template-ca/\">http://build.fhir.org/ig/hl7/ig-template-ca/</a>. All the other HL7 builds are going to <a href=\"http://build.fhir.org/ig/HL7/\">http://build.fhir.org/ig/HL7/</a> (Note the capitalization of HL7). And, included in the HL7 directory is an empty ig-template-ca directory. I don't know if this is relevant, but it does seem odd.</p>",
        "id": 273589581,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1646108731
    },
    {
        "content": "<p>templates are built differently. So I'm not surprised. I won't think about that unless there's a problem</p>",
        "id": 273589664,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1646108832
    },
    {
        "content": "<p>OK. Thanks again.</p>",
        "id": 273589677,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1646108864
    },
    {
        "content": "<p>Hello <span class=\"user-mention\" data-user-id=\"191380\">@Elliot Silver</span>  - Looking at your ca-baseline has been helpful. I want to create a template with our group's internal colors/logos/design, and probably more. I think your example should give me what I need. If you or anyone knows of other examples, please do tell!</p>",
        "id": 277295425,
        "sender_full_name": "Sheila Connelly",
        "timestamp": 1648739196
    },
    {
        "content": "<p>the documentation for customizing templates is at <a href=\"http://build.fhir.org/ig/FHIR/ig-guidance/\">http://build.fhir.org/ig/FHIR/ig-guidance/</a></p>",
        "id": 277296400,
        "sender_full_name": "John Moehrke",
        "timestamp": 1648739639
    },
    {
        "content": "<p>you can see there a couple of examples</p>",
        "id": 277296474,
        "sender_full_name": "John Moehrke",
        "timestamp": 1648739648
    },
    {
        "content": "<p>IHE also has our template at <a href=\"https://github.com/IHE/ihe-ig-template\">https://github.com/IHE/ihe-ig-template</a></p>",
        "id": 277296521,
        "sender_full_name": "John Moehrke",
        "timestamp": 1648739670
    },
    {
        "content": "<p>Thank you <span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span> - Yes, I did use the ig-guidance to change colors and make other changes. </p>\n<p>Now I am ready to make my \"template\" available to other IGs for our team. </p>\n<p>With IHE as an example, do the other IHE IGs somehow point to:  <a href=\"http://fhir.org/templates/ihe.fhir.template\">http://fhir.org/templates/ihe.fhir.template</a> in an ig.ini file or otherwise?</p>\n<p>Do you have an example of an IG basing its design/colors on your template? So I can see how it references the template?</p>",
        "id": 277300382,
        "sender_full_name": "Sheila Connelly",
        "timestamp": 1648741188
    },
    {
        "content": "<p>IHE -  I have Grahame publish the IHE template to the IG template registry <a href=\"https://fhir.org/templates/\">https://fhir.org/templates/</a>... thus, yes the IHE IGs simply use </p>\n<div class=\"codehilite\"><pre><span></span><code>template = ihe.fhir.template\n</code></pre></div>\n<p>Actually most of the IGs I can point at further refine that in that IG to eliminate the automatic header numbering, because some of the IHE IGs want to use pre-determined header numbering to fit within the IHE Technical Framework more broadly.  <a href=\"https://github.com/IHE/ITI.MHD\">https://github.com/IHE/ITI.MHD</a></p>\n<p>I don't have an example of using an external template that is not published on the template registry.</p>",
        "id": 277301325,
        "sender_full_name": "John Moehrke",
        "timestamp": 1648741585
    },
    {
        "content": "<p>Thank you. This is helpful.</p>",
        "id": 277302109,
        "sender_full_name": "Sheila Connelly",
        "timestamp": 1648741924
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191571\">@Sheila Connelly</span>, I can't take credit for the Canadian template. I just tweaked a couple of colo(u)rs that hadn't been overridden from the defaults, and within the CA Baseline helped with adding a feedback link in the footer.</p>\n<p>You don't need to get a template registered if you have the template locally (e.g. in your project, or in a directory beside your project). In that case you can say <code>template=./path/to/my/template</code>.</p>",
        "id": 277305925,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1648743476
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191571\">@Sheila Connelly</span> most IG templates are based on the base template. in Belgium, for example, there are local templates based on the Belgian base template, but those are just local templates as described in the guidance.</p>",
        "id": 277318867,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1648749938
    },
    {
        "content": "<p><a href=\"https://github.com/costateixeira/ig_templates/blob/master/README.md\">https://github.com/costateixeira/ig_templates/blob/master/README.md</a></p>",
        "id": 277318977,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1648749974
    },
    {
        "content": "<p>Thank you all!</p>",
        "id": 277338467,
        "sender_full_name": "Sheila Connelly",
        "timestamp": 1648760000
    }
]