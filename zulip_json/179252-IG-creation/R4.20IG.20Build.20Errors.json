[
    {
        "content": "<p>my diagnosticreport examples are failing in the latest ig-pub </p>\n<p>e.g..urinalysis json example passes $validate and even tried as xml example whichpasses r4 schema.</p>\n<div class=\"codehilite\"><pre><span></span>Stack Dump (for debugging):                                                      (00:01:14.0423sec)\njava.lang.Exception: Unable to determine type for  /Users/ehaas/Documents/FHIR/US-Core-R4/source/examples/urinalysis: com.google.gson.JsonArray cannot be cast to com.google.gson.JsonObject\n    at org.hl7.fhir.igtools.publisher.Publisher.loadAsElementModel(Publisher.java:2394)\n    at org.hl7.fhir.igtools.publisher.Publisher.load(Publisher.java:1778)\n    at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:582)\n    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:526)\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:4925)\nCaused by: java.lang.ClassCastException: com.google.gson.JsonArray cannot be cast to com.google.gson.JsonObject\n    at com.google.gson.JsonObject.getAsJsonObject(JsonObject.java:182)\n    at org.hl7.fhir.r4.formats.JsonParser.parseDiagnosticReportProperties(JsonParser.java:9539)\n    at org.hl7.fhir.r4.formats.JsonParser.parseDiagnosticReport(JsonParser.java:9516)\n    at org.hl7.fhir.r4.formats.JsonParser.parseResource(JsonParser.java:27504)\n    at org.hl7.fhir.r4.formats.JsonParserBase.parse(JsonParserBase.java:92)\n    at org.hl7.fhir.r4.formats.ParserBase.parse(ParserBase.java:58)\n    at org.hl7.fhir.r4.elementmodel.ObjectConverter.convert(ObjectConverter.java:90)\n    at org.hl7.fhir.igtools.publisher.Publisher.loadAsElementModel(Publisher.java:2387)\n    ... 4 more\nException in thread &quot;main&quot; java.lang.NullPointerException\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:4935)\nErics-Air-2:US-Core-R4 ehaas$\n</pre></div>\n\n\n<p>I know that I've recently updated category to 0..* but that is not the issue.</p>\n<p>Can see the examples from the last good build here... <a href=\"http://build.fhir.org/ig/HL7/US-Core-R4/\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/US-Core-R4/\">http://build.fhir.org/ig/HL7/US-Core-R4/</a></p>",
        "id": 154011901,
        "sender_full_name": "Eric Haas",
        "timestamp": 1540395278
    },
    {
        "content": "<p>I've seen this before.  I think it was fixed by wiping the temp and  output folders, but don't remember for sure...</p>",
        "id": 154012067,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1540439310
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> I am seeing this same error.  Locally I tried Lloyds suggestion of wiping temp and output, but still fails.  Also fails with the same error <a href=\"http://build.fhir.org/ig/HL7/genomics-reporting/build.log\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/genomics-reporting/build.log\">http://build.fhir.org/ig/HL7/genomics-reporting/build.log</a></p>",
        "id": 154012217,
        "sender_full_name": "Kevin Power",
        "timestamp": 1540486321
    },
    {
        "content": "<p>Ok.  This might be a substantive change to DiagnosticReport that requires <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> to update the code again :(</p>",
        "id": 154012220,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1540486676
    },
    {
        "content": "<p>For now, I just took out DiagnosticReport.category from our examples and it builds OK.  Not a great long term fix but OK for now.</p>",
        "id": 154012238,
        "sender_full_name": "Kevin Power",
        "timestamp": 1540492025
    },
    {
        "content": "<p>I have done the same ( removed the example for now) .. I have not tried a DR from the build however - in case my examples are incorrect.  FYI DR has several pending changes including  .context  0.1 --&gt; .encounter  0..*</p>",
        "id": 154012245,
        "sender_full_name": "Eric Haas",
        "timestamp": 1540492764
    },
    {
        "content": "<p>I think you meant context 0..* -&gt; encounter 0..1?  (Shouldn't be part of multiple encounters...)</p>",
        "id": 154012285,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1540499125
    },
    {
        "content": "<p>yes</p>",
        "id": 154012288,
        "sender_full_name": "Eric Haas",
        "timestamp": 1540499534
    },
    {
        "content": "<p>Also finding:</p>",
        "id": 154013398,
        "sender_full_name": "Eric Haas",
        "timestamp": 1540846879
    },
    {
        "content": "<p>10/29/2018 build notes:</p>\n<p>HealthCareService examples not working </p>\n<p>fixed example to pass latest R4 schema<br>\nupdated ig-publisher</p>\n<p>commented out <code>eligibility</code>  as workaround</p>\n<div class=\"codehilite\"><pre><span></span>Stack Dump (for debugging):                                                      (38.0855sec)\njava.lang.Exception: Unable to determine type for  /Users/ehaas/Documents/FHIR/VhDir/source/examples/healthcareservice-example-independencerehab1: com.google.gson.JsonArray cannot be cast to com.google.gson.JsonObject\n    at org.hl7.fhir.igtools.publisher.Publisher.loadAsElementModel(Publisher.java:2394)\n    at org.hl7.fhir.igtools.publisher.Publisher.load(Publisher.java:1778)\n    at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:582)\n    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:526)\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:4925)\nCaused by: java.lang.ClassCastException: com.google.gson.JsonArray cannot be cast to com.google.gson.JsonObject\n    at com.google.gson.JsonObject.getAsJsonObject(JsonObject.java:182)\n    at org.hl7.fhir.r4.formats.JsonParser.parseHealthcareServiceProperties(JsonParser.java:13100)\n    at org.hl7.fhir.r4.formats.JsonParser.parseHealthcareService(JsonParser.java:13025)\n    at org.hl7.fhir.r4.formats.JsonParser.parseResource(JsonParser.java:27544)\n    at org.hl7.fhir.r4.formats.JsonParserBase.parse(JsonParserBase.java:92)\n    at org.hl7.fhir.r4.formats.ParserBase.parse(ParserBase.java:58)\n    at org.hl7.fhir.r4.elementmodel.ObjectConverter.convert(ObjectConverter.java:90)\n    at org.hl7.fhir.igtools.publisher.Publisher.loadAsElementModel(Publisher.java:2387)\n    ... 4 more\nException in thread &quot;main&quot; java.lang.NullPointerException\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:4935)\n</pre></div>",
        "id": 154013399,
        "sender_full_name": "Eric Haas",
        "timestamp": 1540846882
    },
    {
        "content": "<p>Is that for the VhDir Eric?</p>",
        "id": 154013563,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1540887406
    },
    {
        "content": "<p>I would leave it a bit, as I'm about to put in the other core changes for it too.</p>",
        "id": 154013564,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1540887443
    },
    {
        "content": "<p>Ye, but it is not a big deal -  I have it up and running  updating with ballot comments and logged these build issues on GitHub so can keep track.</p>",
        "id": 154013643,
        "sender_full_name": "Eric Haas",
        "timestamp": 1540912373
    },
    {
        "content": "<p>I'm looking forward to getting that guide up and running in a few days once the dust clears from R4 core</p>",
        "id": 154013652,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1540912707
    },
    {
        "content": "<p>is this still a problem?</p>",
        "id": 154017035,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1541744001
    },
    {
        "content": "<p>I am still  getting errors with DiagnosticReport examples in R4.  The issue arrises in US-Core R4.  The example files are parked in the 'draft resources' folder.</p>",
        "id": 154017112,
        "sender_full_name": "Eric Haas",
        "timestamp": 1541766292
    }
]