[
    {
        "content": "<p>I get the errors like the following when defining DSTU2 ValueSets w/ inline code systems:</p>\n<blockquote>\n<p><strong>Path:</strong> shr-simple-InlineValueSetVS <br>\n<strong>Severity:</strong> error<br>\n<strong>Message:</strong> Error from server: Unable to provide support for code system <a href=\"http://simple.org/shr/simple/cs/InlineValueSetCS\" target=\"_blank\" title=\"http://simple.org/shr/simple/cs/InlineValueSetCS\">http://simple.org/shr/simple/cs/InlineValueSetCS</a></p>\n</blockquote>\n<p>This is an inline value set -- so it should be expanded using the inline definition (not the tx server).  Here is an example of the valueset definition that causes this error.  It's certainly possible that I am doing something wrong:</p>\n<div class=\"codehilite\"><pre><span></span>{\n  &quot;resourceType&quot;: &quot;ValueSet&quot;,\n  &quot;id&quot;: &quot;shr-simple-InlineValueSetVS&quot;,\n  &quot;text&quot;: {\n    &quot;status&quot;: &quot;generated&quot;,\n    &quot;div&quot;: &quot;&lt;div xmlns=\\&quot;http://www.w3.org/1999/xhtml\\&quot;&gt;\\n&lt;p&gt;&lt;b&gt;SIMPLE InlineValueSetVS ValueSet&lt;/b&gt;&lt;/p&gt;\\n&lt;p&gt;&lt;/p&gt;\\n&lt;/div&gt;&quot;\n  },\n  &quot;url&quot;: &quot;http://simple.org/shr/simple/vs/InlineValueSetVS&quot;,\n  &quot;identifier&quot;: {\n    &quot;system&quot;: &quot;http://simple.org&quot;,\n    &quot;value&quot;: &quot;shr.simple.InlineValueSetVS&quot;\n  },\n  &quot;name&quot;: &quot;SIMPLE InlineValueSetVS ValueSet&quot;,\n  &quot;status&quot;: &quot;draft&quot;,\n  &quot;publisher&quot;: &quot;Simple Publisher&quot;,\n  &quot;contact&quot;: [\n    {\n      &quot;telecom&quot;: [\n        {\n          &quot;system&quot;: &quot;other&quot;,\n          &quot;value&quot;: &quot;http://example.com&quot;\n        }\n      ]\n    }\n  ],\n  &quot;date&quot;: &quot;2018-11-02&quot;,\n  &quot;codeSystem&quot;: {\n    &quot;system&quot;: &quot;http://simple.org/shr/simple/cs/InlineValueSetCS&quot;,\n    &quot;caseSensitive&quot;: true,\n    &quot;concept&quot;: [\n      {\n        &quot;code&quot;: &quot;foo&quot;,\n        &quot;definition&quot;: &quot;Foo Something&quot;,\n        &quot;display&quot;: &quot;Foo Something&quot;\n      },\n      {\n        &quot;code&quot;: &quot;bar&quot;,\n        &quot;definition&quot;: &quot;Bar Something Else&quot;,\n        &quot;display&quot;: &quot;Bar Something Else&quot;\n      }\n    ]\n  }\n}\n</pre></div>\n\n\n<p>Any suggestions are appreciated...DSTU2 IG: Trouble Expanding Inline Value Sets</p>",
        "id": 154015338,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1541202969
    },
    {
        "content": "<p>maybe I'm having problem with the version conversion? standard question... how to reproduce?</p>",
        "id": 154017048,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1541745805
    },
    {
        "content": "<p>I'll try to get you something that reproduces it.</p>",
        "id": 154018098,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1542133443
    },
    {
        "content": "<p>It turns out that this is (somewhat) reproducible in the <code>tests/ig10</code> (DSTU2) IG in the main FHIR code base.  More specifically, this is the value set with the inline codesystem: <a href=\"https://github.com/HL7/fhir/blob/master/tests/ig10/resources/test-ig-vs.xml\" target=\"_blank\" title=\"https://github.com/HL7/fhir/blob/master/tests/ig10/resources/test-ig-vs.xml\">https://github.com/HL7/fhir/blob/master/tests/ig10/resources/test-ig-vs.xml</a></p>\n<p>When you run the publisher on this IG, the QA reports the following error:<br>\n<a href=\"/user_uploads/10155/YOPQS8vWOudNz-VQylSYvNmV/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/YOPQS8vWOudNz-VQylSYvNmV/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/YOPQS8vWOudNz-VQylSYvNmV/pasted_image.png\"></a></div><p>And if you look at the resulting documentation, you can see that it failed to render the codes:<br>\n<a href=\"/user_uploads/10155/gnpvcoFOylx5c98qT4lCM7Gz/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/gnpvcoFOylx5c98qT4lCM7Gz/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/gnpvcoFOylx5c98qT4lCM7Gz/pasted_image.png\"></a></div>",
        "id": 154019294,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1542405828
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> -- I assume you haven't had time to look at this.  Should I file an official issue for it in GForge?</p>",
        "id": 154025692,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1544817604
    },
    {
        "content": "<p>yes you should. I'll be working on IG tooling once R4 is done (a few hours now!)</p>",
        "id": 154025700,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1544818594
    },
    {
        "content": "<p>Woah!  Down to the final hours.  Nice!</p>",
        "id": 154025728,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1544823932
    },
    {
        "content": "<p>Sort of.  Final hours to the content being 'done'.  Internal approval processes and publication will take another couple of weeks.</p>",
        "id": 154025763,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1544834513
    },
    {
        "content": "<p>GForge: <a href=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19812\" target=\"_blank\" title=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19812\">https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19812</a></p>",
        "id": 154026944,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1545409405
    },
    {
        "content": "<p>I've just noticed that a fix was applied for this issue (thanks!) -- but unfortunately, it does not fully address the problem. While we no longer get the access violation, there is still an error reported in the qa.html:<br>\n<a href=\"/user_uploads/10155/XuIkX_Di_u8vEbKx6kdjuWTg/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/XuIkX_Di_u8vEbKx6kdjuWTg/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/XuIkX_Di_u8vEbKx6kdjuWTg/pasted_image.png\"></a></div><p>In addition, the generated page for the value set has an error in the expansion section:<br>\n<a href=\"/user_uploads/10155/dmTK-2aYuiF6h27xbwh_XQvI/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/dmTK-2aYuiF6h27xbwh_XQvI/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/dmTK-2aYuiF6h27xbwh_XQvI/pasted_image.png\"></a></div><p>Since this is an inline-defined code system within the value set, it seems it should not be going to the terminology server to resolve it.  The definition of the code system (and full listing of the codes) is within the value set itself.</p>\n<p>I've also updated the GForge issue with these comments (but no screenshots since it doesn't support it).</p>",
        "id": 162374206,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1554239101
    },
    {
        "content": "<p>I'll have a look</p>",
        "id": 162374676,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1554239444
    }
]