[
    {
        "content": "<p>We are getting publication errors on an example bundle in mCODE that appear to trace back to a warning message from invariant in USCore.   <br>\nSee the <a href=\"http://build.fhir.org/ig/HL7/fhir-mCODE-ig/branches/Martin101821Corrections/qa.html#_scratch_ig-build-temp-E3VX5R_repo_fsh-generated_resources_Bundle-mcode-patient-bundle-jenny-m\">qa report</a> from a branch.</p>\n<p>The error is:<br>\n<a href=\"/user_uploads/10155/nlFFdGFNt-t8xDbN_Nv0rCWM/image.png\">image.png</a> </p>\n<p>USCore Observation lab has in invariant:</p>\n<p><strong>us-core-4</strong> Observation.value[x] <strong>SHOULD</strong> use Snomed CT for coded Results<br>\n: valueCodeableConcept.coding.system.empty() or valueCodeableConcept.coding.system = '<a href=\"http://snomed.info/sct\">http://snomed.info/sct</a>'</p>\n<p>The instance <a href=\"http://build.fhir.org/ig/HL7/fhir-mCODE-ig/branches/Martin101821Corrections/Bundle-mcode-patient-bundle-jenny-m.html\">Bundle-mcode-patient-bundle-jenny-m</a> includes a <a href=\"http://\">cancer-genomic-variant-jenny-m</a> that does not satisfy the invariant, since the <a href=\"http://build.fhir.org/ig/HL7/fhir-mCODE-ig/branches/Martin101821Corrections/StructureDefinition-mcode-cancer-genomic-variant.html\">Cancer Genomic Variant</a> profile uses a LOINC code for Observation.value.   The validator does <strong>not</strong> complain about the example instance, but <strong>does complain</strong> about its inclusion in the bundle, which is odd.</p>\n<p>Since the invariant is a SHOULD (warning), this seems spurious.</p>\n<p>Three questions (<span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> , <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> )<br>\n   1) do you agree that this is a spurious error<br>\n  2) if so, can it be addressed?<br>\n   3) or alternatively, can we get dispensation to publish despite this \"error\"</p>\n<p>Thx</p>",
        "id": 258222208,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1634659460
    },
    {
        "content": "<p>\"Error parsing\" suggests something weird is going on - which is probably not your fault.  <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> ?</p>",
        "id": 258244487,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1634666650
    },
    {
        "content": "<p>us-core-4 is a best practice warning and not an error</p>",
        "id": 258249361,
        "sender_full_name": "Eric Haas",
        "timestamp": 1634668460
    },
    {
        "content": "<p>It suggests something is going wrong with the way the warning's being conveyed through.</p>",
        "id": 258251668,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1634669388
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> Since there are no errors on the <a href=\"http://build.fhir.org/ig/HL7/fhir-mCODE-ig/branches/Martin101821Corrections/qa.html#_scratch_ig-build-temp-E3VX5R_repo_fsh-generated_resources_StructureDefinition-mcode-cancer-genomic-variant\">instance</a> being included in the bundle, but there is an error on the bundle relating to this instance, I would conclude that validation is being done differently -- more stringently on the bundle.</p>\n<p>In fact, the QA report indicates that all of my instances are being validated the same way, but is this correct?<br>\nStructureDefinition: Validated against fhir.StructureDefinition</p>",
        "id": 258259647,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1634672626
    },
    {
        "content": "<p>this is on my todo list, but discriminators can turn warnings into errors</p>",
        "id": 258262186,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1634673673
    },
    {
        "content": "<p>We will forge ahead....depending on the length of your todo list and the speed of our punch list closeout, we may return with a request for special dispensation for this error at publication time.  As always, thanks for your responsiveness and help!</p>",
        "id": 258276099,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1634679265
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"215604\">@Saul Kravitz</span> how do I reproduce? Just build mcode?</p>",
        "id": 258413192,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1634752398
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> yes.</p>",
        "id": 258543853,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1634822507
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  I think (or at least hope) that these are at the root of all of my bundle issues.<br>\nAs far as I can tell, all of the codes are valid.</p>\n<p>Terminology_PassThrough_TX_Message<br>\nfsh-generated/resources/Bundle-mcode-patient-bundle-jenny-m.json    Error parsing response message: This does not appear to be a FHIR resource (wrong namespace '') (@ /) for 'http://loinc.org#LA9633-4'<br>\nfsh-generated/resources/Bundle-mcode-patient-bundle-jenny-m.json    Error parsing response message: This does not appear to be a FHIR resource (wrong namespace '') (@ /) for '<a href=\"http://snomed.info/sct#897275008\">http://snomed.info/sct#897275008</a>'<br>\nfsh-generated/resources/Bundle-mcode-patient-bundle-jenny-m.json    Error parsing response message: This does not appear to be a FHIR resource (wrong namespace '') (@ /) for '<a href=\"http://snomed.info/sct#897275008\">http://snomed.info/sct#897275008</a>'<br>\nfsh-generated/resources/Bundle-mcode-patient-bundle-jenny-m.json    Error parsing response message: This does not appear to be a FHIR resource (wrong namespace '') (@ /) for '<a href=\"http://snomed.info/sct#897275008\">http://snomed.info/sct#897275008</a>'<br>\nfsh-generated/resources/Bundle-mcode-patient-bundle-jenny-m.json    Error parsing response message: This does not appear to be a FHIR resource (wrong namespace '') (@ /) for '<a href=\"http://snomed.info/sct#897275008\">http://snomed.info/sct#897275008</a>'<br>\nfsh-generated/resources/Bundle-mcode-patient-bundle-jenny-m.json    Error parsing response message: This does not appear to be a FHIR resource (wrong namespace '') (@ /) for 'http://loinc.org#LA9622-7'<br>\nfsh-generated/resources/Bundle-mcode-patient-bundle-jenny-m.json    Error parsing response message: This does not appear to be a FHIR resource (wrong namespace '') (@ /) for 'http://loinc.org#29308-4'<br>\nfsh-generated/resources/Observation-karnofsky-performance-status-normal-activity.json   Error parsing response message: This does not appear to be a FHIR resource (wrong namespace '') (@ /) for 'http://loinc.org#LA29176-7'<br>\nfsh-generated/resources/Observation-us-core-observation-lab-tumor-dcis-jenny-m.json Error parsing response message: This does not appear to be a FHIR resource (wrong namespace '') (@ /) for 'http://loinc.org#29308-4'</p>",
        "id": 258613641,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1634848785
    },
    {
        "content": "<p>how did you get these?</p>",
        "id": 258615232,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1634849484
    },
    {
        "content": "<p>Pulled them out of the QA report for the build of the master branch, as they are listed at the end.<br>\nAll of the SNOMED and LOINC codes appear valid.   For the entries in the bundle that fail, they all of such error messages sprinkled in.<br>\nThe weirdest one is on entry[4] of the bundle.  If you click on show reasoning, the error is about entry[3] of the bundle...<br>\n<a href=\"/user_uploads/10155/KP32C01aZtUsKGh7ldk134S8/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/KP32C01aZtUsKGh7ldk134S8/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/KP32C01aZtUsKGh7ldk134S8/image.png\"></a></div>",
        "id": 258616107,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1634849848
    },
    {
        "content": "<p>mcode builds cleanly for me now</p>",
        "id": 259169860,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635286637
    }
]