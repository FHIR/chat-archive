[
    {
        "content": "<p>I have added some bundle profiles and examples to my MHD IG.. and now get an NPE</p>\n<div class=\"codehilite\"><pre><span></span><code>Stack Dump (for debugging):                                                      (01:02.0184)\njava.lang.NullPointerException\n    at org.hl7.fhir.igtools.publisher.ValidationServices.fetch(ValidationServices.java:142)\n    at org.hl7.fhir.validation.instance.InstanceValidator.checkReference(InstanceValidator.java:2556)\n    at org.hl7.fhir.validation.instance.InstanceValidator.checkChildByDefinition(InstanceValidator.java:4428)\n    at org.hl7.fhir.validation.instance.InstanceValidator.checkChild(InstanceValidator.java:4293)\n    at org.hl7.fhir.validation.instance.InstanceValidator.validateElement(InstanceValidator.java:4245)\n    at org.hl7.fhir.validation.instance.InstanceValidator.startInner(InstanceValidator.java:3979)\n    at org.hl7.fhir.validation.instance.InstanceValidator.start(InstanceValidator.java:3847)\n    at org.hl7.fhir.validation.instance.InstanceValidator.validateResource(InstanceValidator.java:5013)\n    at org.hl7.fhir.validation.instance.InstanceValidator.validateContains(InstanceValidator.java:4138)\n    at org.hl7.fhir.validation.instance.InstanceValidator.checkChildByDefinition(InstanceValidator.java:4442)\n    at org.hl7.fhir.validation.instance.InstanceValidator.checkChild(InstanceValidator.java:4293)\n    at org.hl7.fhir.validation.instance.InstanceValidator.validateElement(InstanceValidator.java:4245)\n    at org.hl7.fhir.validation.instance.InstanceValidator.checkChildByDefinition(InstanceValidator.java:4459)\n    at org.hl7.fhir.validation.instance.InstanceValidator.checkChild(InstanceValidator.java:4293)\n    at org.hl7.fhir.validation.instance.InstanceValidator.validateElement(InstanceValidator.java:4245)\n    at org.hl7.fhir.validation.instance.InstanceValidator.startInner(InstanceValidator.java:3979)\n    at org.hl7.fhir.validation.instance.InstanceValidator.start(InstanceValidator.java:3847)\n    at org.hl7.fhir.validation.instance.InstanceValidator.validateResource(InstanceValidator.java:5013)\n    at org.hl7.fhir.validation.instance.InstanceValidator.validate(InstanceValidator.java:702)\n    at org.hl7.fhir.validation.instance.InstanceValidator.validate(InstanceValidator.java:675)\n    at org.hl7.fhir.igtools.publisher.Publisher.validate(Publisher.java:4872)\n    at org.hl7.fhir.igtools.publisher.Publisher.validate(Publisher.java:4741)\n    at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:880)\n    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:732)\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:8414)\n</code></pre></div>",
        "id": 222525574,
        "sender_full_name": "John Moehrke",
        "timestamp": 1610505632
    },
    {
        "content": "<p>build log <a href=\"http://build.fhir.org/ig/IHE/ITI.MHD/branches/master/failure/build.log\">http://build.fhir.org/ig/IHE/ITI.MHD/branches/master/failure/build.log</a></p>",
        "id": 222525577,
        "sender_full_name": "John Moehrke",
        "timestamp": 1610505635
    },
    {
        "content": "<p>github repo <a href=\"https://github.com/IHE/ITI.MHD\">https://github.com/IHE/ITI.MHD</a></p>",
        "id": 222525609,
        "sender_full_name": "John Moehrke",
        "timestamp": 1610505668
    },
    {
        "content": "<p>I can't reproduce this</p>",
        "id": 222684604,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1610607052
    },
    {
        "content": "<p>I think I got over that, but still get late IG build NPEs. Example from current build (see log <a href=\"https://build.fhir.org/ig/IHE/ITI.MHD/branches/master/build.log\">https://build.fhir.org/ig/IHE/ITI.MHD/branches/master/build.log</a>)</p>\n<div class=\"codehilite\"><pre><span></span><code>onGenerate:\nException generating resource /scratch/ig-build-temp-I2BH8Y/repo/fsh-generated/resources/List-ex-b-minimalSubmissionSet::List/ex-b-minimalSubmissionSet: null (01:51.0472)\njava.lang.NullPointerException\n    at java.base/java.lang.String.replace(String.java:2143)\n    at org.hl7.fhir.igtools.publisher.Publisher.genListView(Publisher.java:6907)\n    at org.hl7.fhir.igtools.publisher.Publisher.genListViews(Publisher.java:6892)\n    at org.hl7.fhir.igtools.publisher.Publisher.generateOutputsList(Publisher.java:6848)\n    at org.hl7.fhir.igtools.publisher.Publisher.generateResourceHtml(Publisher.java:6702)\n    at org.hl7.fhir.igtools.publisher.Publisher.generateHtmlOutputs(Publisher.java:6653)\n    at org.hl7.fhir.igtools.publisher.Publisher.generate(Publisher.java:4906)\n    at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:888)\n    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:732)\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:8414)\n   java.base/java.lang.String.replace(String.java:2143)                          (01:51.0473)\n   org.hl7.fhir.igtools.publisher.Publisher.genListView(Publisher.java:6907)     (01:51.0474)\n   org.hl7.fhir.igtools.publisher.Publisher.genListViews(Publisher.java:6892)    (01:51.0474)\n   org.hl7.fhir.igtools.publisher.Publisher.generateOutputsList(Publisher.java:6848) (01:51.0474)\n   org.hl7.fhir.igtools.publisher.Publisher.generateResourceHtml(Publisher.java:6702) (01:51.0474)\n   org.hl7.fhir.igtools.publisher.Publisher.generateHtmlOutputs(Publisher.java:6653) (01:51.0474)\n   org.hl7.fhir.igtools.publisher.Publisher.generate(Publisher.java:4906)        (01:51.0474)\n   org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:888)         (01:51.0474)\n   org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:732)          (01:51.0474)\n   org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:8414)            (01:51.0474)\nGenerating Summary Outputs                                                       (01:59.0687)\n</code></pre></div>",
        "id": 222714408,
        "sender_full_name": "John Moehrke",
        "timestamp": 1610629965
    },
    {
        "content": "<p>I think Mr Moehrke (<span class=\"user-mention\" data-user-id=\"237342\">@ryan moehrke</span> ) may have determined that this is caused by my profile. When I tried profile in sushi a bundle with slices by #profile, it entered the wrong thing where I specified a core resource (Bundle and Patient)...</p>",
        "id": 222722372,
        "sender_full_name": "John Moehrke",
        "timestamp": 1610633950
    },
    {
        "content": "<p>It's a good thing the Moehrke team was working together on this.</p>",
        "id": 222725066,
        "sender_full_name": "David Pyke",
        "timestamp": 1610635035
    },
    {
        "content": "<p>so my thoughts on solution are not working... My thought is that I will have one profile restrict the \"type\" of resources, and a second layer profile that restricts the \"profile\"... That fails in the IG builder due to conflicting constraints????</p>\n<div class=\"codehilite\"><pre><span></span><code>Caused by: org.hl7.fhir.exceptions.DefinitionException: Slicing rules on differential (profile:resource (/open) &quot;Slicing based on the profile conformance of the entry&quot;) do not match those on base (type:resource (/open) &quot;Slicing based on the resource type of the entry&quot;) - disciminator @ Bundle.entry (http://ihe.net/fhir/ihe.mhd.fhir/StructureDefinition/IHE.MHD.Dummy.ProvideBundle)\n</code></pre></div>",
        "id": 222736017,
        "sender_full_name": "John Moehrke",
        "timestamp": 1610639375
    },
    {
        "content": "<p>so, I need to either be able to profile by #profile including FHIR core resources.... or be able to cascade profiles...</p>",
        "id": 222736142,
        "sender_full_name": "John Moehrke",
        "timestamp": 1610639409
    },
    {
        "content": "<p><a href=\"https://github.com/IHE/ITI.MHD\">https://github.com/IHE/ITI.MHD</a></p>\n<p>specifically this FSH file<br>\n<a href=\"https://github.com/IHE/ITI.MHD/blob/master/input/fsh/provideBundle.fsh\">https://github.com/IHE/ITI.MHD/blob/master/input/fsh/provideBundle.fsh</a></p>\n<p>which sushi does create this structureDefinition that the build is failing on<br>\n<a href=\"http://build.fhir.org/ig/IHE/ITI.MHD/branches/master/failure/fsh-generated/resources/StructureDefinition-IHE.MHD.Comprehensive.ProvideBundle.json\">http://build.fhir.org/ig/IHE/ITI.MHD/branches/master/failure/fsh-generated/resources/StructureDefinition-IHE.MHD.Comprehensive.ProvideBundle.json</a></p>",
        "id": 222736836,
        "sender_full_name": "John Moehrke",
        "timestamp": 1610639686
    },
    {
        "content": "<p>It appears Moehrke-Research has come thru with a workaround... in my profile slice using #profile. I just explicitly point at the FHIR structureDefinition for the resources I mean...</p>\n<div class=\"codehilite\"><pre><span></span><code>* entry[Documents].resource only http://hl7.org/fhir/StructureDefinition/Binary\n</code></pre></div>",
        "id": 222743854,
        "sender_full_name": "John Moehrke",
        "timestamp": 1610642321
    }
]