[
    {
        "content": "<p>The next version of the IG Publisher will add a new feature: automatic comparison with previous versions of the specification. By default, the IG publisher will automatically compare with the last published version.</p>",
        "id": 204970507,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1595627404
    },
    {
        "content": "<p>the first thing to note is that the QA checks will change. Here's the QA  check for davinci-deqm:</p>",
        "id": 204970539,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1595627434
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/cMyI7r2MZf37FMIVclWHlKNH/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/cMyI7r2MZf37FMIVclWHlKNH/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/cMyI7r2MZf37FMIVclWHlKNH/image.png\"></a></div>",
        "id": 204970554,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1595627453
    },
    {
        "content": "<p>ignore the version check on the validator-  that's running my local dev version, so it's all wrong.</p>",
        "id": 204970578,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1595627477
    },
    {
        "content": "<p>note the dependency analysis. This will matter in the future for FMG. So make sure your ducks are in a row on that one</p>",
        "id": 204970604,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1595627509
    },
    {
        "content": "<p>A typical comparison will look like this:</p>",
        "id": 204970667,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1595627546
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/kKL-MGOIaxGhDBzJZadAgDL7/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/kKL-MGOIaxGhDBzJZadAgDL7/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/kKL-MGOIaxGhDBzJZadAgDL7/image.png\"></a></div>",
        "id": 204971410,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1595628241
    },
    {
        "content": "<p>And a typical profile comparison:</p>",
        "id": 204971488,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1595628278
    },
    {
        "content": "<p>Can/should the template have a tab for profiles and other artifacts that shows the comparison?</p>",
        "id": 204971799,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1595628550
    },
    {
        "content": "<p>certainly not yet while we shake the comparison down. I've put a lot of work into it at ONC request but this is start of alpha testing. Maybe once it's stable and proven, and we know how it impacts implementers, we can talk about what that would look like. One complication is what I'm about to explain:</p>",
        "id": 204971962,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1595628677
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/nOUpT6wJ0CvNg68yxmxrdy3m/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/nOUpT6wJ0CvNg68yxmxrdy3m/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/nOUpT6wJ0CvNg68yxmxrdy3m/image.png\"></a></div>",
        "id": 204972051,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1595628734
    },
    {
        "content": "<p>and</p>",
        "id": 204972055,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1595628736
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/9zSabGfRYe236UXIZnm3mpY0/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/9zSabGfRYe236UXIZnm3mpY0/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/9zSabGfRYe236UXIZnm3mpY0/image.png\"></a></div>",
        "id": 204972079,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1595628761
    },
    {
        "content": "<p>how to manage this:</p>\n<ul>\n<li>if you do nothing, the IG publisher will automatically do a comparison with the last pulished version (what ever it's status)</li>\n<li>you can configure this by putting a parameter \"<code>version-comparison</code>\" in your ImplementationGuide resource. </li>\n<li>if this has the value <code>{last}</code>,  that means that last published version (that's the default)</li>\n<li>if this has the value <code>{current}</code>, that means that last published version that is marked as the current version in {canonical}/package-list.json</li>\n<li>if this has the value <code>n/a</code>, the no version comparison will be performed</li>\n<li>otherwise, the value can be any published version e.g. <code>1.0.0</code></li>\n</ul>",
        "id": 204972338,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1595628994
    },
    {
        "content": "<p>this parameter can be present more than once,  so that you get more than one comparison</p>",
        "id": 204972363,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1595629022
    },
    {
        "content": "<p>note to editors: like all other parts of the infrastructure, this uses the value set caching infrastructure. The first time a comparison is run, it may take some time, but after that, the comparison is fairly quick</p>",
        "id": 204972405,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1595629071
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> what might be useful for implementers is the dependency analysis. but for now, that's an artifact of the qa system, and there's no way to get it into a template</p>",
        "id": 204972946,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1595629584
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179252-IG-creation/topic/Comparison.20with.20previous.20versions/near/204972338\">said</a>:</p>\n<blockquote>\n<ul>\n<li>if this has the value <code>{current}</code>, that means that last published version that is marked as the current version in {canonical}/package-list.json</li>\n</ul>\n</blockquote>\n<p>we have now to different  \"current\" meanings depending on the context, is this correct?</p>\n<ol>\n<li>a dependency/reference to an ig with #current is <a href=\"https://confluence.hl7.org/pages/viewpage.action?pageId=35718627#IGPublisherDocumentation-DependencyList\">refering to latest version of the IG as built by the IG auto-publisher (see above) - usually this is updated when a commit is pushed to github</a> (master???)</li>\n<li>current for comparision as mentioned above which is the published ig marked as current</li>\n</ol>",
        "id": 205769716,
        "sender_full_name": "Oliver Egger",
        "timestamp": 1596442750
    },
    {
        "content": "<p>yes that's right 2 - 2 different meanings, but in very different contexts. Actually, we already had this meaning for current in package.json</p>",
        "id": 205786511,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1596456907
    },
    {
        "content": "<p>I think that I'm getting a null reference exception on this feature, because the previously published version of the IG I'm working on is based on an interim snapshot (v3.5.0) of FHIR and the version resolution code doesn't seem to like that version. The call on this line: <a href=\"https://github.com/HL7/fhir-ig-publisher/blob/master/org.hl7.fhir.publisher.core/src/main/java/org/hl7/fhir/igtools/publisher/PreviousVersionComparator.java#L210\">https://github.com/HL7/fhir-ig-publisher/blob/master/org.hl7.fhir.publisher.core/src/main/java/org/hl7/fhir/igtools/publisher/PreviousVersionComparator.java#L210</a> is returning a null id for the <code>VersionUtilities.packageForVersion</code> call.</p>",
        "id": 205994223,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1596611480
    },
    {
        "content": "<p>So I tried disabling the version checking with the <code>version-comparison</code> parameter, but no joy, it still fails on that line.</p>",
        "id": 205994234,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1596611506
    },
    {
        "content": "<p>This is the PDDI-CDS IG: <a href=\"https://github.com/HL7/PDDI-CDS\">https://github.com/HL7/PDDI-CDS</a></p>",
        "id": 205994417,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1596611756
    },
    {
        "content": "<p>And I just committed the txcache so it shouldn't take an hour to get to that error.</p>",
        "id": 205994500,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1596611835
    },
    {
        "content": "<p>ok fixed. Takes  5min for me - still not enough cached, but I'm not sure why and don't have time to investigate</p>",
        "id": 206075326,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1596660063
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span> I do see some invalid UCUM codes...</p>",
        "id": 206078540,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1596661703
    },
    {
        "content": "<p>Yes, team is fixing those along with the other errors. Thanks Grahame!</p>",
        "id": 206078589,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1596661751
    },
    {
        "content": "<p>also, the template doesn't meet requirements</p>",
        "id": 206079463,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1596662168
    },
    {
        "content": "<p>also, this: downloads.html  error   The html source references validator.pack which is deprecated. Change the IG to describe the use of the package system instead</p>",
        "id": 206079836,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1596662418
    },
    {
        "content": "<p>Thank you Grahame, Bryn, and all for your help!</p>",
        "id": 206152230,
        "sender_full_name": "Rich Boyce",
        "timestamp": 1596725810
    },
    {
        "content": "<p>I posted something on the Implementers stream that should have been here.  As I said there, <strong>the comparison feature is amazingly useful</strong>. Kudos to <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>.  But at the same time, I'm noticing some limitations in the current version. It doesn't seem to pick up cardinality changes, and it counts some things as breaking changes that really aren't (such as upping the version number). I will make Git issues for them.</p>",
        "id": 215193652,
        "sender_full_name": "Mark Kramer",
        "timestamp": 1604153676
    },
    {
        "content": "<p>ok thanks. I'll look at them</p>",
        "id": 215375026,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1604349386
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179252-IG-creation/topic/Comparison.20with.20previous.20versions/near/206079836\">said</a>:</p>\n<blockquote>\n<p>also, this: downloads.html  error   The html source references validator.pack which is deprecated. Change the IG to describe the use of the package system instead</p>\n</blockquote>\n<p>I am getting that error. How do I fix it?</p>",
        "id": 224018788,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1611655960
    },
    {
        "content": "<p>Update the text of your IG to no longer refer to validator.pack.  Point to the .tgz file instead.</p>",
        "id": 224047224,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1611671767
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  is it possible to use this to compare the latest US Core with Argonaut STU2?</p>",
        "id": 268329065,
        "sender_full_name": "Eric Haas",
        "timestamp": 1642466271
    },
    {
        "content": "<p>not the automatic one, no. you'll have to do it manually for that</p>",
        "id": 268329780,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1642467027
    },
    {
        "content": "<p>Is there a tool to do that ?</p>",
        "id": 268330009,
        "sender_full_name": "Eric Haas",
        "timestamp": 1642467244
    },
    {
        "content": "<p>I looked at the validator to compare profiles, but that seems to produce a different output</p>",
        "id": 268330143,
        "sender_full_name": "Eric Haas",
        "timestamp": 1642467405
    },
    {
        "content": "<p>Does anyone think a CSV (or Excel) version of these would be useful  for download and offline processing?</p>",
        "id": 268331919,
        "sender_full_name": "Eric Haas",
        "timestamp": 1642469109
    },
    {
        "content": "<p>it's the same code</p>",
        "id": 268332603,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1642469751
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179252-IG-creation/topic/Comparison.20with.20previous.20versions/near/268332603\">said</a>:</p>\n<blockquote>\n<p>it's the same code</p>\n</blockquote>\n<p>... to compare US Core with Argonaut?  Great!   it is documented somewheres?</p>",
        "id": 268334385,
        "sender_full_name": "Eric Haas",
        "timestamp": 1642471361
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> I presented to FHIR-I today on a custom tool we made to produce the Excel data dictionary for mCODE. One of the nice side-effects of this was a way to do an element-level diff of two arbitrary IG versions. If the differential at the bottom of <a href=\"http://build.fhir.org/ig/HL7/fhir-mCODE-ig/dictionary.html\">http://build.fhir.org/ig/HL7/fhir-mCODE-ig/dictionary.html</a> looks helpful, let me know â€” we will be open sourcing the code that does this soon</p>",
        "id": 268456607,
        "sender_full_name": "Max Masnick",
        "timestamp": 1642540465
    },
    {
        "content": "<p>Thanks, <span class=\"user-mention\" data-user-id=\"322501\">@Max Masnick</span>  -  I would like to use this,  Is it able to compare US Core to Argo DSTU2 i.e is across IGs ( different base urls ) and will it be available before June?</p>",
        "id": 268471089,
        "sender_full_name": "Eric Haas",
        "timestamp": 1642548247
    },
    {
        "content": "<p>It is able to compare across different IGs, but you'd need to provide a manual mapping of profiles between the IGs -- it provides the element-level comparison profile by profile.</p>\n<p>It should be open sourced in the coming weeks...not sure exactly how long but certainly before June.</p>",
        "id": 268477889,
        "sender_full_name": "Max Masnick",
        "timestamp": 1642553233
    },
    {
        "content": "<p>How much coding will I need to do ( hoping is a npm or something)</p>",
        "id": 268489525,
        "sender_full_name": "Eric Haas",
        "timestamp": 1642564429
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"322501\">Max Masnick</span> <a href=\"#narrow/stream/179252-IG-creation/topic/Comparison.20with.20previous.20versions/near/268477889\">said</a>:</p>\n<blockquote>\n<p>It is able to compare across different IGs, but you'd need to provide a manual mapping of profiles between the IGs -- it provides the element-level comparison profile by profile.</p>\n<p>It should be open sourced in the coming weeks...not sure exactly how long but certainly before June.</p>\n</blockquote>\n<p>Hi, did you open source the code for this.  It looks like it would be very useful for some work I am doing comparing various profiles.  Thanks!</p>",
        "id": 274050518,
        "sender_full_name": "Declan Kieran",
        "timestamp": 1646346873
    },
    {
        "content": "<p>have you tried using the validator for this?</p>",
        "id": 274058277,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1646351420
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179252-IG-creation/topic/Comparison.20with.20previous.20versions/near/274058277\">said</a>:</p>\n<blockquote>\n<p>have you tried using the validator for this?</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> </p>\n<p>I just came across that ability after I posted this.  I did get it working for profiles of the same version and it works really well.  It mentions that it can compare across versions, but when I tried profiles with different versions, 3.0 and 4.0 in this case, depending on which version is set, it doesn't find the other one, saying it can't find right or left.  Should it support this?  Thanks.</p>",
        "id": 274096638,
        "sender_full_name": "Declan Kieran",
        "timestamp": 1646383240
    },
    {
        "content": "<p>I should also add that I tried removing the version parameter when trying different version profiles, but it didn't seem to like that</p>",
        "id": 274099906,
        "sender_full_name": "Declan Kieran",
        "timestamp": 1646385020
    },
    {
        "content": "<p>In theory, if your profile references are version-specific it should work, but I don't know that it's been well-exercised.</p>",
        "id": 274137352,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1646404702
    },
    {
        "content": "<p>it should work. what is your parameters? <span class=\"user-mention\" data-user-id=\"456074\">@Declan Kieran</span></p>",
        "id": 274475893,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1646697008
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179252-IG-creation/topic/Comparison.20with.20previous.20versions/near/274475893\">said</a>:</p>\n<blockquote>\n<p>it should work. what is your parameters? <span class=\"user-mention silent\" data-user-id=\"456074\">Declan Kieran</span></p>\n</blockquote>\n<p>It does seem like an issue with the parameters.  </p>\n<p>It will generate a comparison when the two profiles using this invocation</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>java -jar validator_cli.jar -compare -dest compare_folder -version <span class=\"m\">3</span>.0 -ig CareConnect-AllergyIntolerance-1.json -ig CareConnect-GPC-AllergyIntolerance-1.json -left https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-AllergyIntolerance-1 -right https://fhir.nhs.uk/STU3/StructureDefinition/CareConnect-GPC-AllergyIntolerance-1\n</code></pre></div>\n<p>I then tried it with an STU3 profile and an R4 profile, just removing the version parameter like this</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>java -jar validator_cli.jar -compare -dest compare_folder_r4 -ig CareConnect-AllergyIntolerance-1.json -ig UKCoreAllergyIntolerance-withsnapshot.json -left https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-AllergyIntolerance-1 -right https://fhir.hl7.org.uk/StructureDefinition/UKCore-AllergyIntolerance\n</code></pre></div>\n<p>and it does seem like it doesn't like to order of the parameters, I've also tried rearranging them to no avail.</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>...\n  Params: -compare -dest cc-ukc-alg-com -ig CareConnect-AllergyIntolerance-1.json -ig UKCoreAllergyIntolerance-withsnapshot.json -left https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-AllergyIntolerance-1 -right https://fhir.hl7.org.uk/StructureDefinition/UKCore-AllergyIntolerance\nScanning <span class=\"k\">for</span> versions <span class=\"o\">(</span>no -version parameter<span class=\"o\">)</span>:\n   ..Detect format <span class=\"k\">for</span> CareConnect-AllergyIntolerance-1.json\n   ..Detect format <span class=\"k\">for</span> UKCoreAllergyIntolerance-withsnapshot.json\n\n********************\n* The file name you passed <span class=\"k\">in</span>, <span class=\"s1\">'-compare'</span>, doesn<span class=\"err\">'</span>t exist on the <span class=\"nb\">local</span> filesystem.\n* Please verify that this is valid file location.\n********************\n\nException <span class=\"k\">in</span> thread <span class=\"s2\">\"main\"</span> java.io.IOException: File -compare does not exist\n        at org.hl7.fhir.validation.ValidatorUtils.extractReferences<span class=\"o\">(</span>ValidatorUtils.java:131<span class=\"o\">)</span>\n        at org.hl7.fhir.validation.ValidatorUtils.parseSources<span class=\"o\">(</span>ValidatorUtils.java:155<span class=\"o\">)</span>\n...\n</code></pre></div>\n<p>Good to know it should support it though!</p>",
        "id": 274525904,
        "sender_full_name": "Declan Kieran",
        "timestamp": 1646737791
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  I've got past the error using the debugger</p>\n<p>In IgLoader.scanForVersions, the sources that is passed  contains all the switches, but I think it only wants the StructureDefinitions provided in the -ig switches as it then bombs on ValidatorUtils.parseSources.  Modifying this on the fly gets me past that error, I now have issues of content not being fetched because URL's not resolving in the profiles, but that's something I think I'll have to figure out myself! Cheers : )</p>\n<p>edit:</p>\n<p>Ah, spoke to soon, sorted the URL's, but now getting</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>...\n  fhirVersion <span class=\"k\">in</span> https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-AllergyIntolerance-1: <span class=\"m\">3</span>.0\n  fhirVersion <span class=\"k\">in</span> https://fhir.simplifier.net/HL7FHIRUKCoreR4/StructureDefinition/Extension-UKCore-AllergyIntoleranceEnd: <span class=\"m\">4</span>.0\nException <span class=\"k\">in</span> thread <span class=\"s2\">\"main\"</span> java.lang.Exception: -&gt; Multiple versions found. Specify a particular version using the -version parameter\n        at org.hl7.fhir.validation.cli.services.ValidationService.determineVersion<span class=\"o\">(</span>ValidationService.java:336<span class=\"o\">)</span>\n        at org.hl7.fhir.validation.cli.services.ValidationService.determineVersion<span class=\"o\">(</span>ValidationService.java:314<span class=\"o\">)</span>\n        at org.hl7.fhir.validation.ValidatorCli.doLeftRightComparison<span class=\"o\">(</span>ValidatorCli.java:221<span class=\"o\">)</span>\n        at org.hl7.fhir.validation.ValidatorCli.main<span class=\"o\">(</span>ValidatorCli.java:160<span class=\"o\">)</span>\n</code></pre></div>",
        "id": 274549763,
        "sender_full_name": "Declan Kieran",
        "timestamp": 1646750574
    },
    {
        "content": "<p>hmm where can I find the source for that so I can reproduce?</p>",
        "id": 275334044,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1647325660
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179252-IG-creation/topic/Comparison.20with.20previous.20versions/near/275334044\">said</a>:</p>\n<blockquote>\n<p>hmm where can I find the source for that so I can reproduce?</p>\n</blockquote>\n<p>I was used the source of the validation project from the org.hl7.fhir.core repo.  I just tried again there and it seems to be the same.  I've attached a zip file with a bash script that downloads the latest prebuilt validator_cli and runs the different commands on the files I was talking about, along with some inline comments on what exceptions happened for me and what I did to debug through the code to get round the parameter error.  Thanks! <a href=\"/user_uploads/10155/iO9on3L-oAuh_wK3H7q1DDoL/example.tar\">example.tar</a></p>",
        "id": 276324332,
        "sender_full_name": "Declan Kieran",
        "timestamp": 1648037901
    },
    {
        "content": "<p>well, that's a r3 profile, but you specified to use R4</p>",
        "id": 277085672,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1648605155
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179252-IG-creation/topic/Comparison.20with.20previous.20versions/near/277085672\">said</a>:</p>\n<blockquote>\n<p>well, that's a r3 profile, but you specified to use R4</p>\n</blockquote>\n<p>The CareConnect-AllergyIntolerance-1 is R3 and the UKCore-AllergyIntolerance is R4, in the <a href=\"http://cmd.sh\">cmd.sh</a> I've tried setting the version switch to 3.0 and 4.0 and removing it when calling the validator, with different exceptions.  The exceptions are in the comments in the shell script.  I also tried adding in a generated snapshot to the UKCore-AllergyIntolerance profile to see if that would make a difference, and these are the commands  at the bottom of that shell script, although not sure why I thought that would help!  Regardless all the same exceptions were raised.</p>",
        "id": 277248639,
        "sender_full_name": "Declan Kieran",
        "timestamp": 1648715668
    },
    {
        "content": "<p>well, that's how it's documented to behave. But it's not really practical. I'll have to think about how to manage that. All the code exists, but it's not obvious how to do the command line thing</p>",
        "id": 277351145,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1648767496
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"453078\">@David Otasek</span> we need to talk about this one</p>",
        "id": 277351156,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1648767508
    },
    {
        "content": "<p>After some discussion and double-checking some pitfalls, I think the following syntax may be appropriate:</p>\n<p><code>-ig [3.0]{path}</code></p>\n<p><code>[</code> would not be allowed as the starting character of  the scheme portion of a URL, which means it wouldn't invalidate the use of any existing URLs. Technically, a filename COULD start with <code>[</code> in multiple OSs, however, it doesn't seem like a likely situation, and the workaround would be pretty simple for the user.</p>\n<p>Initially, I thought an 'option for an option' approach could work (something like <code>-ig-fhir=3.0 {path}</code>, but looking at the standards in GNU, for example, that is generally outside of the norm for both the name of the option, and generally, whatever comes after the option is automatically its argument. So in our case '-fhir=30' would be interpreted as the argument by convention, and {path} would not necessarily be associated with anything.</p>",
        "id": 278071163,
        "sender_full_name": "David Otasek",
        "timestamp": 1649271927
    },
    {
        "content": "<p>-ig [3.0]{path} works for me</p>",
        "id": 278093651,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1649283361
    }
]