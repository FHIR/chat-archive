[
    {
        "content": "<p>Build is now failing with this error:</p>\n<p>Load USCoreR4 (<a href=\"http://hl7.org/fhir/us/core\" target=\"_blank\" title=\"http://hl7.org/fhir/us/core\">http://hl7.org/fhir/us/core</a>) from hl7.fhir.us.core#current        (36.0266sec)<br>\nPublishing Content Failed: Unknown SearchModifierCode code '?'                   (36.0275sec)<br>\n                                                                                 (36.0275sec)<br>\nUse -? to get command line help                                                  (36.0275sec)<br>\n                                                                                 (36.0276sec)<br>\nStack Dump (for debugging):                                                      (36.0276sec)<br>\njava.lang.IllegalArgumentException: Unknown SearchModifierCode code '?'<br>\n    at org.hl7.fhir.r4.model.SearchParameter$SearchModifierCodeEnumFactory.fromCode(SearchParameter.java:606)<br>\n    at org.hl7.fhir.r4.model.SearchParameter$SearchModifierCodeEnumFactory.fromCode(SearchParameter.java:1)<br>\n    at org.hl7.fhir.r4.formats.JsonParser.parseEnumeration(JsonParser.java:105)<br>\n    at org.hl7.fhir.r4.formats.JsonParser.parseSearchParameterProperties(JsonParser.java:22893)<br>\n    at org.hl7.fhir.r4.formats.JsonParser.parseSearchParameter(JsonParser.java:22753)<br>\n    at org.hl7.fhir.r4.formats.JsonParser.parseResource(JsonParser.java:27646)<br>\n    at org.hl7.fhir.r4.formats.JsonParserBase.parse(JsonParserBase.java:113)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.loadFromPackage(Publisher.java:2096)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.loadIg(Publisher.java:2179)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.initializeFromJson(Publisher.java:1669)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.initialize(Publisher.java:1119)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:603)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:6115)<br>\nException in thread \"main\" java.lang.NullPointerException<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:6125)</p>",
        "id": 168513513,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560955812
    },
    {
        "content": "<p>This is happening for CDex, PDex, and HRex.<br>\n<span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 168513528,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560955833
    },
    {
        "content": "<p>This is also now happening on the US Drug Formulary IG. <span class=\"user-mention\" data-user-id=\"215604\">@Saul Kravitz</span></p>",
        "id": 168533650,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1560969429
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> &amp; <span class=\"user-mention\" data-user-id=\"191410\">@Brett Marquard</span> -- I can't tell for sure, but based on where this error happens in the log, is it possible that US Core R4 is the source of this error?  Did you recently update any search parameters that might have introduced an invalid search modifier?</p>",
        "id": 168534729,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1560970057
    },
    {
        "content": "<p>US Core R4 failed when trying to publish the STU; <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> is working on fix to igpublisher</p>",
        "id": 168534884,
        "sender_full_name": "Lynn Laakso",
        "timestamp": 1560970141
    },
    {
        "content": "<p>unless it was an errant keystroke ...no  they were all script generated.</p>",
        "id": 168536556,
        "sender_full_name": "Eric Haas",
        "timestamp": 1560971240
    },
    {
        "content": "<p>I don't understand. they all build fine locally, right?</p>",
        "id": 168538187,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560972512
    },
    {
        "content": "<p>HRex builds locally but not on the CI build, but PDex and CDex have dependencies on HRex and thus expect HRex to have a package available on the CI build thus can't build locally either.</p>",
        "id": 168538640,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560972865
    },
    {
        "content": "<p>Drug Formulary builds beautifully with org.hl7.fhir.publisher.cli-0.9.26-20190608.050437-1.jar<br>\nHaven't tried more recent builds locally.</p>",
        "id": 168540084,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1560974000
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> one more piece of info, when I build HRex locally I still get this build error:<br>\nURL value '<a href=\"http://hl7.org/fhir/us/core/ImplementationGuide/hl7.fhir.us.core-3.0.0\" target=\"_blank\" title=\"http://hl7.org/fhir/us/core/ImplementationGuide/hl7.fhir.us.core-3.0.0\">http://hl7.org/fhir/us/core/ImplementationGuide/hl7.fhir.us.core-3.0.0</a>' does not resolve</p>",
        "id": 168542154,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560975656
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> Actually, I have some more info for you. On a hunch I just deleted my package cache locally, and now HRex is throwing the same error as the CI build:<br>\njava.lang.IllegalArgumentException: Unknown SearchModifierCode code '?'<br>\n        at org.hl7.fhir.r4.model.SearchParameter$SearchModifierCodeEnumFactory.fromCode(SearchParameter.java:606)<br>\n        at org.hl7.fhir.r4.model.SearchParameter$SearchModifierCodeEnumFactory.fromCode(SearchParameter.java:1)</p>",
        "id": 168542601,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560975971
    },
    {
        "content": "<p>So it seems that a cached version of US Core was masking the error locally.</p>",
        "id": 168542622,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560975991
    },
    {
        "content": "<p>perhaps this can shed some light on it...</p>",
        "id": 168546983,
        "sender_full_name": "Eric Haas",
        "timestamp": 1560979260
    },
    {
        "content": "<p>Originally the _modifiers and _comparator elements were not being published in json or xml.  GG fixed that so they are now present but inadvertently the modifiers values are all \"?\".  (When I checked to confirm the fix I must admit  I only looked for _mods and _comps and a list of comparators. )</p>",
        "id": 168546998,
        "sender_full_name": "Eric Haas",
        "timestamp": 1560979277
    },
    {
        "content": "<p>e.g. for SP USCoreObservationCategory:  (not source but generated from source)</p>",
        "id": 168547379,
        "sender_full_name": "Eric Haas",
        "timestamp": 1560979657
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><span class=\"err\">...</span>\n<span class=\"s2\">&quot;multipleAnd&quot;</span><span class=\"err\">:</span> <span class=\"kc\">true</span><span class=\"err\">,</span>\n  <span class=\"s2\">&quot;_multipleAnd&quot;</span><span class=\"err\">:</span> <span class=\"p\">{</span>\n    <span class=\"nt\">&quot;extension&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n      <span class=\"p\">{</span>\n        <span class=\"nt\">&quot;url&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;http://hl7.org/fhir/StructureDefinition/capabilitystatement-expectation&quot;</span><span class=\"p\">,</span>\n        <span class=\"nt\">&quot;valueCode&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;MAY&quot;</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">]</span>\n  <span class=\"p\">}</span><span class=\"err\">,</span>\n  <span class=\"s2\">&quot;modifier&quot;</span><span class=\"err\">:</span> <span class=\"p\">[</span>\n    <span class=\"s2\">&quot;?&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;?&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;?&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;?&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;?&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;?&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;?&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;?&quot;</span>\n  <span class=\"p\">]</span><span class=\"err\">,</span>\n  <span class=\"s2\">&quot;_modifier&quot;</span><span class=\"err\">:</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n      <span class=\"nt\">&quot;extension&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"p\">{</span>\n          <span class=\"nt\">&quot;url&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;http://hl7.org/fhir/StructureDefinition/capabilitystatement-expectation&quot;</span><span class=\"p\">,</span>\n          <span class=\"nt\">&quot;valueCode&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;MAY&quot;</span>\n        <span class=\"p\">}</span>\n      <span class=\"p\">]</span>\n    <span class=\"p\">},</span>\n    <span class=\"p\">{</span>\n      <span class=\"nt\">&quot;extension&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"p\">{</span>\n          <span class=\"nt\">&quot;url&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;http://hl7.org/fhir/StructureDefinition/capabilitystatement-expectation&quot;</span><span class=\"p\">,</span>\n<span class=\"err\">....</span>\n</pre></div>",
        "id": 168547486,
        "sender_full_name": "Eric Haas",
        "timestamp": 1560979749
    },
    {
        "content": "<p>And this is  from my local US-Core-R4 build which I reran today.</p>",
        "id": 168547491,
        "sender_full_name": "Eric Haas",
        "timestamp": 1560979755
    },
    {
        "content": "<p>what? I checked that...</p>",
        "id": 168549140,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560981335
    },
    {
        "content": "<p>... or not...</p>",
        "id": 168549563,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560981711
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> Seems you got HRex to build, but now all the links to US Core are broken, and the US Core IG itself seems only partially there (see <a href=\"http://www.hl7.org/fhir/us/core/\" target=\"_blank\" title=\"http://www.hl7.org/fhir/us/core/\">http://www.hl7.org/fhir/us/core/</a>), but you are probably aware of that. Let me know when you think US Core and the build in general are ready to work against again, as Lynn has a few minor tweaks she wants to HRex and CDex for the ballot.</p>",
        "id": 168553648,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1560986175
    },
    {
        "content": "<p>Us Core is work in progress right now</p>",
        "id": 168556132,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560989416
    },
    {
        "content": "<p>ok now that US Core is finally published, we need to update all the Da Vinci guides to depend on v 3.0.0 not current</p>",
        "id": 168563464,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1561000532
    },
    {
        "content": "<p>Ok, will try now</p>",
        "id": 168575894,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1561019068
    },
    {
        "content": "<p>I did a couple but anything that depends on ehrx has to wait until Lynn publishes it now - because that dependency has to be 0.1.0 not current</p>",
        "id": 168576014,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1561019198
    },
    {
        "content": "<p>For now I reset the HRex dependencies in CDex and PDex to current just to make sure the IGs build and to fix the remaining issues that Lynn raised with them, but I will ask Lynn to let me know when HRex is published so that I can update them to 0.1.0.</p>",
        "id": 168581569,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1561024305
    },
    {
        "content": "<blockquote>\n<p>ok now that US Core is finally published, we need to update all the Da Vinci guides to depend on v 3.0.0 not current</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>, <span class=\"user-mention\" data-user-id=\"215604\">@Saul Kravitz</span>  -- It looks like the USDF STU ballot release was just officially announced, but we didn't get to bump US Core from <code>current</code> to <code>3.0.0</code>.  So what's the procedure now?  Do we bump it, and if so do we need to coordinate w/ <span class=\"user-mention\" data-user-id=\"193599\">@Lynn Laakso</span>?  Or do we leave it be?</p>",
        "id": 168600281,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1561040767
    },
    {
        "content": "<p>which one is this exactly?</p>",
        "id": 168626451,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1561058708
    },
    {
        "content": "<blockquote>\n<p>new Publication: 1st STU ballot of the Da Vinci US Drug Formulary STU Ballot release 0.1.0: <a href=\"http://hl7.org/fhir/us/Davinci-drug-formulary/Jun2019/\" target=\"_blank\" title=\"http://hl7.org/fhir/us/Davinci-drug-formulary/Jun2019/\">http://hl7.org/fhir/us/Davinci-drug-formulary/Jun2019/</a></p>\n</blockquote>",
        "id": 168630423,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1561061531
    },
    {
        "content": "<p>we do need to fix it</p>",
        "id": 168630891,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1561061977
    },
    {
        "content": "<p>can you commit the appropriate changes</p>",
        "id": 168630898,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1561061986
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"215604\">@Saul Kravitz</span> -- can you update the USDF IG w/ the new US Core 3.0.0?  If you're rebuilding from CIMPL, you should use the new <a href=\"https://github.com/standardhealth/shr-cli/releases/tag/v5.21.1\" target=\"_blank\" title=\"https://github.com/standardhealth/shr-cli/releases/tag/v5.21.1\">SHR CLI v5.21.1</a> release.</p>",
        "id": 168632470,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1561063162
    },
    {
        "content": "<p>Done.     <a href=\"https://github.com/HL7/davinci-pdex-formulary/blob/master/ig.json\" target=\"_blank\" title=\"https://github.com/HL7/davinci-pdex-formulary/blob/master/ig.json\">https://github.com/HL7/davinci-pdex-formulary/blob/master/ig.json</a> now has:</p>\n<p>\"dependencyList\": [<br>\n    {<br>\n      \"package\": \"hl7.fhir.us.core\",<br>\n      \"version\": \"3.0.0\",<br>\n      \"name\": \"uscore\",<br>\n      \"location\": \"<a href=\"http://hl7.org/fhir/us/core\" target=\"_blank\" title=\"http://hl7.org/fhir/us/core\">http://hl7.org/fhir/us/core</a>\"<br>\n    }<br>\n  ],</p>",
        "id": 168640531,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1561070146
    }
]