[
    {
        "content": "<p>Has anyone published their IG to an AWS S3 bucket? I can get the content there, but it's ignoring the css so the result is pretty ugly. Any advice is welcome.</p>",
        "id": 191670837,
        "sender_full_name": " Bob Milius",
        "timestamp": 1585083183
    },
    {
        "content": "<p>I assume you're serving the S3 bucket as a website.  Is there a URL I can look at?</p>",
        "id": 191670972,
        "sender_full_name": "David Johnson",
        "timestamp": 1585083254
    },
    {
        "content": "<p>I also assume you've made the objects in the bucket public, including the css folders/files</p>",
        "id": 191671024,
        "sender_full_name": "David Johnson",
        "timestamp": 1585083285
    },
    {
        "content": "<p><a href=\"https://fhir.b12x.org/ig/hla-reporting/index.html\" target=\"_blank\" title=\"https://fhir.b12x.org/ig/hla-reporting/index.html\">https://fhir.b12x.org/ig/hla-reporting/index.html</a><br>\nI think I've made everything public (I'm new to AWS S3). I uploaded the unzip contents of the full-ig.zip file created by the igpublisher. It looks as expected when I view it locally.</p>",
        "id": 191672247,
        "sender_full_name": " Bob Milius",
        "timestamp": 1585083940
    },
    {
        "content": "<p>Hit F12 in Chrome or Firefox to see the error messages. Somehow the MIME type associated with the style sheets is application/xml...</p>",
        "id": 191672542,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1585084104
    },
    {
        "content": "<p>I'm getting an access denied on this file: <a href=\"https://fhir.b12x.org/ig/hla-reporting/assets/css/bootstrap.css\" target=\"_blank\" title=\"https://fhir.b12x.org/ig/hla-reporting/assets/css/bootstrap.css\">https://fhir.b12x.org/ig/hla-reporting/assets/css/bootstrap.css</a></p>",
        "id": 191672740,
        "sender_full_name": "David Johnson",
        "timestamp": 1585084204
    },
    {
        "content": "<p>I'd make public from the hla-reporting folder level</p>",
        "id": 191672782,
        "sender_full_name": "David Johnson",
        "timestamp": 1585084230
    },
    {
        "content": "<p>I think the resultant error type is application.xml but ultimately the file cannot be accessed.</p>",
        "id": 191672992,
        "sender_full_name": "David Johnson",
        "timestamp": 1585084335
    },
    {
        "content": "<p>I get a 403 access denied on all of the files in the assets directory (css and js)</p>",
        "id": 191672993,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1585084335
    },
    {
        "content": "<p>and I'm glad Bob is doing this because that is the next thing I need to do for my project - upload my IG to an AWS S3 bucket.  Good to know at least one of the pitfalls! :)</p>",
        "id": 191673131,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1585084410
    },
    {
        "content": "<p>I did 'make public' on hla-reporting folder. Same result. <br>\nbtw, there are only files in hla-reporting, no directories. There's no hla-reporting/assets/css/<br>\nLike I mentioned, all I did was unzip the contents of full-ig.zip and cp them over.<br>\nI probably need to learn more about css :/</p>",
        "id": 191673660,
        "sender_full_name": " Bob Milius",
        "timestamp": 1585084666
    },
    {
        "content": "<p>When you unzip full-ig.zip locally, don't you have subfolders?</p>",
        "id": 191674034,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1585084836
    },
    {
        "content": "<p>You may want to individually create the folders and drop the files in</p>",
        "id": 191674244,
        "sender_full_name": "David Johnson",
        "timestamp": 1585084927
    },
    {
        "content": "<p>there aren't that many, it will take a little bit, but you need those all in the bucket.</p>",
        "id": 191674277,
        "sender_full_name": "David Johnson",
        "timestamp": 1585084942
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"192685\">Vassil Peytchev</span> <a href=\"#narrow/stream/179252-IG-creation/topic/IG.20publishing.20on.20AWS.20S3.3F/near/191674034\" title=\"#narrow/stream/179252-IG-creation/topic/IG.20publishing.20on.20AWS.20S3.3F/near/191674034\">said</a>:</p>\n<blockquote>\n<p>When you unzip full-ig.zip locally, don't you have subfolders?</p>\n</blockquote>\n<p>No,  I don't have subfolders.<br>\nI just uploaded the entire contents of my output folder which does have the assets folder, and it appears to be displaying correctly now.<br>\nthanks for the hints!</p>",
        "id": 191675102,
        "sender_full_name": " Bob Milius",
        "timestamp": 1585085387
    },
    {
        "content": "<p>okay, better, but still some issues. e.g. differential and snapshot on the  same page. e.g.<br>\n<a href=\"https://fhir.b12x.org/ig/hla-reporting/StructureDefinition-hla-genotype.html\" target=\"_blank\" title=\"https://fhir.b12x.org/ig/hla-reporting/StructureDefinition-hla-genotype.html\">https://fhir.b12x.org/ig/hla-reporting/StructureDefinition-hla-genotype.html</a><br>\nWhen I view it locally, either opening the file directly, or serving it in a localhost server (<code>python -m SimpleHTTPServer 8000</code>), then it looks as expected with views in different tabs</p>",
        "id": 191675916,
        "sender_full_name": " Bob Milius",
        "timestamp": 1585085848
    },
    {
        "content": "<p>s3 doesn't support redirects. It's really a pretty limited web server; I strongly advise against using s3</p>",
        "id": 191679691,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1585088105
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>. Can you recommend a platform to host an organization specific IG? AWS or ...?</p>",
        "id": 191751202,
        "sender_full_name": " Bob Milius",
        "timestamp": 1585145874
    },
    {
        "content": "<p>I don't have problems with AWS - if I had, <a href=\"https://docs.ehealth.sundhed.dk/latest/ig/index.html\" title=\"https://docs.ehealth.sundhed.dk/latest/ig/index.html\">https://docs.ehealth.sundhed.dk/latest/ig/index.html</a> would look like crap</p>",
        "id": 191751392,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1585145941
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191427\">@Jens Villadsen</span> Are you using an S3 bucket?</p>",
        "id": 191751521,
        "sender_full_name": " Bob Milius",
        "timestamp": 1585145995
    },
    {
        "content": "<p>I'm pretty sure thats S3</p>",
        "id": 191751770,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1585146095
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/GsZh6O1oQIJHgzbCThKg7oup/image.png\" title=\"image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/GsZh6O1oQIJHgzbCThKg7oup/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/GsZh6O1oQIJHgzbCThKg7oup/image.png\"></a></div>",
        "id": 191751803,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1585146111
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191427\">@Jens Villadsen</span> what tool are you using to display that info?</p>",
        "id": 191769730,
        "sender_full_name": " Bob Milius",
        "timestamp": 1585152218
    },
    {
        "content": "<p>Chrome</p>",
        "id": 191770410,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1585152468
    },
    {
        "content": "<p>Press F12</p>",
        "id": 191770426,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1585152475
    },
    {
        "content": "<p>Looks like my rendering issues are related to security policies that prohibit inline scripts.</p>",
        "id": 191786578,
        "sender_full_name": " Bob Milius",
        "timestamp": 1585158832
    },
    {
        "content": "<p>that sounds like an IG publisher issue? what are you trying to do</p>",
        "id": 191802740,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1585166129
    },
    {
        "content": "<p>I'm just posting the IG to a AWS S3 bucket. Looks okay when I go directly to the aws url, e.g.,<br>\n<a href=\"http://fhir.b12x.org.s3-website-us-east-1.amazonaws.com/ig/hla-reporting/StructureDefinition-hla-genotype.html\" title=\"http://fhir.b12x.org.s3-website-us-east-1.amazonaws.com/ig/hla-reporting/StructureDefinition-hla-genotype.html\">http://fhir.b12x.org.s3-website-us-east-1.amazonaws.com/ig/hla-reporting/StructureDefinition-hla-genotype.html</a><br>\nbut not when I go to<br>\n<a href=\"https://fhir.b12x.org/ig/hla-reporting/StructureDefinition-hla-genotype.html\" title=\"https://fhir.b12x.org/ig/hla-reporting/StructureDefinition-hla-genotype.html\">https://fhir.b12x.org/ig/hla-reporting/StructureDefinition-hla-genotype.html</a><br>\nwhich I understand goes thru cloudfront first before going to the first url.</p>\n<p>I'm getting console errors (seen in dev mode in chrome) which I gather are related to our org security policy settings, eg.,</p>\n<div class=\"codehilite\"><pre><span></span>Refused to execute inline script because it violates the following Content Security Policy directive: &quot;script-src &#39;self&#39;&quot;. Either the &#39;unsafe-inline&#39; keyword, a hash (&#39;######&#39;), or a nonce (&#39;nonce-...&#39;) is required to enable inline execution.\n</pre></div>\n\n\n<p>btw, this is a POC IG to see if I can create an IG with sushi and publish the IG on AWS S3.</p>",
        "id": 191807039,
        "sender_full_name": " Bob Milius",
        "timestamp": 1585168271
    },
    {
        "content": "<p>I haven't seen this error but this is not from the IG publisher. But why is S3 a goal?</p>",
        "id": 191808026,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1585168784
    },
    {
        "content": "<p>It's what our org has already setup for building quick websites. It probably won't be a long-term solution for our FHIR work.</p>",
        "id": 191809255,
        "sender_full_name": " Bob Milius",
        "timestamp": 1585169499
    },
    {
        "content": "<p>Honestly, if you're ready to use an s3 bucket, with the limited requirements for content size, I would use a free t2.micro instance running windows IIS.  I say this because while S3 is great for hosting simple websites where simple content is delivered, it has no place for mime-types, redirects or special settings.</p>",
        "id": 191814588,
        "sender_full_name": "David Johnson",
        "timestamp": 1585172441
    },
    {
        "content": "<p>The t2.micro instance is free and IIS is easily installed.  I don't mean this as an official endorsement, just an understanding of why you would want to steer clear of an S3 bucket as a solution for publishing any content that requires additional configuration beyond what's done at the browser.</p>",
        "id": 191814673,
        "sender_full_name": "David Johnson",
        "timestamp": 1585172508
    },
    {
        "content": "<p>Of course, once you're on the t2.micro EC2 instance, there will be some challenges there.  But at least you have the flexibility that you would not have in an S3 bucket.</p>",
        "id": 191814837,
        "sender_full_name": "David Johnson",
        "timestamp": 1585172621
    },
    {
        "content": "<p>Thanks! I’ll contact our IT systems guy.</p>",
        "id": 191817675,
        "sender_full_name": " Bob Milius",
        "timestamp": 1585174500
    }
]