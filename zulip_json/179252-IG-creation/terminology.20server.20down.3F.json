[
    {
        "content": "<p>I am getting a new error with the IG publisher this AM</p>\n<p>Connect to Terminology Server at <a href=\"http://tx.fhir.org/r4\" target=\"_blank\" title=\"http://tx.fhir.org/r4\">http://tx.fhir.org/r4</a>                           (40.0074sec)<br>\nError : Error sending Http Request: Connection to <a href=\"http://tx.fhir.org\" target=\"_blank\" title=\"http://tx.fhir.org\">http://tx.fhir.org</a> refused</p>\n<p>Is the server down or have the parameters changed requiring a new update of the IG publisher? New parameter in the ig.json config file?</p>\n<p><strong>Now I am getting this error</strong></p>\n<p>Contacting Build Server...                                                       (00.0041sec)<br>\n ... done                                                                        (00.0972sec)<br>\nError : C:\\Users\\brian\\.fhir\\packages\\hl7.fhir.core#current\\package\\package.json (The system cannot find the path specified)<br>\n   java.io.FileInputStream.open0(Native Method)</p>\n<p>which comes even sooner.</p>\n<p>I was able to get rid of the second error by deleting the .fhir and fhircache directories on my computer. But the first error remains. I have downloaded the latest IG publisher.</p>",
        "id": 153996534,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1536830610
    },
    {
        "content": "<p>server is down. bringing it back up now.</p>",
        "id": 153996600,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1536838044
    },
    {
        "content": "<p>sorry about that</p>",
        "id": 153996601,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1536838046
    },
    {
        "content": "<p>I lost access while upgrading it</p>",
        "id": 153996602,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1536838052
    },
    {
        "content": "<blockquote>\n<p>I lost access while upgrading it</p>\n</blockquote>\n<p>okay. Standing by. Been mostly engaged in various update, create, and conditional versions thereof this AM.</p>",
        "id": 153996604,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1536838143
    },
    {
        "content": "<p>back</p>",
        "id": 153996605,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1536838248
    },
    {
        "content": "<blockquote>\n<p>back</p>\n</blockquote>\n<p>Yep! Its back!  Thanks ... But the package (tgz file) conflict still remains after two passes.</p>",
        "id": 153996609,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1536838370
    },
    {
        "content": "<p>ok well I have time to look at that now.</p>",
        "id": 153996610,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1536838453
    },
    {
        "content": "<p>in your log, you'll have something like this:</p>",
        "id": 153996612,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1536838500
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span>Package Cache: C:\\Users\\graha\\.fhir\\packages\n</pre></div>",
        "id": 153996613,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1536838504
    },
    {
        "content": "<p>go to that directory, and tell me what folders are in it</p>",
        "id": 153996614,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1536838530
    },
    {
        "content": "<blockquote>\n<p>go to that directory, and tell me what folders are in it</p>\n</blockquote>\n<p>There is one folder 'packages'<br>\nin the 'packages' folder there are 2 folders and one file (an ini file)<br>\nOne of the folders is for the core and the other is for phd<br>\nDo you need the specific names for these folders?</p>",
        "id": 153996617,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1536838770
    },
    {
        "content": "<p>what version is the core one, and what's in /package/package.json of the core one?</p>",
        "id": 153996640,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1536845951
    },
    {
        "content": "<blockquote>\n<p>what version is the core one, and what's in /package/package.json of the core one?</p>\n</blockquote>\n<p>I just did this now and I get:</p>\n<p>directory name<br>\nhl7.fhir.core#current</p>\n<p>package.json</p>\n<div class=\"codehilite\"><pre><span></span>{\n  &quot;name&quot;: &quot;hl7.fhir.core&quot;,\n  &quot;version&quot;: &quot;3.6.0&quot;,\n  &quot;tools-version&quot;: 1,\n  &quot;type&quot;: &quot;fhir.core&quot;,\n  &quot;license&quot;: &quot;CC0-1.0&quot;,\n  &quot;canonical&quot;: &quot;http://hl7.org/fhir&quot;,\n  &quot;url&quot;: &quot;http://build.fhir.org//&quot;,\n  &quot;title&quot;: &quot;FHIR Core package&quot;,\n  &quot;description&quot;: &quot;FHIR Core package - the NPM package that contains all the definitions for the base FHIR specification&quot;,\n  &quot;dependencies&quot;: {\n    &quot;hl7.fhir.core&quot;: &quot;3.6.0&quot;\n  },\n  &quot;author&quot;: &quot;HL7 Inc&quot;,\n  &quot;homepage&quot;: &quot;http://build.fhir.org//&quot;\n}\n</pre></div>",
        "id": 153996697,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1536852613
    },
    {
        "content": "<p>well, that's what I expected - the package you are getting is the wrong version. I can only think you cache problem - but then it should be fast</p>",
        "id": 153996855,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1536874043
    },
    {
        "content": "<blockquote>\n<p>well, that's what I expected - the package you are getting is the wrong version. I can only think you cache problem - but then it should be fast</p>\n</blockquote>\n<p>I can delete the .fhir and fhircache directories again. Will that solve the version 1 vs version 2?</p>\n<p>After deleting those two files here is the log</p>\n<div class=\"codehilite\"><pre><span></span>Package Cache: C:\\Users\\brian\\.fhir\\packages\nLoad Configuration from E:\\Ruby25-x64\\IG_Publisher\\PHD-IG\\ig.json                (00.0039sec)\nRoot directory: E:\\Ruby25-x64\\IG_Publisher\\PHD-IG                                (00.0103sec)\nTerminology Cache is at C:\\Users\\brian\\fhircache. 0 files in cache               (01.0135sec)\nContacting Build Server...                                                       (01.0135sec)\n ... done                                                                        (02.0175sec)\nFetch hl7.fhir.core-current package from http://build.fhir.org/package.tgz       (02.0176sec)\nChecking hl7.fhir.core-current currency                                          (43.0978sec)\nUpdating hl7.fhir.core-3.6.0 package from source (too old - is 1, must be 2      (43.0978sec)\nFetch hl7.fhir.core-current package from http://build.fhir.org/package.tgz       (43.0978sec)\nLoad hl7.fhir.core-current package from C:\\Users\\brian\\.fhir\\packages\\hl7.fhir.core#current (00:01:28.0711sec)\nLoad Terminology Cache from C:\\Users\\brian\\fhircache                             (00:01:34.0233sec)\nConnect to Terminology Server at http://tx.fhir.org/r4                           (00:01:34.0233sec)\nFetch Template: https://github.com/FHIR/test-template                            (00:01:35.0013sec)\n</pre></div>\n\n\n<p>It appears that the wrong tgz file is located at <a href=\"http://build.fhir.org/package.tgz\" target=\"_blank\" title=\"http://build.fhir.org/package.tgz\">http://build.fhir.org/package.tgz</a>, so the conflict happens every time.</p>",
        "id": 153996870,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1536880314
    },
    {
        "content": "<p>it's not wrong. must be a caching issue but I'm not sure what to do about it</p>",
        "id": 153997299,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1537175654
    },
    {
        "content": "<blockquote>\n<p>it's not wrong. must be a caching issue but I'm not sure what to do about it</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  I suppose you mean a caching issue on the server side? I see where the publisher caches the tgz file on my computer and I can delete all those files. But when I run the publisher it recreates the cache downloading tools '1' tgz. So next time I run, it sees tgz 1 in the cache and downloads a new one. However that  newly downloaded one is still 1. So every time I publish it downloads the tgz file.</p>",
        "id": 153997303,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1537175964
    },
    {
        "content": "<p>when I download that file, I get version 2.</p>",
        "id": 153997308,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1537176239
    },
    {
        "content": "<p>so I assume it's some intermediate http cache</p>",
        "id": 153997309,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1537176258
    },
    {
        "content": "<blockquote>\n<p>when I download that file, I get version 2.</p>\n<p>so I assume it's some intermediate http cache</p>\n</blockquote>\n<p>That would be on my end?</p>",
        "id": 153997311,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1537176285
    },
    {
        "content": "<p>well, somewhere.</p>",
        "id": 153997315,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1537176384
    },
    {
        "content": "<p>I don't know what to do about it</p>",
        "id": 153997316,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1537176393
    },
    {
        "content": "<p>Seems hung.  <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> <span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> <span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span></p>",
        "id": 213684384,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1602989738
    },
    {
        "content": "<p>Yes, just saw that.  I'll restart it.</p>",
        "id": 213684428,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1602989783
    },
    {
        "content": "<p>Well, I would restart it if I could, but unfortunately, at least at this time I seem to be stuck. :(  The server isn't responding to a request for an rdp connection, and without that there's nothing that I can do with it.  The <a href=\"http://tx.fhir.org\">tx.fhir.org</a> server <strong>is</strong> responding to ping, so it's not completely down, but that's not of any help at the moment.   I think we'll have to restart the server instance itself from the console (AWS?), but I don't have the credentials for that (possibly only <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> does?). <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span></p>",
        "id": 213685269,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1602991313
    },
    {
        "content": "<p>Never mind.  I just got a connection (not sure what changed).  Should be back up soon.</p>",
        "id": 213685504,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1602991681
    },
    {
        "content": "<p>Thank you</p>",
        "id": 213686085,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1602992569
    },
    {
        "content": "<p>Server's up, but I'm getting an issue with the SNOMED version.  I'm checking it out.</p>",
        "id": 213686146,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1602992649
    },
    {
        "content": "<p>The SNOMED issue is that it's using the 20200309 version as the default for the International Edition if no edition/version is specified, even though the later 20200731 version is loaded and available on the server (and works correctly if you specify it in the query string explicitly as <code>&amp;version=http://snomed.info/sct/900000000000207008/version/20200731</code>).</p>",
        "id": 213686534,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1602993469
    },
    {
        "content": "<p>That SNOMED CT issue probably will affect only a relatively small number of queries overall (but by default it will miss the latest COVID-19 concepts that were added in the July release).  I assume this is something that we should be able to address in <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>'s reworking of the terminology server code?</p>",
        "id": 213686815,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1602993904
    },
    {
        "content": "<p>the default version is specified in the ini file</p>",
        "id": 213692627,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1603004416
    },
    {
        "content": "<p><a href=\"http://tx.fhir.org\">tx.fhir.org</a> stability is presently at the top of my list. Looks like it will be a few more days before what I'm working on lands though</p>",
        "id": 213692865,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1603004934
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> Yes, the default version is specified in the ini file.  Previously that was specifying the currently hosted version of the International <strong>edition</strong> as the default.  When we started hosting multiple versions of the International edition, it wasn't entirely clear how that was supposed to be applied.  The most obvious way, though, is to choose a specific edition/version combination as the default.  I've adjusted it now so that the 20200731 version of the International edition is flagged as the (only) default, and it's working as expected.</p>",
        "id": 213710964,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1603034355
    }
]