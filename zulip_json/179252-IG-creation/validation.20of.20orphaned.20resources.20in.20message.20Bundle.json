[
    {
        "content": "<p>In our tests we have an example where a resource is not referenced in a MessageHeader.focus or by any resource referenced by these resource.</p>\n<p><a href=\"https://github.com/NHSDigital/IOPS-Validation/blob/main/Examples/fail/Bundle-prescription-order-extraMedicationRequest.json\">https://github.com/NHSDigital/IOPS-Validation/blob/main/Examples/fail/Bundle-prescription-order-extraMedicationRequest.json</a></p>\n<p>The resource fullUrl is urn:uuid:c7d942f2-3c1d-4d93-9ba8-ba57db83cdc0 at line <a href=\"https://github.com/NHSDigital/IOPS-Validation/blob/main/Examples/fail/Bundle-prescription-order-extraMedicationRequest.json#L508\">https://github.com/NHSDigital/IOPS-Validation/blob/main/Examples/fail/Bundle-prescription-order-extraMedicationRequest.json#L508</a></p>\n<p>I believe this used to throw up errors.</p>",
        "id": 260757542,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1636437885
    },
    {
        "content": "<p>This is via HAPI FHIR Validation</p>",
        "id": 260757686,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1636438028
    },
    {
        "content": "<p>does the standalone validator say it's a problem</p>",
        "id": 260759946,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1636440425
    },
    {
        "content": "<p>Nope, clean except for coding errors</p>",
        "id": 260760045,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1636440526
    },
    {
        "content": "<p>hmm, well, we should do something about the coding errors, and put UK SCT on <a href=\"http://tx.fhir.org\">tx.fhir.org</a></p>",
        "id": 260942421,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1636515938
    },
    {
        "content": "<p>and it's not an error because the resource in question refers to other resources in the message - patient, etc. Just like a provenance resource would, which is why this is allowed.</p>",
        "id": 260943796,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1636517479
    },
    {
        "content": "<p>but it's not a resource that you'd expect to be used that way, so the next version of the validator will give this output:</p>\n<div class=\"codehilite\"><pre><span></span><code>WARNING: Bundle.entry[10]: Entry &#39;urn:uuid:c7d942f2-3c1d-4d93-9ba8-ba57db83cdc0&#39; isn&#39;t reachable by traversing forwards from first Bundle entry, and isn&#39;t a resource type that is typically used that way - check this is not missed somewhere\n</code></pre></div>",
        "id": 260944853,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1636518843
    },
    {
        "content": "<p>Great. I've reconfigured out profiles to generate errors use <code>bundled</code> so we should be left with that warning for the orphans</p>",
        "id": 260945042,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1636519102
    },
    {
        "content": "<p>We do have a UK Onto server but it's using OAuth2. I'm working on an HAPI interceptor to get around that</p>",
        "id": 260945444,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1636519664
    },
    {
        "content": "<p><a href=\"https://github.com/NHSDigital/validation-service-fhir-r4/tree/testing/src/main/kotlin/com/example/fhirvalidator/shared\">https://github.com/NHSDigital/validation-service-fhir-r4/tree/testing/src/main/kotlin/com/example/fhirvalidator/shared</a></p>",
        "id": 260945511,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1636519718
    },
    {
        "content": "<p>I'm not sure why <a href=\"http://tx.fhir.org\">tx.fhir.org</a> doesn't support UK SCT. I think no one has ever asked?</p>",
        "id": 260945611,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1636519855
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> do you have any memory of this?</p>",
        "id": 260945621,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1636519870
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> <span class=\"user-mention\" data-user-id=\"191687\">@Kevin Mayfield</span>  Yes, I sure do.  I've been trying for months to get the UK extension(s)/edition loaded.  As you know, I've gotten things to work now with the other extensions and have worked through issues with them, but there is still an issue with loading the UK extension(s).  When it tries to load it complains of a missing module - and I haven't yet tracked down what that module is or why it is \"missing\".  That's not happening with the other extensions.  But I do know that the UK module dependencies have some additional complexities that the others don't - and I expect this is part of that.  Maybe I can go ahead and look at this again now - I've definitely been wanting to get it working.</p>",
        "id": 260946510,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1636520882
    },
    {
        "content": "<p>ok. well, let's start working on it.</p>",
        "id": 260946863,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1636521321
    },
    {
        "content": "<p>Yes.  I've already started - but I'll try to finish.  I'll take another look at it now.</p>",
        "id": 260946971,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1636521418
    },
    {
        "content": "<p>let me know if I need to look at anything</p>",
        "id": 260947172,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1636521619
    },
    {
        "content": "<p>ok</p>",
        "id": 260947376,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1636521868
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> you can probably ignore the drug extension as that's moving from SNOMED to a new CodeSystem, the UKCore profiles have already moved to this.</p>",
        "id": 260951311,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1636526467
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191687\">@Kevin Mayfield</span> Thanks.  I didn't actually know it was moving, but I was already ignoring it for this.  I've (hopefully) fixed and worked around the remaining import bugs - if so, as soon as this one finishes importing I'll get it uploaded.  And then get some sleep. :)</p>",
        "id": 260956956,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1636531860
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191687\">@Kevin Mayfield</span> <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> No luck with the UK edition quite yet.  It's failing with importing some of the refsets.  I removed the der2_cRefset_AttributeValueUKEDSnapshot_GB_20211027 refset from the import as it had trouble with one of the values (at least one).  I thought that might take care of it, but then I also ran into an issue with importing the language refset (der2_cRefset_LanguageUKEDSnapshot-en_GB_20211027) - which we can't ignore - where it contains  a row for <code>999000341000001100 |ePrescribing nebuliser liquids type 13a simple reference set (foundation metadata concept)|</code>, but there is no corresponding row in the description file so the import fails (I assume there may also be more rows with issues, but that's the one it failed on).  I need to stop on it now and will have to come back to dealing with those issues later.</p>",
        "id": 260961809,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1636535240
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> you can probably ignore the drug extension as that's moving from SNOMED to a new CodeSystem, the UKCore profiles have already moved to this.</p>\n<div class=\"codehilite\"><pre><span></span><code>Hi All. Kevin has asked me to look at this discussion. To be clear, in the UK the standard for sharing drug information is dm+d (Dictionary of Medicines and Devices) must be used. The codes used in dm+d are SNOMED codes and the SNOMED UK Drug Extension data is created from uploading dm+d data. The UK Drug Extension data is NOT moving, it will always be there. In the perfect world the dm+d and SNOMED UK Drug Extensions would be exactly the same, but sadly they are not for a number of reasons that I won&#39;t go into here. We do plan to get them to be the same, but this will take a long time. As a Terminology Specialist I would recommend that you do NOT exclude SNOMED UK Drug Extensions from uploading SNOMED UK Edition, but it is reasonable to add the data module by module and to leave drug extensions till last. If anyone needs help with this I am happy to see if I can help.\nSo in summary\n     * dm+d is the primary data source for drug data in the UK\n     * There are some differences between dm+d and SNOMED UK Drug Extensions to flag that SNOMED UK Drug Extensions should not be used for interoperability\n     * SNOMED UK Drug Extensions will always exist as part of SNOMED UK Edition and is created from dm+d data.\n</code></pre></div>",
        "id": 260966783,
        "sender_full_name": "Bill Lush",
        "timestamp": 1636538014
    },
    {
        "content": "<p>This was really hard to read, so here it is republished for <span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> to keep in mind:</p>\n<p><span class=\"user-mention silent\" data-user-id=\"195196\">Bill Lush</span> <a href=\"#narrow/stream/179252-IG-creation/topic/validation.20of.20orphaned.20resources.20in.20message.20Bundle/near/260966783\">said</a>:</p>\n<blockquote>\n<p>Hi All. Kevin has asked me to look at this discussion. To be clear, in the UK the standard for sharing drug information is dm+d (Dictionary of Medicines and Devices) must be used. The codes used in dm+d are SNOMED codes and the SNOMED UK Drug Extension data is created from uploading dm+d data. The UK Drug Extension data is NOT moving, it will always be there. In the perfect world the dm+d and SNOMED UK Drug Extensions would be exactly the same, but sadly they are not for a number of reasons that I won't go into here. We do plan to get them to be the same, but this will take a long time. As a Terminology Specialist I would recommend that you do NOT exclude SNOMED UK Drug Extensions from uploading SNOMED UK Edition, but it is reasonable to add the data module by module and to leave drug extensions till last. If anyone needs help with this I am happy to see if I can help.</p>\n<p>So in summary </p>\n<ul>\n<li>dm+d is the primary data source for drug data in the UK</li>\n<li>There are some differences between dm+d and SNOMED UK Drug Extensions to flag that SNOMED UK Drug Extensions should not be used for interoperability</li>\n<li>SNOMED UK Drug Extensions will always exist as part of SNOMED UK Edition and is created from dm+d data.</li>\n</ul>\n</blockquote>",
        "id": 261041688,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1636572480
    },
    {
        "content": "<p>Yes, that's been my understanding.</p>",
        "id": 261071950,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1636587308
    }
]