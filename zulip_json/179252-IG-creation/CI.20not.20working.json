[
    {
        "content": "<p>I have pushed some changes to GitHub for my IG and previously this has always led to a new IG being generated for <a href=\"http://build.fhir.org/ig/HL7/PHD\">build.fhir.org/ig/HL7/PHD</a>. However, that is no longer happening. I pushed some changes yesterday and the IG is still from back in July. Is something down or has the process changed?</p>",
        "id": 257670834,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1634290706
    },
    {
        "content": "<p>Did you monitor your build on the <a class=\"stream\" data-stream-id=\"179297\" href=\"/#narrow/stream/179297-committers.2Fnotification\">#committers/notification</a> stream?</p>",
        "id": 257694908,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1634303439
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> DId not know it existed. However, there is a HUGE HUGE difference between the result shown in the CI and the same thing done locally. Locally I get 5 errors and I know why (MDC codes not yet in RTMSS). In the CI build I get 89 errors, most of which make no sense. How could the results with the same source files be so different? How can we fix errors if we cannot reproduce them?</p>\n<div class=\"codehilite\"><pre><span></span><code>\n</code></pre></div>",
        "id": 257758844,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1634329117
    },
    {
        "content": "<p>Are you using the current version of the publisher locally?  Only other possible difference is terminology caching differences</p>",
        "id": 257760167,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1634329688
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span><br>\nI did an update yesterday and got the latest and greatest. I'm still only getting 5 errors locally. Could it be the Jira file (FHIR-phd.xml)? THere is a generated one locally but it's not even close to that in the JIRA project. I checked yesterday</p>",
        "id": 257760747,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1634329921
    },
    {
        "content": "<p>no, the JIRA file has nothing to do with the errors you get either locally or in the CI-build.  I've just cloned your repository and am running the publisher locally to see what I get</p>",
        "id": 257760889,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1634329966
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192166\">@Jean Duteau</span> Thanks. I only get 5 errors locally but the CI build seems to somehow have mixed up profiles as if some resource is corrupted. I just did another push and am waiting for the build.</p>",
        "id": 257761171,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1634330085
    },
    {
        "content": "<p>when I do that, I get 89 errors, 18 warnings, and 8 information messages.  and I just did a git pull and didn't get anything so I'm not sure that your push actually went through.</p>",
        "id": 257761263,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1634330145
    },
    {
        "content": "<p>Your canonical URI does not match the path... in case...</p>",
        "id": 257761356,
        "sender_full_name": "John Moehrke",
        "timestamp": 1634330177
    },
    {
        "content": "<p>I guess you build on WINDOWS... the CI build is linux.. so case matters</p>",
        "id": 257761388,
        "sender_full_name": "John Moehrke",
        "timestamp": 1634330192
    },
    {
        "content": "<p>and I'm building on a Mac (if case ends up being the problem)</p>",
        "id": 257761446,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1634330220
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191404\">John Moehrke</span> <a href=\"#narrow/stream/179252-IG-creation/topic/CI.20not.20working/near/257761356\">said</a>:</p>\n<blockquote>\n<p>Your canonical URI does not match the path... in case...</p>\n</blockquote>\n<p>In the latest code, that isn't true, in the package-list.json and the IG resource, the canonical appears to match the path.</p>",
        "id": 257761813,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1634330384
    },
    {
        "content": "<p>okay</p>",
        "id": 257761907,
        "sender_full_name": "John Moehrke",
        "timestamp": 1634330409
    },
    {
        "content": "<p>didn't seem to match on the build site</p>",
        "id": 257761924,
        "sender_full_name": "John Moehrke",
        "timestamp": 1634330417
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span> <span class=\"user-mention\" data-user-id=\"192166\">@Jean Duteau</span>  <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> <br>\nThat case issue was supposed to have been fixed. It should have been all lower case. It may not have totally completed. It required changes in places I do not have access to so Lloyd or Grahame or someone else with admin permissions had to do it. I think Lloyd tried to fix it. <br>\nAssuming that is the problem. ... and it probably is. I know I have to use upper case in my browser to get the IG. How can this be fixed? I am running on WIndows.</p>",
        "id": 257762990,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1634330954
    },
    {
        "content": "<p>The only place you wouldn't have permission to fix directly would be JiraSpecArtifacts, and that can only trigger a single warning (that your JiraSpecArtifacts file doesn't line up).  All the files in Git for your IG you should have full commit rights to...</p>",
        "id": 257763275,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1634331120
    },
    {
        "content": "<p>It may be simplest to just fix it via Git's web interface (if that's the problem).</p>",
        "id": 257763355,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1634331146
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"192166\">Jean Duteau</span> <a href=\"#narrow/stream/179252-IG-creation/topic/CI.20not.20working/near/257761446\">said</a>:</p>\n<blockquote>\n<p>and I'm building on a Mac (if case ends up being the problem)</p>\n</blockquote>\n<p>Hmm... by default, the Mac file system is also case-insensitive (like Windows).  So it is interesting that you're also getting the 89 errors (if case really is the culprit).  Or did you intentionally switch your file system to the case-sensitive format?</p>",
        "id": 257764183,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1634331588
    },
    {
        "content": "<p>is it legal to use urn in a code system?</p>\n<div class=\"codehilite\"><pre><span></span><code>    {\n        &quot;system&quot; : &quot;urn:iso:std:iso:11073:10101&quot;,\n        &quot;code&quot; : &quot;150020&quot;\n      },\n</code></pre></div>",
        "id": 257764751,
        "sender_full_name": "John Moehrke",
        "timestamp": 1634331813
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span> That's the official system for 10101 - its right in the FHIR spec. It's been that way for years.</p>",
        "id": 257764945,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1634331911
    },
    {
        "content": "<p>I have many cases where historic systems are URN... but I had to move to a FHIR friendly URL... because... no idea, but I am told that programmers don't like URNs, especially OID urns</p>",
        "id": 257765103,
        "sender_full_name": "John Moehrke",
        "timestamp": 1634331985
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span> I believe the intent is to change that as the MDC code system gets integrated into FHIR. That will break a lot of uses when it happens; especially my IG and everything based upon it.</p>",
        "id": 257765810,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1634332392
    },
    {
        "content": "<p>it just jumped out at me... I have been yelled at for not using urls</p>",
        "id": 257765962,
        "sender_full_name": "John Moehrke",
        "timestamp": 1634332466
    },
    {
        "content": "<p>no idea why that would work locally and fail on ci</p>",
        "id": 257765984,
        "sender_full_name": "John Moehrke",
        "timestamp": 1634332477
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span> Do you think the urn: is the problem? It has not been a problem before. I did have the IG down to 5 errors not too long ago but there have been lots of changes that I have not kept up with - I didn't even know about the new stream for the IG builds. Its been a while since I did a build (on GitHub). Have done mostly local after publisher updates</p>",
        "id": 257766552,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1634332685
    },
    {
        "content": "<p>Im poking to see what <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> might say</p>",
        "id": 257766603,
        "sender_full_name": "John Moehrke",
        "timestamp": 1634332730
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span> how did your local build go?</p>",
        "id": 257766700,
        "sender_full_name": "John Moehrke",
        "timestamp": 1634332783
    },
    {
        "content": "<p>to me, the main culprit is that when I dl what is in Git and build it (on my mac and on my windows machine), I get the same as what is in CI, so that says that you haven't committed all of the changes you have on your local system to CI</p>",
        "id": 257766708,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1634332790
    },
    {
        "content": "<p>I was wondering that too</p>",
        "id": 257767039,
        "sender_full_name": "John Moehrke",
        "timestamp": 1634332951
    },
    {
        "content": "<p>okay, just did a pull and now I get 5 errors and 1 warning, so that appears to have been the culprit</p>",
        "id": 257767292,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1634333086
    },
    {
        "content": "<p>why is there a ./resources and also  ./input/resources ?</p>",
        "id": 257767308,
        "sender_full_name": "John Moehrke",
        "timestamp": 1634333097
    },
    {
        "content": "<p>does the build pull from different pathways local vs ci?</p>",
        "id": 257767476,
        "sender_full_name": "John Moehrke",
        "timestamp": 1634333188
    },
    {
        "content": "<p>does anyone remember the page that lists all of the IGs and their status?</p>",
        "id": 257767895,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1634333434
    },
    {
        "content": "<p>okay, interesting caching thing going on.  when I check out a clean build and run the publisher, I get the 89 errors and 18 warnings.  when I run it a 2nd time, I only get 5 errors and 1 warning.</p>",
        "id": 257768297,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1634333662
    },
    {
        "content": "<p><a href=\"https://fhir.github.io/auto-ig-builder/builds.html\">https://fhir.github.io/auto-ig-builder/builds.html</a></p>",
        "id": 257768422,
        "sender_full_name": "John Moehrke",
        "timestamp": 1634333743
    },
    {
        "content": "<p>I get 89 locally</p>",
        "id": 257768431,
        "sender_full_name": "John Moehrke",
        "timestamp": 1634333749
    },
    {
        "content": "<p>I confirm, second build changes to 5</p>",
        "id": 257768997,
        "sender_full_name": "John Moehrke",
        "timestamp": 1634334027
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> the first time that this IG is run (<a href=\"https://github.com/HL7/phd/\">https://github.com/HL7/phd/</a>) there is no iso1107310101.cache and the validator basically can't determine what codes belong to the various value sets that use the 10101 code system.  The 2nd time through the cache file does exist and it then does know what codes exist.  Here is the cache file that got created the first run though: <a href=\"/user_uploads/10155/pjzbiEHIcXzZWOLJf0I18o71/iso1107310101.cache\">iso1107310101.cache</a></p>",
        "id": 257772333,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1634335608
    },
    {
        "content": "<p>when I delete just that cache file and re-run, I get the 89 errors where it doesn't know what codes are in the code system.</p>",
        "id": 257772678,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1634335799
    },
    {
        "content": "<p>that doesn't make sense. the cache is built from previous answers</p>",
        "id": 257772904,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1634335911
    },
    {
        "content": "<p>i agree that it doesn't make sense, but it's reproduceable :(</p>",
        "id": 257773024,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1634335959
    },
    {
        "content": "<p>with no cache file - 89 errors/18 warnings<br>\nwith cache file - 5 errors/1 warning</p>",
        "id": 257773391,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1634336130
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192166\">@Jean Duteau</span> <br>\nGood debug work ! <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>",
        "id": 257773999,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1634336449
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span> urn's are ok, though resolvable URLs are preferred.  OIDs are evil and UUIDs are just as bad when it comes to representing content that developers and IG designers must type and recognize.</p>",
        "id": 257774958,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1634336975
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192166\">@Jean Duteau</span>  I reproduced the error as well. I noted that all the directories and files in the input-cache are not generated at the start - just the txcache. Could it be that a cache file needed it generated later than when it is needed?</p>",
        "id": 257774970,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1634336986
    },
    {
        "content": "<p>no. as grahame said, it shouldn't matter as the cache files are <em>supposed</em> to be just caching the vocabulary calls.  we'll need him to figure out why there is different validation output depending on the presence of this one cache file.</p>",
        "id": 257775082,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1634337042
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> Any news on the cache issue?</p>",
        "id": 258044712,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1634570058
    },
    {
        "content": "<p>I spent several hours on it yesterday. Right now, I don't know what I'm looking for</p>",
        "id": 258081111,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1634583514
    },
    {
        "content": "<p>well, that wasn't much fun. I took me an entire day but I tracked the problem down. fixed next release</p>",
        "id": 258128339,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1634607545
    },
    {
        "content": "<p>next release will blow everyone's terminology cache away</p>",
        "id": 258128973,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1634608145
    },
    {
        "content": "<p>So which is the correct validation? No cache: 89 errors or Cache: 5 errors? (Really hoping it's the latter!)</p>",
        "id": 258133480,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1634611964
    },
    {
        "content": "<p>no cache</p>",
        "id": 258148070,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1634625289
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> Thanks for your work. I certainly could not have done it! The down side I am still getting the same 89 errors and they don't make sense. It's like it can't find my code systems and value sets or the codes used by them. Then again my publisher is still 6 days old - which is the 13th of October. Has an update been pushed yet?</p>",
        "id": 258190573,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1634648726
    },
    {
        "content": "<p>it does find the code systems, it's just that some of the codes you are specifying don't exist in the version of the code system that <a href=\"http://tx.fhir.org\">tx.fhir.org</a> knows about.  Codes 68193, 528401, and 8452096 aren't valid according to <a href=\"http://tx.fhir.org\">tx.fhir.org</a>.  And since you reference those codes in your profiles, that causes a lot of profile validation errors.</p>",
        "id": 258218333,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1634658328
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192166\">@Jean Duteau</span> Are you able to ascertain that its only those codes? When I get the 5-error result the 5-errors are still due to missing codes. Those codes do not yet exist in the RTMSS for a variety of reasons, even though they have been around for more than 10 years.</p>",
        "id": 258221683,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1634659302
    },
    {
        "content": "<p>well, i'd start with fixing the error with those codes.  NOTE: the \"5-error result\" is just wrong because the cache was being used incorrectly, so I wouldn't even look at it.  I'd reach out to <span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> to see if he can update the 10101 code system to a version that has those codes.</p>",
        "id": 258221913,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1634659366
    },
    {
        "content": "<p>The version of 11073-10101 (MDC) that we have on <a href=\"http://tx.fhir.org\">tx.fhir.org</a> now is 2020-06-18.  If there is an updated version available, it can be updated on the server.</p>",
        "id": 258231264,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1634662482
    },
    {
        "content": "<p>I haven't done the release yet - later this week, probably</p>",
        "id": 258251637,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1634669374
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> Dropped down to 6 errors with update. Missing MDC codes. These are known. Thanks for the fix.</p>",
        "id": 259140686,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1635273111
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192228\">@Brian Reinhold</span> What's the current release (date) of MDC?  Am I recalling correctly that you (or maybe John Rhoads) provided it for me originally?</p>",
        "id": 259148084,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1635276269
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span>  Unfortunately, I don't know. THe problem with the missing codes (I believe) is on our end as they have not been submitted into the MDC Rosetta. These missing codes are only used in V2 PCD-01 messages and now FHIR. They are not used by 11073 devices. That may explain their lack of inclusion but I am not sure.</p>\n<p>These are the set of codes that are used only in V2 and FHIR:</p>\n<div class=\"codehilite\"><pre><span></span><code>531969  MDC_ID_MODEL_NUMBER\n531970  MDC_ID_MODEL_MANUFACTURER\n531971  MDC_ID_PROD_SPEC_UNSPECIFIED\n531972  MDC_ID_PROD_SPEC_SERIAL\n531973  MDC_ID_PROD_SPEC_PART\n531974  MDC_ID_PROD_SPEC_HW\n531975  MDC_ID_PROD_SPEC_SW\n531976  MDC_ID_PROD_SPEC_FW\n531977  MDC_ID_PROD_SPEC_PROTOCOL\n531978  MDC_ID_PROD_SPEC_GMDN\n532352  MDC_REG_CERT_DATA_CONTINUA_VERSION\n532353  MDC_REG_CERT_DATA_CONTINUA_CERT_DEV_LIST\n532354  MDC_REG_CERT_DATA_CONTINUA_REG_STATUS\n532355  MDC_REG_CERT_DATA_CONTINUA_AHD_CERT_LIST\n68220   MDC_TIME_SYNC_PROTOCOL\n68219   MDC_TIME_CAP_STATE\n68224   MDC_TIME_RES_REL_HI_RES\n68223   MDC_TIME_RES_REL\n68222   MDC_TIME_RES_ABS\n68226   MDC_TIME_RES_BO\n68221   MDC_TIME_SYNC_ACCURACY\n68229   MDC_ATTR_TICK_RES\n</code></pre></div>",
        "id": 259148729,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1635276594
    }
]