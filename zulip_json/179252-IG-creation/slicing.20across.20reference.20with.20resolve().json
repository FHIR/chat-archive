[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> Now that you've released the update for this in v4.2.22 \"Fix problem evaluating \"type\" discriminators ending with .resolve()\", can you provide an example (at least one) of the syntax that the code is expecting to be used for the discriminator path and the slice details for a specific type on the referenced resource (the \"other end\" of the resolve())?</p>",
        "id": 195780834,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1588201413
    },
    {
        "content": "<p>this, from <a href=\"http://hl7.org/fhir/profiling.html\" title=\"http://hl7.org/fhir/profiling.html\">http://hl7.org/fhir/profiling.html</a></p>\n<p>List.entry  type    item.resolve()  Entries are differentiated by the type of the target element that the reference points to</p>",
        "id": 195781237,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588201709
    },
    {
        "content": "<p>Yes.  I've actually looked at that probably a hundred times - but the details aren't really there.  And it certainly didn't work as expected before.  It would be good to know what has changed and how it has changed now, and to see some full example(s) of how it is supposed to work (especially with Composition, rather than List).</p>",
        "id": 195783241,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1588203192
    },
    {
        "content": "<p>Composition.section.entry isn't modeled the same as List.entry - the example for List doesn't (or didn't) fit for Composition.</p>",
        "id": 195783411,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1588203323
    },
    {
        "content": "<p>ok, well, here's an example using list. Here's the profile which says that the list has 1 Condition, followed by 1..3 Observations:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;StructureDefinition</span> <span class=\"na\">xmlns=</span><span class=\"s\">&quot;http://hl7.org/fhir&quot;</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;id</span> <span class=\"na\">value=</span><span class=\"s\">&quot;profile-slicing-type-resolve&quot;</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;url</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://hl7.org/fhir/test/StructureDefinition/profile-slicing-type-resolve&quot;</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;version</span> <span class=\"na\">value=</span><span class=\"s\">&quot;0.1.0&quot;</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;name</span> <span class=\"na\">value=</span><span class=\"s\">&quot;TestProfileTypeResolve&quot;</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;title</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Test Profile Type Resolve&quot;</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;status</span> <span class=\"na\">value=</span><span class=\"s\">&quot;draft&quot;</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;date</span> <span class=\"na\">value=</span><span class=\"s\">&quot;2030-04-30T06:30:54+00:00&quot;</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;publisher</span> <span class=\"na\">value=</span><span class=\"s\">&quot;HL7&quot;</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;fhirVersion</span> <span class=\"na\">value=</span><span class=\"s\">&quot;4.0.0&quot;</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;kind</span> <span class=\"na\">value=</span><span class=\"s\">&quot;resource&quot;</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;abstract</span> <span class=\"na\">value=</span><span class=\"s\">&quot;false&quot;</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;type</span> <span class=\"na\">value=</span><span class=\"s\">&quot;List&quot;</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;baseDefinition</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://hl7.org/fhir/StructureDefinition/List&quot;</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;derivation</span> <span class=\"na\">value=</span><span class=\"s\">&quot;constraint&quot;</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;differential&gt;</span>\n    <span class=\"nt\">&lt;element</span> <span class=\"na\">id=</span><span class=\"s\">&quot;List.entry&quot;</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;path</span> <span class=\"na\">value=</span><span class=\"s\">&quot;List.entry&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;slicing&gt;</span>\n        <span class=\"nt\">&lt;discriminator&gt;</span>\n          <span class=\"nt\">&lt;type</span> <span class=\"na\">value=</span><span class=\"s\">&quot;type&quot;</span><span class=\"nt\">/&gt;</span>\n          <span class=\"nt\">&lt;path</span> <span class=\"na\">value=</span><span class=\"s\">&quot;item.resolve()&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;/discriminator&gt;</span>\n        <span class=\"nt\">&lt;ordered</span> <span class=\"na\">value=</span><span class=\"s\">&quot;false&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;rules</span> <span class=\"na\">value=</span><span class=\"s\">&quot;closed&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/slicing&gt;</span>\n    <span class=\"nt\">&lt;/element&gt;</span>\n    <span class=\"nt\">&lt;element</span> <span class=\"na\">id=</span><span class=\"s\">&quot;List.entry:slice1&quot;</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;path</span> <span class=\"na\">value=</span><span class=\"s\">&quot;List.entry&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;sliceName</span> <span class=\"na\">value=</span><span class=\"s\">&quot;slice1&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;min</span> <span class=\"na\">value=</span><span class=\"s\">&quot;1&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;max</span> <span class=\"na\">value=</span><span class=\"s\">&quot;1&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/element&gt;</span>\n    <span class=\"nt\">&lt;element</span> <span class=\"na\">id=</span><span class=\"s\">&quot;List.entry:slice1.item&quot;</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;path</span> <span class=\"na\">value=</span><span class=\"s\">&quot;List.entry.item&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;type&gt;</span>\n        <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Reference&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;targetProfile</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://hl7.org/fhir/StructureDefinition/Condition&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/type&gt;</span>\n    <span class=\"nt\">&lt;/element&gt;</span>\n    <span class=\"nt\">&lt;element</span> <span class=\"na\">id=</span><span class=\"s\">&quot;List.entry:slice2&quot;</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;path</span> <span class=\"na\">value=</span><span class=\"s\">&quot;List.entry&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;sliceName</span> <span class=\"na\">value=</span><span class=\"s\">&quot;slice2&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;min</span> <span class=\"na\">value=</span><span class=\"s\">&quot;1&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;max</span> <span class=\"na\">value=</span><span class=\"s\">&quot;3&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/element&gt;</span>\n    <span class=\"nt\">&lt;element</span> <span class=\"na\">id=</span><span class=\"s\">&quot;List.entry:slice2.item&quot;</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;path</span> <span class=\"na\">value=</span><span class=\"s\">&quot;List.entry.item&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;type&gt;</span>\n        <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Reference&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;targetProfile</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://hl7.org/fhir/StructureDefinition/Observation&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/type&gt;</span>\n    <span class=\"nt\">&lt;/element&gt;</span>\n  <span class=\"nt\">&lt;/differential&gt;</span>\n<span class=\"nt\">&lt;/StructureDefinition&gt;</span>\n</code></pre></div>",
        "id": 195793794,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588215249
    },
    {
        "content": "<p>here's a list that validates:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;List</span> <span class=\"na\">xmlns=</span><span class=\"s\">&quot;http://hl7.org/fhir&quot;</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;contained&gt;</span>\n     <span class=\"nt\">&lt;Condition&gt;</span>\n       <span class=\"nt\">&lt;id</span> <span class=\"na\">value=</span><span class=\"s\">&quot;i1&quot;</span><span class=\"nt\">/&gt;</span>\n       <span class=\"nt\">&lt;subject&gt;</span>\n         <span class=\"nt\">&lt;reference</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Patient/example&quot;</span><span class=\"nt\">/&gt;</span>\n       <span class=\"nt\">&lt;/subject&gt;</span>\n    <span class=\"nt\">&lt;/Condition&gt;</span>\n  <span class=\"nt\">&lt;/contained&gt;</span>\n  <span class=\"nt\">&lt;contained&gt;</span>\n    <span class=\"nt\">&lt;Observation&gt;</span>\n      <span class=\"nt\">&lt;id</span> <span class=\"na\">value=</span><span class=\"s\">&quot;i2&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;status</span> <span class=\"na\">value=</span><span class=\"s\">&quot;final&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;code&gt;</span>\n        <span class=\"nt\">&lt;text</span> <span class=\"na\">value=</span><span class=\"s\">&quot;final&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/code&gt;</span>\n    <span class=\"nt\">&lt;/Observation&gt;</span>\n  <span class=\"nt\">&lt;/contained&gt;</span>\n  <span class=\"nt\">&lt;status</span> <span class=\"na\">value=</span><span class=\"s\">&quot;current&quot;</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;mode</span> <span class=\"na\">value=</span><span class=\"s\">&quot;working&quot;</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;entry&gt;</span>\n    <span class=\"nt\">&lt;item&gt;</span>\n      <span class=\"nt\">&lt;reference</span> <span class=\"na\">value=</span><span class=\"s\">&quot;#i1&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/item&gt;</span>\n  <span class=\"nt\">&lt;/entry&gt;</span>\n  <span class=\"nt\">&lt;entry&gt;</span>\n    <span class=\"nt\">&lt;item&gt;</span>\n      <span class=\"nt\">&lt;reference</span> <span class=\"na\">value=</span><span class=\"s\">&quot;#i2&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/item&gt;</span>\n  <span class=\"nt\">&lt;/entry&gt;</span>\n<span class=\"nt\">&lt;/List&gt;</span>\n</code></pre></div>\n\n\n<p>and here's one that doesn't (2 errors):</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;List</span> <span class=\"na\">xmlns=</span><span class=\"s\">&quot;http://hl7.org/fhir&quot;</span><span class=\"nt\">&gt;</span>\n  <span class=\"nt\">&lt;contained&gt;</span>\n     <span class=\"nt\">&lt;Condition&gt;</span>\n       <span class=\"nt\">&lt;id</span> <span class=\"na\">value=</span><span class=\"s\">&quot;i1&quot;</span><span class=\"nt\">/&gt;</span>\n       <span class=\"nt\">&lt;subject&gt;</span>\n         <span class=\"nt\">&lt;reference</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Patient/example&quot;</span><span class=\"nt\">/&gt;</span>\n       <span class=\"nt\">&lt;/subject&gt;</span>\n    <span class=\"nt\">&lt;/Condition&gt;</span>\n  <span class=\"nt\">&lt;/contained&gt;</span>\n  <span class=\"nt\">&lt;contained&gt;</span>\n     <span class=\"nt\">&lt;Condition&gt;</span>\n      <span class=\"nt\">&lt;id</span> <span class=\"na\">value=</span><span class=\"s\">&quot;i2&quot;</span><span class=\"nt\">/&gt;</span>\n       <span class=\"nt\">&lt;subject&gt;</span>\n         <span class=\"nt\">&lt;reference</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Patient/example&quot;</span><span class=\"nt\">/&gt;</span>\n       <span class=\"nt\">&lt;/subject&gt;</span>\n    <span class=\"nt\">&lt;/Condition&gt;</span>\n  <span class=\"nt\">&lt;/contained&gt;</span>\n  <span class=\"nt\">&lt;status</span> <span class=\"na\">value=</span><span class=\"s\">&quot;current&quot;</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;mode</span> <span class=\"na\">value=</span><span class=\"s\">&quot;working&quot;</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;entry&gt;</span>\n    <span class=\"nt\">&lt;item&gt;</span>\n      <span class=\"nt\">&lt;reference</span> <span class=\"na\">value=</span><span class=\"s\">&quot;#i1&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/item&gt;</span>\n  <span class=\"nt\">&lt;/entry&gt;</span>\n  <span class=\"nt\">&lt;entry&gt;</span>\n    <span class=\"nt\">&lt;item&gt;</span>\n      <span class=\"nt\">&lt;reference</span> <span class=\"na\">value=</span><span class=\"s\">&quot;#i2&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/item&gt;</span>\n  <span class=\"nt\">&lt;/entry&gt;</span>\n<span class=\"nt\">&lt;/List&gt;</span>\n</code></pre></div>",
        "id": 195793815,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588215298
    },
    {
        "content": "<p>Thanks.  I'm working on some instances that could server as example(s), too, based on our Composition.section.entry slicing.</p>",
        "id": 195793889,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1588215372
    }
]