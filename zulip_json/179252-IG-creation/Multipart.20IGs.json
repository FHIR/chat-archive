[
    {
        "content": "<p>Is it possible to build an IG in multiple parts, and then combine them into a joint IG as part of the build or publication process?</p>\n<p>I'm currently working on an IG that has some large valuesets in it. If I try to build it as one IG, it takes a couple of hours for IG publisher to run (if it doesn't crash from running out of memory) locally. However, if I strip the valuesets out into separate IGs, and make my main IG dependent on the valueset IGs, then I can build all of them in less than an hour. Although this works from the packaging side (anything that uses my skinny IG also brings in the vocab IGs), it means that the vocab doesn't show up in the artefact list, etc. of the main IG. Is there a way to get the faster builds of the multiple IG approach, along with the valueset visibility that comes with the single IG approach?</p>",
        "id": 250434823,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1629770498
    },
    {
        "content": "<p>no easy way. but the txCache is supposed to mean that this isn't such a big problem</p>",
        "id": 250435282,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1629770979
    },
    {
        "content": "<p>Right -- doesn't cause a problem for using the vocabulary if you know about it; it just means the value set isn't \"advertised\" anywhere.</p>",
        "id": 250435363,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1629771076
    },
    {
        "content": "<p>so you want something more than .dependsOn.</p>",
        "id": 250476478,
        "sender_full_name": "John Moehrke",
        "timestamp": 1629807858
    },
    {
        "content": "<p>so your narrative can easily handle this, so are you just looking for the valueset to show up in the artifacts page?</p>",
        "id": 250476518,
        "sender_full_name": "John Moehrke",
        "timestamp": 1629807893
    },
    {
        "content": "<p>We've heard the requirement to 'import' artifacts into an IG for a wide variety of reasons.  I really think we should re-explore this question.</p>",
        "id": 250484875,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1629811888
    },
    {
        "content": "<p>Yes please</p>",
        "id": 250494676,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1629816006
    },
    {
        "content": "<p><a href=\"https://github.com/HL7/ig-template-base/issues/173\">https://github.com/HL7/ig-template-base/issues/173</a> ?</p>",
        "id": 250494787,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1629816049
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191404\">John Moehrke</span> <a href=\"#narrow/stream/179252-IG-creation/topic/Multipart.20IGs/near/250476518\">said</a>:</p>\n<blockquote>\n<p>so your narrative can easily handle this, so are you just looking for the valueset to show up in the artifacts page?</p>\n</blockquote>\n<p>Exactly. I'd like it to all appear as one IG despite the fact that I've built it as three for performance reasons. </p>\n<p>I don't know if this is possible (well, I do know it isn't <em>currently</em> possible), because as soon as you get away from the hierarchical dependsOn relationship, you need to start checking crossreferences and links, and I think that's what slows everything down.</p>\n<p>Alternatively, modifying the IG publisher so that it doesn't slow down as much with large value sets would allow me to use a single IG and solve the problem.</p>",
        "id": 250519757,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1629826441
    },
    {
        "content": "<p>yup. all I can think of is someone complaining to their doctor that when they hit their head against a wall that it hurts... and the doctor tells them to stop hitting their head aginst the wall</p>",
        "id": 250521914,
        "sender_full_name": "John Moehrke",
        "timestamp": 1629827396
    },
    {
        "content": "<p>how would I reproduce this?</p>",
        "id": 250524936,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1629828745
    },
    {
        "content": "<p>The IGs I've been playing with have been put on <a href=\"https://github.com/ElliotSilver/infoway-tx\">https://github.com/ElliotSilver/infoway-tx</a>. (I'm guessing that because I've got 5 IG in one repository, the CI build won't work.)</p>",
        "id": 250567141,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1629851060
    },
    {
        "content": "<p>right. 1 IG per repo for CI build</p>",
        "id": 250571013,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1629854884
    },
    {
        "content": "<p>Do you need me to refactor it, or can you investigate as is?</p>",
        "id": 250623240,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1629899690
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> did you want me change the github layout?</p>",
        "id": 250697934,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1629934550
    },
    {
        "content": "<p>it's not my problem; you would have to change it if it was an HL7 IG but it's not. So up to you and your customer if you want CI build or not. I would personally</p>",
        "id": 250709217,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1629943196
    },
    {
        "content": "<p>Well, right now it's just an experiment -- and the only one looking at it, other than me, is you. I suspect that we will restructure if we decide to go ahead, but unless you need it for your tests, I'll leave it for now.</p>",
        "id": 250709515,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1629943393
    },
    {
        "content": "<p>ok. but which one do I run to reproduce the two problems you want me to look at?</p>",
        "id": 250709598,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1629943463
    },
    {
        "content": "<p>To look at the long build times, compare building \"term\" to building \"tx.1\", \"tx.2\", tx.3\" then \"tx\".<br>\nTo look at the odd valueset rendering, build \"tx\". (Which requires you to have already built \"tx.1\", \"tx.2\", tx.3\", unless you remove the dependencies.)</p>",
        "id": 250709748,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1629943654
    },
    {
        "content": "<p>running term:</p>\n<blockquote>\n<p>C:\\work\\org.hl7.fhir.igs\\infoway-tx\\term\\fsh-generated\\resources\\ImplementationGuide-ca.infoway.tx.json</p>\n</blockquote>",
        "id": 250710205,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1629944159
    },
    {
        "content": "<blockquote>\n<p>Error Parsing File C:\\work\\org.hl7.fhir.igs\\infoway-tx\\term\\fsh-generated\\resources\\ImplementationGuide-ca.infoway.tx.json: C:\\work\\org.hl7.fhir.igs\\infoway-tx\\term\\fsh-generated\\resources\\ImplementationGuide-ca.infoway.tx.json (The system cannot find the path specified)</p>\n</blockquote>",
        "id": 250710252,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1629944169
    },
    {
        "content": "<blockquote>\n<p>Caused by: java.io.FileNotFoundException: C:\\work\\org.hl7.fhir.igs\\infoway-tx\\term\\fsh-generated\\resources\\ImplementationGuide-ca.infoway.tx.json (The system cannot find the path specified)</p>\n</blockquote>",
        "id": 250710256,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1629944175
    },
    {
        "content": "<p>Arg. Ok, let me see if I can track that down.</p>",
        "id": 250710283,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1629944217
    },
    {
        "content": "<p>IG publisher doesn't appear to like a sushi project that doesn't actually contain any fsh files. Try running sushi manually once to create the IG resource and \"fsh\" and \"fsh-generated\" directories.</p>",
        "id": 250710639,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1629944608
    },
    {
        "content": "<p>run it where? on what?</p>",
        "id": 250710839,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1629944818
    },
    {
        "content": "<p>In the term directory, run sushi without any parameters before you run the publisher.<br>\nYou'll need to repeat that in the directory for each of the other projects tx, tx.1, tx.2, tx.3 as well.</p>",
        "id": 250710981,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1629944981
    },
    {
        "content": "<p>10:10 to run the term IG. Is that what you expected?</p>",
        "id": 250711575,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1629945701
    },
    {
        "content": "<p>Not at all. Took me just under 2 hours.</p>",
        "id": 250711633,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1629945743
    },
    {
        "content": "<p>I just kicked off building that about 18 minutes ago, and it is currently on \"Validating Conformance Resources\".</p>",
        "id": 250711712,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1629945864
    },
    {
        "content": "<p>how much memory are you giving it? Sounds like it's memory constrained</p>",
        "id": 250711744,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1629945908
    },
    {
        "content": "<blockquote>\n<p>Detected Java version: 11.0.9 from C:\\Program Files\\Java\\jdk-11.0.9 on Windows 10/amd64 (64bit). 16344MB available</p>\n</blockquote>",
        "id": 250711754,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1629945919
    },
    {
        "content": "<blockquote>\n<p>Detected Java version: 14.0.1 from /Library/Java/JavaVirtualMachines/jdk-14.0.1.jdk/Contents/Home on Mac OS X/x86_64 (64bit). 8192MB available</p>\n</blockquote>",
        "id": 250711771,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1629945958
    },
    {
        "content": "<p>8GB of physical memory too. Is there any benefit to increasing java to 16GB?</p>",
        "id": 250711843,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1629946051
    },
    {
        "content": "<p>I don't know</p>",
        "id": 250712032,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1629946297
    },
    {
        "content": "<p>is it using all that you gave it?</p>",
        "id": 250712041,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1629946308
    },
    {
        "content": "<p>what does this say at the end?</p>",
        "id": 250712093,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1629946338
    },
    {
        "content": "<h2>Memory (MB): Use = 10261, Free = 810, Total = 11072, Max =16344</h2>\n<p>Reclaiming memory...</p>\n<h2>Memory (MB): Use = 2936, Free = 6959, Total = 9896, Max =16344</h2>",
        "id": 250712094,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1629946338
    },
    {
        "content": "<p>I'll let you know in a couple of hours.</p>",
        "id": 250712112,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1629946372
    },
    {
        "content": "<p>I've found some cases that definitely can benefit from going to 16GB (or possibly even more, if available - like with UTG).</p>",
        "id": 250712208,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1629946463
    },
    {
        "content": "<p>UTG definitely needs all the 16GB. Hammers memory</p>",
        "id": 250712228,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1629946493
    },
    {
        "content": "<p>You have two pretty big value sets</p>",
        "id": 250712308,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1629946575
    },
    {
        "content": "<p>I can build UTG fine with 16GB on my M1 Mac Air, but it wasn't working too well with that on my Intel Mac Pro.</p>",
        "id": 250712358,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1629946671
    },
    {
        "content": "<p>Yeah -- pCLOCD and the Canadian Clinical Drug Data Set.</p>",
        "id": 250712640,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1629946902
    },
    {
        "content": "<p>which is the value set that renders wrongly?</p>",
        "id": 250713835,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1629948028
    },
    {
        "content": "<p>AcknowledgementCondition</p>",
        "id": 250713885,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1629948111
    },
    {
        "content": "<p>and what's wrong with it's rendering?</p>",
        "id": 250713959,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1629948212
    },
    {
        "content": "<p>I think there's some weird things about the value set itself, but the rendering is mostly what I expect</p>",
        "id": 250714140,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1629948310
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/G2Pz2vPuJ6Juh4TijiBOKwXG/image.png\">image.png</a> <br>\nShould the version be the ValueSet.version value?<br>\nWhere is the CLD coming from, since there is no compose element, and why does it decide that it is all values from the CodeSystem, when it isn't?</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/G2Pz2vPuJ6Juh4TijiBOKwXG/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/G2Pz2vPuJ6Juh4TijiBOKwXG/image.png\"></a></div>",
        "id": 250714520,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1629948666
    },
    {
        "content": "<p>the value set version is 0.1.0 so that's what renders</p>",
        "id": 250714701,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1629948735
    },
    {
        "content": "<p>it doesn't say it's all values from the code system. It just says that all the codes are from the code system</p>",
        "id": 250714799,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1629948831
    },
    {
        "content": "<p>I see version 20160311 in the xml.</p>",
        "id": 250715065,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1629949016
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/fHJjAPq8Y55xLHFyOS5Qe2zR/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/fHJjAPq8Y55xLHFyOS5Qe2zR/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/fHJjAPq8Y55xLHFyOS5Qe2zR/image.png\"></a></div>",
        "id": 250715099,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1629949045
    },
    {
        "content": "<p>Interesting, the source xml for the valueset has a different version.</p>",
        "id": 250715500,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1629949357
    },
    {
        "content": "<p>you've probably  set the business version to overwrite that</p>",
        "id": 250715670,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1629949425
    },
    {
        "content": "<p>I feel the language implies \"all of the values that are in the code system X, and here they are\" rather than  \"all of the following values are  from X code system\".</p>",
        "id": 250715821,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1629949545
    },
    {
        "content": "<p>you're right about the CLD though. That's a process sequence issue for me.</p>",
        "id": 250715847,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1629949563
    },
    {
        "content": "<p>well, I adjusted the language</p>",
        "id": 250715908,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1629949595
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/M4yqxCpXvAz0IQt4Isfn0-qk/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/M4yqxCpXvAz0IQt4Isfn0-qk/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/M4yqxCpXvAz0IQt4Isfn0-qk/image.png\"></a></div>",
        "id": 250715909,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1629949595
    },
    {
        "content": "<p>Thanks, that's clearer to me.</p>",
        "id": 250715954,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1629949642
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> do you want to fix these two issues, or invoke the review process for them</p>",
        "id": 250716129,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1629949759
    },
    {
        "content": "<p>Technically, the wording change wouldn't qualify as a technical correction.  It's clarifying and there could be debate as to what the wording ought to be, but obviously something like this should require a pretty light review process.  I'll point to it from the other thread as an example of what the process should have a way to address expeditiously.</p>",
        "id": 250717315,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1629950578
    },
    {
        "content": "<p>What's the second issue?</p>",
        "id": 250717350,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1629950595
    },
    {
        "content": "<p>I assume it's the erroneous generation of the CLD.</p>",
        "id": 250717771,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1629950956
    },
    {
        "content": "<p>At present, when rendering the CLD for a valueset, the rendering works like this:</p>\n<ul>\n<li>if there's a narrative, use that </li>\n<li>if there's a compose, use that</li>\n<li>if there's an expansion, use that</li>\n</ul>\n<p>That's not what we want to the ValueSet CLD rendering, particularly because there always is a narrative, since it's been generated already, and it might just be the expansion. I've changed it so that it works like this:</p>\n<ul>\n<li>If there's a narrative that was provided (not generated) use that</li>\n<li>if there's a compose, generate from that</li>\n<li>other wise, use the text \"This ValueSet has no definition\"</li>\n</ul>",
        "id": 250717780,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1629950968
    },
    {
        "content": "<p>What about the issue of publisher tripping over a project with no fsh files, and only a sushi-config?</p>",
        "id": 250718248,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1629951288
    },
    {
        "content": "<p>well, that's by design.</p>",
        "id": 250718322,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1629951338
    },
    {
        "content": "<p>the design is, look for /fsh and if the IG publisher sees it, run Sushi</p>",
        "id": 250718364,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1629951360
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179252-IG-creation/topic/Multipart.20IGs/near/250715670\">said</a>:</p>\n<blockquote>\n<p>you've probably  set the business version to overwrite that</p>\n</blockquote>\n<p>Can you remind me where that flag is?</p>",
        "id": 250723265,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1629954956
    },
    {
        "content": "<p>Nvm, found it -- apply-version. I didn't take any actions to set it, so unless it's defaulting to true, I don't think that's it.</p>",
        "id": 250724778,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1629956094
    },
    {
        "content": "<p>something is overwriting it. I don't know what else would be</p>",
        "id": 250724807,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1629956124
    },
    {
        "content": "<p>Hmm, somewhere between the fsh-generated/resources version of the IG resource, and the temp/pages version of the IG resource, all of the apply-* parameters get added.</p>",
        "id": 250725578,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1629956734
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179252-IG-creation/topic/Multipart.20IGs/near/250712093\">said</a>:</p>\n<blockquote>\n<p>what does this say at the end?</p>\n</blockquote>\n<p>Running  the \"term\" IG with 16GB of java heap:</p>\n<blockquote>\n<p>Sending Usage Stats to Server                                                    (03:03:36.0228)</p>\n<h2>Memory (MB): Use = 5005, Free = 11206, Total = 16212, Max =16384</h2>\n<p>Reclaiming memory...</p>\n<h2>Memory (MB): Use = 2938, Free = 6917, Total = 9856, Max =16384</h2>\n<p>...<br>\nFinished. Times: loading: 00:21.0841, generate: 03:47:56.0479, narrative generation: 01:35.0256, realm-rules: 00:00.0001, previous-version: 00:00.0000, jekyll: 00:39.0131, validation: 02:33:08.0319 (#29), template: 00:16.0027 (#3) (03:48:39.0543)<br>\ncontext [anonymous] 4:2 attribute signposts isn't defined<br>\ncontext [anonymous] 4:2 attribute signposts isn't defined<br>\nValidation output in /Users/elliot/src/infoway-tx/term/output/qa.html<br>\nErrors: 180, Warnings: 0, Info: 0, Broken Links = 143 (03:48:57.0454)</p>\n</blockquote>",
        "id": 250730360,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1629960372
    },
    {
        "content": "<p>it's hard to read those numbers, but it does feel memory constrained</p>",
        "id": 250730454,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1629960466
    },
    {
        "content": "<p>I don't know how you get to that conclusion, but I'll believe you.</p>",
        "id": 250730671,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1629960660
    },
    {
        "content": "<p>I'll continue investigating tomorrow, starting with the apply-* parameters issue. I suspect it is a sushi thing.</p>",
        "id": 250730814,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1629960780
    },
    {
        "content": "<p>template thing?</p>",
        "id": 250731779,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1629961369
    },
    {
        "content": "<p>anyway, try running on a machine with more ram.</p>",
        "id": 250731791,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1629961378
    },
    {
        "content": "<p>It's using an unadulterated fhir.base.template#current template.</p>",
        "id": 250732112,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1629961630
    },
    {
        "content": "<p>Following up...<br>\nBuilding the same IG, but with only 6GB of java heap:</p>\n<blockquote>\n<p>Sending Usage Stats to Server                                                    (48:34.0574)</p>\n<h2>Memory (MB): Use = 3694, Free = 2449, Total = 6144, Max =6144</h2>\n<p>Reclaiming memory...</p>\n<h2>Memory (MB): Use = 2927, Free = 3216, Total = 6144, Max =6144</h2>\n<p>...<br>\nFinished. Times: loading: 00:20.0953, generate: 01:18:54.0111, narrative generation: 00:27.0894, realm-rules: 00:00.0000, previous-version: 00:00.0000, jekyll: 00:41.0863, validation: 35:38.0986 (#29), template: 00:05.0609 (#3) (01:20:05.0177)<br>\ncontext [anonymous] 4:2 attribute signposts isn't defined<br>\ncontext [anonymous] 4:2 attribute signposts isn't defined<br>\nValidation output in /Users/elliot/src/infoway-tx/term/output/qa.html<br>\nErrors: 180, Warnings: 0, Info: 0, Broken Links = 143 (01:20:09.0915)</p>\n</blockquote>\n<p>Interestingly, that's about 3x better performance with less memory.</p>",
        "id": 250782179,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1629988656
    },
    {
        "content": "<p>Returning to a part of this discussion that we kinda skipped over...</p>\n<p><span class=\"user-mention silent\" data-user-id=\"191380\">Elliot Silver</span> <a href=\"#narrow/stream/179252-IG-creation/topic/Multipart.20IGs/near/250723265\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179252-IG-creation/topic/Multipart.20IGs/near/250715670\">said</a>:</p>\n<blockquote>\n<p>you've probably  set the business version to overwrite that</p>\n</blockquote>\n<p>Can you remind me where that flag is?</p>\n</blockquote>\n<p>I'm working on a different IG now, and seeing the same behaviour of applying IG settings to the resources -- publisher, version, etc. According to the <a href=\"https://confluence.hl7.org/display/FHIR/IG+Publisher+Documentation\">documentation</a> the default values of IG publisher parameters apply-publisher, apply-version, etc. is false. My IG does not include those as parameters. However it seems that ig-template-base inserts those parameters into the IG during the onLoad processing if not present.</p>\n<p>Playing around a bit, if publisher is not set in a profile, but is set in the IG resource, I see the following behaviours:</p>\n<ul>\n<li>apply-publisher not present in IG:  IG publisher info present in profile</li>\n<li>apply-publisher set to false in IG:  no publisher info present in profile</li>\n<li>apply-publisher set to true in IG: IG publisher info present in profile.</li>\n</ul>\n<p>Similarly, if I set a version in a profile, and a version in the IG, I get:</p>\n<ul>\n<li>apply-version not present in IG:  IG version present in profile</li>\n<li>apply-version set to false in IG:  profile version present in profile</li>\n<li>apply-version set to true in IG: IG version present in profile.</li>\n</ul>\n<p>I guess the part here that's non-intuitive is the template setting apply-* to true if it isn't present. (It might also be nice to have a third option: true, false, apply-if-absent-from-resource.)</p>",
        "id": 254660875,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1632467261
    },
    {
        "content": "<p>well, do you want to document that somewhere?</p>",
        "id": 254663337,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1632468813
    },
    {
        "content": "<p>Is that the expected behaviour? It seems odd that the IG publisher defaults to off, but the standard template defaults to switching it on.</p>",
        "id": 254663545,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1632468946
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> , what's the expected behaviour here? This dates back to the earliest checkin of the ig-template-base.</p>",
        "id": 254717877,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1632495548
    },
    {
        "content": "<p>The template does indeed set the apply-* to true if it's not present.  So IGs that <em>don't</em> want something applied need to specifically declare it.  This choice is because a) most IGs didn't have the apply parameters set; and b) most IGs absolutely wanted (and needed) the apply cascading to happen.  This should get documented at some point in the ig-guidance IG.</p>",
        "id": 254759529,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1632511858
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179252-IG-creation/topic/Multipart.20IGs/near/254663337\">said</a>:</p>\n<blockquote>\n<p>well, do you want to document that somewhere?</p>\n</blockquote>\n<p>Added to <a href=\"https://confluence.hl7.org/display/FHIR/Implementation+Guide+Parameters\">https://confluence.hl7.org/display/FHIR/Implementation+Guide+Parameters</a>.</p>",
        "id": 254769524,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1632516216
    }
]