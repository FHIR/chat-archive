[
    {
        "content": "<p>New to recent builds, I have an R4 questionnaire that has valueExpression extensions in it...</p>\n<div class=\"codehilite\"><pre><span></span>org.hl7.fhir.exceptions.FHIRException: Unknown type Expression at org.hl7.fhir.convertors.VersionConvertor_30_50.convertType(VersionConvertor_30_50.java:3187) at org.hl7.fhir.convertors.VersionConvertor_30_50.convertExtension(VersionConvertor_30_50.java:417) at org.hl7.fhir.convertors.VersionConvertor_30_50.copyElement(VersionConvertor_30_50.java:102) at org.hl7.fhir.convertors.conv30_50.Questionnaire30_50.convertQuestionnaireItemComponent(Questionnaire30_50.java:128) at org.hl7.fhir.convertors.conv30_50.Questionnaire30_50.convertQuestionnaireItemComponent(Questionnaire30_50.java:161) at org.hl7.fhir.convertors.conv30_50.Questionnaire30_50.convertQuestionnaire(Questionnaire30_50.java:119) at org.hl7.fhir.convertors.VersionConvertor_30_50.convertResource(VersionConvertor_30_50.java:4850) at org.hl7.fhir.igtools.publisher.Publisher.generateRegistryUploadZip(Publisher.java:4728) at org.hl7.fhir.igtools.publisher.Publisher.generateZips(Publisher.java:4613) at org.hl7.fhir.igtools.publisher.Publisher.generate(Publisher.java:4364) at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:815) at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:665) at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:6945)\n</pre></div>\n\n\n<p>Is this something that is known, or should I go look into the code to see if I can spot something?</p>",
        "id": 188173773,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1581648488
    },
    {
        "content": "<p>do you get a stack dump?</p>",
        "id": 188175858,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1581652001
    },
    {
        "content": "<p>Sorry, yes</p>\n<div class=\"codehilite\"><pre><span></span>org.hl7.fhir.exceptions.FHIRException: Unknown type Expression at\norg.hl7.fhir.convertors.VersionConvertor_30_50.convertType(VersionConvertor_30_50.java:3187) at\norg.hl7.fhir.convertors.VersionConvertor_30_50.convertExtension(VersionConvertor_30_50.java:417) at\norg.hl7.fhir.convertors.VersionConvertor_30_50.copyElement(VersionConvertor_30_50.java:102) at\norg.hl7.fhir.convertors.conv30_50.Questionnaire30_50.convertQuestionnaireItemComponent(Questionnaire30_50.java:128) at\norg.hl7.fhir.convertors.conv30_50.Questionnaire30_50.convertQuestionnaireItemComponent(Questionnaire30_50.java:161) at\norg.hl7.fhir.convertors.conv30_50.Questionnaire30_50.convertQuestionnaire(Questionnaire30_50.java:119) at\norg.hl7.fhir.convertors.VersionConvertor_30_50.convertResource(VersionConvertor_30_50.java:4850) at\norg.hl7.fhir.igtools.publisher.Publisher.generateRegistryUploadZip(Publisher.java:4728) at\norg.hl7.fhir.igtools.publisher.Publisher.generateZips(Publisher.java:4613) at\norg.hl7.fhir.igtools.publisher.Publisher.generate(Publisher.java:4364) at\norg.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:815) at\norg.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:665) at\norg.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:6945)\n</pre></div>\n\n\n<p>Whitespace was messing up the carriage returns</p>",
        "id": 188176167,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1581652556
    },
    {
        "content": "<p>From my looking at the stack, not sure why it would downgrade to the STU3 format, is that for the registry? Is there a way to turn that off (can't see it in the code) - if not can I add one?<br>\n<a href=\"https://github.com/HL7/fhir-ig-publisher/blob/2bbc3a2a5ac307b9c34258e11ec78f4ee3568cbb/org.hl7.fhir.publisher.core/src/main/java/org/hl7/fhir/igtools/publisher/Publisher.java#L4728\" target=\"_blank\" title=\"https://github.com/HL7/fhir-ig-publisher/blob/2bbc3a2a5ac307b9c34258e11ec78f4ee3568cbb/org.hl7.fhir.publisher.core/src/main/java/org/hl7/fhir/igtools/publisher/Publisher.java#L4728\">https://github.com/HL7/fhir-ig-publisher/blob/2bbc3a2a5ac307b9c34258e11ec78f4ee3568cbb/org.hl7.fhir.publisher.core/src/main/java/org/hl7/fhir/igtools/publisher/Publisher.java#L4728</a></p>",
        "id": 188181642,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1581661593
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>, Yup, looking at the code referenced below, there is no mapping for the Expression type back to STU3, so what should occur in this case, should the resource just not be converted? <br>\nHave we had this case where a new extension type was introduced and a resource was being down converted for the registry?<br>\n<a href=\"https://github.com/hapifhir/org.hl7.fhir.core/blob/17eb1c41f7300f6e407cb043ed8b27d1ed2b3783/org.hl7.fhir.convertors/src/main/java/org/hl7/fhir/convertors/VersionConvertor_30_50.java#L3187\" target=\"_blank\" title=\"https://github.com/hapifhir/org.hl7.fhir.core/blob/17eb1c41f7300f6e407cb043ed8b27d1ed2b3783/org.hl7.fhir.convertors/src/main/java/org/hl7/fhir/convertors/VersionConvertor_30_50.java#L3187\">https://github.com/hapifhir/org.hl7.fhir.core/blob/17eb1c41f7300f6e407cb043ed8b27d1ed2b3783/org.hl7.fhir.convertors/src/main/java/org/hl7/fhir/convertors/VersionConvertor_30_50.java#L3187</a></p>",
        "id": 188182052,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1581662189
    },
    {
        "content": "<p>oh this is in code that is trying to produce R3 copies for the registry but this is not a thing anymore, so i'm going to get around to removing it</p>",
        "id": 188265438,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1581733920
    },
    {
        "content": "<p>Thanks. Is that to comment out the zip registry stage? (so I can do it locally)</p>",
        "id": 188268233,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1581740035
    },
    {
        "content": "<p>yes</p>",
        "id": 188268924,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1581741585
    },
    {
        "content": "<p>Also happening on GraphDefinition and MessageDefinition. Stu3 (works on R4)</p>",
        "id": 188275206,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1581755436
    },
    {
        "content": "<p>please report stack dumps on this issue, so we can actually know what the problem is</p>",
        "id": 188346269,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1581901147
    },
    {
        "content": "<p>Both I assume, is that github issue or jira tracker?</p>",
        "id": 188347271,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1581903217
    },
    {
        "content": "<p>well.... we seem to be in disarray on that question. We have 2 camps well trained to use only one of those. and a third camp trained to just report issues here.\\</p>",
        "id": 188347408,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1581903484
    },
    {
        "content": "<p>So, where would you like to look?</p>",
        "id": 188347472,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1581903691
    },
    {
        "content": "<p>github, I think. what I really want is:</p>\n<ul>\n<li>what the author thinks is wrong</li>\n<li>how to reproduce it (GH branch preferred)</li>\n<li>where exactly to look in the output to see the problem</li>\n</ul>",
        "id": 188347575,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1581903953
    },
    {
        "content": "<p>Roger.</p>",
        "id": 188347924,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1581904608
    },
    {
        "content": "<p>The SDC Guide gets the issue too, will log on github</p>",
        "id": 188415551,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1581986182
    },
    {
        "content": "<p><a href=\"https://build.fhir.org/ig/HL7/sdc/branches/master/build.log\" target=\"_blank\" title=\"https://build.fhir.org/ig/HL7/sdc/branches/master/build.log\">https://build.fhir.org/ig/HL7/sdc/branches/master/build.log</a></p>",
        "id": 188415556,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1581986191
    },
    {
        "content": "<p>This what you're looking for <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> ?<br>\n<a href=\"https://github.com/HL7/fhir-ig-publisher/issues/61\" target=\"_blank\" title=\"https://github.com/HL7/fhir-ig-publisher/issues/61\">https://github.com/HL7/fhir-ig-publisher/issues/61</a></p>",
        "id": 188415771,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1581986542
    },
    {
        "content": "<p>I was going to comment out the call to <code>org.hl7.fhir.igtools.publisher.Publisher.generateRegistryUploadZip</code> in Publisher.java:4613</p>",
        "id": 188415785,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1581986586
    },
    {
        "content": "<p>I already have.</p>",
        "id": 188416077,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1581987028
    },
    {
        "content": "<p>Cool, so next release will catch it (I can see the change in there now, thanks again)</p>",
        "id": 188416165,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1581987196
    }
]