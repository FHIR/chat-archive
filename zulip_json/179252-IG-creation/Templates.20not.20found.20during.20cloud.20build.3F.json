[
    {
        "content": "<p>Seems at least some builds are failing due to not being able to find the templates (again):</p>\n<p><a href=\"http://build.fhir.org/ig/HL7/genomics-reporting/branches/master/failure/build.log\">http://build.fhir.org/ig/HL7/genomics-reporting/branches/master/failure/build.log</a></p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>Load Template from hl7.fhir.template#current                                     (00:40.0878)\norg.hl7.fhir.exceptions.FHIRException: The package 'hl7.fhir.template' has no entry on the current build server\n</code></pre></div>",
        "id": 270073489,
        "sender_full_name": "Kevin Power",
        "timestamp": 1643651209
    },
    {
        "content": "<p>Another build failing due to the same issue:<br>\n<a href=\"http://build.fhir.org/ig/HL7/fhir-registry-protocols-ig/branches/master/failure/build.log\">http://build.fhir.org/ig/HL7/fhir-registry-protocols-ig/branches/master/failure/build.log</a></p>",
        "id": 270073583,
        "sender_full_name": "Kevin Power",
        "timestamp": 1643651249
    },
    {
        "content": "<p>I was able to build the 'genomics-reporting' IG locally without an error.</p>",
        "id": 270073835,
        "sender_full_name": "Kevin Power",
        "timestamp": 1643651336
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> - Any chance this is related to your change to clean up the build server?</p>",
        "id": 270074198,
        "sender_full_name": "Kevin Power",
        "timestamp": 1643651479
    },
    {
        "content": "<p>If I recall, several of the templates have never had an official release, and aren't actually found anywhere but the build server.</p>",
        "id": 270074280,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1643651519
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> - I thought you'd created official releases of these?</p>",
        "id": 270074719,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1643651654
    },
    {
        "content": "<p>Would this be related to the purge of old CI-builds?  (If so, we definitely need to stop that from happening - some template CI builds might not change for years, but the templates still need to work...)</p>",
        "id": 270076480,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1643652248
    },
    {
        "content": "<p>Yep, my carequality template is broken (but works as a github URL)</p>",
        "id": 270077004,
        "sender_full_name": "David Pyke",
        "timestamp": 1643652433
    },
    {
        "content": "<p>You can use the <a href=\"https://fhir.github.io/auto-ig-builder/builds.html\">https://fhir.github.io/auto-ig-builder/builds.html</a> page to force a re-build of any template that's giving you grief as a short-term solution.</p>",
        "id": 270077473,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1643652601
    },
    {
        "content": "<p>Yep, I had to push a trivial change as I hadn't rebuilt it in over a year</p>",
        "id": 270077560,
        "sender_full_name": "David Pyke",
        "timestamp": 1643652625
    },
    {
        "content": "<p>The build page lets you re-trigger a build without a new commit.</p>",
        "id": 270077636,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1643652650
    },
    {
        "content": "<p>Yeah but it only goes back  a few months, my last template build was 1.5 years ago</p>",
        "id": 270077723,
        "sender_full_name": "David Pyke",
        "timestamp": 1643652686
    },
    {
        "content": "<p>Yea, I don't see <a href=\"https://github.com/HL7/ig-template-fhir\">https://github.com/HL7/ig-template-fhir</a> on the 'auto-ig-builder' page - and I think that is the one the genomics-reporting IG is failing on.</p>",
        "id": 270081370,
        "sender_full_name": "Kevin Power",
        "timestamp": 1643654099
    },
    {
        "content": "<p>If it's urgent, you can change the template line in ig.ini to the github repository.  That will let it build until the template is available again.  If it's not urgent, I wouldn't bother</p>",
        "id": 270082247,
        "sender_full_name": "David Pyke",
        "timestamp": 1643654433
    },
    {
        "content": "<p>the auto-ig-builder didn't show everything. no idea why I had IGs that I wanted to rebuild but were not found on the auto-ig-builder. (e.g. FormatCode)</p>",
        "id": 270084341,
        "sender_full_name": "John Moehrke",
        "timestamp": 1643655125
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> I released all of them I know about, but you actually have to point at the release not current.</p>",
        "id": 270094725,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643659032
    },
    {
        "content": "<p>if an IG is scrubbed because it gets to old, it also falls out of the auto-build summary page</p>",
        "id": 270094786,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643659052
    },
    {
        "content": "<p>so you can't rebuild it from there - have to make a trivial commit.</p>",
        "id": 270094824,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643659064
    },
    {
        "content": "<p>but there is a series of things broken from <span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> cleaning out old builds</p>",
        "id": 270094863,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643659080
    },
    {
        "content": "<p>You can always follow <a href=\"https://github.com/fhir/auto-ig-builder#if-you-want-to-manually-trigger-a-build\">https://github.com/fhir/auto-ig-builder#if-you-want-to-manually-trigger-a-build</a> to manually trigger a build.</p>",
        "id": 270095109,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1643659160
    },
    {
        "content": "<p>Re: new problems from clearing out builds: yeah, let me know if there's anything that requires an immediate workaround. In the long run, this process helps us avoid dependencies on infra that we <em>intend</em> to be ephemeral.</p>",
        "id": 270095219,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1643659199
    },
    {
        "content": "<p>We don't want to clear template builds ever.  'current' needs to always be available.</p>",
        "id": 270095689,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1643659351
    },
    {
        "content": "<p>And the same is true of anything HL7 has published.  We'll have to figure out a mechanism for retaining things others have published where they have a similar need.</p>",
        "id": 270095779,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1643659389
    },
    {
        "content": "<p>this is all solved by the master/main issue</p>",
        "id": 270096114,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643659511
    },
    {
        "content": "<p>but also, Josh is right - people should not be using current templates as a matter of course</p>",
        "id": 270096151,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643659524
    },
    {
        "content": "<blockquote>\n<p>'current' needs to always be available</p>\n</blockquote>\n<p>I think the package server is handling this now, without depending on content <em>staying</em> on the CI server. Correct me if this is wrong.</p>",
        "id": 270098922,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1643660556
    },
    {
        "content": "<p>not if people point to current - that uses <a href=\"http://build.fhir.org\">build.fhir.org</a></p>",
        "id": 270099164,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643660651
    },
    {
        "content": "<p>Didn't we come up with a solution where even \"current\" would reference a package in the package server?</p>",
        "id": 270100002,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1643661012
    },
    {
        "content": "<p>Maybe we did and it still needs to be built, or maybe I'm misremembering where we landed.</p>",
        "id": 270100056,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1643661042
    },
    {
        "content": "<p>we specced it out, but we didn't implement it yet.</p>",
        "id": 270100105,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643661067
    },
    {
        "content": "<p>Cool. So a near-term solution where people keep branches alive as-needed isn't crazy/unmanageable.</p>",
        "id": 270100155,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1643661104
    },
    {
        "content": "<p>but we are going to keep master/main indefinitely, right?</p>",
        "id": 270100547,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643661286
    },
    {
        "content": "<p>That has been suggested. I'd rather not, in general, given how many short-lived projects use the auto-build infra. But maybe for packages that have an official publication associated with them, this would make more sense.</p>",
        "id": 270100840,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1643661429
    },
    {
        "content": "<p>can we do it for projects in <code>fhir</code> and <code>hl7</code> orgs? they always have some approval associated with them</p>",
        "id": 270101168,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643661590
    },
    {
        "content": "<p>Sure.</p>",
        "id": 270101553,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1643661748
    },
    {
        "content": "<p>OK, so I've set up # days and the exception orgs/branches for more flexibility at <a href=\"https://github.com/FHIR/auto-ig-builder/commit/61f72ff0f8f1623658d100cbd6c9f350637a1494\">https://github.com/FHIR/auto-ig-builder/commit/61f72ff0f8f1623658d100cbd6c9f350637a1494</a></p>",
        "id": 270110141,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1643665479
    },
    {
        "content": "<p>Should be deployed now...</p>",
        "id": 270110215,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1643665515
    },
    {
        "content": "<p>Will skip auto-clean on branches that are in <code>HL7</code> or <code>FHIR</code> org and have a branch name of <code>master</code> or <code>main</code></p>",
        "id": 270110357,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1643665573
    },
    {
        "content": "<p>thanks</p>",
        "id": 270110466,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643665628
    },
    {
        "content": "<p>I'm a bit lost in this conversation.  Can we use #current for our template?  if not, what should I use?  right now I have <code>template = hl7.fhir.template#current</code></p>",
        "id": 270114421,
        "sender_full_name": "Nathan Davis",
        "timestamp": 1643667317
    },
    {
        "content": "<p>I was going to bring up branches named <code>R4B</code>, but it will be published before this becomes an issue, right?  <span aria-label=\"angel\" class=\"emoji emoji-1f47c\" role=\"img\" title=\"angel\">:angel:</span></p>",
        "id": 270114799,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1643667446
    },
    {
        "content": "<p>yes</p>",
        "id": 270115610,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643667622
    },
    {
        "content": "<p>you can use #current, but you'll be at the mercy of whatever happens in the build system</p>",
        "id": 270116123,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643667797
    },
    {
        "content": "<p>please do the same with IHE as you did with HL7</p>",
        "id": 270116364,
        "sender_full_name": "John Moehrke",
        "timestamp": 1643667885
    },
    {
        "content": "<p>Generally speaking IHE had not switched over to a versioned template as it was not clear that we had progressed into needing that. So, I presume that is ready to go now?</p>",
        "id": 270116495,
        "sender_full_name": "John Moehrke",
        "timestamp": 1643667940
    },
    {
        "content": "<p>We need to have somewhere where the version of the templates is easily findable. I preferred to use @current because I didn't have a specific need for a locked in version and didn't want to be revising my IG simply because the template changed.</p>",
        "id": 270117322,
        "sender_full_name": "John Moehrke",
        "timestamp": 1643668284
    },
    {
        "content": "<blockquote>\n<p>John Moehrke: please do the same with IHE as you did with HL7</p>\n</blockquote>\n<p><a href=\"https://github.com/FHIR/auto-ig-builder/commit/4a0e6758caa2161037d8366d8907eceb772239b5\">Done</a>.</p>",
        "id": 270118197,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1643668726
    },
    {
        "content": "<blockquote>\n<p>I preferred to use @current because I didn't have a specific need for a locked in version</p>\n</blockquote>\n<p>This is what semver is for: you should be declaring a major version that you know you're compatible with and automatically getting whatever is the latest published version compatible with that.</p>",
        "id": 270118375,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1643668811
    },
    {
        "content": "<p>I don't think that the template loader works that way. I should probably make it so. but if you don't nominate any version, then you just get the latest release. That's the recommended approach, except that Lloyd keeps saying to use current</p>",
        "id": 270118523,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643668902
    },
    {
        "content": "<p>Yeah, \"latest <em>release</em> vs latest <em>commit on github</em>\" seems much safer.</p>",
        "id": 270118623,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1643668942
    },
    {
        "content": "<p>Sorry for the dumb question, but where I find the released versions of the templates?</p>",
        "id": 270118746,
        "sender_full_name": "Kevin Power",
        "timestamp": 1643669013
    },
    {
        "content": "<p>sorry for the dumb question also, but what is the difference in calling for latest template release vs calling for current?</p>",
        "id": 270118960,
        "sender_full_name": "John Moehrke",
        "timestamp": 1643669117
    },
    {
        "content": "<p>well, you shouldn't need to find anything. The IG publisher will do the finding for you</p>",
        "id": 270118976,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643669127
    },
    {
        "content": "<p>but if you really want to know, they are released here: <a href=\"https://fhir.org/templates/\">https://fhir.org/templates/</a></p>",
        "id": 270119005,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643669148
    },
    {
        "content": "<p>if we really must put in a version, then we need to know manually what is the best version.</p>",
        "id": 270119086,
        "sender_full_name": "John Moehrke",
        "timestamp": 1643669172
    },
    {
        "content": "<blockquote>\n<p>what is the difference in calling for latest template release vs calling for current?</p>\n</blockquote>\n<p>current is build automatically from the github source when someone commits something. When it's stable, then someone asks me, and I release a new version on <a href=\"http://fhir.org/templates\">fhir.org/templates</a>, and that's the officially released version</p>",
        "id": 270119124,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643669198
    },
    {
        "content": "<p>so just don't put any version - then you get the latest approved release</p>",
        "id": 270119150,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643669214
    },
    {
        "content": "<p>ah, so not saying <code>#</code> something will use the latest released</p>",
        "id": 270119223,
        "sender_full_name": "John Moehrke",
        "timestamp": 1643669256
    },
    {
        "content": "<p>Thanks all</p>",
        "id": 270119360,
        "sender_full_name": "Kevin Power",
        "timestamp": 1643669315
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> please make the latest IHE template the one currently built... I didn't know I needed (or could) do something like that.</p>",
        "id": 270119367,
        "sender_full_name": "John Moehrke",
        "timestamp": 1643669320
    },
    {
        "content": "<p>thus there was no latest IHE, and thus all our builds failed when the ci-build for the IHE template was deleted.</p>",
        "id": 270119425,
        "sender_full_name": "John Moehrke",
        "timestamp": 1643669349
    },
    {
        "content": "<p>do I need to release any other templates (<span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> )</p>",
        "id": 270119440,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643669358
    },
    {
        "content": "<p>So... I'm noticing that IGs that still use hl7.fhir.template#current are failing right now (at least failing locally for me).  It looks like no one triggered a rebuild of the templates so we can get them back onto the build server.  Was that intentional?  I can try to trigger a build, but I don't want to mess things up if it's not part of the plan.</p>",
        "id": 270119641,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1643669439
    },
    {
        "content": "<p>looks like many template authors have kicked an IG build in the past 24 hours... likely they all are candidates for formal release?</p>",
        "id": 270120055,
        "sender_full_name": "John Moehrke",
        "timestamp": 1643669643
    },
    {
        "content": "<p>In related news, I just tried to get to the docs on how to create IGs using the templated approach (<a href=\"https://build.fhir.org/ig/FHIR/ig-guidance/index.html\">https://build.fhir.org/ig/FHIR/ig-guidance/index.html</a>) and it 404s.  Probably the same \"old build\" issue.  (<span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>)</p>",
        "id": 270120076,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1643669646
    },
    {
        "content": "<p>Yes.  Purging all of the old releases without talking about it first was unfortunate :(  I've pushed a commit to trigger a re-build.</p>\n<p>\"current\" is for people to have a chance to use the latest content before it manifests in the official build.  We're supposed to be moving to a monthly 'release' for the templates, but haven't gotten there yet.  Even then, the 'current' version should remain for everything in perpetuity.</p>\n<p>The templates I'm aware of are: base, ca, davinci, fhir, gravity, hl7, utg</p>",
        "id": 270121347,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1643670217
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span> the current release of the IHE template is 0.4.0, and that's the version specified in github. If you want me to release a new version, you need to create an entry in package-list.json with a new version  number and a description of the changes in it, and then I'll do the release</p>",
        "id": 270126819,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643673193
    },
    {
        "content": "<p>I think that is the one I wanted. When I looked at the link you gave, I had not seen the IHE one there at that time. I guess I missed it... then my builds should not have failed, because they all are just calling for the template without a any <code>#</code> or calling for 0.4.0 already. so not sure why I was getting failures.</p>",
        "id": 270127505,
        "sender_full_name": "John Moehrke",
        "timestamp": 1643673573
    },
    {
        "content": "<p>what's failing then?</p>",
        "id": 270127547,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643673596
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191315\">Josh Mandel</span> <a href=\"#narrow/stream/179252-IG-creation/topic/Templates.20not.20found.20during.20cloud.20build.3F/near/270118375\">said</a>:</p>\n<blockquote>\n<p>you should be declaring a major version that you know you're compatible with</p>\n</blockquote>\n<p>Is that a semver major version, or an HL7 major version? <span aria-label=\"stuck out tongue wink\" class=\"emoji emoji-1f61c\" role=\"img\" title=\"stuck out tongue wink\">:stuck_out_tongue_wink:</span></p>",
        "id": 270127924,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1643673728
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191380\">@Elliot Silver</span> playing the 'spank me' card</p>",
        "id": 270128021,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643673758
    },
    {
        "content": "<p>Sorry, I'll go back in my corner now.</p>",
        "id": 270128220,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1643673847
    },
    {
        "content": "<p>I had thought the same thing</p>",
        "id": 270128811,
        "sender_full_name": "John Moehrke",
        "timestamp": 1643674166
    },
    {
        "content": "<blockquote>\n<p>Yes.  Purging all of the old releases without talking about it first was unfortunate :(  I've pushed a commit to trigger a re-build.</p>\n</blockquote>\n<p>I'm sorry for the unnecessary frustration this has caused! (To be clear, we talked about it extensively in <a class=\"stream\" data-stream-id=\"179165\" href=\"/#narrow/stream/179165-committers\">#committers</a> -- it just took me way too long to get around to implementing the changes we had decided on.)</p>",
        "id": 270132209,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1643676193
    },
    {
        "content": "<p>(There is actually some good discipline in randomly deleting stuff that you claim is ephemeral -- perhaps similar to spending your downtime budget on a service that has been rock solid by intentionally turning it off for a while...)</p>",
        "id": 270132345,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1643676274
    },
    {
        "content": "<p>I think it was a useful exercise, with hardly a downside except a bit of head scratching.</p>",
        "id": 270199520,
        "sender_full_name": "John Moehrke",
        "timestamp": 1643718166
    },
    {
        "content": "<p>I just triggered a rebuild of hl7.fhir.template, so builds that rely on hl7.fhir.template#current should start succeeding again.</p>\n<p>No need to apologize, <span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span>.  As you said, it was previously discussed, so I don't think there's much more you could have done.  Now we all understand the build ecosystem just a little bit better.  And thank you for all of the things you do (and have done) for this community!</p>",
        "id": 270208437,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1643722029
    },
    {
        "content": "<p>we even detected that we had a dependency on #current which should not have stayed like this, so glad <span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> that we could resolve it now and will not have problems later on</p>",
        "id": 270225473,
        "sender_full_name": "Oliver Egger",
        "timestamp": 1643728035
    },
    {
        "content": "<p>My carequality template is still broken.  I've rebuilt it but it can't be found in packages or packages2 and when it tries to fetch it using the github call, it's using the old address (formerly my private but now it's in carequality's)</p>",
        "id": 270241748,
        "sender_full_name": "David Pyke",
        "timestamp": 1643733464
    },
    {
        "content": "<p>Strangely, it works locally, but not on the ci builder</p>",
        "id": 270241940,
        "sender_full_name": "David Pyke",
        "timestamp": 1643733517
    },
    {
        "content": "<p>Link: <a href=\"https://build.fhir.org/ig/Carequality/CEQSubscription/branches/master/failure/build.log\">https://build.fhir.org/ig/Carequality/CEQSubscription/branches/master/failure/build.log</a></p>",
        "id": 270242487,
        "sender_full_name": "David Pyke",
        "timestamp": 1643733706
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 270242508,
        "sender_full_name": "David Pyke",
        "timestamp": 1643733714
    },
    {
        "content": "<p>David are you calling for by version, by #current, or bare?</p>",
        "id": 270243240,
        "sender_full_name": "John Moehrke",
        "timestamp": 1643733973
    },
    {
        "content": "<p>Bare.  I'm re-building the template, just in case</p>",
        "id": 270243697,
        "sender_full_name": "David Pyke",
        "timestamp": 1643734127
    },
    {
        "content": "<p>and is your template relying on predicate template by version, by #current, or bare?</p>",
        "id": 270243950,
        "sender_full_name": "John Moehrke",
        "timestamp": 1643734208
    },
    {
        "content": "<p>There's only a current version so, that's all there is</p>",
        "id": 270244006,
        "sender_full_name": "David Pyke",
        "timestamp": 1643734230
    },
    {
        "content": "<p>so then go to not specifying #current; and you will then get the latest</p>",
        "id": 270244280,
        "sender_full_name": "John Moehrke",
        "timestamp": 1643734311
    },
    {
        "content": "<p>That's what I've done</p>",
        "id": 270244356,
        "sender_full_name": "David Pyke",
        "timestamp": 1643734325
    },
    {
        "content": "<p>oh, drat.</p>",
        "id": 270244379,
        "sender_full_name": "John Moehrke",
        "timestamp": 1643734334
    },
    {
        "content": "<p>Still fails saying \"Failed to determine latest version of package fhir.carequality.template from server: <a href=\"http://packages.fhir.org\">http://packages.fhir.org</a>\"</p>",
        "id": 270244449,
        "sender_full_name": "David Pyke",
        "timestamp": 1643734359
    },
    {
        "content": "<p>I'm assuming some update of packages needs to be done?</p>",
        "id": 270244571,
        "sender_full_name": "David Pyke",
        "timestamp": 1643734388
    },
    {
        "content": "<p>From the log, it seems that the template is gone from packages and packages2<br>\n<a href=\"http://packages.fhir.org\">http://packages.fhir.org</a> (Package not found: fhir.carequality.template)<br>\n<a href=\"https://packages2.fhir.org/packages\">https://packages2.fhir.org/packages</a> (Package not found: fhir.carequality.template)</p>",
        "id": 270245113,
        "sender_full_name": "David Pyke",
        "timestamp": 1643734533
    },
    {
        "content": "<p>well there is no formally published fhir.carequality.template... Grahame indicated that you must ask him to do that to get it into <a href=\"http://fhir.org/templates/\">http://fhir.org/templates/</a></p>",
        "id": 270245658,
        "sender_full_name": "John Moehrke",
        "timestamp": 1643734698
    },
    {
        "content": "<p>It worked before the great purge of 2022</p>",
        "id": 270245696,
        "sender_full_name": "David Pyke",
        "timestamp": 1643734715
    },
    {
        "content": "<p>but, I understood that using latest would find it in ci-build</p>",
        "id": 270245709,
        "sender_full_name": "John Moehrke",
        "timestamp": 1643734719
    },
    {
        "content": "<p>so might be that your ci-build of the carequality template is failing.. even though it says success</p>",
        "id": 270245766,
        "sender_full_name": "John Moehrke",
        "timestamp": 1643734745
    },
    {
        "content": "<p>no idea how to debug that... <span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span> ?</p>",
        "id": 270245787,
        "sender_full_name": "John Moehrke",
        "timestamp": 1643734754
    },
    {
        "content": "<p>i've just gone through something that can be similar</p>",
        "id": 270246032,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1643734813
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192587\">@David Pyke</span> where is the source?</p>",
        "id": 270246169,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1643734845
    },
    {
        "content": "<p><a href=\"https://github.com/Carequality/ig-template-carequality\">https://github.com/Carequality/ig-template-carequality</a></p>",
        "id": 270246225,
        "sender_full_name": "David Pyke",
        "timestamp": 1643734868
    },
    {
        "content": "<ol>\n<li>is this template an authorized one? (not sure this is essential)</li>\n</ol>",
        "id": 270247349,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1643735225
    },
    {
        "content": "<ol start=\"2\">\n<li>was this template built using the webhook?</li>\n</ol>",
        "id": 270247564,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1643735293
    },
    {
        "content": "<p>this template actually doesn't have scripts so it should be fine</p>",
        "id": 270248141,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1643735491
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192587\">@David Pyke</span> did you setup the webhook on the template repo?</p>",
        "id": 270248217,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1643735515
    },
    {
        "content": "<p>Yep, it's building.  You can find it on the build page</p>",
        "id": 270248314,
        "sender_full_name": "David Pyke",
        "timestamp": 1643735540
    },
    {
        "content": "<p><a href=\"https://github.com/Carequality/ig-template-carequality/blob/master/package-list.json#L13\">https://github.com/Carequality/ig-template-carequality/blob/master/package-list.json#L13</a></p>",
        "id": 270251601,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1643736695
    },
    {
        "content": "<p>comma missing</p>",
        "id": 270251613,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1643736699
    },
    {
        "content": "<p>got to love json</p>",
        "id": 270251808,
        "sender_full_name": "John Moehrke",
        "timestamp": 1643736782
    },
    {
        "content": "<p>XML Rules!</p>",
        "id": 270252090,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1643736885
    },
    {
        "content": "<p>Yay!  The exciting thing is that it worked before.</p>",
        "id": 270252319,
        "sender_full_name": "David Pyke",
        "timestamp": 1643736959
    },
    {
        "content": "<p>yup, as I said... love json</p>",
        "id": 270252413,
        "sender_full_name": "John Moehrke",
        "timestamp": 1643736980
    },
    {
        "content": "<p>this is why we are all humbled and willing to lend a peer our eyes when things don't work right. Thanks <span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span></p>",
        "id": 270252835,
        "sender_full_name": "John Moehrke",
        "timestamp": 1643737113
    },
    {
        "content": "<p>Nope, that didn't fix the problem.</p>",
        "id": 270256310,
        "sender_full_name": "David Pyke",
        "timestamp": 1643738286
    },
    {
        "content": "<p>I have a feeling that packages or packages2 needs to be manually updated.  Who do I bother about that?</p>",
        "id": 270256401,
        "sender_full_name": "David Pyke",
        "timestamp": 1643738326
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 270257521,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1643738670
    },
    {
        "content": "<p>Or maybe <span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span>?</p>",
        "id": 270257549,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1643738681
    },
    {
        "content": "<p>what is the issue?</p>",
        "id": 270257871,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1643738773
    },
    {
        "content": "<p>Same issue, the template is not found in packages and packages2.  It used to be</p>",
        "id": 270257912,
        "sender_full_name": "David Pyke",
        "timestamp": 1643738794
    },
    {
        "content": "<p>can you add #current to your ig.ini?</p>",
        "id": 270258000,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1643738828
    },
    {
        "content": "<p>in the template , i mean</p>",
        "id": 270258028,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1643738839
    },
    {
        "content": "<p>it does seem to work on my machine</p>",
        "id": 270258053,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1643738850
    },
    {
        "content": "<p>local is working... not ci-build</p>",
        "id": 270258150,
        "sender_full_name": "John Moehrke",
        "timestamp": 1643738881
    },
    {
        "content": "<p>I can try it with #current on the template line and see if the ci-build works</p>",
        "id": 270258253,
        "sender_full_name": "David Pyke",
        "timestamp": 1643738905
    },
    {
        "content": "<p>Yep, if I force #current, it works.  I'll stick with that</p>",
        "id": 270258749,
        "sender_full_name": "David Pyke",
        "timestamp": 1643739109
    },
    {
        "content": "<p>that was kinda what I was asking about... a version or nothing means to pull from the formal template publication place. where as #current says pull from an ci-build</p>",
        "id": 270258906,
        "sender_full_name": "John Moehrke",
        "timestamp": 1643739175
    },
    {
        "content": "<p>Ah, you'd think that if there was no formal publication version it would fall back.</p>",
        "id": 270258990,
        "sender_full_name": "David Pyke",
        "timestamp": 1643739226
    },
    {
        "content": "<p>no, I expected blank, or declared version would need to come from the formal publication that Grahame is the gatekeeper, and carequality was not already there.</p>",
        "id": 270259211,
        "sender_full_name": "John Moehrke",
        "timestamp": 1643739330
    },
    {
        "content": "<p>your experience confirms that</p>",
        "id": 270259231,
        "sender_full_name": "John Moehrke",
        "timestamp": 1643739345
    },
    {
        "content": "<p>so #current should be unusual, but you are... unusual</p>",
        "id": 270259314,
        "sender_full_name": "John Moehrke",
        "timestamp": 1643739370
    },
    {
        "content": "<p>it's my choice that not specifying a version doesn't fall back to the current build - you have to specify that explicitly. And this template was never released so it never appeared on either packages server. It looks to me like there was a transient problem created by the purge because you had two different repositories claiming to be the same template,  and the one that wasn't built was winning (the algorithm for choosing which one is non-determinate).</p>",
        "id": 270268540,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643742924
    },
    {
        "content": "<p>I am trying to catch up with such a long discussion. I tried to build DTR IG template line \"with\" and \"without\" #current, they both failed. Here is the log: <a href=\"https://build.fhir.org/ig/HL7/davinci-dtr/branches/master/failure/build.log\">https://build.fhir.org/ig/HL7/davinci-dtr/branches/master/failure/build.log</a>  Here is the source code: <a href=\"https://github.com/HL7/davinci-dtr/tree/master\">https://github.com/HL7/davinci-dtr/tree/master</a>  Any thoughts? Thanks</p>",
        "id": 270273232,
        "sender_full_name": "Yolanda",
        "timestamp": 1643744651
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span></p>",
        "id": 270273267,
        "sender_full_name": "Yolanda",
        "timestamp": 1643744663
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> - can you check that the Da Vinci template is in the package repository?</p>",
        "id": 270275077,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1643745364
    },
    {
        "content": "<p>it is</p>",
        "id": 270275154,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643745392
    },
    {
        "content": "<p><a href=\"https://fhir.org/templates/\">https://fhir.org/templates/</a></p>",
        "id": 270275206,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643745413
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"257118\">@Yolanda</span>, I'm not seeing the build log there anymore.  Does that mean it's now built successfully?</p>",
        "id": 270275952,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1643745706
    },
    {
        "content": "<p>works for me</p>",
        "id": 270276718,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643745979
    },
    {
        "content": "<p>Yes, it seems like it resolved itself. Thanks Lloyd and Grahame for checking it.</p>",
        "id": 270287090,
        "sender_full_name": "Yolanda",
        "timestamp": 1643749891
    },
    {
        "content": "<p>so I am late to this cluster** party, but you guys threw out another baby with the bath water.    THO/UTG git branch builds that are still in Consensus Review or QA valuation for the community in the UTG workflow got dumped as well.   We DO NOT EVER want to remove those branch builds if the content is still in voting consensus review.    I also don't see an easy way to trigger a rebuild of a branch without making a trivial change (eg adding whitespace to &lt;label&gt; value ) with a commit and push - which if there is change to content due to updates to the IG Publisher means that folks seeing it now may see different content to what earlier voters saw and voted on.  The policy for THO consensus review is that the content is locked while the vote is open.  But cleaning the branch build and rebuilding with a different template, publisher, etc. may give a change which may technically invalidate the voting so far.   Doing this to clear up the UTG builds was very shortsighted.</p>",
        "id": 270466004,
        "sender_full_name": "Ted Klein",
        "timestamp": 1643839643
    },
    {
        "content": "<p>well, you have no choice right now but to make a whitespace commit</p>",
        "id": 270467033,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643840077
    },
    {
        "content": "<p>how long is voting consensus review?</p>",
        "id": 270467113,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643840094
    },
    {
        "content": "<p>TSMG and TSC have to figure out the timeframe;   they pulled back the changes I recommended for timeouts.  Right now it is unlimited.  One ticket  has been out for voting for six months.</p>",
        "id": 270467420,
        "sender_full_name": "Ted Klein",
        "timestamp": 1643840162
    },
    {
        "content": "<p>however items that are sent to Submit and then back and forth to QA and back may be a long time as well.     Thank heavens I have all the stuff in Draft in Bitbucket so it is in a private place for UTG.</p>",
        "id": 270467643,
        "sender_full_name": "Ted Klein",
        "timestamp": 1643840233
    },
    {
        "content": "<p>this is another motivator for a governance decision on timeouts.  but many proposals will be not less than 90 days.  cleaning branches out so things are wiped when supposed to be locked is a Real Bad Thing.</p>",
        "id": 270467775,
        "sender_full_name": "Ted Klein",
        "timestamp": 1643840301
    },
    {
        "content": "<p>well, how would an algorithm now when something is safe to delete? Given the size of THO, we can't just let them accumulate...</p>",
        "id": 270467862,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1643840387
    },
    {
        "content": "<p>Agreed.   easy to decide such an algorithm...but the operands are sitting in Jira, not Git...lemme noodle on it...luckily only two got wiped, but if/when UTG/THO maintenance accelerates we may likely have dozens in voting review at any given time.    When merged into THO ci build then would be the time to remove the branch build, but I dunno if web hook arguments would be able to indicate what was just merged...</p>",
        "id": 270468232,
        "sender_full_name": "Ted Klein",
        "timestamp": 1643840595
    },
    {
        "content": "<p>could make it a cleanup taks for the curator on merge of approved proposal...couple button clicks only...</p>",
        "id": 270468333,
        "sender_full_name": "Ted Klein",
        "timestamp": 1643840647
    },
    {
        "content": "<p>I may have a solution...lemme do a bit of research...</p>",
        "id": 270468585,
        "sender_full_name": "Ted Klein",
        "timestamp": 1643840801
    },
    {
        "content": "<p><a href=\"https://github.com/FHIR/auto-ig-builder#if-you-want-to-manually-trigger-a-build\">https://github.com/FHIR/auto-ig-builder#if-you-want-to-manually-trigger-a-build</a> provides instructions for triggering a rebuild without having to make any new commits on your content</p>",
        "id": 270471214,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1643842060
    },
    {
        "content": "<p>thanks Josh - I'll check it out.   I may have to go over some webhook stuff with you I have in mind...</p>",
        "id": 270472437,
        "sender_full_name": "Ted Klein",
        "timestamp": 1643842749
    },
    {
        "content": "<p>Josh, it might be entertaining - when something very old (scores or hundreds of commits in the past) is the one to be rebuilt, then there might be quite the scrolling operations through the webhooks recent commits list on Git...and when they say 'recent'...will it go back six to ten months?</p>",
        "id": 270481457,
        "sender_full_name": "Ted Klein",
        "timestamp": 1643848091
    },
    {
        "content": "<p>I would recommend the command line invocation using curl :-)</p>",
        "id": 270487747,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1643852223
    },
    {
        "content": "<p>ok.   for cleaning up the built branches in UTG - if you can give some kind of a command line or other control, we can just put it into the curator workflow (and maybe trigger it from Jira) when the proposal comes out of Consensus Review and gets integrated into the ci build.  This will prevent them from growing indefinitely.    If I can wire it into the Jira workflow logic, then it will happen as part of processing and thus cannot be accidentally skipped.</p>",
        "id": 270563906,
        "sender_full_name": "Ted Klein",
        "timestamp": 1643901014
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> , <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>, can we kick off a build of the HL7 Canada template (<a href=\"https://github.com/HL7/ig-template-ca\">https://github.com/HL7/ig-template-ca</a>)? Looks to have been lost in the great reclamation.</p>",
        "id": 271923698,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1644897336
    },
    {
        "content": "<p>You can</p>",
        "id": 271924104,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1644897647
    },
    {
        "content": "<p>Hey, look at that -- I can. I figured I needed to be able to see the webhooks settings page, but <span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> 's <code>curl</code> command doesn't care whether you are repo admin.</p>",
        "id": 271924627,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1644898133
    }
]