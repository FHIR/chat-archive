[
    {
        "content": "<p>Running the IG Publisher (1.0.81-SNAPSHOT) on my IG (which used to build fine...) I get the error:</p>\n<div class=\"codehilite\"><pre><span></span>Exception in thread &quot;main&quot; java.lang.StackOverflowError\n        at java.util.ArrayList.contains(Unknown Source)\n        at org.hl7.fhir.igtools.publisher.Publisher.logDebugMessage(Publisher.java:6846)\n        at org.hl7.fhir.igtools.publisher.Publisher.generateSnapshot(Publisher.java:4090)\n        at org.hl7.fhir.igtools.publisher.Publisher.fetchSnapshotted(Publisher.java:4190)\n        at org.hl7.fhir.igtools.publisher.Publisher.generateSnapshot(Publisher.java:4093)\n        at org.hl7.fhir.igtools.publisher.Publisher.fetchSnapshotted(Publisher.java:4190)\n        at org.hl7.fhir.igtools.publisher.Publisher.generateSnapshot(Publisher.java:4093)\n</pre></div>\n\n\n<p>and so on...<br>\nIt displays no errors before this one, so I don't really where to look for the cause. Has anyone else also encountered this error?</p>",
        "id": 195057744,
        "sender_full_name": "Noemi Deppenwiese",
        "timestamp": 1587647363
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 195070800,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1587652920
    },
    {
        "content": "<p>I certainly don't understand that</p>",
        "id": 195119095,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587675678
    },
    {
        "content": "<p>I'll have to reproduce this - <span class=\"user-mention\" data-user-id=\"221444\">@Noemi Deppenwiese</span> how do I do that?</p>",
        "id": 195120727,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587676653
    },
    {
        "content": "<p>The issue seems to be caused by one profile that does not (yet) define any constraints and is just a placeholder. SUSHI generated this as differential for it</p>\n<div class=\"codehilite\"><pre><span></span>&quot;derivation&quot;: &quot;constraint&quot;,\n  &quot;differential&quot;: {\n    &quot;element&quot;: [\n      {\n        &quot;id&quot;: &quot;Encounter&quot;,\n        &quot;path&quot;: &quot;Encounter&quot;\n      }\n    ]\n  }\n</pre></div>\n\n\n<p>which seems to cause the publisher loop.</p>",
        "id": 195155384,
        "sender_full_name": "Noemi Deppenwiese",
        "timestamp": 1587714358
    },
    {
        "content": "<p>OK... The issue <em>might</em> have been caused by me having a profile declaring itself as its parent... <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span> and not noticing because the parent file was there, only overwritten by SUSHI with this new profile which had the same ID as a result of a copy-paste-error <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span>  So, not a publisher issue after all. Still, it would be nice to get a \"impossible parent profile\" error...</p>",
        "id": 195181649,
        "sender_full_name": "Noemi Deppenwiese",
        "timestamp": 1587732130
    },
    {
        "content": "<p>I <em>thought</em> that SUSHI issued an error if it detected a circular reference in the parent hierarchy.  Did you not get a SUSHI error when you declared a profile with itself as a parent, <span class=\"user-mention\" data-user-id=\"243697\">@Etienne Cantineau</span>?</p>",
        "id": 195186506,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1587734486
    },
    {
        "content": "<p>Well, SUSHI did not detect the error because I had one Parent-Profile with the id and one child profile with different \"Profile\" Value, referencing its parent with the parents \"Profile\" value but had the same id. So, the parent profile was created but had the same url/filename (because of the id) and was the overwritten with the child profile, so it resulted in a circular reference.... I hope I could explain the issue :)</p>",
        "id": 195187102,
        "sender_full_name": "Noemi Deppenwiese",
        "timestamp": 1587734760
    },
    {
        "content": "<p>I'll add it to my todo list. I thought I had already guarded against that</p>",
        "id": 195247684,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587764388
    }
]