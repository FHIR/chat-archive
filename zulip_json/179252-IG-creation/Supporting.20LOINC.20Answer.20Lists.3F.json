[
    {
        "content": "<p>Working closer with CIMI vocab, we're recognizing a legitimate need for the FHIR IG Publisher dependent terminology server to support LOINC answer lists (LL- and LA- numbers).  We suspect it is currently not supported based on the unrecognized value set errors we're receiving.  1) can we confirm this is the case?  and 2) How would I go about requesting an enhancement to support this, <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> ?  cc: <span class=\"user-mention\" data-user-id=\"194478\">@Susan Matney</span>  and <span class=\"user-mention\" data-user-id=\"191447\">@Mark Kramer</span></p>",
        "id": 153975304,
        "sender_full_name": "May Terry",
        "timestamp": 1531695496
    },
    {
        "content": "<p>LL and LA codes are supported, though I need to update the Loinc version supported. I'll let you know when this is done</p>",
        "id": 153975317,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1531700546
    },
    {
        "content": "<p>There are a few filename and other changes and new content (like LOINC groups) in 2.64.</p>",
        "id": 153975361,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1531711919
    },
    {
        "content": "<p>I won't  be processing any changes I don't have to until the ballot is published</p>",
        "id": 153975375,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1531721976
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> - is there an example for displaying the LA codes related to the LL in a request?</p>",
        "id": 153975434,
        "sender_full_name": "May Terry",
        "timestamp": 1531745129
    },
    {
        "content": "<p>well, there's implicit LL value sets - see <a href=\"http://hl7.org/fhir/loinc.html\" target=\"_blank\" title=\"http://hl7.org/fhir/loinc.html\">http://hl7.org/fhir/loinc.html</a></p>",
        "id": 153975437,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1531745825
    },
    {
        "content": "<p>I think the above conversation is about answer lists (e.g. LL12345-0), which seem to work if we reference the value set with a URI of the form <a href=\"http://loinc.org/vs/LL12345-0\" target=\"_blank\" title=\"http://loinc.org/vs/LL12345-0\">http://loinc.org/vs/LL12345-0</a>.  That's good!</p>\n<p>I can't seem to successfully include loinc answers (e.g., LA98765-0) in a value set definition however.  For example, our shr-oncology-TubuleFormationScoreVS value set is defined with this compose section:</p>\n<div class=\"codehilite\"><pre><span></span>&quot;compose&quot;: {\n  &quot;include&quot;: [\n    {\n      &quot;system&quot;: &quot;http://loinc.org&quot;,\n      &quot;concept&quot;: [\n        {\n          &quot;code&quot;: &quot;LA27216-3&quot;,\n          &quot;display&quot;: &quot;Score 1: &gt;75% of tumor area forming glandular/tubular structures&quot;\n        },\n        {\n          &quot;code&quot;: &quot;LA27217-1&quot;,\n          &quot;display&quot;: &quot;Score 2: 10% to 75% of tumor area forming glandular/tubular structures&quot;\n        },\n        {\n          &quot;code&quot;: &quot;LA27218-9&quot;,\n          &quot;display&quot;: &quot;Score 3: &lt;10% of tumor area forming glandular/tubular structures&quot;\n        }\n      ]\n    }\n  ]\n}\n</pre></div>\n\n\n<p>This results in a NullPointerException (NPE) on its page in the IG:<br>\n<a href=\"/user_uploads/10155/9ajb6FxHaEoo9u3WQq602mFl/la_expansion_npe.png\" target=\"_blank\" title=\"la_expansion_npe.png\">la_expansion_npe.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/9ajb6FxHaEoo9u3WQq602mFl/la_expansion_npe.png\" target=\"_blank\" title=\"la_expansion_npe.png\"><img src=\"/user_uploads/10155/9ajb6FxHaEoo9u3WQq602mFl/la_expansion_npe.png\"></a></div><p>This NPE, however, doesn't show up in the log when we run the IG publisher:</p>\n<div class=\"codehilite\"><pre><span></span>process res: shr-oncology-StainingIntensityVS                                    (19.0728sec)\nprocess res: shr-oncology-TubuleFormationScoreVS                                 (19.0731sec)\nprocess res: shr-core-YesNoUnknownVS                                             (19.0735sec)\n</pre></div>\n\n\n<p>Nor does it show up in the QA:<br>\n<a href=\"/user_uploads/10155/OvwSILDAOXy7pB1DKzp4_AEm/tubule_vs_qa.png\" target=\"_blank\" title=\"tubule_vs_qa.png\">tubule_vs_qa.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/OvwSILDAOXy7pB1DKzp4_AEm/tubule_vs_qa.png\" target=\"_blank\" title=\"tubule_vs_qa.png\"><img src=\"/user_uploads/10155/OvwSILDAOXy7pB1DKzp4_AEm/tubule_vs_qa.png\"></a></div><p>So... there's not much to go on except that the actual rendered page indicates there was an NPE.  Can you confirm that what we're doing should be supported?</p>",
        "id": 153975811,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1531850436
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> -- can you comment on the above?  Is it valid for us to create new value sets that contain arbitrary LOINC answer (e.g. LA) codes?  And if so, does that <code>compose</code> rule look correct?</p>",
        "id": 153976066,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1531924449
    },
    {
        "content": "<p>it looks right to me</p>",
        "id": 153976139,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1531943109
    },
    {
        "content": "<p>Thanks, <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>.  Then I think there may be a bug in the tooling or the terminology server that is preventing those value sets from being expanded. :-(</p>",
        "id": 153976152,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1531946766
    },
    {
        "content": "<p>yes indeed. It's on my list. but the list is pretty long right now</p>",
        "id": 153976155,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1531946922
    },
    {
        "content": "<p>I understand.  Thanks, Grahame.</p>",
        "id": 153976157,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1531947197
    },
    {
        "content": "<p>I've got good news and bad news.</p>\n<p>I don't know if you did something <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>, but I just did another run with the latest jar and I'm getting value sets with LA codes expanded!  That's great!</p>",
        "id": 153976193,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1531955368
    },
    {
        "content": "<p>The bad news is that for some reason, the whole list of codes gets <em>repeated</em> in the expansion.  See the screenshot below:<br>\n<a href=\"/user_uploads/10155/fTey4X0DOeVOOjV4YL-kWsxg/la_expansion.png\" target=\"_blank\" title=\"la_expansion.png\">la_expansion.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/fTey4X0DOeVOOjV4YL-kWsxg/la_expansion.png\" target=\"_blank\" title=\"la_expansion.png\"><img src=\"/user_uploads/10155/fTey4X0DOeVOOjV4YL-kWsxg/la_expansion.png\"></a></div>",
        "id": 153976196,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1531955490
    },
    {
        "content": "<p>It looks like some of the LOINC answerlist implicit value sets stuff isn't validating.  I'm getting errors like the following in my qa.html:</p>\n<p><a href=\"/user_uploads/10155/ufz-AlsShUpe-EG6PcWEH-hp/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/ufz-AlsShUpe-EG6PcWEH-hp/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/ufz-AlsShUpe-EG6PcWEH-hp/pasted_image.png\"></a></div><p>My SD contains this:</p>\n<div class=\"codehilite\"><pre><span></span>&quot;binding&quot;: {\n  &quot;strength&quot;: &quot;preferred&quot;,\n  &quot;valueSetReference&quot;: {\n    &quot;reference&quot;: &quot;http://loinc.org/vs/LL240-3&quot;\n  }\n}\n</pre></div>\n\n\n<p>It is a valid answerlist (<a href=\"https://r.details.loinc.org/AnswerList/LL240-3.html\" target=\"_blank\" title=\"https://r.details.loinc.org/AnswerList/LL240-3.html\">here</a>) and if I go to <a href=\"http://loinc.org/vs/LL240-3\" target=\"_blank\" title=\"http://loinc.org/vs/LL240-3\">http://loinc.org/vs/LL240-3</a> (and type in my credentials) it resolves.</p>\n<p>I'm seeing this for three answer lists: LL240-3, LL748-5, and LL4350-6.</p>",
        "id": 153986719,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1534305823
    },
    {
        "content": "<p>it's committed?</p>",
        "id": 153986726,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1534305998
    },
    {
        "content": "<p>Uh.  Not sure.  I think it's been around a while, but I'll check.</p>",
        "id": 153986728,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1534306067
    },
    {
        "content": "<p>It is, but let me trigger a rebuild so the qa and published results are using the latest publisher (it's been a while since last commit).</p>",
        "id": 153986733,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1534306324
    },
    {
        "content": "<p>Alright.  The build went through.  Here are the relevant links:</p>\n<ul>\n<li><a href=\"https://github.com/HL7/us-breastcancer/blob/master/resources/structuredefinition-shr-oncology-BreastCancerStage.json#L1352-L1357\" target=\"_blank\" title=\"https://github.com/HL7/us-breastcancer/blob/master/resources/structuredefinition-shr-oncology-BreastCancerStage.json#L1352-L1357\">Binding in profile</a></li>\n<li><a href=\"http://build.fhir.org/ig/HL7/us-breastcancer/qa.html#_scratch_ig-build-temp-SK8COA_repo_resources_structuredefinition-shr-oncology-BreastCancerStage\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/us-breastcancer/qa.html#_scratch_ig-build-temp-SK8COA_repo_resources_structuredefinition-shr-oncology-BreastCancerStage\">Error in QA</a></li>\n<li><a href=\"http://build.fhir.org/ig/HL7/us-breastcancer/StructureDefinition-shr-oncology-BreastCancerStage.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/us-breastcancer/StructureDefinition-shr-oncology-BreastCancerStage.html\">Rendered profile</a></li>\n</ul>\n<p>Note that in the rendered profile, the answer list looks like it <em>was</em> resolved.  So it seems like things are working despite the reported errors.  That being the case, prioritize this as you wish!</p>",
        "id": 153986740,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1534306936
    },
    {
        "content": "<p>FYI -- this seems to be fixed in the latest builds.  Thank you!</p>",
        "id": 153987399,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1534398102
    }
]