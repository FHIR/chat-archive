[
    {
        "content": "<p>I received the following in the CI build for davinci-pdex  (davinci-epdx github):</p>\n<p>Validating Resources                                                             (38.0271sec)<br>\njava.lang.NullPointerException                                                   (38.0296sec)<br>\nPublishing Content Failed: null                                                  (38.0297sec)<br>\n                                                                                 (38.0297sec)<br>\nUse -? to get command line help                                                  (38.0297sec)<br>\n                                                                                 (38.0297sec)<br>\nStack Dump (for debugging):                                                      (38.0297sec)<br>\njava.lang.NullPointerException<br>\n    at org.hl7.fhir.igtools.publisher.ValidationServices.fetch(ValidationServices.java:60)<br>\n    at org.hl7.fhir.r5.validation.InstanceValidator.checkReference(InstanceValidator.java:1753)</p>",
        "id": 161032380,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1552887029
    },
    {
        "content": "<p>This was after adding a miminal Patient resource example to the IG. </p>\n<p>The build runs fine locally using the latest publisher pulled from <a href=\"http://build.fhir.org\" target=\"_blank\" title=\"http://build.fhir.org\">build.fhir.org</a> after receiving the NPE. The patient example is also valid according to HAPI validation.</p>",
        "id": 161032442,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1552887126
    },
    {
        "content": "<p>Will comment out the example in the build for now, which will result in a single build error in this IG until the NPE is looked into.</p>",
        "id": 161032455,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1552887193
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> The latest content is in github if you want to try running a local build yourself, but with the offending ImplementationGuide.definition.resource element commented out.</p>",
        "id": 161032652,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1552887552
    },
    {
        "content": "<p>I can't reproduce this</p>",
        "id": 161051378,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552910792
    },
    {
        "content": "<p>That's my point. The only place it occurs is on the CI Build. I just uncommented that patient and committed the IG resource to github. The build failed again with that NPE:</p>\n<p><a href=\"http://build.fhir.org/ig/HL7/davinci-epdx/build.log\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/davinci-epdx/build.log\">http://build.fhir.org/ig/HL7/davinci-epdx/build.log</a></p>",
        "id": 161059521,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1552917745
    },
    {
        "content": "<p>Validating Resources                                                             (34.0030sec)<br>\njava.lang.NullPointerException                                                   (34.0066sec)<br>\nPublishing Content Failed: null                                                  (34.0067sec)<br>\n                                                                                 (34.0067sec)<br>\nUse -? to get command line help                                                  (34.0068sec)<br>\n                                                                                 (34.0068sec)<br>\nStack Dump (for debugging):                                                      (34.0068sec)<br>\njava.lang.NullPointerException<br>\n    at org.hl7.fhir.igtools.publisher.ValidationServices.fetch(ValidationServices.java:60)<br>\n    at org.hl7.fhir.r5.validation.InstanceValidator.checkReference(InstanceValidator.java:1753)<br>\n    at org.hl7.fhir.r5.validation.InstanceValidator.validateElement(InstanceValidator.java:3773)<br>\n    at org.hl7.fhir.r5.validation.InstanceValidator.validateElement(InstanceValidator.java:3783)<br>\n    at org.hl7.fhir.r5.validation.InstanceValidator.validateElement(InstanceValidator.java:3783)<br>\n    at org.hl7.fhir.r5.validation.InstanceValidator.start(InstanceValidator.java:2716)<br>\n    at org.hl7.fhir.r5.validation.InstanceValidator.validateResource(InstanceValidator.java:4089)<br>\n    at org.hl7.fhir.r5.validation.InstanceValidator.validate(InstanceValidator.java:738)<br>\n    at org.hl7.fhir.r5.validation.InstanceValidator.validate(InstanceValidator.java:698)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.validate(Publisher.java:2877)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.validate(Publisher.java:2854)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:619)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:554)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:5103)<br>\nException in thread \"main\" java.lang.NullPointerException<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:5113)</p>",
        "id": 161059549,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1552917780
    },
    {
        "content": "<p>I'm seeing what looks like the same issue in the DEQM build now; it builds locally for me, but gets that error in the CI build.</p>",
        "id": 161070242,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1552924730
    },
    {
        "content": "<p>here is the branch that has the NPE error :</p>\n<p><a href=\"https://github.com/HL7/davinci-deqm/tree/20190318_NPE_Error\" target=\"_blank\" title=\"https://github.com/HL7/davinci-deqm/tree/20190318_NPE_Error\">https://github.com/HL7/davinci-deqm/tree/20190318_NPE_Error</a></p>\n<p>The trace is vitrually the same as Rick's.  The first resource that is validated locally is devicerequest-deqm and like Rick this validates fine using UHN $validate.   I'll check the rest in a minute</p>",
        "id": 161075396,
        "sender_full_name": "Eric Haas",
        "timestamp": 1552928190
    },
    {
        "content": "<p>I did an independent validation of all the generated DEQM resources using UHN $validate and here is what I found:</p>",
        "id": 161083015,
        "sender_full_name": "Eric Haas",
        "timestamp": 1552933499
    },
    {
        "content": "<p>1. ...validating file \"CapabilityStatement-receiver-server.json\" as CapabilityStatement<br>\nCapabilityStatements:  Generated Output ERROR   [CapabilityStatement]   <br>\nProfile <a href=\"http://hl7.org/fhir/StructureDefinition/CapabilityStatement\" target=\"_blank\" title=\"http://hl7.org/fhir/StructureDefinition/CapabilityStatement\">http://hl7.org/fhir/StructureDefinition/CapabilityStatement</a>, Element 'CapabilityStatement.acceptUnknown': minimum required = 1, but only found 0</p>\n<p>Even though the source file do indeed contain this element is absent in all the capabilityStatements </p>\n<p>2. ...validating file \"StructureDefinition-practitioner-deqm.json\" as StructureDefinition<br>\nValidation output</p>\n<p>ERROR   [StructureDefinition.snapshot.element[16].example.valueUri] <br>\nURI values cannot have whitespace<br>\nERROR   [StructureDefinition.snapshot.element[25].example.valueUri] <br>\nURI values cannot have whitespace</p>\n<p>one these elements is \"id\": \"Practitioner.identifier.system\" and the offending bit...</p>\n<div class=\"codehilite\"><pre><span></span>&quot;example&quot;: [\n  {\n    &quot;label&quot;: &quot;General&quot;,\n    &quot;valueUri&quot;: &quot;http://www.acme.com/identifiers/patient or urn:ietf:rfc:3986 if the Identifier.value itself is a full uri&quot;\n  }\n],\n...\n</pre></div>\n\n\n<p>This element traces all the way back to US Core and I can't find it in my copy or the repo copy of the US Core source spreadsheet.  It show ups in the output files however.  I don't recollect ever having adding this to US Core ( although I may certainly have at some point) This error occurs for StructureDefinition-organization-deqm.json and StructureDefinition-pracititioner-deqm.json</p>\n<p>3. lots of errors in the expansions.json Bundle but I did not investigate that.</p>",
        "id": 161083020,
        "sender_full_name": "Eric Haas",
        "timestamp": 1552933503
    },
    {
        "content": "<p>Any update on the issue, I am seeing the same thing in CRN build.<br>\n<a href=\"http://build.fhir.org/ig/HL7/coordinated-registry-network/build.log\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/coordinated-registry-network/build.log\">http://build.fhir.org/ig/HL7/coordinated-registry-network/build.log</a></p>",
        "id": 161085879,
        "sender_full_name": "Nagesh Bashyam",
        "timestamp": 1552935395
    },
    {
        "content": "<p>Is everybody profiling off of US Core?</p>",
        "id": 161086107,
        "sender_full_name": "Eric Haas",
        "timestamp": 1552935573
    },
    {
        "content": "<p>is that the common thread?</p>",
        "id": 161086124,
        "sender_full_name": "Eric Haas",
        "timestamp": 1552935589
    },
    {
        "content": "<p>I'll do a new release. The error makes no sense to me</p>",
        "id": 161087753,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552936758
    },
    {
        "content": "<p>still happening and here my trace</p>\n<div class=\"codehilite\"><pre><span></span>Validating Resources                                                             (41.0376sec)\n .. validate /scratch/ig-build-temp-9TFFOE/repo/source/resources/ig              (41.0376sec)\n .. /scratch/ig-build-temp-9TFFOE/repo/source/resources/ig                       (41.0376sec)\n     validating Data Exchange For Quality Measures                               (41.0376sec)\njava.lang.NullPointerException                                                   (41.0379sec)\nPublishing Content Failed: null                                                  (41.0380sec)\n                                                                                 (41.0380sec)\nUse -? to get command line help                                                  (41.0380sec)\n                                                                                 (41.0380sec)\nStack Dump (for debugging):                                                      (41.0380sec)\njava.lang.NullPointerException\n    at org.hl7.fhir.igtools.publisher.ValidationServices.fetch(ValidationServices.java:62)\n    at org.hl7.fhir.r5.validation.InstanceValidator.checkReference(InstanceValidator.java:1753)\n    at org.hl7.fhir.r5.validation.InstanceValidator.validateElement(InstanceValidator.java:3773)\n    at org.hl7.fhir.r5.validation.InstanceValidator.validateElement(InstanceValidator.java:3783)\n    at org.hl7.fhir.r5.validation.InstanceValidator.validateElement(InstanceValidator.java:3783)\n    at org.hl7.fhir.r5.validation.InstanceValidator.start(InstanceValidator.java:2716)\n    at org.hl7.fhir.r5.validation.InstanceValidator.validateResource(InstanceValidator.java:4089)\n    at org.hl7.fhir.r5.validation.InstanceValidator.validate(InstanceValidator.java:738)\n    at org.hl7.fhir.r5.validation.InstanceValidator.validate(InstanceValidator.java:698)\n    at org.hl7.fhir.igtools.publisher.Publisher.validate(Publisher.java:2877)\n    at org.hl7.fhir.igtools.publisher.Publisher.validate(Publisher.java:2854)\n    at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:619)\n    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:554)\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:5103)\nException in thread &quot;main&quot; java.lang.NullPointerException\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:5113)\n</pre></div>",
        "id": 161102212,
        "sender_full_name": "Eric Haas",
        "timestamp": 1552948089
    },
    {
        "content": "<p>that's happening locally?</p>",
        "id": 161102314,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552948162
    },
    {
        "content": "<p>nope only on autobuilder</p>",
        "id": 161102911,
        "sender_full_name": "Eric Haas",
        "timestamp": 1552948637
    },
    {
        "content": "<p>looks it builds right now?</p>",
        "id": 161104310,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552950099
    },
    {
        "content": "<p>no change in autobuilder:  <a href=\"#narrow/stream/179297-committers.2Fnotification/topic/ig-build/near/161107507\" title=\"#narrow/stream/179297-committers.2Fnotification/topic/ig-build/near/161107507\">https://chat.fhir.org/#narrow/stream/179297-committers.2Fnotification/topic/ig-build/near/161107507</a></p>\n<p>Still getting NPE there.</p>",
        "id": 161107558,
        "sender_full_name": "Eric Haas",
        "timestamp": 1552953221
    },
    {
        "content": "<p>@GG ty</p>",
        "id": 161122104,
        "sender_full_name": "Eric Haas",
        "timestamp": 1552972988
    }
]