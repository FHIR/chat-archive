[
    {
        "content": "<p>Does the IG build support Logical Models? I have one created in Forge, but it fails in the build. Likely I am doing something wrong. please point me at a IG that uses a logical model</p>",
        "id": 157711123,
        "sender_full_name": "John Moehrke",
        "timestamp": 1549476302
    },
    {
        "content": "<p>What's the failure message?</p>",
        "id": 157711404,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1549476504
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span>  [java] java.lang.Exception: Unable to determine type for  C:\\Users\\john.moehrke\\Git\\eLTSS\\src\\resources\\eltss-logical-model: Resource has no id in C:\\Users\\john.moehrke\\Git\\eLTSS\\src\\resources\\eltss-logical-model.xml\n [java]     at org.hl7.fhir.igtools.publisher.Publisher.loadAsElementModel(Publisher.java:2402)\n [java]     at org.hl7.fhir.igtools.publisher.Publisher.load(Publisher.java:1786)\n [java]     at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:583)\n [java]     at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:527)\n [java]     at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:4933)\n [java] Caused by: java.lang.Exception: Resource has no id in C:\\Users\\john.moehrke\\Git\\eLTSS\\src\\resources\\eltss-logical-model.xml\n [java]     at org.hl7.fhir.igtools.publisher.Publisher.loadAsElementModel(Publisher.java:2349)\n [java]     ... 4 more\n</pre></div>",
        "id": 157711935,
        "sender_full_name": "John Moehrke",
        "timestamp": 1549476922
    },
    {
        "content": "<p>I added it to my IG xml file as such</p>\n<div class=\"codehilite\"><pre><span></span>&amp;lt;resource&amp;gt;\n  &amp;lt;reference&amp;gt;\n    &amp;lt;reference value=&quot;StructureDefinition/eltss-logical-model&quot;/&amp;gt;\n  &amp;lt;/reference&amp;gt;\n  &amp;lt;name value=&quot;LogicalModel&quot;/&amp;gt;\n  &amp;lt;description value=&quot;Defines the Logocal Model for eLTSS.&quot;/&amp;gt;\n  &amp;lt;exampleBoolean value=&quot;false&quot;/&amp;gt;\n  &amp;lt;groupingId value=&quot;general&quot;/&amp;gt;\n&amp;lt;/resource&amp;gt;\n</pre></div>",
        "id": 157712013,
        "sender_full_name": "John Moehrke",
        "timestamp": 1549476977
    },
    {
        "content": "<p>it is all checked in with this  commented out  <a href=\"https://github.com/HL7/eLTSS\" target=\"_blank\" title=\"https://github.com/HL7/eLTSS\">https://github.com/HL7/eLTSS</a></p>",
        "id": 157712086,
        "sender_full_name": "John Moehrke",
        "timestamp": 1549477056
    },
    {
        "content": "<p>Ok.  And does the referenced resource in fact have an id?</p>",
        "id": 157712195,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1549477129
    },
    {
        "content": "<p>well.... no.</p>",
        "id": 157713215,
        "sender_full_name": "John Moehrke",
        "timestamp": 1549477898
    },
    {
        "content": "<p>odd that Forge left it that way...</p>",
        "id": 157713244,
        "sender_full_name": "John Moehrke",
        "timestamp": 1549477922
    },
    {
        "content": "<p>&lt;StructureDefinition xmlns=\"<a href=\"http://hl7.org/fhir\" target=\"_blank\" title=\"http://hl7.org/fhir\">http://hl7.org/fhir</a>\"&gt;<br>\n  &lt;url value=\"<a href=\"http://example.org/fhir/StructureDefinition/eLTSS\" target=\"_blank\" title=\"http://example.org/fhir/StructureDefinition/eLTSS\">http://example.org/fhir/StructureDefinition/eLTSS</a>\" /&gt;<br>\n  &lt;name value=\"eLTSS\" /&gt;<br>\n  &lt;status value=\"draft\" /&gt;<br>\n  &lt;fhirVersion value=\"3.0.1\" /&gt;<br>\n  &lt;kind value=\"logical\" /&gt;<br>\n  ....</p>",
        "id": 157713318,
        "sender_full_name": "John Moehrke",
        "timestamp": 1549477948
    },
    {
        "content": "<p>FYI -- our BreastCancer IG has logical models.  Note, however, that it was built a while ago (not with the latest publisher).</p>",
        "id": 157713370,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1549477984
    },
    {
        "content": "<p>And we didn't use Forge.</p>",
        "id": 157713395,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1549477997
    },
    {
        "content": "<p>added an id element... got a different failure<br>\n      [java] C:\\Users\\john.moehrke\\Git\\eLTSS\\src\\resources\\eltss-logical-model<br>\n     [java] Publishing Content Failed: Differential is empty generating hierarchical table for <a href=\"http://example.org/fhir/StructureDefinition/eLTSS\" target=\"_blank\" title=\"http://example.org/fhir/StructureDefinition/eLTSS\">http://example.org/fhir/StructureDefinition/eLTSS</a> (49.0270sec)<br>\n     [java]                                                                                  (49.0270sec)<br>\n     [java] Use -? to get command line help                                                  (49.0270sec)<br>\n     [java]                                                                                  (49.0271sec)<br>\n     [java] Stack Dump (for debugging):                                                      (49.0271sec)<br>\n     [java] org.hl7.fhir.exceptions.FHIRException: Differential is empty generating hierarchical table for <a href=\"http://example.org/fhir/StructureDefinition/eLTSS\" target=\"_blank\" title=\"http://example.org/fhir/StructureDefinition/eLTSS\">http://example.org/fhir/StructureDefinition/eLTSS</a><br>\n     [java]     at org.hl7.fhir.r4.conformance.ProfileUtilities.generateTable(ProfileUtilities.java:2217)</p>",
        "id": 157713617,
        "sender_full_name": "John Moehrke",
        "timestamp": 1549478188
    },
    {
        "content": "<p>I had created one a while back ... will try to resurrect it...</p>",
        "id": 157714175,
        "sender_full_name": "Eric Haas",
        "timestamp": 1549478619
    },
    {
        "content": "<p>Is this an issue with how Forge exported? Meaning is there alternatives in Forge for export?  <span class=\"user-mention\" data-user-id=\"191336\">@Michel Rutten</span></p>",
        "id": 157716788,
        "sender_full_name": "John Moehrke",
        "timestamp": 1549480458
    },
    {
        "content": "<p>Is there a differential?  I believe there should be, even for logical models</p>",
        "id": 157717863,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1549481201
    },
    {
        "content": "<p>It only has snapshot..</p>",
        "id": 157718499,
        "sender_full_name": "John Moehrke",
        "timestamp": 1549481613
    },
    {
        "content": "<p>I think that's an error with Forge.  There should always be a differential that indicates the delta from the base - which for a logical model, might be nothing.  That's how it's handled with resources.  And logical models can build on other logical models just like resources.</p>",
        "id": 157719999,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1549482694
    },
    {
        "content": "<p>okay, I am going to try to get better output from Forge</p>",
        "id": 157721025,
        "sender_full_name": "John Moehrke",
        "timestamp": 1549483391
    },
    {
        "content": "<p>Yep -- I can confirm that our logical models definitely populated snapshot and differential -- with the same exact data (since they weren't based on anything).</p>",
        "id": 157727634,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1549488328
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191336\">@Michel Rutten</span> need help with forge...</p>",
        "id": 157734255,
        "sender_full_name": "John Moehrke",
        "timestamp": 1549493536
    },
    {
        "content": "<p>Indeed, Forge persists logical model constraints in the snapshot component. This is something I discussed and harmonized with <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> a long time ago. If rules have changed, I'd certainly like to know.</p>",
        "id": 158022800,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1549883205
    },
    {
        "content": "<p>I don't know about any change here</p>",
        "id": 158043718,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1549902822
    },
    {
        "content": "<p>Does that mean you can have a logical model with no differential?  (In which case the problem is that the tooling is trying to re-calculate a snapshot from a differential when it shouldn't)  Or does it mean that logical models need to have differential (in which case the understanding of Forge and Firely is incorrect)?</p>",
        "id": 158044818,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1549903609
    },
    {
        "content": "<p>I'd have to investigate. I don't remember</p>",
        "id": 158044859,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1549903648
    },
    {
        "content": "<p>I recall a discussion about this specific topic in the core team. IIRC, conclusion was that a Logical model is not constraining anything, but defining, therefore constraints are serialized into the snapshot component. I don't have a strong preference, easy to implement either way, just want to make sure that all tools are in sync. Note that the current Forge behavior exists for quite some time, certainly hasn't changed recently. And we haven't received any reports about compatibility/interoperability issues with logical model definitions.</p>",
        "id": 158045967,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1549904416
    }
]