[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span> has just released a new version of the IG Publisher using the new release framework. </p>\n<p>The new version is 1.1.0. From now on, we'll be releasing through github releases, and the URL for the latest publisher will be <a href=\"https://github.com/HL7/fhir-ig-publisher/releases/latest/download/publisher.jar\">https://github.com/HL7/fhir-ig-publisher/releases/latest/download/publisher.jar</a>. Please update any links you have for the old publisher to this new address</p>\n<p>We are changing the release again because now we have the release process we want in place working. You might recall that we were forced to make a change a few weeks ago because the old release process collapsed before we got this one in place. We expect this change to be permanent now.</p>\n<p><span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> please advise when the build process is pointing to the new location - thanks</p>",
        "id": 202525109,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1593570784
    },
    {
        "content": "<p>Does _updatePublisher handle it?</p>",
        "id": 202525513,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1593571213
    },
    {
        "content": "<p>for now, I have uploaded a copy to the address of the old release, but this is probably the last time I'll do that. I'll be deleting that version soon</p>",
        "id": 202525528,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1593571238
    },
    {
        "content": "<p>not yet. it'll need to be changed</p>",
        "id": 202525531,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1593571248
    },
    {
        "content": "<p>yes - not quite so urgent if the old way still works for now</p>",
        "id": 202525544,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1593571289
    },
    {
        "content": "<p>_updatePublisher scripts have been updated (PR needs to be merged by Lloyd or Grahame)</p>",
        "id": 202526419,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1593572429
    },
    {
        "content": "<p>Should be set, re: automated IG-build process --https://github.com/FHIR/auto-ig-builder/commit/d198646c2abc0164dd38422ea5bb2bc63f907d4e#diff-5a49469b71b1f5300cf144dc9c92a008R49</p>",
        "id": 202527343,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1593573887
    },
    {
        "content": "<p>Love that the new releases come with a change log.  Thank you, <span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span> and <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> ! <a href=\"/user_uploads/10155/UzvBNpIEHuU8R9FeN6Fku0QK/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/UzvBNpIEHuU8R9FeN6Fku0QK/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/UzvBNpIEHuU8R9FeN6Fku0QK/image.png\"></a></div>",
        "id": 202560405,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1593605245
    },
    {
        "content": "<p>If anyone is interested in what is going on behind the scenes to make this happen, all the repos now have full CI/CD pipelines implemented through Azure DevOps, and they can be viewed here: <a href=\"https://dev.azure.com/fhir-pipelines/\">https://dev.azure.com/fhir-pipelines/</a></p>",
        "id": 202568983,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1593610345
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"248736\">Mark Iantorno</span> <a href=\"#narrow/stream/179252-IG-creation/topic/New.20IGPublisher.20release/near/202568983\">said</a>:</p>\n<blockquote>\n<p>If anyone is interested in what is going on behind the scenes to make this happen, all the repos now have full CI/CD pipelines implemented through Azure DevOps, and they can be viewed here: <a href=\"https://dev.azure.com/fhir-pipelines/\">https://dev.azure.com/fhir-pipelines/</a></p>\n</blockquote>\n<p>lovely idea. I have no access though.. :(</p>",
        "id": 202569848,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1593610824
    },
    {
        "content": "<p>_updatePublisher PR now merged</p>",
        "id": 202576711,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1593614471
    },
    {
        "content": "<p>That's so weird, you can't access the base project, but all the sub projects are open:</p>",
        "id": 202604953,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1593627672
    },
    {
        "content": "<p><a href=\"https://dev.azure.com/fhir-pipelines/fhir-core-library/\">https://dev.azure.com/fhir-pipelines/fhir-core-library/</a></p>",
        "id": 202604960,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1593627673
    },
    {
        "content": "<p><a href=\"https://dev.azure.com/fhir-pipelines/fhir-test-cases\">https://dev.azure.com/fhir-pipelines/fhir-test-cases</a></p>",
        "id": 202604988,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1593627689
    },
    {
        "content": "<p><a href=\"https://dev.azure.com/fhir-pipelines/ig-publisher\">https://dev.azure.com/fhir-pipelines/ig-publisher</a></p>",
        "id": 202605008,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1593627700
    },
    {
        "content": "<p><a href=\"https://dev.azure.com/fhir-pipelines/ig-registry\">https://dev.azure.com/fhir-pipelines/ig-registry</a></p>",
        "id": 202605081,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1593627724
    },
    {
        "content": "<p>these I can open, thanks</p>",
        "id": 202617161,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1593633630
    },
    {
        "content": "<blockquote>\n<p>Love that the new releases come with a change log</p>\n</blockquote>\n<p>well, we have been doing this for a while now. What this change allows us to do is put it in the release page</p>",
        "id": 202618028,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1593634122
    },
    {
        "content": "<p>deleted</p>",
        "id": 202711220,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1593707119
    },
    {
        "content": "<p>can we get _updatePublisher to also update sushi? sushi changes about as often, but I often forget.</p>",
        "id": 204692718,
        "sender_full_name": "John Moehrke",
        "timestamp": 1595437023
    },
    {
        "content": "<p>We could do something like this:</p>\n<ol>\n<li>check if node is available</li>\n<li>if so, check if sushi is installed</li>\n<li>if  so, update</li>\n</ol>",
        "id": 204695342,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1595438222
    },
    {
        "content": "<p>then we have a .bat file that gets sushi, and sushi that gets the .bat files :)</p>",
        "id": 204695416,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1595438259
    },
    {
        "content": "<p>is that something that everyone would want - or better, is anyone going to have issues with that? I think if we have a prompt Y/N, this should be safe</p>",
        "id": 204695580,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1595438324
    },
    {
        "content": "<p>We're making the bold assumption that enough people who use publisher use sushi and won't find that a pain to say no to all the time.</p>",
        "id": 204696069,
        "sender_full_name": "David Pyke",
        "timestamp": 1595438538
    },
    {
        "content": "<p>however, a command line flag to include sushi is less intrusive for those that don't use it.</p>",
        "id": 204696326,
        "sender_full_name": "David Pyke",
        "timestamp": 1595438674
    },
    {
        "content": "<p>I would (personally) prefer that _updatePublisher updates everything it needs.  Ideally, it would do so locally instead of globally though (so that updating a single IG on my machine doesn't partially update others).</p>",
        "id": 204696501,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1595438737
    },
    {
        "content": "<p>command line flag would mean bye bye to double click</p>",
        "id": 204696540,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1595438751
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"222054\">Gino Canessa</span> <a href=\"#narrow/stream/179252-IG-creation/topic/New.20IGPublisher.20release/near/204696501\">said</a>:</p>\n<blockquote>\n<p>I would (personally) prefer that _updatePublisher updates everything it needs.  Ideally, it would do so locally instead of globally though (so that updating a single IG on my machine doesn't partially update others).</p>\n</blockquote>\n<p>that is kind of what it does now: it updates your IG's scripts and your IG's publisher. If your IG does not have its own publisher, it updates your publisher in the parent folder which is used across other IGs</p>",
        "id": 204696728,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1595438830
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"222054\">@Gino Canessa</span> so, check if sushi is installed and update it if it is?</p>",
        "id": 204696751,
        "sender_full_name": "David Pyke",
        "timestamp": 1595438840
    },
    {
        "content": "<p>well, it doesn't know if sushi is needed for that IG...</p>",
        "id": 204696812,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1595438877
    },
    {
        "content": "<p>besides, do we do <code>npm install</code> or <code>npm install -g</code> ?</p>",
        "id": 204696874,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1595438890
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192587\">@David Pyke</span> that makes sense to me.<br>\n<span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span> I would vote <code>npm install</code> so that it's local.  If I have another IG that I haven't updated I don't want a partial update to blow up my build.</p>\n<p>I would argue the same behavior for the parent folder - if you have one that is what you want updated (does not mean you don't have another root path that has a different version).</p>",
        "id": 204697766,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1595439376
    },
    {
        "content": "<p>I'm just exploring. if we do npm install, that means my IG  folder will get a brand new sushi install in it?</p>",
        "id": 204697900,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1595439473
    },
    {
        "content": "<p>If so, I don't think we want to force that on users.</p>",
        "id": 204698042,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1595439535
    },
    {
        "content": "<p>that's why we have to check to see if it exists before any update or prompt</p>",
        "id": 204698109,
        "sender_full_name": "David Pyke",
        "timestamp": 1595439577
    },
    {
        "content": "<p>i don't know if we can see from a command line if sushi is installed locally or globally.</p>",
        "id": 204698113,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1595439579
    },
    {
        "content": "<p>if I have it globally, i do not want it installed locally</p>",
        "id": 204698138,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1595439598
    },
    {
        "content": "<p>an alternative - can sushi update itself when it's being called?</p>",
        "id": 204698256,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1595439660
    },
    {
        "content": "<p>i.e. only for those IGs that actually have sushi</p>",
        "id": 204698331,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1595439707
    },
    {
        "content": "<p>I'd prefer that sushi handled it's own update either directly or by saying \"New version available\" when run</p>",
        "id": 204698728,
        "sender_full_name": "David Pyke",
        "timestamp": 1595439920
    },
    {
        "content": "<p>the shell script can't update sushi on many Macs because it needs to be installed with sudo.</p>",
        "id": 204700373,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1595440740
    },
    {
        "content": "<p>can sushi itself tell that it is not the most current?</p>",
        "id": 204702439,
        "sender_full_name": "John Moehrke",
        "timestamp": 1595441727
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191404\">John Moehrke</span> <a href=\"#narrow/stream/179252-IG-creation/topic/New.20IGPublisher.20release/near/204702439\">said</a>:</p>\n<blockquote>\n<p>can sushi itself tell that it is not the most current?</p>\n</blockquote>\n<p>If any program can, it's sushi itself</p>",
        "id": 204703187,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1595442078
    },
    {
        "content": "<p>i'd prefer that, i think: <br>\n_updatePublisher does not touch sushi. <br>\nSushi checks itself for possible updates, and if so, asks the user if they want to update . Sushi then sees if it's running locally or globally, and does <code>install</code> or <code>install -g</code> accordingly.<br>\nIf sushi is running in a CI build or called by the publisher, it will not prompt, it will just warn.</p>",
        "id": 204703533,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1595442237
    },
    {
        "content": "<p>I realize that eventually sushi and build will stop being a daily update.  explaining how to do this daily to new users is frustrating.</p>",
        "id": 204704670,
        "sender_full_name": "John Moehrke",
        "timestamp": 1595442753
    },
    {
        "content": "<p>CI build installs each run, so it cannot be out of date</p>",
        "id": 204704702,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1595442767
    },
    {
        "content": "<p>that is my current recommendation to new people.. that is to NOT try to locally build, just use the CI build. The only drawback is that you checkin code often, and thus following the <a class=\"stream\" data-stream-id=\"179297\" href=\"/#narrow/stream/179297-committers.2Fnotification\">#committers/notification</a> stream will see that it took you 5 tries to get the build to work. Which I then tell them that no one inspects each line in that stream</p>",
        "id": 204705458,
        "sender_full_name": "John Moehrke",
        "timestamp": 1595443119
    },
    {
        "content": "<p>ok, updated:<br>\nSushi checks itself for possible updates, and if so, asks the user if they want to update. <br>\nSushi then sees if it's installed locally or globally, and does <code>install</code> or <code>install -g</code> accordingly.<br>\nIf sushi is being called by the publisher, it will not prompt, it will just warn.</p>",
        "id": 204705725,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1595443253
    },
    {
        "content": "<p>...right?</p>",
        "id": 204707826,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1595444188
    },
    {
        "content": "<blockquote>\n<p>the shell script can't update sushi on many Macs because it needs to be installed with sudo</p>\n</blockquote>\n<p>On mine I don't need sudo to do npm installs or updates.  Is that an option people intentionally choose for security reasons?</p>",
        "id": 204710530,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1595445593
    },
    {
        "content": "<p>yes, my /usr/local doesn't have wide-open privileges.  So  only administrators can install stuff (like npm and npm modules) there</p>",
        "id": 204711112,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1595445914
    },
    {
        "content": "<p>Also, just catching up on this thread now.  Almost missed it...  We could potentially have SUSHI report when it knows it is out of date.  This will require a network connection though.  Currently, as long as you've run SUSHI once on your project (to download any dependencies) a network connection is not needed.</p>\n<p>I'm not sure I'd want SUSHI to update itself.  I certainly wouldn't want that to happen automatically.  But I'm also not sure I want to issue a prompt, as that complicates shell scripts and CI.  I suppose we could also introduce a flag to suppress the prompt and force y or n -- if this is something users really want.  Do you really want SUSHI to offer to update itself when it is out of date?  Or do you just want SUSHI to tell you when it is out of date?</p>",
        "id": 204711238,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1595445982
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192166\">@Jean Duteau</span> -- my /usr/local is also restricted, but my /usr/local/lib/node_modules is owned by my standard user account, so I can add global node_modules without needing sudo.</p>",
        "id": 204711415,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1595446103
    }
]