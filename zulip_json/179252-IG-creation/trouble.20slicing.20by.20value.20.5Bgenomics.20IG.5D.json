[
    {
        "content": "<p>i tried to slice of a slice in the genomics IG without success. My attempt was to slice the Coding element inside the valueCodeableConcept by system.</p>",
        "id": 153975153,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1531497577
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/jUGJUIFAun4ytRMHZuIbjuaY/Screen-Shot-2018-07-13-at-17.57.00.png\" target=\"_blank\" title=\"Screen-Shot-2018-07-13-at-17.57.00.png\">Screen-Shot-2018-07-13-at-17.57.00.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/jUGJUIFAun4ytRMHZuIbjuaY/Screen-Shot-2018-07-13-at-17.57.00.png\" target=\"_blank\" title=\"Screen-Shot-2018-07-13-at-17.57.00.png\"><img src=\"/user_uploads/10155/jUGJUIFAun4ytRMHZuIbjuaY/Screen-Shot-2018-07-13-at-17.57.00.png\"></a></div>",
        "id": 153975154,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1531497602
    },
    {
        "content": "<p>i end up with multiple: </p>\n<div class=\"codehilite\"><pre><span></span>StructureDefinition/obs-described-variant: StructureDefinition.differential.element[10].patternCodeableConcept.coding   error   Error null validating Coding\n</pre></div>",
        "id": 153975156,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1531497629
    },
    {
        "content": "<p>i pushed my try here:<br>\n<a href=\"https://github.com/HL7/genomics-reporting/tree/pwerner_canonica-variation-id\" target=\"_blank\" title=\"https://github.com/HL7/genomics-reporting/tree/pwerner_canonica-variation-id\">https://github.com/HL7/genomics-reporting/tree/pwerner_canonica-variation-id</a></p>",
        "id": 153975157,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1531497737
    },
    {
        "content": "<p>relevant excel file: <em>observation-profile-spreadsheet.xml</em>, sheet: <em>obs-discrete-variant</em></p>",
        "id": 153975158,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1531497808
    },
    {
        "content": "<p>Those slices look correct and it's complaining about something that isn't even in your slices.  element 10 sounds like it's earlier in the differential than your spreadsheet snapshot too.  Are you sure the problem isn't from earlier?</p>",
        "id": 153975185,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1531507915
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191451\">@Patrick Werner</span>  Did you ever find a solution to this?</p>",
        "id": 153979594,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1532993152
    },
    {
        "content": "<p>I am having a very similar problem - it's not related to slicing though - it's related to the pattern on the codeableConcept (which I see you have in your slice).</p>\n<p>So this pattern used to work: <a href=\"/user_uploads/10155/PbsSIw5hFp2CGmxqlmyUnXa-/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/PbsSIw5hFp2CGmxqlmyUnXa-/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/PbsSIw5hFp2CGmxqlmyUnXa-/pasted_image.png\"></a></div><p>But it now gives that error message: <a href=\"/user_uploads/10155/6aMHf1gEijNiXib2A4ipnGiX/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/6aMHf1gEijNiXib2A4ipnGiX/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/6aMHf1gEijNiXib2A4ipnGiX/pasted_image.png\"></a></div><p>The only way I can get it to not error is to move the pattern down further in the tree (and I've tried every permutation possible - like adding the pattern to coding - this is the only one that doesn't error): <a href=\"/user_uploads/10155/k7c8c4Ct_2tnDVImXHWFHN_b/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/k7c8c4Ct_2tnDVImXHWFHN_b/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/k7c8c4Ct_2tnDVImXHWFHN_b/pasted_image.png\"></a></div><p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>  Is this the way we are supposed to be doing patterns now? Has something changed? I thought the pattern was supposed to be at the top level?</p>",
        "id": 153979595,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1532993362
    },
    {
        "content": "<p>Not clear on why you're enforcing the display value, but other than that, it looks right</p>",
        "id": 153979604,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1532997889
    },
    {
        "content": "<p>Not going to enforce the display value - that was old. But it doesn't validate. The first pattern with the display. The only way I can get it to validate is to move the pattern down onto the system and code.  Is it a bug then? Because all the places where there was a pattern at that level when this went to ballot in January are now erroring when run through the IG Publisher.</p>",
        "id": 153979606,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1532998022
    },
    {
        "content": "<p>I don't have a problem with moving them down onto system and code btw - it's just that I thought the first option (pattern at the top of the codeableConcept tree) was the correct way. I'm worried that the way that I'm being forced to do it to get rid of the errors is wrong.</p>",
        "id": 153979607,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1532998203
    },
    {
        "content": "<p>Seems like a bug to me.  Should be fine defining a pattern at the CodeableConcept level - we use it for slicing all the time.</p>",
        "id": 153979608,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1532998328
    },
    {
        "content": "<p>Ok, will raise an issue.</p>",
        "id": 153979609,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1532998400
    },
    {
        "content": "<p>Don't think the error has anything to do with the pattern, but to do with the LOINC terminology validation. When I run the IG publisher with -tx N/A the errors all disappear. And if I change the pattern to use a random SNOMED code (rather then LOINC), no error either.</p>",
        "id": 153979613,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1533004525
    },
    {
        "content": "<p>And, I downloaded a new version of IG publisher and the issue has resolved itself. Guess I hadn't downloaded a new one for a while. My bad.</p>",
        "id": 153979614,
        "sender_full_name": "Sarah Gaunt",
        "timestamp": 1533005484
    }
]