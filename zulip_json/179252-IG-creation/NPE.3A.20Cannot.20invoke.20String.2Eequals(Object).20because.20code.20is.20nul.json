[
    {
        "content": "<p>FHIR IG Publisher 1.1.73 (June 5 , 2021). I'm getting the error below here. What can I do for tracing the issue better?</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>...\nProcessing Conformance Resources                                                 <span class=\"o\">(</span><span class=\"m\">00</span>:39.0844<span class=\"o\">)</span>\nGenerating Snapshots                                                             <span class=\"o\">(</span><span class=\"m\">00</span>:43.0070<span class=\"o\">)</span>\nGenerating Narratives                                                            <span class=\"o\">(</span><span class=\"m\">00</span>:45.0574<span class=\"o\">)</span>\nPublishing Content Failed: Cannot invoke <span class=\"s2\">\"String.equals(Object)\"</span> because <span class=\"s2\">\"code\"</span> is null <span class=\"o\">(</span><span class=\"m\">00</span>:52.0592<span class=\"o\">)</span>\n                                                                                 <span class=\"o\">(</span><span class=\"m\">00</span>:52.0594<span class=\"o\">)</span>\nUse -? to get <span class=\"nb\">command</span> line <span class=\"nb\">help</span>                                                  <span class=\"o\">(</span><span class=\"m\">00</span>:52.0596<span class=\"o\">)</span>\n                                                                                 <span class=\"o\">(</span><span class=\"m\">00</span>:52.0597<span class=\"o\">)</span>\nStack Dump <span class=\"o\">(</span><span class=\"k\">for</span> debugging<span class=\"o\">)</span>:                                                      <span class=\"o\">(</span><span class=\"m\">00</span>:52.0598<span class=\"o\">)</span>\njava.lang.NullPointerException: Cannot invoke <span class=\"s2\">\"String.equals(Object)\"</span> because <span class=\"s2\">\"code\"</span> is null\n    at org.hl7.fhir.r5.terminologies.CodeSystemUtilities.getCode<span class=\"o\">(</span>CodeSystemUtilities.java:443<span class=\"o\">)</span>\n    at org.hl7.fhir.r5.terminologies.CodeSystemUtilities.getCode<span class=\"o\">(</span>CodeSystemUtilities.java:434<span class=\"o\">)</span>\n    at org.hl7.fhir.r5.renderers.TerminologyRenderer.getDisplayForProperty<span class=\"o\">(</span>TerminologyRenderer.java:259<span class=\"o\">)</span>\n    at org.hl7.fhir.r5.renderers.TerminologyRenderer.addTableHeaderRowStandard<span class=\"o\">(</span>TerminologyRenderer.java:229<span class=\"o\">)</span>\n    at org.hl7.fhir.r5.renderers.CodeSystemRenderer.generateCodeSystemContent<span class=\"o\">(</span>CodeSystemRenderer.java:171<span class=\"o\">)</span>\n    at org.hl7.fhir.r5.renderers.CodeSystemRenderer.render<span class=\"o\">(</span>CodeSystemRenderer.java:60<span class=\"o\">)</span>\n    at org.hl7.fhir.r5.renderers.CodeSystemRenderer.render<span class=\"o\">(</span>CodeSystemRenderer.java:43<span class=\"o\">)</span>\n    at org.hl7.fhir.r5.renderers.ResourceRenderer.render<span class=\"o\">(</span>ResourceRenderer.java:74<span class=\"o\">)</span>\n    at org.hl7.fhir.igtools.publisher.Publisher.generateNarratives<span class=\"o\">(</span>Publisher.java:1155<span class=\"o\">)</span>\n    at org.hl7.fhir.igtools.publisher.Publisher.loadConformance<span class=\"o\">(</span>Publisher.java:3907<span class=\"o\">)</span>\n    at org.hl7.fhir.igtools.publisher.Publisher.createIg<span class=\"o\">(</span>Publisher.java:889<span class=\"o\">)</span>\n    at org.hl7.fhir.igtools.publisher.Publisher.execute<span class=\"o\">(</span>Publisher.java:744<span class=\"o\">)</span>\n    at org.hl7.fhir.igtools.publisher.Publisher.main<span class=\"o\">(</span>Publisher.java:8557<span class=\"o\">)</span>\n</code></pre></div>",
        "id": 242618891,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1623686035
    },
    {
        "content": "<p>can I reproduce it?</p>",
        "id": 242626010,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1623688963
    },
    {
        "content": "<p>but it comes from a uri of a property. it's a bug in my code - will be fixed next release</p>",
        "id": 242626537,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1623689174
    },
    {
        "content": "<p>I found it ... somewhat. My ig had properties like this below. I removed all of them and that got me passed this issue. Not sure which was the culprit:</p>\n<div class=\"codehilite\" data-code-language=\"XML\"><pre><span></span><code>     <span class=\"c\">&lt;!--copyright year is a mandatory parameter--&gt;</span>\n      <span class=\"nt\">&lt;parameter&gt;</span>\n         <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">\"copyrightyear\"</span><span class=\"nt\">/&gt;</span>\n         <span class=\"nt\">&lt;value</span> <span class=\"na\">value=</span><span class=\"s\">\"2020+\"</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/parameter&gt;</span>\n      <span class=\"c\">&lt;!--releaselabel should be the ballot status for HL7-published IGs.--&gt;</span>\n      <span class=\"nt\">&lt;parameter&gt;</span>\n         <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">\"releaselabel\"</span><span class=\"nt\">/&gt;</span>\n         <span class=\"nt\">&lt;value</span> <span class=\"na\">value=</span><span class=\"s\">\"CI Build\"</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/parameter&gt;</span>\n      <span class=\"nt\">&lt;parameter&gt;</span>\n         <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">\"find-other-resources\"</span><span class=\"nt\">/&gt;</span>\n         <span class=\"nt\">&lt;value</span> <span class=\"na\">value=</span><span class=\"s\">\"true\"</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/parameter&gt;</span>\n      <span class=\"c\">&lt;!--List any URLs we purposely have in our set but do not match the guides preferred URL--&gt;</span>\n      <span class=\"nt\">&lt;parameter&gt;</span>\n         <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">\"special-url\"</span><span class=\"nt\">/&gt;</span>\n         <span class=\"nt\">&lt;value</span> <span class=\"na\">value=</span><span class=\"s\">\"http://decor.nictiz.nl/fhir/ValueSet/2.16.840.1.113883.2.4.3.11.60.121.11.10--20200901000000\"</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/parameter&gt;</span>\n</code></pre></div>",
        "id": 242636545,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1623693567
    },
    {
        "content": "<p>I had lots of 'special-url' parameters. I've not yet seen how rewrite those (if those are still necessary)</p>",
        "id": 242636601,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1623693597
    },
    {
        "content": "<p>that's... weird. I wouldn't have thought that rendering a code system (where problem happens) is at all related to a special-url on a value set</p>",
        "id": 242637022,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1623693770
    },
    {
        "content": "<p>Well after fixing this, new issues popped up, but not NPE. It might be a combination of factors. Resource.ids exceeding 64 characters, an xml example with a missing namesapce and then some ... I'll come back here if there's something I can't fix. So far, error between my keyboard and chair.</p>",
        "id": 242640228,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1623695337
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> found the part that really made the difference:</p>\n<div class=\"codehilite\" data-code-language=\"XML\"><pre><span></span><code><span class=\"nt\">&lt;parameter&gt;</span>\n  <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">\"find-other-resources\"</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;value</span> <span class=\"na\">value=</span><span class=\"s\">\"true\"</span><span class=\"nt\">/&gt;</span>\n <span class=\"nt\">&lt;/parameter&gt;</span>\n</code></pre></div>\n<p>Removing this one specifically, solves the error. I'm sure this is combined with the specific input files I have.</p>",
        "id": 242694662,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1623740450
    },
    {
        "content": "<p>The side effect of removing this instruction seems to be that the IG Publisher does not pick up any profiles, and as such cannot validate any example.</p>",
        "id": 242700260,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1623744404
    },
    {
        "content": "<p>Maybe that is within expectation but, this parameter yields the same error.</p>\n<div class=\"codehilite\" data-code-language=\"XML\"><pre><span></span><code><span class=\"nt\">&lt;parameter&gt;</span>\n        <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">\"autoload-resources\"</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;value</span> <span class=\"na\">value=</span><span class=\"s\">\"true\"</span><span class=\"nt\">/&gt;</span>\n <span class=\"nt\">&lt;/parameter&gt;</span>\n</code></pre></div>",
        "id": 242701684,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1623745335
    },
    {
        "content": "<p>well, I'm not sure about that, but this will be fixed in the next release, due in the next 48 hours</p>",
        "id": 242702583,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1623745932
    },
    {
        "content": "<p>Nice. Removing all Codesystem resources also does the trick until that new release 'hits the streets'</p>",
        "id": 242702798,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1623746050
    }
]