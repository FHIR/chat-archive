[
    {
        "content": "<p>I'm getting this error:</p>\n<blockquote>\n<p>Unsupported fixed pattern type for discriminator(system) for slice Location.identifier:HpifacId: org.hl7.fhir.r5.model.UriType</p>\n</blockquote>\n<p>Here's a snippet from the SD: (I've tried both pattern and value discriminators)</p>\n<div class=\"codehilite\"><pre><span></span><code>{\n        &quot;id&quot;: &quot;Location.identifier&quot;,\n        &quot;path&quot;: &quot;Location.identifier&quot;,\n        &quot;slicing&quot;: {\n          &quot;discriminator&quot;: [\n            {\n              &quot;type&quot;: &quot;value&quot;,\n              &quot;path&quot;: &quot;use&quot;\n            },\n            {\n              &quot;type&quot;: &quot;value&quot;,\n              &quot;path&quot;: &quot;system&quot;\n            }\n          ],\n          &quot;rules&quot;: &quot;openAtEnd&quot;\n        }\n      },\n      {\n        &quot;id&quot;: &quot;Location.identifier:HpifacId&quot;,\n        &quot;path&quot;: &quot;Location.identifier&quot;,\n        &quot;sliceName&quot;: &quot;HpifacId&quot;,\n        &quot;short&quot;: &quot;The current Facility id for this location&quot;,\n        &quot;min&quot;: 0,\n        &quot;max&quot;: &quot;1&quot;,\n        &quot;mustSupport&quot;: true\n      },\n      {\n        &quot;id&quot;: &quot;Location.identifier:HpifacId.use&quot;,\n        &quot;path&quot;: &quot;Location.identifier.use&quot;,\n        &quot;min&quot;: 1,\n        &quot;fixedCode&quot;: &quot;official&quot;\n      },\n      {\n        &quot;id&quot;: &quot;Location.identifier:HpifacId.system&quot;,\n        &quot;path&quot;: &quot;Location.identifier.system&quot;,\n        &quot;min&quot;: 1,\n        &quot;patternUri&quot;: &quot;https://standards.digital.health.nz/ns/hpi-facility-id&quot;\n      },\n      {\n</code></pre></div>",
        "id": 203668606,
        "sender_full_name": "David Hay",
        "timestamp": 1594600588
    },
    {
        "content": "<p>FWIW: Here's the FSH I used:  (and tried with and without the (exactly) keyword</p>\n<div class=\"codehilite\"><pre><span></span><code>* identifier ^slicing.discriminator.type = #value\n* identifier ^slicing.discriminator.path = &quot;use&quot;\n\n* identifier ^slicing.discriminator[1].type = #value\n* identifier ^slicing.discriminator[1].path = &quot;system&quot;\n\n* identifier ^slicing.rules = #openAtEnd\n\n* identifier contains\n    HpifacId 0..1 MS and\n    dormantHpiFacId 0..* MS and\n    MOHFacId 0..1 MS\n\n* identifier[HpifacId].system = &quot;https://standards.digital.health.nz/ns/hpi-facility-id&quot;\n* identifier[HpifacId].use = #official (exactly)\n* identifier[HpifacId] ^short = &quot;The current Facility id for this location&quot;\n</code></pre></div>",
        "id": 203668693,
        "sender_full_name": "David Hay",
        "timestamp": 1594600754
    },
    {
        "content": "<p>it's unusual to have a pattern value for a primitive</p>",
        "id": 203668899,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1594601088
    },
    {
        "content": "<p>but, sure, I'll add support for it in the next release</p>",
        "id": 203669167,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1594601632
    },
    {
        "content": "<p>Is that not value?</p>",
        "id": 203669565,
        "sender_full_name": "David Hay",
        "timestamp": 1594602249
    },
    {
        "content": "<p>ie where's the pattern coming from?</p>",
        "id": 203669568,
        "sender_full_name": "David Hay",
        "timestamp": 1594602301
    },
    {
        "content": "<p>the profile, presumably</p>",
        "id": 203669720,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1594602583
    },
    {
        "content": "<p>I did set the discriminator type to 'value' - not 'pattern' - (see snippet above) so a bit confused TBH. Never mind, as long as it's not a show stopper error...</p>",
        "id": 203670087,
        "sender_full_name": "David Hay",
        "timestamp": 1594603185
    },
    {
        "content": "<p>Did you try: * identifier[HpifacId].system = \"<a href=\"https://standards.digital.health.nz/ns/hpi-facility-id\">https://standards.digital.health.nz/ns/hpi-facility-id</a>\" (exactly)</p>",
        "id": 204029503,
        "sender_full_name": "Keith Boone",
        "timestamp": 1594858277
    },
    {
        "content": "<p>pretty sure I did - but will confirm...</p>",
        "id": 204128448,
        "sender_full_name": "David Hay",
        "timestamp": 1594926382
    },
    {
        "content": "<p>Actually - that fixed it! Thanks <span class=\"user-mention\" data-user-id=\"191387\">@Keith Boone</span> It actually needed (exactly) on both system and use:</p>\n<div class=\"codehilite\"><pre><span></span><code>* identifier[HpifacId].system = &quot;https://standards.digital.health.nz/ns/hpi-facility-id&quot; (exactly)\n* identifier[HpifacId].use = #official (exactly)\n* identifier[HpifacId] ^short = &quot;The current Facility id for this location&quot;\n</code></pre></div>",
        "id": 204130144,
        "sender_full_name": "David Hay",
        "timestamp": 1594927170
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179252-IG-creation/topic/fixed/near/203668899\">said</a>:</p>\n<blockquote>\n<p>it's unusual to have a pattern value for a primitive</p>\n</blockquote>\n<p>Actually, I think <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> convinced me this was the best approach, otherwise you are denying implementors the opportunity to apply an <code>extension</code> or <code>id</code> to the primitive value.</p>",
        "id": 204136433,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1594930293
    },
    {
        "content": "<p>I think that you generally do want to  do that</p>",
        "id": 204157879,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1594943979
    },
    {
        "content": "<p>but not always, I agree</p>",
        "id": 204157888,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1594943987
    },
    {
        "content": "<p>Good to hear.  I was having a VERY similar problem, and thanks to you, was able to track it back to the fixed/pattern discussions eslewhere, so in a way, you helped me too!</p>",
        "id": 204198282,
        "sender_full_name": "Keith Boone",
        "timestamp": 1594987990
    }
]