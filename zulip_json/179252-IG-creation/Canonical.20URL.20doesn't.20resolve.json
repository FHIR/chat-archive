[
    {
        "content": "<p>We have submitted our draft IG via github to <a href=\"https://github.com/HL7/davinci-pdex-formulary\" target=\"_blank\" title=\"https://github.com/HL7/davinci-pdex-formulary\">https://github.com/HL7/davinci-pdex-formulary</a><br>\nand it successfully builds at <a href=\"http://build.fhir.org/ig/HL7/davinci-pdex-formulary/\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/davinci-pdex-formulary/\">http://build.fhir.org/ig/HL7/davinci-pdex-formulary/</a></p>\n<p>However, based on <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> guidance, we adjusted the canonical URL to <a href=\"http://hl7.org/fhir/us/Davinci-drug-formulary\" target=\"_blank\" title=\"http://hl7.org/fhir/us/Davinci-drug-formulary\">http://hl7.org/fhir/us/Davinci-drug-formulary</a>.</p>\n<p>We have myriad IG publisher errors because <a href=\"http://hl7.org/fhir/us/Davinci-drug-formulary\" target=\"_blank\" title=\"http://hl7.org/fhir/us/Davinci-drug-formulary\">http://hl7.org/fhir/us/Davinci-drug-formulary</a> \"does not resolve\".</p>\n<p>What needs to happen so that the canonical URL will resolve?<br>\nOr is this an \"excused error\" in the IG build process for now?</p>\n<p>Thx,<br>\nSaul</p>",
        "id": 167960781,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1560354797
    },
    {
        "content": "<p>where did you adjust it?</p>",
        "id": 168037515,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560426898
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> - Based on the <a href=\"https://build.fhir.org/ig/HL7/davinci-pdex-formulary/qa.html\" target=\"_blank\" title=\"https://build.fhir.org/ig/HL7/davinci-pdex-formulary/qa.html\">qa.html</a> it looks like the resolution errors happen when validating definitions where one of the <code>identifier</code>s uses <code>http://hl7.org/fhir/us/Davinci-drug-formulary</code> as the <code>system</code> of the identifier.  Is <code>identifier.system</code> expected to resolve?  Isn't it just a logical identifier for the identifier system that maybe <em>should</em> resolve but is not <em>required</em> to resolve?</p>",
        "id": 168041634,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1560430527
    },
    {
        "content": "<p>Adjusted = set it in the ig.json  (in <a href=\"https://github.com/HL7/davinci-pdex-formulary/blob/master/ig.json\" target=\"_blank\" title=\"https://github.com/HL7/davinci-pdex-formulary/blob/master/ig.json\">https://github.com/HL7/davinci-pdex-formulary/blob/master/ig.json</a>)</p>\n<p><span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span> is asking whether <a href=\"http://hl7.org/fhir/us/Davinci-drug-formulary\" target=\"_blank\" title=\"http://hl7.org/fhir/us/Davinci-drug-formulary\">http://hl7.org/fhir/us/Davinci-drug-formulary</a> <em>needs</em> to resolve.<br>\nAt this point in time, should <a href=\"http://hl7.org/fhir/us/Davinci-drug-formulary\" target=\"_blank\" title=\"http://hl7.org/fhir/us/Davinci-drug-formulary\">http://hl7.org/fhir/us/Davinci-drug-formulary</a>   resolve?</p>",
        "id": 168053841,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1560438454
    },
    {
        "content": "<p>i don't know. what do you think it points to?</p>",
        "id": 168100309,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560477227
    },
    {
        "content": "<p>I can't see why you think it should resolve</p>",
        "id": 168100316,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560477239
    },
    {
        "content": "<p>and what's with the broken &amp; in index.html?</p>",
        "id": 168100369,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560477279
    },
    {
        "content": "<p>This is fairly urgent, since the DrugFormularyIG needs to be finalized by 6/17/19.</p>\n<p>Regarding resolution:<br>\nIn general, it appears that the canonical-URL for an IG in ballot doesn't resolve.  That's fine.<br>\nAlmost all of the errors in this IG relate to extensions that reference locally defined codesystems  (e.g. <a href=\"https://build.fhir.org/ig/HL7/davinci-pdex-formulary/branches/master/CodeSystem-usdf-PharmacyTypeCS.json.html\" target=\"_blank\" title=\"https://build.fhir.org/ig/HL7/davinci-pdex-formulary/branches/master/CodeSystem-usdf-PharmacyTypeCS.json.html\">https://build.fhir.org/ig/HL7/davinci-pdex-formulary/branches/master/CodeSystem-usdf-PharmacyTypeCS.json.html</a> ) that use the canonical-URL.  So for example:</p>\n<p>{<br>\n  \"resourceType\" : \"CodeSystem\",<br>\n  \"id\" : \"usdf-PharmacyTypeCS\",<br>\n  \"text\" : {<br>\n    \"status\" : \"generated\",<br>\n    \"div\" : \"&lt;div xmlns=\\\"http://www.w3.org/1999/xhtml\\\"&gt;\\n&lt;p&gt;&lt;b&gt;PharmacyTypeCS CodeSystem&lt;/b&gt;&lt;/p&gt;\\n&lt;p&gt;Types of Pharmacies. Each payer will have its own controlled vocabulary.&lt;/p&gt;\\n&lt;/div&gt;\"<br>\n  },<br>\n  \"url\" : \"<a href=\"http://hl7.org/fhir/us/Davinci-drug-formulary/CodeSystem/usdf-PharmacyTypeCS\" target=\"_blank\" title=\"http://hl7.org/fhir/us/Davinci-drug-formulary/CodeSystem/usdf-PharmacyTypeCS\">http://hl7.org/fhir/us/Davinci-drug-formulary/CodeSystem/usdf-PharmacyTypeCS</a>\",<br>\n  \"identifier\" : [<br>\n    {<br>\n      \"system\" : <strong>\"http://hl7.org/fhir/us/Davinci-drug-formulary\",</strong><br>\n      \"value\" : \"usdf.PharmacyTypeCS\"<br>\n    }<br>\n  ],<br>\n  \"version\" : \"0.3\",<br>\n  \"name\" : \"PharmacyTypeCS\",<br>\n  \"title\" : \"PharmacyTypeCS\",<br>\n  \"status\" : \"draft\",</p>\n<p>There shouldn't be any expectation/need for this URL to resolve TODAY.   <br>\nSo, I think flagging these as errors is incorrect.      At the point in time when the canonicalURL resolves, this codesystem reference will also resolve.</p>",
        "id": 168138457,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1560521684
    },
    {
        "content": "<blockquote>\n<p>and what's with the broken &amp; in index.html?<br>\nFixed...</p>\n</blockquote>",
        "id": 168138592,
        "sender_full_name": "Saul Kravitz",
        "timestamp": 1560521784
    },
    {
        "content": "<p>The error:</p>\n<blockquote>\n<p>URL value '<a href=\"http://hl7.org/fhir/us/Davinci-drug-formulary\" target=\"_blank\" title=\"http://hl7.org/fhir/us/Davinci-drug-formulary\">http://hl7.org/fhir/us/Davinci-drug-formulary</a>' does not resolve</p>\n</blockquote>\n<p>To resolve, it would find a CodeSystem with a canonical URL of <a href=\"http://hl7.org/fhir/us/Davinci-drug-formulary\" target=\"_blank\" title=\"http://hl7.org/fhir/us/Davinci-drug-formulary\">http://hl7.org/fhir/us/Davinci-drug-formulary</a>. I do not see any such code system in the IG. Nor do I see any such code system in US-Core, where the canonical URL implies that it come from, but you don't have the authority to create resources in the US Core namespace anyway. </p>\n<p>The fragment you have above implies that you think that using some URL in an identifier has some meaning but that is not the case.</p>",
        "id": 168217663,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560622259
    },
    {
        "content": "<p>the correct system value to refer to the code system you have there is <code>http://hl7.org/fhir/us/Davinci-drug-formulary/CodeSystem/usdf-PharmacyTypeCS</code></p>",
        "id": 168217668,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560622288
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> -- this URL is in the <code>identifier</code> -- it is the <code>identifier.system</code>.  I think the idea is that the IG declares business identifiers for each profile/codesystem/valueset -- for which the business identifier's <code>system</code> is actually the canonical URL of the IG.  Is that not valid?</p>",
        "id": 168218119,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1560623112
    },
    {
        "content": "<p>oh. I see. What makes it ok to just pretend that the canonical URL of the IG is also the URL of an identifier system?</p>",
        "id": 168218316,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560623468
    },
    {
        "content": "<p>I'm not sure I follow the value of business identifiers like that anyway. What do they achieve?</p>",
        "id": 168218376,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560623599
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> -- I don't see any specific rules around <code>identifier.system</code> that would prohibit such a thing.  It just says it should be a URL that ensures the identifiers are unique.  That said, the whole thing does seem kind of redundant, doesn't it?  I think our CIMPL tooling is generating out those identifiers like that.  I'll take a look to see if it's really necessary.  We <em>might</em> be relying on it somewhere; I don't remember.</p>",
        "id": 168280658,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1560743700
    },
    {
        "content": "<p>if they're CIMPL identifiers, fine... but they should be in some other space, identified by a naming system.</p>",
        "id": 168280672,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560743752
    },
    {
        "content": "<p>I guess you're right that we don't have a specific rule saying that you can't use an IG canonical URL as a identifier system space. But we do generally have a rule that you don't repurpose URLs (if for no other reason that they blow up OWL)</p>",
        "id": 168280715,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560743811
    },
    {
        "content": "<p>OK.  I think US Drug Formularies is trying to nail down a build tomorrow.  Is this a thing that would/will cause it to fail QA?  Just trying to prioritize the issues to ensure we fix the right ones.</p>",
        "id": 168280766,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1560743924
    },
    {
        "content": "<p>probably not. I'd rather it was fixed, but I guess I wouldn't stop ballot over it</p>",
        "id": 168280855,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560744115
    }
]