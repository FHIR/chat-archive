[
    {
        "content": "<p>One of the OAuth extensions defined in SMART App Launch is the <code>aud</code> parameter that clients are <em>required</em> to pass to the auth endpoint.<br>\nThis one has always bugged me because it is possibly the only thing that prevents someone from using a \"standard\" OAuth 2.0 / OIDC client.</p>\n<p>For example, it means you can't use Postman's built-in OAuth 2.0 authorization support.</p>\n<p>Question:  when this was originally discussed, did anyone consider following <a href=\"https://datatracker.ietf.org/doc/html/draft-tschofenig-oauth-audience-00\">https://datatracker.ietf.org/doc/html/draft-tschofenig-oauth-audience-00</a> and making that audience request a parameter to the <em>token</em> endpoint as opposed to the auth endpoint?</p>",
        "id": 242882963,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1623851408
    },
    {
        "content": "<p>You actually can do the Postman builtin support, you just have to add the aud to the Auth URL field like so,<br>\n<code>{{AUTH_URL}}?aud={{AUD_URL}}</code></p>",
        "id": 242886383,
        "sender_full_name": "Nathan Hall",
        "timestamp": 1623852759
    },
    {
        "content": "<p>bugged me for awhile as well until i did that</p>",
        "id": 242886485,
        "sender_full_name": "Nathan Hall",
        "timestamp": 1623852811
    },
    {
        "content": "<p>ah, that is a GREAT tip, thanks Nathan</p>",
        "id": 242889556,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1623854056
    },
    {
        "content": "<p>still curious on the question of whether that ietf draft was considered.  I found that Postman supports that one now through its <a href=\"/user_uploads/10155/pAuDxieMLzn8tIB7LAoh_tiw/image.png\">Advanced Options tab</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/pAuDxieMLzn8tIB7LAoh_tiw/image.png\" title=\"Advanced Options tab\"><img src=\"/user_uploads/10155/pAuDxieMLzn8tIB7LAoh_tiw/image.png\"></a></div>",
        "id": 242889933,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1623854219
    },
    {
        "content": "<p>and also found <a href=\"https://stackoverflow.com/questions/45876960/how-to-specify-audience-for-an-oauth2-access-token\">https://stackoverflow.com/questions/45876960/how-to-specify-audience-for-an-oauth2-access-token</a> which claims at least Auth0 support this as well</p>",
        "id": 242889992,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1623854247
    },
    {
        "content": "<p>it also seems like it could help with the concerns raised under <a href=\"#narrow/stream/179170-smart/topic/Multiple.20Audiences\">https://chat.fhir.org/#narrow/stream/179170-smart/topic/Multiple.20Audiences</a> ...or maybe not (was thinking you could authenticate once and then get tokens for different endpoints by calling token endpoint multiple times, but now I don't think it works like that)</p>",
        "id": 242890199,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1623854336
    },
    {
        "content": "<p>too late</p>",
        "id": 242890268,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1623854361
    },
    {
        "content": "<p>I don't think this ever came up in discussion. In practice, either approach requires adding an audience parameter to a step in the process (either the authorize step, or the token step). One advantage of attaching to the authorize step (as we do today in SMART) is that broken cases can fail fast, rather than <em>after</em> the user has completed an approval step</p>",
        "id": 242941350,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1623876657
    },
    {
        "content": "<p>(that draft from 2013 is also... very drafty... but I'm trying to fill in details generously.)</p>",
        "id": 242941433,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1623876695
    }
]