[
    {
        "content": "<p>We download SMART server from <a href=\"http://smarthealthit.org\" target=\"_blank\" title=\"http://smarthealthit.org\">smarthealthit.org</a>. In the metadata, there is a User Resource. But I cannot find any definition in FHIR spec.</p>",
        "id": 153950655,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1522861645
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> ?</p>",
        "id": 153950668,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1522864861
    },
    {
        "content": "<p>I find the same resource on <a href=\"http://smarthealthit.org\" target=\"_blank\" title=\"http://smarthealthit.org\">smarthealthit.org</a> itself.<br>\n<a href=\"https://sb-fhir-dstu2.smarthealthit.org/smartdstu2/data/metadata\" target=\"_blank\" title=\"https://sb-fhir-dstu2.smarthealthit.org/smartdstu2/data/metadata\">https://sb-fhir-dstu2.smarthealthit.org/smartdstu2/data/metadata</a></p>",
        "id": 153950669,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1522864931
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191506\">@Yunwei Wang</span> this is a bug in the version of HAPI that's underlying the sandbox (<a href=\"https://github.com/jamesagnew/hapi-fhir/issues/765\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/issues/765\">https://github.com/jamesagnew/hapi-fhir/issues/765</a> ). It should be fixed in the online sandbox when we upgrade to a more recent version of HAPI (currently targeted for the end of the April) and in the downloadable version when we move to a docker based release (targeted for this summer).</p>",
        "id": 153950673,
        "sender_full_name": "Dan Gottlieb",
        "timestamp": 1522866507
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191414\">@Dan Gottlieb</span> Thank you for the confirmation. How I can manually remove that from conformance on my downloaded server?</p>",
        "id": 153950674,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1522866686
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192233\">@Travis Cummings</span> since the SMART sandbox doesn't support the latest version of HAPI,  is there an easy way for <span class=\"user-mention\" data-user-id=\"191506\">@Yunwei Wang</span>  to patch <code>hapi-fhir-structures-dstu2/pom.xml</code> locally without impacting the rest of the server or will that have to wait on updates to the SMART stack?</p>",
        "id": 153950677,
        "sender_full_name": "Dan Gottlieb",
        "timestamp": 1522868198
    },
    {
        "content": "<p>The way I would recommend installing a new version of HAPI to a SMART Installer deployment is:<br>\n1) on your server, change to the fhir user (sudo su fhir)</p>",
        "id": 153951000,
        "sender_full_name": "Travis Cummings",
        "timestamp": 1522958267
    },
    {
        "content": "<p>2) cd /home/fhir/api</p>",
        "id": 153951001,
        "sender_full_name": "Travis Cummings",
        "timestamp": 1522958299
    },
    {
        "content": "<p>3) expand the hspc-api jar file (I'm not able to expand it using \"jar xf\" for some reason, probably because of its executable packaging, so I used zip)</p>",
        "id": 153951008,
        "sender_full_name": "Travis Cummings",
        "timestamp": 1522959526
    },
    {
        "content": "<p>4) notice the Hapi Jars at BOOT-INF/lib</p>",
        "id": 153951009,
        "sender_full_name": "Travis Cummings",
        "timestamp": 1522959561
    },
    {
        "content": "<p>5) replace all of the Hapi jars with the version of Hapi you would like (ex: 3.3.0).  make sure all of the Hapi jars are moved to the correct version, don't have a mix of Hapi jars.</p>",
        "id": 153951010,
        "sender_full_name": "Travis Cummings",
        "timestamp": 1522959604
    },
    {
        "content": "<p>6) Package up the hspc-api again</p>",
        "id": 153951012,
        "sender_full_name": "Travis Cummings",
        "timestamp": 1522959696
    },
    {
        "content": "<p>7) restart the api service using</p>",
        "id": 153951014,
        "sender_full_name": "Travis Cummings",
        "timestamp": 1522959756
    },
    {
        "content": "<p>sudo service api_dstu2 restart</p>",
        "id": 153951015,
        "sender_full_name": "Travis Cummings",
        "timestamp": 1522959757
    },
    {
        "content": "<p>sudo service api_stu3 restart</p>",
        "id": 153951016,
        "sender_full_name": "Travis Cummings",
        "timestamp": 1522959766
    },
    {
        "content": "<p>Alternative method (if you are set up for Java and Maven development):<br>\n1) clone the HSPC Reference API from <a href=\"https://bitbucket.org/hspconsortium/reference-api\" target=\"_blank\" title=\"https://bitbucket.org/hspconsortium/reference-api\">https://bitbucket.org/hspconsortium/reference-api</a>, master branch</p>",
        "id": 153951017,
        "sender_full_name": "Travis Cummings",
        "timestamp": 1522959893
    },
    {
        "content": "<p>2) update the ./pom.xml hapi.version property to be the version of Hapi you would like (ex: 3.3.0)</p>",
        "id": 153951018,
        "sender_full_name": "Travis Cummings",
        "timestamp": 1522959936
    },
    {
        "content": "<p>3) build the reference api as in the README.md, or \"mvn clean install\"</p>",
        "id": 153951019,
        "sender_full_name": "Travis Cummings",
        "timestamp": 1522960076
    },
    {
        "content": "<p>4) upload the jar from reference-api-webapp-multitenant/target to your SMART server at /home/fhir/api</p>",
        "id": 153951020,
        "sender_full_name": "Travis Cummings",
        "timestamp": 1522960141
    },
    {
        "content": "<p>5) alter the api services at /etc/systemd/system to point to the jar you just uploaded (there are 4 services, use \"ls <em>api_</em>\" to see them)<br>\n6) restart these 4 services</p>",
        "id": 153951022,
        "sender_full_name": "Travis Cummings",
        "timestamp": 1522960301
    },
    {
        "content": "<p>Whew, the final alternative is to ask <span class=\"user-mention\" data-user-id=\"191496\">@Nikolai Schwertner</span> when HSPC will move to the Hapi 3.3.0 release.  I would guess they could prioritize this at their 4/16/18 planning meeting, and release it as soon as 4/24/18 (assuming the schema is not changing).</p>",
        "id": 153951024,
        "sender_full_name": "Travis Cummings",
        "timestamp": 1522960710
    },
    {
        "content": "<p>In this scenario, the SMART installer would simply change the roles/api/defaults/main.yml property:</p>",
        "id": 153951025,
        "sender_full_name": "Travis Cummings",
        "timestamp": 1522960765
    },
    {
        "content": "<p>api_server_artifact_version: \"1.11.7\" becomes the next version of hspc's reference_api (ex: 1.14.0)</p>",
        "id": 153951026,
        "sender_full_name": "Travis Cummings",
        "timestamp": 1522960798
    },
    {
        "content": "<p>Then run the SMART installer's playbook_api.yml to install the newer version of the hspc artifact</p>",
        "id": 153951027,
        "sender_full_name": "Travis Cummings",
        "timestamp": 1522960977
    },
    {
        "content": "<p>We will look into folding HAPI 3.3.0 into the HSPC sandbox<br>\n environment for 24 April 2018</p>",
        "id": 153951028,
        "sender_full_name": "Nikolai Schwertner",
        "timestamp": 1522961381
    }
]