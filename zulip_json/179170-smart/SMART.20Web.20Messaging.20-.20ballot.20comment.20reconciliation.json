[
    {
        "content": "<p>Cross posting from FHIR-I<br>\nFollowing up from Monday's call - I've put together a sign-up form for future SMART Web Messaging ballot triage calls. Please sign up in you're interested in attending so I can pick a good time to meet.<br>\n<a href=\"https://docs.google.com/forms/d/179EGYzc3PBfYMPDJarF2078rIlGbX7S8VuzN4WaRINE/edit?usp=sharing\">https://docs.google.com/forms/d/179EGYzc3PBfYMPDJarF2078rIlGbX7S8VuzN4WaRINE/edit?usp=sharing</a></p>",
        "id": 219367291,
        "sender_full_name": "Carl Anderson",
        "timestamp": 1607534040
    },
    {
        "content": "<p>Err, I meant to send a link to fill out the form, not edit it. Ignore the link above - this is the one you want: <a href=\"https://forms.gle/g2kWwjBCR1sbfmjdA\">https://forms.gle/g2kWwjBCR1sbfmjdA</a></p>",
        "id": 219510756,
        "sender_full_name": "Carl Anderson",
        "timestamp": 1607623503
    },
    {
        "content": "<p>FAYI - there will be a meeting on Friday to discuss some of the open ballot comments.  X-post: <a href=\"#narrow/stream/179280-fhir.2Finfrastructure-wg/topic/Today's.20call/near/221791098\">https://chat.fhir.org/#narrow/stream/179280-fhir.2Finfrastructure-wg/topic/Today's.20call/near/221791098</a></p>",
        "id": 221791251,
        "sender_full_name": "Carl Anderson",
        "timestamp": 1609952077
    },
    {
        "content": "<p>Re: <a href=\"https://docs.google.com/document/d/1dsVVnSAZpYCplpNYtWp6OO1rQNQ9zeglA086pZfIw2M/edit#heading=h.d6bht1x9urhe\">Discussion on Handshakes</a></p>\n<p><a href=\"/user_uploads/10155/aCk8iAJGwBFV1npNdlZrKssL/image.png\">image.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/aCk8iAJGwBFV1npNdlZrKssL/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/aCk8iAJGwBFV1npNdlZrKssL/image.png\"></a></div><p>How does this look <span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> <span class=\"user-mention\" data-user-id=\"194452\">@Bas van den Heuvel</span> <span class=\"user-mention\" data-user-id=\"193265\">@Matt Varghese</span> for an example SVG to be included in the IG?</p>",
        "id": 224941489,
        "sender_full_name": "Carl Anderson",
        "timestamp": 1612302311
    },
    {
        "content": "<p>Why does scratchpad.create have a responseToMessageId value set? It's not a response..</p>",
        "id": 224942027,
        "sender_full_name": "Matt Varghese",
        "timestamp": 1612302582
    },
    {
        "content": "<p>Right - I don't remember addressing that in the discussion in the last meeting.  I just used the messageId of the handshake response in the example.</p>",
        "id": 224942362,
        "sender_full_name": "Carl Anderson",
        "timestamp": 1612302727
    },
    {
        "content": "<p>Does it make more sense to set it or leave it unset?  If we want to require a handshake be completed before each message, I can see an argument for requiring <code>responseToMessageId</code> for all messages <strong>except</strong> the initial handshake.</p>",
        "id": 224942478,
        "sender_full_name": "Carl Anderson",
        "timestamp": 1612302811
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/rHbqyf_JJ-YGWIUR6XgRITbf/image.png\">image.png</a> <br>\nAn example with uuids...</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/rHbqyf_JJ-YGWIUR6XgRITbf/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/rHbqyf_JJ-YGWIUR6XgRITbf/image.png\"></a></div>",
        "id": 224942593,
        "sender_full_name": "Carl Anderson",
        "timestamp": 1612302857
    },
    {
        "content": "<p>I could leave it unset for now, and then create a separate issue to discuss at the next call.  If that makes the most sense.</p>",
        "id": 224945390,
        "sender_full_name": "Carl Anderson",
        "timestamp": 1612304214
    },
    {
        "content": "<p>In terms of flow, looks good! In terms of implied structure, the diagram makes me think that \"status.handshake\" will appear over the wire as a JSON key, which I don't think is right (should be a \"messageType\", sibling to \"messageId\")</p>",
        "id": 224947449,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1612305390
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> - totally correct.  I took some liberties with the diagram labels.  But it would be essentially this:</p>\n<div class=\"codehilite\" data-code-language=\"JavaScript\"><pre><span></span><code><span class=\"nx\">targetWindow</span><span class=\"p\">.</span><span class=\"nx\">postMessage</span><span class=\"p\">({</span>\n  <span class=\"s2\">\"messageId\"</span><span class=\"o\">:</span> <span class=\"s2\">\"b72e6e52-1956-4353-ab5e-36129011f3ee\"</span><span class=\"p\">,</span>\n  <span class=\"s2\">\"messageType\"</span><span class=\"o\">:</span> <span class=\"s2\">\"status.handshake\"</span><span class=\"p\">,</span>\n  <span class=\"s2\">\"payload\"</span><span class=\"o\">:</span> <span class=\"p\">{</span>\n<span class=\"p\">...</span>\n  <span class=\"p\">}</span>\n<span class=\"p\">},</span> <span class=\"nx\">targetOrigin</span><span class=\"p\">);</span>\n</code></pre></div>\n<p>A better way to put it into the diagram might be:</p>\n<div class=\"codehilite\" data-code-language=\"JSON\"><pre><span></span><code><span class=\"p\">{</span>\n  <span class=\"nt\">\"messageType\"</span><span class=\"p\">:</span> <span class=\"s2\">\"status.handshake\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"messageId\"</span><span class=\"p\">:</span> <span class=\"s2\">\"b72e6e52-1956-4353-ab5e-36129011f3ee\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"payload\"</span><span class=\"p\">:</span> <span class=\"p\">{}</span>\n<span class=\"p\">}</span>\n</code></pre></div>",
        "id": 224950086,
        "sender_full_name": "Carl Anderson",
        "timestamp": 1612306947
    },
    {
        "content": "<p>I'll fiddle.  I've been reading through the options on <a href=\"https://sequencediagram.org/instructions.html\">sequencediagram.org</a>.</p>",
        "id": 224950265,
        "sender_full_name": "Carl Anderson",
        "timestamp": 1612307063
    },
    {
        "content": "<p>What about the issue of setting the <code>responseToMessageId</code> for all messages that aren't handshake 'SYN' messages?</p>",
        "id": 224950491,
        "sender_full_name": "Carl Anderson",
        "timestamp": 1612307197
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/Ym38GSvjXoRWROHalkmPPESX/image.png\">image.png</a> <br>\nI think this is an improvement.</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/Ym38GSvjXoRWROHalkmPPESX/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/Ym38GSvjXoRWROHalkmPPESX/image.png\"></a></div>",
        "id": 224953542,
        "sender_full_name": "Carl Anderson",
        "timestamp": 1612309291
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"233081\">@Carl Anderson</span> , responding to your question - I'm not saying each message should be preceded by a handshake. Rather that the app MUST handshake before using other messages. So in my opinion, the responseToMessageId referring to the handshake is not necessary for the subsequent message.</p>",
        "id": 224965763,
        "sender_full_name": "Matt Varghese",
        "timestamp": 1612318644
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"193265\">@Matt Varghese</span> - I think we should bring this up again for finalization / clarification at this week's call.  From what I can gather from the notes (and the discussion in the recording) - it's still not clear whether we voted to include the handshake before each message, or once per session (or something else).</p>\n<p>Here's what I have in the notes, anyway.</p>\n<div class=\"codehilite\" data-code-language=\"markdown\"><pre><span></span><code>Bas: Propose that we add a \"status.handshake\" as a new request message type\n  <span class=\"k\">*</span> Request message has no required body params\n    <span class=\"k\">*</span> Empty object\n    <span class=\"k\">*</span> Extensions allowed\n  <span class=\"k\">*</span> Response message has optional body params\n    <span class=\"k\">*</span> error: optional\n    <span class=\"k\">*</span> extensions allowed\n\nMotion: Bas van den Heuvel (per description above) / Matt Varghese\nDiscussion\n  <span class=\"k\">*</span> how often will this be called? Whenever the app wants (from app perspective); EHR respondes whenever it receives a message\n  <span class=\"k\">*</span> What if the app \"navigates to a new app\"?  Will discuss separately.\n</code></pre></div>",
        "id": 225071711,
        "sender_full_name": "Carl Anderson",
        "timestamp": 1612381948
    },
    {
        "content": "<p>Also, it's still not clear to me whether it's <em>wrong</em> to include a handshake response messageID as a <code>responseToMessageId</code> in a <code>scratchpad.*</code> or <code>ui.*</code> message.  At the very least we should clarify in the IG what is expected.</p>",
        "id": 225071944,
        "sender_full_name": "Carl Anderson",
        "timestamp": 1612382056
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"233081\">@Carl Anderson</span>  Fair enough. What I said is my view and what I understood from the call. <br>\nI fully understand your concern of it not being on the notes - so we can discuss again. <br>\nIs the ballot review a standing meeting? I don't have any calls I'm tracking..</p>",
        "id": 225072535,
        "sender_full_name": "Matt Varghese",
        "timestamp": 1612382303
    },
    {
        "content": "<p>It is a standing meeting, yes.  Let me find the link...</p>",
        "id": 225072643,
        "sender_full_name": "Carl Anderson",
        "timestamp": 1612382345
    },
    {
        "content": "<p><a href=\"http://hl7.org/concalls/CallDetails.aspx?concall=52801\">http://hl7.org/concalls/CallDetails.aspx?concall=52801</a></p>",
        "id": 225072673,
        "sender_full_name": "Carl Anderson",
        "timestamp": 1612382360
    },
    {
        "content": "<p>You can import the <code>.ics</code> for this to your calendar (but remember to modify it to recur weekly)</p>",
        "id": 225072720,
        "sender_full_name": "Carl Anderson",
        "timestamp": 1612382388
    },
    {
        "content": "<blockquote>\n<p>the app MUST handshake before using other messages.</p>\n</blockquote>\n<p>From discussion (Bas said this clearly, I recall), client can call handshake whenever it wants to (or never); server's job is to respond when it receives one. We can review/discuss Fri.</p>",
        "id": 225078742,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1612385158
    },
    {
        "content": "<p>OK, thanks!  That simplifies things.  I'll prepare the PR that way and we can discuss at the meeting if anyone wants.</p>",
        "id": 225192916,
        "sender_full_name": "Carl Anderson",
        "timestamp": 1612459574
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"233081\">@Carl Anderson</span> can you share the web conference link here for our ballot reconciliation call? Looking forward to talking with y'all in 5min</p>",
        "id": 225325302,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1612544202
    },
    {
        "content": "<p>Ah, <a href=\"https://meet.jit.si/SMARTWebMessagingBallotTriage\">https://meet.jit.si/SMARTWebMessagingBallotTriage</a></p>",
        "id": 225325323,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1612544214
    },
    {
        "content": "<p>Yep</p>",
        "id": 225325346,
        "sender_full_name": "Carl Anderson",
        "timestamp": 1612544225
    },
    {
        "content": "<p>you got it</p>",
        "id": 225325354,
        "sender_full_name": "Carl Anderson",
        "timestamp": 1612544229
    },
    {
        "content": "<p>(I was having trouble getting the HL7 <a href=\"http://www.hl7.org/concalls/CallDetails.aspx?concall=52801\">tracker</a> to load; finally did.)</p>",
        "id": 225325373,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1612544237
    },
    {
        "content": "<p>If anyone is having trouble connecting, please let me know here!</p>",
        "id": 225326386,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1612544610
    },
    {
        "content": "<p>FYI we've got two lingering issues from ballot -- I've proposed a block vote at <a href=\"#narrow/stream/179280-fhir.2Finfrastructure-wg/topic/For.20this.20week's.20call/near/271208174\">https://chat.fhir.org/#narrow/stream/179280-fhir.2Finfrastructure-wg/topic/For.20this.20week's.20call/near/271208174</a>, to take up in FHIR Infrastructure WG call on Feb 21.</p>\n<p>In the meantime I'll get the spec tidied and mark already-applied changes as applied.</p>",
        "id": 271208326,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1644363322
    },
    {
        "content": "<p><a href=\"http://build.fhir.org/ig/HL7/smart-web-messaging/\">http://build.fhir.org/ig/HL7/smart-web-messaging/</a> has all outstanding ballot issues addressed. Please let me know if you spot any issues.</p>",
        "id": 271651681,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1644621459
    }
]