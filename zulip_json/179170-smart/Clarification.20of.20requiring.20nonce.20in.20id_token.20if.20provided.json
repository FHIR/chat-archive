[
    {
        "content": "<p>I feel that some clarity is required regarding support for use of a nonce by a SMART on FHIR app.</p>\n<p>We've just started testing integration with our solution being launched via SMART on FHIR. We're a confidential app that requires the identity of the user as we present content from our system and the EHR at the same time. We're using a standard OIDC Relying Party as part of our solution, which applies all security best practices - including the use of a nonce. We've had a 0 hit rate for that working so far.</p>\n<p>One major EHR vendor has this to say. \"The authorization code flow technically doesn't require it to be secure, and the SMART on FHIR specification didn't require it [use of the nonce]\".</p>\n<p>So, I'm seeking clarification here regarding whether complying with OIDC specification should be considered \"par for the course\" or whether the HL7 SMART on FHIR specification does need to call out some more things, like support for a nonce. And, as part of that, perhaps have examples that follow security best practices within the specification flow diagrams?</p>",
        "id": 173238613,
        "sender_full_name": "David Teirney",
        "timestamp": 1565814237
    },
    {
        "content": "<p>In general we try to point to OIDC rather that re-stating content from OIDC; we only try to specify <em>extra</em> details. But 1) showing best practices in examples, 2) ensuring test suites like <a href=\"https://inferno.healthit.gov\" target=\"_blank\" title=\"https://inferno.healthit.gov\">Inferno</a> test support, and 3) making any spot edits to content at <a href=\"http://hl7.org/fhir/smart-app-launch/scopes-and-launch-context/index.html#scopes-for-requesting-identity-data\" target=\"_blank\" title=\"http://hl7.org/fhir/smart-app-launch/scopes-and-launch-context/index.html#scopes-for-requesting-identity-data\">http://hl7.org/fhir/smart-app-launch/scopes-and-launch-context/index.html#scopes-for-requesting-identity-data</a> all seem worthwhile.</p>",
        "id": 173241088,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1565815832
    },
    {
        "content": "<p>At the very least it'd be good to capture issues at <a href=\"https://github.com/hl7/smart-app-launch\" target=\"_blank\" title=\"https://github.com/hl7/smart-app-launch\">https://github.com/hl7/smart-app-launch</a> and/or <a href=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemAdd&amp;tracker_id=677\" target=\"_blank\" title=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemAdd&amp;tracker_id=677\">https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemAdd&amp;tracker_id=677</a> so that when work begins for a v-next, we don't lose track.</p>",
        "id": 173241249,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1565815893
    },
    {
        "content": "<p>Is support for OIDC (or at least openid profile scopes) now required? It used to be optional...</p>",
        "id": 173241948,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1565816369
    },
    {
        "content": "<p>As a start I've created <a href=\"https://github.com/HL7/smart-app-launch/issues/295\" target=\"_blank\" title=\"https://github.com/HL7/smart-app-launch/issues/295\">https://github.com/HL7/smart-app-launch/issues/295</a></p>",
        "id": 173243992,
        "sender_full_name": "David Teirney",
        "timestamp": 1565817884
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191912\">@Michele Mottini</span> that's a good question as well. My read of the spec wasn't that it was optional, but rather a SMART on FHIR app could optionally request the openid scope. However, Epic doesn't support OIDC...</p>",
        "id": 173244167,
        "sender_full_name": "David Teirney",
        "timestamp": 1565818052
    },
    {
        "content": "<p>Still optional? See <a href=\"http://hl7.org/fhir/smart-app-launch/conformance/index.html#smart-on-fhir-core-capabilities-and-capability-sets\" target=\"_blank\" title=\"http://hl7.org/fhir/smart-app-launch/conformance/index.html#smart-on-fhir-core-capabilities-and-capability-sets\">http://hl7.org/fhir/smart-app-launch/conformance/index.html#smart-on-fhir-core-capabilities-and-capability-sets</a></p>",
        "id": 173244628,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1565818526
    },
    {
        "content": "<p>I think it's also worth while discussing what specific threat vector this protects/what the benefits are</p>",
        "id": 173246515,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565820174
    },
    {
        "content": "<p>OAuth 2 state param seems to play a similar part in the SMART workflow</p>",
        "id": 173246691,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565820327
    },
    {
        "content": "<p>OIDC is optional per SMART, but please note that ONC's proposed rule would adopt SMART App Launch <em>with</em> the OIDC feature.</p>",
        "id": 173246921,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1565820491
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> where's the best place to see what the ONC's proposed rules are?</p>",
        "id": 173586698,
        "sender_full_name": "David Teirney",
        "timestamp": 1566255388
    },
    {
        "content": "<p><a href=\"http://healthit.gov/nprm\" target=\"_blank\" title=\"http://healthit.gov/nprm\">healthit.gov/nprm</a> is a good place to start</p>",
        "id": 173586822,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1566255498
    },
    {
        "content": "<p>And inferno is the implementation of these rules: <a href=\"https://inferno.healthit.gov/inferno/\" target=\"_blank\" title=\"https://inferno.healthit.gov/inferno/\">https://inferno.healthit.gov/inferno/</a></p>",
        "id": 173626857,
        "sender_full_name": "Isaac Vetter",
        "timestamp": 1566273129
    }
]