[
    {
        "content": "<p>Hey all, I'm trying to implement custom scope requests from my client to a fhir server re: <a href=\"http://www.hl7.org/fhir/smart-app-launch/scopes-and-launch-context/#requesting-context-with-scopes\">http://www.hl7.org/fhir/smart-app-launch/scopes-and-launch-context/#requesting-context-with-scopes</a>. </p>\n<p>Anyone with fhir-client.js knowledge know if it's possible to request additional scopes from the client? For example:</p>\n<div class=\"codehilite\"><pre><span></span><code>// launch.js\nscope: launch/patient launch/{custom-scope}...\n...\n\n//index.js\n\nFHIR.oauth2.ready()\n  .then(async (client) =&gt; {\n    await client.patient.read()....\n\n    // grab custom scope here\n    await client.request({custom-scope}).then()...\n}\n</code></pre></div>\n<p>This will not work, but I'm not sure if there is a way to do this.</p>",
        "id": 227995918,
        "sender_full_name": "Keller Martin",
        "timestamp": 1614374428
    },
    {
        "content": "<p>Assuming you've already requested the custom scope and your auth provider places the custom scope in the launch context, then I think <code>client.state.tokenResponse.custom-scope</code> should get it.</p>",
        "id": 228000446,
        "sender_full_name": "Ian Bacher",
        "timestamp": 1614376319
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"259065\">@Ian Bacher</span> , that's what I needed. I'm doing my development without having a server to actually grant the custom scope, so I'm a bit blind here. I'll implement it this way, thanks.</p>",
        "id": 228002248,
        "sender_full_name": "Keller Martin",
        "timestamp": 1614377026
    }
]