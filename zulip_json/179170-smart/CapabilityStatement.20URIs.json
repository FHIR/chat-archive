[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> the page here <a href=\"http://www.hl7.org/fhir/smart-app-launch/capability-statement/\" target=\"_blank\" title=\"http://www.hl7.org/fhir/smart-app-launch/capability-statement/\">http://www.hl7.org/fhir/smart-app-launch/capability-statement/</a> doesn't say whether the URIs are relative, absolute, or either. <span class=\"user-mention\" data-user-id=\"192576\">@Robert Scanlon</span></p>",
        "id": 154006862,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1539031046
    },
    {
        "content": "<p>.. no takers?</p>",
        "id": 154007071,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1539105736
    },
    {
        "content": "<p>If we leave it as is, I think we should expect some servers to put out relative URIs, as it seems like it is valid according to the SMART Conformance extensions.  For those APIs that are integrating the FHIR and OAuth endpoints onto a single host (as it appears Grahame was doing, and what BlueButton 2 does), it is natural to just use relative URIs.  I think that is likely to cause some apps to break in unexpected ways after they are released, as it did with the Inferno app.</p>",
        "id": 154007359,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1539177377
    },
    {
        "content": "<p>Note: Bluebutton 2 is on the same host (at least in the sandbox), but it still uses absolute URIs.  Just pointing out that the pattern of having the AuthZ server on the same host as the FHIR endpoint may not be completely uncommon.</p>",
        "id": 154007361,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1539177743
    },
    {
        "content": "<p>Personally I think they should just be absolute.  That may complicate servers slightly (if for some reason the host may change... like going from development -&gt; production).  But that seems better than than requiring every client to code in logic to basically do <code>\"http://example.com/v1/fhir/\" + \"../oauth/token\" = \"http://example.com/v1/oauth/token\"</code>, etc.  And whether or not you include that trailing slash on the FHIR endpoint might affect how the relative URI behaves.  It just seems like it is going to cause issues.  But I don't know if you can formally specify that in the extension, or if there is precedent for something like this.</p>",
        "id": 154007368,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1539178674
    },
    {
        "content": "<p>yes there's precedent for this. <span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> it's procedurally too late to rule on this, but could we add a recommendation to the version we're about to publish?</p>",
        "id": 154007517,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1539190472
    },
    {
        "content": "<p>I also agree they should be an absolute URI. Agreed we should add a recommendation.</p>",
        "id": 154007677,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1539201466
    },
    {
        "content": "<p>make an issue on github?</p>",
        "id": 154007680,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1539201587
    },
    {
        "content": "<p><a href=\"https://github.com/HL7/smart-app-launch/pull/286\" target=\"_blank\" title=\"https://github.com/HL7/smart-app-launch/pull/286\">https://github.com/HL7/smart-app-launch/pull/286</a></p>",
        "id": 154007688,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1539201781
    },
    {
        "content": "<p>Not directly related, but do we want to restrict the profile/fhirUser claim in an OIDC id token in the same way? It seems like currently it could be either relative or absolute: <a href=\"http://build.fhir.org/ig/HL7/smart-app-launch/scopes-and-launch-context/index.html#scopes-for-requesting-identity-data\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/smart-app-launch/scopes-and-launch-context/index.html#scopes-for-requesting-identity-data\">http://build.fhir.org/ig/HL7/smart-app-launch/scopes-and-launch-context/index.html#scopes-for-requesting-identity-data</a> .</p>",
        "id": 154007702,
        "sender_full_name": "Dan Gottlieb",
        "timestamp": 1539202212
    },
    {
        "content": "<p>I'm not as sure about this one.</p>",
        "id": 154007716,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1539203488
    }
]