[
    {
        "content": "<p>I am slowly learnig how to use SMART Apps for FHIR.  When you get your JSON response - what are people using to parse the JSON data and then print it out into HTML ?  Below is (fake) JSON data - say I want to only echo/print a list of the patients medications taken from field \"text\" or field \"display\".. how are people doing it?</p>\n<p>[<br>\n    {<br>\n        \"fullUrl\": \"<a href=\"https://launch.smarthealthit.org/v/r4/fhir/MedicationRequest/83b6c511-8b78-4fe2-b484-346ddee61933\">https://launch.smarthealthit.org/v/r4/fhir/MedicationRequest/83b6c511-8b78-4fe2-b484-346ddee61933</a>\",<br>\n        \"resource\": {<br>\n            \"resourceType\": \"MedicationRequest\",<br>\n            \"id\": \"83b6c511-8b78-4fe2-b484-346ddee61933\",<br>\n            \"meta\": {<br>\n                \"versionId\": \"4\",<br>\n                \"lastUpdated\": \"2021-04-06T03:14:44.834-04:00\",<br>\n                \"tag\": [<br>\n                    {<br>\n                        \"system\": \"<a href=\"https://smarthealthit.org/tags\">https://smarthealthit.org/tags</a>\",<br>\n                        \"code\": \"synthea-5-2019\"<br>\n                    }<br>\n                ]<br>\n            },<br>\n            \"status\": \"active\",<br>\n            \"intent\": \"order\",<br>\n            \"medicationCodeableConcept\": {<br>\n                \"coding\": [<br>\n                    {<br>\n                        \"system\": \"<a href=\"http://www.nlm.nih.gov/research/umls/rxnorm\">http://www.nlm.nih.gov/research/umls/rxnorm</a>\",<br>\n                        \"code\": \"316049\",<br>\n                        \"display\": \"Hydrochlorothiazide 25 MG\"<br>\n                    }<br>\n                ],<br>\n                \"text\": \"Hydrochlorothiazide 25 MG\"<br>\n            },<br>\n            \"subject\": {<br>\n                \"reference\": \"Patient/2cda5aad-e409-4070-9a15-e1c35c46ed5a\"<br>\n            },<br>\n            \"encounter\": {<br>\n                \"reference\": \"Encounter/ffbebef5-2bc6-42ed-9e45-5913752d72c4\"<br>\n            },<br>\n            \"authoredOn\": \"2011-05-27T09:51:38+00:00\",<br>\n            \"requester\": {<br>\n                \"reference\": \"Practitioner/8b85559d-27de-4d4b-bea7-5a715164cb60\"<br>\n            },<br>\n            \"reasonReference\": [<br>\n                {<br>\n                    \"reference\": \"Condition/0dc3b17a-1180-4881-bbc3-6f2a399901ae\"<br>\n                }<br>\n            ]<br>\n        },<br>\n        \"search\": {<br>\n            \"mode\": \"match\"<br>\n        },<br>\n        \"response\": {<br>\n            \"status\": \"200 OK\",<br>\n            \"etag\": \"W/\\\"4\\\"\"<br>\n        }<br>\n    },<br>\n    {<br>\n        \"fullUrl\": \"<a href=\"https://launch.smarthealthit.org/v/r4/fhir/MedicationRequest/f3a6c1f0-3896-4120-a186-920e593b305e\">https://launch.smarthealthit.org/v/r4/fhir/MedicationRequest/f3a6c1f0-3896-4120-a186-920e593b305e</a>\",<br>\n        \"resource\": {<br>\n            \"resourceType\": \"MedicationRequest\",<br>\n            \"id\": \"f3a6c1f0-3896-4120-a186-920e593b305e\",<br>\n            \"meta\": {<br>\n                \"versionId\": \"4\",<br>\n                \"lastUpdated\": \"2021-04-06T03:14:40.555-04:00\",<br>\n                \"tag\": [<br>\n                    {<br>\n                        \"system\": \"<a href=\"https://smarthealthit.org/tags\">https://smarthealthit.org/tags</a>\",<br>\n                        \"code\": \"synthea-5-2019\"<br>\n                    }<br>\n                ]<br>\n            },<br>\n            \"status\": \"stopped\",<br>\n            \"intent\": \"order\",<br>\n            \"medicationCodeableConcept\": {<br>\n                \"coding\": [<br>\n                    {<br>\n                        \"system\": \"<a href=\"http://www.nlm.nih.gov/research/umls/rxnorm\">http://www.nlm.nih.gov/research/umls/rxnorm</a>\",<br>\n                        \"code\": \"562251\",<br>\n                        \"display\": \"Amoxicillin 250 MG / Clavulanate 125 MG Oral Tablet\"<br>\n                    }<br>\n                ],<br>\n                \"text\": \"Amoxicillin 250 MG / Clavulanate 125 MG Oral Tablet\"<br>\n            },<br>\n            \"subject\": {<br>\n                \"reference\": \"Patient/2cda5aad-e409-4070-9a15-e1c35c46ed5a\"<br>\n            },<br>\n            \"encounter\": {<br>\n                \"reference\": \"Encounter/25e95ec9-97e5-4385-8f56-b2bf6552f466\"<br>\n            },<br>\n            \"authoredOn\": \"2014-10-04T09:51:38+00:00\",<br>\n            \"requester\": {<br>\n                \"reference\": \"Practitioner/8b85559d-27de-4d4b-bea7-5a715164cb60\"<br>\n            },<br>\n            \"reasonReference\": [<br>\n                {<br>\n                    \"reference\": \"Condition/d918664d-21be-4ecd-b98e-1195fd1961ac\"<br>\n                }<br>\n            ]<br>\n        },<br>\n        \"search\": {<br>\n            \"mode\": \"match\"<br>\n        },<br>\n        \"response\": {<br>\n            \"status\": \"200 OK\",<br>\n            \"etag\": \"W/\\\"4\\\"\"<br>\n        }<br>\n    },<br>\n    {<br>\n        \"fullUrl\": \"<a href=\"https://launch.smarthealthit.org/v/r4/fhir/MedicationRequest/d7977dfa-dd7d-4390-b525-12e758f28c7b\">https://launch.smarthealthit.org/v/r4/fhir/MedicationRequest/d7977dfa-dd7d-4390-b525-12e758f28c7b</a>\",<br>\n        \"resource\": {<br>\n            \"resourceType\": \"MedicationRequest\",<br>\n            \"id\": \"d7977dfa-dd7d-4390-b525-12e758f28c7b\",<br>\n            \"meta\": {<br>\n                \"versionId\": \"4\",<br>\n                \"lastUpdated\": \"2021-04-06T03:05:42.212-04:00\",<br>\n                \"tag\": [<br>\n                    {<br>\n                        \"system\": \"<a href=\"https://smarthealthit.org/tags\">https://smarthealthit.org/tags</a>\",<br>\n                        \"code\": \"synthea-5-2019\"<br>\n                    }<br>\n                ]<br>\n            },<br>\n            \"status\": \"stopped\",<br>\n            \"intent\": \"order\",<br>\n            \"medicationCodeableConcept\": {<br>\n                \"coding\": [<br>\n                    {<br>\n                        \"system\": \"<a href=\"http://www.nlm.nih.gov/research/umls/rxnorm\">http://www.nlm.nih.gov/research/umls/rxnorm</a>\",<br>\n                        \"code\": \"562251\",<br>\n                        \"display\": \"Amoxicillin 250 MG / Clavulanate 125 MG Oral Tablet\"<br>\n                    }<br>\n                ],<br>\n                \"text\": \"Amoxicillin 250 MG / Clavulanate 125 MG Oral Tablet\"<br>\n            },<br>\n            \"subject\": {<br>\n                \"reference\": \"Patient/2cda5aad-e409-4070-9a15-e1c35c46ed5a\"<br>\n            },<br>\n            \"encounter\": {<br>\n                \"reference\": \"Encounter/1c93688c-eb1c-40c6-a334-cc303ad478ff\"<br>\n            },<br>\n            \"authoredOn\": \"2016-09-27T09:51:38+00:00\",<br>\n            \"requester\": {<br>\n                \"reference\": \"Practitioner/8b85559d-27de-4d4b-bea7-5a715164cb60\"<br>\n            },<br>\n            \"reasonReference\": [<br>\n                {<br>\n                    \"reference\": \"Condition/d918664d-21be-4ecd-b98e-1195fd1961ac\"<br>\n                },<br>\n                {<br>\n                    \"reference\": \"Condition/9ada3825-6def-4ed3-bd27-20dd3f14472d\"<br>\n                },<br>\n                {<br>\n                    \"reference\": \"Condition/088d38d6-6d8e-415c-9073-bae8e606ac06\"<br>\n                },<br>\n                {</p>",
        "id": 241163015,
        "sender_full_name": "Del D",
        "timestamp": 1622646580
    },
    {
        "content": "<p>If it is as simple as using JSON.parse() I have tried the following but get an error:</p>\n<div class=\"codehilite\"><pre><span></span><code>        const obj = JSON.parse(meds);\n        document.getElementById(&quot;medsJSONparse&quot;).innerHTML = obj.text + &quot;, &quot; + obj.display;\n</code></pre></div>\n\n<p>console error:</p>\n<p>VM15:1 Uncaught SyntaxError: Unexpected token o in JSON at position 1<br>\n    at JSON.parse (&lt;anonymous&gt;)</p>\n<p>with \"meds\" being referred to in this JS snippet:</p>\n<div class=\"codehilite\"><pre><span></span><code>            // Render the current patient&#39;s medications (or any error)\n            .then(\n                function(meds) {\n                    document.getElementById(&quot;meds&quot;).innerText = JSON.stringify(meds, null, 4);\n                },\n                function(error) {\n                    document.getElementById(&quot;meds&quot;).innerText = error.stack;\n                }\n</code></pre></div>",
        "id": 241169694,
        "sender_full_name": "Del D",
        "timestamp": 1622649370
    },
    {
        "content": "<p>It might help to do something like </p>\n<div class=\"codehilite\"><pre><span></span><code>console.log(meds)\n</code></pre></div>\n\n<p>before you try to parse it -- perhaps the value doesn't contain the string you think it does. You can also use the debugger in your browser to inspect this while your code runs, by setting a breakpoint (<a href=\"https://www.youtube.com/watch?v=yMEpIOyoizU\">https://www.youtube.com/watch?v=yMEpIOyoizU</a> has background on this).</p>\n<div class=\"youtube-video message_inline_image\"><a data-id=\"yMEpIOyoizU\" href=\"https://www.youtube.com/watch?v=yMEpIOyoizU\"><img src=\"https://uploads.zulipusercontent.net/9bf58beed7b7f1e651d46d02d27740ba25b127e9/68747470733a2f2f692e7974696d672e636f6d2f76692f794d4570494f796f697a552f64656661756c742e6a7067\"></a></div>",
        "id": 241307902,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1622662186
    },
    {
        "content": "<p>Also when pasting large chunks of text into Zulip, take a look at <a href=\"https://zulip.com/help/format-your-message-using-markdown#spoilers\">https://zulip.com/help/format-your-message-using-markdown#spoilers</a> for a handy way to collapse them :-)</p>",
        "id": 241308038,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1622662228
    }
]