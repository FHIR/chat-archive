[
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"195155\">@Max Philips</span>! Can you register a client for the connectathon with redirect URLs of <code>http://localhost:8000/index.html</code> and <code>https://smart.argo.run/granular/</code>?</p>",
        "id": 209666960,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1599752969
    },
    {
        "content": "<p>yep will get this added</p>",
        "id": 209670835,
        "sender_full_name": "Max Philips",
        "timestamp": 1599754547
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> I registered client id 1e922584-6173-40da-bc5c-95aace5c44bd with that info. it may take 15 min from the time of this post to propagate out</p>",
        "id": 209672142,
        "sender_full_name": "Max Philips",
        "timestamp": 1599755113
    },
    {
        "content": "<p>Thanks! And that's a public client?</p>",
        "id": 209673422,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1599755625
    },
    {
        "content": "<p>yep. you can use portal / portal to log in to Cerner's IdP</p>",
        "id": 209674054,
        "sender_full_name": "Max Philips",
        "timestamp": 1599755907
    },
    {
        "content": "<p>Ah, you anticipated the question I just came here to ask ;-)</p>",
        "id": 209675785,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1599756629
    },
    {
        "content": "<p>Login works; my first attempt to authorize I get redirected back to the app with:</p>\n<blockquote>\n<p><a href=\"http://localhost:8000/index.html?state=do5tOh1zqJaAm94K&amp;error=access_denied&amp;error_uri=https%3A%2F%2Fauthorization.sandboxcerner.com%2Ferrors%2Furn%253Acerner%253Aerror%253Aauthorization-server%253Aoauth2%253Agrant%253Amissing-patient%2Finstances%2F934041a2-79d6-4347-9738-157c52fd7ba2%3Fpersona%3Dprovider%26client%3D1e922584-6173-40da-bc5c-95aace5c44bd%26tenant%3D0b8a0111-e8e6-4c26-a91c-5069cbc6b1ca\">http://localhost:8000/index.html?state=do5tOh1zqJaAm94K&amp;error=access_denied&amp;error_uri=https%3A%2F%2Fauthorization.sandboxcerner.com%2Ferrors%2Furn%253Acerner%253Aerror%253Aauthorization-server%253Aoauth2%253Agrant%253Amissing-patient%2Finstances%2F934041a2-79d6-4347-9738-157c52fd7ba2%3Fpersona%3Dprovider%26client%3D1e922584-6173-40da-bc5c-95aace5c44bd%26tenant%3D0b8a0111-e8e6-4c26-a91c-5069cbc6b1ca</a></p>\n</blockquote>\n<p>\"OAuth2 grant missing-patient\"? <span class=\"user-mention\" data-user-id=\"195155\">@Max Philips</span> do you know what might cause this?  My authz request looks like:</p>\n<blockquote>\n<p>response_type=code&amp;client_id=1e922584-6173-40da-bc5c-95aace5c44bd&amp;scope=launch%2Fpatient%20patient%2FObservation.rs&amp;redirect_uri=http%3A%2F%2Flocalhost%3A8000%2Findex.html&amp;aud=https%3A%2F%2Ffhir-ehr.stagingcerner.com%2Fbeta%2F0b8a0111-e8e6-4c26-a91c-5069cbc6b1ca&amp;state=92j0J2xWDdlUPWt5</p>\n</blockquote>\n<p>Or, a bit easier on the eyes: </p>\n<div class=\"codehilite\"><pre><span></span><code>response_type: code\nclient_id: 1e922584-6173-40da-bc5c-95aace5c44bd\nscope: launch/patient patient/Observation.rs\nredirect_uri: http://localhost:8000/index.html\naud: https://fhir-ehr.stagingcerner.com/beta/0b8a0111-e8e6-4c26-a91c-5069cbc6b1ca\nstate: 92j0J2xWDdlUPWt5\n</code></pre></div>",
        "id": 209676299,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1599756863
    },
    {
        "content": "<p>oopsie, taking a look</p>",
        "id": 209676746,
        "sender_full_name": "Max Philips",
        "timestamp": 1599757077
    },
    {
        "content": "<p>\"patient/\" scopes were selected, but no patient IDs were provided. Ensure that the SMART launch is being sent and that it contains a patient ID.</p>",
        "id": 209678593,
        "sender_full_name": "Max Philips",
        "timestamp": 1599757752
    },
    {
        "content": "<p>that's the error from the auth server ^</p>",
        "id": 209678771,
        "sender_full_name": "Max Philips",
        "timestamp": 1599757834
    },
    {
        "content": "<p>1316024 is a patient id that can be used in Cerner</p>",
        "id": 209678869,
        "sender_full_name": "Max Philips",
        "timestamp": 1599757884
    },
    {
        "content": "<p>looks like I can duplicate this behavior using smart.argo.run</p>",
        "id": 209680789,
        "sender_full_name": "Max Philips",
        "timestamp": 1599758906
    },
    {
        "content": "<p>I seem to be expecting some context that is not necessarily present :)</p>",
        "id": 209682977,
        "sender_full_name": "Max Philips",
        "timestamp": 1599759906
    },
    {
        "content": "<p>So, let me work for a while on getting this switched over to actually support standalone launch!</p>",
        "id": 209689799,
        "sender_full_name": "Max Philips",
        "timestamp": 1599762866
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"195155\">@Max Philips</span> !</p>",
        "id": 209691283,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1599763530
    },
    {
        "content": "<p>unfortunately there are some configuration changes I need to make that involve engaging another team - looking like tomorrow morning will be when testing can resume</p>",
        "id": 209703929,
        "sender_full_name": "Max Philips",
        "timestamp": 1599769275
    },
    {
        "content": "<p>OK, thanks for the update! Will look forward to testing tomorrow.</p>",
        "id": 209703976,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1599769302
    },
    {
        "content": "<p>I've updated Cerner's server URL in the registration spreadsheet and updated the linked notes with new URLs / credentials. The switch to actually make those updated URLs work is scheduled for tonight, so everything should be ready to go for tomorrow. Anyone else wanting to test a client, please let me know and I will register you!</p>",
        "id": 209718263,
        "sender_full_name": "Max Philips",
        "timestamp": 1599777442
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"195155\">@Max Philips</span> are the URLs still updating? I currently cannot even get the capability statement.</p>\n<p>Going to: <code>https://fhir-ehr.stagingcerner.com/beta/ec2458f2-1e24-41c8-b71b-0e701af7583d/base/metadata</code> gives me: <code>{\"resourceType\":\"OperationOutcome\",\"issue\":[{\"severity\":\"error\",\"code\":\"not-found\",\"details\":{\"text\":\"Not Found\"}}]}</code></p>",
        "id": 209780008,
        "sender_full_name": "Keith Carlson",
        "timestamp": 1599830734
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"308473\">@Keith Carlson</span> they are :)</p>",
        "id": 209781578,
        "sender_full_name": "Max Philips",
        "timestamp": 1599831489
    },
    {
        "content": "<p>building another change for Cerner's server here and I will have to update the URLs again, but after that it should be good to go finally!</p>",
        "id": 209789226,
        "sender_full_name": "Max Philips",
        "timestamp": 1599835324
    },
    {
        "content": "<p>ok let's give this another shot. Right now I am re-registering <span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> 's client</p>",
        "id": 209796664,
        "sender_full_name": "Max Philips",
        "timestamp": 1599838618
    },
    {
        "content": "<p>actually nevermind the existing registration should still work!</p>",
        "id": 209797070,
        "sender_full_name": "Max Philips",
        "timestamp": 1599838803
    },
    {
        "content": "<p>Cerner's base URL has updated once more to <a href=\"https://fhir-myrecord.stagingcerner.com/beta/0b8a0111-e8e6-4c26-a91c-5069cbc6b1ca/\">https://fhir-myrecord.stagingcerner.com/beta/0b8a0111-e8e6-4c26-a91c-5069cbc6b1ca/</a></p>",
        "id": 209797124,
        "sender_full_name": "Max Philips",
        "timestamp": 1599838836
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"222054\">@Gino Canessa</span> could you add patient/Observation.read to the Scenarios tab of the test client? unfortunately I have a limitation of needing old and new scopes to test this track</p>",
        "id": 209797858,
        "sender_full_name": "Max Philips",
        "timestamp": 1599839186
    },
    {
        "content": "<p>otherwise things are looking good. copying patient access credentials out of my notes doc: arthur_morgan / Cerner01 | patient id 8326009</p>",
        "id": 209797955,
        "sender_full_name": "Max Philips",
        "timestamp": 1599839232
    },
    {
        "content": "<p>Pushing now, should be available in ~5 mins</p>",
        "id": 209798413,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1599839420
    },
    {
        "content": "<p>thank you!</p>",
        "id": 209798694,
        "sender_full_name": "Max Philips",
        "timestamp": 1599839551
    },
    {
        "content": "<p>oh I guess also I should put some vitals onto the test patient... right now they don't have any</p>",
        "id": 209799055,
        "sender_full_name": "Max Philips",
        "timestamp": 1599839747
    },
    {
        "content": "<p>When I try authorizing the client in the test app via the SMART V1 tab (scopes: \"launch/patient patient/Patient.read patient/Observation.read\", the return scopes don't include \"patient/Patient.read\" and indeed I can't read Patient 8326009. Is this expected <span class=\"user-mention\" data-user-id=\"195155\">@Max Philips</span>?</p>",
        "id": 209799282,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1599839846
    },
    {
        "content": "<p>I also get an empty bundle of Observations (but a 200 OK response status) when I query for</p>\n<p><a href=\"https://fhir-myrecord.stagingcerner.com/beta/0b8a0111-e8e6-4c26-a91c-5069cbc6b1ca/Observation?patient=Patient%2F8326009\">https://fhir-myrecord.stagingcerner.com/beta/0b8a0111-e8e6-4c26-a91c-5069cbc6b1ca/Observation?patient=Patient%2F8326009</a></p>",
        "id": 209799340,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1599839880
    },
    {
        "content": "<p>Is this test patient observationless?</p>",
        "id": 209799401,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1599839892
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"195155\">@Max Philips</span>  Can you register a client for me with redirect URL of <a href=\"https://smart.argo.run/granular/\">https://smart.argo.run/granular/</a>?</p>",
        "id": 209799802,
        "sender_full_name": "Chuck Feltner",
        "timestamp": 1599840066
    },
    {
        "content": "<p>yep <span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> the patient read is expected not to work right now. I will update your client to be able to grab that scope. Correct the patient is also observation-less at the moment, working on it!</p>",
        "id": 209799979,
        "sender_full_name": "Max Philips",
        "timestamp": 1599840129
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192613\">@Chuck Feltner</span> adding now</p>",
        "id": 209799993,
        "sender_full_name": "Max Philips",
        "timestamp": 1599840137
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> your client (and all future clients) should be able to read Patients within 5-15 min<br>\n<span class=\"user-mention\" data-user-id=\"192613\">@Chuck Feltner</span> I registered client id 8d054ff1-ab0c-4ac1-9aa4-a4db4abbd589 for you, also available in 5-15 min</p>",
        "id": 209800660,
        "sender_full_name": "Max Philips",
        "timestamp": 1599840433
    },
    {
        "content": "<p>Great thanks <span class=\"user-mention\" data-user-id=\"195155\">@Max Philips</span></p>",
        "id": 209800976,
        "sender_full_name": "Chuck Feltner",
        "timestamp": 1599840577
    },
    {
        "content": "<p>Was able to login and was granted patient/Observation.rs scope. But when I search for  Observation?category=vital-signs I get back a 403 Forbidden error.</p>",
        "id": 209802757,
        "sender_full_name": "Chuck Feltner",
        "timestamp": 1599841399
    },
    {
        "content": "<p>hm, that doesn't sound good. let me check some logs. one thing - did you request only patient/Observation.rs ? unfortunately Cerner requires both types of scopes to be set (i.e. request patient/Observation.read as well)</p>",
        "id": 209803111,
        "sender_full_name": "Max Philips",
        "timestamp": 1599841558
    },
    {
        "content": "<p>Yes, I only requested patient/Observation.rs. Once I included the patient/Observation.read as well I no longer get the forbidden error but I just get back an empty bundle for Observation?category=vital-signs.</p>",
        "id": 209803683,
        "sender_full_name": "Chuck Feltner",
        "timestamp": 1599841821
    },
    {
        "content": "<p>I'm using an old test domain for the connecathon this time around and (of course) having troubles adding Observations to the test patient there - should be able to get some results charted soon!</p>",
        "id": 209804009,
        "sender_full_name": "Max Philips",
        "timestamp": 1599841989
    },
    {
        "content": "<p>ok - I have a new test patient that has vitals: 1316024 tim_peters / Cerner01</p>",
        "id": 209810014,
        "sender_full_name": "Max Philips",
        "timestamp": 1599845010
    },
    {
        "content": "<p>stepping away to grab food</p>",
        "id": 209821411,
        "sender_full_name": "Max Philips",
        "timestamp": 1599850851
    },
    {
        "content": "<p>back</p>",
        "id": 209826422,
        "sender_full_name": "Max Philips",
        "timestamp": 1599853450
    }
]