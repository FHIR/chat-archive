[
    {
        "content": "<p>Hi,</p>\n<p>I am trying to assign Patient resource as inline reference to AllergyIntolerance.recorder but it is always coming as \"Contained\" resource.<br>\nBelow is the sample code I am using,</p>\n<div class=\"codehilite\"><pre><span></span>org.hl7.fhir.dstu3.model.AllergyIntolerance allergyIntolerance = new org.hl7.fhir.dstu3.model.AllergyIntolerance();\norg.hl7.fhir.dstu3.model.Patient patient = new org.hl7.fhir.dstu3.model.Patient();\norg.hl7.fhir.dstu3.model.Identifier identifier = new org.hl7.fhir.dstu3.model.Identifier();\norg.hl7.fhir.dstu3.model.Reference reference = new org.hl7.fhir.dstu3.model.Reference();\n\nidentifier.setSystem(&quot;system&quot;);\nidentifier.setValue(&quot;value&quot;);\npatient.addIdentifier(identifier);\nreference.setResource(patient);\nallergyIntolerance.setRecorder(reference);\nSystem.out.println(&quot;op:&quot; + ca.uhn.fhir.context.FhirContext.forDstu3().newXmlParser().encodeResourceToString(allergyIntolerance));\n</pre></div>\n\n\n<p>_op:&lt;AllergyIntolerance xmlns=\"http://hl7.org/fhir\"&gt;&lt;contained&gt;&lt;Patient xmlns=\"http://hl7.org/fhir\"&gt;&lt;id value=\"1\"/&gt;&lt;identifier&gt;&lt;system value=\"system\"/&gt;&lt;value value=\"value\"/&gt;&lt;/identifier&gt;&lt;/Patient&gt;&lt;/contained&gt;&lt;recorder&gt;&lt;reference value=\"#1\"/&gt;&lt;/recorder&gt;&lt;/AllergyIntolerance&gt;_</p>\n<p>Like said above, Patient resource is coming as contained resource in the above response, but my expected response is like below,<br>\n_&lt;AllergyIntolerance xmlns=\"http://hl7.org/fhir\"&gt;&lt;recorder&gt;&lt;Patient&gt;&lt;identifier&gt;&lt;system value=\"system\"/&gt;&lt;value value=\"value\"/&gt;&lt;/identifier&gt;&lt;/Patient&gt;&lt;/recorder&gt;&lt;/AllergyIntolerance&gt;_</p>\n<p>Below are my maven dependencies for HAPI library,<br>\n**&lt;dependency&gt;<br>\n    &lt;groupId&gt;ca.uhn.hapi.fhir&lt;/groupId&gt;<br>\n    &lt;artifactId&gt;hapi-fhir-base&lt;/artifactId&gt;<br>\n    &lt;version&gt;1.5&lt;/version&gt;<br>\n&lt;/dependency&gt;<br>\n&lt;dependency&gt;<br>\n    &lt;groupId&gt;ca.uhn.hapi.fhir&lt;/groupId&gt;<br>\n    &lt;artifactId&gt;hapi-fhir-structures-dstu3&lt;/artifactId&gt;<br>\n    &lt;version&gt;1.5&lt;/version&gt;<br>\n&lt;/dependency&gt;**</p>\n<p>Somebody can help me here?</p>",
        "id": 153964351,
        "sender_full_name": "Ilayaraja Mahalingam",
        "timestamp": 1527093086
    },
    {
        "content": "<p>Your response with the contained resource is correct.  FHIR will never inline one resource inside of another.  (And this shouldn't be in the <a class=\"stream\" data-stream-id=\"21\" href=\"/#narrow/stream/21-cda-to-fhir\">#cda to fhir</a> topic as it is not CDA-specific.)</p>",
        "id": 153964356,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1527094082
    },
    {
        "content": "<p>Thanks Jean for your prompt response.</p>",
        "id": 153964821,
        "sender_full_name": "Ilayaraja Mahalingam",
        "timestamp": 1527240771
    },
    {
        "content": "<p>Thanks Jean for your prompt response.</p>",
        "id": 153965073,
        "sender_full_name": "Ilayaraja Mahalingam",
        "timestamp": 1527473982
    }
]