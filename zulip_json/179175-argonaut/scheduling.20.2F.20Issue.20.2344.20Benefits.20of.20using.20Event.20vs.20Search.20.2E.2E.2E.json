[
    {
        "content": "<p>Healthedata1 labeled <a href=\"https://github.com/argonautproject/scheduling/issues/44\" target=\"_blank\" title=\"https://github.com/argonautproject/scheduling/issues/44\">Issue #44</a></p>",
        "id": 153916173,
        "sender_full_name": "argo-scheduling-bot",
        "timestamp": 1508973056
    },
    {
        "content": "<p>Healthedata1 opened <a href=\"https://github.com/argonautproject/scheduling/issues/44\" target=\"_blank\" title=\"https://github.com/argonautproject/scheduling/issues/44\">Issue #44</a></p>\n<blockquote>\n<p>On our call today we discussed this topic and its not clear whether using a  Subscription with a scheduled search criteria of is any different or better or worse than event trigger ( what would the event be?).  I am assuming slots are updated continuously so any subscription that pushes slots would be batched based upon some time interval in either case.  ( Should that batch period be an element?) </p>\n<p>so one could imagine a search based trigger as follows (FHIR sub/pub is 'cold')</p>\n<ul>\n<li>initial load of all slots for X ( expose only open slots to end user)</li>\n<li>subscribe with criteria \"search for all slots for X\"  ( catches all slots that change from open to closed or vice versa, or new slots)</li>\n</ul>\n<p>We did note that deleted slots would not be updated and the end user might discover that she cannot book the appointment that is listed as available.  So we may need to repeat initial load every so often to flush out the deleted slots</p>\n<p>for events I can only imagine it this way: </p>\n<ul>\n<li>initial load of all slots for X ( expose only open slots to end user)</li>\n<li>subscribe for all slots when event = time to publish the slots?</li>\n</ul>\n<p>Assuming deleted slots still would not be updated as above</p>\n</blockquote>",
        "id": 153916174,
        "sender_full_name": "argo-scheduling-bot",
        "timestamp": 1508973056
    },
    {
        "content": "<p>Healthedata1 labeled <a href=\"https://github.com/argonautproject/scheduling/issues/44\" target=\"_blank\" title=\"https://github.com/argonautproject/scheduling/issues/44\">Issue #44</a></p>",
        "id": 153916175,
        "sender_full_name": "argo-scheduling-bot",
        "timestamp": 1508973056
    },
    {
        "content": "<p>brandon-larue-zocdoc <a href=\"https://github.com/argonautproject/scheduling/issues/44#issuecomment-339694172\" target=\"_blank\" title=\"https://github.com/argonautproject/scheduling/issues/44#issuecomment-339694172\">commented</a> on <a href=\"https://github.com/argonautproject/scheduling/issues/44\" target=\"_blank\" title=\"https://github.com/argonautproject/scheduling/issues/44\">Issue #44</a></p>\n<blockquote>\n<p>Scheduled search criteria would still have to account for the updatedSince concept, right? Ex: Give me all events since last search so I can push to the feed? Or some other layer maintain a state and then send only the diffs?</p>\n<p>And why aren't deleted slots accounted for? Why is that not just another event that would be part of the search or event based model?</p>\n<p>For event based, will there be some sort of time horizon defined? Or will I see events months or years in the future? This will also result in a large number of \"slot open\" events every ~midnight as days cross this horizon. The server will need to account for this in a different way as they were not explicitly opened by some action, rather they newly met a search criteria. Not sure we can get away from at least some pieces looking like \"search\" even in an event-based model.</p>\n</blockquote>",
        "id": 153916272,
        "sender_full_name": "argo-scheduling-bot",
        "timestamp": 1509029923
    },
    {
        "content": "<p>daliboz <a href=\"https://github.com/argonautproject/scheduling/issues/44#issuecomment-339720295\" target=\"_blank\" title=\"https://github.com/argonautproject/scheduling/issues/44#issuecomment-339720295\">commented</a> on <a href=\"https://github.com/argonautproject/scheduling/issues/44\" target=\"_blank\" title=\"https://github.com/argonautproject/scheduling/issues/44\">Issue #44</a></p>\n<blockquote>\n<p>Are we essentially talking about the difference between CDS Hooks and the existing Subscription model? (I don't think we're trying to roll our own/new thing) I know it was brought up on the call, but there is ongoing work on Subscriptions that could change the way that works in future releases.</p>\n</blockquote>",
        "id": 153916282,
        "sender_full_name": "argo-scheduling-bot",
        "timestamp": 1509034822
    },
    {
        "content": "<p>Healthedata1 <a href=\"https://github.com/argonautproject/scheduling/issues/44#issuecomment-339722229\" target=\"_blank\" title=\"https://github.com/argonautproject/scheduling/issues/44#issuecomment-339722229\">commented</a> on <a href=\"https://github.com/argonautproject/scheduling/issues/44\" target=\"_blank\" title=\"https://github.com/argonautproject/scheduling/issues/44\">Issue #44</a></p>\n<blockquote>\n<p>The way I understand the FHIR sub/pub model.  The publisher would only push slots that changed since the subscriber subscribed - which is the same as updatedSince.   The benefit is on the Server side since they can control the times they push the data instead of responding to multiple search requests.<br>\n I agree that slots will go stale and lots of new ones will be created every day and the Client would need to specify how far into the future they want to look.   I am unclear how events would work and why I pinged Isaac for his feedback.    </p>\n</blockquote>",
        "id": 153916283,
        "sender_full_name": "argo-scheduling-bot",
        "timestamp": 1509035218
    },
    {
        "content": "<p>isaacvetter <a href=\"https://github.com/argonautproject/scheduling/issues/44#issuecomment-339825622\" target=\"_blank\" title=\"https://github.com/argonautproject/scheduling/issues/44#issuecomment-339825622\">commented</a> on <a href=\"https://github.com/argonautproject/scheduling/issues/44\" target=\"_blank\" title=\"https://github.com/argonautproject/scheduling/issues/44\">Issue #44</a></p>\n<blockquote>\n<p>Hey @Healthedata1 , </p>\n<p>My take is that subscriptions are best used for targeted notifications of events. While a FHIR server should probably be able to batch notifications, we shouldn’t try to schedule notifications because that’s functionally the same as using a query to poll. I think that schedules or polling should be discouraged when dealing with events. The ability for the subscribing app to specify the criteria/filter is what’s most valuable about Subscriptions – not just slurping a ton of data out of a FHIR server. </p>\n<p>The basic idea with using event-based Subscription is that the subscribing app specifies both an event and a search-based filter or criteria. </p>\n<p>The event is represented as an EventDefinition resource. The EventDefinition resource contains a snippet of FHIRPath (or CQL). Here's an <a href=\"http://build.fhir.org/eventdefinition-example.xml.html\" target=\"_blank\" title=\"http://build.fhir.org/eventdefinition-example.xml.html\">example</a> Fully capable FHIR servers could allow subscribing clients to both create an EventDefinition, specifying their own FHIRPath to be executed and then subscribe to that event. Less fancy FHIR servers could simply statically publish well-known EventDefinitions ahead of time. </p>\n<p>The criteria / filter is represented as a FHIR search (just as it's documented now in the spec). The criteria \"filters\" the event, such that the subscribing app only hears about the instances of that event that it cares about. </p>\n<p>Using FHIRPath, it's definitely possible to refer to things in the past. Note that Bryn's <a href=\"http://build.fhir.org/eventdefinition-example.xml.html\" target=\"_blank\" title=\"http://build.fhir.org/eventdefinition-example.xml.html\">example eventdefinition</a> does exactly this. This will allow you to subscribe to recently deleted Slots. </p>\n<p>Your question of -- how far in the future should the FHIR Server publish future slots? That's a tough one. In reality, the scheduling software probably instantiates templates only when a user attempts to put an appointment within a future slot, right? How about doing it then?</p>\n</blockquote>",
        "id": 153916347,
        "sender_full_name": "argo-scheduling-bot",
        "timestamp": 1509059127
    },
    {
        "content": "<p>Healthedata1 <a href=\"https://github.com/argonautproject/scheduling/issues/44#issuecomment-340936040\" target=\"_blank\" title=\"https://github.com/argonautproject/scheduling/issues/44#issuecomment-340936040\">commented</a> on <a href=\"https://github.com/argonautproject/scheduling/issues/44\" target=\"_blank\" title=\"https://github.com/argonautproject/scheduling/issues/44\">Issue #44</a></p>\n<blockquote>\n<p>After discussing this over the past 3-4 weeks.  I don't see any clear cut benefits for either the client or server for Subscription vs Pollling for slots when doing a Pre-Fetch:</p>\n<table>\n<thead>\n<tr>\n<th>Issue</th>\n<th>Polling</th>\n<th>FHIR Subscription</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Need for an 'initial load' of slots</td>\n<td>No</td>\n<td>Yes</td>\n</tr>\n<tr>\n<td>Able to get jsut a diff?</td>\n<td>Using an \"updatedSince parameter</td>\n<td>Yes (\"cold\" sub)</td>\n</tr>\n<tr>\n<td>Deleted slots discovered</td>\n<td>Yes</td>\n<td>No</td>\n</tr>\n<tr>\n<td>New slots discovered</td>\n<td>Yes</td>\n<td>?</td>\n</tr>\n<tr>\n<td>Search Based</td>\n<td>Yes</td>\n<td>Yes</td>\n</tr>\n<tr>\n<td>Event Based</td>\n<td>No</td>\n<td>Yes</td>\n</tr>\n<tr>\n<td>Batching</td>\n<td>Yes</td>\n<td>No</td>\n</tr>\n<tr>\n<td>Support</td>\n<td>REST</td>\n<td>Rest-Hooks/websockets</td>\n</tr>\n<tr>\n<td>Patient PHI</td>\n<td>NO</td>\n<td>NO</td>\n</tr>\n<tr>\n<td>Authentication</td>\n<td>SMART on FHIR authorization</td>\n<td>SMART on FHIR authorization/messaging ?</td>\n</tr>\n</tbody>\n</table>\n</blockquote>",
        "id": 153917009,
        "sender_full_name": "argo-scheduling-bot",
        "timestamp": 1509492212
    },
    {
        "content": "<p>Healthedata1 <a href=\"https://github.com/argonautproject/scheduling/issues/44#issuecomment-340940859\" target=\"_blank\" title=\"https://github.com/argonautproject/scheduling/issues/44#issuecomment-340940859\">commented</a> on <a href=\"https://github.com/argonautproject/scheduling/issues/44\" target=\"_blank\" title=\"https://github.com/argonautproject/scheduling/issues/44\">Issue #44</a></p>\n<blockquote>\n<p>I think our polling based options are:</p>\n<p>1.  Stick to search based polling operation for pre-fetching open slots<br>\n    -  which is just a periodic overwrite of all open slots</p>\n<p>1.  or 1. + updates using an updatedSince param that Brandon suggests (ty!)<br>\n    - FHIR already defines this here: <a href=\"http://build.fhir.org/http.html#history\" target=\"_blank\" title=\"http://build.fhir.org/http.html#history\">http://build.fhir.org/http.html#history</a> which selects resources that have been created, updated, or deleted. Assuming the server supports versioning, a client system wishing to know what resources have been created/updated/deleted, can intermittently perform a history request including the _since parameter.<br>\n      e.g. , <code>GET [base]/Slots/_history{?[parameters]&amp;_since=[instant]&amp;_format=[mime-type]}</code><br>\n    - would need all statuses to find new opens and removes deleted and status not = open.</p>\n</blockquote>",
        "id": 153917010,
        "sender_full_name": "argo-scheduling-bot",
        "timestamp": 1509494152
    },
    {
        "content": "<p>Healthedata1 <a href=\"https://github.com/argonautproject/scheduling/issues/44#issuecomment-340941963\" target=\"_blank\" title=\"https://github.com/argonautproject/scheduling/issues/44#issuecomment-340941963\">commented</a> on <a href=\"https://github.com/argonautproject/scheduling/issues/44\" target=\"_blank\" title=\"https://github.com/argonautproject/scheduling/issues/44\">Issue #44</a></p>\n<blockquote>\n<p>One other thing with pre-fetching slots would need some business rules to go along with them to create valid Appointments</p>\n<ul>\n<li>Additional transaction - possibly a <a href=\"http://build.fhir.org/graphdefinition.html\" target=\"_blank\" title=\"http://build.fhir.org/graphdefinition.html\">GraphDefinition</a> Resource in FHIR or something else or an out of band exchange.</li>\n<li>I think we need to document this as a need but is future scope for the IG</li>\n</ul>\n<p>Thoughts?</p>\n</blockquote>",
        "id": 153917011,
        "sender_full_name": "argo-scheduling-bot",
        "timestamp": 1509494635
    },
    {
        "content": "<p>(Zulip doesnt speak github markdown.)</p>",
        "id": 153917012,
        "sender_full_name": "Eric Haas",
        "timestamp": 1509494801
    },
    {
        "content": "<p>Healthedata1 <a href=\"https://github.com/argonautproject/scheduling/issues/44#issuecomment-341134134\" target=\"_blank\" title=\"https://github.com/argonautproject/scheduling/issues/44#issuecomment-341134134\">commented</a> on <a href=\"https://github.com/argonautproject/scheduling/issues/44\" target=\"_blank\" title=\"https://github.com/argonautproject/scheduling/issues/44\">Issue #44</a></p>\n<blockquote>\n<p>We have not really dived into the slot search during a pre-fetch:</p>\n<p>#### slots searches</p>\n<p>For prefetch would need to retrieve the slots for all the participants in the service:</p>\n<p>e.g. the room, the nurse, the doctor, the machine.</p>\n<p>So these 2 questions need to be answered:</p>\n<p>1. what are the slot search parameters</p>\n<p>options:</p>\n<div class=\"codehilite\"><pre><span></span>- by category or some tag - fetchable slots, ?\n- by service-type* or a constrained list of &#39;visit-types&#39; ( see Github issue #39)\n- appt-type\n- specialty\n- start-time*\n- schedule\n- status*\n- schedule\n</pre></div>\n\n\n<p>Example:</p>\n<div class=\"codehilite\"><pre><span></span>- Fetch all the open slots with a start time &#39;A&#39; and I as the client will figure it out.\n- Fetch all the open slots with a start time &#39;A&#39; of some category \n-Fetch all the open slots with a start time &#39;A&#39; for these &#39;visit-types&#39;\n</pre></div>\n\n\n<p>2. Is this a search or an operation?<br>\n   - There is an issue with the \"visit-types\" conflating service and appt type in the resource. see Issue #39</p>\n</blockquote>",
        "id": 153917073,
        "sender_full_name": "argo-scheduling-bot",
        "timestamp": 1509548870
    },
    {
        "content": "<p>brandon-larue-zocdoc <a href=\"https://github.com/argonautproject/scheduling/issues/44#issuecomment-341522314\" target=\"_blank\" title=\"https://github.com/argonautproject/scheduling/issues/44#issuecomment-341522314\">commented</a> on <a href=\"https://github.com/argonautproject/scheduling/issues/44\" target=\"_blank\" title=\"https://github.com/argonautproject/scheduling/issues/44\">Issue #44</a></p>\n<blockquote>\n<p>I would say the \"Need to initial load\" for polling is a clear No, as the first search would not pass an updatedSince and just get all open slots within the search range. This could also be done to recover from any downtime events or other edge cases, and performed purely on the client side.</p>\n<p>For parameters, you'll want a startDateTime and endDateTime to determine the search \"window.\"</p>\n</blockquote>",
        "id": 153917381,
        "sender_full_name": "argo-scheduling-bot",
        "timestamp": 1509648591
    },
    {
        "content": "<p>Healthedata1 <a href=\"https://github.com/argonautproject/scheduling/issues/44#issuecomment-345772756\" target=\"_blank\" title=\"https://github.com/argonautproject/scheduling/issues/44#issuecomment-345772756\">commented</a> on <a href=\"https://github.com/argonautproject/scheduling/issues/44\" target=\"_blank\" title=\"https://github.com/argonautproject/scheduling/issues/44\">Issue #44</a></p>\n<blockquote>\n<p>Decision to go with Polling for updated slots. \"option2\"</p>\n</blockquote>",
        "id": 153920418,
        "sender_full_name": "argo-scheduling-bot",
        "timestamp": 1511199925
    },
    {
        "content": "<p>Healthedata1 <a href=\"https://github.com/argonautproject/scheduling/issues/44#issuecomment-374419366\" target=\"_blank\" title=\"https://github.com/argonautproject/scheduling/issues/44#issuecomment-374419366\">commented</a> on <a href=\"https://github.com/argonautproject/scheduling/issues/44\" target=\"_blank\" title=\"https://github.com/argonautproject/scheduling/issues/44\">Issue #44</a></p>\n<blockquote>\n<p>applied pub/sub for prefetch scenario</p>\n</blockquote>",
        "id": 153946296,
        "sender_full_name": "argo-scheduling-bot",
        "timestamp": 1521501781
    },
    {
        "content": "<p>Healthedata1 closed <a href=\"https://github.com/argonautproject/scheduling/issues/44\" target=\"_blank\" title=\"https://github.com/argonautproject/scheduling/issues/44\">Issue #44</a></p>",
        "id": 153946297,
        "sender_full_name": "argo-scheduling-bot",
        "timestamp": 1521501781
    }
]