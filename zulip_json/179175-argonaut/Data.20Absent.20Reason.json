[
    {
        "content": "<p>&lt;deleted&gt;</p>",
        "id": 181161453,
        "sender_full_name": "Jason Walonoski",
        "timestamp": 1574202662
    },
    {
        "content": "<p>OK, I'm having trouble with data absent reason. I'm hoping some people can help out.</p>",
        "id": 181645062,
        "sender_full_name": "Jason Walonoski",
        "timestamp": 1574434818
    },
    {
        "content": "<p>The instructions for US Core are here: <a href=\"http://hl7.org/fhir/us/core/general-guidance.html#missing-data\" target=\"_blank\" title=\"http://hl7.org/fhir/us/core/general-guidance.html#missing-data\">http://hl7.org/fhir/us/core/general-guidance.html#missing-data</a></p>",
        "id": 181645083,
        "sender_full_name": "Jason Walonoski",
        "timestamp": 1574434841
    },
    {
        "content": "<p>The <code>Patient.name</code> example in the documentation does not validate, because of the <code>us-core-8</code> invariant: \"Patient.name.given or Patient.name.family or both SHALL be present [family.exists() or given.exists()]\"</p>",
        "id": 181645173,
        "sender_full_name": "Jason Walonoski",
        "timestamp": 1574434901
    },
    {
        "content": "<p>I've also set <code>Condition.category</code> to data absent reason unknown, and that works fine, because it has an extensible binding without a preexisting concept for \"unknown\".</p>",
        "id": 181645445,
        "sender_full_name": "Jason Walonoski",
        "timestamp": 1574435060
    },
    {
        "content": "<p>But for that other category of missing data, where there is a <code>required</code> binding, putting in a data absent reason creates validation errors. For example, on <code>Condition.clinicalStatus</code>. So in the instructions, when it says \"it must be populated\" I should interpret that as: it is not allowed to have a data absent reason?</p>",
        "id": 181645868,
        "sender_full_name": "Jason Walonoski",
        "timestamp": 1574435203
    },
    {
        "content": "<p>I'm having trouble coming up with other good examples that use data absent reasons. E.g. SNOMED seems to have a blanket unknown code that would exclude you using data absent reason anywhere with a SNOMED binding.</p>",
        "id": 181646029,
        "sender_full_name": "Jason Walonoski",
        "timestamp": 1574435318
    },
    {
        "content": "<p>Any other ideas?</p>",
        "id": 181646108,
        "sender_full_name": "Jason Walonoski",
        "timestamp": 1574435394
    },
    {
        "content": "<p>Correct, there are few elements that MUST be (mandatory) popluated. See guidance on <a href=\"https://build.fhir.org/ig/HL7/US-Core-R4/general-guidance.html#missing-data\" target=\"_blank\" title=\"https://build.fhir.org/ig/HL7/US-Core-R4/general-guidance.html#missing-data\">missing data</a></p>",
        "id": 181649579,
        "sender_full_name": "Brett Marquard",
        "timestamp": 1574437578
    },
    {
        "content": "<p>What about the name example?</p>",
        "id": 181650038,
        "sender_full_name": "Jason Walonoski",
        "timestamp": 1574437913
    },
    {
        "content": "<p>And do you have ideas for any other examples? I'm trying to create some useful example instances that cover the ground.</p>",
        "id": 181650102,
        "sender_full_name": "Jason Walonoski",
        "timestamp": 1574437944
    },
    {
        "content": "<p>on name, ugh, the invariant must be trumping the data absent</p>",
        "id": 181655381,
        "sender_full_name": "Brett Marquard",
        "timestamp": 1574441103
    },
    {
        "content": "<p>Agreed.</p>",
        "id": 181655751,
        "sender_full_name": "Jason Walonoski",
        "timestamp": 1574441334
    },
    {
        "content": "<p>To me that is a validation issue since element is not empty</p>",
        "id": 181666097,
        "sender_full_name": "Eric Haas",
        "timestamp": 1574448339
    },
    {
        "content": "<p>@gg?</p>",
        "id": 181666111,
        "sender_full_name": "Eric Haas",
        "timestamp": 1574448353
    },
    {
        "content": "<p>The DAR needs to go on name. family and or name.given.  If on name it will fail validation due to the invariant.</p>",
        "id": 181666564,
        "sender_full_name": "Eric Haas",
        "timestamp": 1574448628
    },
    {
        "content": "<p>You could satisfy the invariant if you sent given or family with a DAR inside, but a DAR directly on name won't satisfy the invariant</p>",
        "id": 181670823,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1574451975
    },
    {
        "content": "<p>Understood, but I am fairly certain we didn't meant to write the invariant that way....</p>",
        "id": 181673536,
        "sender_full_name": "Brett Marquard",
        "timestamp": 1574453893
    },
    {
        "content": "<p>I think that is only way to write it.  We wanted at least one or the other</p>",
        "id": 181674691,
        "sender_full_name": "Eric Haas",
        "timestamp": 1574454944
    },
    {
        "content": "<p>You could have explicitly allowed for DAR if you wanted to allow for that as an option.</p>",
        "id": 181677155,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1574456870
    },
    {
        "content": "<p>Whatâ€™s the actual question?</p>",
        "id": 181707871,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1574500774
    },
    {
        "content": "<p>They are asking if the behavior of the validator is correct. This example fails validation because of the <strong>us-core-8</strong> invariant.</p>\n<p><strong>us-core-8</strong></p>\n<div class=\"codehilite\"><pre><span></span>Patient.name.given or Patient.name.family or both SHALL be present [family.exists() or given.exists()]`\n</pre></div>\n\n\n<p>Data Absent Reason Example:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"p\">{</span>\n  <span class=\"nt\">&quot;resourceType&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;Patient&quot;</span><span class=\"p\">,</span>\n       <span class=\"err\">...</span>\n       <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:[</span>\n         <span class=\"s2\">&quot;extension&quot;</span> <span class=\"err\">:</span> <span class=\"p\">[</span>\n         <span class=\"s2\">&quot;url&quot;</span> <span class=\"err\">:</span> <span class=\"s2\">&quot;http://hl7.org/fhir/StructureDefinition/data-absent-reason&quot;</span><span class=\"p\">,</span>\n         <span class=\"s2\">&quot;valueCode&quot;</span> <span class=\"err\">:</span> <span class=\"s2\">&quot;unknown&quot;</span>\n          <span class=\"err\">}</span><span class=\"p\">]</span>\n          <span class=\"p\">]</span>\n        <span class=\"s2\">&quot;telecom&quot;</span> <span class=\"p\">:</span>\n        <span class=\"err\">...</span>\n     <span class=\"p\">}</span>\n</pre></div>",
        "id": 181823225,
        "sender_full_name": "Jason Walonoski",
        "timestamp": 1574689677
    },
    {
        "content": "<p>Ignoring the fact that example isn't complete, that is just the copy &amp; paste from the US Core documentation.</p>",
        "id": 181823301,
        "sender_full_name": "Jason Walonoski",
        "timestamp": 1574689717
    },
    {
        "content": "<p>well, the example fails the invariant</p>",
        "id": 181836353,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1574698128
    },
    {
        "content": "<p>so I think it should fail validation</p>",
        "id": 181836391,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1574698150
    },
    {
        "content": "<p>So either the invariant needs to change, or the example needs to reflect the requirements of the invariant (e.g. DAR extension on Patient.name.given or Patient.name.family).</p>",
        "id": 181836744,
        "sender_full_name": "Jason Walonoski",
        "timestamp": 1574698389
    },
    {
        "content": "<p>agree. <span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> <span class=\"user-mention\" data-user-id=\"191410\">@Brett Marquard</span></p>",
        "id": 181837370,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1574698753
    },
    {
        "content": "<p>agree.</p>",
        "id": 181837403,
        "sender_full_name": "Brett Marquard",
        "timestamp": 1574698777
    },
    {
        "content": "<p>please log a tracker if you haven't already</p>",
        "id": 181837422,
        "sender_full_name": "Brett Marquard",
        "timestamp": 1574698791
    },
    {
        "content": "<blockquote>\n<p>please log a tracker if you haven't already</p>\n</blockquote>\n<p><a href=\"https://jira.hl7.org/browse/FHIR-25249\" target=\"_blank\" title=\"https://jira.hl7.org/browse/FHIR-25249\">https://jira.hl7.org/browse/FHIR-25249</a></p>",
        "id": 181840187,
        "sender_full_name": "Jason Walonoski",
        "timestamp": 1574700356
    },
    {
        "content": "<p>thanks for catching that....</p>",
        "id": 181847035,
        "sender_full_name": "Eric Haas",
        "timestamp": 1574705004
    },
    {
        "content": "<p>Another Data Absent Reason Question... this time on <a href=\"http://hl7.org/fhir/us/core/StructureDefinition-pediatric-bmi-for-age.html\" target=\"_blank\" title=\"http://hl7.org/fhir/us/core/StructureDefinition-pediatric-bmi-for-age.html\">http://hl7.org/fhir/us/core/StructureDefinition-pediatric-bmi-for-age.html</a></p>\n<p>In this case, <code>Observation.dataAbsentReason</code> is \"must support\", but <code>Observation.valueQuantity</code> is required.</p>\n<div class=\"codehilite\"><pre><span></span>obs-6: dataAbsentReason SHALL only be present if Observation.value[x] is not present [dataAbsentReason.empty() or value.empty()]\n</pre></div>\n\n\n<p>So, if I want to use data absent reason on a pediatric BMI, is the approach to use the data absent reason extension on <code>Observation.valueQuantity.value</code>?</p>",
        "id": 188684865,
        "sender_full_name": "Jason Walonoski",
        "timestamp": 1582237118
    },
    {
        "content": "<p>doesn't look like a very intelligent profile to me</p>",
        "id": 188692149,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1582243093
    },
    {
        "content": "<p>Jason you found and issue with the profiles,  we inadvertently  propagated an uncaught error in the FHIR BMI profile since the pediatric profiles were drafted from it.   ideally would be 0..1 like and use the inline DAR element.</p>",
        "id": 188693543,
        "sender_full_name": "Eric Haas",
        "timestamp": 1582244475
    },
    {
        "content": "<p>So yes right now stuck DARing either the value or valueQuantity and optionally using the inline DAR element too.</p>",
        "id": 188693763,
        "sender_full_name": "Eric Haas",
        "timestamp": 1582244705
    },
    {
        "content": "<p>sigh.. I made a tracker to correct it, and pediatric wt and BMI.</p>",
        "id": 188693869,
        "sender_full_name": "Eric Haas",
        "timestamp": 1582244855
    },
    {
        "content": "<p>This issue also effects the <a href=\"http://hl7.org/fhir/us/core/StructureDefinition-pediatric-weight-for-height.html\" target=\"_blank\" title=\"http://hl7.org/fhir/us/core/StructureDefinition-pediatric-weight-for-height.html\">http://hl7.org/fhir/us/core/StructureDefinition-pediatric-weight-for-height.html</a> profile.</p>",
        "id": 188732746,
        "sender_full_name": "Jason Walonoski",
        "timestamp": 1582293417
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> -- I'm not sure you can \"optionally use the inline DAR element too\" due to the obs-6 invariant \"dataAbsentReason SHALL only be present if Observation.value[x] is not present\" <a href=\"http://hl7.org/fhir/R4/vitalsigns-definitions.html#Observation.dataAbsentReason\" target=\"_blank\" title=\"http://hl7.org/fhir/R4/vitalsigns-definitions.html#Observation.dataAbsentReason\">http://hl7.org/fhir/R4/vitalsigns-definitions.html#Observation.dataAbsentReason</a></p>",
        "id": 188753630,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1582305724
    },
    {
        "content": "<p>indeed,  I  forgot about the invarient</p>",
        "id": 188827817,
        "sender_full_name": "Eric Haas",
        "timestamp": 1582395847
    },
    {
        "content": "<p>Fun times. Which rule do we want to propose breaking until a new technical release is available? (nothing planned/scheduled yet)</p>",
        "id": 188914256,
        "sender_full_name": "Brett Marquard",
        "timestamp": 1582539903
    },
    {
        "content": "<p>I think we follow the spec DAR it using the extension don't use the inline DAR.  no rules broken it just doesn't follow the general observation pattern.  This is an edge case which is why we discovered only now.</p>",
        "id": 188951954,
        "sender_full_name": "Eric Haas",
        "timestamp": 1582568779
    }
]