[
    {
        "content": "<p>I received this question re subject/patient element </p>\n<blockquote>\n<p>If you look at target field for AllergyIntolerance.patient field, it declares Patient and Group as possible target types. But in structure definition, patient field can only have references to Patient resource, NOT Group:<br>\n<a href=\"http://hl7.org/fhir/us/core/SearchParameter-us-core-allergyintolerance-patient.json.html\">http://hl7.org/fhir/us/core/SearchParameter-us-core-allergyintolerance-patient.json.html</a><br>\n<a href=\"http://hl7.org/fhir/us/core/StructureDefinition-us-core-allergyintolerance.html\">http://hl7.org/fhir/us/core/StructureDefinition-us-core-allergyintolerance.html</a></p>\n</blockquote>\n<blockquote>\n<p>The same applies to patient search parameters in other resources.<br>\nCan you help to understand why this is the case?</p>\n</blockquote>",
        "id": 219880689,
        "sender_full_name": "Eric Haas",
        "timestamp": 1607969787
    },
    {
        "content": "<p>An implementer can adopt a US Core structure with patient/subject != patient reference, BUT it  is <em>not conformant</em> to the specification.   The scope of US Core is accessing <em>patient</em> data and all the profiling and search capablilities and guidance is tailored to the Patient as subject.</p>",
        "id": 219881652,
        "sender_full_name": "Eric Haas",
        "timestamp": 1607970269
    },
    {
        "content": "<p>Thanks Eric. <br>\nIf the scope of US Core is Patient data, why 'Group' is declared as a possible  target type in search parameter definition? If we look at <a href=\"https://www.hl7.org/fhir/allergyintolerance.html\">https://www.hl7.org/fhir/allergyintolerance.html</a>, it says patient field can only have Patient references the same as the US Core structure definition. Shouldn't 'Group' be removed from target types since having non patient reference will not be conformant with specifications?</p>",
        "id": 219885045,
        "sender_full_name": "Aziz Khalmukhamedov",
        "timestamp": 1607971775
    },
    {
        "content": "<p>can you point out exactly where a US Core search requirement allow group?</p>",
        "id": 219895807,
        "sender_full_name": "Eric Haas",
        "timestamp": 1607976795
    },
    {
        "content": "<p>I think the question is:<br>\nIf the base specification <a href=\"https://www.hl7.org/fhir/allergyintolerance-definitions.html#AllergyIntolerance.patient\">only allows references to Patient in AllergyIntolerance.patient</a>, why does the definition of the Patient search parameter <a href=\"http://hl7.org/fhir/us/core/SearchParameter-us-core-allergyintolerance-patient.json.html\">has as targets both Patient and Group</a> - look at the \"target\" field in the JSON?</p>",
        "id": 219897891,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1607977882
    },
    {
        "content": "<p>It's in search parameter definition:<br>\n<a href=\"http://hl7.org/fhir/us/core/SearchParameter-us-core-allergyintolerance-patient.json.html\">http://hl7.org/fhir/us/core/SearchParameter-us-core-allergyintolerance-patient.json.html</a></p>\n<p>\"type\" : \"reference\",<br>\n  \"expression\" : \"AllergyIntolerance.patient\",<br>\n  \"xpath\" : \"f:AllergyIntolerance/f:patient\",<br>\n  \"xpathUsage\" : \"normal\",<br>\n  \"target\" : [<br>\n    \"Patient\",<br>\n    \"Group\"<br>\n  ],</p>",
        "id": 219903671,
        "sender_full_name": "Aziz Khalmukhamedov",
        "timestamp": 1607980882
    },
    {
        "content": "<p>1) These SP are defined only for conformances as noted here:  <a href=\"http://hl7.org/fhir/us/core/searchparameters.html#search-parameters\">http://hl7.org/fhir/us/core/searchparameters.html#search-parameters</a> <br>\n2) They are derived from the base specification definitions and that is indeed an issue with the base SearchParameter Definition \"clinical-patient' - thank you for discovering it.  I will make a tracker to the base specification if one does not already exist.  ( need to check )  The target for patient should be Patient.</p>",
        "id": 219906153,
        "sender_full_name": "Eric Haas",
        "timestamp": 1607982212
    },
    {
        "content": "<p>I think this came up in FHIR-I just recently, it seems to be an error. I don't have the jira ticket handy though.</p>",
        "id": 219906284,
        "sender_full_name": "Paul Church",
        "timestamp": 1607982272
    },
    {
        "content": "<p>indeed it did and is here: <a href=\"http://jira.hl7.org/browse/FHIR-28219\">FHIR-28219</a></p>",
        "id": 219906485,
        "sender_full_name": "Eric Haas",
        "timestamp": 1607982382
    },
    {
        "content": "<p>BTW this will not be changed in US Core since it is a derivation warts and all</p>",
        "id": 219906676,
        "sender_full_name": "Eric Haas",
        "timestamp": 1607982484
    },
    {
        "content": "<p>Feel free to create a tracker to US Core to highlight this error.</p>",
        "id": 219906772,
        "sender_full_name": "Eric Haas",
        "timestamp": 1607982538
    },
    {
        "content": "<p>Thanks for the clarification. Will it be replicated in US Core when the issue is fixed in base specification?</p>",
        "id": 219912415,
        "sender_full_name": "Aziz Khalmukhamedov",
        "timestamp": 1607985423
    },
    {
        "content": "<p>yes but, I don't know when that will be.</p>",
        "id": 219923629,
        "sender_full_name": "Eric Haas",
        "timestamp": 1607992642
    }
]