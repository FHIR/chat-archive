[
    {
        "content": "<p>I've been in Europe this week talking to various stakeholders. One question that's been looming large in their minds is the intersection between consumer access and Argonaut. There's potentially a basic consensus around each country publishing an Argonaut variant spec (like Australia has) that varies some of the content rules like we have in Australia to remove the US-specific parts of it</p>",
        "id": 167549691,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1559886372
    },
    {
        "content": "<p>countries may make additional content rules that may apply to some or all of the content in some or all circumstances, but that won't change that consumer access conforms to a basic argonaut variant specification</p>",
        "id": 167549704,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1559886418
    },
    {
        "content": "<p>in general, I've been saying that there's no reason to vary the API part of the specification.... and that's broadly true</p>",
        "id": 167549715,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1559886438
    },
    {
        "content": "<p>but there's one particular issue that has emerged as real issue for Europe: language.</p>",
        "id": 167549720,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1559886460
    },
    {
        "content": "<p>In order to meet requirements in many countries, the argonaut specification should call out the existing language prarameters and note which ones should/shall be followed, and note some consequences of that.</p>",
        "id": 167549786,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1559886527
    },
    {
        "content": "<p>the basic requirement is that you should be able to ask for the records in your language, and the record provider should do their best endeavour to translate (safely) to the language you have asked for, understanding that this will be variably complete depending on the nature of the record.</p>",
        "id": 167549801,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1559886574
    },
    {
        "content": "<p>obviously, an arbitrary langauge conversion request will be mostly ineffective (e.g. an italian asking for the records from estonia in italian) but there will be some combinations that are quite well supported (e.g. asking for flemish records from the french area of Belgium)</p>",
        "id": 167549885,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1559886676
    },
    {
        "content": "<p>I'm interested in this subject generally, and if any existing argonaut implementation has run into any language issues in USA</p>",
        "id": 167549907,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1559886722
    },
    {
        "content": "<blockquote>\n<p>In order to meet requirements in many countries, the argonaut specification should call out the existing language prarameters and note which ones should/shall be followed, and note some consequences of that.</p>\n</blockquote>\n<p>What does this mean exactly  - what to translate?  like the text for codeables or what?</p>",
        "id": 167550144,
        "sender_full_name": "Eric Haas",
        "timestamp": 1559887055
    },
    {
        "content": "<p>definitely display names, and then anything else you know how to</p>",
        "id": 167550162,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1559887082
    },
    {
        "content": "<p>e,g. some prepared documents come in multiple languages</p>",
        "id": 167550245,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1559887104
    },
    {
        "content": "<p>I see value for non english speaker in US.  will add to list to discuss on call....</p>",
        "id": 167550317,
        "sender_full_name": "Eric Haas",
        "timestamp": 1559887147
    },
    {
        "content": "<p>I think I live in the most mono-lingual country in the world...</p>",
        "id": 167550393,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1559887222
    },
    {
        "content": "<p>IPS has been working to address this, and we're also working to align as closely as possible with Argonaut.  We would definitely be interested in participating in the discussion and solution.  Pinging <span class=\"user-mention\" data-user-id=\"191415\">@Giorgio Cangioli</span> for additional thoughts?</p>",
        "id": 167570940,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1559909749
    },
    {
        "content": "<p>right. A clear goal for me is that a health system can put up a server that is a valid argonaut interface, and that a client could use this interface in the appropriate ways to create a valid IPS</p>",
        "id": 167571057,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1559909866
    },
    {
        "content": "<p>note that this is not saying that you could create a valid IPS from all argonaut servers</p>",
        "id": 167571108,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1559909883
    },
    {
        "content": "<p>We attempted to do this today, though we now need to include more of the language tags in the spec. However, if the underlying system is english, our translation capabilities are very limited</p>",
        "id": 167575421,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1559913373
    },
    {
        "content": "<p>Also, this should be locale and not just language, as I assume dates and number formats should likely change as well (for display/narrative)</p>",
        "id": 167575438,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1559913397
    },
    {
        "content": "<p>yes for narrative. I don't know about that though</p>",
        "id": 167577086,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1559914774
    },
    {
        "content": "<p>So, if someone sent in en_au, what should 01/03/2010 be interpreted as?</p>",
        "id": 167579441,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1559916419
    },
    {
        "content": "<p>(if it's in the narrative)</p>",
        "id": 167579491,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1559916459
    },
    {
        "content": "<p>Some functional requirements identified for the IPS are described here <a href=\"http://international-patient-summary.net/mediawiki/index.php?title=IPS_Functional_requirements_1#Multilingual_support\" target=\"_blank\" title=\"http://international-patient-summary.net/mediawiki/index.php?title=IPS_Functional_requirements_1#Multilingual_support\">http://international-patient-summary.net/mediawiki/index.php?title=IPS_Functional_requirements_1#Multilingual_support</a>.</p>",
        "id": 167581275,
        "sender_full_name": "Giorgio Cangioli",
        "timestamp": 1559917626
    },
    {
        "content": "<p>Not all of them are actually implemented (e.g.  how the textual translation has been obtained)</p>",
        "id": 167581450,
        "sender_full_name": "Giorgio Cangioli",
        "timestamp": 1559917714
    },
    {
        "content": "<p>For the solution adopted for the FHIR IPS you can see <a href=\"https://build.fhir.org/ig/HL7/fhir-ips/general.html#translation-of-designations-and-narratives\" target=\"_blank\" title=\"https://build.fhir.org/ig/HL7/fhir-ips/general.html#translation-of-designations-and-narratives\">https://build.fhir.org/ig/HL7/fhir-ips/general.html#translation-of-designations-and-narratives</a></p>",
        "id": 167581848,
        "sender_full_name": "Giorgio Cangioli",
        "timestamp": 1559917950
    },
    {
        "content": "<blockquote>\n<p>So, if someone sent in en_au, what should 01/03/2010 be interpreted as?</p>\n</blockquote>\n<p>This leads me to think that translations need to include a reference to what the original language was.  A date provided from the system itself can be changed, but a date embedded within text (e.g., a diagnostic report) will not.</p>\n<p>Particularly in something like en_us -&gt; en_au, it would not be obvious that the date should be interpreted differently.</p>",
        "id": 167583520,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1559919106
    },
    {
        "content": "<p>The programatic field will never change format</p>",
        "id": 167588770,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1559922855
    },
    {
        "content": "<p>translations are only display/text concerns</p>",
        "id": 167588778,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1559922867
    },
    {
        "content": "<p>(in FHIR, this is almost always a \"text\" field of some sort)</p>",
        "id": 167588801,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1559922886
    },
    {
        "content": "<p>In FHIR, you represent the \"base language\" of the resource using the Resource.language field: <a href=\"http://hl7.org/fhir/r4/resource-definitions.html#Resource.language\" target=\"_blank\" title=\"http://hl7.org/fhir/r4/resource-definitions.html#Resource.language\">http://hl7.org/fhir/r4/resource-definitions.html#Resource.language</a></p>",
        "id": 167588846,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1559922929
    },
    {
        "content": "<p>And then a translation of a narritive or a specific string can use an extension or the div property:</p>",
        "id": 167588870,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1559922956
    },
    {
        "content": "<p>language for narrrative: <a href=\"http://hl7.org/fhir/r4/narrative.html#lang\" target=\"_blank\" title=\"http://hl7.org/fhir/r4/narrative.html#lang\">http://hl7.org/fhir/r4/narrative.html#lang</a></p>",
        "id": 167588932,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1559922980
    },
    {
        "content": "<p>extension for other field translations: <a href=\"http://hl7.org/fhir/r4/extension-translation.html\" target=\"_blank\" title=\"http://hl7.org/fhir/r4/extension-translation.html\">http://hl7.org/fhir/r4/extension-translation.html</a></p>",
        "id": 167588979,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1559923023
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  correct me if I'm wrong, this is the part of the spec we need to go add/changes for our implementation I think we are supposed to be making to make this consistent</p>",
        "id": 167589013,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1559923055
    },
    {
        "content": "<p>the fields that are numbers or date/datetime/instant will never change their format</p>",
        "id": 167589090,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1559923091
    },
    {
        "content": "<p>Glad this is being discussed. I believe that US institutions should adopt the language/locale tag even if they only support English so that any future transition to multi-language support is easier. E.g., many health systems support portals in Spanish but their FHIR APIs are English only (although not tagged as English). This would be a great item to add to the Argonaut R4 discussions. Ideally we would make use of the language tag a requirement moving forward. Will serve as a good model for those outside the US to follow.</p>",
        "id": 167590806,
        "sender_full_name": "Ricky Bloomfield",
        "timestamp": 1559924368
    },
    {
        "content": "<p>Working out the behavior of the servers will be a fun task.</p>\n<ul>\n<li>Will there be a way to query to determine supported languages? Resource.language only allows for one item (presumably because it's intended to describe the language of the content in the resource itself).</li>\n<li>Should we add a list of supported languages to the Capability statement?</li>\n<li>Should we be able to determine whether the user has selected a language default in their portal?</li>\n</ul>\n<p>There will be many more edge cases as we dig into it.</p>",
        "id": 167591347,
        "sender_full_name": "Ricky Bloomfield",
        "timestamp": 1559924797
    },
    {
        "content": "<p>If we followed the web example, it's the client side (often browser) that has this setting, and the services typically honor the headers sent in</p>",
        "id": 167591696,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1559925043
    },
    {
        "content": "<p>And default to something sane if unsupported (eg: the default that is in the Resource.language)</p>",
        "id": 167591710,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1559925061
    },
    {
        "content": "<p>But in my experience so far, the translations aren't simple. EG: I can't do reliable translation on the fly.  Comments entered raw are unlikely to get translated. Displays that come from an underlying system that only uses 1 lang are unlikely to get translated.</p>",
        "id": 167591868,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1559925195
    },
    {
        "content": "<p>Yeah, I think that's the most reasonable path forward. The browser would typically get its locale from the host OS, same for native apps.</p>",
        "id": 167591874,
        "sender_full_name": "Ricky Bloomfield",
        "timestamp": 1559925200
    },
    {
        "content": "<p>So we've seen examples where the narrative ends up a bit \"mixed language\" depending on the fields included</p>",
        "id": 167591955,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1559925244
    },
    {
        "content": "<p>Agreed! On-the-fly translations are an absolutely horrible idea and shouldn't be used in a medical context. The primary US use case would be a system that had FHIR display text available in more than one language because they support multiple portal languages (and therefore already have display text in those languages). This would also apply outside the US. But in Europe it will be additionally important to be able to distinguish between systems that have completely different base languages.</p>",
        "id": 167592090,
        "sender_full_name": "Ricky Bloomfield",
        "timestamp": 1559925390
    },
    {
        "content": "<p>We actually started adding support when we deployed for UK (and investigated gaps deploying to other regions where our EHR runs)</p>",
        "id": 167592138,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1559925444
    },
    {
        "content": "<p>Awesome, you're ahead of the curve! That experience will be invaluable.</p>",
        "id": 167592157,
        "sender_full_name": "Ricky Bloomfield",
        "timestamp": 1559925481
    },
    {
        "content": "<p>The part we're missing, which is <em>very</em> important for the scenario that Grahame brought up, is the declaration of the \"default\" vs. the \"translation\" part. Most of the time they're asking for english in the US or British english so far. We haven't had anyone yet do spanish in us, for EG</p>",
        "id": 167592223,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1559925525
    },
    {
        "content": "<p>Yeah, totally agree.</p>",
        "id": 167592333,
        "sender_full_name": "Ricky Bloomfield",
        "timestamp": 1559925611
    },
    {
        "content": "<p>Not much to add, just want to +1 Jenny's comment about locale.</p>",
        "id": 167592337,
        "sender_full_name": "Pascal Pfiffner",
        "timestamp": 1559925615
    },
    {
        "content": "<p>so I think that we've nailed the language part in the base spec, and it's up to argonaut to decide what the minimum behavior for the base spec is</p>",
        "id": 167604117,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1559934210
    },
    {
        "content": "<p>though we might want to consider adding languages supported to the CapabilityStatement.</p>",
        "id": 167604132,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1559934230
    },
    {
        "content": "<p>I think that language translations could be more extensive depending on how much work you put into it. Obviously some things can be translated fairly easily:<br>\n- Coding.display<br>\n- generated narrative<br>\n- Attachment.title<br>\n- Preparation notes</p>\n<p>Being able to translate those things is a configuration management issue (mostly) (not if you get them from elsewhere, of course)</p>",
        "id": 167604398,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1559934387
    },
    {
        "content": "<p>but some of the language stuff discussed in Brussels yesterday implied systems that invest more deeply in advance to ensure that more content can be safely translated - e.g. a doctor uses a template based approach, and there are templates for different languages</p>",
        "id": 167604503,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1559934475
    },
    {
        "content": "<p>I think that these are only things you'd do if there was real investment</p>",
        "id": 167604568,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1559934492
    },
    {
        "content": "<p>but the locale thing... I don't know what we do about that. I feel as though it would be wrong to infer that from the language....</p>",
        "id": 167604588,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1559934515
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  the Accept-Language header includes the locale variant. If that's included, I would assume that they want the locale specific formatting to be applied</p>",
        "id": 167770336,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1560181675
    },
    {
        "content": "<p>I can test, but I think that is pretty typical on the web</p>",
        "id": 167770389,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1560181687
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"193764\">@Ricky Bloomfield</span> wants a pop-up on this subject. Which I endorse</p>",
        "id": 167770419,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560181708
    },
    {
        "content": "<p>+1</p>",
        "id": 167770610,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1560181810
    },
    {
        "content": "<p>Someone else needs to propose it - I've used up my quota ;-)</p>",
        "id": 167771363,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560182321
    },
    {
        "content": "<p>ok it's scheduled. I'll announce the time shortly</p>",
        "id": 167777997,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560187592
    },
    {
        "content": "<p>pop 3.20-4.00 pm Tuesday</p>",
        "id": 167782445,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560190646
    },
    {
        "content": "<p>location Sonora</p>",
        "id": 167782453,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560190654
    },
    {
        "content": "<p>Great, I'll be there!</p>",
        "id": 167782965,
        "sender_full_name": "Ricky Bloomfield",
        "timestamp": 1560190935
    },
    {
        "content": "<p>On the calendar.</p>",
        "id": 167782971,
        "sender_full_name": "Ricky Bloomfield",
        "timestamp": 1560190943
    },
    {
        "content": "<p>Proposed outcomes from pop-up session yesterday:</p>\n<ul>\n<li>clients request language/locale using the http Accept-Language header</li>\n<li>servers SHOULD endeavour to perform reasonable efforts to translate what can be safely translated </li>\n<li>servers SHOULD populate the Resource.langauge element. This is reasonably based on the underlying record language, not the requested language (but MAY be based on requested language if translation is (reasonably) complete</li>\n<li>servers SHALL use the <a href=\"http://hl7.org/fhir/StructureDefinition/language\" target=\"_blank\" title=\"http://hl7.org/fhir/StructureDefinition/language\">http://hl7.org/fhir/StructureDefinition/language</a> extension when the language of a display etc is known to be different to the stated (or inferred) language</li>\n<li>servers SHALL use the <a href=\"http://hl7.org/fhir/StructureDefinition/translation\" target=\"_blank\" title=\"http://hl7.org/fhir/StructureDefinition/translation\">http://hl7.org/fhir/StructureDefinition/translation</a> where they wish to provide language translations</li>\n<li>servers SHALL follow the advice at <a href=\"http://hl7.org/fhir/narrative.html#lang\" target=\"_blank\" title=\"http://hl7.org/fhir/narrative.html#lang\">http://hl7.org/fhir/narrative.html#lang</a> where it comes to langauge and locale for the narrative portion of the resource</li>\n<li>we will define a way in FHIR R5 for a client to report to the server  what the user's timezone is, and Argonaut should consider pre-adopting it (this is relevant when the server performs decision support such as medication dosing planning for the client)</li>\n<li>we will define a way for the server to detail what languages it can support, and argonaut should consider pre-adopting it </li>\n</ul>\n<p>I think we generally believed that this should be part of the next published spec for Argonaut</p>",
        "id": 167945011,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560345278
    },
    {
        "content": "<p>Third bullet is a surprise to me the .language  should change?  My system is en-us. and I do a good job of es-us.  So the expectation is that the resource .lsnguage changes.? It is still technically a translation.   So no extensions ?</p>",
        "id": 167950291,
        "sender_full_name": "Eric Haas",
        "timestamp": 1560348488
    },
    {
        "content": "<p>I disagree with this. Natural language translation seems like an excellent 3rd party value-add service that should not be built into a FHIR server. My 2 cents.</p>",
        "id": 167951132,
        "sender_full_name": "Jason Walonoski",
        "timestamp": 1560349097
    },
    {
        "content": "<p>Jason, what exactly do you disagree with? You disagree that servers should be able to do what they already know how to do? Why?</p>",
        "id": 167951812,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560349501
    },
    {
        "content": "<p>Eric, why is the 3rd bullet a surprise? Which bit of it?</p>",
        "id": 167951865,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560349540
    },
    {
        "content": "<p>I wasn't aware that FHIR servers <em>already</em> have the capability to translate all narratives, display values, notes -- essentially every string field -- from one language into another.</p>",
        "id": 167958962,
        "sender_full_name": "Jason Walonoski",
        "timestamp": 1560353781
    },
    {
        "content": "<p>not _all_</p>",
        "id": 167959375,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560354006
    },
    {
        "content": "<p>but some, yes</p>",
        "id": 167959381,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560354011
    },
    {
        "content": "<p>Is there any sandbox FHIR server that does this today? How do we test it.</p>",
        "id": 167960447,
        "sender_full_name": "Jason Walonoski",
        "timestamp": 1560354604
    },
    {
        "content": "<p>\"servers SHOULD populate the Resource.langauge element. This is reasonably based on the <em>underlying record language, not the requested language (but MAY be based on requested language if translation is (reasonably) complete</em>\"</p>\n<p>The emphasized bit is the surprising part.  So If the native language in Health eData's data source is <code>en-us</code> and the excellent and thorough translation to <code>es-us</code> for my spanish speaking neighbors is produced, isn't the the resources underlying record language still <code>en-us</code>?</p>",
        "id": 167983384,
        "sender_full_name": "Eric Haas",
        "timestamp": 1560370480
    },
    {
        "content": "<p>I don't know of one</p>",
        "id": 167991777,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560376272
    },
    {
        "content": "<p>the language of the resource is spanish, no?</p>",
        "id": 167991806,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560376307
    },
    {
        "content": "<p>I was looking for particular (R5) guidance in the spec and did not find any.  did I miss it or is it still TBD?  (We are in need of something to point to.  )</p>\n<blockquote>\n<p>we will define a way in FHIR R5 for a client to report to the server what the user's timezone is, and Argonaut should consider pre-adopting it (this is relevant when the server performs decision support such as medication dosing planning for the client)</p>\n</blockquote>\n<p>What should be said?  @GG,  <span class=\"user-mention\" data-user-id=\"191356\">@Jenni Syed</span> ,  <span class=\"user-mention\" data-user-id=\"191914\">@Danielle Friend</span> ,  <span class=\"user-mention\" data-user-id=\"191339\">@Pascal Pfiffner</span></p>\n<p>e.g.  did we want to include some recommendation about timezones being returned as the applicable timezone (if that's possible, e.g. future dates)?</p>",
        "id": 172904084,
        "sender_full_name": "Eric Haas",
        "timestamp": 1565402872
    },
    {
        "content": "<p>the answer is that we didn't do that yet. We have 2 choices: <br>\n- a custom header<br>\n- a special parameter used whenever relevant</p>",
        "id": 172938857,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565468426
    },
    {
        "content": "<p>an alternative is to say that client timezone is specified through the smart app launch process</p>",
        "id": 172938920,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565468530
    },
    {
        "content": "<p>I believe good practice would be that dateTime elements always come in the relevant timezone, if that's applicable, e.g. when a lab was taken, when a condition was recorded, when a procedure was performed. This won't be possible for future dateTimes of course, and I know not all servers are able to fulfill this.</p>",
        "id": 172946937,
        "sender_full_name": "Pascal Pfiffner",
        "timestamp": 1565484862
    },
    {
        "content": "<p>I don't see the benefit of the client specifying its timezone in the header, what would the server do, convert to the client's timezone? That a client can easily do, it cannot however show a time in the correct time if the timezone information does not correspond to the local timezone where an event happened.</p>",
        "id": 172946950,
        "sender_full_name": "Pascal Pfiffner",
        "timestamp": 1565484933
    },
    {
        "content": "<p>we’ve discussed this before - the server needs to know the client’s Timezone if it’s going to to any thinking on behalf of the client, and there’s a number of situations around writing/operations/auditing where this occurs</p>",
        "id": 172967170,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565526609
    },
    {
        "content": "<p>So what  I am hearing is that instead of some technical guidance. Just recommend that the Server preserve the relevent source timezone?</p>",
        "id": 172974011,
        "sender_full_name": "Eric Haas",
        "timestamp": 1565539780
    },
    {
        "content": "<p>for read/create/update that server doesn't need to know the timezone; it just keeps and stores the existing supplied timezone. But that wasn't what drove the requirement. It's things like server side medication planning that need the client timezone</p>",
        "id": 172983323,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565557463
    },
    {
        "content": "<p>Though, actually, I was thinking about this today - it needs the patient timezone, which might be different to the device/user timezone.</p>",
        "id": 172983337,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565557506
    },
    {
        "content": "<p>I don't recall whether we discussed handling the requirement through a smart app launch process? But I think we ended up wanting a header</p>",
        "id": 172983383,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565557585
    },
    {
        "content": "<p>I need to back up a second.  I assume that we are talking about fetching data (since 90% of Argo R4 DQ is about search)  and not write.  So what I hear Pascal saying is the data source should preserve the source timezones.   What GG is saying  is that is not a problem.  I don't think for Argo we have any needs for \"to do any thinking on behalf of the client\".   So that would be out of scope for the Argo R4 DQ guide right now.</p>",
        "id": 172985669,
        "sender_full_name": "Eric Haas",
        "timestamp": 1565561865
    },
    {
        "content": "<p>Date/time values out into narratives could be different.</p>",
        "id": 172986453,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1565563467
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191367\">@Brian Postlethwaite</span>  is muddying the waters.... :-)  I am only trying to address Pascal's concerns.  Brian can you give an example since I don't understand how it would be different?</p>",
        "id": 172988690,
        "sender_full_name": "Eric Haas",
        "timestamp": 1565567714
    },
    {
        "content": "<p>If the narrative has the time showing in it, and the zone of the client is different to the data would want to either convert it, or include the zone in there.<br>\nThink of an appointment narrative with 9:00 showing. If both the client and data are in eastern, no need to show it, however if you were a user looking from the pacific zone, you'd want to know that you're up at 6am, or at least see 9:00(eastern)</p>",
        "id": 172992204,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1565574799
    },
    {
        "content": "<p>Is narrative generation the only place where the server would do thinking on behalf of the client? I don't think we're talking about returning different dateTimes from resources depending on client timezone, are we?<br>\nEven (especially?) when creating resources, the client usually knows what timezone is applicable and should just provide that for the respective dateTime values and the server should persist as such. There is no guarantee a timezone always applies to all dateTime values within one resource (e.g. a lab can be taken in one but issued in another) and not within one SMART session either.</p>",
        "id": 173036722,
        "sender_full_name": "Pascal Pfiffner",
        "timestamp": 1565626159
    },
    {
        "content": "<p>For the narrative, the timezone could just always be spelt out or a new timezone header is introduced that is used for narrative generation. I don't use narrative so I don't have much of an opinion on how it should be handled.</p>",
        "id": 173036728,
        "sender_full_name": "Pascal Pfiffner",
        "timestamp": 1565626166
    },
    {
        "content": "<blockquote>\n<p>for read/create/update that server doesn't need to know the timezone; it just keeps and stores the existing supplied timezone. But that wasn't what drove the requirement.</p>\n</blockquote>\n<p>That is actually what drives the discussion for us today, since that statement doesn't hold true and we receive a lot of dateTime in \"Z\".</p>",
        "id": 173037358,
        "sender_full_name": "Pascal Pfiffner",
        "timestamp": 1565626663
    },
    {
        "content": "<p>Calclulating local dose times also needs a time zone. We have had scenarios on write where the offset was ambiguous and the timezone recorded in our system was incorrect</p>",
        "id": 173116991,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565705834
    },
    {
        "content": "<p>offset != timezone</p>",
        "id": 173117007,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565705853
    },
    {
        "content": "<p>Narrative as Brian mentions was the other scenario, which is why this came up during our localization conversations.</p>",
        "id": 173117093,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565705889
    },
    {
        "content": "<p>or other textual display fields in the body of the resource</p>",
        "id": 173117108,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565705906
    },
    {
        "content": "<p>other textual fields that include times?</p>",
        "id": 173117123,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565705920
    },
    {
        "content": "<p>EG: generated meds dosing strings, possibly</p>",
        "id": 173117136,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565705933
    },
    {
        "content": "<p>Not dynamically translating comments or anything like that, unless the system was very ambitious</p>",
        "id": 173117185,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565705969
    },
    {
        "content": "<p>:)</p>",
        "id": 173117192,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565705975
    },
    {
        "content": "<p>Though we did leave that up to the server's choice for the localization conversation.</p>",
        "id": 173117287,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565706007
    },
    {
        "content": "<p>For things like the patient timezone (if in hospital) or the location time zone, the system hopefully knows that or can find that. The timezone we discussed was to pass the device time zone, for displays that we felt should be localized to the user</p>",
        "id": 173117453,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565706084
    },
    {
        "content": "<p>Forgive me, as I am still trying to understand what the ask is here.  I think Pascal's issue is offset vs converting to Z time? (  I am assuming the server converts the local offset to Z and stores? )  Is that true and why is Z worse than the original offset?</p>",
        "id": 173129198,
        "sender_full_name": "Eric Haas",
        "timestamp": 1565714175
    },
    {
        "content": "<p>This is for display, primarily, and also for date calculation.</p>",
        "id": 173131087,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565715688
    },
    {
        "content": "<p>I'm not a fan of trying to read UTC dates and do conversions in my head :) Can't imagine how many outlook meetings I would miss</p>",
        "id": 173131117,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565715715
    },
    {
        "content": "<p>Similarly, If I was trying to predict specific administration times for a med given at 8 AM local, I would need to know the time zone to correctly generate that fully qualified time in the system</p>",
        "id": 173131194,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565715762
    },
    {
        "content": "<p>And take into account daylight savings and other \"fun\" time zone rules</p>",
        "id": 173131221,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565715786
    },
    {
        "content": "<p>OK so converting to Z is bad and preserve the offset.   got it.<br>\n<span class=\"user-mention\" data-user-id=\"191356\">@Jenni Syed</span>   I assume you are looking at this from the server perspective -  what about the client's perspective?</p>",
        "id": 173134291,
        "sender_full_name": "Eric Haas",
        "timestamp": 1565717995
    },
    {
        "content": "<p>For clients reading data: if a server returns proper ISO-8601 timestamps that include offsets based on the data-origination timezone, then clients can make us of this as needed (i.e., the client can decide whether to display in the data-origination timezone, or the local timezone, etc; the client will have all the necessary information to make this decision)</p>",
        "id": 173145660,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1565726244
    },
    {
        "content": "<blockquote>\n<p>I'm not a fan of trying to read UTC dates and do conversions in my head </p>\n</blockquote>\n<p>welcome to my life....</p>",
        "id": 173152560,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565731119
    },
    {
        "content": "<blockquote>\n<p>For clients reading data</p>\n</blockquote>\n<p>Right. None of this discussion is about clients reading data.</p>",
        "id": 173152599,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565731159
    },
    {
        "content": "<p>(Except where Eric asked about that in particular.)</p>",
        "id": 173157023,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1565734835
    },
    {
        "content": "<p>If we say what Eric proposed that \"converting to Z is bad and that preserving the offset is recommended\" then yes, there's nothing else we need to say about clients reading data.</p>",
        "id": 173223790,
        "sender_full_name": "Pascal Pfiffner",
        "timestamp": 1565803554
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191339\">@Pascal Pfiffner</span> can you provide more detail to that? Our system stores it in UTC and most often converts it to the display zone of the user</p>",
        "id": 173226271,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565805547
    },
    {
        "content": "<p>there are a few exceptions, but not many</p>",
        "id": 173226287,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565805559
    },
    {
        "content": "<p>We receive many dateTime instances in \"Z\". I can check which systems if that helps.</p>",
        "id": 173226895,
        "sender_full_name": "Pascal Pfiffner",
        "timestamp": 1565805917
    },
    {
        "content": "<p>So @Pascal what is worse preserving the source offset or converting to the client local offset?</p>",
        "id": 173227456,
        "sender_full_name": "Eric Haas",
        "timestamp": 1565806217
    },
    {
        "content": "<p>Preserving the source offset on historical dates should always be the correct behavior. It's obviously not if we receive Z, in which case converting to local may or may not be correct, which is the core of the issue. The only right solution when reading historical data as a client is relying that the given offset is the applicable one.</p>",
        "id": 173233152,
        "sender_full_name": "Pascal Pfiffner",
        "timestamp": 1565810173
    },
    {
        "content": "<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"191339\">Pascal Pfiffner</span> can you provide more detail to that? Our system stores it in UTC and most often converts it to the display zone of the user</p>\n</blockquote>\n<p>This seems to violate Provenance. The storage request included a timezone, which may have been significant.</p>",
        "id": 173236088,
        "sender_full_name": "John Moehrke",
        "timestamp": 1565812424
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span>  First: nothing in FHIR has a timezone, our dates only support offsets. This doesn't give you much more than a general large strip of longitude that this <em>might</em> have come from :)</p>",
        "id": 173238490,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565814151
    },
    {
        "content": "<p>and that depends massively on what the \"thing\" is</p>",
        "id": 173238515,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565814166
    },
    {
        "content": "<p>you will, however, have the <em>exact</em> instant in time when it happened for anything tracked on a provenance, who did it, etc</p>",
        "id": 173238543,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565814190
    },
    {
        "content": "<p>I'm curious why the timezone itself, at the time (since time zone rules change) is a significant concern for a provenance use case</p>",
        "id": 173238594,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565814226
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191339\">@Pascal Pfiffner</span>  I'm sure Cerner is one of those. As I said, we store most of our dates in UTC, which == Z</p>",
        "id": 173238739,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565814304
    },
    {
        "content": "<p>And for <em>some</em> dates, we also have the origin time zone recorded in the database, but there is no way to pass that origin time zone back w/o using an extension. We can pass an offset, but then you will fall victim to the same issue we hit when writing: going from an offset to a time zone that is trying to indicate something about an actual location can have ambiguous results</p>",
        "id": 173238877,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565814385
    },
    {
        "content": "<p>With systems I meant EHRs, and I know that you folks have that limitation, yes, but I haven't checked whether it's for all your customers or a subset (since you say you convert for display)</p>",
        "id": 173238948,
        "sender_full_name": "Pascal Pfiffner",
        "timestamp": 1565814428
    },
    {
        "content": "<p>Most of our modern browser applications will display event times in the zone of the user themselves, so that they don't have to do the conversion in their head when thinking things like \"how long ago was this\"</p>",
        "id": 173238953,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565814433
    },
    {
        "content": "<p>For older apps, they sometimes could display in many different zones, which was a bit confusing</p>",
        "id": 173238974,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565814466
    },
    {
        "content": "<p>Ah I see. For us, the correct offset would help – we don't necessarily need to deduce location from a timezone.</p>",
        "id": 173238979,
        "sender_full_name": "Pascal Pfiffner",
        "timestamp": 1565814474
    },
    {
        "content": "<p>I think the most important thing is what makes sense for the apps use case</p>",
        "id": 173238983,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565814478
    },
    {
        "content": "<p>Yeah. We're unable to do the right thing with \"Z\"</p>",
        "id": 173239252,
        "sender_full_name": "Pascal Pfiffner",
        "timestamp": 1565814642
    },
    {
        "content": "<p>If we have the correct _offset_, we can at least either not do anything (if it's the same as current device offset) or indicate that this was somewhere else.</p>",
        "id": 173239313,
        "sender_full_name": "Pascal Pfiffner",
        "timestamp": 1565814684
    },
    {
        "content": "<p>somewhere else? of just not same wall time as local? That's the part I'm trying to understand :)</p>",
        "id": 173239410,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565814723
    },
    {
        "content": "<p>For EG, if I gave you a UTC - 5:00 time, there are 8 different time zones that match that offset</p>",
        "id": 173239463,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565814766
    },
    {
        "content": "<p>Haha, yeah – I meant in a different timezone. We could show the offset as-is or show the offset to current offset.</p>",
        "id": 173239466,
        "sender_full_name": "Pascal Pfiffner",
        "timestamp": 1565814768
    },
    {
        "content": "<p>And this conversion from offset to time zone bit us when we tried to deduce a timezone from an offset passed to us in a FHIR write</p>",
        "id": 173239501,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565814805
    },
    {
        "content": "<p>(and that's just right now... historically you would need to apply the time zone rules in play around that same time)</p>",
        "id": 173239586,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565814860
    },
    {
        "content": "<p>I keep conflating timezone and offset – I've only been talking about the offset that comes with dateTime / instant</p>",
        "id": 173239598,
        "sender_full_name": "Pascal Pfiffner",
        "timestamp": 1565814877
    },
    {
        "content": "<p>Offsets are good for giving you a wall clock time. Anything in UTC format with the offset (regardless of if it's 0/Z) give you the exact moment in time which is always accurate</p>",
        "id": 173239670,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565814934
    },
    {
        "content": "<p>the wall clock time only makes sense if you can pair that with something that tells the user which wall clock :)</p>",
        "id": 173239697,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565814958
    },
    {
        "content": "<p>IE: I would hesitate to tell a doc that something happened at 8 based off an offset and not based off their current time :)</p>",
        "id": 173239780,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565814991
    },
    {
        "content": "<p>which is why most of our apps today either convert to local or to some other zone to be consistent (location zone, patient zone)</p>",
        "id": 173239819,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565815022
    },
    {
        "content": "<p>rather than displaying 3 different time contexts :)</p>",
        "id": 173239844,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565815034
    },
    {
        "content": "<p>I think it's really important to understand what we expect servers and apps to do, or what they might want to do with time zones vs. offsets and when/why we think it's significant</p>",
        "id": 173239979,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565815093
    },
    {
        "content": "<p>And then make sure the standard can handle that. I think we tried to do some of that in the localization conversation that triggered a few trackers from DevDays</p>",
        "id": 173240039,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565815128
    },
    {
        "content": "<p>But it sounds like there are definitely still concerns we may not have fully covered, that could use some documentation love and thought</p>",
        "id": 173240127,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565815194
    },
    {
        "content": "<p>Yes agreed. From our POV receiving times with the correct offset allows us to always display the correct time and display the relation to the current time (if the offset is different). We cannot do that when receiving Z.</p>",
        "id": 173243196,
        "sender_full_name": "Pascal Pfiffner",
        "timestamp": 1565817278
    },
    {
        "content": "<blockquote>\n<p>I'm curious why the timezone itself, at the time (since time zone rules change) is a significant concern for a provenance use case</p>\n</blockquote>\n<p>because the server is changing the data that the author asked it to save. Imaging the author having included a digital-signature, when the server changes the data the digital-signature will fail.</p>",
        "id": 173243697,
        "sender_full_name": "John Moehrke",
        "timestamp": 1565817662
    },
    {
        "content": "<p>it sounds to me like there's some grounds for adding 'timezone' to Resource.meta. If the source system populates the operating timezone of the source context, then the consuming system has more information about which time to display. If you are crossing timezones (I do it a lot), it can be very confusing - did something happen tomorrow?</p>",
        "id": 173259746,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565835253
    },
    {
        "content": "<p><code>Resource.meta</code> could be problematic, however. For example when I look at <code>AllergyIntolerance.reaction.onset</code>; it's very possible you have reactions in different timezones ¯\\_(ツ)_/¯.</p>",
        "id": 173306082,
        "sender_full_name": "Pascal Pfiffner",
        "timestamp": 1565888612
    },
    {
        "content": "<p>Standard extension on <code>dateTime</code> (maybe also <code>instant</code>)?</p>",
        "id": 173306139,
        "sender_full_name": "Pascal Pfiffner",
        "timestamp": 1565888644
    },
    {
        "content": "<p>OK so summarizing at this point:</p>\n<ul>\n<li>Servers MUST keep and stores the existing supplied timezone or convert to Z(-0) time. ( assume this is current state)</li>\n<li>Servers converting to Z is bad for client who want to display the source time relative to the user time</li>\n<li>best practice is to preserve the offset</li>\n<li>how that offset is preserved is open question</li>\n</ul>",
        "id": 173311925,
        "sender_full_name": "Eric Haas",
        "timestamp": 1565893321
    },
    {
        "content": "<p>Is how to preserve the offset really an open question?</p>",
        "id": 173362946,
        "sender_full_name": "Mikael Rinnetmäki",
        "timestamp": 1565951560
    },
    {
        "content": "<p>I'd add to the summary (from a couple messages back) that support for <code>timezone</code>(in addition to the offset) would be nice to have, but how to communicate it has not yet been defined.</p>",
        "id": 173362947,
        "sender_full_name": "Mikael Rinnetmäki",
        "timestamp": 1565951564
    },
    {
        "content": "<p>(And as <span class=\"user-mention\" data-user-id=\"191356\">@Jenni Syed</span> has explained several times, it's best to talk about <code>timezone offset</code> and <code>time zone</code> separately (should apply to the first bullet of <span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span>'s summary - servers only store the offset, not the zone).</p>",
        "id": 173363150,
        "sender_full_name": "Mikael Rinnetmäki",
        "timestamp": 1565951820
    },
    {
        "content": "<p>note that I said to add timezone to the meta, not time offset</p>",
        "id": 173372620,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565961917
    },
    {
        "content": "<p>Our EHR already has a lot of logic around time zone, I'm not sure we would be able to change it to meet some of the proposed rules above :) Different dates on a resource may have different time zone context in our original system</p>",
        "id": 173379126,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565966763
    },
    {
        "content": "<p>If you're talking about requiring servers to maintain the time zone or offset, for eg. We have times that don't specifically store the time zone because they're patient time, and time zones that are stored because the requirements originally wanted to maintain user time zone for display</p>",
        "id": 173379198,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565966831
    },
    {
        "content": "<p>The actual times are just stored in UTC or Z time. We have several systems that cross multiple time zones</p>",
        "id": 173379236,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565966871
    },
    {
        "content": "<p>If we had a field for time zone, we could at least return the zone we had for the dates that store it</p>",
        "id": 173379336,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565966922
    },
    {
        "content": "<p>Which also implies we could start accepting that (which we would like to do)</p>",
        "id": 173379349,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565966937
    },
    {
        "content": "<p>This crazy situation was something we tried to avoid in the localization talk, esp since we often now change the times for display in our newer applications. I'm not sure how common this type of logic is :)</p>",
        "id": 173379462,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565967007
    },
    {
        "content": "<p>Between time zones and DST, I may be scarred for life... :)</p>",
        "id": 173379500,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565967042
    },
    {
        "content": "<p>(also, 45 minute offsets?? really Australia??)</p>",
        "id": 173379578,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1565967105
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> , taking what Mikael and Jenni said, your summary points might be:<br>\n- Servers MUST store the existing supplied timezone offset or convert to Z(-0) time. (the latter just because it's current state)<br>\n- Servers converting to Z is bad for clients (they want to display the correct time independent of the current user location)<br>\n- best practice is to preserve the offset<br>\n- how the actual timezone is preserved is open question</p>",
        "id": 173403987,
        "sender_full_name": "Pascal Pfiffner",
        "timestamp": 1565986313
    },
    {
        "content": "<p>And <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> , wouldn't a standard extension on <code>dateTime</code> and possibly <code>instant</code> be preferable to sticking a timezone on <code>Resource.meta</code>? The latter breaks down for e.g. <code>AllergyIntolerance.reaction.onset</code>.</p>",
        "id": 173404083,
        "sender_full_name": "Pascal Pfiffner",
        "timestamp": 1565986385
    },
    {
        "content": "<blockquote>\n<p>(also, 45 minute offsets?? really Australia??)</p>\n</blockquote>\n<p>umm: That's the Chatham Islands, which is not part of Australia (no, it's part of some little irrelevant country called New Zealand <span class=\"user-mention\" data-user-id=\"191321\">@David Hay</span> )</p>",
        "id": 173404123,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565986442
    },
    {
        "content": "<blockquote>\n<p>wouldn't a standard extension on dateTime and possibly instant be preferable to sticking a timezone on Resource.meta? The latter breaks down for e.g. AllergyIntolerance.reaction.onset.</p>\n</blockquote>\n<p>A standard extension on dateTime all over the place seems to invite problems. if it's all the same, or required to be, why do it? if it's all different, why do it? </p>\n<p>As for AllergyIntolerance.reaction.onset - sure, it could contain multiple dates from different timezones. But it's not (usually) going to contain times at all, let alone have the timezones matter. This one will usually contain year or at the most year/month</p>",
        "id": 173404367,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565986672
    },
    {
        "content": "<p>Yes sure, it makes sense to discuss this in light of pragmatism vs. being able to model the world.</p>",
        "id": 173404467,
        "sender_full_name": "Pascal Pfiffner",
        "timestamp": 1565986746
    },
    {
        "content": "<blockquote>\n<p>(also, 45 minute offsets?? really Australia??)</p>\n</blockquote>\n<p>oh no. I just learnt something. Eucla (a little town) observes it's own timezone. <a href=\"http://www.confluence.org/photo.php?visitid=10280&amp;pic=7\" target=\"_blank\" title=\"http://www.confluence.org/photo.php?visitid=10280&amp;pic=7\">http://www.confluence.org/photo.php?visitid=10280&amp;pic=7</a>. Never heard of that. And I see it has no official sanction</p>",
        "id": 173404492,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565986773
    },
    {
        "content": "<p>Yep Aussies and New Zealanders are just like a big happy family - of course, you do get envious comments from siblings from time to time, but we understand that - not everyone can live in <a href=\"https://www.stuff.co.nz/travel/destinations/nz/107175922/godzone-is-new-zealand-really-heaven-on-earth\" target=\"_blank\" title=\"https://www.stuff.co.nz/travel/destinations/nz/107175922/godzone-is-new-zealand-really-heaven-on-earth\">godzone</a></p>",
        "id": 173405634,
        "sender_full_name": "David Hay",
        "timestamp": 1565987837
    },
    {
        "content": "<p>Godzone notwithstanding,  I stand corrected not being precise enough with the concept of offset and timezone.   I think that @Pascal's  summary is where we are at right now. except point 4 should be\"</p>\n<ul>\n<li><em>Whether</em> and how the actual timezone is preserved is open question</li>\n</ul>",
        "id": 173418833,
        "sender_full_name": "Eric Haas",
        "timestamp": 1566003299
    },
    {
        "content": "<p>Is there any appetite for defining a name  value pair for a meta.tag  for Argo T4 and plan to use new meta time-zone element in R5 that GG is proposing?</p>\n<ul>\n<li>name = time zone</li>\n<li>values bound to codes derived from the tz database? : <a href=\"https://en.wikipedia.org/wiki/Tz_database\" target=\"_blank\" title=\"https://en.wikipedia.org/wiki/Tz_database\">https://en.wikipedia.org/wiki/Tz_database</a>  ( hoping somebody already has this...)</li>\n</ul>",
        "id": 173419461,
        "sender_full_name": "Eric Haas",
        "timestamp": 1566004454
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191339\">@Pascal Pfiffner</span>  if there were a timezone in the meta would that fix the issue clients have \"wanting to display the correct time independent of the current user location\" if everything was converted to Z time?</p>",
        "id": 173419543,
        "sender_full_name": "Eric Haas",
        "timestamp": 1566004651
    },
    {
        "content": "<p>Yes: if we get dateTime in Z, we can take a look at the timezone in meta and convert the Z dateTimes to the correct date/time. That is with the caveat that there might be dateTimes in the resource that apply to a different timezone (like AllergyIntolerance.reaction.onset), but for most cases this would probably be more correct than having no option to converting to the correct timezone. Also, do we need to say something about Resource.meta specifying a timezone and then dateTimes in that resource specifying offsets that do not match that timezone?</p>",
        "id": 173420513,
        "sender_full_name": "Pascal Pfiffner",
        "timestamp": 1566006150
    },
    {
        "content": "<p>no because they can be corrected</p>",
        "id": 173421590,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1566008316
    },
    {
        "content": "<p>OK here is a  strawman proposal for the US Core and timezones/ time offets :  hoping to get some feedback from <span class=\"user-mention\" data-user-id=\"191356\">@Jenni Syed</span>  and <span class=\"user-mention\" data-user-id=\"191339\">@Pascal Pfiffner</span> before tomorrow's call.....</p>\n<p><a href=\"http://build.fhir.org/ig/argonautproject/R4/branches/master/general-guidance.html#timezone-and-time-offsets-strawman-proposal\" target=\"_blank\" title=\"http://build.fhir.org/ig/argonautproject/R4/branches/master/general-guidance.html#timezone-and-time-offsets-strawman-proposal\">http://build.fhir.org/ig/argonautproject/R4/branches/master/general-guidance.html#timezone-and-time-offsets-strawman-proposal</a></p>",
        "id": 174253340,
        "sender_full_name": "Eric Haas",
        "timestamp": 1566928692
    },
    {
        "content": "<p>Our server would likely provide a timezone for specific dates. When we store time zone, it's because the date can be different from the \"base\" for the resource</p>",
        "id": 174253962,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1566929120
    },
    {
        "content": "<p>I know offset seems good for the way some apps use it, but would like some feedback from other apps and how they display. EG: if they display a zone with it, the offset isn't going to be enough</p>",
        "id": 174253999,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1566929159
    },
    {
        "content": "<p>We also need a timezone sent <em>in</em> so we can localize narratives</p>",
        "id": 174254087,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1566929193
    },
    {
        "content": "<p>EG: for some use case... Just because the offset is -5 for part of the year, it doesn't mean it was the same time zone because the user is currently in -5. Daylight savings time sucks</p>",
        "id": 174254184,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1566929275
    },
    {
        "content": "<p>I'm not a super fan of using the tag field - why not just an extension?</p>",
        "id": 174254514,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1566929485
    },
    {
        "content": "<p>Advantage of an extension is that the same extension URL and syntax can be used at the <code>Resource.meta</code> level or at a specific field level (e.g. <code>MedicationRequest.authoredOn</code>)</p>",
        "id": 174256252,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1566930678
    },
    {
        "content": "<p>tag was simpler but I see Josh's point.</p>",
        "id": 174262695,
        "sender_full_name": "Eric Haas",
        "timestamp": 1566934247
    },
    {
        "content": "<p>I don't understand what this means...</p>\n<blockquote>\n<p>Our server would likely provide a timezone for specific dates. When we store time zone, it's because the date can be different from the \"base\" for the resource</p>\n</blockquote>",
        "id": 174262779,
        "sender_full_name": "Eric Haas",
        "timestamp": 1566934300
    },
    {
        "content": "<p>What is assumed to be the base date for the resource?</p>",
        "id": 174262853,
        "sender_full_name": "Eric Haas",
        "timestamp": 1566934327
    },
    {
        "content": "<p>Usually? it's where the patient was</p>",
        "id": 174263337,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1566934662
    },
    {
        "content": "<p>eg: encounter's location tz</p>",
        "id": 174263356,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1566934671
    },
    {
        "content": "<p>again, in our system :)</p>",
        "id": 174263370,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1566934680
    },
    {
        "content": "<p>and for things that are based on encounters</p>",
        "id": 174263421,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1566934692
    },
    {
        "content": "<p>we store user TZ for dates when the user was elsewhere</p>",
        "id": 174263435,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1566934705
    },
    {
        "content": "<p>also, FHIR doesn't have a concept of storing a location's tz today</p>",
        "id": 174263472,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1566934736
    },
    {
        "content": "<p>which hasn't bothered me too much b/c I'm not sure how prevalent this type of logic is</p>",
        "id": 174263514,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1566934776
    },
    {
        "content": "<p>so based on the guidance I was under assumption that the the\"base\" tz  represented in the meta.tag (or meta.extension)?</p>",
        "id": 174263612,
        "sender_full_name": "Eric Haas",
        "timestamp": 1566934826
    },
    {
        "content": "<p>and to Josh's point other datetimes that don't agree with that should get their own extension...</p>",
        "id": 174263675,
        "sender_full_name": "Eric Haas",
        "timestamp": 1566934882
    },
    {
        "content": "<p>I think a standard extension for timezone that can be used makes sense to me, and was planning to apply it on the location resource internally. But do see the needs here for elsewhere.<br>\nIn directories this is also interesting as will apply it to the availability times. In HealthcareService and prac role.<br>\nSo interested if we have different usages/meanings for the zone info, and should they be different extensions?</p>",
        "id": 174331754,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1566966990
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> ! To point 3 and 5 – dateTime that have a time but no offset are invalid, so I don't think you need to specify those options. And agree, we don't have to use <code>Meta.tag</code> for the timezone, we could just use a standard extension on <code>Resource.meta</code> for the \"base\" TZ, and the same extension can be used directly on dateTime and instant.</p>",
        "id": 174355184,
        "sender_full_name": "Pascal Pfiffner",
        "timestamp": 1566994018
    },
    {
        "content": "<p>OK updated guidance to extension and fixed the algorithm: <br>\n<a href=\"http://build.fhir.org/ig/argonautproject/R4/branches/master/general-guidance.html#timezone-and-time-offsets-strawman-proposal\" target=\"_blank\" title=\"http://build.fhir.org/ig/argonautproject/R4/branches/master/general-guidance.html#timezone-and-time-offsets-strawman-proposal\">http://build.fhir.org/ig/argonautproject/R4/branches/master/general-guidance.html#timezone-and-time-offsets-strawman-proposal</a></p>",
        "id": 174377397,
        "sender_full_name": "Eric Haas",
        "timestamp": 1567008356
    },
    {
        "content": "<p>Latest Argo was significant push back to support of timezones.  am conducting a poll to see what if any of this we propose adding to Argo R4/US Core.   I still think its a good blue print for future work in R5.</p>",
        "id": 174400178,
        "sender_full_name": "Eric Haas",
        "timestamp": 1567025523
    },
    {
        "content": "<p>the 3/4 char codes are not from the tz database, as you noted in the terminology track. Should be the <code>America/New_York</code> format.</p>",
        "id": 174402602,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1567027621
    },
    {
        "content": "<p>Wondering if there was a reason to put this in meta, and not a root level extension (just as with Resource.language) like the below example showing it as how you might have it in the whole resource, vs on a specific value</p>\n<div class=\"codehilite\"><pre><span></span>&lt;Observation xmlns=&quot;http://hl7.org/fhir&quot;&gt;\n  &lt;language value=&quot;en-au&quot; /&gt;\n  &lt;extension url=&quot;http://hl7.org/fhir/us/core/StructureDefinition/tz&quot;&gt;\n    &lt;valueCode value=&quot;America/New_York&quot; /&gt;\n  &lt;/extension&gt;\n  &lt;subject&gt;\n    &lt;reference value=&quot;Patient/example&quot; /&gt;\n  &lt;/subject&gt;\n  &lt;effectiveDateTime value=&quot;2019-08-29T06:30:00+10:00&quot;&gt;\n    &lt;extension url=&quot;http://hl7.org/fhir/us/core/StructureDefinition/tz&quot;&gt;\n      &lt;valueCode value=&quot;Australia/Syndey&quot; /&gt;\n    &lt;/extension&gt;\n  &lt;/effectiveDateTime&gt;\n&lt;/Observation&gt;\n</pre></div>",
        "id": 174403024,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1567027934
    },
    {
        "content": "<p>The Meta only makes sense to me if you were just going to use a Meta.tag value rather than an extension</p>",
        "id": 174403221,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1567028081
    },
    {
        "content": "<p>see this for common timezones valueset :  <a href=\"#narrow/stream/179202-terminology/topic/timezone.20codes/near/174419755\" title=\"#narrow/stream/179202-terminology/topic/timezone.20codes/near/174419755\">https://chat.fhir.org/#narrow/stream/179202-terminology/topic/timezone.20codes/near/174419755</a></p>",
        "id": 174419786,
        "sender_full_name": "Eric Haas",
        "timestamp": 1567048193
    },
    {
        "content": "<p>I totally missed this extension when searching the extensions: <a href=\"http://hl7.org/fhir/StructureDefinition/tz-code\" target=\"_blank\" title=\"http://hl7.org/fhir/StructureDefinition/tz-code\">http://hl7.org/fhir/StructureDefinition/tz-code</a></p>",
        "id": 174463132,
        "sender_full_name": "Eric Haas",
        "timestamp": 1567091615
    },
    {
        "content": "<p>and <a href=\"http://hl7.org/fhir/ValueSet/timezones\" target=\"_blank\" title=\"http://hl7.org/fhir/ValueSet/timezones\">http://hl7.org/fhir/ValueSet/timezones</a></p>",
        "id": 174463177,
        "sender_full_name": "Eric Haas",
        "timestamp": 1567091642
    },
    {
        "content": "<p>This is not searchable in the <a href=\"http://hl7.org/fhir/r4/extensibility-registry.html\" target=\"_blank\" title=\"http://hl7.org/fhir/r4/extensibility-registry.html\">registry</a> as 'timezone'   only 'tz'  - I'm making a tracker to change  the name to fix that</p>",
        "id": 174463537,
        "sender_full_name": "Eric Haas",
        "timestamp": 1567091879
    },
    {
        "content": "<p>as well as tz-offset  which is technically incorrect</p>",
        "id": 174463626,
        "sender_full_name": "Eric Haas",
        "timestamp": 1567091928
    },
    {
        "content": "<p>I would like to confirm that the Accept-language header reference is :  <a href=\"https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.4\" target=\"_blank\" title=\"https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.4\">https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.4</a></p>",
        "id": 176356138,
        "sender_full_name": "Eric Haas",
        "timestamp": 1569234259
    },
    {
        "content": "<p>Since <a href=\"https://www.ietf.org/rfc/rfc2616.txt\" target=\"_blank\" title=\"https://www.ietf.org/rfc/rfc2616.txt\">https://www.ietf.org/rfc/rfc2616.txt</a> is not hyperlinkable I'm thinking that's a good link to put?</p>",
        "id": 176391924,
        "sender_full_name": "Pascal Pfiffner",
        "timestamp": 1569261000
    }
]