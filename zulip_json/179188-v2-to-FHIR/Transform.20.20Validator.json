[
    {
        "content": "<p>The V2-FHIR Mapping project is considering developing an Open Source Transform Validator tool as one of the project deliverables.</p>\n<p>How the transform validator will work:</p>\n<p>Suppose somebody has a V2-to-FHIR transform engine or transform service, and they have at least one test V2 message instance, and the FHIR bundle they get by transforming it.</p>\n<p>This pair of (V2 message, FHIR bundle) would be input to the transform validator. The validator will check that all the values to be expected from the transform are present in the FHIR bundle in the right places, and that no other values are present â€“ checking that the transform is consistent with the mapping tables from this project. The validator will note any discrepancies, in a spreadsheet and in an OperationOutcome resource (e.g. for each discrepancy noted, giving the V2 source path, the FHIR target path, and the nature of the discrepancy).</p>\n<p>Alternatively, someone may have a local variant of V2 and a local profile of FHIR, and have a localised V2-FHIR transform. They may have mapping tables describing their local transform requirements. Then, they can edit the mapping tables from this project, to reflect their local transform requirements, and can feed these modified mapping tables to the validator. The validator will check that the modified mapping tables are syntactically valid, before checking that the (message-Bundle) pair from the transform conforms with their own mapping tables. This is likely to be the most frequent use case.</p>\n<p>The transform validator will be similar to FHIR validators which validate a FHIR instance against a profile. Using it, FHIR servers could offer a transform validation service. This will not compete with suppliers of transform engines and transform services, but will enable them to check and demonstrate the quality of their offerings.</p>\n<p>The validator is partly implemented, and we are now considering various aspects of its functionality. If you have views on what it should do, please get in touch.</p>",
        "id": 185212808,
        "sender_full_name": "robert worden",
        "timestamp": 1578577673
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"193818\">@robert worden</span> is the validator using the java fhir validator as a base? because i would be also interested in such a functionality for cda to fhir transforms and back, actually for any logical model to fhir transform and back <span aria-label=\"sunglasses\" class=\"emoji emoji-1f60e\" role=\"img\" title=\"sunglasses\">:sunglasses:</span></p>",
        "id": 185214837,
        "sender_full_name": "Oliver Egger",
        "timestamp": 1578579237
    },
    {
        "content": "<p>Currently the validator is specialised to V2-to-FHIR transforms, mainly because it reads the spreadsheet mapping notation being used by the v2 to FHIR mapping project; those sheets define what the transform should do. See <a href=\"https://confluence.hl7.org/display/OO/2-To-FHIR+Project\" target=\"_blank\" title=\"https://confluence.hl7.org/display/OO/2-To-FHIR+Project\">https://confluence.hl7.org/display/OO/2-To-FHIR+Project</a> . However, you could use a similar layout of mapping spreadsheets to specify other transforms, such as CDA to FHIR or  OpenEHR to FHIR. In that case the validator could be adapted to validate those transforms. No, it does not depend on any FHIR validator.</p>",
        "id": 185226885,
        "sender_full_name": "robert worden",
        "timestamp": 1578586394
    },
    {
        "content": "<p>Has any thought been given to using StructureMap as the mapping reference rather than the spreadsheets? (possibly with changes to StructureMap of course)...</p>",
        "id": 185234181,
        "sender_full_name": "David Hay",
        "timestamp": 1578590336
    },
    {
        "content": "<p>I've implemented v2 to fhir and found it very useful to just run fhir validation on the output.  What I've found myself doing is posting v2 and using http headers to get the responses as fhir operation outcome. This applies fhir profile rules to v2 which I think is really useful.</p>",
        "id": 185282846,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1578632798
    },
    {
        "content": "<p>I havent tried it with Fhir MessageDefintion which seems to be the next step (we dont have any useful examples in the UK)</p>",
        "id": 185282865,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1578632879
    },
    {
        "content": "<p>The project is considering both StructureMap and ConceptMap as representations of the 'mapping reference'. StructureMap in particular has the benefit of being executable. However, I think the project's view is that StructureMap is not yet a suitable notation for capturing and reviewing mappings - because understanding of the StructureMap resource (or equivalently, of FHIR Mapping Language) is still pretty scarce - e.g. amongst the V2 experts who we need to contribute and review the mappings. </p>\n<p>In practice it appears that most people - when thinking about the relationships (or mappings) between two notations such as V2 and FHIR -  start their thinking in with spreadsheets. We don't get resistance to spreadsheets from V2 domain experts - so for capturing and reviewing the mappings, spreadsheets are the medium of choice. </p>\n<p>The question is then - are spreadsheets precise enough and expressive enough to do the whole job? We think they are - and they are modular, and you can validate a transform result against spreadsheets. Watch this space.</p>",
        "id": 185392895,
        "sender_full_name": "robert worden",
        "timestamp": 1578754590
    },
    {
        "content": "<p>Running FHIR validation on the resulting resource or bundle is useful, but we are aiming to do better. Validating a resource is a <strong>syntactic </strong>validation - checking that the resource obeys the rules of FHIR, but not checking that the data are correct. Validating a transform result is <strong>semantic </strong>validation - checking that the content is correct,  according to the V2 message it came from, via the transform. </p>\n<p>e.g. validating a Patient resource may check that the patient has a valid  birthDate - any possible birthDate. But validating the transform result checks that it is the correct birthDate, according to the V2 message source.</p>\n<p>So the transform validator will do semantic validation, supporting the HL7 goal of semantic interoperability.</p>",
        "id": 185393407,
        "sender_full_name": "robert worden",
        "timestamp": 1578755515
    },
    {
        "content": "<p>Fhir validation checks semantic content is correct. It can check a snomed observation in a obx segment is correct and follows any ValueSet rules.</p>",
        "id": 185398758,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1578764864
    },
    {
        "content": "<p>Kevin - agreed - FHIR validation does some semantic validation, and transform validation does more - in combination you will get pretty comprehensive  semantic validation.</p>",
        "id": 185491362,
        "sender_full_name": "robert worden",
        "timestamp": 1578921287
    },
    {
        "content": "<p>The attached note expains use cases for a V2-FHIR transform validator. Comments please. <a href=\"/user_uploads/10155/7vhAMfbdnQOwsXg0Wll5KUIT/Transform-Validator.docx\" target=\"_blank\" title=\"Transform-Validator.docx\">Transform-Validator.docx</a></p>",
        "id": 190011815,
        "sender_full_name": "robert worden",
        "timestamp": 1583669604
    }
]