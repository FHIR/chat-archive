[
    {
        "content": "<p>I am looking for v2 to FHIR Provenance example instance for the transform.  I fashioned one  see below ... after the description in the FHIR spec, but I'd like to see what one from this project looks like....</p>",
        "id": 198838323,
        "sender_full_name": "Eric Haas",
        "timestamp": 1590539241
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\"># General Provenance resource relating to the transformation process:</span>\n<span class=\"nt\">resourceType</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">Provenance</span>\n<span class=\"c1\"># activity is a omh to FHIR transform there is no transform activity in the code system!</span>\n<span class=\"nt\">activity</span><span class=\"p\">:</span>\n  <span class=\"nt\">coding</span><span class=\"p\">:</span>\n    <span class=\"p p-Indicator\">-</span> <span class=\"nt\">system</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">http://example.org/omh-to-fhir</span>\n      <span class=\"nt\">code</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">transform</span>\n      <span class=\"nt\">display</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">Transform</span>\n<span class=\"c1\"># Provenance.target points to all transformed resources since this is contained</span>\n<span class=\"c1\"># in the target resource it will be &quot;#&quot;</span>\n<span class=\"nt\">target</span><span class=\"p\">:</span>\n  <span class=\"p p-Indicator\">-</span> <span class=\"nt\">reference</span><span class=\"p\">:</span> <span class=\"s\">&#39;#&#39;</span> <span class=\"c1\">#Observation/omh-fhir-example</span>\n<span class=\"c1\"># Provenance.recorded indicates the instant the v2 message was transformed to FHIR resources</span>\n<span class=\"nt\">recorded</span><span class=\"p\">:</span> <span class=\"s\">&#39;2020-05-26T11:09:09-07:00&#39;</span>\n<span class=\"c1\"># Provenance.policy can optionally point to the rules used for the transformation such as the omh-fhir ig</span>\n<span class=\"nt\">policy</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">http://www.fhir.org/guides/mfhir/ImplementationGuide/openmhealth.mfhir-0.0.0</span>\n<span class=\"nt\">agent</span><span class=\"p\">:</span>\n  <span class=\"c1\"># Provenance.agent.type = &quot;assembler&quot;</span>\n  <span class=\"p p-Indicator\">-</span> <span class=\"nt\">type</span><span class=\"p\">:</span>\n      <span class=\"p p-Indicator\">-</span> <span class=\"nt\">coding</span><span class=\"p\">:</span>\n          <span class=\"p p-Indicator\">-</span> <span class=\"nt\">system</span><span class=\"p\">:</span> <span class=\"s\">&#39;http://terminology.hl7.org/CodeSystem/provenance-participant-type&#39;</span>\n            <span class=\"nt\">code</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">assembler</span>\n            <span class=\"nt\">display</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">Assembler</span>\n    <span class=\"c1\"># Provenance.agent.who references the Organization or Device performing the transformation</span>\n    <span class=\"nt\">who</span><span class=\"p\">:</span>\n      <span class=\"nt\">reference</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">Device/example-r24-server</span>\n  <span class=\"c1\"># source schema Provenance.agent.type = &quot;source&quot; see the entity for the actual schema instance</span>\n  <span class=\"p p-Indicator\">-</span> <span class=\"nt\">type</span><span class=\"p\">:</span>\n      <span class=\"nt\">text</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">omh-schema</span>\n    <span class=\"c1\"># Provenance.agent.who referencin the OMH schema</span>\n    <span class=\"nt\">who</span><span class=\"p\">:</span>\n        <span class=\"nt\">identifier</span><span class=\"p\">:</span>\n          <span class=\"nt\">value</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">blood-glucose-2.0</span>\n<span class=\"c1\"># Provenance.entity can optionally contain the whole omh schema instance as a</span>\n<span class=\"c1\"># DocumentReference in .what and a .role of &quot;derivation&quot;</span>\n<span class=\"nt\">entity</span><span class=\"p\">:</span>\n  <span class=\"p p-Indicator\">-</span> <span class=\"nt\">role</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">derivation</span>\n    <span class=\"nt\">what</span><span class=\"p\">:</span>\n      <span class=\"nt\">identifier</span><span class=\"p\">:</span>\n        <span class=\"nt\">system</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">urn:ietf:rfc:3986</span>\n        <span class=\"nt\">value</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">243c773b-8936-407e-9c23-270d0ea49cc4</span>\n    <span class=\"nt\">agent</span><span class=\"p\">:</span>\n      <span class=\"c1\"># Provenance.agent.type = &quot;Author&quot;</span>\n      <span class=\"p p-Indicator\">-</span> <span class=\"nt\">type</span><span class=\"p\">:</span>\n          <span class=\"p p-Indicator\">-</span> <span class=\"nt\">coding</span><span class=\"p\">:</span>\n              <span class=\"p p-Indicator\">-</span> <span class=\"nt\">system</span><span class=\"p\">:</span> <span class=\"s\">&#39;http://terminology.hl7.org/CodeSystem/provenance-participant-type&#39;</span>\n                <span class=\"nt\">code</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">AUT</span>\n                <span class=\"nt\">display</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">Author</span>\n        <span class=\"c1\"># Provenance.agent.who references the originating Device from</span>\n        <span class=\"c1\"># header.acquisition_provenance.source_name and</span>\n        <span class=\"c1\"># header.acquisition_provenance.source_data_point_id</span>\n        <span class=\"c1\"># this is the same as in Observation.Device and Observation.identifier</span>\n        <span class=\"nt\">who</span><span class=\"p\">:</span>\n          <span class=\"c1\"># reference: Device/acme-patient-device</span>\n          <span class=\"nt\">display</span><span class=\"p\">:</span> <span class=\"s\">&quot;Acme</span><span class=\"nv\"> </span><span class=\"s\">BG</span><span class=\"nv\"> </span><span class=\"s\">API&quot;</span>\n</code></pre></div>",
        "id": 198838330,
        "sender_full_name": "Eric Haas",
        "timestamp": 1590539251
    },
    {
        "content": "<p>You hare using an example codesystem for the .activity, why not use lifecycle 'transform' activity? This seems the activity you are doing. right?</p>\n<blockquote>\n<p><a href=\"http://terminology.hl7.org/CodeSystem/iso-21089-lifecycle#transform\">http://terminology.hl7.org/CodeSystem/iso-21089-lifecycle#transform</a></p>\n</blockquote>",
        "id": 198920539,
        "sender_full_name": "John Moehrke",
        "timestamp": 1590598594
    },
    {
        "content": "<p>Not clear why you want to use .entity.agent.... and I think you need to refer to one of your .agent entries. not inline an agent. (I have never understood this part)  -- <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> ?</p>",
        "id": 198920697,
        "sender_full_name": "John Moehrke",
        "timestamp": 1590598675
    },
    {
        "content": "<p>if you want to say that the v2 message was authored by  a given agent, then you indicate that .agent details as .agent.type=SORUCE</p>",
        "id": 198920869,
        "sender_full_name": "John Moehrke",
        "timestamp": 1590598741
    },
    {
        "content": "<p>see <a href=\"http://build.fhir.org/provenance.html#import\">http://build.fhir.org/provenance.html#import</a></p>",
        "id": 198920951,
        "sender_full_name": "John Moehrke",
        "timestamp": 1590598786
    },
    {
        "content": "<p>clearly some improvement opportunities for the text found in the Provenance page... lets work on that.</p>",
        "id": 198921164,
        "sender_full_name": "John Moehrke",
        "timestamp": 1590598865
    },
    {
        "content": "<blockquote>\n<p>You hare using an example codesystem for the .activity, why not use lifecycle 'transform' activity? This seems the activity you are doing. right?</p>\n</blockquote>\n<p>this was not  in FHIR R4</p>",
        "id": 199335398,
        "sender_full_name": "Eric Haas",
        "timestamp": 1590984788
    },
    {
        "content": "<p>updated based on John's input:</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"c1\"># General Provenance resource relating to the transformation process:</span>\n<span class=\"nt\">resourceType</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">Provenance</span>\n<span class=\"c1\"># activity is a omh to FHIR transform there is no transform activity in the code system!</span>\n<span class=\"nt\">activity</span><span class=\"p\">:</span>\n  <span class=\"nt\">coding</span><span class=\"p\">:</span>\n    <span class=\"p p-Indicator\">-</span> <span class=\"nt\">system</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">http://terminology.hl7.org/CodeSystem/iso-21089-lifecycle</span>\n      <span class=\"nt\">code</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">transform</span>\n      <span class=\"nt\">display</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">Transform</span>\n<span class=\"c1\"># Provenance.target points to all transformed resources since this is contained</span>\n<span class=\"c1\"># in the target resource it will be &quot;#&quot;</span>\n<span class=\"nt\">target</span><span class=\"p\">:</span>\n  <span class=\"p p-Indicator\">-</span> <span class=\"nt\">reference</span><span class=\"p\">:</span> <span class=\"s\">&#39;#&#39;</span> <span class=\"c1\">#Observation/omh-fhir-example</span>\n<span class=\"c1\"># Provenance.recorded indicates the instant the v2 message was transformed to FHIR resources</span>\n<span class=\"nt\">recorded</span><span class=\"p\">:</span> <span class=\"s\">&#39;2020-05-26T11:09:09-07:00&#39;</span>\n<span class=\"c1\"># Provenance.policy can optionally point to the rules used for the transformation such as the omh-fhir ig</span>\n<span class=\"nt\">policy</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">http://www.fhir.org/guides/mfhir/ImplementationGuide/openmhealth.mfhir-0.0.0</span>\n<span class=\"nt\">agent</span><span class=\"p\">:</span>\n  <span class=\"c1\"># Provenance.agent.type = &quot;assembler&quot;</span>\n  <span class=\"p p-Indicator\">-</span> <span class=\"nt\">type</span><span class=\"p\">:</span>\n      <span class=\"p p-Indicator\">-</span> <span class=\"nt\">coding</span><span class=\"p\">:</span>\n          <span class=\"p p-Indicator\">-</span> <span class=\"nt\">system</span><span class=\"p\">:</span> <span class=\"s\">&#39;http://terminology.hl7.org/CodeSystem/provenance-participant-type&#39;</span>\n            <span class=\"nt\">code</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">assembler</span>\n            <span class=\"nt\">display</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">Assembler</span>\n    <span class=\"c1\"># Provenance.agent.who references the Organization or Device performing the transformation</span>\n    <span class=\"nt\">who</span><span class=\"p\">:</span>\n      <span class=\"nt\">reference</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">Device/example-r24-server</span>\n  <span class=\"c1\"># source schema Provenance.agent.type = &quot;source&quot; see the entity for the actual schema instance</span>\n  <span class=\"p p-Indicator\">-</span> <span class=\"nt\">type</span><span class=\"p\">:</span>\n      <span class=\"nt\">text</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">omh-schema</span>\n    <span class=\"c1\"># Provenance.agent.who referencin the OMH schema</span>\n    <span class=\"nt\">who</span><span class=\"p\">:</span>\n        <span class=\"nt\">identifier</span><span class=\"p\">:</span>\n          <span class=\"nt\">value</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">blood-glucose-2.0</span>\n    <span class=\"p p-Indicator\">-</span> <span class=\"nt\">type</span><span class=\"p\">:</span>\n        <span class=\"p p-Indicator\">-</span> <span class=\"nt\">coding</span><span class=\"p\">:</span>\n            <span class=\"p p-Indicator\">-</span> <span class=\"nt\">system</span><span class=\"p\">:</span> <span class=\"s\">&#39;http://terminology.hl7.org/CodeSystem/provenance-participant-type&#39;</span>\n              <span class=\"nt\">code</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">AUT</span>\n              <span class=\"nt\">display</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">Author</span>\n      <span class=\"c1\"># Provenance.agent.who references the originating Device from</span>\n      <span class=\"c1\"># header.acquisition_provenance.source_name and</span>\n      <span class=\"c1\"># header.acquisition_provenance.source_data_point_id</span>\n      <span class=\"c1\"># this is the same as in Observation.Device and Observation.identifier</span>\n      <span class=\"nt\">who</span><span class=\"p\">:</span>\n        <span class=\"c1\"># reference: Device/acme-patient-device</span>\n        <span class=\"nt\">display</span><span class=\"p\">:</span> <span class=\"s\">&quot;Acme</span><span class=\"nv\"> </span><span class=\"s\">BG</span><span class=\"nv\"> </span><span class=\"s\">API&quot;</span>\n<span class=\"c1\"># Provenance.entity can optionally contain the whole omh schema instance as a</span>\n<span class=\"c1\"># DocumentReference in .what and a .role of &quot;derivation&quot;</span>\n<span class=\"nt\">entity</span><span class=\"p\">:</span>\n  <span class=\"p p-Indicator\">-</span> <span class=\"nt\">role</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">derivation</span>\n    <span class=\"nt\">what</span><span class=\"p\">:</span>\n      <span class=\"nt\">identifier</span><span class=\"p\">:</span>\n        <span class=\"nt\">system</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">urn:ietf:rfc:3986</span>\n        <span class=\"nt\">value</span><span class=\"p\">:</span> <span class=\"l l-Scalar l-Scalar-Plain\">243c773b-8936-407e-9c23-270d0ea49cc4</span>\n</code></pre></div>",
        "id": 199336231,
        "sender_full_name": "Eric Haas",
        "timestamp": 1590986045
    },
    {
        "content": "<p>Have you looked at the v2-to-FHIR mapping spreadsheets that map to Provenance?  <a href=\"https://docs.google.com/spreadsheets/d/1PaFYPSSq4oplTvw_4OgOn6h2Bs_CMvCAU9CqC4tPBgk/edit#gid=484860251\">https://docs.google.com/spreadsheets/d/1PaFYPSSq4oplTvw_4OgOn6h2Bs_CMvCAU9CqC4tPBgk/edit#gid=484860251</a>.  Look for anything that has Provenance in the name.</p>",
        "id": 199366448,
        "sender_full_name": "Hans Buitendijk",
        "timestamp": 1591017112
    },
    {
        "content": "<blockquote>\n<p>I think you need to refer to one of your .agent entries. not inline an agent. (I have never understood this part)</p>\n</blockquote>\n<p>It's easier if you don't refer to it, until the same agent appears more than once. I don't recall the trade-offs ever being explicit discussed. I copied the W3C prov to get the initial design</p>",
        "id": 199828875,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1591321475
    }
]