[
    {
        "content": "<p>Start of a thread for the PH Opioids CDS testing <span class=\"user-mention\" data-user-id=\"195254\">@Ivan Cvitkovic</span> <span class=\"user-mention\" data-user-id=\"340648\">@Jan Flowers</span></p>",
        "id": 209586543,
        "sender_full_name": "Bill Lober",
        "timestamp": 1599699452
    },
    {
        "content": "<p>Got it.</p>\n<blockquote>\n<p>Start of a thread for the PH Opioids CDS testing <span class=\"user-mention silent\" data-user-id=\"195254\">Ivan Cvitkovic</span> <span class=\"user-mention silent\" data-user-id=\"340648\">Jan Flowers</span></p>\n</blockquote>\n<p>a</p>",
        "id": 209586644,
        "sender_full_name": "Jan Flowers",
        "timestamp": 1599699562
    },
    {
        "content": "<p>Just to link everything together, if you found this chat, you can find out more about us here: <a href=\"https://confluence.hl7.org/pages/viewpage.action?pageId=86976979\">https://confluence.hl7.org/pages/viewpage.action?pageId=86976979</a></p>",
        "id": 209596750,
        "sender_full_name": "Bill Lober",
        "timestamp": 1599714693
    },
    {
        "content": "<p>(that page just updated to add some useful links)</p>",
        "id": 209596920,
        "sender_full_name": "Bill Lober",
        "timestamp": 1599714883
    },
    {
        "content": "<p>Tagging <span class=\"user-mention\" data-user-id=\"191976\">@Justin McReynolds</span></p>",
        "id": 209600304,
        "sender_full_name": "Bill Lober",
        "timestamp": 1599719523
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"221184\">@John Stamm</span> 0 drawing this thread to your attention.  <span class=\"user-mention\" data-user-id=\"195254\">@Ivan Cvitkovic</span> and I plan to get started around 7:30 Pacific time, but there's an outstanding question for you in email from Ivan, I think re SMART on FHIR integration w/your Eoic Instance.</p>",
        "id": 209600861,
        "sender_full_name": "Bill Lober",
        "timestamp": 1599720129
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"195254\">@Ivan Cvitkovic</span> let me know when you're around this AM.</p>",
        "id": 209655131,
        "sender_full_name": "Bill Lober",
        "timestamp": 1599748701
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"221184\">@John Stamm</span> It's hard for me to start the stream because I have other Zoom demands on my system.   I'll try to put up a slide, though.</p>",
        "id": 209674102,
        "sender_full_name": "Bill Lober",
        "timestamp": 1599755932
    },
    {
        "content": "<p>Thanks for starting the stream <span class=\"user-mention\" data-user-id=\"195254\">@Ivan Cvitkovic</span>  - see my notes re something to project to show people how to find us.   I tried sharing from the iPad - didn't seem to do it.</p>",
        "id": 209679968,
        "sender_full_name": "Bill Lober",
        "timestamp": 1599758490
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"253724\">@Bill Lober</span> <span class=\"user-mention\" data-user-id=\"340648\">@Jan Flowers</span> <span class=\"user-mention\" data-user-id=\"195254\">@Ivan Cvitkovic</span> -- I should have it set up and be able to hop on a call now.  I did have to update your client ID.  It's now  cae1873b-7cf6-4710-b619-c4797616bc0f<br>\nDid you have a separate redirect URl that you needed me to add?<br>\nAlso - I was going to start on an unsecured connection unless you need otherwise.  If so, let me know and I'll get a client secret for you.</p>",
        "id": 209684406,
        "sender_full_name": "John Stamm",
        "timestamp": 1599760581
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"221184\">@John Stamm</span>  - Ivan is hanging out on the Whova Zoom - we are flailing a bit on how to best communicate w/ others and were just requested by ONC that we hang out on Zoom...  I'll draw his attention to his again!</p>",
        "id": 209685544,
        "sender_full_name": "Bill Lober",
        "timestamp": 1599761023
    },
    {
        "content": "<p>(we live on Slack/Zoom/GoogleDocs, in real life, so Whova/Zulip/Confluence are a shift!)</p>",
        "id": 209685669,
        "sender_full_name": "Bill Lober",
        "timestamp": 1599761079
    },
    {
        "content": "<p>I'm definitely more accustomed to Zoom and Teams, so Whova has been interesting.</p>",
        "id": 209685777,
        "sender_full_name": "John Stamm",
        "timestamp": 1599761126
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"221184\">@John Stamm</span> Thank you! I just updated our client ID to match that one</p>",
        "id": 209685819,
        "sender_full_name": "Ivan Cvitkovic",
        "timestamp": 1599761150
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"221184\">@John Stamm</span> <br>\nCould you add the following as a redirect URI<br>\n<a href=\"https://backend.cat-demo.cosri.cirg.washington.edu/auth/authorize\">https://backend.cat-demo.cosri.cirg.washington.edu/auth/authorize</a></p>",
        "id": 209686184,
        "sender_full_name": "Ivan Cvitkovic",
        "timestamp": 1599761312
    },
    {
        "content": "<p>client secret -- yFbywhzD0nnfG9IXLXFj3X/hAxvA3+dTsNXE8nW+7Avt5/5RLogxbRxXE76wv+UEFLgHcC5llRS2bn8ZeQv1wg==</p>",
        "id": 209687273,
        "sender_full_name": "John Stamm",
        "timestamp": 1599761748
    },
    {
        "content": "<p><a href=\"https://frontend.cat-demo.cosri.cirg.washington.edu/\">https://frontend.cat-demo.cosri.cirg.washington.edu/</a></p>",
        "id": 209688495,
        "sender_full_name": "John Stamm",
        "timestamp": 1599762286
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/erw_PE7I1r6tMuxVnh1IZdyi/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/erw_PE7I1r6tMuxVnh1IZdyi/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/erw_PE7I1r6tMuxVnh1IZdyi/image.png\"></a></div>",
        "id": 209688627,
        "sender_full_name": "John Stamm",
        "timestamp": 1599762344
    },
    {
        "content": "<p>I don't seem to have voice access to the Zoom on my iPad, which is fine.  Unless you heard me a few mins ago. But it looked like you didn't.  Not important now, and I'd rather chat anyway.</p>",
        "id": 209688993,
        "sender_full_name": "Bill Lober",
        "timestamp": 1599762485
    },
    {
        "content": "<p>thanks John - talk to you soon.  We'll leave Zoom open, but quiet.</p>",
        "id": 209689155,
        "sender_full_name": "Bill Lober",
        "timestamp": 1599762583
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"221184\">@John Stamm</span> I added a fix for the issue you saw. Can you try launching again and paste any console errors you see? Thanks!</p>",
        "id": 209692383,
        "sender_full_name": "Ivan Cvitkovic",
        "timestamp": 1599764043
    },
    {
        "content": "<p>Iâ€™m back.  Any update?</p>",
        "id": 209695286,
        "sender_full_name": "Bill Lober",
        "timestamp": 1599765283
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"253724\">@Bill Lober</span> John helped me identify an issue in our backend FHIR proxy. We weren't including the requested content type (JSON) from our frontend, so we were getting an XML-formatted conformance statement rather than the JSON one expected</p>",
        "id": 209695834,
        "sender_full_name": "Ivan Cvitkovic",
        "timestamp": 1599765549
    },
    {
        "content": "<p>I've fixed the aforementioned issue, so we should be ready for <span class=\"user-mention\" data-user-id=\"221184\">@John Stamm</span> to try another launch when he's available to</p>",
        "id": 209695866,
        "sender_full_name": "Ivan Cvitkovic",
        "timestamp": 1599765565
    },
    {
        "content": "<p>Do you see any traffic?  I'm not making it as far now as I did before.  Seems to be an OAuth error?</p>",
        "id": 209697054,
        "sender_full_name": "John Stamm",
        "timestamp": 1599766087
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/hG6BWLLOHgLldJ8vopOWtcFM/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/hG6BWLLOHgLldJ8vopOWtcFM/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/hG6BWLLOHgLldJ8vopOWtcFM/image.png\"></a></div>",
        "id": 209699482,
        "sender_full_name": "John Stamm",
        "timestamp": 1599767118
    },
    {
        "content": "<p>I have to turn down volume (conflicting department meeting) - will be back at 3 (Pacific) after 2 more calls, but will be on chat between time.</p>",
        "id": 209700061,
        "sender_full_name": "Bill Lober",
        "timestamp": 1599767386
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/omiSR8uH8Yy9U9YaoUgSNz2d/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/omiSR8uH8Yy9U9YaoUgSNz2d/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/omiSR8uH8Yy9U9YaoUgSNz2d/image.png\"></a></div>",
        "id": 209702522,
        "sender_full_name": "John Stamm",
        "timestamp": 1599768506
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"221184\">@John Stamm</span> I tried reproducing the Patient FHIR resource request in curl and I'm seeing a 403 and the below error in the response headers</p>\n<div class=\"codehilite\"><pre><span></span><code>curl &#39;https://connectathon.epic.com/Interconnect-Fhir-OAuth/api/FHIR/DSTU2/Patient/TLKtFHW5Di9CVKNyR46w2ZcpZZsPGmHO7j-agT6dE.UsB&#39; -H &#39;Authorization: Bearer qg4slOI-72ajJNt34QLh1QkjiEbWWgCtBPNHIgKQytz1tNbc-2r91Y7gG8DAbmvuecXSmSrTjJSOch7gHWxjrsRjJAs1qxzzZj50rarLrxyZAwcWzcHmOqV2j1Fsp2vk&#39; -v\n</code></pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span><code>WWW-Authenticate: Bearer error=&quot;insufficient_scope&quot;, error_description=&quot;The access token provided is valid, but is not authorized for this service&quot;\n</code></pre></div>",
        "id": 209703409,
        "sender_full_name": "Ivan Cvitkovic",
        "timestamp": 1599768998
    },
    {
        "content": "<p>FYI this is the current <code>iss</code>/FHIR base URL we're getting (from <code>/metadata</code>); I'll hard-code the FHIR R4 URL once it's confirmed<br>\n<a href=\"https://connectathon.epic.com/Interconnect-Fhir-OAuth/api/FHIR/DSTU2\">https://connectathon.epic.com/Interconnect-Fhir-OAuth/api/FHIR/DSTU2</a></p>",
        "id": 209705729,
        "sender_full_name": "Ivan Cvitkovic",
        "timestamp": 1599770251
    },
    {
        "content": "<p><a href=\"https://connectathon.epic.com/Interconnect-Fhir-OAuth/api/FHIR/R4/\">https://connectathon.epic.com/Interconnect-Fhir-OAuth/api/FHIR/R4/</a> -- should be</p>",
        "id": 209705868,
        "sender_full_name": "John Stamm",
        "timestamp": 1599770324
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"221184\">@John Stamm</span> R4 resources returning a 403:</p>\n<div class=\"codehilite\"><pre><span></span><code>Condition\nMedicationRequest\nObservation\nProcedure\nEncounter\n</code></pre></div>",
        "id": 209706482,
        "sender_full_name": "Ivan Cvitkovic",
        "timestamp": 1599770642
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"221184\">@John Stamm</span>  FYI still seeing 403s for the below resources</p>\n<div class=\"codehilite\"><pre><span></span><code>Condition\nMedicationRequest\nObservation\n</code></pre></div>",
        "id": 209707411,
        "sender_full_name": "Ivan Cvitkovic",
        "timestamp": 1599771115
    },
    {
        "content": "<p>Tried it again, as well as resetting the metadata in hopes that you eventually won't have to hard code it.  Let me know when you're back if you want me to run it again.</p>",
        "id": 209707412,
        "sender_full_name": "John Stamm",
        "timestamp": 1599771115
    },
    {
        "content": "<p>I was able to add explicit filters on categories/statues (as querystring params, on top of the existing <code>patient=TLKtFHW5Di9CVKNyR46w2ZcpZZsPGmHO7j-agT6dE.UsB</code>) to narrow down the data requested for the following resources (we were getting 403 Forbidden for some):</p>\n<ul>\n<li>MedicationRequest (<code>status=active,on-hold,cancelled,completed,stopped,draft,unknown</code>)</li>\n<li>Observation (<code>category=social-history,vital-signs,imaging,laboratory,procedure,survey,exam,therapy,activity</code>)</li>\n<li>MedicationStatement (<code>status=active,completed,intended,stopped,on-hold,unknown</code>)</li>\n</ul>\n<p><span class=\"user-mention\" data-user-id=\"221184\">@John Stamm</span>  when you get a chance, can you attempt another launch? Let me know if anything is rendered, and please include any browser console errors. Thanks again!</p>",
        "id": 209743054,
        "sender_full_name": "Ivan Cvitkovic",
        "timestamp": 1599803575
    },
    {
        "content": "<p>Just tried it, the page did render and there were some errors.</p>",
        "id": 209778745,
        "sender_full_name": "John Stamm",
        "timestamp": 1599830077
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/aWE3TMdAVcDuqKAPyHTzUJv0/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/aWE3TMdAVcDuqKAPyHTzUJv0/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/aWE3TMdAVcDuqKAPyHTzUJv0/image.png\"></a></div>",
        "id": 209778750,
        "sender_full_name": "John Stamm",
        "timestamp": 1599830079
    },
    {
        "content": "<p>Thanks for trying that again!</p>",
        "id": 209782103,
        "sender_full_name": "Ivan Cvitkovic",
        "timestamp": 1599831777
    },
    {
        "content": "<p>I'm getting the same 403 Forbidden (<code>WWW-Authenticate: Bearer error=\"insufficient_scope\", error_description=\"The access token provided is valid, but is not authorized for this service\"</code>) for the following requests.</p>\n<p>However, those FHIR resources shouldn't be necessary for the key functionality of the app.</p>\n<p><a href=\"https://connectathon.epic.com/Interconnect-Fhir-OAuth/api/FHIR/DSTU2/MedicationStatement?status=active,completed,intended&amp;patient=TLKtFHW5Di9CVKNyR46w2ZcpZZsPGmHO7j-agT6dE.UsB\">https://connectathon.epic.com/Interconnect-Fhir-OAuth/api/FHIR/DSTU2/MedicationStatement?status=active,completed,intended&amp;patient=TLKtFHW5Di9CVKNyR46w2ZcpZZsPGmHO7j-agT6dE.UsB</a></p>\n<p><a href=\"https://connectathon.epic.com/Interconnect-Fhir-OAuth/api/FHIR/DSTU2/Condition?patient=TLKtFHW5Di9CVKNyR46w2ZcpZZsPGmHO7j-agT6dE.UsB\">https://connectathon.epic.com/Interconnect-Fhir-OAuth/api/FHIR/DSTU2/Condition?patient=TLKtFHW5Di9CVKNyR46w2ZcpZZsPGmHO7j-agT6dE.UsB</a></p>\n<p><a href=\"https://connectathon.epic.com/Interconnect-Fhir-OAuth/api/FHIR/DSTU2/Observation?category=social-history,vital-signs,imaging,laboratory,procedure,survey,exam,therapy&amp;patient=TLKtFHW5Di9CVKNyR46w2ZcpZZsPGmHO7j-agT6dE.UsB\">https://connectathon.epic.com/Interconnect-Fhir-OAuth/api/FHIR/DSTU2/Observation?category=social-history,vital-signs,imaging,laboratory,procedure,survey,exam,therapy&amp;patient=TLKtFHW5Di9CVKNyR46w2ZcpZZsPGmHO7j-agT6dE.UsB</a></p>",
        "id": 209782234,
        "sender_full_name": "Ivan Cvitkovic",
        "timestamp": 1599831857
    },
    {
        "content": "<p>I did notice that after removing the override of the iss to the <a href=\"https://connectathon.epic.com/Interconnect-Fhir-OAuth/api/FHIR/R4\">R4 base URL</a>, we're getting DSTU2 again (from <code>/metadata</code>).</p>\n<p><span class=\"user-mention\" data-user-id=\"221184\">@John Stamm</span>  It's not a problem for me to add the <code>iss</code> override to R4 back in, should I? Either way once it's configured for R4 I'd like to do another run-through.</p>",
        "id": 209782678,
        "sender_full_name": "Ivan Cvitkovic",
        "timestamp": 1599832091
    },
    {
        "content": "<p>hmm, I do have it set for R4.  But I can ping folks about that offline if we want to proceed with your hard coding.</p>",
        "id": 209782824,
        "sender_full_name": "John Stamm",
        "timestamp": 1599832167
    },
    {
        "content": "<p>Most of the app functionality is based on R4 MedicationRequest resources. I'll defer to you on the other consequences of hardcoding <code>iss</code>, but as long as MedicationRequests work, it should be enough for me :)</p>",
        "id": 209783272,
        "sender_full_name": "Ivan Cvitkovic",
        "timestamp": 1599832389
    },
    {
        "content": "<p>(good morining <span class=\"user-mention\" data-user-id=\"195254\">@Ivan Cvitkovic</span> <span class=\"user-mention\" data-user-id=\"340648\">@Jan Flowers</span> )</p>",
        "id": 209791293,
        "sender_full_name": "Bill Lober",
        "timestamp": 1599836306
    },
    {
        "content": "<p>I have a lead on how to override that from DSTU2 to R4 on my side and hope to try it soon.  I'll let you know.</p>",
        "id": 209794483,
        "sender_full_name": "John Stamm",
        "timestamp": 1599837717
    },
    {
        "content": "<p>Launched one - can you check if that had R4 listed?  It did load, will paste console errors in a min.</p>",
        "id": 209817674,
        "sender_full_name": "John Stamm",
        "timestamp": 1599848907
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/QdPaRuJN2qK4xCsPTz_pVlwP/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/QdPaRuJN2qK4xCsPTz_pVlwP/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/QdPaRuJN2qK4xCsPTz_pVlwP/image.png\"></a></div>",
        "id": 209817679,
        "sender_full_name": "John Stamm",
        "timestamp": 1599848910
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"221184\">@John Stamm</span> ! Unfortunately I'm still seeing the DSTU2 URL being advertised and used.</p>\n<p>For expediency's sake I went ahead and added the R4 iss override on our side.<br>\nCould you attempt another launch to test R4 with our app? If the UI is rendering correctly, could you also capture a screenshot? More than happy to remove the R4 override on our side and test again afterwards</p>",
        "id": 209821365,
        "sender_full_name": "Ivan Cvitkovic",
        "timestamp": 1599850817
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/Voo36cn1kU5OEpjfoVOqQpxA/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/Voo36cn1kU5OEpjfoVOqQpxA/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/Voo36cn1kU5OEpjfoVOqQpxA/image.png\"></a></div>",
        "id": 209827720,
        "sender_full_name": "John Stamm",
        "timestamp": 1599854124
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"221184\">@John Stamm</span>. (note to <span class=\"user-mention\" data-user-id=\"340648\">@Jan Flowers</span> )</p>",
        "id": 209853446,
        "sender_full_name": "Bill Lober",
        "timestamp": 1599875608
    }
]