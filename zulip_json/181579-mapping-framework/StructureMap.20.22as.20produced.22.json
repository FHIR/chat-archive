[
    {
        "content": "<p>Resulting from the discussion about local let statements (see <a href=\"#narrow/stream/181579-mapping-framework/topic/FHIR.20Mapping.20language.20in.20real.20world.20applications\">https://chat.fhir.org/#narrow/stream/181579-mapping-framework/topic/FHIR.20Mapping.20language.20in.20real.20world.20applications</a>), we reached the conclusion for the .NET implementation that it makes more sense to declare target variables in a group which can act like a local let statement.</p>\n<p>For example: <code>group LocalLetTest(source src: MySrc, target tgt: MyTgt, target myLet : &lt;type&gt;)</code>. In this case a mapping rule could use \"myLet\" as a local variable and store some result within the scope of the group.</p>\n<p>Looking at <a href=\"https://www.hl7.org/fhir/mapping-language.html#typing\">https://www.hl7.org/fhir/mapping-language.html#typing</a>, we would also have the option to use \"as produced\", which is exactly what would be needed here. However, \"produced\" is currently only used in StructureMap.structure.mode and not in StructureMap.group.input.mode. Would it make sense to extend this and use \"produced\" like optional parameters which can occur at the end of a group? The engine could then create the instances of the defined type on-demand but you wouldn't need to provide when calling the group.</p>",
        "id": 225997189,
        "sender_full_name": "Alexander Zautke",
        "timestamp": 1613053389
    }
]