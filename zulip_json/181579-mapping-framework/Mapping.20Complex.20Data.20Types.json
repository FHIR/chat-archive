[
    {
        "content": "<p>I am struggling to use the FHIR mapping language to map complex data types such as quantity.  I found a Zulip thread from 30 May 2017 that recommended the following approach:</p>\n<p>rule_value : for src.value as v make create(\"Quantity\") as q, tgt.value = q, q.value = v</p>\n<p>Based on that, I used the following snippet to map a questionnaire response to an observation quantity.  This snippet represents only my attempt to populate the value.  Once I get this to work, I will then populate the unit of measure.</p>\n<p>\"Questionnaire.value\": for answerQuantity.value as answerValue make create(\"Quantity\") as quantity, observation.value = quantity, quantity.value = answerValue</p>\n<p>Unfortunately, I get the following error message:</p>\n<p>â€œFailure: Unable to convert a org.hl7.fhir.r4.elementmodel.Element to a Decimal\"</p>\n<p>I have not yet converted my code to the new syntax. Is my problem related to the syntax changes to the FHIR mapping language? Any advice on how to fix this issue is greatly appreciated.</p>",
        "id": 155351398,
        "sender_full_name": "Robinette Renner",
        "timestamp": 1547744762
    },
    {
        "content": "<p>that's a problem with the engine. I'll fix it up. how are you running the engine?</p>",
        "id": 155354706,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1547747618
    },
    {
        "content": "<p>I am running it using the Terminal application in Mac OS.</p>",
        "id": 155355690,
        "sender_full_name": "Robinette Renner",
        "timestamp": 1547748490
    },
    {
        "content": "<p>but what are you running?</p>",
        "id": 155356463,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1547749209
    },
    {
        "content": "<p>I am running the FHIR validator to do the transform.</p>",
        "id": 156329966,
        "sender_full_name": "Robinette Renner",
        "timestamp": 1547768708
    },
    {
        "content": "<p>Not sure if I am answering your question.  I am using the FHIR validator to transform QuestionnaireResponse to a bundle of Observation resources.  Is there additional information that you need?</p>",
        "id": 156330201,
        "sender_full_name": "Robinette Renner",
        "timestamp": 1547768942
    },
    {
        "content": "<blockquote>\n<p>validator</p>\n</blockquote>\n<p>ok.</p>",
        "id": 156330893,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1547769660
    }
]