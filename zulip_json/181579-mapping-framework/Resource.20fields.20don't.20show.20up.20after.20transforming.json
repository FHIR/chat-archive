[
    {
        "content": "<p>I am trying to transform a QuestionnaireResponse into a Patient resource and am using a very basic mapping file to convert the name inputs from the QuestionnaireResponse to the .name field for a Patient resource. The mapping file was converted to a StructureMap without any issues, but when using the StructureMap to transform the QuestionnaireResponse into a Patient resource the resulting resource does not have the .name field (it does have the .id and .active fields which were set using other rules in the map).<br>\nWhat should I look into to fix this issue?<br>\nFor reference here are the rules used.</p>\n<div class=\"codehilite\"><pre><span></span><code>group MapPatientDemographicsPanelToPatient(source src: QuestionnaireResponse, target patient: Patient)\n{\n    src -&gt; patient.id = uuid();\n    src -&gt; patient.active = true;\n\n    src.item as answerItem where &quot;linkId = &#39;/45392-8&#39;&quot; -&gt;  patient.name = create(&#39;HumanName&#39;) as patientName then\n      MapPatientFirstName(answerItem, patientName);\n\n    src.item as answerItem where &quot;linkId = &#39;/45394-4&#39;&quot; -&gt;  patient.name as patientName then\n        MapPatientLastName(answerItem, patientName);\n}\n\ngroup MapPatientFirstName(source answerItem, target patientName: HumanName) {\n    answerItem.answer as answer -&gt; patientName.given as givenName then {\n        answer.valueString as vs -&gt; patientName.given = vs;\n    };\n}\n\ngroup MapPatientLastName(source answerItem, target patientName: HumanName) {\n    answerItem.answer as answer -&gt; patientName.family as familyName then {\n        answer.valueString as vs -&gt; patientName.family = vs;\n    };\n}\n</code></pre></div>",
        "id": 239264690,
        "sender_full_name": "Corey Wen",
        "timestamp": 1621348733
    },
    {
        "content": "<p>I've encountered that issue several times myself as well - if a rule is not defined properly there is no error message and it seems to be ignored completely.<br>\nWhat about simply trying \"answerItem.answer as answer -&gt; patientName.given = answer\" ?<br>\nOr if that doesn't work, maybe \"answerItem.value as vs -&gt; patientName.given = cast(vs,'string')\", if the mapping server you're using supports casting?</p>",
        "id": 239268970,
        "sender_full_name": "Maximilian Ossana",
        "timestamp": 1621350184
    }
]