[
    {
        "content": "<p>Hello, I'm trying to map the data-absent-reason extension on the effective Element from the IPS profile with the FHIR mapping language: <br>\n<a href=\"/user_uploads/10155/sWR9A26PDR-FOjwhrNM12ifd/Bildschirmfoto-2021-04-03-um-19.50.14.png\">Bildschirmfoto-2021-04-03-um-19.50.14.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/sWR9A26PDR-FOjwhrNM12ifd/Bildschirmfoto-2021-04-03-um-19.50.14.png\" title=\"Bildschirmfoto-2021-04-03-um-19.50.14.png\"><img src=\"/user_uploads/10155/sWR9A26PDR-FOjwhrNM12ifd/Bildschirmfoto-2021-04-03-um-19.50.14.png\"></a></div><p>I'm not really sure how exactly to do this, but here is how I tried:</p>\n<div class=\"codehilite\"><pre><span></span><code>src -&gt; tgt.effective = create(&#39;extension&#39;) as dataAbsentReason\n</code></pre></div>\n<p>Unfortunately, I am getting the following error:</p>\n<div class=\"codehilite\"><pre><span></span><code>&lt;diagnostics value=&quot;Failed to call access method: org.hl7.fhir.exceptions.FHIRException: Exception executing transform tgt.effective = create(&#39;extension&#39;) as dataAbsentReason on Rule &amp;quot;effectiveTime-width&amp;quot;: null&quot;&gt;&lt;/diagnostics&gt;\n</code></pre></div>\n<p>Does anyone know how to fill the data-absent-reason extension on effective with the FHIR Mapping Language? Thanks in advance!</p>",
        "id": 233021582,
        "sender_full_name": "Alexander Dimitrov",
        "timestamp": 1617472816
    },
    {
        "content": "<p>can you provide the map somewhere? I think you are a level to high, maybe try:</p>\n<div class=\"codehilite\"><pre><span></span><code>src -&gt; tgt.effective = create(&#39;Period&#39;) as effective, effective.extension as dataAbsenReson, ...\n</code></pre></div>",
        "id": 233026848,
        "sender_full_name": "Oliver Egger",
        "timestamp": 1617477904
    },
    {
        "content": "<p>thanks for the help <span class=\"user-mention\" data-user-id=\"191478\">@Oliver Egger</span>, I changed the rule to the following and it seems to be generating it correctly now:</p>\n<div class=\"codehilite\"><pre><span></span><code>substanceAdministration.effectiveTime as effectiveTime where (width.where(value.exists())) -&gt; tgt.effective = create(&#39;Period&#39;) as effective then {\n                effectiveTime.width as width -&gt; effective.extension as dataabsentReason, dataabsentReason.url = &#39;http://hl7.org/fhir/StructureDefinition/data-absent-reason&#39;, dataabsentReason.value = create(&#39;code&#39;) as code then {\n                    width -&gt; code.value = &#39;unknown&#39; &quot;code-value&quot;;\n                }&quot;coding&quot;;\n            }&quot;effectiveTime-width&quot;;\n</code></pre></div>\n<p>Snippet of the generated resource:</p>\n<p><a href=\"/user_uploads/10155/mqtoCqxd1WDRibfN6rOsO4PG/Bildschirmfoto-2021-04-04-um-09.40.21.png\">Bildschirmfoto-2021-04-04-um-09.40.21.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/mqtoCqxd1WDRibfN6rOsO4PG/Bildschirmfoto-2021-04-04-um-09.40.21.png\" title=\"Bildschirmfoto-2021-04-04-um-09.40.21.png\"><img src=\"/user_uploads/10155/mqtoCqxd1WDRibfN6rOsO4PG/Bildschirmfoto-2021-04-04-um-09.40.21.png\"></a></div>",
        "id": 233064003,
        "sender_full_name": "Alexander Dimitrov",
        "timestamp": 1617522101
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"367809\">@Alexander Dimitrov</span>  now you only have to decide if you want to have an effectivePeriod or an effectiveDateTime which is unknown <span aria-label=\"grinning\" class=\"emoji emoji-1f600\" role=\"img\" title=\"grinning\">:grinning:</span></p>",
        "id": 233067588,
        "sender_full_name": "Oliver Egger",
        "timestamp": 1617526788
    }
]