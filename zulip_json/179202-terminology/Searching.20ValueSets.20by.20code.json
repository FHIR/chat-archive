[
    {
        "content": "<p>If one searches ValueSet?code=... will that find ValueSets whose expansion contains a matching code, or only ValueSets whose definition includes the matching code?  If the latter, is there any syntax that would let you find the ValueSets who expansion contains a particular code?  (I am really interested in code:text, but \"code\" make for a simpler question.)</p>",
        "id": 202015311,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1593113989
    },
    {
        "content": "<p>both.  here is the expression for the code search parameter:  ValueSet.expansion.contains.code | ValueSet.compose.include.concept.code</p>",
        "id": 202016169,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1593114540
    },
    {
        "content": "<p>I saw that, but I think Value.expansion might be referring to a definitional expansion, i.e., where the definition contains an expansion.  In that case it should work, but what about the case where the ValueSet definition only contains .compose (without enumerating all of the codes)?</p>",
        "id": 202029789,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1593121881
    },
    {
        "content": "<p>I suspect this is a function that is up to the server as to if it is willing to expand every value set with the code system of interest, so should be in the capability statement. I suspect no one makes this clear yet and likely no one does such a combinatorial set of expansions. <span class=\"user-mention\" data-user-id=\"191364\">@Peter Jordan</span> <span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 202031609,
        "sender_full_name": "Robert McClure",
        "timestamp": 1593122805
    },
    {
        "content": "<p><a href=\"http://hl7.org/fhir/valueset.html#search\">http://hl7.org/fhir/valueset.html#search</a> - seems to cover it sufficiently for me</p>",
        "id": 202033156,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1593123957
    },
    {
        "content": "<p>I agree that was the intent of that section.  We haven't exercised TerminologyCapabilities much yet, and I don't think we have (yet) an explicit way in the resource to document this search behavior.</p>",
        "id": 202035130,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1593125565
    },
    {
        "content": "<p>Looking for all the ValueSets  on a Terminology Server that contain a specific code might be akin to searching for a needle in a haystack - particularly if the Code System (reference parameter) is not defined. However, it would be informative to hear more about the use case, assuming that this isn't purely an academic question? My Server implements a parameter for the $lookup operation for the NZ Edition of SNOMED CT that returns RefSet (effectively ValueSet) membership. </p>\n<p>Regarding what's possible to declare in CapabilityStatement or TerminologyCapabilities, I don't see a way to express that some parameters (e.g. code) are only supported in combination with others (e.g. reference) for searching on ValueSets.</p>",
        "id": 202035653,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1593125991
    },
    {
        "content": "<p>The use case would be to search for LOINC answer lists based on certain words in answers, so that one could re-use the list in a new question.  (That would require code:text, not code).  I am not convinced that this is useful thing to do; it might be better to search on LOINC question text and then pull the associated list.  The \"search the answers\" approach was suggested to me, and I was trying to see if it was possible.</p>",
        "id": 202040208,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1593130166
    }
]