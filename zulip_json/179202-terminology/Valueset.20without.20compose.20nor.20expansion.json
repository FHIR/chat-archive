[
    {
        "content": "<p>When I test _summary on some FHIR Servers, I noticed that the Value sets in the result bundle don't have compose nor expansion. According to 4.8.4.2 Constrains Rule vsd-5, \"Value set SHALL contain at least one of a compose or an expansion element (expression : compose.exists() or expansion.exists()). Should constrains rules apply to summary search also?</p>",
        "id": 153974312,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1531143219
    },
    {
        "content": "<p>I have checked three servers: hapi, onto and test.fhir. None of them returns compose/expansion component with searching with ValueSet?_summary=true.<br>\nThe constrain VSD-5 could cause problem for search with large number of extensional value sets.<br>\nIs there anywhere in the FHIR spec says that constrain rule does NOT apply to _summary search? If not, I would suggest to remove VSD-5.<br>\n<span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 153974636,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1531315485
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191506\">@Yunwei Wang</span> expansion is not included in a summary</p>",
        "id": 153974807,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1531348758
    },
    {
        "content": "<p>VSD-5 is a problem for _summary = true</p>",
        "id": 153974808,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1531348786
    },
    {
        "content": "<p>do you want to make a tak to remove VSD-5?</p>",
        "id": 153974809,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1531348801
    },
    {
        "content": "<p>Wondering if a resource needs to pass invariant validations when returned from a summary call?<br>\nI can imagine many profiles/rules where this would not be the case.<br>\nAnd I don't see the problem with that.</p>",
        "id": 153974826,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1531356933
    },
    {
        "content": "<p>The caller has asked for the _summary (or elements) and they are told that they are subsetted...</p>",
        "id": 153974827,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1531356967
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191367\">@Brian Postlethwaite</span> If the community agree that _summary result doesn't need to pass invariant validation, then this need to be specified somewhere in the spec. Since the current spec doesn't make such exception, all resources generated from _summary call shall be valid.</p>",
        "id": 153974840,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1531360262
    },
    {
        "content": "<p>Agree with you there Yunwie, the _summary does include the meta profiles, which would then permit the resource to indicate that it claims conforms to the provided profile, however it might not pass.</p>",
        "id": 153974841,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1531361053
    },
    {
        "content": "<p>_summary of resource still has to be a valid resource. Tooling checks cardinalities, but can't check constraints like this one</p>",
        "id": 153975307,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1531699930
    },
    {
        "content": "<p>Or really most profile constraints, and profile that introduces a minimum cardinality of &gt;=1 will not be done... and most invariants.</p>",
        "id": 153975349,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1531708444
    },
    {
        "content": "<p>The .net serializer wouldn't know to include those props, and expect that the java RI would be the same.</p>",
        "id": 153975351,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1531708551
    },
    {
        "content": "<p>(or slicing would be tough to check with minimal content)</p>",
        "id": 153975352,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1531708571
    },
    {
        "content": "<p>Should this issue really be taken back to the main implementer chat?<br>\n(as isn't really a terminology specific issue?)</p>",
        "id": 153975353,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1531708616
    },
    {
        "content": "<p>the tooling doesn't check profiles, no. It's up to the profile author to decide whether allowing summaries is relevant for the profile</p>",
        "id": 153975354,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1531709618
    },
    {
        "content": "<p>FWIW Ontoserver gets its _summary, _elements, and paging (_count) behaviour from the HAPI framework</p>",
        "id": 153975594,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1531779393
    },
    {
        "content": "<p>So does the profil author also need to decide something about _elements and validity?  I would think not, but what is the line between _summary and _elements?</p>",
        "id": 153975597,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1531779625
    }
]