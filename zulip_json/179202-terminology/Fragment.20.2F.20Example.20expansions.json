[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191343\">@Michael Lawley</span> what does OntoServer do if it gets a request for an expansion, and the underlying code system definition has content=fragment, or content=example ?</p>",
        "id": 261736888,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1637116414
    },
    {
        "content": "<p>or a validate-code?</p>",
        "id": 261737600,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1637117254
    },
    {
        "content": "<p>here's what I'm doing at present, or going to do:</p>",
        "id": 261737604,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1637117266
    },
    {
        "content": "<p>$validate-code:</p>\n<ul>\n<li>if content &lt; complete, always return true</li>\n<li>if the code is not found in the incomplete code system, include cause = not found in the parameters</li>\n<li>if the code is not found, or if the code system is an example, include the message <code>The system {{system}} was found but did not contain enough information to properly validate the code (mode = {{mode}})</code></li>\n</ul>",
        "id": 261737739,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1637117406
    },
    {
        "content": "<p>$expand:</p>\n<ul>\n<li>by default, return an error saying that one  (or more) codesystem is incomplete</li>\n<li>if the client passes a (as yet undefined) parameter saying it's ok with it, process the expansion as per normal, and mark the example and fragment code systems in the parameters</li>\n</ul>",
        "id": 261737784,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1637117497
    },
    {
        "content": "<p>also <span class=\"user-mention\" data-user-id=\"191364\">@Peter Jordan</span> <span class=\"user-mention\" data-user-id=\"191375\">@Alexander Henket</span> and <span class=\"user-mention\" data-user-id=\"195036\">@Carol Macumber</span>, what do your servers do?</p>",
        "id": 261738691,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1637118426
    },
    {
        "content": "<p>I'm now using incomplete-ok=true for expansions. Case in point: <a href=\"https://terminology.hl7.org/ValueSet-service-category.html\">https://terminology.hl7.org/ValueSet-service-category.html</a> - that looks like a normal expansion, but see this:</p>\n<blockquote>\n<p>Content:  Example: A few representative concepts are included in the code system resource</p>\n</blockquote>\n<p>from <a href=\"https://terminology.hl7.org/CodeSystem-service-category.html\">https://terminology.hl7.org/CodeSystem-service-category.html</a></p>",
        "id": 261741214,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1637121763
    },
    {
        "content": "<p>I want the expansion to be clear about this</p>",
        "id": 261741217,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1637121774
    },
    {
        "content": "<p>On this subject, I'm going to make a rule in all HL7 authored code systems: they SHALL have a content element. Let me know if anyone thinks that's a problem</p>",
        "id": 261741915,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1637122681
    },
    {
        "content": "<p><a href=\"https://jira.hl7.org/browse/FHIR-34326\">https://jira.hl7.org/browse/FHIR-34326</a></p>",
        "id": 261742170,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1637123025
    },
    {
        "content": "<p>Ontoserver allows expansion / validation wrt content &lt; complete.  This is useful for, for example, UCUM.<br>\nWe don't include any indicators in such an expansion that reference the potential incompleteness; I think we need to address this (item 2 of <code>$expand</code> above), but I would be reluctant to error by default (except maybe for <code>example</code>).<br>\nAnother issue is how to handle multiple CodeSystem instances (same version) that have varying values of content &lt; complete.  For example two or more different fragments.</p>",
        "id": 261745869,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1637127614
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179202-terminology/topic/Fragment.20.2F.20Example.20expansions/near/261741915\">said</a>:</p>\n<blockquote>\n<p>On this subject, I'm going to make a rule in all HL7 authored code systems: they SHALL have a content element. Let me know if anyone thinks that's a problem</p>\n</blockquote>\n<p>Not quite sure what this means as CodeSystem.content is a required element. Do you mean that content should be provided in the concept element (i.e. the CodeSystem.content code should never be 'not-present' for HL7 authored code systems)?</p>",
        "id": 261746445,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1637128429
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191364\">@Peter Jordan</span> is this in the correct stream?</p>",
        "id": 261748951,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1637131740
    },
    {
        "content": "<p>wow you're right. I forget to check, because it wasn't being an error. Obviously I'll have to go checking why I wasn't getting that as an error</p>",
        "id": 261752557,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1637135915
    },
    {
        "content": "<p>(and it wasn't really the right stream, for any confused readers)</p>",
        "id": 261752588,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1637135947
    },
    {
        "content": "<blockquote>\n<p>Ontoserver allows expansion / validation wrt content &lt; complete. This is useful for, for example, UCUM.</p>\n</blockquote>\n<p>But it's also dangerous.</p>",
        "id": 261752781,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1637136051
    },
    {
        "content": "<p>we can at least agree that we want to indicate the use of a fragment or an example code system in the expansion, yes?</p>",
        "id": 261752811,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1637136076
    },
    {
        "content": "<p>also, wrt UCUM, I do not think that UCUM is a fragment given how I support it</p>",
        "id": 261753534,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1637136701
    },
    {
        "content": "<p>No, but the way we currently support it, it is a fragment.</p>",
        "id": 261864558,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1637190992
    },
    {
        "content": "<p>We have two servers: ART-DECOR and NTS. The latter being Ontoserver based. ART-DECOR is not handling fragments at present but that is mainly because the nature of the internal codesystem format does not handle incompleteness or example status. This would change once we do. I'm keeping an eye on this thread.</p>",
        "id": 262345146,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1637599448
    }
]