[
    {
        "content": "<p>I would like to document in a ValueSet which codes are coming from the SNOMED CT GPS (Global Patient Reference Set). I intended to use a different include system for the SNOMED CT GPS codes. For both <a href=\"http://snomed.info/sct?fhir_vs=refset/787778008\" title=\"http://snomed.info/sct?fhir_vs=refset/787778008\">http://snomed.info/sct?fhir_vs=refset/787778008</a> <a href=\"#narrow/stream/179166-implementers/topic/SNOMED.20Global.20Patient.20Set.20version.20URI\" title=\"#narrow/stream/179166-implementers/topic/SNOMED.20Global.20Patient.20Set.20version.20URI\">source</a> or <a href=\"http://snomed.info/valueSet/GPS\" title=\"http://snomed.info/valueSet/GPS\">http://snomed.info/valueSet/GPS</a> <a href=\"https://confluence.ihtsdotools.org/pages/viewpage.action?pageId=96800698\" title=\"https://confluence.ihtsdotools.org/pages/viewpage.action?pageId=96800698\">source</a> the IGPublisher responds with an error:  Unable to provide support for code system ...</p>\n<p>1.) Is this the right approach to reference the GPS ValueSet or should it be done differently?<br>\n2.) With which canonical can I reference the GPS ValueSet?</p>\n<p>For now I just use <a href=\"http://hl7.org/fhir/StructureDefinition/valueset-system\" title=\"http://hl7.org/fhir/StructureDefinition/valueset-system\">http://hl7.org/fhir/StructureDefinition/valueset-system</a> to document, example is up <a href=\"http://build.fhir.org/ig/hl7ch/covid-19-prom/branches/master/ValueSet-covid-19-prom.html\" title=\"http://build.fhir.org/ig/hl7ch/covid-19-prom/branches/master/ValueSet-covid-19-prom.html\">here</a>, but I would prefer to have it validated with the terminology server.</p>",
        "id": 196219699,
        "sender_full_name": "Oliver Egger",
        "timestamp": 1588616390
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191478\">@Oliver Egger</span> . It would be informative to understand your use case for indicating which codes in a ValueSet of SCT Concepts are also members of the GPS RefSet. For example, is it because the ValueSet will be used by non-SNOMED members?  AFAIA, the agreed canonical URL for the GPS is <a href=\"http://snomed.info/valueSet/gps\" title=\"http://snomed.info/valueSet/gps\">http://snomed.info/valueSet/gps</a> (n.b. it's deliberately not a FHIR-specific uri); however, I don't know if this is currently recognised by the IG Publisher.</p>",
        "id": 196239996,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1588626279
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191364\">@Peter Jordan</span> I'd be happy to have a validator test case submitted to make sure it is recognised (that is, a profile using the value set, and 2 examples, one valid and one not). </p>\n<p><span class=\"user-mention\" data-user-id=\"191478\">@Oliver Egger</span> the current example looks correct. the GPS is a value set, not a different code system. It seems to me that you want a different copy right statement there instead, something like </p>\n<p>\"This value set includes content from the Global Patient set (GPS) sub-set of SNOMED Clinical Terms® (SNOMED CT®) which is copyright of the International Health Terminology Standards Development Organisation (IHTSDO). The Global Patient Set is produced by SNOMED International and is licensed under the Creative Commons Attribution 4.0 International License. The GPS is made available to users at no cost. For more information contact <a href=\"http://www.snomed.org/snomed-ct/getsnomed-ct\" title=\"http://www.snomed.org/snomed-ct/getsnomed-ct\">http://www.snomed.org/snomed-ct/getsnomed-ct</a> or <a href=\"mailto:info@snomed.org\" title=\"mailto:info@snomed.org\">info@snomed.org</a>.\"</p>",
        "id": 196242554,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588627893
    },
    {
        "content": "<p>if you wanted to publish a value set and ensure that the contents are only from the GPS, then you would do this:</p>\n<div class=\"codehilite\"><pre><span></span><code>    <span class=\"s2\">&quot;compose&quot;</span> <span class=\"err\">:</span> <span class=\"p\">{</span>\n      <span class=\"nt\">&quot;include&quot;</span><span class=\"p\">:</span> <span class=\"p\">[{</span>\n        <span class=\"nt\">&quot;system&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;http://snomed.info/sct&quot;</span><span class=\"p\">,</span>\n        <span class=\"nt\">&quot;concept&quot;</span> <span class=\"p\">:</span> <span class=\"p\">[{</span>\n          <span class=\"nt\">&quot;code&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;49727002&quot;</span>\n        <span class=\"p\">},{</span>\n          <span class=\"nt\">&quot;code&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;84229001&quot;</span>\n        <span class=\"p\">}],</span>\n        <span class=\"nt\">&quot;valueSet&quot;</span> <span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">&quot;http://snomed.info/valueSet/gps&quot;</span><span class=\"p\">]</span>\n      <span class=\"p\">}</span>\n    <span class=\"err\">}</span>\n</code></pre></div>",
        "id": 196242974,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588628163
    },
    {
        "content": "<p>if one of the listed codes is not in the GPS, it will not be included in the expansion</p>",
        "id": 196243004,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588628180
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191478\">@Oliver Egger</span> SNOMED International has created the refset identifier for GPS, but (at least so far) they haven't actually released it as a refset yet.  There is ongoing discussion about that.  I don't think that the Snowstorm server supports that (yet)?  Are you sure if the GPS value set url is official now, <span class=\"user-mention\" data-user-id=\"191364\">@Peter Jordan</span>?  We can inquire further about all of this on the SNOMED on FHIR call tomorrow.</p>",
        "id": 196243221,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1588628294
    },
    {
        "content": "<p>In the meantime, we've defined FHIR value sets for the entire GPS (as well as several subsets) in the IPS IG <a href=\"http://build.fhir.org/ig/HL7/fhir-ips/branches/master/ValueSet-snomed-intl-gps.html\" title=\"http://build.fhir.org/ig/HL7/fhir-ips/branches/master/ValueSet-snomed-intl-gps.html\">here</a> and <a href=\"http://build.fhir.org/ig/HL7/fhir-ips/branches/master/terminology.html\" title=\"http://build.fhir.org/ig/HL7/fhir-ips/branches/master/terminology.html\">here</a>.</p>",
        "id": 196243474,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1588628449
    },
    {
        "content": "<p>If we are able to define the GPS value set using the reset implicit value set syntax for the IPS IG build with the <a href=\"http://tx.fhir.org\" title=\"http://tx.fhir.org\">tx.fhir.org</a> server, we would prefer to do that - but in the meantime we've done what I've shared above.</p>",
        "id": 196244309,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1588629019
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> I'm not sure if that GPS value set url is official but, as you say, we can ask that question on tomorrow's call. BTW, not sure how I missed this, but I've just noticed  -from those IPS IG links - that 7 concepts, relating to the Coronavirus, were added to the IPS  value set in  March. Were these also added to the GPS value set as well?</p>",
        "id": 196248597,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1588631978
    },
    {
        "content": "<p>Yes, pretty much.  They've stated that those 7 coronavirus concepts in the March 9 interim release will be part of the upcoming GPS release, and that they can be used as GPS concepts now.</p>",
        "id": 196256892,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1588639067
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191364\">Peter Jordan</span> <a href=\"#narrow/stream/179202-terminology/topic/Indicating.20in.20a.20ValueSet.20.20SNOMED.20CT.20GPS.20.20Codes/near/196239996\" title=\"#narrow/stream/179202-terminology/topic/Indicating.20in.20a.20ValueSet.20.20SNOMED.20CT.20GPS.20.20Codes/near/196239996\">said</a>:</p>\n<blockquote>\n<p>Hi <span class=\"user-mention silent\" data-user-id=\"191478\">Oliver Egger</span> . It would be informative to understand your use case for indicating which codes in a ValueSet of SCT Concepts are also members of the GPS RefSet. For example, is it because the ValueSet will be used by non-SNOMED members? </p>\n</blockquote>\n<p>The ValueSet is currently used to describe the symptoms for the Corona Science App in Switzerland. Switzerland has a SNOMED CT license. Their are currently talks to internationalise the Corona Science App and for that we wan't to document  which codes are in the GPS and which ones are not. I think (but I'm not a lawyer) that a version for another country which has no SNOMED CT licenses could not use the non GPS codes. At the moment I was just looking how to document it in the Implementation Guide, that we have not yet another Excel Sheet around documenting which codes are from where <span aria-label=\"grinning\" class=\"emoji emoji-1f600\" role=\"img\" title=\"grinning\">:grinning:</span></p>",
        "id": 196276200,
        "sender_full_name": "Oliver Egger",
        "timestamp": 1588664600
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179202-terminology/topic/Indicating.20in.20a.20ValueSet.20.20SNOMED.20CT.20GPS.20.20Codes/near/196243004\" title=\"#narrow/stream/179202-terminology/topic/Indicating.20in.20a.20ValueSet.20.20SNOMED.20CT.20GPS.20.20Codes/near/196243004\">said</a>:</p>\n<blockquote>\n<p>if one of the listed codes is not in the GPS, it will not be included in the expansion</p>\n</blockquote>\n<p>Thanks a lot for the input. I was not aware that I can use the valueSet in this way,  now so obvious <span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span></p>",
        "id": 196276534,
        "sender_full_name": "Oliver Egger",
        "timestamp": 1588664905
    },
    {
        "content": "<p>Following today's SNOMED on FHIR call, the  url for the GPS Value Set on my Server is now <a href=\"http://snomed.info/id/787778008\" title=\"http://snomed.info/id/787778008\">http://snomed.info/id/787778008</a>  There were also discussions on using the implicit value set syntax, but that is problematic for SNOMED Member Countries until the GPS becomes an ófficial' SNOMED RefSet  and not feasible at all for non-members.</p>",
        "id": 196382224,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1588722395
    },
    {
        "content": "<p>can you explain this a little more please</p>",
        "id": 196384721,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588724288
    },
    {
        "content": "<p>At present, the GPS isn't distributed in RF2 format. An implementation in a SNOMED Member Country might transpose it into that format (using SCTID 787778008 which is now in the International Edition) and this would make it accessible, via a FHIR API, using the implicit ValueSet Syntax - <a href=\"http://snomed.info/sct?fhir_vs=refset/[sctid]\" title=\"http://snomed.info/sct?fhir_vs=refset/[sctid]\">http://snomed.info/sct?fhir_vs=refset/[sctid]</a>.  </p>\n<p>OTOH, an implementation in a non-member country has to treat the GPS as an extensional value set using the elements in the distribution format (id, active, FSN &amp; preferred term) - it has no mechanism for transposing this to a Reference Set, i.e. no concept, description or relationship objects.</p>",
        "id": 196385968,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1588725250
    },
    {
        "content": "<p>why does that dictate the identification?</p>",
        "id": 196385998,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588725285
    },
    {
        "content": "<p>The identification has to be constant across member and non-member countries and is not specific to FHIR.</p>",
        "id": 196386151,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1588725411
    },
    {
        "content": "<p>well, I agree with that but I still don't know why a technical representation issue relates to the identification. I'm at a disadvantage, since I don't know where the minutes are, but now I'm just confused - is there a formal decision?</p>",
        "id": 196386191,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588725441
    },
    {
        "content": "<p><a href=\"https://confluence.ihtsdotools.org/pages/viewpage.action?pageId=106707563\" title=\"https://confluence.ihtsdotools.org/pages/viewpage.action?pageId=106707563\">https://confluence.ihtsdotools.org/pages/viewpage.action?pageId=106707563</a>   No formal decision.</p>",
        "id": 196386415,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1588725617
    },
    {
        "content": "<p>they don't help much. So let's see if I can rephrase this decision:</p>\n<ul>\n<li>we can't use the usual way of identifying a reference set since people who can't use reference sets can't build the GPS as a reference set.</li>\n</ul>",
        "id": 196386503,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588725718
    },
    {
        "content": "<p>Yes, it was not a formal decision, but it was at least an informed opinion with significant SNOMED staff input.</p>",
        "id": 196386505,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1588725721
    },
    {
        "content": "<p>huh?</p>",
        "id": 196386506,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588725721
    },
    {
        "content": "<p>that decision doesn't make sense to me</p>",
        "id": 196386559,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588725738
    },
    {
        "content": "<p>I'm not sure that was actually the conclusion.  We were just asking about the preferred identification for the GPS value set.  But my recollection is that we didn't explicitly say where it could (or couldn't) be used as the canonical url.  The discussion in my opinion didn't quite squarely address that point.  But I'm not even sure what set of alternatives we are discussion here - Peter mentioned <a href=\"http://snomed.info/id/787778008\" title=\"http://snomed.info/id/787778008\">http://snomed.info/id/787778008</a> as the recommended one.</p>",
        "id": 196386783,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1588725954
    },
    {
        "content": "<p>Well, that's at least the 3rd version of a Constant value for the url that I've implemented. :)</p>",
        "id": 196387117,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1588726351
    },
    {
        "content": "<p>it has a refset associated with it, right?</p>",
        "id": 196388387,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588727817
    },
    {
        "content": "<p>That's part of the issue.  It has a refset id, but (so far) does not have a published (or otherwise available) refset.  Up until now they chose not to publish the refset - but they are reconsidering that.</p>",
        "id": 196388491,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1588727932
    },
    {
        "content": "<p>but it's not like they can use it for anything else</p>",
        "id": 196388911,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588728485
    },
    {
        "content": "<p>Not sure if I know what you mean by that - but no, they can't.  Right now it's an id for what I guess you could call a \"suppressed\" refset - the contents of which are obtainable only from a different (csv) file distribution, and without the full refset metadata.</p>",
        "id": 196389079,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1588728799
    },
    {
        "content": "<p>can still be a valid identifying refset then</p>",
        "id": 196389105,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588728834
    },
    {
        "content": "<p>Yes, I agree it can - as in  <a href=\"http://snomed.info/id/787778008\" title=\"http://snomed.info/id/787778008\">http://snomed.info/id/787778008</a>.</p>",
        "id": 196389159,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1588728894
    },
    {
        "content": "<p>A subtype of 446609009 |Simple type reference set (foundation metadata concept)|.</p>",
        "id": 196389212,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1588728982
    },
    {
        "content": "<p>why not  <a href=\"http://snomed.info/sct?fhir_vs=refset/787778008\" title=\"http://snomed.info/sct?fhir_vs=refset/787778008\">http://snomed.info/sct?fhir_vs=refset/787778008</a> ?</p>",
        "id": 196389302,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588729179
    },
    {
        "content": "<p>The main reason would be that since the refset isn't published in the SNOMED CT distribution, that would mean that in the \"normal\" case when you use that url for the value set you will get nothing returned when you expand it.  However, a particular server could choose to do some special behind the scenes \"magic\" and make that implicit value set syntax work, which would be perfectly acceptable, but that wouldn't happen \"out of the box\".</p>",
        "id": 196389571,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1588729585
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179202-terminology/topic/Indicating.20in.20a.20ValueSet.20.20SNOMED.20CT.20GPS.20.20Codes/near/196389302\" title=\"#narrow/stream/179202-terminology/topic/Indicating.20in.20a.20ValueSet.20.20SNOMED.20CT.20GPS.20.20Codes/near/196389302\">said</a>:</p>\n<blockquote>\n<p>why not  <a href=\"http://snomed.info/sct?fhir_vs=refset/787778008\" title=\"http://snomed.info/sct?fhir_vs=refset/787778008\">http://snomed.info/sct?fhir_vs=refset/787778008</a> ?</p>\n</blockquote>\n<p>That will only work for an implementation in a SNOMED member country.</p>",
        "id": 196389575,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1588729598
    },
    {
        "content": "<p>In a world where the refset is not published, the most practical approach might be something like <code>http://snomed.info/valueSet/gps</code> that has <code>compose.include.valueSet =  http://snomed.info/sct?fhir_vs=refset/787778008</code> and possibly an explicit expansion with the actual codes listed.</p>",
        "id": 196389733,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1588729856
    },
    {
        "content": "<blockquote>\n<p>That will only work for an implementation in a SNOMED member country.</p>\n</blockquote>\n<p>why? That's the logic I don't follow</p>",
        "id": 196389741,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588729890
    },
    {
        "content": "<p>if anything, I think the argument shows that the reverse is true</p>",
        "id": 196389791,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588729934
    },
    {
        "content": "<blockquote>\n<p>why not <a href=\"http://snomed.info/sct?fhir_vs=refset/787778008\" title=\"http://snomed.info/sct?fhir_vs=refset/787778008\">http://snomed.info/sct?fhir_vs=refset/787778008</a> ?</p>\n</blockquote>\n<p>will not work for us (unless we write special-case code) because there is no refset to provide the data</p>",
        "id": 196389814,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1588730009
    },
    {
        "content": "<p>To fully implement the implicit value set syntax the server obviously needs access to the full SNOMED distribution, and when you provide the content to a SNOMED non-member you can only provide what is included in the GPS distribution (no synonyms, relationships/properties on $lookup, etc.).</p>",
        "id": 196389879,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1588730049
    },
    {
        "content": "<blockquote>\n<p>unless we write special-case code</p>\n</blockquote>\n<p>but you have to do that anyway</p>",
        "id": 196389898,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588730110
    },
    {
        "content": "<blockquote>\n<p>when you provide the content to a SNOMED non-member you can only provide what is included in the GPS distribution</p>\n</blockquote>\n<p>And what has this got to do with the identification of the value set?</p>",
        "id": 196389902,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588730132
    },
    {
        "content": "<p>For us, implicit URIs are protected (you can't define an explicit VS using and implicit URI), so for these sorts of cases we need some way to get special content in.<br>\nUsing a URI like <a href=\"http://snomed.info/valueSet/gps\" title=\"http://snomed.info/valueSet/gps\">http://snomed.info/valueSet/gps</a> would be far easier to support.</p>",
        "id": 196389966,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1588730263
    },
    {
        "content": "<p>i.e., via data not code</p>",
        "id": 196390020,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1588730351
    },
    {
        "content": "<p>Yes, you beat me to it, but I was going to also say that what data is returned by $lookup isn't related to the issue of value set identification.  I'm not sure that I know what \"implicit URIs are protected\" means?</p>",
        "id": 196390237,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1588730673
    },
    {
        "content": "<p>It means that if you try to create a ValueSet on Ontoserver with <code>ValueSet.url</code> = to an implicit URI, then we have a business rule that will reject it.</p>",
        "id": 196390339,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1588730857
    },
    {
        "content": "<p>OK, I suppose that's reasonable.</p>",
        "id": 196390438,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1588731001
    },
    {
        "content": "<p>What we could possibly do it unprotect this one specific implicit URI to allow for an explicit ValueSet</p>",
        "id": 196390810,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1588731464
    },
    {
        "content": "<p>So what about using the implicit value set syntax in the \"normal\" way to reference the GPS value set as <code>http://snomed.info/sct?fhir_vs=refset/787778008</code>?  It's seeming to me that this should be fine (assuming that the server implementation deals with obtaining the content outside of the normal SNOMED CT distribution).</p>",
        "id": 196390813,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1588731473
    },
    {
        "content": "<p>Why does the ValueSet for GPS need to be explicit?</p>",
        "id": 196390879,
        "sender_full_name": "Jim Steel",
        "timestamp": 1588731535
    },
    {
        "content": "<p>It probably doesn't.  It just may have seemed that it would most likely be done that way (particularly because the content is obtained separately from the SNOMED CT distribution).</p>",
        "id": 196390997,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1588731660
    },
    {
        "content": "<p>Seems like it should be distributed as a CodeSystem fragment, since that's what it is</p>",
        "id": 196391011,
        "sender_full_name": "Jim Steel",
        "timestamp": 1588731682
    },
    {
        "content": "<p>(or a refset within a full distribution, eventually - seems crazy not to do that as well)</p>",
        "id": 196391022,
        "sender_full_name": "Jim Steel",
        "timestamp": 1588731722
    },
    {
        "content": "<p>it's a value set, not a code system fragment.</p>",
        "id": 196391066,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588731731
    },
    {
        "content": "<p>Why isn't it a CodeSystem fragment?</p>",
        "id": 196391071,
        "sender_full_name": "Jim Steel",
        "timestamp": 1588731743
    },
    {
        "content": "<p>(I mean, I agree it also exists as a ValueSet)</p>",
        "id": 196391086,
        "sender_full_name": "Jim Steel",
        "timestamp": 1588731793
    },
    {
        "content": "<p>I agree it could be distributed as a code system fragment.  But I'm not sure why that would be useful.  The need for it is as a value set.</p>",
        "id": 196391093,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1588731817
    },
    {
        "content": "<p>it doens't define any new properties or displays. just a set of concepts and displays that are in a particular subset</p>",
        "id": 196391137,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588731847
    },
    {
        "content": "<p>It's potentially useful as a fragment because other (simple) ValueSets could be expanded relative to it</p>",
        "id": 196391156,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1588731873
    },
    {
        "content": "<p>If I'm in a non-SNOMED country, I feel like I'd want it as a CodeSystem fragment. I feel like there's an assumption (perhaps unwritten) that there is always a CodeSystem resource behind a ValueSet import</p>",
        "id": 196391171,
        "sender_full_name": "Jim Steel",
        "timestamp": 1588731906
    },
    {
        "content": "<p>Yes.  The only use I can see for it as a fragment is if you don't have a license to access the full distribution.</p>",
        "id": 196391222,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1588731972
    },
    {
        "content": "<p>There is always a code system, but not necessarily (and quite often not) a CodeSystem resource.</p>",
        "id": 196391264,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1588732060
    },
    {
        "content": "<p>Sounds like we should fix on  <a href=\"http://snomed.info/valueSet/gps\" title=\"http://snomed.info/valueSet/gps\">http://snomed.info/valueSet/gps</a>, and go ahead and publish a value set and a code system fragement. <span class=\"user-mention\" data-user-id=\"192993\">@Peter Williams</span> what's the chance that SI could agree to that? (so <em>we</em> should publish thos resources in the interim until SI is ready to do it)</p>",
        "id": 196391975,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588733227
    },
    {
        "content": "<p>Actually, I don't believe that a Member Country can implement the GPS as a Reference Set unless it uses the corresponding version of the International Edition with the US English language reference set. Any other edition/version/language reference set combination would produce different preferred terms. Therefore, I'm going back to <a href=\"http://snomed.info/valueSet/gps\" title=\"http://snomed.info/valueSet/gps\">http://snomed.info/valueSet/gps</a> and note, that while typing this, Grahame is now proposing that.</p>",
        "id": 196392026,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1588733293
    },
    {
        "content": "<p>Sorry that you have to keep changing it. :(  I came away from our SNOMED on FHIR call discussion a little unclear on this - have we documented (officially) the use of <a href=\"http://snomed.info/valueSet/gps\" title=\"http://snomed.info/valueSet/gps\">http://snomed.info/valueSet/gps</a> for referencing the GPS value set?</p>",
        "id": 196392310,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1588733776
    },
    {
        "content": "<p>is there a reason/precedent for <code>valueSet</code> as opposed to <code>ValueSet</code> or <code>valueset</code>?</p>",
        "id": 196392319,
        "sender_full_name": "Jim Steel",
        "timestamp": 1588733830
    },
    {
        "content": "<p>uppercase would be better. I copied Michael without noticing that</p>",
        "id": 196392359,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588733884
    },
    {
        "content": "<p>No problem changing a 'constant' :) I believe that the thinking was not to use 'ValueSet' as it's not a FHIR-specific identifier. FWIW, my vote would be for 'valueset' .</p>",
        "id": 196392429,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1588734010
    },
    {
        "content": "<p>That was brought up in earlier discussion, but I don't recall if there was a clear rationale for <code>valueSet</code>.  But one reason for not using <code>ValueSet</code> may be (and I think this was discussed?) that it is <strong>not</strong> specifically or necessarily referring to a FHIR ValueSet resource.</p>",
        "id": 196392435,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1588734029
    },
    {
        "content": "<p>As Peter just also said.</p>",
        "id": 196392440,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1588734039
    },
    {
        "content": "<p>I think that's short sighted. I agree that the identifier will find use outside FHIR, but that's no reason to clutch defeat from the jaws of victory and use valueSet or valueset instead of ValueSet</p>",
        "id": 196392456,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588734064
    },
    {
        "content": "<p>Your point makes sense, but I'm not sure about your conclusion - why is <code>ValueSet</code> a victory?</p>",
        "id": 196392486,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1588734122
    },
    {
        "content": "<p>I do agree that the use of that convention for <code>ValueSet</code> doesn't necessarily imply (and isn't limited to) the use of FHIR.</p>",
        "id": 196392610,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1588734343
    },
    {
        "content": "<p>because if SI ever want to make http//snomed.info to be a FHIR end-point, which is what we usually do for IGs like this, then <a href=\"http://snomed.info/ValueSet/gps\" title=\"http://snomed.info/ValueSet/gps\">http://snomed.info/ValueSet/gps</a> is valid and ready to go. I woouldn't argue for this outcome if it wasn't a small change, since that's speculative, but really, <a href=\"http://snomed.info/valueSet/gps\" title=\"http://snomed.info/valueSet/gps\">http://snomed.info/valueSet/gps</a> vs <a href=\"http://snomed.info/ValueSet/gps\" title=\"http://snomed.info/ValueSet/gps\">http://snomed.info/ValueSet/gps</a> - just get it right for the future in case</p>",
        "id": 196392676,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588734438
    },
    {
        "content": "<p>Whether it has to do with being \"right\" or not, I agree it probably makes sense to be set up and prepared for that possibility.</p>",
        "id": 196392963,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1588734936
    },
    {
        "content": "<p>SI will put in a redirect to the FHIR server anyway</p>",
        "id": 196587935,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1588741025
    },
    {
        "content": "<p>valueSet follows SI conventions of lowerCamelCase</p>",
        "id": 196587944,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1588741051
    },
    {
        "content": "<p>I am quiet happy with that because it is a URI not a URL.  IMO the valid use-case for treating a URI as a URL is for people and to return a human-oriented result, not a machine-readable one.</p>",
        "id": 196588003,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1588741154
    },
    {
        "content": "<p>Apologies for waffling, but it sounds like we should follow the SI convention for this.</p>",
        "id": 196703311,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1588802074
    },
    {
        "content": "<p>Hi -- is this expected to work for limiting to the subset of SNOMED codes included in GPS?</p>\n<div class=\"codehilite\"><pre><span></span><code>* include codes from system SCT and valueset http://snomed.info/valueSet/gps where concept descendent-of #441742003\n</code></pre></div>\n<p>I'm getting this error when I try it:</p>\n<blockquote>\n<p>Error from server: Unable to find value set \"<a href=\"http://snomed.info/valueSet/gps\">http://snomed.info/valueSet/gps</a>\"</p>\n</blockquote>",
        "id": 246399300,
        "sender_full_name": "Max Masnick",
        "timestamp": 1626642660
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"322501\">@Max Masnick</span> The <a href=\"http://tx.fhir.org\">tx.fhir.org</a> terminology server doesn't know of the GPS value set at that url address.  Try using the copy at this url, instead: <code>http://terminology.hl7.org/ValueSet/snomed-intl-gps</code>  The value set needs to be known and available on the terminology server for that type of value set definition to be expanded successfully so it can be used by the IG publisher.  This should work (let me know if it <strong>doesn't</strong> for any reason).</p>",
        "id": 246411357,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1626662729
    },
    {
        "content": "<p>When I've done it I've used the <code>valueset</code> keyword first, before <code>system</code> and the <code>where</code> clause, but I expect that the order shouldn't matter (if the order actually does turn out to matter, that would be good to know).</p>",
        "id": 246411489,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1626662999
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> that URL doesn't work for me and TTBOMK the ValueSet.url value that was agreed for the GPS is <a href=\"http://snomed.info/valueSet/gps\">http://snomed.info/valueSet/gps</a> (I recall that it was deliberately not FHIR-specific).</p>",
        "id": 246419336,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1626674936
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191364\">@Peter Jordan</span>  Whether that url \"works\" depends on how and where you are using it.  You can access the value set on <a href=\"http://tx.fhir.org\">tx.fhir.org</a> here:</p>\n<div class=\"codehilite\"><pre><span></span><code>http://tx.fhir.org/r4/ValueSet?url=http://terminology.hl7.org/ValueSet/snomed-intl-gps\n</code></pre></div>\n<p>And in the THO CI build (not yet the official release) here:</p>\n<div class=\"codehilite\"><pre><span></span><code>http://build.fhir.org/ig/HL7/UTG/ValueSet-snomed-intl-gps.html\n</code></pre></div>\n<p>The FHIR IG Publisher is able to use it.  We need to keep in mind that there is only <strong>one</strong> SNOMED CT code system and therefore also only <strong>one</strong> GPS (available as a SNOMED CT refset or the separate publication), but there is not any expectation or agreement (that I can think of) about having only one value set that represents that content in FHIR.  In fact, that really wouldn't make sense - since there is more than one way to define (in ValueSet.compose) the GPS value set, each of those ways <strong>must</strong> have a different url.  The <code>http://snomed.info/valueSet/GPS</code> url identifies the GPS <a href=\"https://snowstorm-alpha.ihtsdotools.org/fhir/ValueSet?url=http://snomed.info/valueSet/GPS&amp;_pretty=true\">value set</a> on the Snowstorm server, where it is defined intensionally via an ECL filter and the refset id.  The GPS value set identified by the <code>http://terminology.hl7.org/ValueSet/snomed-intl-gps</code> url is defined extensionally, and that can be used by servers such as <a href=\"http://tx.fhir.org\">tx.fhir.org</a> which do not (at least not yet) support the intensional ECL-based definition (if I try to expand the intensionally defined value set on <a href=\"http://tx.fhir.org\">tx.fhir.org</a> I get an OperationOutcome with: <code>The filter \"constraint = ^787778008 |Global Patient Set (foundation metadata concept)|\" was not understood in the context of http://snomed.info/sct</code>).  So that is what is going on here and why there are different urls for the SNOMED CT GPS FHIR value set(s) that are being used.<br>\n<span class=\"user-mention\" data-user-id=\"322501\">@Max Masnick</span></p>",
        "id": 246447059,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1626697054
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span>  - thanks for that explanation. I was thinking that all the GPS Value Sets would use <a href=\"http://snomed.info/valueSet/gps\">http://snomed.info/valueSet/gps</a> - as the canonical source of truth - in the .url property (i.e. as an identifier) regardless of their internal implementation (be that extensional, implicit or intensional).  I use it on Terminz where it's defined intensionally via an ECL Filter, but I could equally have used a Reference Set Filter.</p>",
        "id": 246529468,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1626739078
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191364\">@Peter Jordan</span>  After thinking more about your comments I realized that my explanation was very incomplete.  I've been used to seeing the ECL syntax for defining the refset-based value set and I was ignoring the simpler refset syntax using 'in`.  The <a href=\"http://tx.fhir.org\">tx.fhir.org</a> server does support that refset-based syntax.  But the International Edition distribution doesn't contain the GPS or IPS refsets, so we still can't use that on <a href=\"http://tx.fhir.org\">tx.fhir.org</a> at the moment.  And I guess that we may have not actually specified whether we should expect value sets that use different definition syntaxes, but are supposed to be equivalent and that should contain the same expansion contents, either should or could use the same canonical urls?  I don't think I had ever really considered that before - and I'm not sure actually what the best practice is.</p>",
        "id": 246540973,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1626751302
    },
    {
        "content": "<p>Each version of “a” value set as defined by one canonical úrl can have a different CLD. That said, it makes sense that SNOMED source of truth would have a canonical that others who are accurately representing the entire value set metadata and CLD could use the same canonical. But I’d be against using the same canonical if you have a different CLD or metadata. The expansion should not be all you consider</p>",
        "id": 247182164,
        "sender_full_name": "Robert McClure",
        "timestamp": 1627292969
    },
    {
        "content": "<p>You would have to be very careful that the CLD was the same - eg an enumeration of codes is only the same as a refset/ECL filter if you are explicit about versions</p>",
        "id": 247543109,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1627532304
    }
]