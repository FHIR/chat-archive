[
    {
        "content": "<p>Getting the below hl7validator 5.5.3 with <a href=\"http://tx.fhir.org\">tx.fhir.org</a> warning :( despite the fact that <code>http://terminology.hl7.org/ValueSet/v3-ServiceDeliveryLocationRoleType</code>DOES contain <code>RNEU</code>and <code>INLAB</code> codes, via <code>Include codes from http://terminology.hl7.org/CodeSystem/v3-RoleCode where concept descends from _ServiceDeliveryLocationRoleType</code>...</p>\n<p>Cannot find where this goes wrong...</p>\n<div class=\"codehilite\"><pre><span></span><code>2021-09-13T16:12:49.8232783Z -- ILSLocation.example.xml ----------------------------------------\n2021-09-13T16:12:49.8233835Z Success: 0 errors, 2 warnings, 0 notes\n2021-09-13T16:12:49.8238585Z   Warning @ Location.contained[0].ofType(Location).type[0] (line 11, col13) : None of the codings provided are in the value set http://terminology.hl7.org/ValueSet/v3-ServiceDeliveryLocationRoleType (http://terminology.hl7.org/ValueSet/v3-ServiceDeliveryLocationRoleType), and a coding should come from this value set unless it has no suitable code (note that the validator cannot judge what is suitable) (codes = http://terminology.hl7.org/CodeSystem/v3-RoleCode#RNEU)\n2021-09-13T16:12:49.8246944Z   Warning @ Location.type[0] (line 30, col9) : None of the codings provided are in the value set http://terminology.hl7.org/ValueSet/v3-ServiceDeliveryLocationRoleType (http://terminology.hl7.org/ValueSet/v3-ServiceDeliveryLocationRoleType), and a coding should come from this value set unless it has no suitable code (note that the validator cannot judge what is suitable) (codes = http://terminology.hl7.org/CodeSystem/v3-RoleCode#INLAB)\n</code></pre></div>",
        "id": 253224888,
        "sender_full_name": "David Simons",
        "timestamp": 1631613375
    },
    {
        "content": "<p>what's the actual terminology server API call?</p>",
        "id": 253228499,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1631615582
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179202-terminology/topic/Erroneous.20warning.20on.20ServiceDeliveryLocationRoleType.20.3F/near/253228499\">said</a>:</p>\n<blockquote>\n<p>what's the actual terminology server API call?</p>\n</blockquote>\n<p>oh, then I would need to run a sniffer... ;) let me ask the team to see what we can dig up as additional logs</p>",
        "id": 253228722,
        "sender_full_name": "David Simons",
        "timestamp": 1631615724
    },
    {
        "content": "<p>I think the validator can log...</p>",
        "id": 253230818,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1631617055
    },
    {
        "content": "<p>-txLog filename  see <a href=\"https://confluence.hl7.org/display/FHIR/Using+the+FHIR+Validator#UsingtheFHIRValidator-Logging\">https://confluence.hl7.org/display/FHIR/Using+the+FHIR+Validator#UsingtheFHIRValidator-Logging</a></p>",
        "id": 253230920,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1631617104
    },
    {
        "content": "<p>will do - it may be related to what I now find in the output:</p>\n<div class=\"codehilite\"><pre><span></span><code>2021-09-14T10:52:58.6954575Z   Validate ILSLocation.example.xmltodo: handle concept filters with op = DESCENDENTOF\n2021-09-14T10:52:59.8741197Z todo: handle concept filters with op = DESCENDENTOF\n</code></pre></div>\n<p>from <code>http://terminology.hl7.org/ValueSet/v3-ServiceDeliveryLocationRoleType</code>:</p>\n<div class=\"codehilite\"><pre><span></span><code>&lt;compose&gt;\n    &lt;include&gt;\n      &lt;system value=&quot;http://terminology.hl7.org/CodeSystem/v3-RoleCode&quot;/&gt;\n      &lt;filter&gt;\n        &lt;property value=&quot;concept&quot;/&gt;\n        &lt;op value=&quot;descendent-of&quot;/&gt;\n        &lt;value value=&quot;_ServiceDeliveryLocationRoleType&quot;/&gt;\n      &lt;/filter&gt;\n    &lt;/include&gt;\n  &lt;/compose&gt;\n</code></pre></div>",
        "id": 253231919,
        "sender_full_name": "David Simons",
        "timestamp": 1631617675
    },
    {
        "content": "<p>oh that will be it. I'll add that to my todo list. descendent-of was introduced after I wrote that code</p>",
        "id": 253232813,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1631618175
    },
    {
        "content": "<p>Thank you Graham - and this is one of those use cases where suppressing individual warnings is coming from :)</p>",
        "id": 253233905,
        "sender_full_name": "David Simons",
        "timestamp": 1631618732
    },
    {
        "content": "<p>PS: the <code>is-a</code> should work, right?</p>\n<div class=\"codehilite\"><pre><span></span><code>&lt;compose&gt;\n    &lt;include&gt;\n      &lt;system value=&quot;http://snomed.info/sct&quot;/&gt;\n      &lt;filter&gt;\n        &lt;property value=&quot;concept&quot;/&gt;\n        &lt;op value=&quot;is-a&quot;/&gt;\n        &lt;value value=&quot;106063007&quot;/&gt;\n      &lt;/filter&gt;\n    &lt;/include&gt;\n  &lt;/compose&gt;\n</code></pre></div>",
        "id": 253234692,
        "sender_full_name": "David Simons",
        "timestamp": 1631619208
    },
    {
        "content": "<p>I'm also using descendent-of in some places.  I don't recall seeing that particular message, but maybe I didn't look enough for it.</p>",
        "id": 253235248,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1631619489
    },
    {
        "content": "<p>PS: Surprisingly adding <code>-txLog txLog.txt</code> causes a whole slew of validation errors to appear, that were not there without this parameter... Seemingly sending <code>null</code> as values to the TXs??? Have not diven into this - removing the <code>-txLog txLog.txt</code> resolves it. Not a major issue for us now.</p>",
        "id": 253274110,
        "sender_full_name": "David Simons",
        "timestamp": 1631634575
    },
    {
        "content": "<p>descendent-of works in Snomed CT but not for other code systems</p>",
        "id": 253282015,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1631637567
    },
    {
        "content": "<p>actually, it works on the server, but not in the mini-terminology service included inside the validator. It will next release</p>",
        "id": 253283362,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1631638138
    },
    {
        "content": "<p>Yes, I think that could be the explanation for some things.</p>",
        "id": 253323523,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1631653311
    }
]