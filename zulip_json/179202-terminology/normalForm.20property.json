[
    {
        "content": "<p>SNOMED defines three normal forms: Long NF, Short NF, and Distribution NF.  Which one should this property use?</p>\n<p>BTW <span class=\"user-mention\" data-user-id=\"191364\">@Peter Jordan</span> your server is not getting the grouping in normalForm propertys right.  For example it returns</p>\n<div class=\"codehilite\"><pre><span></span>384821006|Mental state, behaviour and/or psychosocial function finding|:\n  {\n    363714003|Interprets|=247583006|Decision making|,\n    363714003|Interprets|=311465003|Cognitive functions|,\n    363714003|Interprets|=3850002|Psychological function|\n  }\n</pre></div>\n\n\n<p>rather than each relationship being grouped separately (which is what role group = 0 means)</p>\n<div class=\"codehilite\"><pre><span></span>384821006|Mental state, behaviour and/or psychosocial function finding|:\n  { 363714003|Interprets|=247583006|Decision making| },\n  { 363714003|Interprets|=311465003|Cognitive functions| },\n  { 363714003|Interprets|=3850002|Psychological function| }\n</pre></div>",
        "id": 153890131,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1494981270
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191343\">@Michael Lawley</span> I'm sure that I read somewhere that role group = 0  denotes no grouping - but will check that and make the necessary correction in my next update. I've interpreted normalForm as Long NF and normalFormTerse as Short NF.</p>",
        "id": 153890132,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1494982442
    },
    {
        "content": "<p>I thought it was clear thet normalFormTerse is just normalForm but without the display text.  ie codes and syntax but no terms</p>\n<p>In SNOMED, there are some atrributes that are \"never grouped\" (eg laterality), but all others are always grouped.  role group = 0 means that those attributes are still grouped, but it is implicit.  If you were going to use this, then the correct syntax would be:</p>\n<div class=\"codehilite\"><pre><span></span>384821006|Mental state, behaviour and/or psychosocial function finding|:\n    363714003|Interprets|=247583006|Decision making|,\n    363714003|Interprets|=311465003|Cognitive functions|,\n    363714003|Interprets|=3850002|Psychological function|\n</pre></div>\n\n\n<p>i.e., no braces at all.  But this form is \"Close to User\" form, which is not one of the Normal(ised) Forms.</p>",
        "id": 153890133,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1494982741
    },
    {
        "content": "<p>Thanks, in the short term it will be easier to implement that syntax with the curly braces. I have interpreted normalFormTerse as being normalForm without the descriptions/terms.</p>",
        "id": 153890139,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1494983474
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> 's server is a little strange - it only returns a single code if the concept is primitive, otherwise it looks like it returns the Long NF<br>\nNote the difference between your result for 139461000119109 and Grahame's ; the Associated finding is expanded in his, but not yours</p>",
        "id": 153890142,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1494983939
    },
    {
        "content": "<p>what exactly is strange?</p>",
        "id": 153890154,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1495000132
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191343\">@Michael Lawley</span>  My Server returns the following Normal Form Expression for 139461000119109|History of osteoporotic fracture|<br>\n<code>243796009|Situation with explicit context|:{408732007|Subject relationship context|=410604004|Subject of record|,408731000|Temporal context|=410513005|Past|,408729009|Finding context|=410515003|Known present|,246090004|Associated finding|=443165006|Pathological fracture due to osteoporosis|}</code><br>\nHow am I failing to expand the Associated finding property? OTOH, Grahame's is returning an Associated Finding of 64572001|Disease|</p>",
        "id": 153890171,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1495010014
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191343\">@Michael Lawley</span> the normalForm expression that my server returns for SCT concept 384821006 is actually...<br>\n<code>384821006|Mental state, behaviour and/or psychosocial function finding|:363714003|Interprets|=3850002|Psychological function|</code><br>\nAre you looking at the correct server and noting the edition, because I can only see a single attribute for that concept in the 20170131 version of the International Edition of SCT?  Still take the point on role group = 0, but need another example to test the correct syntax.</p>",
        "id": 153890176,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1495012168
    },
    {
        "content": "<p>Have a look at what Graham's server returns - the normal form of <code>443165006|Pathological fracture due to osteoporosis|</code> should be provided as the value of <code>246090004|Associated finding|</code> :</p>\n<div class=\"codehilite\"><pre><span></span>243796009|Context-dependent categories| :\n  {\n    408732007|Subject relationship context|=410604004|Subject of record|,\n    408731000|Temporal context|=410513005|Past|,\n    408729009|Finding context|=410515003|Known present|,\n    246090004|Associated finding|=64572001|Disease|:{116676008|Associated morphology|=22640007|Pathologic fracture|,363698007|Finding site|=272673000|Bone structure|},{42752001|Due to|=64859006|Osteoporosis|}\n  }\n</pre></div>\n\n\n<p>Although this is slightly wrong syntactically as there should be brackets around an attribute value that is not just a single code.</p>",
        "id": 153890178,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1495012572
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> it's strange because the single primitive code is not a \"normal form\" of the code.<br>\nTo be consistent with your use of Long Normal Form for fully-defined concepts you would need to include the relationships of the primtive concept as well.</p>",
        "id": 153890179,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1495012604
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191343\">@Michael Lawley</span> are you effectively saying that, where appropriate (e.g. associated findings), attribute values have to be expanded into expressions?</p>",
        "id": 153890182,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1495013608
    },
    {
        "content": "<p>That's the definition of Long Normal Form, yes.  The Long Normal Form should only comprose primitive concepts</p>",
        "id": 153890183,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1495013718
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191343\">@Michael Lawley</span> I'm struggling to understand the Long Normal Form expression that your server is returning for <code>126716006 | Neoplasm of right lower lobe of lung (disorder) |</code>  ...</p>\n<p><code>126713003 |Neoplasm of lung|:\n{116676008 |Associated morphology| = 108369006 |Neoplasm|,\n 363698007 |Finding site| = 266005 |Structure of lower lobe of right lung|}</code></p>\n<p>The focus concept <code>126713003 |Neoplasm of lung|</code> and one of the defining attributes <code>266005 |Structure of lower lobe of right lung|</code> aren't primitives (unless this an edition/version issue).</p>",
        "id": 153891892,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1496292889
    },
    {
        "content": "<p>That would be because we're not returning Long Normal Form, but rather (extended) Distribution Normal Form<br>\nThe spec doesn't (yet) say which normal form should be provided</p>",
        "id": 153891894,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1496295421
    },
    {
        "content": "<p>that sort of thing is in scope for a snomed implementation guide which we are supposed to work on with Snomed International</p>",
        "id": 153891895,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1496295462
    },
    {
        "content": "<p>Couldn't we just add an additional property for Distribution Normal Form, e.g. NormalFormDistribution?  Then we could state explicitly that the existing NormalForm property is Long Normal Form and NormalFormTerse is Short Normal Form?</p>",
        "id": 153891896,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1496295613
    },
    {
        "content": "<p>we could. I'm not sure that the word 'just' is rightin that sentence</p>",
        "id": 153891897,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1496296057
    },
    {
        "content": "<p>I could have used 'simply' instead. :) </p>",
        "id": 153891898,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1496296299
    },
    {
        "content": "<p>that would have been automatic yellow card, given that we are dealing with SNOMED CT</p>",
        "id": 153891899,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1496296674
    },
    {
        "content": "<p>normalFormTerse is already defined as \"normalForm without the display text\"; it's not a different norma form.<br>\nWhat is needed is a decision on whether normalForm is LNF or SNF (I'm not really convinved that DNF is what's wanted/useful, it's just easiest)</p>",
        "id": 153891907,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1496300304
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191343\">@Michael Lawley</span> I've taken myself back to (Compositional) Grammar School and re-factored my code that generates LNF expressions. When time permits, perhaps you could look at the results and feedback any errors. One discovery was that there is no comma between ungrouped and grouped attributes (TIG page 107). Unfortunately, the definitions of the concepts that provide most of the 'non-trivial' examples in the SCT documentation have changed significantly since publication, so aren't useful from a testing perspective.</p>",
        "id": 153892392,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1496730592
    },
    {
        "content": "<p>I believe that the comma is optional - see the <code>refinement</code> rule in the spec here <a href=\"https://confluence.ihtsdotools.org/display/DOCSCG/5.1+Normative+Specification\" target=\"_blank\" title=\"https://confluence.ihtsdotools.org/display/DOCSCG/5.1+Normative+Specification\">https://confluence.ihtsdotools.org/display/DOCSCG/5.1+Normative+Specification</a>  -- a comma before any attributeGroup (except the first when there's no attributeSet) are optional</p>",
        "id": 153893668,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1497414420
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191364\">@Peter Jordan</span> <span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span>  I've created tracker <a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19647\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19647\">GF#19647</a>] as per (I hope) today's SNOMED on FHIR discussion to either remove the normalForm properties or at minimum note their semantic limitation.</p>",
        "id": 154018309,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1542175577
    }
]