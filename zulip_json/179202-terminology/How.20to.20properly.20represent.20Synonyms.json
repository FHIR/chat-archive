[
    {
        "content": "<p>Starting a topic here as recommended from the implementers stream: <a href=\"#narrow/stream/implementers/subject/ValueSet.20expansion.20including.20synonyms/near/116986\" title=\"#narrow/stream/implementers/subject/ValueSet.20expansion.20including.20synonyms/near/116986\">https://chat.fhir.org/#narrow/stream/implementers/subject/ValueSet.20expansion.20including.20synonyms/near/116986</a></p>\n<p>What I'd like to know is how to represent Display synonyms in a value set and have those be included in the expanded set. So for example, if I had a code system with male and female, I want to be able to make a value set that contains sys|Male, sys|Female, sys|Male|MaleDisplaySynonym. Then when it is expanded it would contain three concepts, two of which are the same, but they have different displays. This way we can have dropdowns that are easier for end users to find things rather than having to know exactly the display and wording of our system (which was one of the points <span class=\"user-mention\" data-user-id=\"191343\">@Michael Lawley</span> brought up before I bumped the linked thread). [cc <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> ]</p>",
        "id": 153927615,
        "sender_full_name": "Joshua Bell",
        "timestamp": 1515081044
    },
    {
        "content": "<p>well, this:</p>\n<div class=\"codehilite\"><pre><span></span>&lt;ValueSet xmlns=&quot;http://hl7.org/fhir&quot;&gt;\n  &lt;url value=&quot;something&quot;/&gt;\n  &lt;name value=&quot;ForJoshua&quot;/&gt;\n  &lt;compose&gt;\n    &lt;include&gt;\n      &lt;system value=&quot;http://hl7.org/fhir/administrative-gender&quot;/&gt;\n      &lt;concept&gt;\n        &lt;code value=&quot;male&quot;/&gt;\n        &lt;display value=&quot;Male&quot;/&gt;\n      &lt;/concept&gt;\n      &lt;concept&gt;\n        &lt;code value=&quot;female&quot;/&gt;\n        &lt;display value=&quot;Female&quot;/&gt;\n      &lt;/concept&gt;\n      &lt;concept&gt;\n        &lt;code value=&quot;male&quot;/&gt;\n        &lt;display value=&quot;A *real* man&quot;/&gt;\n      &lt;/concept&gt;\n    &lt;/include&gt;\n  &lt;/compose&gt;\n&lt;/ValueSet&gt;\n</pre></div>",
        "id": 153927674,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1515098858
    },
    {
        "content": "<p>in this way, the value set just takes control completely</p>",
        "id": 153927675,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1515098882
    },
    {
        "content": "<p>I've tried simply including a duplicate like that but the implementation I am using (hapi) does not include duplicate concepts in the expansion. Is this an implementation detail that is supposed to work in fhir, and is just incorrect in hapi? You can see this happen using this curl: <code>curl -X GET \\\n  'https://fhirtest.uhn.ca/baseDstu3/ValueSet/653997/$expand?includeDesignations=true'</code></p>\n<p>I also tried your resource above: <a href=\"https://gist.github.com/RingOfStorms/521b676a713abd0bed845ec05f9f8797\" target=\"_blank\" title=\"https://gist.github.com/RingOfStorms/521b676a713abd0bed845ec05f9f8797\">https://gist.github.com/RingOfStorms/521b676a713abd0bed845ec05f9f8797</a></p>",
        "id": 153927709,
        "sender_full_name": "Joshua Bell",
        "timestamp": 1515104442
    },
    {
        "content": "<p>The expectation for a value set definition is that each concept representation (code) would only be included once. <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> , what you suggest should not be allowed. How to support more thatn one display for a single concept should be something we can support on the expansion side through the allowance of multiple displays for a single code. Not sure how we would do that, but perhaps through Expansion Profile?</p>",
        "id": 153927795,
        "sender_full_name": "Robert McClure",
        "timestamp": 1515184860
    },
    {
        "content": "<p>why is that something that should not be allowed? It's certainly not something we've talked about before</p>",
        "id": 153927849,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1515212329
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/TK62yRe9_2nqVaFYny2_m3Pa/Screen-Shot-2018-01-06-at-1.51.44-PM.png\" target=\"_blank\" title=\"Screen-Shot-2018-01-06-at-1.51.44-PM.png\">Screen-Shot-2018-01-06-at-1.51.44-PM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/TK62yRe9_2nqVaFYny2_m3Pa/Screen-Shot-2018-01-06-at-1.51.44-PM.png\" target=\"_blank\" title=\"Screen-Shot-2018-01-06-at-1.51.44-PM.png\"><img src=\"/user_uploads/10155/TK62yRe9_2nqVaFYny2_m3Pa/Screen-Shot-2018-01-06-at-1.51.44-PM.png\"></a></div>",
        "id": 153927857,
        "sender_full_name": "Joel Schneider",
        "timestamp": 1515268340
    },
    {
        "content": "<p>y. but how is that relevant?</p>",
        "id": 153927860,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1515270668
    },
    {
        "content": "<p>The example given earlier shows a code system with two concepts having the same code (but different display).</p>",
        "id": 153927924,
        "sender_full_name": "Joel Schneider",
        "timestamp": 1515382908
    },
    {
        "content": "<p>it's the same concept with different displays.</p>",
        "id": 153927925,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1515383244
    },
    {
        "content": "<p>Hmm, concept.display cardinality is 0..1.  How can the same concept have different displays?</p>",
        "id": 153927926,
        "sender_full_name": "Joel Schneider",
        "timestamp": 1515383454
    },
    {
        "content": "<p>designations. or assigned by value set as shown above</p>",
        "id": 153927927,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1515383650
    },
    {
        "content": "<p>Ok, I see the comment under <em>ValueSet.compose.include.concept.display</em> about the value set's ability to specify an alternative display for a concept.</p>\n<p>So the point under discussion is whether the value set should be able to include the same concept more than once, with alternative display values?  But only for use in the UI, or CodeableConcept.text?</p>",
        "id": 153927928,
        "sender_full_name": "Joel Schneider",
        "timestamp": 1515385396
    },
    {
        "content": "<p>yes at the UI level, and then reflected into CodeableConcept.text (but not Coding.display)</p>",
        "id": 153927929,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1515385522
    },
    {
        "content": "<p>I don't think that there's anything <strong>wrong</strong> with what Grahame is suggesting.  I don't think we really need to create rules to enforce doing this  in ExpansionProfile, for example, and not in ValueSet.compose  - and if we did the lines would be rather arbitrary.  But the ValueSet.compose approach won't help (as far as I can see) when the value set definition is intensional.  I think that will be a common usage, and likely a facility for including multiple display terms for the same code in expansions is going to be needed in ExpansionProfile.</p>",
        "id": 153927965,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1515426678
    },
    {
        "content": "<p>feels hard to get right in the intensional use case. there's so many options and axes to pin down</p>",
        "id": 153928026,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1515441372
    },
    {
        "content": "<p>So what exactly is the use of the Synonym use in a designation? Is that saying that the concept itself as a whole is a synonym of another concept?</p>\n<p>From the looks of it to me it seems as though pretty much all of the current implementations took the 'uniquely defines the concept within the code system' as only including it once in the expansion. I figure since this is the case, it would be a good idea to clarify this as the default behavior of the expansion operation (making it backward compatible with the ones that currently implement it this way). And then add in an expansion operation that would result in an expansion containing duplicate concept references defined in the valueset with different displays. Possibly <code>displaySynonyms</code> or something along those lines.</p>",
        "id": 153928050,
        "sender_full_name": "Joshua Bell",
        "timestamp": 1515450811
    },
    {
        "content": "<p>Our approach is that there is one display per code, and that everything else is some kind of synonym. Including a code in an expansion more than once is going to create confusion.  In a data entry UI context, providing multiple different display text options for the same code gives the incorrect impression that choosing one over the other conveys some meaning.  It might to a person, but it won't to the machines/algorithms that only look at the codes.<br>\nJust because you can, or someone else does, something, doesn't mean you should.</p>",
        "id": 153928083,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1515469282
    },
    {
        "content": "<p>That begs the question - why does a Code System have synonyms? Maybe to allow an end user to find a concept using the term that's most familiar to them? The fact that this makes no difference to machine processing isn't relevant to that use case. I see the value in presenting preferred terms in context-sensitive dropdowns, but not for pure text searching; however, it might be interesting to show the results of our differing approaches to the later using Ontoserver's excellent ValueSet comparison tool to clinical users ('heart attack' is a good example).</p>",
        "id": 153928085,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1515470581
    },
    {
        "content": "<p>it's not true that including a code more than one will produce confusion. It's certainly true that you can create confusion - that's always possible. But you might do it because the users erroneously believe that 2 descriptions are different, but they aren't. or because your expansion is categorised into multiple different groups, to help users navigate, and one concept belongs in more than one place.  Or because there are 2 different subgroups used to different terminology that is not ontologically significant (why there are synonyms in the first place). In practice, this is no different to having an interface terminology where 2 terms map to the one concept in a reference terminology.</p>",
        "id": 153928086,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1515470750
    },
    {
        "content": "<p>Yes.  I think there are use cases that will benefit from this and we need to be able to allow for it.  Hopefully we can do things to minimize confusion, but we can't entirely eliminate the possibility of it.</p>",
        "id": 153928101,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1515482960
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191343\">@Michael Lawley</span> Not having the synonyms has created confusion among our users. They see a document with medication A (which also has the made-up name Semoflouride in this example) but our list only has <code>Semoflouride</code> and they don't know off the top of their head that A is the same exact thing as Semoflouride. Now we are missing data and having users ask us to add medication A to our dropdowns because they couldn't find it.<br>\nThis isn't a case of me doing something someone else is doing or just because I can or want to, my problem is stemming from a real business setting that has been stumbled upon on and I need to come up with a solution for it.</p>\n<p>Now I think confusion can exist especially because there seem to be two different synonyms that can happen. There are two separate Concepts that could be synonyms or a concept that has multiple displays representing it (which we also identify as a synonym). In my use case, I am asked to do the latter and use one concept for something like a medication and just show different displays for that. That way when a user selects either <code>A</code> or <code>Semoflouride</code> it will be stored as the same expected concept for analytics later. And down later in the pipeline, it will show our preferred name of <code>Semoflouride</code> even if they selected <code>A</code> when displaying details about that field.</p>\n<p>Maybe next steps would be to distinguish between a display synonym vs two concepts being synonyms (I'm not sure if this is a common thing within a single CodeSystem, there is already mapping for between different CodeSystems so maybe I made that scenario up completely. If that is the case then just need to clarify how display synonyms should be handled). And additionally, it would be useful to be able to flag one as the preferred name/or clarify that order matters and the first one is considered the preferred term, depending on how it is structured.</p>",
        "id": 153928103,
        "sender_full_name": "Joshua Bell",
        "timestamp": 1515483635
    },
    {
        "content": "<p>there's confusion about the terminology here (yay!). Synonym may apply at the level of <br>\n- the concept (2 concepts that have the same meaning)<br>\n- the code (2 different character strings that refer to the same concept)<br>\n- the display (2 different displays for the same concept)</p>\n<p>It depends on the definitional infrastructure for the code system as to which you can actually have (e.g. native FHIR code system can only have 1st and 3rd at present, where as MIF can have all 3)</p>",
        "id": 153928170,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1515534474
    },
    {
        "content": "<p>My interpretation...<br>\nconcept level = equivalence<br>\ncode level  = duplicate identifiers<br>\ndescription level = synonymous terms</p>",
        "id": 153928190,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1515547940
    },
    {
        "content": "<p>Joshua's use case demonstrates a real requirement, but I'm not sure changing the value set membership is the way to support it.  It's a \"value set,\" not a \"value bag,\" so I don't expect to see the same value twice. </p>\n<p>If we support listing both \"medication A\" and \"Semoflouride\" for data capture, do we replicate the problem when someone else pulls up the record? Which label do they see?</p>\n<p>One solution: support synonyms in the search/type-ahead UI functionality, but record the preferred term. E.g., user types \"Medication A,\" systems offers \"Semoflouride (aka Medication A)\" among other options, user selects the option, system records the preferred term. I'd be more comfortable with expanding the functionality of \"value set\" (e.g., by adding search terms, synonyms, other kinds of display text) than with changing the underlying set assumption.</p>",
        "id": 153928430,
        "sender_full_name": "Jay Lyle",
        "timestamp": 1515682439
    },
    {
        "content": "<p>I doubt that when the phrase \"value set\" was decided on that anyone was actually thinking very much about the mathematical notion of a \"set\" (vs. a \"bag\").  So I don't know that we should press that too hard, because we have at least two situations that I can think of at the moment where the strict set interpretation doesn't hold - one is the case we have here with multiple descriptions for the same code, and the other is the case where we include representation of hierarchy in the value set expansions (i.e. nested 'contains') - as with the addition of hierarchy a single code can potentially show up multiple times (in different paths with a different parent).  I think that if we try to take an approach with the ValueSet resource and its representation of value set expansions that doesn't allow for these situations then we'll end up needing yet another artifact to handle them - and I expect that would be an even less desirable outcome.</p>",
        "id": 153928436,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1515686176
    },
    {
        "content": "<p>specifically to Jay's question: that's why we have both text and display - text is what the user saw. For this kind of case</p>",
        "id": 153928489,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1515702233
    },
    {
        "content": "<p>agree that the bag vs set distinction is not something to be rigorous on. But also: expansions that contain the same code twice are generally for UI purposes, not other kinds of purposes (though the code generation case is a deferred purpose, so that's never clear)</p>",
        "id": 153928490,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1515702306
    },
    {
        "content": "<p>Agree.</p>",
        "id": 153928504,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1515703819
    },
    {
        "content": "<p>I just fixed my server - I'll update <a href=\"http://test.fhir.org\" target=\"_blank\" title=\"http://test.fhir.org\">test.fhir.org</a> to behave properly in this regard soon. Here's the expansion I'm generating from the value set I posted above now:</p>",
        "id": 153928634,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1515755651
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><span class=\"cp\">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>\n<span class=\"nt\">&lt;ValueSet</span> <span class=\"na\">xmlns=</span><span class=\"s\">&quot;http://hl7.org/fhir&quot;</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;meta&gt;</span>\n        <span class=\"nt\">&lt;versionId</span> <span class=\"na\">value=</span><span class=\"s\">&quot;1&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;lastUpdated</span> <span class=\"na\">value=</span><span class=\"s\">&quot;2018-01-12T11:01:41Z&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/meta&gt;</span>\n    <span class=\"nt\">&lt;url</span> <span class=\"na\">value=</span><span class=\"s\">&quot;something&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;name</span> <span class=\"na\">value=</span><span class=\"s\">&quot;ForJoshua&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;status</span> <span class=\"na\">value=</span><span class=\"s\">&quot;draft&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;expansion&gt;</span>\n        <span class=\"nt\">&lt;identifier</span> <span class=\"na\">value=</span><span class=\"s\">&quot;urn:uuid:0b0ed260-4d38-4f57-a0a9-382a9daec538&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;timestamp</span> <span class=\"na\">value=</span><span class=\"s\">&quot;2018-01-12T11:13:22Z&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;parameter&gt;</span>\n            <span class=\"nt\">&lt;name</span> <span class=\"na\">value=</span><span class=\"s\">&quot;expansion-source&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;valueString</span> <span class=\"na\">value=</span><span class=\"s\">&quot;ValueSet/31&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;/parameter&gt;</span>\n        <span class=\"nt\">&lt;parameter&gt;</span>\n            <span class=\"nt\">&lt;name</span> <span class=\"na\">value=</span><span class=\"s\">&quot;version&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;valueUri</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://hl7.org/fhir/administrative-gender?version=3.0.1&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;/parameter&gt;</span>\n        <span class=\"nt\">&lt;contains&gt;</span>\n            <span class=\"nt\">&lt;extension</span> <span class=\"na\">url=</span><span class=\"s\">&quot;http://hl7.org/fhir/StructureDefinition/valueset-definition&quot;</span><span class=\"nt\">&gt;</span>\n                <span class=\"nt\">&lt;valueString</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Male&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;/extension&gt;</span>\n            <span class=\"nt\">&lt;system</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://hl7.org/fhir/administrative-gender&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">&quot;male&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;display</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Male&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;/contains&gt;</span>\n        <span class=\"nt\">&lt;contains&gt;</span>\n            <span class=\"nt\">&lt;extension</span> <span class=\"na\">url=</span><span class=\"s\">&quot;http://hl7.org/fhir/StructureDefinition/valueset-definition&quot;</span><span class=\"nt\">&gt;</span>\n                <span class=\"nt\">&lt;valueString</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Female&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;/extension&gt;</span>\n            <span class=\"nt\">&lt;system</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://hl7.org/fhir/administrative-gender&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">&quot;female&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;display</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Female&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;/contains&gt;</span>\n        <span class=\"nt\">&lt;contains&gt;</span>\n            <span class=\"nt\">&lt;extension</span> <span class=\"na\">url=</span><span class=\"s\">&quot;http://hl7.org/fhir/StructureDefinition/valueset-definition&quot;</span><span class=\"nt\">&gt;</span>\n                <span class=\"nt\">&lt;valueString</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Male&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;/extension&gt;</span>\n            <span class=\"nt\">&lt;system</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://hl7.org/fhir/administrative-gender&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">&quot;male&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;display</span> <span class=\"na\">value=</span><span class=\"s\">&quot;A *real* man&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;/contains&gt;</span>\n    <span class=\"nt\">&lt;/expansion&gt;</span>\n<span class=\"nt\">&lt;/ValueSet&gt;</span>\n</pre></div>",
        "id": 153928635,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1515755661
    },
    {
        "content": "<p>Right: I didn't mean to imply an unbreakable rule; just that there's a decision to be made between increasing \"rows\" vs \"columns\" and we should not choose one without considering the other. </p>\n<p>ValueSet already supports multiple columns (designations), so I'd expect the UI to be able to support the use case without having to add redundant values to the value set.</p>\n<p>(When I say \"redundant,\" I lean on a concept-oriented perspective, where the set cares about the semantics, not the lex.)</p>\n<p>Regarding hierarchies, that's another requirement that could be supported with metadata rather than a re-definition of a set. I won't say it shouldn't be allowed, but let's consider how to support the interoperability specification requirement without building functional UI features into the foundational structure.</p>",
        "id": 153928654,
        "sender_full_name": "Jay Lyle",
        "timestamp": 1515771999
    },
    {
        "content": "<p>We need to be cautious of always trying to jam all the terminology service functionality based on code system information into a value set. Just because you have a hammer, everything is not a nail. <span class=\"user-mention\" data-user-id=\"191364\">@Peter Jordan</span> was absolutely correct in his distinctions:<br>\nconcept level = equivalence<br>\ncode level = duplicate identifiers<br>\ndescription level = synonymous terms<br>\nI strongly urge FHIR to only use the phrase \"synonym\" to mean multiple concept descriptions associated with a single code system concept. Yes, we humans smudge that around a bit when we talk to each other, but in this context, for FHIR encodings, we can and MUST be more rigid. </p>\n<p>Also, the VSD clarifies that a value set definition is expected to identify member concept only once. To my mind that means that each member concept shows up once in the expansion. BUT, we also support including additional information, drawn from the code system or code system supplements, as part of the expansion. I think this would include an expansion that had a single concept (one concept identifier) included with multiple synonymous descriptions. (Let's set aside duplicate concept identifiers for a different discussion.) How this is displayed by an application is not, IMHO, an expansion profile issue, but the expansion would have that member ONCE with multiple synonymous descriptions. As for including a hierarchy that could result in a display that shows the concept in more than one place - again, that display is up to the implementation, but the expansion would include relationship information. the expansion should not, in my opinion, be a tab-indented pdf-y interpretation of the code system information necessary to construct the display.</p>",
        "id": 153928888,
        "sender_full_name": "Robert McClure",
        "timestamp": 1516033115
    },
    {
        "content": "<p>I agree entirely with Rob M. about reserving the term \"synonym\" for multiple concept descriptions that are associated with a single code system concept.  That fits with both the normal usage in the terminology community as well as the normal English understanding of the word, whereas I believe the other cases do not.  I know I've said something about this before, but probably not frequently or strongly enough.  </p>\n<p>For the other point, given the current structure of ValueSet.expansion, I'm pretty sure that there isn't any way to do it in the base resource so that \"the expansion would have that member ONCE with multiple synonymous descriptions\" or so that \"the expansion would include relationship information\".  And I don't think that our current extensions help with that, either.  If we think we need to do it in extension space, likely we can figure out how to do that.  But maybe we don't need to do it.  We could allow (which we don't prohibit now) the multiple instances of a concept/code in the expansion for situations like these, where it might make sense.</p>",
        "id": 153929106,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1516126619
    },
    {
        "content": "<p>if we're going to reserve synonym for display/designation - something I could live with - then we need to document that clearly, <em>and</em> we need to be clear about the words for the others, and document them clearly.</p>",
        "id": 153929585,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1516358192
    },
    {
        "content": "<p>I'm very much opposed to making a rule that concepts must be unique in an expansion all the time. It overloads a simple structure with all sorts of additional things, and why? If there's cases where that's a problem - what are they? - then we can create a profile for that</p>",
        "id": 153929586,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1516358271
    },
    {
        "content": "<p>Let's make sure what we are counting as \"unique.\" Can we agree that the VS CLD should generate a list of unique members? I'd say that is always step 1 of the expansion process. Then a profile can be applied, or perhaps additional expand operation parameters that do not directly effect the unique member list, and this second step in creating the final expansion adds additional information to the members. If that results in a single member having multiple descriptions, fine. If you choose to output that as multiple instances of the orginal CLD-generated member, each with different attributes, in the file I'm also fine with that. Can we agree on that?</p>",
        "id": 153929670,
        "sender_full_name": "Robert McClure",
        "timestamp": 1516381016
    },
    {
        "content": "<p>I'm not sure what all that means.</p>",
        "id": 153929758,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1516425236
    },
    {
        "content": "<p>I think I agree, though. Because I think you're making some theoretical argument about what some inner aspect of an expansion means, but I'm just focusing on the end-state</p>",
        "id": 153929759,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1516425320
    },
    {
        "content": "<p>You should not focus on the end state only as the ends rarely justify the means. This is not some unimportant \"theoretical argument\" (Graham - why so much demeaning rhetoric, you looking for a green card or something?) The CLD is defining the unique list of members of the value set expansion. The inclusion of other information during the expansion process that results in multiple unique instances of FHIR xml objects when the combination of all attributes of those instances is considered is acceptable and useful. But users of those instances need realize that they are simply being given multiple instances of the same concept, not multiple concepts.</p>",
        "id": 153929867,
        "sender_full_name": "Robert McClure",
        "timestamp": 1516553745
    },
    {
        "content": "<p>ok sorry. I'm not here to justify any means. and I agree that repeating the same concept with different descriptions does not change the membership of the value set.</p>",
        "id": 153929873,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1516567791
    },
    {
        "content": "<p>Unless I'm missing something, it seems to me that we're at least close to agreement here.  I'm not hearing in this discussion anything that clearly needs to be changed in the FHIR specification regarding the definition of value sets and the generation of value set expansions - other than better documentation for some aspects.  Also, although it may be useful for thinking about it in an abstract way, we can't and don't need to require that servers follow an actual \"step 1, step 2, ...\" approach to generating a value set expansion, as that is going too far into prescribing implementation details.  Also, the CLD (assuming it is represented in FHIR as ValueSet.compose, as we've stated) actually is not always sufficient by itself to determine the \"unique list of members\" of the value set expansion (consider the effect of the $expand operation 'date' and ExpansionProfile.fixedVersion parameters).   All of the inputs to the expansion process (the code system or systems and versions as implemented in the server, the value set CLD in its specified version and the additional expansion parameters that are supplied) taken together determine both the list of unique concepts (with either single or multiple instances of a particular concept) and all of the additional details that are returned in an instance of a value set expansion.  Do we agree on that?</p>",
        "id": 153929921,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1516625448
    },
    {
        "content": "<p>I think I do</p>",
        "id": 153929927,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1516626264
    },
    {
        "content": "<p>I still think it means people will be maintaining their semantic and UI requirements in the same widget, and this is unnecessary as it's already supported by valueset designation, and expansion profile, and CodeSystem$lookup. But no, I can't think of a use case where it creates a problem other than maintenance headaches.</p>",
        "id": 153930103,
        "sender_full_name": "Jay Lyle",
        "timestamp": 1516650440
    },
    {
        "content": "<p>Here is my summary: The $expand operation may result in more than one /contains for each unique concept representation as identified via the ValueSet.compose (CLD) combined with deterministic parameters provided to the $expand operation, such as date and certain ExpansionProfile elements.</p>",
        "id": 153930171,
        "sender_full_name": "Robert McClure",
        "timestamp": 1516657359
    },
    {
        "content": "<p>or as specified in the valueset</p>",
        "id": 153930195,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1516660988
    },
    {
        "content": "<p>So what is left to in order to iron out these issues? It seems like most people have a good idea of the direction but the conversation keeps dying down.</p>",
        "id": 153930540,
        "sender_full_name": "Joshua Bell",
        "timestamp": 1516831500
    },
    {
        "content": "<p>I think it's a face to face discussion next week</p>",
        "id": 153930564,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1516833057
    },
    {
        "content": "<p>Great, looking forward to hearing the results.</p>",
        "id": 153930580,
        "sender_full_name": "Joshua Bell",
        "timestamp": 1516833420
    },
    {
        "content": "<p>I'm keen to participate.</p>",
        "id": 153930730,
        "sender_full_name": "Russ Hamm",
        "timestamp": 1516908806
    },
    {
        "content": "<p>How'd the talks go, was there a consensus on how the different kinds of synonyms at the different levels should be done?</p>",
        "id": 153935062,
        "sender_full_name": "Joshua Bell",
        "timestamp": 1517595941
    },
    {
        "content": "<p>sigh. I don't think we got to this, sorry. :-(. I think that we would go with the conensus here; I'll draft something for discussion next week</p>",
        "id": 153935090,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1517600488
    },
    {
        "content": "<p>Has this ever been circled back to?</p>",
        "id": 153954330,
        "sender_full_name": "Joshua Bell",
        "timestamp": 1524670257
    },
    {
        "content": "<p>yes, we defined this extension: <a href=\"http://build.fhir.org/extension-codesystem-alternate.html\" target=\"_blank\" title=\"http://build.fhir.org/extension-codesystem-alternate.html\">http://build.fhir.org/extension-codesystem-alternate.html</a></p>",
        "id": 153954350,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1524691920
    },
    {
        "content": "<p>That looks like a solution to code synonyms, but what about having multiple displays for the same code in a single valueset. That was what I had asked in the very original OP and I think it diverged to many different topics, code synonyms being one of them. I think you've posted some other threads about what happens when you expand a valueset that has two of the same concept with different display overrides, have those discussions been resolved?</p>\n<p>Right now to use valuesets I first expand it from the fhir server, then go back and loop through all of the original inclusion statements and create a new expansion that will include multiple concepts with all the listed display overrides (in our UI we want users to be able to select either 'Male' or 'MaleOtherWording' for the same concept).</p>",
        "id": 153954820,
        "sender_full_name": "Joshua Bell",
        "timestamp": 1524852958
    },
    {
        "content": "<p>a display is just a preselected designation. you can control which additional designations are returned in an expansion using an expansion profile</p>",
        "id": 153954871,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1524873301
    }
]