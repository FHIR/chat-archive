[
    {
        "content": "<p>Terminology Service Maintainers (<span class=\"user-mention\" data-user-id=\"195036\">@Carol Macumber</span> <span class=\"user-mention\" data-user-id=\"191343\">@Michael Lawley</span> <span class=\"user-mention\" data-user-id=\"191364\">@Peter Jordan</span> <span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> <span class=\"user-mention\" data-user-id=\"191503\">@Robert McClure</span> <span class=\"user-mention\" data-user-id=\"191982\">@Ted Klein</span> <span class=\"user-mention\" data-user-id=\"191333\">@Reuben Daniels</span> <span class=\"user-mention\" data-user-id=\"191375\">@Alexander Henket</span>), I have a question for you about v2 terminology validation  (sorry if I missed tagging anyone important)</p>",
        "id": 159315745,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1551075392
    },
    {
        "content": "<p>if you want to use the FHIR terminology service while validating a v2 message, the basic idea is that same as if you're validating a FHIR resource, using $validate-code. There's a significant difference, though</p>",
        "id": 159315765,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1551075461
    },
    {
        "content": "<p>in v2, instead of using the FHIR specified URI for a ode system, which is what is used across the FHIR interface, implementations use a code out of table 0396</p>",
        "id": 159315821,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1551075528
    },
    {
        "content": "<p>So those codes need to be mapped to ValueSet URIs?</p>",
        "id": 159315848,
        "sender_full_name": "Jim Steel",
        "timestamp": 1551075598
    },
    {
        "content": "<p>yes. on the FHIR side, we are able to represent mappings between table 0396 codes and FHIR code system URLs using the NamingSystem resource (so code systems, not value sets)</p>",
        "id": 159315909,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1551075621
    },
    {
        "content": "<p>Or searched using identifiers perhaps (i.e. the ValueSet includes a 0396 code as an identifier code, with some appropriate system)</p>",
        "id": 159315912,
        "sender_full_name": "Jim Steel",
        "timestamp": 1551075635
    },
    {
        "content": "<p>my feeling is that storing and managing the mappings should be on the terminology server side, to make life as simple as possible for the consumer</p>",
        "id": 159315930,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1551075670
    },
    {
        "content": "<p>this means that we need to decide how to make a validate code request using a table 0396 code instead of a system uri</p>",
        "id": 159315981,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1551075732
    },
    {
        "content": "<p>Or its a 2-step call</p>",
        "id": 159315983,
        "sender_full_name": "Jim Steel",
        "timestamp": 1551075745
    },
    {
        "content": "<p>the same argument applies directly to CDA, where it's OIDs instead of code systems URIs</p>",
        "id": 159315985,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1551075769
    },
    {
        "content": "<p>so it could be a 2 step. there is already an operation for the id wrangling:</p>",
        "id": 159315996,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1551075786
    },
    {
        "content": "<p>I wonder if this is a case for chaining, e.g. \"chaining\" a search result into $validate-code</p>",
        "id": 159315997,
        "sender_full_name": "Jim Steel",
        "timestamp": 1551075788
    },
    {
        "content": "<p><a href=\"http://hl7.org/fhir/namingsystem-operation-preferred-id.html\" target=\"_blank\" title=\"http://hl7.org/fhir/namingsystem-operation-preferred-id.html\">http://hl7.org/fhir/namingsystem-operation-preferred-id.html</a></p>",
        "id": 159316005,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1551075822
    },
    {
        "content": "<p>so you could require the client to use this $preferred-id operation first, and then make the terminology call</p>",
        "id": 159316067,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1551075939
    },
    {
        "content": "<p>or we could say that you can send a oid= or code0396= param instead, which then the server does an internal $preferred-id equvialent function</p>",
        "id": 159316122,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1551075985
    },
    {
        "content": "<p>(or implicit chaining)</p>",
        "id": 159316125,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1551075996
    },
    {
        "content": "<p>as far as chaining goes.... we've found that difficult because you have to do parameter name mapping and parameter form wrangling. There's no general case that's not too difficult to implement</p>",
        "id": 159316136,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1551076036
    },
    {
        "content": "<p>so - I'm looking for a straw vote: do you want some alternative parameters for the system url for oids and table 396 values</p>\n<ul>\n<li>thumbs up: yes, I think we should do something like that</li>\n<li>thumbs down: no, make it the clients problem </li>\n</ul>\n<p>(either answer will lead to follow up questions...)</p>",
        "id": 159316188,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1551076123
    },
    {
        "content": "<p>I feel like you put <code>http://terminology.hl7.org/CodeSystem/v2-0396|DCM</code> as an identifier (or the identifier) of the ValueSet for that element, then to use it you search for a ValueSet with that id, and use that for $validate-code</p>",
        "id": 159316287,
        "sender_full_name": "Jim Steel",
        "timestamp": 1551076296
    },
    {
        "content": "<p>Then down the track, maybe servers could support /fhir/ValueSet?identifier=http://terminology.hl7.org/CodeSystem/v2-0396|DCM/$validate-code?code=1234</p>",
        "id": 159316343,
        "sender_full_name": "Jim Steel",
        "timestamp": 1551076362
    },
    {
        "content": "<p>it's <em>not</em> value sets. It's code systems</p>",
        "id": 159316358,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1551076391
    },
    {
        "content": "<p>and $preferred-id is simpler for the client than asking the code systems to be correct</p>",
        "id": 159316361,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1551076423
    },
    {
        "content": "<p>ok</p>",
        "id": 159316405,
        "sender_full_name": "Jim Steel",
        "timestamp": 1551076445
    },
    {
        "content": "<p>though a server could inform it's answer to $preferred-id from identifiers in code system resources</p>",
        "id": 159316426,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1551076515
    },
    {
        "content": "<p>Why is it code systems &amp; not an 0396-named value set?</p>",
        "id": 159316730,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1551077037
    },
    {
        "content": "<p>table 0396 as used in CNE / CWE identifies the code system, not the value set (v2 also uses OIDs for value sets, like CDA), and we could have the discussion about how the value sets are identified. But I wanted to start with code systems first (build from the foundation, rather than in fantasy land)</p>",
        "id": 159316818,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1551077146
    },
    {
        "content": "<p>Why <code>NamingSystem/$preferred-id=</code> rather than <code>CodeSystem?identifier=</code> ?</p>",
        "id": 159317082,
        "sender_full_name": "Jim Steel",
        "timestamp": 1551077465
    },
    {
        "content": "<p>oh, of course you need the code system  when you reference the code in the validate-code call</p>",
        "id": 159317097,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1551077497
    },
    {
        "content": "<p>I think that for v2 and v3 both the calls should be as native as possible. Preferably no concepts introduced in a different HL7 family should be introduced. FHIR is all about implementers, these services should be too. So being able to work with what the instance provides directly seems key</p>",
        "id": 159317161,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1551077584
    },
    {
        "content": "<p>If we're adding a parameter to CodeSystem/$validate-code, could it just be an <code>identifier</code> parameter that matches the identifier of a CodeSystem resource ?</p>",
        "id": 159317520,
        "sender_full_name": "Jim Steel",
        "timestamp": 1551078174
    },
    {
        "content": "<p>so <code>/fhir/CodeSystem/$validate-code?identifier=http://terminology.hl7.org/CodeSystem/v2-0396|DCM&amp;code=1234</code> ?</p>",
        "id": 159317534,
        "sender_full_name": "Jim Steel",
        "timestamp": 1551078208
    },
    {
        "content": "<p>Yes that could be. What exactly the parameter would be was going to be my first follow up to a thumbs-up vote above</p>",
        "id": 159317984,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1551078950
    },
    {
        "content": "<p>I feel like identifier is less usecase-specific than something specific to 396  or oids</p>",
        "id": 159318037,
        "sender_full_name": "Jim Steel",
        "timestamp": 1551079004
    },
    {
        "content": "<p>It would be interesting to hear the view of someone from UTG on what the parameter might be - <span class=\"user-mention\" data-user-id=\"191982\">@Ted Klein</span> , <span class=\"user-mention\" data-user-id=\"191503\">@Robert McClure</span></p>",
        "id": 159322521,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1551085592
    },
    {
        "content": "<blockquote>\n<p>the same argument applies directly to CDA, where it's OIDs instead of code systems URIs</p>\n</blockquote>\n<p>OID value can be treated as url parameter, like</p>\n<div class=\"codehilite\"><pre><span></span>?url=urn:oid:2.16.840.1.113762.1.4.1010.2\n</pre></div>",
        "id": 159342073,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1551106104
    },
    {
        "content": "<blockquote>\n<p>OID value can be treated as url parameter</p>\n</blockquote>\n<p>That's syntactically valid, but not actually semantically correct, since URL is defined as the canonical value, and the OID is not (always, or even usually) the code system URL</p>",
        "id": 159381051,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1551136088
    }
]