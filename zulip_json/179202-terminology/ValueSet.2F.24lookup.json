[
    {
        "content": "<p>I'm currently prototyping ideas around /ValueSet/$lookup and am looking for input on what it should return:<br>\n1. A Parameters resource<br>\n2. A Bundle of Parameters<br>\n3. A Valueset with extension elements in the ValueSet.expansion.contains<br>\n4. Something else</p>\n<p>I'm currently tending towards 2 for symmetry with CodeSystem/$lookup</p>",
        "id": 157571530,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1549328085
    },
    {
        "content": "<p>Option 1 - a single Parameters Resource containing 0...* individual parameters. Isn't that actually what the CodeSystem $lookup operation currently returns,  rather than a Bundle of Parameters Resources? I don't see the word 'Bundle' mentioned in the definition of that operation.</p>",
        "id": 157572544,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1549329188
    },
    {
        "content": "<p>The down-side of 1 is that you can just take a Parameters and nest it inside a Parameters.  Code that works for /CodeSystem/$lookup can be trivially generalised to work for this case; this is much simpler when Bundle is used (although both require the actual code to be included in the Parameters response as well)</p>",
        "id": 157575908,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1549333613
    },
    {
        "content": "<p>Not quite sure how a Bundle of Parameters resources is any simpler than an individual Parameters resource with multiple parameter elements.</p>",
        "id": 157582691,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1549342309
    },
    {
        "content": "<p>If you already have code that consumes the output of CodeSystem/$lookup, then it's simple to re-use that code by passing in each member of the Bundle.  However, if you get back a Parameters, then it contains Parts, not Parameters, so you need to re-work your original code (and we need to decide on a name for those parts).</p>",
        "id": 157588828,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1549352745
    },
    {
        "content": "<p>I suggest providing an example of how Parameters--&gt;parameter--&gt;part is improved by Bundle--&gt;Parameters--&gt;parameter. If the complexity in the first alternative is the <a href=\"http://part.name\" target=\"_blank\" title=\"http://part.name\">part.name</a>, how is that is that reduced by the second? Using the second structure would mean that I couldn't re-use   the code from my CodeSystem $lookup operation without significant re-factoring.</p>",
        "id": 157591152,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1549355826
    },
    {
        "content": "<p>What is the purpose of ValueSet/$lookup and what is the difference compared to CodeSystem/$lookup?</p>",
        "id": 157610836,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1549377729
    },
    {
        "content": "<p>A ValueSet $lookup is a bit like a batch of CodeSystem $lookups for all of the codes in the expansion of the ValueSet</p>",
        "id": 157648367,
        "sender_full_name": "Jim Steel",
        "timestamp": 1549407369
    },
    {
        "content": "<p>Ah....so the use case is to lookup ALL of the codes in a ValueSet expansion?  Now, I understand the desire to return a Bundle of Parameters resources. I'm now wondering what the Request Parameters might look like in cases where a ValueSet contains concepts from more than one code system?</p>",
        "id": 157652519,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1549411334
    },
    {
        "content": "<p>the result Parameters needs to include the code itself (currently not included in the CodeSystem/$lookup) as well as the system (and version)</p>",
        "id": 157652566,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1549411421
    },
    {
        "content": "<p>As a concrete example, I have <code>[base]/ValueSet/$lookup?url=http://example.com/act-pi&amp;property=display&amp;property=inactive</code> returning the following</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"p\">{</span>\n    <span class=\"nt\">&quot;resourceType&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Bundle&quot;</span><span class=\"p\">,</span>\n    <span class=\"nt\">&quot;entry&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"p\">{</span>\n            <span class=\"nt\">&quot;resource&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n                <span class=\"nt\">&quot;resourceType&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Parameters&quot;</span><span class=\"p\">,</span>\n                <span class=\"nt\">&quot;parameter&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n                    <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;code&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;valueString&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;387067003&quot;</span>\n                    <span class=\"p\">},</span>\n                    <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;display&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;valueString&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Lopinavir&quot;</span>\n                    <span class=\"p\">},</span>\n                    <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;property&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;part&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n                            <span class=\"p\">{</span>\n                                <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;code&quot;</span><span class=\"p\">,</span>\n                                <span class=\"nt\">&quot;valueCode&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;inactive&quot;</span>\n                            <span class=\"p\">},</span>\n                            <span class=\"p\">{</span>\n                                <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;valueBoolean&quot;</span><span class=\"p\">,</span>\n                                <span class=\"nt\">&quot;valueBoolean&quot;</span><span class=\"p\">:</span> <span class=\"kc\">false</span>\n                            <span class=\"p\">}</span>\n                        <span class=\"p\">]</span>\n                    <span class=\"p\">}</span>\n                <span class=\"p\">]</span>\n            <span class=\"p\">}</span>\n        <span class=\"p\">},</span>\n        <span class=\"p\">{</span>\n            <span class=\"nt\">&quot;resource&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n                <span class=\"nt\">&quot;resourceType&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Parameters&quot;</span><span class=\"p\">,</span>\n                <span class=\"nt\">&quot;parameter&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n                    <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;code&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;valueString&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;710109003&quot;</span>\n                    <span class=\"p\">},</span>\n                    <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;display&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;valueString&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Cobicistat&quot;</span>\n                    <span class=\"p\">},</span>\n                    <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;property&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;part&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n                            <span class=\"p\">{</span>\n                                <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;code&quot;</span><span class=\"p\">,</span>\n                                <span class=\"nt\">&quot;valueCode&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;inactive&quot;</span>\n                            <span class=\"p\">},</span>\n                            <span class=\"p\">{</span>\n                                <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;valueBoolean&quot;</span><span class=\"p\">,</span>\n                                <span class=\"nt\">&quot;valueBoolean&quot;</span><span class=\"p\">:</span> <span class=\"kc\">false</span>\n                            <span class=\"p\">}</span>\n                        <span class=\"p\">]</span>\n                    <span class=\"p\">}</span>\n                <span class=\"p\">]</span>\n            <span class=\"p\">}</span>\n        <span class=\"p\">},</span>\n        <span class=\"p\">{</span>\n            <span class=\"nt\">&quot;resource&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n                <span class=\"nt\">&quot;resourceType&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Parameters&quot;</span><span class=\"p\">,</span>\n                <span class=\"nt\">&quot;parameter&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n                    <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;code&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;valueString&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;428318002&quot;</span>\n                    <span class=\"p\">},</span>\n                    <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;display&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;valueString&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Darunavir ethanolate&quot;</span>\n                    <span class=\"p\">},</span>\n                    <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;property&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;part&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n                            <span class=\"p\">{</span>\n                                <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;code&quot;</span><span class=\"p\">,</span>\n                                <span class=\"nt\">&quot;valueCode&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;inactive&quot;</span>\n                            <span class=\"p\">},</span>\n                            <span class=\"p\">{</span>\n                                <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;valueBoolean&quot;</span><span class=\"p\">,</span>\n                                <span class=\"nt\">&quot;valueBoolean&quot;</span><span class=\"p\">:</span> <span class=\"kc\">false</span>\n                            <span class=\"p\">}</span>\n                        <span class=\"p\">]</span>\n                    <span class=\"p\">}</span>\n                <span class=\"p\">]</span>\n            <span class=\"p\">}</span>\n        <span class=\"p\">},</span>\n        <span class=\"p\">{</span>\n            <span class=\"nt\">&quot;resource&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n                <span class=\"nt\">&quot;resourceType&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Parameters&quot;</span><span class=\"p\">,</span>\n                <span class=\"nt\">&quot;parameter&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n                    <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;code&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;valueString&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;372529006&quot;</span>\n                    <span class=\"p\">},</span>\n                    <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;display&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;valueString&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Indinavir&quot;</span>\n                    <span class=\"p\">},</span>\n                    <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;property&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;part&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n                            <span class=\"p\">{</span>\n                                <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;code&quot;</span><span class=\"p\">,</span>\n                                <span class=\"nt\">&quot;valueCode&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;inactive&quot;</span>\n                            <span class=\"p\">},</span>\n                            <span class=\"p\">{</span>\n                                <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;valueBoolean&quot;</span><span class=\"p\">,</span>\n                                <span class=\"nt\">&quot;valueBoolean&quot;</span><span class=\"p\">:</span> <span class=\"kc\">false</span>\n                            <span class=\"p\">}</span>\n                        <span class=\"p\">]</span>\n                    <span class=\"p\">}</span>\n                <span class=\"p\">]</span>\n            <span class=\"p\">}</span>\n        <span class=\"p\">},</span>\n        <span class=\"p\">{</span>\n            <span class=\"nt\">&quot;resource&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n                <span class=\"nt\">&quot;resourceType&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Parameters&quot;</span><span class=\"p\">,</span>\n                <span class=\"nt\">&quot;parameter&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n                    <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;code&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;valueString&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;736536005&quot;</span>\n                    <span class=\"p\">},</span>\n                    <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;display&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;valueString&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Voxilaprevir&quot;</span>\n                    <span class=\"p\">},</span>\n                    <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;property&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;part&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n                            <span class=\"p\">{</span>\n                                <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;code&quot;</span><span class=\"p\">,</span>\n                                <span class=\"nt\">&quot;valueCode&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;inactive&quot;</span>\n                            <span class=\"p\">},</span>\n                            <span class=\"p\">{</span>\n                                <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;valueBoolean&quot;</span><span class=\"p\">,</span>\n                                <span class=\"nt\">&quot;valueBoolean&quot;</span><span class=\"p\">:</span> <span class=\"kc\">false</span>\n                            <span class=\"p\">}</span>\n                        <span class=\"p\">]</span>\n                    <span class=\"p\">}</span>\n                <span class=\"p\">]</span>\n            <span class=\"p\">}</span>\n        <span class=\"p\">},</span>\n        <span class=\"p\">{</span>\n            <span class=\"nt\">&quot;resource&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n                <span class=\"nt\">&quot;resourceType&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Parameters&quot;</span><span class=\"p\">,</span>\n                <span class=\"nt\">&quot;parameter&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n                    <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;code&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;valueString&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;386896009&quot;</span>\n                    <span class=\"p\">},</span>\n                    <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;display&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;valueString&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Ritonavir&quot;</span>\n                    <span class=\"p\">},</span>\n                    <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;property&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;part&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n                            <span class=\"p\">{</span>\n                                <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;code&quot;</span><span class=\"p\">,</span>\n                                <span class=\"nt\">&quot;valueCode&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;inactive&quot;</span>\n                            <span class=\"p\">},</span>\n                            <span class=\"p\">{</span>\n                                <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;valueBoolean&quot;</span><span class=\"p\">,</span>\n                                <span class=\"nt\">&quot;valueBoolean&quot;</span><span class=\"p\">:</span> <span class=\"kc\">false</span>\n                            <span class=\"p\">}</span>\n                        <span class=\"p\">]</span>\n                    <span class=\"p\">}</span>\n                <span class=\"p\">]</span>\n            <span class=\"p\">}</span>\n        <span class=\"p\">},</span>\n        <span class=\"p\">{</span>\n            <span class=\"nt\">&quot;resource&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n                <span class=\"nt\">&quot;resourceType&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Parameters&quot;</span><span class=\"p\">,</span>\n                <span class=\"nt\">&quot;parameter&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n                    <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;code&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;valueString&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;108701009&quot;</span>\n                    <span class=\"p\">},</span>\n                    <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;display&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;valueString&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Saquinavir mesylate&quot;</span>\n                    <span class=\"p\">},</span>\n                    <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;property&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;part&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n                            <span class=\"p\">{</span>\n                                <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;code&quot;</span><span class=\"p\">,</span>\n                                <span class=\"nt\">&quot;valueCode&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;inactive&quot;</span>\n                            <span class=\"p\">},</span>\n                            <span class=\"p\">{</span>\n                                <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;valueBoolean&quot;</span><span class=\"p\">,</span>\n                                <span class=\"nt\">&quot;valueBoolean&quot;</span><span class=\"p\">:</span> <span class=\"kc\">false</span>\n                            <span class=\"p\">}</span>\n                        <span class=\"p\">]</span>\n                    <span class=\"p\">}</span>\n                <span class=\"p\">]</span>\n            <span class=\"p\">}</span>\n        <span class=\"p\">},</span>\n        <span class=\"p\">{</span>\n            <span class=\"nt\">&quot;resource&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n                <span class=\"nt\">&quot;resourceType&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Parameters&quot;</span><span class=\"p\">,</span>\n                <span class=\"nt\">&quot;parameter&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n                    <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;code&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;valueString&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;387006009&quot;</span>\n                    <span class=\"p\">},</span>\n                    <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;display&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;valueString&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Amprenavir&quot;</span>\n                    <span class=\"p\">},</span>\n                    <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;property&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;part&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n                            <span class=\"p\">{</span>\n                                <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;code&quot;</span><span class=\"p\">,</span>\n                                <span class=\"nt\">&quot;valueCode&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;inactive&quot;</span>\n                            <span class=\"p\">},</span>\n                            <span class=\"p\">{</span>\n                                <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;valueBoolean&quot;</span><span class=\"p\">,</span>\n                                <span class=\"nt\">&quot;valueBoolean&quot;</span><span class=\"p\">:</span> <span class=\"kc\">false</span>\n                            <span class=\"p\">}</span>\n                        <span class=\"p\">]</span>\n                    <span class=\"p\">}</span>\n                <span class=\"p\">]</span>\n            <span class=\"p\">}</span>\n        <span class=\"p\">},</span>\n        <span class=\"p\">{</span>\n            <span class=\"nt\">&quot;resource&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n                <span class=\"nt\">&quot;resourceType&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Parameters&quot;</span><span class=\"p\">,</span>\n                <span class=\"nt\">&quot;parameter&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n                    <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;code&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;valueString&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;714420001&quot;</span>\n                    <span class=\"p\">},</span>\n                    <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;display&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;valueString&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Paritaprevir&quot;</span>\n                    <span class=\"p\">},</span>\n                    <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;property&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;part&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n                            <span class=\"p\">{</span>\n                                <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;code&quot;</span><span class=\"p\">,</span>\n                                <span class=\"nt\">&quot;valueCode&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;inactive&quot;</span>\n                            <span class=\"p\">},</span>\n                            <span class=\"p\">{</span>\n                                <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;valueBoolean&quot;</span><span class=\"p\">,</span>\n                                <span class=\"nt\">&quot;valueBoolean&quot;</span><span class=\"p\">:</span> <span class=\"kc\">false</span>\n                            <span class=\"p\">}</span>\n                        <span class=\"p\">]</span>\n                    <span class=\"p\">}</span>\n                <span class=\"p\">]</span>\n            <span class=\"p\">}</span>\n        <span class=\"p\">},</span>\n        <span class=\"p\">{</span>\n            <span class=\"nt\">&quot;resource&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n                <span class=\"nt\">&quot;resourceType&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Parameters&quot;</span><span class=\"p\">,</span>\n                <span class=\"nt\">&quot;parameter&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n                    <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;code&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;valueString&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;419409009&quot;</span>\n                    <span class=\"p\">},</span>\n                    <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;display&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;valueString&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Tipranavir&quot;</span>\n                    <span class=\"p\">},</span>\n                    <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;property&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;part&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n                            <span class=\"p\">{</span>\n                                <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;code&quot;</span><span class=\"p\">,</span>\n                                <span class=\"nt\">&quot;valueCode&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;inactive&quot;</span>\n                            <span class=\"p\">},</span>\n                            <span class=\"p\">{</span>\n                                <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;valueBoolean&quot;</span><span class=\"p\">,</span>\n                                <span class=\"nt\">&quot;valueBoolean&quot;</span><span class=\"p\">:</span> <span class=\"kc\">false</span>\n                            <span class=\"p\">}</span>\n                        <span class=\"p\">]</span>\n                    <span class=\"p\">}</span>\n                <span class=\"p\">]</span>\n            <span class=\"p\">}</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">]</span>\n<span class=\"p\">}</span>\n</pre></div>",
        "id": 157653884,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1549412902
    },
    {
        "content": "<p>If this is to be based on an expansion of a ValueSet, I'm wondering if that (expanded) ValueSet would have to be passed as an input parameter to the lookup operation?</p>",
        "id": 157654344,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1549413456
    },
    {
        "content": "<p>Yes,  that's the <code>url</code> parameter in the call above</p>",
        "id": 157692057,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1549461945
    },
    {
        "content": "<p>...but that's a reference to a ValueSet Resource, not the Resource itself.</p>",
        "id": 157721825,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1549484012
    },
    {
        "content": "<p>oh, sorry, I misread your question.  no, the <em>expanded</em> valueset doesn't need to be supplied; it is the job of the terminology server to do the expansion.  Of course, you could POST a valueset definition that enumerates the set of codes you want to look up (a common use-case), but the operation would not rely on being supplied an existing expansion.</p>",
        "id": 157728672,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1549489149
    },
    {
        "content": "<p>If the purpose is to include designation in valueset expansion, why not just add property parameter to $expand operation.</p>",
        "id": 157789576,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1549556579
    },
    {
        "content": "<p>The purpose is to access arbitrary <em>properties</em> of many concepts in a single call.  Designations are already supported by $expand.</p>\n<p>One option is to perform many $lookup operations in a batch request but this has performance issues:</p>\n<ul>\n<li>complex to optimise because the batch may consist of many things,  not just $lookup and you can't rely on all the $lookups only varying in the code/system being targeted</li>\n<li>batch is always a POST and that can't be cached (at the HTTP layer)</li>\n</ul>\n<p>Accepting that special support for this use case is needed, it seems like a ValueSet is a reasonable way to identify the set of concepts that you're interested in; you can enumerate them in the compose or specify inclusion/exclusion criteria or use implicit ValueSets (great for SNOMED &amp; LOINC)</p>\n<p>Extending ValueSet/$expand with property parameters would be one option, but there's no obvious place to put the resulting property values (they are not designations) so an extension would be needed.</p>\n<p>Instead, defining ValueSet/$lookup, as above, has an appealing symmetry</p>",
        "id": 157835429,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1549600714
    },
    {
        "content": "<p>There is something about it notionally that still is asymmetric, I think (although I don't know how much, if at all, that matters).  When we do a $lookup on CodeSystem we are not looking up the properties for <strong>all</strong> concepts in the code system, but only for a <strong>single</strong> specified concept.  The reason for that likely is that we don't (yet) have a Concept resource, which if we had it would seem to be the logical place to attach a single concept lookup, plus from a practical standpoint looking up the properties for all of the codes in a code system in a single operation often wouldn't be useful and for many large code systems would almost certainly be intractable.  But I think it's something to keep in mind.</p>",
        "id": 157865733,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1549638685
    },
    {
        "content": "<p>ValueSet expansion already has designation in it. I don't see any problem add \"properties 0..*\" to valueSet.expansion.contains. This also simplifies the returning format.</p>",
        "id": 157865848,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1549638781
    }
]