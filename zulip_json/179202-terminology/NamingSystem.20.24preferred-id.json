[
    {
        "content": "<p>Any thoughts on adding the new (and rather useful) $preferred-id operation on NamingSystem to the TerminologyCapabilities resource? Has anyone else implemented it yet (will be in the new version of Terminz, for the R4 May 18 build, at the weekend)?</p>",
        "id": 153953100,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1524112786
    },
    {
        "content": "<p>I have not yet implemented it - keeping up is starting to get hard...</p>",
        "id": 153953103,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1524114616
    },
    {
        "content": "<p>I think that the role it plays in a terminology server is once people start using FHIR terminology services in the context of v2, CDA, or openEHR, where the FHIR code system URL is not in use</p>",
        "id": 153953104,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1524114654
    },
    {
        "content": "<p>This appears to be the only operation in the FHIR spec that contains an input parameter called 'id'. This is causing issues with the routing templates in the Controller Class of my .NET Web API server (kindly provided by <span class=\"user-mention\" data-user-id=\"191367\">@Brian Postlethwaite</span>) which treats it as a Resource id.  Any objections if I create a ticket to rename this 'identifier'.</p>",
        "id": 197648929,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1589519311
    },
    {
        "content": "<p><a href=\"https://jira.hl7.org/browse/FHIR-27136\">JIRA</a></p>",
        "id": 197654599,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1589526651
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191364\">@Peter Jordan</span>  got some details on where the issue is, I'm doing some updates to the API project at the moment and could do some updates for you.</p>",
        "id": 197777869,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1589606306
    },
    {
        "content": "<p>P. S. Will also be adding it to the public NuGet, so you won't have to build it yourself anymore too.</p>",
        "id": 197777880,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1589606355
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191367\">@Brian Postlethwaite</span>  The Routing Template in the Controller Class that's 'upset' by having an id parameter in the query string is...<br>\n [HttpGet, Route(\"fhir/{resource}/{id=null}/{operation=null}\")]<br>\nWhen that's used with the following GET request it matches the id parameter with the {id} element in the template and ignores the {operation} element (possibly because that element precedes the id parameter)...<br>\nGET [base] /NamingSystem/$preferred-id?id=2.16.840.1.113883.2.18.2&amp;type=uri<br>\nI did a quick search to see if there was an easy fix - i.e. an 'ignore query string' template setting, but couldn't see anything.<br>\nSubsequently, I changed the parameter name to 'identifier' and it all worked.</p>",
        "id": 197816268,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1589664853
    },
    {
        "content": "<p>I'll see if there is something I can do there. Maybe moving the $outside the operation name, or using the [From Query] attribute mark-up.</p>",
        "id": 197819872,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1589670962
    },
    {
        "content": "<p>I did a quick unit test and didn't see it.<br>\nAre you in netcore or the owin version (full framework)</p>",
        "id": 197821167,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1589673288
    },
    {
        "content": "<p>I'm using Web API - can't recall where I downloaded it from - what's the equivalent routing template in the versions you're looking at?</p>",
        "id": 197821289,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1589673536
    },
    {
        "content": "<p>Full framework or netcore?</p>",
        "id": 197821344,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1589673604
    },
    {
        "content": "<p>Full framework.</p>",
        "id": 197822194,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1589675156
    },
    {
        "content": "<p>Will take a look in that code later.</p>",
        "id": 197824293,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1589679322
    },
    {
        "content": "<p><a href=\"http://localhost:7931/NamingSystem/$preferred-id?id=45&amp;type=uri\">http://localhost:7931/NamingSystem/$preferred-id?id=45&amp;type=uri</a><br>\nGoes into the correct Perform operation.<br>\nCan you share the link to the source in the github code that you're seeing it hit?<br>\n(this might be an older version)<br>\nIn debugging the above query, it is hitting this line in the FhirController<br>\n<a href=\"https://github.com/brianpos/fhir-net-web-api/blob/33abebf2b903bd57046e5c4629e4f67c0c1d5234/src/Hl7.Fhir.WebApi.Owin/FhirController.cs#L263\">https://github.com/brianpos/fhir-net-web-api/blob/33abebf2b903bd57046e5c4629e4f67c0c1d5234/src/Hl7.Fhir.WebApi.Owin/FhirController.cs#L263</a></p>",
        "id": 197824807,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1589680359
    },
    {
        "content": "<p>...well that line implements [HttpPost, Route(\"{ResourceName}/${operation}\")] - rather than [HttpGet, Route(\"{ResourceName}/${operation}\")]<br>\nBUT, I note the use of the $ sign in the template and that's what I may be missing - so will give that a try.</p>",
        "id": 197826568,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1589683419
    },
    {
        "content": "<p>Ok, I'll recheck my debugger to see if it is doing a get or post.</p>",
        "id": 197826805,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1589683857
    },
    {
        "content": "<p>Sorry, that was a local branch vs local branch change thing.<br>\nIt was going through the function that takes the get right above it.</p>",
        "id": 197827153,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1589684458
    }
]