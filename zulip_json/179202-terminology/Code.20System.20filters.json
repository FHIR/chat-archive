[
    {
        "content": "<p>@Rob, with regard to <a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=10221\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=10221\">GF#10221</a>, I made a mistake in the expression of this, which caused you to create the wrong disposition in the block vote, and I didn't pick up on it </p>",
        "id": 153837698,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468352778
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span>. The description should have read:</p>",
        "id": 153837699,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468352795
    },
    {
        "content": "<p>There's a set of filters that are inherent in the structure of the *Code system resource* - for example, is_a. Do these need to be explicitly documented in a code system resource, or are they implied? (if stated explicitly in the spec, which they aren't, so this should be addressed)</p>",
        "id": 153837700,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468352819
    },
    {
        "content": "<p>so the question was: must you explicitly define the filters in every code system, or can we define them once in the spec</p>",
        "id": 153837701,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468352868
    },
    {
        "content": "<p>the filters are: <br>\nconcept is-a / is-not-a / regex / in / not-in</p>",
        "id": 153837702,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468353062
    },
    {
        "content": "<p>e,g. any code system defined using the code system resource, these apply</p>",
        "id": 153837703,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468353077
    },
    {
        "content": "<p>well, that is, *if* the heirarchy is based on subsumption. which we don't let you say....</p>",
        "id": 153837704,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468353095
    },
    {
        "content": "<p>that makes sense - so presumably, then, we should open this up again on the call next week?</p>",
        "id": 153837709,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1468354581
    },
    {
        "content": "<p>well, I need to commit before then - so if we can decide on something here with enough consensus....?</p>",
        "id": 153837710,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468354865
    },
    {
        "content": "<p>though maybe, given the problem of heirarchy, we can't?</p>",
        "id": 153837711,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468354884
    },
    {
        "content": "<p>getting back to this - the problem is, if we say that you define the filters above explicitly in every code system, that becomes a proxy marker for 'meaning of heirarchy'. if we define it implicitly in the spec, we need to define the 'meaning of heirarchy' element explicitly. </p>",
        "id": 153837756,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468364575
    },
    {
        "content": "<p>the first sits badly with me with regard to outcomes. The second sits badly with me with regard to process. I guess I reopen this task, send it back to committee, and it won't make it into the Spet ballot</p>",
        "id": 153837757,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468364667
    },
    {
        "content": "<p>Regarding the filter 'regex' - is the a standard set of properties that this applies to, or is it all properties of the CodeSystem or is it CodeSystem-specific?</p>",
        "id": 153837787,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1468373491
    },
    {
        "content": "<p>there's no reason that we can't do an evote, if needed (and it appears to be in this case)<br>\nwe haven't done a lot of that in Vocab, but that doesn't mean that we can't or shouldn't<br>\nI think we should try to get it resolved and in for Sept.</p>",
        "id": 153837792,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1468373865
    },
    {
        "content": "<p>regex specifically refers to the code, and no other property</p>",
        "id": 153837796,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468373990
    },
    {
        "content": "<p>let's go for an eVote then. but what to propose? we hvave 2 decisions - about ExpansionProfile, and this one</p>",
        "id": 153837798,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468374050
    },
    {
        "content": "<p>ewww... regex vs code? that's seriously skanky</p>",
        "id": 153837801,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1468374110
    },
    {
        "content": "<p>it's really useful in classifications that have the structure explicit in the code. otherwise, not so useful</p>",
        "id": 153837806,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468374149
    },
    {
        "content": "<p>very steam-punk</p>",
        "id": 153837808,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1468374195
    },
    {
        "content": "<p>I've been lured down the path of embedding knowledge into cryptic little regular strings... it rapidly fails-to-scale tho... but meh</p>",
        "id": 153837812,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1468374354
    },
    {
        "content": "<p>ICD-X...</p>",
        "id": 153837813,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468374356
    },
    {
        "content": "<p>case in point :-)</p>",
        "id": 153837814,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1468374367
    },
    {
        "content": "<p>you'll find nearly unanimous agree here that's a Very Bad Idea. but that doesn't mean that other people don't do it </p>",
        "id": 153837815,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468374397
    },
    {
        "content": "<p>everyone thinks oh I'll just <code>/^E09.*/</code> and i'll be fine...</p>",
        "id": 153837816,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1468374421
    },
    {
        "content": "<p>like the capitals :-) VBI... mind you I can see me doing it...</p>",
        "id": 153837817,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1468374457
    },
    {
        "content": "<p>so, I still very much prefer to add an element to define that the meaning of the code system is heirarchical, and then define implicit filters as part of the code system resource. </p>",
        "id": 153837818,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468374473
    },
    {
        "content": "<p>can we get an eVote together on that? One that even <span class=\"user-mention\" data-user-id=\"191503\">@Robert McClure</span> might support?</p>",
        "id": 153837819,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468374508
    },
    {
        "content": "<p>still not sure why you need an element to tell you if it's hierarchical<br>\nif it's a flat list, it's not<br>\nand if it has is-a (or part-of) relationships, it is</p>",
        "id": 153837826,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1468374711
    },
    {
        "content": "<p>or nesting of any kind</p>",
        "id": 153837827,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1468374730
    },
    {
        "content": "<p>well - that's exactly it: if it has heirarchy, it has is-a, or part-of, relationships (though we strictly identified a 3rd, in the classification space)</p>",
        "id": 153837829,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468374765
    },
    {
        "content": "<p>where as all the operations are specific: is-a. not part-of or classified-with</p>",
        "id": 153837830,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468374797
    },
    {
        "content": "<p>right</p>",
        "id": 153837831,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1468374815
    },
    {
        "content": "<p>so not providing that information specifically leaves the terminology service guessing</p>",
        "id": 153837832,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468374845
    },
    {
        "content": "<p>if we add the element - which vocab turned down before - then we can say that the is-a based operations can be used on the value set *if* the code system says it's subsumption based </p>",
        "id": 153837833,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468374923
    },
    {
        "content": "<p>I think that the vocab call got distracted on the edge cases where a single terminology has more than one kind of relationship isn it's heirarchy. In which case, a/ it's too complex for CodeSystem anyway and b/ if you really want to use code system, don't use the heirarchy</p>",
        "id": 153837834,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468374989
    },
    {
        "content": "<p>that's probably right<br>\nI guess it's not unreasonable to ask for the CodeSystem resource to declare the capabilities of the code system for use with the is-a operation</p>",
        "id": 153837836,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1468375137
    },
    {
        "content": "<p>well put</p>",
        "id": 153837840,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468375225
    },
    {
        "content": "<p>curious for an example of distinction between <code>is-a</code> and <code>classified-with</code>...<br>\nalso wondering why a terminology service would ever be left guessing because I would have assumed that a terminology service grokked the terminologies it was peddling (sorry more noob questions)</p>",
        "id": 153837844,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1468375472
    },
    {
        "content": "<p>the discussion refers to code systems made available to the terminology through the code system resource. </p>",
        "id": 153837847,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468375653
    },
    {
        "content": "<p>and we are dealing with how it will grok them. because right now, for instance, you would not know which of the v3 code systems has a heiarachy that is not subsumption based (there's a very few)</p>",
        "id": 153837848,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468375697
    },
    {
        "content": "<p>technically, a good classification will ensure that the heirarchy is strictly subsumption based. But a close examiniation of some of them demonstrates that there's no intensional or extensional definition provided (or even possible) some classifications that includes all the sub-categories</p>",
        "id": 153837849,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468375798
    },
    {
        "content": "<p>so this is effectively about rubbish classifications saying \"I'm rubbish\"?</p>",
        "id": 153837850,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1468376001
    },
    {
        "content": "<p>that's one way to phrase it</p>",
        "id": 153837851,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468376016
    },
    {
        "content": "<p>trouble usually is that one person's rubbish is another's treasure...</p>",
        "id": 153837852,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1468376067
    },
    {
        "content": "<p>or \"it seemed like treasure when we put it together, but now we've sobered up... not so much\"</p>",
        "id": 153837853,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1468376165
    },
    {
        "content": "<p>(ie just wondering how much order can be extracted from woolly judgement calls about regularity lost in translation)</p>",
        "id": 153837854,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1468376253
    },
    {
        "content": "<p>because I'm finding it difficult to imagine people deliberately constructing a hierarchy that at the time didn't feel like a classification</p>",
        "id": 153837855,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1468376312
    },
    {
        "content": "<p>off-topic, with regard to seemed like treasure when drunk: <a href=\"http://m.nzherald.co.nz/lifestyle/news/article.cfm?c_id=6&amp;objectid=11673006\" target=\"_blank\" title=\"http://m.nzherald.co.nz/lifestyle/news/article.cfm?c_id=6&amp;objectid=11673006\">http://m.nzherald.co.nz/lifestyle/news/article.cfm?c_id=6&amp;objectid=11673006</a></p>",
        "id": 153837856,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468376316
    },
    {
        "content": "<p>sorry naive rambling as usual </p>",
        "id": 153837857,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1468376327
    },
    {
        "content": "<p>but i may take my spouse to see Tarzan...</p>",
        "id": 153837859,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1468376481
    },
    {
        "content": "<p>It's confusing: \"The specified property of the code...\" which doesn't sound like the code itself.  Also, which flavour of regex?</p>",
        "id": 153837867,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1468379522
    },
    {
        "content": "<p>the filter specifies what it applies to. but It doesn'tactually  say right now, and that's what I want to fix</p>",
        "id": 153837870,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468380076
    },
    {
        "content": "<p>simplistically, is-a will always lead to a need for poly-hierarchy (DAG); any statistical classification will be a mono-hierarchy (tree), so you get missing is-a relationships.  Further, when you have NEC and NOS codes, these play havoc with a strict is-a interpretation</p>",
        "id": 153837874,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1468380361
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191343\">@Michael Lawley</span> is that in reference to my question?</p>",
        "id": 153837912,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1468387155
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192001\">@Erich Schulz</span> yes :-)  The lack of reply threading is pretty frustrating :-(</p>",
        "id": 153837917,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1468390199
    },
    {
        "content": "<p>ok cool - I guess I have quibble with the <code>classified-with</code> as it misses the point that with statistical classification trees and DAGs the issue isn't with the relationships (I'd argue both are really <code>is-a-subclass-of</code>links) the issue really is that the codes themselves have occult meaning partially defined by the relationships (and the NEC rules etc)</p>",
        "id": 153837926,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1468392381
    },
    {
        "content": "<p>well, that's what I was atttempting to get at: this code system is actually a classification where the heirarchical relationships is authoritative for classification, but you should not attempt to interpret it as strictly subsumptive. </p>",
        "id": 153837927,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468393753
    },
    {
        "content": "<p>I guess I'm saying the problem start before you even try to do subsumption, expansion...<br>\neg <a href=\"http://apps.who.int/classifications/icd10/browse/2016/en#/X\" target=\"_blank\" title=\"http://apps.who.int/classifications/icd10/browse/2016/en#/X\">http://apps.who.int/classifications/icd10/browse/2016/en#/X</a></p>",
        "id": 153837928,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1468394493
    },
    {
        "content": "<p>not sure what you mean the problem is </p>",
        "id": 153837929,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468394525
    },
    {
        "content": "<p>the problem is that the code itself has occult meaning...<br>\nie <code>^J.*/</code> does not equal \"Diseases of the respiratory system\"</p>",
        "id": 153837930,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1468394599
    },
    {
        "content": "<p>it means \"*some* Diseases of the respiratory system\"</p>",
        "id": 153837931,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1468394632
    },
    {
        "content": "<p>right</p>",
        "id": 153837932,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468394640
    },
    {
        "content": "<p>i'm not sure its a big deal - its just that the relationships that are stated are actually fine...<br>\nits just they are incomplete</p>",
        "id": 153837933,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1468394697
    },
    {
        "content": "<p>I maybe splitting hairs</p>",
        "id": 153837934,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1468394719
    },
    {
        "content": "<p>Folks, trying to follow this so you can get to an eVote if that is desired. To some degree the words are tripping us up so let me say what my words are: Subsumption means the hierarchy is transitive along whatever the the hierarchical relationship is. I tend to think of transitivity as a state and subsumption as the action based on that state but they essentially say the same thing - BUT you must know what relation is defined as transitive before you use the hierarchy. I know Graham this is why you want the hierarchy type clearly defined and I agree it's useful. </p>\n<p>There are two transitive relations (that I know of off the top of my head but there are likely others in specialized systems - I think genetics has some odd ones.) Those are:  IS-A then the child \"IS-A\" kind of whatever the parent seems to be. The other is \"Part of\", (whole-part or meronomic) then the child is part of the parent. It is my understanding that such a hierarchy also supports what we'd call \"Subsumption\". </p>\n<p>Another hierarchy is \"a classification hierarchy\" which is a slippery phrase because that word is used in DL when one uses logic to create an inferred hierarchy al la SCT. But when we use the word \"classification hierarchy\" we usually mean what you all have been calling \"a statistical classification\" such as ICD. These are by definition a single hierarchy that is a closed world - everything MUST fit. In this case the relations are by definition NOT Transitive (in logic) but to a human, some of them may seem to be so. </p>\n<p>Finaly we have the \"What ever I want\" hierarchy (parent-child) that is essentially \"grouped-by\". This is not transitive and does not support subsumption.</p>\n<p>I sense from this that you want to be able to know when using transitive closures makes sense in a value set definition, or some other \"subsumption-based\" queries and I absolutely agree with this. Graham, If this is exactly the issue that was voted down by vocab before then we must have been talking past each other. I'd vote to add this as an element of the code system resource. It would be my preference to make this very explicit. In DTS for example all concepts are related to each other via named relationships and one of those is defined as the hierarchial relation AND it is flagged as transitive or not. The meaning of the transivity is reflected in the meaning of the relation (e.g: IS-A versus part-of). We could cover all the bases by making a default hierarchy relation (as was discussed in the other thread) - grouped-by. If the hierarchy is more specific, IS-A, Part-Of, or Classification-of should also be available to use. You can then flag it as transitive (this should be limited to the first two choices. )</p>\n<p>Would that (or something like it) be ok?</p>",
        "id": 153838546,
        "sender_full_name": "Robert McClure",
        "timestamp": 1468544774
    },
    {
        "content": "<p>ok thanks. sounds like progress. But surely, given the definitions of is-a and part-of, those relationships must be transitive?</p>",
        "id": 153838555,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468545329
    },
    {
        "content": "<p>and given the definitions of 'grouped-by' and 'classified with' - they might be transitive, but the who the hell cares?</p>",
        "id": 153838556,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468545378
    },
    {
        "content": "<p>so I'd argue that we should add an element to classify the heirarchy that has 1..1 cardinality, and a value of grouped-by | classified-with | is-a | part-of, and where we say that is-a and part-of are implicitly transitive by their definition, and any transitivity associated with the other 2 can only be established by carefully considering the definitions (likely to be different through the heirarchy, and probably mostly ambiguous)</p>",
        "id": 153838557,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468545527
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> I agree with that approach pending your thoughts on these two questions:<br>\n1) Understanding that \"grouped-by\" is a general use case and that \"careful consideration\" could result in determining that the hierarchy is transitive (the code system could state that explictly), in that situation could a FHIR implementer still execute the transitive closure operations on that code system?<br>\n2) What do we do with a code system that has explicit relations between the code that are used to form the hierarchy and they are not \"grouped-by\" - they use a different named relationship. Is there a reason this process would care? We'd want to be able to capture that actual relationship in the representation of the code system even though in this case we are calling it \"grouped-by\". </p>",
        "id": 153838733,
        "sender_full_name": "Robert McClure",
        "timestamp": 1468601270
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191503\">@Robert McClure</span> Good questions.  If we can't come up with notions of a need for performing $closure and $subsumes operations on hierarchical code systems that are not based on either is-a or part-of, then Grahame's approach may work just fine. </p>",
        "id": 153838739,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1468603563
    },
    {
        "content": "<p>$closure is specificaiily defined as subsumption only. So the question isn't relevant. If you think we need to extend closure (and $subsumes) to non- is-a heirarchies, that would be a different discussion. </p>",
        "id": 153838751,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468614408
    },
    {
        "content": "<p>as I understood your project, 'grouped-by' was not a 'name', it's a classification. People could call their relationship whatever they wanted (could use an extension if they wanted to)</p>",
        "id": 153838752,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468614457
    },
    {
        "content": "<p>Transitive closure in general is based on transitivity, and isn't dependent on strict subsumption - it can be on any transitive binary relation.  If we're defining it to be for subsumption only, we can certainly do that, but we don't really have to.  So that's where the question could become relevant.</p>",
        "id": 153838841,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1468635081
    },
    {
        "content": "<p>well, we are defining it for subsumption only. is that a problem?</p>",
        "id": 153838873,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468647100
    },
    {
        "content": "<p>You know, I now realize we've not been quite correct in our use of words, myself included. I've been using the word \"transitive\" to mean not only \"related to\", which is the actual formal logic definition, but also to mean \"inherits\" and I'm pretty sure that is not formally true. A transitive closure operation is used to find all entites that \"are related\" (given a defined or default relation) to the root of the closure via a graph closure. This means that _every_ hierarchy should support a graph closure operation, i.e.: a transitive closure. As I try to piece this to gether in my head I suspect we could/should be using the word \"Transitive\" as another way of naming the hierarchical relation - i.e.: it is \"the transitive\" relation. The idea that via that (or any other) relation the related concept _inherits_ the attributes of the source concept is a separate notion of _inheritance_. Based on this \"Subsumption\" where A subsumes B is a state where the relationship between A and B is both transitive (creates a hierarchy) and inheritance. </p>\n<p>What this means for FHIR is that ALL hierarchy relations are transitive and the closure operation should work on all of them. Even if you don’t agree with the word definitions I’m just stated (and I’m struggling to find good references for this) I’m confident that we need to support closure on any hierarchy relation and honestly, any relation at all. But keep in mind closure ALWAYS must have a relation it is following, and yes, it’s possible to get a cycle so your code needs a check for that.</p>",
        "id": 153839012,
        "sender_full_name": "Robert McClure",
        "timestamp": 1468783733
    },
    {
        "content": "<p>I don't feel good about where this is going, mainly for process reasons</p>",
        "id": 153839013,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468787578
    },
    {
        "content": "<p>one implication of this is that it would be possible - theoretically - for a single code system to support 2 different transitive closure relationships. </p>",
        "id": 153839014,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468787620
    },
    {
        "content": "<p>and so you'd have to name the one you want when you invoke it. </p>",
        "id": 153839015,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468787632
    },
    {
        "content": "<p>that's scary, particularly since we here can't even get our understanding aligned. </p>",
        "id": 153839016,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468787648
    },
    {
        "content": "<p>and very much out of core. </p>",
        "id": 153839017,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468787654
    },
    {
        "content": "<p>so we could say: there can only be one transitive closure relationship for each code system</p>",
        "id": 153839018,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468787681
    },
    {
        "content": "<p>the code system defines what that is, if there is one</p>",
        "id": 153839019,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468787696
    },
    {
        "content": "<p>it's also what is the heirarchy in the code system resource</p>",
        "id": 153839020,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468787806
    },
    {
        "content": "<p>anything else is properties</p>",
        "id": 153839021,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468787812
    },
    {
        "content": "<p>also, I'm not going to try and rewrite all the existing language around subsumes and closure between now and a few hours time to allow it to not be based on is-a relationships. Instead, we ad a ballot note on the terminology service that we are considering be changing the definitions of those operations to be more loose</p>",
        "id": 153839022,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468787889
    },
    {
        "content": "<p>I'm pretty sure transitive mean if there are relationships \"A-B-C\" and \"C-B-D\", and B is transitive, then it is true that \"A-B-D\"</p>",
        "id": 153839081,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1468805571
    },
    {
        "content": "<p>so \"part-of\", \"is-a\", and \"causes\" are all transitive....</p>",
        "id": 153839082,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1468805600
    },
    {
        "content": "<p>(although 'causes' is an odd one because it can also by cyclic...)</p>",
        "id": 153839083,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1468805631
    },
    {
        "content": "<p>the one word that seems to have taken on an unusual meaning in FHIR-land is \"closure\"</p>",
        "id": 153839284,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1468827326
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191503\">@Robert McClure</span> - what are the other relationships you are talking about? I have some sympathy for Grahames \"keep it simple\" one hierarchy (DAG woteva) per system... although poor second-class treatment that part-of gets treated with has always irked me (since about 1996 at least)</p>",
        "id": 153839287,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1468827475
    },
    {
        "content": "<p>we all hate on part-of</p>",
        "id": 153839288,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468827561
    },
    {
        "content": "<p>awww... poor old-part-of :-(</p>",
        "id": 153839289,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1468827641
    },
    {
        "content": "<p>as long as there is proper labeling of which relationships are \"is-a\" and which are \"part-of\" then why can't they all just get along?</p>",
        "id": 153839291,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1468827830
    },
    {
        "content": "<p>you've never been a meeting room full of terminologists then? </p>",
        "id": 153839293,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468827958
    },
    {
        "content": "<p>not for over 18 years...</p>",
        "id": 153839294,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1468827987
    },
    {
        "content": "<p>I think that what we should do is make clear that $closure and $subsumes are defined for core as operating on is-a hierarchies only.  And anything else that anyone may want to do with them (not that likely, really) would be an extension.  With that, a new core element shouldn't be needed (as far as I can see at the moment).  This follows at least in the spirit of RDF/OWL, where, even though many relations can be transitive (they can be explicitly declared to be so), only \"subclassOf\" is treated as \"first class” in that regard, including for the purpose of showing the hierarchy in the tooling (at least in Protege, TopBraid, etc., - I don't recall ever seeing anything else).</p>",
        "id": 153839359,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1468846861
    },
    {
        "content": "<p>the need for the element is so that a server can know whether the heirarchy is subsumption or not. </p>",
        "id": 153839363,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468848504
    },
    {
        "content": "<p>otherwise there is no way to know</p>",
        "id": 153839364,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468848510
    },
    {
        "content": "<p>Well, what I was suggesting was that if you define subsumption as based on/scoped to is-a, then that's how you (or the server) would know.  If we really need something beyond is-a, then fine - but so far I'm not really seeing it and haven't heard anything that sounds especially compelling.  We can add it as an extension if someone does really want it.</p>",
        "id": 153839368,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1468853958
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> I agree we need to constrain our world here, I just wanted to lay out the foundation. <span class=\"user-mention\" data-user-id=\"192001\">@Erich Schulz</span> All I'm saying is that code systems can, and often do (SCT), define many concept relations, as as you've noted, at it's core $closure is a simplistic idea of following a defined graph to get all the nodes. So any relation defines a graph and in theory $closure should support it. But GG &amp; RH are correct, that seems like an extension to me. I don't agree with <span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> that we should restrict this to IS-A only but I do think it's reasonable to restrict it to the relation that is to be used as \"the hierarchy\" for the code system. I'd say that if it's not specified it can be called something like \"GroupedBy\" which is meant to be anything (including IS-A). SCT defines this hierarchy as IS-A (i.e.: a subsumption hierarchy = transitive + inherited).  This is important for code systems like ICD that do not use IS-A.</p>\n<p>What I need to better understand is how the operations $closure and $subsumes are tactically different in FHIR. What is different about what they bring back to the user?</p>",
        "id": 153839373,
        "sender_full_name": "Robert McClure",
        "timestamp": 1468856916
    },
    {
        "content": "<p>Don't know if or how much it matters, but I was referring to is-a in the FHIR sense, not specific to SNOMED CT or other particular terminologies (which may or may not have a relationship that fits into the FHIR notion of is-a, whether they actually call it that or not).  <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>, I think we probably do need an element as you suggest, as CodeSystem doesn't really have a way to cover that at present.  And I think it probably would be best to keep $closure and $subsumes applied only to subsumption (is-a) - at least for core.</p>",
        "id": 153839381,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1468859009
    },
    {
        "content": "<p>So what does FHIR think IS-A means? Something other than B is a one of A? Are you saying <span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> that it means some sort of general \"GroupedBy\"? I hope not...</p>",
        "id": 153839526,
        "sender_full_name": "Robert McClure",
        "timestamp": 1468883774
    },
    {
        "content": "<p>no I don't think Rob is saying that and it's not true. </p>",
        "id": 153839531,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468884037
    },
    {
        "content": "<p>it's fine to define subsumption based on is-a. I'm fine with that. but the code system heirarchy is not defined that narrowly. all I'm asking for is to add an element so that you can say, if you know, what the heirarchy means, so a server can know whether it can do subsumption testing based on the code system instance </p>",
        "id": 153839533,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468884110
    },
    {
        "content": "<p>at present, the underlying logic for $subumes and $closure is identical - defined to be based on subsumption. $closure embeds the logic to maintain a closure table dynamically on the server. e.g. if the client iterated through it's existing closure table doing $subsumes, it would get the same set of changes that it would get from asking the server to do a $closure - only it would be orders of magnitude slower</p>",
        "id": 153839534,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468884245
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> that all makes sense and is what I would suspect. I've agreed with your proposal to add an element that should be a defined (value?) set of named relations - the list we stated before - as a way of communicating the structure of the default hierarchy. All those relations (the most general being GroupedBy or something similar) would be treated the same of course in that \"the hierarchy\" would be used for the $closure operation (i.e.; would be the substrate for the closure table.) You are then proposing that $subsumes would define a closure table only for those code systems that declare the hierarchy uses IS-A? I'd say you should include Part-Of too in that. </p>\n<p>Do I have it right?</p>",
        "id": 153839701,
        "sender_full_name": "Robert McClure",
        "timestamp": 1468945437
    },
    {
        "content": "<p>well, right now, $subsumes and $closure have the same meaning, and I think we like that they do. Changing $closure to be wider - which I can see the sense of - therefore implies that $subsumes should be wider. Which implies that it needs a new name. I'm fine with those things in principle, but I'm troubled by the process implications of this - we already have a dispensation to make the change to the resource in the qa freeze - I don't know that I want to rename the operation etc. </p>",
        "id": 153839743,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468954976
    },
    {
        "content": "<p>right now, my preference would be to leave the name and the definitions of the operation the same, add a ballot note that we are considering widening them and changing the name of $subsumes, and would welcome comment about this, and add the element </p>",
        "id": 153839744,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468955031
    },
    {
        "content": "<p>and to be specific about the element:<br>\nheirarchyMeaning : code [1..1], where code is one of <br>\n  groupedBy : no particular relationship between the concepts can be assumed, except what can be determined by inspection of the definitions of the elements (possible reasons to use this: importing from a source where this is not defined, or where various parts of the heirarchy have diferent meanings)<br>\n  subsumes : child elements in the heirarchy have [standard definition of subsumption from else where in fhir spec]<br>\n  partOf: child elements list the individual parts of a composite whole (e.g. bodysite)<br>\n  classifiedWith : child elements in the heirarchy represent more specific classification paths (often, but no always, this means subsumption; one common difference is the presence of \"not otherwise classified\")</p>",
        "id": 153839745,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468955357
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> After thinking about a number of options, I think this approach makes sense.  If we want to broaden the operations (one or both - we could make them logically divergent, if there is a need to do that), then $subsumes could become $is-descendant (or $is-descendant-of).</p>",
        "id": 153839760,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1468956520
    },
    {
        "content": "<p>ok, so that's what we take to Vocab</p>",
        "id": 153839770,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468957330
    },
    {
        "content": "<p>I'm ok with most of that except I'd like to see the following definitions for:<br>\nClassifiedWith - child concepts in the hierarchy may have only one parent and there is a presumption that the code system is a \"closed world\" meaning all things must be in the hierarchy. This results in concepts such as \"not otherwise clasified.\"<br>\nSubsumes -  A hierarchy where the child concepts are \"a kind of\" the parent (typically an IS-A relationship.) </p>",
        "id": 153839844,
        "sender_full_name": "Robert McClure",
        "timestamp": 1468967323
    },
    {
        "content": "<p>ok happy with those definitions</p>",
        "id": 153839848,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1468968035
    },
    {
        "content": "<p>those definitions seem good - there possibly is some wordsmithing we can do with subsumes, but it may be fine as is</p>",
        "id": 153839872,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1468968625
    }
]