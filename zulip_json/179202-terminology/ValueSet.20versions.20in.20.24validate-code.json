[
    {
        "content": "<p>Hi guys! Am I correct that the /ValueSet/$validate-code/... form does not support a specific version of the ValueSet target?</p>",
        "id": 153939997,
        "sender_full_name": "Jack Bowie",
        "timestamp": 1519345633
    },
    {
        "content": "<p>how are you identifying the value set?</p>",
        "id": 153940005,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1519347729
    },
    {
        "content": "<p>The 'version' input parameter to the ValueSet $validate-code operation relates to the version of the Code System, so I'd say you are correct unless the version of the Value Set is implicit in a requested id or url, or you supply the valueset itself in the request.</p>",
        "id": 153940011,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1519347966
    },
    {
        "content": "<p>right. you can either:<br>\n- execute $validate code on a particular value set - that is the right version (well, hopefully)<br>\n- provide a canonical URL - which can contain a version if you want<br>\n- provide an actual value set ( which will also hopefully be the version you want)</p>",
        "id": 153940018,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1519348560
    },
    {
        "content": "<p>yes, Carol Macumber and I were just talking about this, and Carol is planning to submit a tracker for adding a value set version parameter for $validate-code</p>",
        "id": 153940019,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1519348739
    },
    {
        "content": "<p>when would you use it?</p>",
        "id": 153940021,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1519349064
    },
    {
        "content": "<p>I didn't have a chance to discuss the details of that with Carol, but I expect she will put it in the tracker</p>",
        "id": 153940025,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1519349419
    },
    {
        "content": "<p>ok. I just don't think there's a chance to use it</p>",
        "id": 153940026,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1519349676
    },
    {
        "content": "<p>the similar discussion on the Vocab call was about adding the value set version parameter for $expand (approved <a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13820\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13820\">GF#13820</a>), which there does seem to be interest in</p>",
        "id": 153940027,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1519350089
    },
    {
        "content": "<p>Now (R4) that there is a $validate-code operation for the Code System resource - that also has the Code System version as an input parameter, I'm wondering whether this might be a case of re-scoping the version input parameter for ValueSet$validate-code to apply to the value set version. Is there still a use case for using a ValueSet operation to determine if a code belongs to a particular version of a CodeSystem?</p>",
        "id": 153940031,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1519353131
    },
    {
        "content": "<p>Re Graham's comment that the URL could contain a version, this is very difficult for us. Versions are subsidiary objects to our \"base\" ValueSet (Subset) object . I do not believe we should conflate url and business version semantics.</p>",
        "id": 153940145,
        "sender_full_name": "Jack Bowie",
        "timestamp": 1519408629
    },
    {
        "content": "<p>see <a href=\"http://build.fhir.org/references.html#canonical\" target=\"_blank\" title=\"http://build.fhir.org/references.html#canonical\">http://build.fhir.org/references.html#canonical</a></p>",
        "id": 153940154,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1519411134
    },
    {
        "content": "<p>I think it's still somewhat unclear where you can and can't use this (and which servers, if any, support it).  This is on $expand, rather than $validate-code, but should I be able to do this?</p>\n<blockquote>\n<p><a href=\"http://test.fhir.org/r3/ValueSet/$expand?url=http://www.healthintersections.com.au/fhir/ValueSet/extensional-case-2|C17\" target=\"_blank\" title=\"http://test.fhir.org/r3/ValueSet/$expand?url=http://www.healthintersections.com.au/fhir/ValueSet/extensional-case-2|C17\">http://test.fhir.org/r3/ValueSet/$expand?url=http://www.healthintersections.com.au/fhir/ValueSet/extensional-case-2|C17</a></p>\n</blockquote>",
        "id": 153940166,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1519414326
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> my reading of the spec is that a server should be able to resolve that URL, but it is not mandatory to do so. Given the likelihood of varying implementations, and the possibility that some value set authors will have policies that prevent them appending versions to urls, my view is that it's safer to rely on the version property of the value set. However, it might still be a good idea to test that syntax in Cologne which would mean preserving the C17 versions of the test value sets and adding C18 versions <span class=\"user-mention\" data-user-id=\"191370\">@Richard Ettema</span></p>",
        "id": 153940203,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1519418837
    },
    {
        "content": "<p>yes, I agree with all of that</p>",
        "id": 153940208,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1519420375
    },
    {
        "content": "<p>\"the possibility that some value set authors will have policies that prevent them appending versions to urls\" - since that's an API thing, we would there be a policy?</p>",
        "id": 153940210,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1519422855
    },
    {
        "content": "<p>The initial post in this thread expresses some discomfort with conflating 'url and business version semantics', I also heard differing views on this topic at the last WGM. Not quite sure what you mean by an 'API thing' - some might interpret that as an implementation concern, rather than something mandated by the spec (which it doesn't appear to be anyway...at this point in time).</p>",
        "id": 153940221,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1519429736
    },
    {
        "content": "<p>the spec is about the API, and it mandates the API</p>",
        "id": 153940223,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1519429955
    },
    {
        "content": "<p>In the context of this discussion, which aspect(s) of the API specifically are you saying that the spec is mandating?  Because that still doesn't seem to be coming across clearly in the same way to everyone.</p>",
        "id": 153940258,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1519436957
    },
    {
        "content": "<p>The spec states \"When the type of the canonical reference is a uri, the URL may include a version, in order be precise about which version of the resource is being referred to.\" and  \"Servers SHOULD support version specific searching for canonical URLs by automatically detecting the presence of a |[version] and performing the appropriate search.\" I read that as recommended rather than mandatory behaviour and will check for a version parameter before attempting to fish the version out of a URL.</p>",
        "id": 153940261,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1519437132
    },
    {
        "content": "<p>I would read that the same way.  And so far I'm not seeing that existing servers (including Grahame's) are supporting the appending of a version to a canonical uri/url, except possibly in some very selective cases.</p>",
        "id": 153940262,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1519437324
    },
    {
        "content": "<p>ok fine. the documentation could be clearer. But that's not grounds for deciding one way or the other. I don't think that there's any reason for us to allow version done both ways - it should be only done one way</p>",
        "id": 153940309,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1519456333
    },
    {
        "content": "<p>I always have great discomfort about 3rd party manipulation of URIs.  These are \"owned\" by the issuing party, not by the FHIR spec, and it is possible that some 3rd party meaning/significance might be attached to a URI ending in <code>|[version]</code> that's entirely different to this FHIR spec meaning.  I am much more in favour of a separate version parameter unless there is a compelling reason to be able to pack it in to a single reference.</p>\n<p>(and can we be consistent about calling them URIs not URLs; I know its anal, but being clear an consistent helps those who don't fully appreciate the difference)</p>",
        "id": 153940311,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1519458060
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> <span class=\"user-mention\" data-user-id=\"191343\">@Michael Lawley</span> I agree that we should do it one way.  Which way is that?  Are we going to follow Michael's (and other's) suggestion and use separate version parameters?  And therefore remove the appending of <code>|[version]</code> to canonical <strong>uris</strong> from the spec.  And would we change the 'url' elements on resources to 'uri' - a breaking change on conformance resources?</p>",
        "id": 153940313,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1519472047
    },
    {
        "content": "<p>those are different issues</p>",
        "id": 153940344,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1519500249
    },
    {
        "content": "<p>+1 for using separate version parameters. Agnostic on the other issues in Rob's last post.</p>",
        "id": 153940351,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1519503437
    },
    {
        "content": "<p>I agree that changing 'url' to 'uri' is a separate issue, and can be decided separately.</p>",
        "id": 153940354,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1519505688
    },
    {
        "content": "<p>actually, if we changed it, it would from url to canonical</p>",
        "id": 153940355,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1519505934
    },
    {
        "content": "<p>Sure.  I thought I recalled someone expressing a preference for using 'uri' rather than 'canonical' for the element name, but I'm not finding that now.  I think I'm fine with either one.</p>",
        "id": 153940370,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1519509913
    },
    {
        "content": "<p>I didn't meant to raise the renaming again, it was actually a plea for people to be consistent in their usage on Zulip and elsewhere when writing about these things :)</p>",
        "id": 153940378,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1519536091
    },
    {
        "content": "<p>queue the sound of hollow laughter...</p>",
        "id": 153940382,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1519555836
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191343\">@Michael Lawley</span> I don't know that you did raise the naming issue again - it wasn't your \"consistent about calling them URIs not URLs\" comment that I was thinking of.  But, no matter.  It seems that we've settled on 'canonical'.</p>",
        "id": 153940398,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1519564638
    },
    {
        "content": "<p>I don't think we've settled on renaming the attribute...  My understanding is that ValueSet.url, StructureDefinition.url, etc. will continue to have the same name.</p>",
        "id": 153940414,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1519590232
    },
    {
        "content": "<p>have to make final decision tomorrow on that</p>",
        "id": 153940422,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1519599803
    },
    {
        "content": "<p>Presumably we'll be discussing and deciding this on FHIR-I, then?  If we can do it in the first hour, that would be good, as it overlaps with Vocab FHIR Tracker Issues in the 2nd hour.  If the FHIR-I calls are usually going to be 2 hours we may need to consider adjusting the Tracker Issues call time.</p>",
        "id": 153940599,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1519653819
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> and <span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> I'm completely confused as to why you all don't think version-specific value set API access in general is something everyone will need. </p>\n<p>I must be missing something critical. I see this as something that we always need and my (perhaps incorrect) understanding is that the only way to do operations on a version-specific value set is to know the server-specific ID. <span class=\"user-mention\" data-user-id=\"195036\">@Carol Macumber</span> </p>\n<p><span class=\"user-mention\" data-user-id=\"191364\">@Peter Jordan</span> If we have no other choice then to change \"version\" to mean value set versus code system, I'd agree to do that. I certainly hope that all validates value set operations are against the expansion and to get an expansion you <strong><em>must</em></strong> be able to specify a value set version, a code system version or an expansion profile. We've laid out the precedence of how to work through dates and versions of things in the binding project. See \"Deterministic Expansion identified by a binding with precedence as determined below (as of 2/20/18):\" at <a href=\"http://confluence.hl7.org:8090/display/VOC/Vocabulary+Binding+Semantics+%28VBS%29+Project\" target=\"_blank\" title=\"http://confluence.hl7.org:8090/display/VOC/Vocabulary+Binding+Semantics+%28VBS%29+Project\">http://confluence.hl7.org:8090/display/VOC/Vocabulary+Binding+Semantics+%28VBS%29+Project</a></p>",
        "id": 153940645,
        "sender_full_name": "Robert McClure",
        "timestamp": 1519667461
    },
    {
        "content": "<p>you'd be confused because we don't think that. We're just discussing how it's done. It's not the only way to do it</p>",
        "id": 153940647,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1519667688
    },
    {
        "content": "<p>Ya - I had not read all the rest of the thread. Now catching up... Doesn't this overlap with the general discussions that <span class=\"user-mention\" data-user-id=\"191328\">@Ewout Kramer</span> has been involved with on resource versioning? I'm really struggling to keep all this clear...</p>",
        "id": 153940648,
        "sender_full_name": "Robert McClure",
        "timestamp": 1519668136
    },
    {
        "content": "<p>sort of overlaps, yes. but the discussion is pretty specific: we know that we need version specific references, and what the version refers to. We're just discussing exactly where it does when invoking $expand and $validate-code</p>",
        "id": 153940653,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1519669014
    }
]