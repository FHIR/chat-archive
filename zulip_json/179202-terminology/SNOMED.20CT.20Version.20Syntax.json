[
    {
        "content": "<p>Based on <a href=\"https://www.hl7.org/fhir/snomedct.html\" target=\"_blank\" title=\"https://www.hl7.org/fhir/snomedct.html\">https://www.hl7.org/fhir/snomedct.html</a>, I wanted to confirm that the appropriate syntax for a national version of SNOMED CT would look as follows - particularly the \"version\" element:<br>\n\"coding\": [<br>\n  {<br>\n    \"system\": \"<a href=\"http://snomed.info/sct\" target=\"_blank\" title=\"http://snomed.info/sct\">http://snomed.info/sct</a>\",<br>\n    \"version\": \"<a href=\"http://snomed.info/sct/20611000087101/version/20190430\" target=\"_blank\" title=\"http://snomed.info/sct/20611000087101/version/20190430\">http://snomed.info/sct/20611000087101/version/20190430</a>\",<br>\n    \"code\": \"8191000087109\",<br>\n    \"display\": \"Overdue\"<br>\n  }<br>\n]<br>\nI wasn't able to find any examples on this page to confirm it, and HL7 FHIR Validator hasn't been working properly.<br>\nThanks!</p>",
        "id": 185118574,
        "sender_full_name": "Ken Sinn",
        "timestamp": 1578495193
    },
    {
        "content": "<p>That looks right Ken.</p>\n<p>You don't _have_ to specify a version as SNOMED CT codes have \"concept permanence\" and mean the same thing across versions. There's various opinions on the benefits or problems caused by including the version as you've done, but the's guidance at <a href=\"https://www.hl7.org/fhir/codesystem.html#versioning\" target=\"_blank\" title=\"https://www.hl7.org/fhir/codesystem.html#versioning\">https://www.hl7.org/fhir/codesystem.html#versioning</a>.</p>\n<p>However at <a href=\"https://www.hl7.org/fhir/datatypes.html#codesystem\" target=\"_blank\" title=\"https://www.hl7.org/fhir/datatypes.html#codesystem\">https://www.hl7.org/fhir/datatypes.html#codesystem</a> the spec says</p>\n<blockquote>\n<p>A code system version may also be supplied. If the meaning of codes within the code system is consistent across releases, this is not required. The version SHOULD be exchanged when the system does not maintain consistent definitions across versions. Note that the following systems SHOULD always have a version specified:</p>\n<ul>\n<li>National releases of SNOMED CT (consistency of definitions varies amongst jurisdictions, and some jurisdictions may make their own rules on this)</li>\n<li>Various versions of ICD (note: the major releases are labeled as different code systems altogether, but there is variation within versions)</li>\n</ul>\n</blockquote>\n<p>The version URI you've created looks fine for an April 2019 version of the Canadian French edition - is that what you intended?</p>\n<p>I'm not sure what guidance comes from the Canadian release centre.</p>",
        "id": 185165312,
        "sender_full_name": "Dion McMurtrie",
        "timestamp": 1578523287
    },
    {
        "content": "<p>Thanks Dion. The code example above failed terminology validation (using HL7 Validator) against snomed international, since it's only available in the Canadian extension. That's why I'm looking for feedback on the correct syntax to identify a national snomed system vs international.</p>",
        "id": 185220967,
        "sender_full_name": "Ken Sinn",
        "timestamp": 1578583180
    },
    {
        "content": "<p>These may help:<br>\n<a href=\"https://confluence.ihtsdotools.org/display/DOCURI/2.1+URIs+for+Editions+and+Versions\" target=\"_blank\" title=\"https://confluence.ihtsdotools.org/display/DOCURI/2.1+URIs+for+Editions+and+Versions\">https://confluence.ihtsdotools.org/display/DOCURI/2.1+URIs+for+Editions+and+Versions</a><br>\n<a href=\"https://confluence.ihtsdotools.org/display/DOCURI/3.2+URI+Use-Cases\" target=\"_blank\" title=\"https://confluence.ihtsdotools.org/display/DOCURI/3.2+URI+Use-Cases\">https://confluence.ihtsdotools.org/display/DOCURI/3.2+URI+Use-Cases</a><br>\n<a href=\"https://confluence.ihtsdotools.org/display/DOC/List+of+SNOMED+CT+Edition+URIs\" target=\"_blank\" title=\"https://confluence.ihtsdotools.org/display/DOC/List+of+SNOMED+CT+Edition+URIs\">https://confluence.ihtsdotools.org/display/DOC/List+of+SNOMED+CT+Edition+URIs</a><br>\nThe <a href=\"http://tx.fhir.org\" target=\"_blank\" title=\"http://tx.fhir.org\">tx.fhir.org</a> terminology server for the FHIR build does support this edition (French Canadian) and version:<br>\n<code>http://tx.fhir.org/r4/CodeSystem/$lookup?system=http://snomed.info/sct&amp;version=http://snomed.info/sct/20611000087101/version/20190430&amp;code=8191000087109</code><br>\nSo I would assume that you should be able to get the validation to work.</p>",
        "id": 185233087,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1578589670
    },
    {
        "content": "<p>You can also specify only the SNOMED CT edition without the specific version:<br>\n<code>http://tx.fhir.org/r4/CodeSystem/$lookup?system=http://snomed.info/sct&amp;version=http://snomed.info/sct/20611000087101&amp;code=8191000087109</code></p>",
        "id": 185233272,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1578589785
    },
    {
        "content": "<p>Thanks Rob. I tried to use that version syntax on an older build of HL7 Validator (from nov 2019), but that didn't work for versions -- it would just look at the international release instead of the specified release.  The current build of HL7 validator doesn't seem to be working at all w/ snomed codes, not even the international release.</p>",
        "id": 185242726,
        "sender_full_name": "Ken Sinn",
        "timestamp": 1578595805
    },
    {
        "content": "<p>Can you provide an example of the validation failure, <span class=\"user-mention\" data-user-id=\"192143\">@Ken Sinn</span>?  I wonder if your issue may have any relation to my issue <a href=\"#narrow/stream/179177-conformance/topic/validation.20issue\" title=\"#narrow/stream/179177-conformance/topic/validation.20issue\">here</a>?</p>",
        "id": 185253098,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1578602331
    },
    {
        "content": "<p>I've been asked to include the version of snomed that a value was selected, and I note that there are 2 choices, and I know which I want to do, but I'm nervous...</p>\n<div class=\"codehilite\"><pre><span></span><code>&lt;coding&gt;\n   &lt;system value=&quot;http://snomed.info/sct&quot; /&gt;\n   &lt;version value=&quot;20200601&quot; /&gt;\n   &lt;code value=&quot;36900011000036109&quot; /&gt;\n&lt;/coding&gt;\n</code></pre></div>\n\n\n<p>or</p>\n<div class=\"codehilite\"><pre><span></span><code>&lt;coding&gt;\n   &lt;system value=&quot;http://snomed.info/sct/version/20200601&quot; /&gt;\n   &lt;code value=&quot;36900011000036109&quot; /&gt;\n&lt;/coding&gt;\n</code></pre></div>\n\n\n<p>and for medications, do I also need to include the sctid in there to indicate it's from AMT?<br>\n<span class=\"user-mention\" data-user-id=\"191343\">@Michael Lawley</span> <span class=\"user-mention\" data-user-id=\"191368\">@Brett Esler</span></p>",
        "id": 208920869,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1599108847
    },
    {
        "content": "<p>Both are incorrect :-)<br>\nSNOMED CT version strings look like <code>http://snomed.info/sct/[edition]/version/[date]</code><br>\nSince you're talking AMT, that implies the SNOMED CT-AU Edition, so the version string would be <code>http://snomed.info/sct/32506021000036107/version/20200601</code> leading to</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"nt\">&lt;coding&gt;</span>\n   <span class=\"nt\">&lt;system</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://snomed.info/sct&quot;</span> <span class=\"nt\">/&gt;</span>\n   <span class=\"nt\">&lt;version</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://snomed.info/sct/32506021000036107/version/20200601&quot;</span> <span class=\"nt\">/&gt;</span>\n   <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">&quot;36900011000036109&quot;</span> <span class=\"nt\">/&gt;</span>\n<span class=\"nt\">&lt;/coding&gt;</span>\n</code></pre></div>",
        "id": 208921351,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1599109464
    },
    {
        "content": "<p>Thanks, is the system or version value different when specifying an MP, TP, MPUU?<br>\nAnd Danielle pointed out that some snomed values are re-used between versions, is that making sense?</p>",
        "id": 208921446,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1599109587
    },
    {
        "content": "<p>No, the system and version are about the CodeSystem, not about the code.</p>",
        "id": 208921563,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1599109745
    },
    {
        "content": "<p>SNOMED codes are never \"re-used\" between (published) versions.  A concept's FSN (Fully Specified Name) should never change (except for trivial corrections - spelling etc) because the FSN carries the meaning of the concept.</p>",
        "id": 208921661,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1599109877
    },
    {
        "content": "<p>yeah i'm trying very poorly to articulate the difference here... so some context. <span class=\"user-mention\" data-user-id=\"191343\">@Michael Lawley</span>  issue has come from a vendor not super familiar with AMT codes. The Prescription exchange message caters for the following: <br>\nAMT_MP<br>\nAMT_MPP<br>\nAMT_TPP<br>\nAMT_MPUU<br>\nAMT_TP<br>\nAMT_TPUU<br>\nAMT_CTPP</p>\n<p>Then we were told to add the following for MyHR when V2/V3 change over came in <br>\nAMT_CODE_SYSTEM     Australian Medicines Terminology - Version used (v2 or v3)<br>\nAMT_VERSION     \"Each AMTv3 release is versioned based on a date and<br>\nhas a version identifier eg.http://snomed.info/sct/900062011000036108/version/20150131\"</p>\n<p>I have ditched mapping or persisting the code system given V2 is irrelevant at this point. The question is around the mapping of version, when i asked earlier in the year it wasn't clear. In the facade call back to apps we need to provide + version. we were not providing the version previously in the data set to Patient Apps, because it didn't really hold relevance originally. </p>\n<p>That the first question, the second was from the same patient app vendor asking how they know what level the code is for. I think this is more an education piece for the vendor, I don't believe they have alot of experience with terminology currently.</p>",
        "id": 208929387,
        "sender_full_name": "Danielle Bancroft",
        "timestamp": 1599117911
    },
    {
        "content": "<p>Which I also posted to the Australian stream too, should we use something like this?</p>\n<div class=\"codehilite\"><pre><span></span><code>&lt;coding&gt;\n   &lt;extension url=&quot;http://hl7.org/fhir/StructureDefinition/valueset-reference&quot;&gt;\n      &lt;valueUri value=&quot;http://hl7.org.au/fhir/ValueSet/amt-ctpp-codes&quot;/&gt;\n   &lt;/extension&gt;\n   &lt;system value=&quot;http://snomed.info/sct&quot; /&gt;\n   &lt;version value=&quot;http://snomed.info/sct/32506021000036107/version/20200601&quot; /&gt;\n   &lt;code value=&quot;36900011000036109&quot; /&gt;\n&lt;/coding&gt;\n</code></pre></div>\n\n\n<p>or with the deliciously named NCTS version of the same valueset<br>\n<a href=\"https://healthterminologies.gov.au/fhir/ValueSet/sctau-reference-set-929360041000036105\">https://healthterminologies.gov.au/fhir/ValueSet/sctau-reference-set-929360041000036105</a></p>",
        "id": 208931440,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1599119470
    },
    {
        "content": "<p>you can use a value set reference like that if they really need to be told, yes</p>",
        "id": 208931874,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1599119652
    },
    {
        "content": "<p>there's also an extension for purpose of use of a coding which might be more to the point</p>",
        "id": 208931900,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1599119671
    },
    {
        "content": "<p>This one?<br>\n<a href=\"http://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-medication-type.html\">http://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-medication-type.html</a></p>",
        "id": 208932256,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1599119894
    },
    {
        "content": "<p>Already have the brand name and generic name extension included at the to of the medication.</p>",
        "id": 208932278,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1599119919
    },
    {
        "content": "<p>well, that might be to the purpose too</p>",
        "id": 208932293,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1599119930
    },
    {
        "content": "<p>I think you've answered the question though, that the valueset ref covers it.<br>\nJust leaving the name of the valueset, which I'm sure I just have to suck it up and use the gross refsetname format.</p>",
        "id": 208932367,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1599119999
    }
]