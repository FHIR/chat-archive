[
    {
        "content": "<p>I got this error from the IG Publisher:</p>\n<p><code>Error from server: The filter \"concept descendent-of 442083009\" was not understood in the context of http://snomed.info/sct</code></p>\n<p>In looking at the <a href=\"http://build.fhir.org/snomedct.html\" target=\"_blank\" title=\"http://build.fhir.org/snomedct.html\">SNOMED CT page</a> in the spec I indeed see no mention of <a href=\"http://build.fhir.org/valueset-filter-operator.html\" target=\"_blank\" title=\"http://build.fhir.org/valueset-filter-operator.html\">descendent-of</a>. But the semantics of descendent-of match exactly what I want to express with:</p>\n<p><code>&lt; 442083009 |Anatomical or acquired body structure|</code></p>\n<p>So question is: what is the right way to express the above statement in FHIR? Currently my ValueSet says:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">&lt;compose&gt;</span>\n    <span class=\"nt\">&lt;include&gt;</span>\n        <span class=\"nt\">&lt;system</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://snomed.info/sct&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;filter&gt;</span>\n            <span class=\"nt\">&lt;property</span> <span class=\"na\">value=</span><span class=\"s\">&quot;concept&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;op</span> <span class=\"na\">value=</span><span class=\"s\">&quot;descendent-of&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;value</span> <span class=\"na\">value=</span><span class=\"s\">&quot;442083009&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;/filter&gt;</span>\n    <span class=\"nt\">&lt;/include&gt;</span>\n<span class=\"nt\">&lt;/compose&gt;</span>\n</pre></div>",
        "id": 188194768,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1581676812
    },
    {
        "content": "<p>hi <span class=\"user-mention\" data-user-id=\"191375\">@Alexander Henket</span>  take a look at <a href=\"http://hl7.org/fhir/STU3/valueset-administration-method-codes.xml.html\" target=\"_blank\" title=\"http://hl7.org/fhir/STU3/valueset-administration-method-codes.xml.html\">http://hl7.org/fhir/STU3/valueset-administration-method-codes.xml.html</a> I think this is what you need.</p>",
        "id": 188206350,
        "sender_full_name": "Richard Kavanagh",
        "timestamp": 1581687613
    },
    {
        "content": "<p>You mean \"is-a\" instead of \"descendent-of\" I think? But \"is-a\" is defined as including the head concept. While descendent-of is defined as excluding the head concept.</p>\n<p>SNOMED CT &lt; is supposed to exclusive while &lt;&lt; is inclusive, is it not?</p>",
        "id": 188206534,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1581687760
    },
    {
        "content": "<p>Hmm - not ideal but use the \"is-a\" and then add an \"exclude\" for the head concept.</p>",
        "id": 188206708,
        "sender_full_name": "Richard Kavanagh",
        "timestamp": 1581687908
    },
    {
        "content": "<p><a href=\"http://hl7.org/fhir/STU3/valueset-filter-operator.html\" target=\"_blank\" title=\"http://hl7.org/fhir/STU3/valueset-filter-operator.html\">http://hl7.org/fhir/STU3/valueset-filter-operator.html</a><br>\nand<br>\n<a href=\"https://confluence.ihtsdotools.org/pages/viewpage.action?pageId=28739405\" target=\"_blank\" title=\"https://confluence.ihtsdotools.org/pages/viewpage.action?pageId=28739405\">https://confluence.ihtsdotools.org/pages/viewpage.action?pageId=28739405</a></p>\n<p>The SNOMED CT Expression Syntax says:</p>\n<p>descendantOf = \"&lt;\"<br>\ndescendantOrSelfOf = \"&lt;&lt;\"</p>\n<p>I think descendent-of is exactly matching &lt;, while is-a is exactly matching &lt;&lt;. That must mean that the FHIR SNOMED CT page is lacking</p>",
        "id": 188206845,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1581687995
    },
    {
        "content": "<p>I remember that each code system decides what filter FHIR should support. <a href=\"http://hl7.org/fhir/STU3/snomedct.html#filters\" target=\"_blank\" title=\"http://hl7.org/fhir/STU3/snomedct.html#filters\">http://hl7.org/fhir/STU3/snomedct.html#filters</a> lists three filters supported by SNOMED CT in FHIR.</p>",
        "id": 188218914,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1581695877
    },
    {
        "content": "<p>You can use ECL with the constraint filter:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">&lt;compose&gt;</span>\n    <span class=\"nt\">&lt;include&gt;</span>\n        <span class=\"nt\">&lt;system</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://snomed.info/sct&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;filter&gt;</span>\n            <span class=\"nt\">&lt;property</span> <span class=\"na\">value=</span><span class=\"s\">&quot;constraint&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;op</span> <span class=\"na\">value=</span><span class=\"s\">&quot;=&quot;</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;value</span> <span class=\"na\">value=</span><span class=\"s\">&quot;&lt;442083009&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;/filter&gt;</span>\n    <span class=\"nt\">&lt;/include&gt;</span>\n<span class=\"nt\">&lt;/compose&gt;</span>\n</pre></div>\n\n\n<p>Agreed, missing  <code>descendant-of</code> and related ops from <a href=\"http://hl7.org/fhir/STU3/snomedct.html#filters\" target=\"_blank\" title=\"http://hl7.org/fhir/STU3/snomedct.html#filters\">http://hl7.org/fhir/STU3/snomedct.html#filters</a> is a bug.</p>",
        "id": 188262252,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1581728290
    },
    {
        "content": "<p>It is still missing that notion in R5, so I took the liberty of filing a tracker for it: <a href=\"http://jira.hl7.org/browse/FHIR-26305\" target=\"_blank\" title=\"http://jira.hl7.org/browse/FHIR-26305\">J#26305</a></p>",
        "id": 188269749,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1581743470
    },
    {
        "content": "<p>feel free to create a task. though it's possible the deficiency is in <a href=\"http://tx.fhir.org\" target=\"_blank\" title=\"http://tx.fhir.org\">tx.fhir.org</a> not the specification</p>",
        "id": 188269802,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1581743567
    },
    {
        "content": "<p>ah you did.</p>",
        "id": 188269804,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1581743578
    },
    {
        "content": "<p>I can see how constraint could work, but that seems like a much harder solution for a fairly common expression, so support for descendent-of would be appreciated</p>",
        "id": 188269847,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1581743657
    },
    {
        "content": "<p>I think it would be good to add it too</p>",
        "id": 188269905,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1581743845
    },
    {
        "content": "<p>It would kind of make sense that all the subsumption-related filter operations were defined by default for CodeSystems where hierarchyMeaning = <code>is-a</code></p>",
        "id": 188342489,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1581893188
    },
    {
        "content": "<p>Is there a call I could participate in where this could be discussed? (<a href=\"http://jira.hl7.org/browse/FHIR-26305\">J#26305</a>)</p>",
        "id": 216319825,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1605084734
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191375\">@Alexander Henket</span>  I think this should be a pretty straightforward discussion and resolution.  I think we can include it as one of the FHIR items on the Vocab Main call tomorrow at 3:30 PM Eastern (we will break away from 4:00-5:00 PM for the co-chair meeting and then will resume again at 5:00).  So if you can join I assume we would need to take this up during the first 30 minutes.  <span class=\"user-mention\" data-user-id=\"191982\">@Ted Klein</span>?</p>",
        "id": 216395161,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1605126621
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191375\">@Alexander Henket</span> It's been added to the Vocab call <a href=\"https://confluence.hl7.org/pages/viewpage.action?pageId=97458021\">agenda</a> for tomorrow (should be in the first 30 minutes).</p>",
        "id": 216425045,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1605153143
    },
    {
        "content": "<p>Hi all. I'm sorry I missed that call, but I'm glad with the outcome. [how do you guys keep track of all conversations in Zulip?]</p>",
        "id": 216577470,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1605254498
    },
    {
        "content": "<p>Follow up question: would this SNOMED filter guidance, slated for R5 be limited to implementations on R5 and up or would this also benefit STU3/R4? In other words: is terminology system guidance tied into a version of FHIR specifically or do reference frameworks generally follow the latest insights on how to deal with SNOMED/LOINC/... ?</p>",
        "id": 216578099,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1605255011
    },
    {
        "content": "<p>I see no reason why this should be necessarily tied to a FHIR version</p>",
        "id": 216578392,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1605255260
    },
    {
        "content": "<p>when I implement it, it will be for all versions</p>",
        "id": 216581554,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1605257387
    }
]