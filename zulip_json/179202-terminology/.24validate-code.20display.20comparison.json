[
    {
        "content": "<p><a href=\"http://hl7.org/fhir/STU3/valueset-operations.html#validate-code\" target=\"_blank\" title=\"http://hl7.org/fhir/STU3/valueset-operations.html#validate-code\">http://hl7.org/fhir/STU3/valueset-operations.html#validate-code</a> mentions that if we provide a 'display' value the FHIR terminology server will validate the display value. Whether the validation is case-insensitive or not will depend on the code system.</p>\n<p>1. Is the behavior above dependent on <a href=\"http://hl7.org/fhir/STU3/codesystem-definitions.html#CodeSystem.caseSensitive\" target=\"_blank\" title=\"http://hl7.org/fhir/STU3/codesystem-definitions.html#CodeSystem.caseSensitive\">http://hl7.org/fhir/STU3/codesystem-definitions.html#CodeSystem.caseSensitive</a>?</p>\n<p>My understanding is that <a href=\"http://fhirtest.uhn.ca/baseDstu3/ValueSet/procedure-not-performed-reason/$validate-code?system=http://snomed.info/sct&amp;code=407582002&amp;display=Clopidogrel%20contraindicated%20(situation)\" target=\"_blank\" title=\"http://fhirtest.uhn.ca/baseDstu3/ValueSet/procedure-not-performed-reason/$validate-code?system=http://snomed.info/sct&amp;code=407582002&amp;display=Clopidogrel%20contraindicated%20(situation)\">http://fhirtest.uhn.ca/baseDstu3/ValueSet/procedure-not-performed-reason/$validate-code?system=http://snomed.info/sct&amp;code=407582002&amp;display=Clopidogrel%20contraindicated%20(situation)</a> and <a href=\"http://fhirtest.uhn.ca/baseDstu3/ValueSet/procedure-not-performed-reason/$validate-code?system=http://snomed.info/sct&amp;code=407582002&amp;display=clopidogrel%20contraindicated%20(situation)\" target=\"_blank\" title=\"http://fhirtest.uhn.ca/baseDstu3/ValueSet/procedure-not-performed-reason/$validate-code?system=http://snomed.info/sct&amp;code=407582002&amp;display=clopidogrel%20contraindicated%20(situation)\">http://fhirtest.uhn.ca/baseDstu3/ValueSet/procedure-not-performed-reason/$validate-code?system=http://snomed.info/sct&amp;code=407582002&amp;display=clopidogrel%20contraindicated%20(situation)</a> (i.e. first letter is lowercase) would both return true since SNOMED is not case-sensitive.</p>",
        "id": 153931483,
        "sender_full_name": "Michael Calderero",
        "timestamp": 1517090267
    },
    {
        "content": "<p>code sensitive is about the code, not the dispaly</p>",
        "id": 153931506,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1517091433
    },
    {
        "content": "<p>Ok, which property (if any) controls the case-sensitivity comparison of the display?</p>",
        "id": 153931512,
        "sender_full_name": "Michael Calderero",
        "timestamp": 1517091688
    },
    {
        "content": "<p>at the moment, it's a parameter to the validator but I don't htink any server exposes that</p>",
        "id": 153931515,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1517091892
    },
    {
        "content": "<p>The typical expectation would be to treat display term strings as case-sensitive - case does typically have significance to how a display term may be read and understood, and that's why we use it.  In the spec, we only refer to case-sensitivity of codes.  So, again, I would treat all display strings as case-sensitive - and maybe we should document that in the spec.</p>",
        "id": 153931538,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1517094092
    },
    {
        "content": "<p>I think we should make this clear in the spec. To me, the last sentence, \"Whether displays are case sensitive is code system dependent\" in <a href=\"http://hl7.org/fhir/STU3/valueset-operations.html#validate-code\" target=\"_blank\" title=\"http://hl7.org/fhir/STU3/valueset-operations.html#validate-code\">http://hl7.org/fhir/STU3/valueset-operations.html#validate-code</a> implies that case-sensitivity of the CodeSystem affects the display validation.</p>",
        "id": 153931546,
        "sender_full_name": "Michael Calderero",
        "timestamp": 1517094608
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"193952\">@Michael Calderero</span> Yes, I think that statement is a bit problematic.  We haven't provide a mechanism in the CodeSystem resource to specify whether the display strings provided by the code system are to be treated as case sensitive or not.  We state that Coding.display is a \"Representation defined by the system\" (and we describe that further elsewhere, but don't directly address case).  But this implies (but doesn't actually state) that the string should be used exactly as it was defined by the code system, which would include matching the case.  And so far I haven't thought of a good use case where we would need to treat display strings as case insensitive for validation.  If someone else has a valid case for that, it would be good to know.  We probably need to create a tracker to clarify this.</p>",
        "id": 153931710,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1517144855
    },
    {
        "content": "<p>it's not unusual to see systems that mangle the case, even if it's for no good reason. That's why the validator only produces a warning. by default .. and under what circumstances could it actually be a semantic problem&gt;?</p>",
        "id": 153931711,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1517144950
    },
    {
        "content": "<p>I can see that.  But we either need to decide that they will be treated as case sensitive or insensitive, one way or the other. or provide a means in CodeSystem to declare what it is for each code system.   And then make whatever it is clear in the documentation.</p>",
        "id": 153931812,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1517153140
    },
    {
        "content": "<p>why is display case validation specific to a code system?</p>",
        "id": 153931819,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1517153325
    },
    {
        "content": "<p>As far as I know, only because we said so, as Michael noted.  So if we didn't really intend to say that (which I believe I would agree with), we should remove or change that statement.</p>",
        "id": 153931824,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1517153595
    },
    {
        "content": "<p>I think we should at least change it, personally. if snomed (e.g.) wanted to make extra rules, they can, But we shouldn't</p>",
        "id": 153931826,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1517153670
    },
    {
        "content": "<p>IIRC that was added because we assumed that we should defer to the case preference of the code system in question.</p>",
        "id": 153931830,
        "sender_full_name": "Russ Hamm",
        "timestamp": 1517153748
    },
    {
        "content": "<p>Note also that case-sensitivity may be specific to a particular designation, not just a blanket property for an entire code system.<br>\nAs a data point, SNOMED distinguishes \"Entire term case insensitive\",  \"Entire term case sensitive\" and \"Only initial character case insensitive\".</p>",
        "id": 153933139,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1517266683
    },
    {
        "content": "<p>We also see a number of systems that up-case everything, and others that have clearly used their own \"interface terminology\" (for SNOMED)</p>",
        "id": 153933140,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1517266757
    }
]