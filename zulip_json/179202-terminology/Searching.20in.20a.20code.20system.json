[
    {
        "content": "<p>Using the $lookup operation I can get the properties of a concept/code I already know the code for. But how do I ask for:</p>\n<p>Gimme concepts/codes from SNOMED CT where displayName contains \"frac bon\". In our 20160731 release this would return 302 concepts.</p>\n<p>I thought that's what the $lookup was for but I don't see how. The CodeSystem search params also do not leave room for this as far as I can tell.</p>",
        "id": 153869213,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1485424390
    },
    {
        "content": "<p>Would $expand + ?filter work for you? See <a href=\"http://ontoserver.csiro.au/vstool/\" target=\"_blank\" title=\"http://ontoserver.csiro.au/vstool/\">http://ontoserver.csiro.au/vstool/</a> for an interactive demo</p>",
        "id": 153869221,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1485431799
    },
    {
        "content": "<p>That only works if you create an intensional ValueSet for every CodeSystem that includes this full CodeSystem. That really sounds like a workaround. Sure it works, but god forbids someone actually asks for the expansion without filter when it is SNOMED or LOINC.</p>\n<p>I'd really expect a search feature on CodeSystem contents, which produces a ValueSet. The search expression could actually be the basis for an intensional value set, while the response could actually be the expansion of the expression</p>",
        "id": 153869323,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1485504766
    },
    {
        "content": "<p>Server could return a TooCostly error then if they ask for that unfiltered expansion.</p>\n<p>Making the valueset code a codesystem isn't too hard, you wouldn't even need a separate resource - Codesystem.valueSet (<a href=\"http://build.fhir.org/codesystem-definitions.html#CodeSystem.valueSet\" target=\"_blank\" title=\"http://build.fhir.org/codesystem-definitions.html#CodeSystem.valueSet\">http://build.fhir.org/codesystem-definitions.html#CodeSystem.valueSet</a>) can be used to define it on the spot for you</p>",
        "id": 153869324,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1485504906
    },
    {
        "content": "<p>I think the idea is that you start working more with valuesets more in general, not with codesystems directly. That's the feeling I get from Grahame's presentations on this</p>",
        "id": 153869326,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1485504993
    },
    {
        "content": "<p>He, that's nice: I totally missed the CodeSystem.valueSet notion... that helps. I will chew on that some more.</p>",
        "id": 153869327,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1485505082
    },
    {
        "content": "<p>ok!</p>",
        "id": 153869328,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1485505313
    },
    {
        "content": "<p>In addition, for well-known code systems like SNOMED, there is a well known URL for \"all codes in SNOMED\" -- <a href=\"http://snomed.info/sct?fhir_vs\" target=\"_blank\" title=\"http://snomed.info/sct?fhir_vs\">http://snomed.info/sct?fhir_vs</a></p>",
        "id": 153869338,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1485511125
    },
    {
        "content": "<p>agree - current design is that this a value set thing. There is a usecase for searching code systems, but it generally falls into 'code system maintenance' which we re-affirmed is not in scope for FHIR in San Antonio. That doesn't mean that searching code systems directly itself is always out of scope, but it's certainly an R4 thing at this time</p>",
        "id": 153870123,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1486349432
    },
    {
        "content": "<p>For clarification. I'm looking into codesystem search for valueset authoring purposes only, not codesystem maintenance.</p>",
        "id": 153870722,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1486558380
    },
    {
        "content": "<p>well, is it reasonable to extend expansion so you can nominate a code system instead of a value set, and make resolving the default value set the server's problem, not the clients?</p>",
        "id": 153870751,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1486578022
    },
    {
        "content": "<p>Had to think on that. I think what you mean is:<br>\n[base]/ValueSet/$expand</p>\n<p>Parameter codeSystem = <a href=\"http://snomed.info/sct\" target=\"_blank\" title=\"http://snomed.info/sct\">http://snomed.info/sct</a><br>\nParameter filter = frac bone<br>\nresponse = ValueSet</p>\n<p>To search for \"frac bone\" in SNOMED CT? So while you, at first glance, are searching on the ValueSet endpoint, you are in fact searching in CodeSystem because of the codeSystem parameter. You could argue you are still actually searching the implicit ValueSet that contains the full codesystem. I suppose that could work. Would you say this is something likely to be reworked once the 'real release 4' solution comes in, or would you say this proposal has a chance for survival?</p>",
        "id": 153870766,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1486584166
    },
    {
        "content": "<p>can't you do that by POSTing a Parameters object with an inline valueSet that includes that codeSystem (and the filter parameter)? I don't understand how having an extra 'codeSystem' parameter changes likely server behaviour</p>",
        "id": 153870782,
        "sender_full_name": "Jim Steel",
        "timestamp": 1486594533
    },
    {
        "content": "<p>it makes for a simpler API. </p>",
        "id": 153870800,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1486612017
    },
    {
        "content": "<p>but it is semantically equivalent, yes</p>",
        "id": 153870801,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1486612026
    }
]