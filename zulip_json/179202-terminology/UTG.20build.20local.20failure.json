[
    {
        "content": "<p>I seem to be needing a build tool that I don't have.. When I build FHIR core or an IG it is fine... but when I try to build UTG I get a NPE</p>\n<blockquote>\n<p>Publishing Content Failed: Unable to create javax script engine for javascript</p>\n</blockquote>\n<p>I have been told that this is related to my machine using OpenJDK.. but I have also heard <span class=\"user-mention\" data-user-id=\"192587\">@David Pyke</span> uses OpenJDK and it worked for him.</p>",
        "id": 234921264,
        "sender_full_name": "John Moehrke",
        "timestamp": 1618607139
    },
    {
        "content": "<p>I use OpenJDK (for Mac, both Intel and native ARM) and it works for UTG and everything else.</p>",
        "id": 234933938,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1618614466
    },
    {
        "content": "<p>so what is your javascript provider?</p>",
        "id": 235334847,
        "sender_full_name": "John Moehrke",
        "timestamp": 1618921861
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span> Maybe you can clarify what you mean?  I don't recall ever needing to do anything specific for Javascript.  There are other things that you have to deal with, like Jekyll.</p>",
        "id": 235350729,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1618928182
    },
    {
        "content": "<p>I did install the things listed as needed for the core build and IG build... but when I try to build terminology, it fails with the above javascript failure. so there seems to be a need for a javascript tool that is not  brought with the defined install list... I understood that with formal JDK, it comes with a javascript tool, where as OpenJDK didn't.. but I don't know that for a fact</p>",
        "id": 235393701,
        "sender_full_name": "John Moehrke",
        "timestamp": 1618944025
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>https://medium.com/graalvm/nashorn-removal-graalvm-to-the-rescue-d4da3605b6cb\n</code></pre></div>",
        "id": 235394729,
        "sender_full_name": "John Moehrke",
        "timestamp": 1618944424
    },
    {
        "content": "<p>so, would GraalVM javascript engine be a recommendation?</p>",
        "id": 235394760,
        "sender_full_name": "John Moehrke",
        "timestamp": 1618944440
    },
    {
        "content": "<p>it's related to java version. The javax script engine has been removed in the most recent versions of the JDK, and there is no workable replacement</p>",
        "id": 235412269,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1618951613
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span> we should get this back on our agenda</p>",
        "id": 235412311,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1618951629
    },
    {
        "content": "<p>I can take a look</p>",
        "id": 235415423,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1618952615
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span> do you have time tomorrow to walk me through exactly what is happening?</p>",
        "id": 235415471,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1618952629
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span> What JDK version are you using?  I'm using openJDK 11 mostly now (a native Mac M1 version), but I have used 14 and 15 successfully to build my IG's.  I may not have tried 16 yet (I'm not sure when the Javascript change was made, but it sounds like that may not work).</p>",
        "id": 235421382,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1618955029
    },
    {
        "content": "<p>I have built this machine just a few weeks ago, so grabbed OpenJDK 16</p>",
        "id": 235421523,
        "sender_full_name": "John Moehrke",
        "timestamp": 1618955103
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"248736\">Mark Iantorno</span> <a href=\"#narrow/stream/179202-terminology/topic/UTG.20build.20local.20failure/near/235415471\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"191404\">John Moehrke</span> do you have time tomorrow to walk me through exactly what is happening?</p>\n</blockquote>\n<p>yes,  9am, 2pm, or 4:30pm central time</p>",
        "id": 235421612,
        "sender_full_name": "John Moehrke",
        "timestamp": 1618955150
    },
    {
        "content": "<p>OK.  Sounds like that's likely the explanation.  It's pretty straightforward to also install and specify an earlier version - particularly JDK 11, which can have long term support.</p>",
        "id": 235421706,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1618955187
    },
    {
        "content": "<p>This Javascript issue doesn't seem to apply for all IGs, but it does for UTG.  I just built the IPS IG using JDK 16 (liberica-16+36 on the Mac M1) without any issues.  But it failed when building UTG with <code>Publishing Content Failed: Unable to create javax script engine for javascript</code>.  I then rebuilt UTG with JDK 11 and that worked (but I get the <code>Warning: Nashorn engine is planned to be removed from a future JDK release</code>).  I think that the GraalVM engine might be able to provide a solution, but apparently we would at least have to do some reconfiguring of our build to be able to use it.</p>",
        "id": 235425785,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1618957582
    },
    {
        "content": "<p>not many IGs use the feature that UTG does here. That's what Mark is going to look at - how to package up the nashorn replacement</p>",
        "id": 235430375,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1618960425
    },
    {
        "content": "<p>or, could we move UTG away from using javascript? we install many tools, surely one of the others can do what it is trying to do with javascript.</p>",
        "id": 235495276,
        "sender_full_name": "John Moehrke",
        "timestamp": 1619005520
    },
    {
        "content": "<p>I'd rather continue supporting javascript; it's very effective for the purpose over trying to muck around with xslt to do the same job.</p>",
        "id": 235495790,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1619005755
    },
    {
        "content": "<p>well, I had to ask.  so many other builds work just fine. UTG is such an odd duck, and it seems it is odd just purely to be different.</p>",
        "id": 235496214,
        "sender_full_name": "John Moehrke",
        "timestamp": 1619005940
    }
]