[
    {
        "content": "<p>Are there plans to update the web protocol for the URI's listed on <a href=\"http://hl7.org/fhir/terminologies-systems.html\" title=\"http://hl7.org/fhir/terminologies-systems.html\">http://hl7.org/fhir/terminologies-systems.html</a> from \"http\" to \"https\" in the near future? </p>\n<p>The reason I ask is because the Inferno test tool is returning a failed test when the https protocol is used in the URI. I don't believe this is a valid test failure, but I believe Inferno is based on what is published on this page.</p>",
        "id": 194836895,
        "sender_full_name": "John Snyder",
        "timestamp": 1587490699
    },
    {
        "content": "<p>No, the intent is for the canonical urls to remain as \"http:\", as they are documented on that page.  For canonical urls it doesn't seem necessary (or desirable) to specify the secure protocol (as usually there's a redirect and how it's handled is server dependent).</p>",
        "id": 194839515,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1587491937
    },
    {
        "content": "<p>And we don't intend for the canonical urls to change.</p>",
        "id": 194839641,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1587491991
    },
    {
        "content": "<p>The primary purpose of canonical URLs is not to resolve.  Also, as it becomes unnecessary to distinguish by URL whether data will be secured or not, formally declaring https will be unnecessary.  If a server (for some strange reason) decides that queries of a terminology must be secured, most systems can automatically retry with https if http fails</p>",
        "id": 194841730,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1587493035
    },
    {
        "content": "<p>To be pedantic, It's not necessary (or desirable) to change because these are URIs (identifiers), and not URLs (locations).<br>\nWhether, how, or if you can resolve a URI is irrelevant to its meaning or intended use as an identifier.</p>",
        "id": 194861151,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1587502952
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"208876\">@John Snyder</span> could you share a little more information about the test you're looking at in inferno?  I'd like to investigate a little more, although we might want to move this conversation over to the #inferno stream.</p>",
        "id": 194948562,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1587569465
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"197651\">@Reece Adamson</span>  <br>\nI don't know how to move this to the inferno stream other than to repost it?</p>\n<p>I talked to our QA person and the test that are failing are The test for Observation Body Height Tests,Observation Blood Pressure Tests,Observation Body Weight Tests.</p>\n<p>the part of the response that is failing is this section where you can see that we use \"<a href=\"https://loinc.org\" title=\"https://loinc.org\">https://loinc.org</a>\" as the system.</p>\n<p>{<br>\n  \"resourceType\": \"Observation\",<br>\n  \"id\": \"187f92da-2246-46a6-a3b6-dde820a17575\",<br>\n  \"status\": \"final\",<br>\n  \"category\": [<br>\n    {<br>\n      \"coding\": [<br>\n        {<br>\n          \"system\": \"<a href=\"http://terminology.hl7.org/CodeSystem/observation-category\" title=\"http://terminology.hl7.org/CodeSystem/observation-category\">http://terminology.hl7.org/CodeSystem/observation-category</a>\",<br>\n          \"code\": \"vital-signs\",<br>\n          \"display\": \"Vital Signs\"<br>\n        }<br>\n      ]<br>\n    }<br>\n  ],<br>\n  \"code\": {<br>\n    \"coding\": [<br>\n      {<br>\n        \"system\": \"<a href=\"https://loinc.org\" title=\"https://loinc.org\">https://loinc.org</a>\",<br>\n        \"code\": \"8302-2\",<br>\n        \"display\": \"Body height\"<br>\n      }<br>\n    ]<br>\n  },</p>",
        "id": 194954042,
        "sender_full_name": "John Snyder",
        "timestamp": 1587571667
    },
    {
        "content": "<p>Thanks for the details that's really helpful!  I'm guessing inferno is throwing an error because the codesystem is not an exact match to that which is fixed in the profile.  I'll look into whether its a little too strict when validating terminology (and it probably is), but I think this specific error doesn't have to do with that.</p>\n<p>I tried to validate the resource( <a href=\"/user_uploads/10155/Jl5B8zRRtd69JmDHtltc8BKj/https.json\" title=\"https.json\">https.json</a> ) against the HL7 validator with:</p>\n<div class=\"codehilite\"><pre><span></span>java -jar org.hl7.fhir.validator.jar https.json -version <span class=\"m\">4</span>.0.1\n</pre></div>\n\n\n<p>and see a warning related to this and also it looks like the terminology isn't validated because of the <code>https</code>:</p>\n<div class=\"codehilite\"><pre><span></span>  Information @ Observation.code.coding<span class=\"o\">[</span><span class=\"m\">0</span><span class=\"o\">]</span> <span class=\"o\">(</span>line <span class=\"m\">23</span>, col2<span class=\"o\">)</span> : Code System URI <span class=\"s2\">&quot;https://loinc.org&quot;</span> is unknown so the code cannot be validated\n  Warning @ Observation.code <span class=\"o\">(</span>line <span class=\"m\">22</span>, col12<span class=\"o\">)</span> : None of the codes provided are in the value <span class=\"nb\">set</span> http://hl7.org/fhir/ValueSet/observation-vitalsignresult <span class=\"o\">(</span>http://hl7.org/fhir/ValueSet/observation-vitalsignresult<span class=\"o\">)</span>, and a code should come from this value <span class=\"nb\">set</span> unless it has no suitable code<span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"nv\">codes</span> <span class=\"o\">=</span> https://loinc.org#8302-2<span class=\"o\">)</span>\n</pre></div>\n\n\n<p>I'm surprised that its only a warning here because at least from the<a href=\"https://www.hl7.org/fhir/elementdefinition-definitions.html#ElementDefinition.fixed_x_\" title=\"https://www.hl7.org/fhir/elementdefinition-definitions.html#ElementDefinition.fixed_x_\"> language in the spec ElementDefinition.fixed[x]</a>:<br>\n<code>Specifies a value that SHALL be exactly the value for this element in the instance. For purposes of comparison, non-significant whitespace is ignored, and all values must be an exact match (case and accent sensitive). Missing elements/attributes must also be missing.</code></p>\n<p>I imagine the code should be an exact match so I'd expect an error there if its wrong, but even if I make the code incorrect it is still a warning (but that's a different topic).</p>\n<p>My main question is this:<br>\nDoes this mean that a uri ( specifically the url protocol portion) does not have to be an exact match when fixed by ElementDefinition.fixed[x]?  At least based on the ElementDefinition.fixed[x] definition it seems like everything that's not whitespace should matter.</p>\n<p>Thoughts on this <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> or anyone else? I could be totally out of my gourd here.</p>",
        "id": 194960762,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1587574826
    },
    {
        "content": "<p>Per the <a href=\"https://www.hl7.org/fhir/terminologies-systems.html\" title=\"https://www.hl7.org/fhir/terminologies-systems.html\">external code system page</a> at FHIR (v4 but it's consistent) the identifier for LOINC does not have https. That is the error and conformance testing is correct to catch this.</p>",
        "id": 194971455,
        "sender_full_name": "Robert McClure",
        "timestamp": 1587579637
    },
    {
        "content": "<p>Yes, the system uri needs to be <code>http://loinc.org</code>.</p>",
        "id": 194972450,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1587580119
    },
    {
        "content": "<p>Thanks, I appreciate the explanation!</p>",
        "id": 194975064,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1587581333
    },
    {
        "content": "<p>More generally, URIs (as used to reference CodeSystems, ValueSets, etc) are essentially magic numbers - they have to match exactly; they have no other semantics, you cannot extract any meaningful information by parsing them, etc etc.<br>\nThat they are _sometimes_ human (or geek)-readable and/or resolvable by treating them as URLs is a happy convenience, but should make NO difference to whether a given resource is valid.<br>\nThis is why, while the URL <a href=\"http://LOINC.ORG\" title=\"http://LOINC.ORG\">http://LOINC.ORG</a> is equivalent to the URL <a href=\"http://loinc.org\" title=\"http://loinc.org\">http://loinc.org</a>, the URIs <a href=\"http://LOINC.ORG\" title=\"http://LOINC.ORG\">http://LOINC.ORG</a> and <a href=\"http://loinc.org\" title=\"http://loinc.org\">http://loinc.org</a> are not equal .</p>",
        "id": 195017247,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1587615244
    }
]