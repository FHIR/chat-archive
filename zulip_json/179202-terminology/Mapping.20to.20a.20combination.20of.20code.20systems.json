[
    {
        "content": "<p>We're working on a mapping between code systems which we'd like to export as a FHIR concept map. The source code system is a national table of laboratory tests used by GP's; these are mapped to a  combination of LOINC and SNOMED, which are used by the laboratories who execute the tests and report the results back. Where the GP's use a single code for the combination of test and specimen (e.g. bacterial culture in urine), the labs frequently record it with a LOINC-code with unspecified specimen and a SNOMED code for the specimen (e.g. 6463-4<br>\nBacteria identified in Unspecified specimen by Culture &amp; 122575003 |Urine (specimen|).</p>\n<p>Our first attempt at an example of this mapping contained one ConceptMap element  with two group elements: one for SNOMED and one for LOINC. We received as feedback the suggestion two split it into two separate ConceptMaps. However I hesitate to adopt this suggestion, because I feel it would make the mapping harder to maintain (e.g. to ensure that the LOINC and SNOMED codes are compatible) and also that it would obscure the intention of the mapping: which is to map to <em>the combination of both SNOMED and LOINC</em>, not to either SNOMED or LOINC.<br>\nI would welcome a second opinion!</p>",
        "id": 187641211,
        "sender_full_name": "Feikje Hielkema",
        "timestamp": 1581084149
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> | <span class=\"user-mention\" data-user-id=\"191343\">@Michael Lawley</span> This is the one we briefly talked about. I did not know about/realize this particular interrelationship  between the SNOMED and LOINC parts of the mapping or I would have mentioned.</p>\n<p>In FHIR you would apply LOINC parts of the mapping to <a href=\"http://build.fhir.org/observation-definitions.html#Observation.code\" target=\"_blank\" title=\"http://build.fhir.org/observation-definitions.html#Observation.code\">Observation(.component).code</a> while the SNOMED CT parts are helpful in <a href=\"http://build.fhir.org/specimen-definitions.html#Specimen.type\" target=\"_blank\" title=\"http://build.fhir.org/specimen-definitions.html#Specimen.type\">Specimen.type</a> connected to the Observation.</p>\n<p>So while the mappings only make sense in conjunction they context of use in FHIR varies.</p>",
        "id": 187666745,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1581100525
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"262707\">@Feikje Hielkema</span> I think what is likely critical to the understanding of what you are requesting is \"<em>the combination of both SNOMED and LOINC</em>\".  And with that understanding there may be a very good argument for using a combined single ConceptMap instance as you are considering.  But I think that having some additional more specific examples would help a lot in determining if that in fact is likely to be the best approach.</p>",
        "id": 187704721,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1581143683
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191375\">@Alexander Henket</span> I think that maybe I understand what you are describing, but I'm not really certain.  Could you provide further examples or description?</p>",
        "id": 187704766,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1581143795
    },
    {
        "content": "<p>It seems to me that this is probably a use-case for <code>target.product</code> where <code>target.code</code> would be the LOINC code and <code>target.product.value</code> is the SNOMED code (and <code>target.product.property</code> is the URI for <code>Specimen.type</code>).</p>",
        "id": 187709627,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1581154082
    },
    {
        "content": "<p>Looks to me like a generic challenge of mapping between code systems with different granularity or scope. Also related to TermInfo problem. Another example is C-NPU to (LOINC &amp; UCUM).</p>",
        "id": 187709821,
        "sender_full_name": "Christof Gessner",
        "timestamp": 1581154525
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span>  I'll list two examples that are typical of our two user types (clinical chemistry and microbiology): 1) source system code 1339 'kweek urethra' (lit. culture urethra), maps to LOINC 6463-4 |Bacteria identified in Unspecified Specimen by Culture| AND SNOMED 119393003 |Specimen from urethra (specimen)|;  2) 2979 'ijzer urine 24u' (lit. iron 24h), maps to LOINC (25937-4 |Iron [moles/volume] in 24 hour Urine| OR 14799-1 |Iron [Moles/time] in 24 hour Urine|) AND to SNOMED 276833005 |24 hour urine sample (specimen)</p>\n<p>NB. LOINC contains more codes with which to measure iron in urine, but these are the only two in the Dutch Labcodeset (our target system), hence the only two we map to.</p>\n<p>The reason we need the SNOMED concepts, is that the microbiologists consider the system field in LOINC insufficient; they require more detailed information on type, topography, morphology and collection method of the specimen. An initial attempt to extend LOINC with measurements which included the specimen led to the submission of &gt;2.000 concepts and a backlog of two years at Regenstrief, and the microbiologists barely scratched the surface; so they abandoned that. So, we represent a labtest as a combination of LOINC and SNOMED in our Labcodeset; and the local table of the GP's needs to map to that combination.</p>",
        "id": 187797171,
        "sender_full_name": "Feikje Hielkema",
        "timestamp": 1581323899
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191343\">@Michael Lawley</span> You propose that we use one group, target system LOINC, but with the SNOMED specimen as the value of target.product in that group? That does seem a lot easier to parse, I mean it's more obvious that way that the mappings belong together. I don't really understand the documentation of 'dependsOn': what kind of element/value can we store there? Where could I find an example?</p>",
        "id": 187797438,
        "sender_full_name": "Feikje Hielkema",
        "timestamp": 1581324260
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"193991\">@Christof Gessner</span> The C-NPU to LOINC/UCUM mapping sounds highly relevant; where could I find it?</p>",
        "id": 187797465,
        "sender_full_name": "Feikje Hielkema",
        "timestamp": 1581324328
    },
    {
        "content": "<p>this example in the spec seems relevant: <a href=\"http://hl7.org/fhir/conceptmap-example-specimen-type.html\" target=\"_blank\" title=\"http://hl7.org/fhir/conceptmap-example-specimen-type.html\">http://hl7.org/fhir/conceptmap-example-specimen-type.html</a></p>",
        "id": 187797720,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1581324604
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"262707\">@Feikje Hielkema</span> I was not precise: Such a mapping C-NPU to LOINC/UCUM would be another example. I don't have it available, but it will be discussed in the context of EU cross-border exchange of lab data. There was a cooperation between the organisations a few years back, but is has been dormant since then.</p>",
        "id": 187799182,
        "sender_full_name": "Christof Gessner",
        "timestamp": 1581326177
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"193991\">@Christof Gessner</span> Oh, shame, it sounded very relevant; well, it clearly will be :-) In fact, our Labcodeset also contains UCUM units which are recommended for use in the Netherlands; but as the GP source table doesn't specify units of measurement, that bit is fortunately out of scope for our current mapping. One less complication to deal with!</p>",
        "id": 187799568,
        "sender_full_name": "Feikje Hielkema",
        "timestamp": 1581326635
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"262707\">@Feikje Hielkema</span>   Some work being done in the context of a funded project in Germany: <a href=\"https://www.miracum.org/wp-content/uploads/2018/12/Bietenbeck-et-al.-2018-NPU-LOINC-and-SNOMED-CT-a-comparison-of-termino.pdf\" target=\"_blank\" title=\"https://www.miracum.org/wp-content/uploads/2018/12/Bietenbeck-et-al.-2018-NPU-LOINC-and-SNOMED-CT-a-comparison-of-termino.pdf\">https://www.miracum.org/wp-content/uploads/2018/12/Bietenbeck-et-al.-2018-NPU-LOINC-and-SNOMED-CT-a-comparison-of-termino.pdf</a></p>",
        "id": 187800178,
        "sender_full_name": "Christof Gessner",
        "timestamp": 1581327243
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"262707\">@Feikje Hielkema</span>   And apparently also in Sweden for SNOMED: <a href=\"https://confluence.ihtsdotools.org/display/FT/201931+SNOMED+CT%2C+NPU+and+LOINC+integration+for+semantic+interoperability+of+laboratory+test+results?preview=/87042653/87043077/201931%20SCT%20Expo%202019%20-%20Karlsson.pdf\" target=\"_blank\" title=\"https://confluence.ihtsdotools.org/display/FT/201931+SNOMED+CT%2C+NPU+and+LOINC+integration+for+semantic+interoperability+of+laboratory+test+results?preview=/87042653/87043077/201931%20SCT%20Expo%202019%20-%20Karlsson.pdf\">https://confluence.ihtsdotools.org/display/FT/201931+SNOMED+CT%2C+NPU+and+LOINC+integration+for+semantic+interoperability+of+laboratory+test+results?preview=/87042653/87043077/201931%20SCT%20Expo%202019%20-%20Karlsson.pdf</a></p>",
        "id": 187800208,
        "sender_full_name": "Christof Gessner",
        "timestamp": 1581327285
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"262707\">@Feikje Hielkema</span> actually... a mapping to UCUM already <a href=\"http://decor.nictiz.nl/labuitslagen/lu-html-20190214T125930/tmp-2.16.840.1.113883.2.4.3.11.60.7.10.31-2017-12-05T000000.html\" target=\"_blank\" title=\"http://decor.nictiz.nl/labuitslagen/lu-html-20190214T125930/tmp-2.16.840.1.113883.2.4.3.11.60.7.10.31-2017-12-05T000000.html\">existed for years</a> to support V3.</p>",
        "id": 187803347,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1581330272
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/b-bOxsXayRVOGj0BMA02CI29/FHIR-NHG-map-example.xml\" target=\"_blank\" title=\"FHIR-NHG-map-example.xml\">FHIR-NHG-map-example.xml</a> <span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> I've updated our example mapping XML with your suggestion to use the product element. Could you check if this example is correct? I like the solution, it's much easier to understand than the original (which had the mapping split in two groups).</p>",
        "id": 187823816,
        "sender_full_name": "Feikje Hielkema",
        "timestamp": 1581347459
    },
    {
        "content": "<p>I'm not convinced that the HTML rendering in  <a href=\"http://hl7.org/fhir/conceptmap-example-specimen-type.html\" target=\"_blank\" title=\"http://hl7.org/fhir/conceptmap-example-specimen-type.html\">http://hl7.org/fhir/conceptmap-example-specimen-type.html</a> is acurate -- it suggests that the values in the <code>product</code> element belong to the <code>targetCanonical</code> ValueSet, but this is not actually the case.</p>",
        "id": 187872902,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1581380774
    },
    {
        "content": "<p>yes it's definitely not satisfactory</p>",
        "id": 187879280,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1581389611
    }
]