[
    {
        "content": "<p>If I have a SNOMED description identifier, how can I test that the concept it relates to is within the result of an ECL expression?</p>\n<p>Do I need to get the concept id first? If so how would I do that?</p>\n<p>So the following does not work as it used a description id:<br>\n<a href=\"https://ontoserver.dataproducts.nhs.uk/fhir/ValueSet/$validate-code?system=http://snomed.info/sct&amp;code=250299011&amp;url=http://snomed.info/sct/999000031000000106/version/20190320?fhir_vs=ecl/(&lt;&lt;410597007)&amp;display=foo\" target=\"_blank\" title=\"https://ontoserver.dataproducts.nhs.uk/fhir/ValueSet/$validate-code?system=http://snomed.info/sct&amp;code=250299011&amp;url=http://snomed.info/sct/999000031000000106/version/20190320?fhir_vs=ecl/(&lt;&lt;410597007)&amp;display=foo\">https://ontoserver.dataproducts.nhs.uk/fhir/ValueSet/$validate-code?system=http://snomed.info/sct&amp;code=250299011&amp;url=http://snomed.info/sct/999000031000000106/version/20190320?fhir_vs=ecl/(&lt;&lt;410597007)&amp;display=foo</a></p>\n<p>but using the concept id for that description id it does:<br>\n<a href=\"https://ontoserver.dataproducts.nhs.uk/fhir/ValueSet/$validate-code?system=http://snomed.info/sct&amp;code=160567004&amp;url=http://snomed.info/sct/999000031000000106/version/20190320?fhir_vs=ecl/(&lt;&lt;410597007)&amp;display=foo\" target=\"_blank\" title=\"https://ontoserver.dataproducts.nhs.uk/fhir/ValueSet/$validate-code?system=http://snomed.info/sct&amp;code=160567004&amp;url=http://snomed.info/sct/999000031000000106/version/20190320?fhir_vs=ecl/(&lt;&lt;410597007)&amp;display=foo\">https://ontoserver.dataproducts.nhs.uk/fhir/ValueSet/$validate-code?system=http://snomed.info/sct&amp;code=160567004&amp;url=http://snomed.info/sct/999000031000000106/version/20190320?fhir_vs=ecl/(&lt;&lt;410597007)&amp;display=foo</a></p>",
        "id": 180976298,
        "sender_full_name": "Richard Kavanagh",
        "timestamp": 1574031037
    },
    {
        "content": "<p>Yes, you need the Concept id.</p>\n<p>Ontoserver will allow you to search for a descriptionId <a href=\"https://ontoserver.dataproducts.nhs.uk/fhir/ValueSet/$expand?filter=250299011&amp;url=http://snomed.info/sct?fhir_vs\" target=\"_blank\" title=\"https://ontoserver.dataproducts.nhs.uk/fhir/ValueSet/$expand?filter=250299011&amp;url=http://snomed.info/sct?fhir_vs\">https://ontoserver.dataproducts.nhs.uk/fhir/ValueSet/$expand?filter=250299011&amp;url=http://snomed.info/sct?fhir_vs</a> but note that this may return multiple matches (the search is prefix-based &amp; prefixes are not unique)<br>\nBut, while descriptionIds are SCTIDs (<strong>component</strong> identifiers), they are not SNOMED concepts so not members of <a href=\"http://snomed.info/sct?fhir_vs\" target=\"_blank\" title=\"http://snomed.info/sct?fhir_vs\">http://snomed.info/sct?fhir_vs</a></p>",
        "id": 180978732,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1574035692
    },
    {
        "content": "<p>I want to say that the \"correct\" solution <span aria-label=\"police\" class=\"emoji emoji-1f46e\" role=\"img\" title=\"police\">:police:</span> is to tell the system that's giving you description ids to stop it and give you concept ids instead :sigh:</p>",
        "id": 180978893,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1574036037
    },
    {
        "content": "<p>That made me laugh. It's not just systems, I've lied about our decriptionid support because if we said we did support, it would have supported it becoming a MUST in profiles.</p>",
        "id": 180992853,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1574060991
    },
    {
        "content": "<blockquote>\n<p>I want to say that the \"correct\" solution <span aria-label=\"police\" class=\"emoji emoji-1f46e\" role=\"img\" title=\"police\">:police:</span> is to tell the system that's giving you description ids to stop it and give you concept ids instead :sigh:</p>\n</blockquote>\n<p>Unfortunately, these are sourced externally and I suspect there is little chance of getting it changed.</p>",
        "id": 180995715,
        "sender_full_name": "Richard Kavanagh",
        "timestamp": 1574065365
    },
    {
        "content": "<blockquote>\n<p>Yes, you need the Concept id.</p>\n<p>Ontoserver will allow you to search for a descriptionId <a href=\"https://ontoserver.dataproducts.nhs.uk/fhir/ValueSet/$expand?filter=250299011&amp;url=http://snomed.info/sct?fhir_vs\" target=\"_blank\" title=\"https://ontoserver.dataproducts.nhs.uk/fhir/ValueSet/$expand?filter=250299011&amp;url=http://snomed.info/sct?fhir_vs\">https://ontoserver.dataproducts.nhs.uk/fhir/ValueSet/$expand?filter=250299011&amp;url=http://snomed.info/sct?fhir_vs</a> but note that this may return multiple matches (the search is prefix-based &amp; prefixes are not unique)<br>\nBut, while descriptionIds are SCTIDs (<strong>component</strong> identifiers), they are not SNOMED concepts so not members of <a href=\"http://snomed.info/sct?fhir_vs\" target=\"_blank\" title=\"http://snomed.info/sct?fhir_vs\">http://snomed.info/sct?fhir_vs</a></p>\n</blockquote>\n<p>Thanks <span class=\"user-mention\" data-user-id=\"191343\">@Michael Lawley</span> - it's never easy :-)</p>",
        "id": 180995790,
        "sender_full_name": "Richard Kavanagh",
        "timestamp": 1574065446
    },
    {
        "content": "<p>I <em>think</em> the conformant way to handle this is to pass a <code>Coding</code> to <code>$validate-code</code> with <code>system=http://snomed.info/sct</code> and <code>code</code> blank and use the extension <a href=\"http://hl7.org/fhir/extension-coding-sctdescid.html\" target=\"_blank\" title=\"http://hl7.org/fhir/extension-coding-sctdescid.html\">http://hl7.org/fhir/extension-coding-sctdescid.html</a> for the descriptionId.<br>\nI don't know if <em>any</em> Tx implementations support this however.</p>",
        "id": 181000003,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1574070104
    },
    {
        "content": "<p>Another reason why <code>$validate-code</code> should return the code that was validated</p>",
        "id": 181000117,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1574070223
    },
    {
        "content": "<blockquote>\n<p>That made me laugh. It's not just systems, I've lied about our decriptionid support because if we said we did support, it would have supported it becoming a MUST in profiles.</p>\n</blockquote>\n<p>Hmm,  the more I dig the more I see people are not always using SNOMED correctly. Pushing problems down the line does not help in the long run. The lack of clarity in the UK products also does not help but that's a different issue.</p>",
        "id": 181095465,
        "sender_full_name": "Richard Kavanagh",
        "timestamp": 1574156600
    },
    {
        "content": "<p>Yes, it's also confusing. A balance? Need to push SNOMED into 80% use and not let the 20%'s block that.</p>",
        "id": 181100907,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1574161370
    },
    {
        "content": "<p>Agreed <span class=\"user-mention\" data-user-id=\"191362\">@Richard Kavanagh</span> kicking the can down the road, not pushing back on external data sources, is making things worse</p>",
        "id": 181152163,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1574196338
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191687\">@Kevin Mayfield</span> can you say more about your descriptionId support?</p>",
        "id": 181152232,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1574196378
    },
    {
        "content": "<p>We used them during the snomed load process for our reference implementation (which was based on hapi - for coding).<br>\nIt was another project that was keen on decriptionid</p>",
        "id": 181152880,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1574196838
    },
    {
        "content": "<p>So not exposed through the FHIR API then?</p>",
        "id": 181152986,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1574196885
    },
    {
        "content": "<p>No, had no requirement in the profiles.</p>",
        "id": 181153251,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1574197064
    },
    {
        "content": "<p>\"But, while descriptionIds are SCTIDs (component identifiers), they are not SNOMED concepts \" ... I thought in Snomed everything was a concept ? :-) &lt;/GD&amp;RVF&gt;</p>",
        "id": 182103640,
        "sender_full_name": "Adam Flinton",
        "timestamp": 1574943146
    },
    {
        "content": "<p>Components: <a href=\"https://confluence.ihtsdotools.org/display/DOCTIG/3.1.+Components\" target=\"_blank\" title=\"https://confluence.ihtsdotools.org/display/DOCTIG/3.1.+Components\">https://confluence.ihtsdotools.org/display/DOCTIG/3.1.+Components</a></p>\n<p>Concepts: <a href=\"https://confluence.ihtsdotools.org/display/DOCTIG/3.1.1.+Concepts\" target=\"_blank\" title=\"https://confluence.ihtsdotools.org/display/DOCTIG/3.1.1.+Concepts\">https://confluence.ihtsdotools.org/display/DOCTIG/3.1.1.+Concepts</a></p>\n<p>GD&amp;RVF is not in SNOMED</p>",
        "id": 182212243,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1575072174
    },
    {
        "content": "<blockquote>\n<p>Yes, you need the Concept id.</p>\n<p>Ontoserver will allow you to search for a descriptionId <a href=\"https://ontoserver.dataproducts.nhs.uk/fhir/ValueSet/$expand?filter=250299011&amp;url=http://snomed.info/sct?fhir_vs\" target=\"_blank\" title=\"https://ontoserver.dataproducts.nhs.uk/fhir/ValueSet/$expand?filter=250299011&amp;url=http://snomed.info/sct?fhir_vs\">https://ontoserver.dataproducts.nhs.uk/fhir/ValueSet/$expand?filter=250299011&amp;url=http://snomed.info/sct?fhir_vs</a> but note that this may return multiple matches (the search is prefix-based &amp; prefixes are not unique)<br>\nBut, while descriptionIds are SCTIDs (<strong>component</strong> identifiers), they are not SNOMED concepts so not members of <a href=\"http://snomed.info/sct?fhir_vs\" target=\"_blank\" title=\"http://snomed.info/sct?fhir_vs\">http://snomed.info/sct?fhir_vs</a></p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"191343\">@Michael Lawley</span>  Can you give examples of scenarios where there may be multiple matches - trying to understand how I might mitigate this. - Thanks</p>",
        "id": 182305489,
        "sender_full_name": "Richard Kavanagh",
        "timestamp": 1575243622
    },
    {
        "content": "<p>Here's a few:<br>\n101013    101013017<br>\n102018    102018012<br>\n110017    110017019</p>",
        "id": 182306181,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1575244854
    },
    {
        "content": "<blockquote>\n<p>Here's a few:<br>\n101013    101013017<br>\n102018    102018012<br>\n110017    110017019<br>\n```Ah I see now - looks like we are going to have solve this one away from the terminology server..</p>\n</blockquote>",
        "id": 182306934,
        "sender_full_name": "Richard Kavanagh",
        "timestamp": 1575246245
    },
    {
        "content": "<p>Yeah but given it's a self hosted graph... a description is a sort of concept... as is a relationship....  i.e. the stuff hanging from 900000000000441003  .<br>\nAs ever I suppose it's a matter of definition. i.e. the core metadata are themselves concepts.</p>",
        "id": 182322502,
        "sender_full_name": "Adam Flinton",
        "timestamp": 1575273329
    },
    {
        "content": "<p>descriptionIds (and relationshipIds) are really private keys; they should never be appearing in patient data</p>",
        "id": 182396599,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1575325474
    },
    {
        "content": "<p>yup with you on that. for one thing how would you know which end of a relationship e.g. cat hair or asthma</p>",
        "id": 182422860,
        "sender_full_name": "Adam Flinton",
        "timestamp": 1575358349
    }
]