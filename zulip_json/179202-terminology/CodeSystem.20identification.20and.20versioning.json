[
    {
        "content": "<p>Hello!</p>\n<p>What are the best practices for CodeSystem versioning?<br>\nMore specificaly that are the rules for identification of different versions of a codesystem?</p>\n<p>CodeSystem has these attributes for identification and versioning:</p>\n<div class=\"codehilite\"><pre><span></span><code>id          Logical id of this artifact\nurl         Canonical identifier for this code system, represented as a URI (globally unique) (Coding.system)\nidentifier  Identifier  Additional identifier for the code system (business identifier)\nversion     Business version of the code system (Coding.version)\n</code></pre></div>\n<p>That of these should stay the same and that of these should acquire new values then the codesystem is getting a new version?</p>\n<p>For example: <br>\n<code>URL</code>   should be \"globally unique\", but is it for the codesystem or for the codesystem version?<br>\nThe same goes for <code>identifier</code> - is it a \"business identifier\" for the codesystem or for the codesystem version?</p>\n<p>I found some inconsistency in identification and versioning of standard codesystems published in the FHIR-specification.<br>\nSome examples:<br>\n<strong>Here url and id are the same between versions but oid is different.</strong></p>\n<div class=\"codehilite\"><pre><span></span><code>  &quot;id&quot; : &quot;FHIR-version&quot;,\n  &quot;url&quot; : &quot;http://hl7.org/fhir/FHIR-version&quot;,\n  &quot;identifier&quot; : [{\n    &quot;system&quot; : &quot;urn:ietf:rfc:3986&quot;,\n    &quot;value&quot; : &quot;urn:oid:2.16.840.1.113883.4.642.4.1310&quot;\n  }],\n  &quot;version&quot; : &quot;4.0.1&quot;\n</code></pre></div>\n<div class=\"codehilite\"><pre><span></span><code>  &quot;id&quot; : &quot;FHIR-version&quot;,\n  &quot;url&quot; : &quot;http://hl7.org/fhir/FHIR-version&quot;,\n  &quot;identifier&quot; : [{\n    &quot;system&quot; : &quot;urn:ietf:rfc:3986&quot;,\n    &quot;value&quot; : &quot;urn:oid:2.16.840.1.113883.4.642.1.1310&quot;\n  }],\n  &quot;version&quot; : &quot;4.6.0&quot;\n</code></pre></div>\n<p><strong>Here url, id, oid are different but version is the same despite it's clearly a new version of the codesystem.</strong></p>\n<div class=\"codehilite\"><pre><span></span><code>  &quot;id&quot; : &quot;v2-2.4-0006&quot;,\n  &quot;url&quot; : &quot;http://terminology.hl7.org/CodeSystem/v2-0006|2.4&quot;,\n  &quot;identifier&quot; : [{\n    &quot;system&quot; : &quot;urn:ietf:rfc:3986&quot;,\n    &quot;value&quot; : &quot;urn:oid:2.16.840.1.113883.18.8&quot;\n  }],\n  &quot;version&quot; : &quot;0006&quot;,\n  &quot;name&quot; : &quot;v2.0006.2.4&quot;,\n  &quot;title&quot; : &quot;v2 table 0006, Version 2.4&quot;,\n</code></pre></div>\n<div class=\"codehilite\"><pre><span></span><code>  &quot;id&quot; : &quot;v2-2.1-0006&quot;,\n  &quot;url&quot; : &quot;http://terminology.hl7.org/CodeSystem/v2-0006|2.1&quot;,\n  &quot;identifier&quot; : [{\n    &quot;system&quot; : &quot;urn:ietf:rfc:3986&quot;,\n    &quot;value&quot; : &quot;urn:oid:2.16.840.1.113883.18.7&quot;\n  }],\n  &quot;version&quot; : &quot;0006&quot;,\n  &quot;name&quot; : &quot;v2.0006.2.1&quot;,\n  &quot;title&quot; : &quot;v2 table 0006, Version 2.1&quot;,\n</code></pre></div>\n<hr>\n<p><strong>So what is the correst way to identify and version codesystem?</strong><br>\nFor example we have two versions of some codesystem:<br>\n<a href=\"https://nsi.rosminzdrav.ru/#!/refbook/1.2.643.5.1.13.13.11.1040/version/1.0\">https://nsi.rosminzdrav.ru/#!/refbook/1.2.643.5.1.13.13.11.1040/version/1.0</a><br>\n<a href=\"https://nsi.rosminzdrav.ru/#!/refbook/1.2.643.5.1.13.13.11.1040/version/2.1\">https://nsi.rosminzdrav.ru/#!/refbook/1.2.643.5.1.13.13.11.1040/version/2.1</a><br>\n(the requerment is to store both versions of the codesystem on the same fhir-server)</p>\n<p>Some posible variants of describing these as a fhir-resource are:</p>\n<p><strong>(1) id, url, version - different, oid - same</strong></p>\n<div class=\"codehilite\"><pre><span></span><code>  &quot;id&quot; : &quot;1040-v-1-0&quot;,\n  &quot;url&quot; : &quot;https://nsi.rosminzdrav.ru/#!/refbook/1.2.643.5.1.13.13.11.1040/version/1.0&quot;,\n  &quot;identifier&quot; : [{\n    &quot;system&quot; : &quot;urn:ietf:rfc:3986&quot;,\n    &quot;value&quot; : &quot;urn:oid:1.2.643.5.1.13.13.11.1040&quot;\n  }],\n  &quot;version&quot; : &quot;1.0&quot;\n</code></pre></div>\n<div class=\"codehilite\"><pre><span></span><code>  &quot;id&quot; : &quot;1040-v-2-1&quot;,\n  &quot;url&quot; : &quot;https://nsi.rosminzdrav.ru/#!/refbook/1.2.643.5.1.13.13.11.1040/version/2.1&quot;,\n  &quot;identifier&quot; : [{\n    &quot;system&quot; : &quot;urn:ietf:rfc:3986&quot;,\n    &quot;value&quot; : &quot;urn:oid:1.2.643.5.1.13.13.11.1040&quot;\n  }],\n  &quot;version&quot; : &quot;2.1&quot;\n</code></pre></div>\n<p><strong>(2) id, url, oid, version - all different</strong></p>\n<div class=\"codehilite\"><pre><span></span><code>  &quot;id&quot; : &quot;1040-v-1-0&quot;,\n  &quot;url&quot; : &quot;https://nsi.rosminzdrav.ru/#!/refbook/1.2.643.5.1.13.13.11.1040/version/1.0&quot;,\n  &quot;identifier&quot; : [{\n    &quot;system&quot; : &quot;urn:ietf:rfc:3986&quot;,\n    &quot;value&quot; : &quot;urn:oid:1.2.643.5.1.13.13.11.1040.1.0&quot;\n  }],\n  &quot;version&quot; : &quot;1.0&quot;\n</code></pre></div>\n<div class=\"codehilite\"><pre><span></span><code>  &quot;id&quot; : &quot;1040-v-2-1&quot;,\n  &quot;url&quot; : &quot;https://nsi.rosminzdrav.ru/#!/refbook/1.2.643.5.1.13.13.11.1040/version/2.1&quot;,\n  &quot;identifier&quot; : [{\n    &quot;system&quot; : &quot;urn:ietf:rfc:3986&quot;,\n    &quot;value&quot; : &quot;urn:oid:1.2.643.5.1.13.13.11.1040.2.1&quot;\n  }],\n  &quot;version&quot; : &quot;2.1&quot;\n</code></pre></div>\n<p><strong>(3) only version is different (this variant will probably work only with replacement of codesystem?)</strong></p>\n<div class=\"codehilite\"><pre><span></span><code>  &quot;id&quot; : &quot;1040&quot;,\n  &quot;url&quot; : &quot;https://nsi.rosminzdrav.ru/#!/refbook/1.2.643.5.1.13.13.11.1040&quot;,\n  &quot;identifier&quot; : [{\n    &quot;system&quot; : &quot;urn:ietf:rfc:3986&quot;,\n    &quot;value&quot; : &quot;urn:oid:1.2.643.5.1.13.13.11.1040&quot;\n  }],\n  &quot;version&quot; : &quot;1.0&quot;\n</code></pre></div>\n<div class=\"codehilite\"><pre><span></span><code>  &quot;id&quot; : &quot;1040&quot;,\n  &quot;url&quot; : &quot;https://nsi.rosminzdrav.ru/#!/refbook/1.2.643.5.1.13.13.11.1040&quot;,\n  &quot;identifier&quot; : [{\n    &quot;system&quot; : &quot;urn:ietf:rfc:3986&quot;,\n    &quot;value&quot; : &quot;urn:oid:1.2.643.5.1.13.13.11.1040&quot;\n  }],\n  &quot;version&quot; : &quot;2.1&quot;\n</code></pre></div>",
        "id": 256712177,
        "sender_full_name": "Vitaly Rodionov",
        "timestamp": 1633685177
    },
    {
        "content": "<p>The combination of url + version are expected to be unique on a given server.  identifier generally corresponds to url, though it's not prohibited for it to include version as well.  The id is server-assigned and SHALL be unique on a given server.  It doesn't need to have any correlation to the others.</p>\n<p>There are no specific rules about when to create a new 'version' (aka 'release') of a code system, nor are there global rules about what changes can be made to a code system before it's necessary to call it a distinct code system.  (FHIR has preliminary rules for its own code systems, which is essentially \"anything goes until the code system is normative, after that 'inter-version compatibility rules apply'\".</p>",
        "id": 256737330,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1633698791
    },
    {
        "content": "<p>Thank you. That makes the situation a little bit clearer.</p>\n<p>So, basicaly, 'url' doesn't have to be \"globally unique\" and there can be several codesystems with the same 'url' as long as they all have different version values, right?</p>\n<p>Does that mean that for my example we can have the following codesystem resources on a server: </p>\n<div class=\"codehilite\"><pre><span></span><code>  &quot;id&quot; : &quot;1040-v-1-0&quot;,\n  &quot;url&quot; : &quot;https://nsi.rosminzdrav.ru/#!/refbook/1.2.643.5.1.13.13.11.1040&quot;,\n  &quot;identifier&quot; : [{\n    &quot;system&quot; : &quot;urn:ietf:rfc:3986&quot;,\n    &quot;value&quot; : &quot;urn:oid:1.2.643.5.1.13.13.11.1040&quot;\n  }],\n  &quot;version&quot; : &quot;1.0&quot;\n</code></pre></div>\n<div class=\"codehilite\"><pre><span></span><code>  &quot;id&quot; : &quot;1040-v-2-1&quot;,\n  &quot;url&quot; : &quot;https://nsi.rosminzdrav.ru/#!/refbook/1.2.643.5.1.13.13.11.1040&quot;,\n  &quot;identifier&quot; : [{\n    &quot;system&quot; : &quot;urn:ietf:rfc:3986&quot;,\n    &quot;value&quot; : &quot;urn:oid:1.2.643.5.1.13.13.11.1040&quot;\n  }],\n  &quot;version&quot; : &quot;2.1&quot;\n</code></pre></div>\n<p>They have different <code>id</code> and combination of <code>url</code>+<code>version</code> is also unique.<br>\nIs that correct?</p>",
        "id": 256741608,
        "sender_full_name": "Vitaly Rodionov",
        "timestamp": 1633700728
    },
    {
        "content": "<p>We worked out some rules for when to create a new code system version vs. creating a new code system in the \"V2 Tables\" project that the Vocabulary WG did a while ago.  As Lloyd suggests, it wouldn't necessarily to required for anyone to follow those same rules, but I think they generally should be useful and could certainly serve as a guide.  Now I'll just need to recall or find where we have them documented. :)</p>",
        "id": 256756983,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1633706827
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"438858\">@Vitaly Rodionov</span> Yes, that's completely legal.  The gist is that with \"conformance\" resources - those that have a 'url' and 'version' element, there could be multiple versions under active maintenance, and so we need to support multiple instances with the same url (so long as they have distinct versions).</p>",
        "id": 256768668,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1633711516
    },
    {
        "content": "<p>Agree with Lloyd, and also the issue regarding when is it a version versus a new code system is in part tied to meaning permanence for the concepts in the code system, IE: you are expected to have meaning consistency version to version for any concepts with the same code identifier across the versions. If you need to break that rule, you have a new code system, not a new version.</p>",
        "id": 257227024,
        "sender_full_name": "Robert McClure",
        "timestamp": 1634054420
    },
    {
        "content": "<p>Yes, that's the primary rule.</p>",
        "id": 257254894,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1634065351
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> Above you reference some rules/guidance for new version vs. new code system in the \"V2 Tables\".  Can you point me at that, or anything similar?  We're working on additions/modifications to BlueButton valuesets and looking for guidance in terms of versioning.</p>",
        "id": 268762168,
        "sender_full_name": "Bill Harty",
        "timestamp": 1642714771
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192646\">@Bill Harty</span> Hi, Bill.  Sorry it's taken me a little while to respond (now that the WGM has ended).  I'll have to see if I can track down our documentation on this.  The \"V2 tables\" project work was done before all of our documentation in GForge was archived and should have been moved to Confluence, but I'm not sure where that ended up (or if we have something else that would cover it, too).  I didn't find anything yet on a (admittedly rather quick) search.  Maybe <span class=\"user-mention\" data-user-id=\"191982\">@Ted Klein</span> will recall?</p>",
        "id": 268914820,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1642805892
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192646\">@Bill Harty</span> Are you referring to the concept codes holding the metadata for Version 2 tables objects carried in the THO code system \"v2tables.xml\", or are you talking about the versions of the code systems that were created to hold the HL7 defined coded values shown in the v2 publication Chapter 2C for Version 2 tables?</p>",
        "id": 268916400,
        "sender_full_name": "Ted Klein",
        "timestamp": 1642806906
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191982\">@Ted Klein</span> Ted, I think Bill is looking for the set of rules that we used to decide when to create a new code system vs. a new version of an existing code system.  We documented that for the \"v2 tables\" project, so I was suggesting to look there.  But we may have that (or the equivalent) somewhere else, too?</p>",
        "id": 268919608,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1642808977
    },
    {
        "content": "<p>Yes that was all on the old wiki for the project; it predated the use of the Atlassian tools at HL7.   I don't now if that stuff was archived or saved or not.    It should have been...but that might be in hindsight now.    The basic rule was as per Jim Case: additions of new codes or changes to descriptions or display names were version updates.   Removal or wholesale changes in codes were a new code system.  That was not done all that many times.</p>",
        "id": 268922829,
        "sender_full_name": "Ted Klein",
        "timestamp": 1642811368
    },
    {
        "content": "<p>This is helpful, thanks for the info - that seems to line up with comments earlier in this thread.  Regarding version changes (e.g. additions, description changes), is there guidance on how to populate a coding element to reflect version?  One option would be to keep coding.system static and populate coding.version to correctly reflect the version e.g. coding.system = \"<a href=\"http://acme.org/valueset/xyz\">http://acme.org/valueset/xyz</a>\" and coding.version = \"2.0\".  But we've had internal discussions about embedding version in the url e.g. coding.system = \"<a href=\"http://acme.org/valueset/xyz/v2\">http://acme.org/valueset/xyz/v2</a>\".  But in reality it seems that neither of those options are commonplace  in the field.  Seems like most implementers don't provide any version identifiers in a coding, maybe because version changes are generally non-breaking/backwards compatible, so it's not critical to  worry about it? Thanks again for any thoughts/guidance.</p>",
        "id": 269197381,
        "sender_full_name": "Bill Harty",
        "timestamp": 1643074750
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192646\">@Bill Harty</span> I think that, when you actually need it, Coding.version is the \"right\" (or at least likely the best) answer.  But, as you say, many times it really isn't needed, if the code system is \"well-behaved\" in regard to concept identifiers and definitions.  It's discussed <a href=\"http://build.fhir.org/datatypes-definitions.html#Coding.version\">here</a> for the Coding data type.</p>",
        "id": 269293933,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1643132462
    }
]