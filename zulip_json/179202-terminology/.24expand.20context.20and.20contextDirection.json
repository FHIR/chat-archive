[
    {
        "content": "<p>Howdy, Has anyone implemented $expand with support for context and contextDirection? I have been playing with a few open servers and am not sure my request is properly formatted, or servers aren't supporting these parameters! Here is what I have tried:<br>\n-[base]/ValueSet/$expand?context=http://hl7.org/fhir/StructureDefinition/DiagnosticReport#DiagnosticReport.category<br>\n-[base]/ValueSet/$expand?context=DiagnosticReport.category</p>\n<p>...once I got context working, then I figured i would move onto contextDirection. <a href=\"http://build.fhir.org/valueset-operation-expand.html\" target=\"_blank\" title=\"http://build.fhir.org/valueset-operation-expand.html\">$expand definition</a></p>",
        "id": 153999736,
        "sender_full_name": "Brett Marquard",
        "timestamp": 1537880513
    },
    {
        "content": "<p>I'm guessing that this isn't well supported (if at all).  I haven't actually tried to test it myself.  It probably would make sense to add some tests for this to the Terminology Services Connectathon track test suite (and there are other parameters that could use additional tests, too).  I can look further at what we might be able to do between now and Saturday.</p>",
        "id": 153999752,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1537886733
    },
    {
        "content": "<p>I believe that this is implemented on <a href=\"http://tx.fhir.org\" target=\"_blank\" title=\"http://tx.fhir.org\">tx.fhir.org</a> but that will probably be the only place</p>",
        "id": 153999872,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1537937808
    },
    {
        "content": "<p>What's the relationship, if any, between these context parameters and the ValueSet.useContext element?</p>",
        "id": 153999877,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1537941293
    },
    {
        "content": "<p>non</p>",
        "id": 153999880,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1537944401
    },
    {
        "content": "<p>none</p>",
        "id": 153999881,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1537944403
    },
    {
        "content": "<p>Grahame and I exchanged several chats on the side and like the wizard he is implemented these on his server:<br>\n- <a href=\"http://test.fhir.org/r3/ValueSet/$expand?context=DiagnosticReport.category\" target=\"_blank\" title=\"http://test.fhir.org/r3/ValueSet/$expand?context=DiagnosticReport.category\">http://test.fhir.org/r3/ValueSet/$expand?context=DiagnosticReport.category</a><br>\n- <a href=\"http://test.fhir.org/r3/ValueSet/$expand?context=http://hl7.org/fhir/StructureDefinition/DiagnosticReport%23DiagnosticReport.category\" target=\"_blank\" title=\"http://test.fhir.org/r3/ValueSet/$expand?context=http://hl7.org/fhir/StructureDefinition/DiagnosticReport%23DiagnosticReport.category\">http://test.fhir.org/r3/ValueSet/$expand?context=http://hl7.org/fhir/StructureDefinition/DiagnosticReport%23DiagnosticReport.category</a></p>",
        "id": 154000243,
        "sender_full_name": "Brett Marquard",
        "timestamp": 1538051451
    },
    {
        "content": "<p>I'm nervous about the first variant. It's definitely simpler, but I suspect that it falls on the side of too simple</p>",
        "id": 154000250,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1538053529
    },
    {
        "content": "<p>Is the idea that with the 2nd syntax, you could also request profile-specific element expansions?</p>",
        "id": 154000922,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1538109670
    },
    {
        "content": "<p>well, using context instead of specifying a value set directly allows you to ask the system to sort out which value set applies in this context. So the delicate part is specifying the context correctly. just 'DiagnosticReport.category' is ambiguous if there's more than one possible answer</p>",
        "id": 154000924,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1538109782
    },
    {
        "content": "<p>and asserting that there's only one possible answer is something that could subsequently become false.</p>",
        "id": 154000925,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1538109815
    },
    {
        "content": "<p>I think I'm missing something pretty straightforward here -- I'm assuming the 2nd syntax is important because the 1st is... ambiguous in some way? So for <code>context=DiagnosticReport.category</code>, there might be multiple possible interpretations, like <code>context=http://hl7.org/fhir/StructureDefinition/DiagnosticReport%23DiagnosticReport.category</code> and... some other thing? What kind of other thing?</p>",
        "id": 154000935,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1538110530
    },
    {
        "content": "<p><a href=\"http://acme.org/fhir/StructureDefinition/dr1#DiagnosticReport.category\" target=\"_blank\" title=\"http://acme.org/fhir/StructureDefinition/dr1#DiagnosticReport.category\">http://acme.org/fhir/StructureDefinition/dr1#DiagnosticReport.category</a> and <br>\n<a href=\"http://acme.org/fhir/StructureDefinition/dr2#DiagnosticReport.category\" target=\"_blank\" title=\"http://acme.org/fhir/StructureDefinition/dr2#DiagnosticReport.category\">http://acme.org/fhir/StructureDefinition/dr2#DiagnosticReport.category</a></p>",
        "id": 154000936,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1538111502
    },
    {
        "content": "<p>if the system is using diagnostic report diferently in different contexts</p>",
        "id": 154000937,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1538111518
    },
    {
        "content": "<p>e.g. one for lab which lists about 6 different categories for the different labs services, and one for vitals that lists only vitals</p>",
        "id": 154000938,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1538111569
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191410\">@Brett Marquard</span>  Ontoserver now supports the <code>context</code> parameter for <code>$expand</code> and <code>$validate-code</code> (StructureDefinition, CodeSystem &amp; ValueSet must all be explicitly available in Ontoserver).<br>\nNo support for <code>contextDirection</code> though - R4 is still a work-in-progress</p>",
        "id": 154008667,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1539386096
    },
    {
        "content": "<p>Newbie here and also to FHIR.. while I theoretically understood the reasoning behind <code>contextDirection</code> for <code>$expand</code> operation, I still haven't figured out the place where this could be captured/defined in <code>ValueSet</code> or  <code>CodeSystem</code>.. or somewhere else. Could someone help me understand.. </p>\n<ul>\n<li>how to include the <code>contextDirection</code> info in the code/value/elsewhere definition so that this can be implement as a search parameter?</li>\n<li>how come the direction is not important if there's no context and there's no separate direction search attribute?</li>\n<li>does it mean that <code>direction</code> is not captured in valueset/codesystem, but in context.. and if yes, how to map this to the valueset list items?</li>\n</ul>",
        "id": 277105922,
        "sender_full_name": "coder",
        "timestamp": 1648626693
    },
    {
        "content": "<p>it's done in the bindings - StructureDefinition and CapabilityStatement</p>",
        "id": 277113596,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1648630815
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  I kind of got a rough idea.<br>\nIs there such an example binding I could look at?</p>\n<p>Because when I look here <a href=\"https://build.fhir.org/valueset.html\">https://build.fhir.org/valueset.html</a> i only see <code>ValueSet.useContext</code> element... and nothing like <code>direction</code>.</p>",
        "id": 277138692,
        "sender_full_name": "coder",
        "timestamp": 1648644641
    }
]