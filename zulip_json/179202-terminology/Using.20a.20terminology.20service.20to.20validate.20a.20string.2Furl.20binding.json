[
    {
        "content": "<p>According to the documentation of $validate-code (<a href=\"https://www.hl7.org/fhir/valueset-operations.html#validate-code\" target=\"_blank\" title=\"https://www.hl7.org/fhir/valueset-operations.html#validate-code\">https://www.hl7.org/fhir/valueset-operations.html#validate-code</a>), I need to pass in a code + system to the operation.  However, when I am validating a binding against a string or uri, I don't have the system. How would I go about doing this?</p>",
        "id": 153897603,
        "sender_full_name": "Ewout Kramer",
        "timestamp": 1500625752
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191328\">@Ewout Kramer</span> I call it without a system in those cases. I quickly scanned the documentation, and don't see where it says you need to pass in a system</p>",
        "id": 153897644,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1500635425
    },
    {
        "content": "<p>R3 Spec...Section 4.8.16.2...Table of In Parameters for the $validate-code operation.... \"Code...The code that is to be validated. If a code is provided, a system must be provided.\"</p>",
        "id": 153897760,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1500681344
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191328\">@Ewout Kramer</span> can you provide a real example? I'd not like to see $validate-code drop the requirement for a code system - how would we know what system to validate against? Perhaps what you are trying to do is not best handled by that operation?</p>",
        "id": 153897789,
        "sender_full_name": "Robert McClure",
        "timestamp": 1500825418
    },
    {
        "content": "<p>when you need to do this - validate a code, string, or uri against a value set, and there's no system at all (string, uri) or there's no immediately available system (code), it's ok for the client to not pass a system to the server, on the basis that the server will check that is has a unique set of codes to validate against (in fact, they don't even need to be unique).</p>",
        "id": 153897793,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1500852031
    },
    {
        "content": "<p>for code, it's possible for the client to root around and figure out the system for a code, based on the metadata, but that's mostly not useful for the client - it's mostly just tax.</p>",
        "id": 153897794,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1500852088
    },
    {
        "content": "<p>it is useful if the client is going to pull off the system/value pair and use it elsewhere. In this case, if the client looks up the system it thinks it's going to use, then the terminology server can check that.</p>",
        "id": 153897795,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1500852139
    },
    {
        "content": "<p>Note that in all the cases we have where a field of type code is bound to a value set, the tooling ensures that the codes are unique</p>",
        "id": 153897796,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1500852180
    },
    {
        "content": "<p>What's the use case for validating a binding against a url or string in a value set?</p>",
        "id": 153897797,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1500852420
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  Let me see if I'm following: when a client sends a code and asks if the code is in the value set, all the server should have to do is see if the code (string) is in the list  of expansion codes in the value set and the system doesn't matter?</p>",
        "id": 153897814,
        "sender_full_name": "Robert McClure",
        "timestamp": 1500861867
    },
    {
        "content": "<p>on my server, I check that there's no duplicate codes in the value set before I decide that whether to check the code valid. And there's no display if there's no system</p>",
        "id": 153897819,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1500863063
    },
    {
        "content": "<p>we use this in places like postcode, where there's a list of allowable post codes but all we have a string</p>",
        "id": 153897820,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1500863081
    },
    {
        "content": "<p>the instance validator also performs additional checks before making the call</p>",
        "id": 153897821,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1500863098
    },
    {
        "content": "<p>I think I could beef the checks up on my server and not allow this for real code systems like LOINC and SNOMED CT - it's certainly not intended for that kind of context</p>",
        "id": 153897822,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1500863138
    },
    {
        "content": "<p>well, I'm kinda convinced that validating a code with no code system against a value set, even with duplicates and multiple code systems may not be a bad thing. I've not thought of a reason that the server has to know the correct code system. I'd like to find a use case that requires it but don't know of one off hand. I agree about SCT and LOINC in theory but honestly can't think of why they need to be different.</p>",
        "id": 153897823,
        "sender_full_name": "Robert McClure",
        "timestamp": 1500863877
    },
    {
        "content": "<p>well, there's two different questions<br>\n- is this a valid code given the binding<br>\n- is this a valid concept given the binding</p>",
        "id": 153897824,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1500863931
    },
    {
        "content": "<p>in the first case, it doesn't matter what the system is, it's valid if it's valid for at least one of the possible systems</p>",
        "id": 153897825,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1500863954
    },
    {
        "content": "<p>in the second case, then it does matter. mostly. It's a case do you/I understand - where you is the tx server, and I am the client</p>",
        "id": 153897826,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1500863997
    },
    {
        "content": "<p>But I'm assuming that th3e second case is not in play, as a requirement. Certainly you need to allow the code system to be sent.</p>",
        "id": 153897827,
        "sender_full_name": "Robert McClure",
        "timestamp": 1500864036
    },
    {
        "content": "<p>I figure that if you pass a display, and ask for that to be validated to, you've definitely stepped over the line into the second question, and we want people to think in concepts whenever they can</p>",
        "id": 153897828,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1500864051
    },
    {
        "content": "<p>so we <em>encourage</em> sending the system</p>",
        "id": 153897829,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1500864058
    },
    {
        "content": "<p>but yes. in this case, it's not.</p>",
        "id": 153897830,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1500864063
    },
    {
        "content": "<p>A display would not be a code and absolutely you'd need it with a display. So my comments are for a code only.</p>",
        "id": 153897831,
        "sender_full_name": "Robert McClure",
        "timestamp": 1500864121
    },
    {
        "content": "<p>But are we off track regarding the original issue? I really don't uderstand how a uri is special - it would just be a code if sent using validate-code, right?</p>",
        "id": 153897832,
        "sender_full_name": "Robert McClure",
        "timestamp": 1500864236
    },
    {
        "content": "<p>yep. string and uri get mentioned here because these are bound in the absence of a system</p>",
        "id": 153897833,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1500864278
    },
    {
        "content": "<p>uri is not otherwise special</p>",
        "id": 153897834,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1500864292
    },
    {
        "content": "<p>but how do you do a match on a uri in a value set? would it be treated like a code is?</p>",
        "id": 153897835,
        "sender_full_name": "Robert McClure",
        "timestamp": 1500864350
    },
    {
        "content": "<p>We always require a code system in order to expand a valueset involving that code system -- I could claim that this is because there may be errors in the valueset definition (which is true), but the main motivating factor is that it's a requirement of our implementation strategy.</p>",
        "id": 153921210,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1511402830
    }
]