[
    {
        "content": "<p>Looking at the ValueSet resource (R4) I can see that invariant \"vsd-3\" precludes a \"compose\" having both a \"filter\" and \"concept\" definition.</p>\n<p>I'm unclear as to the role ValueSet.compose.include.valueSet plays.</p>\n<ul>\n<li>Is it possible to populate this if either ValueSet.compose.include.concept or ValueSet.compose.include.filter is present ?</li>\n<li>Also is ValueSet.compose.include.valueSet is populated, would this potentially not conflict with ValueSet.compose.include.system &amp; ValueSet.compose.include.version</li>\n</ul>",
        "id": 216536761,
        "sender_full_name": "Richard Kavanagh",
        "timestamp": 1605219124
    },
    {
        "content": "<p>yes, you can have both (valueSet and concept or filter) and it does an intersection</p>",
        "id": 216536903,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1605219223
    },
    {
        "content": "<p>if the systems don't match, the result will be empty</p>",
        "id": 216536979,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1605219248
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191343\">@Michael Lawley</span> thanks, still not sure I totally understand.</p>\n<p>So, for example, </p>\n<ul>\n<li>if there is a filter and no valueSet, then the filter works on the codeSystem specified in include.system</li>\n<li>if there is a filter and a valueSet, the the filter just works on the codes defined by that valueSet</li>\n</ul>\n<p>is that it?</p>",
        "id": 216538080,
        "sender_full_name": "Richard Kavanagh",
        "timestamp": 1605219896
    },
    {
        "content": "<p>No, the filter works on the CodeSystem but the results are intersected with the expansion of the valueset.<br>\nEg imagine you have a valueset for drugs prescribable in some context and then your filter matches drugs containing some specific ingredient.  The result will be prescribable drugs containing that ingredient</p>",
        "id": 216539592,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1605220671
    },
    {
        "content": "<p>Thanks again - I think your example is what I was trying to describe above. <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>",
        "id": 216540216,
        "sender_full_name": "Richard Kavanagh",
        "timestamp": 1605220970
    }
]