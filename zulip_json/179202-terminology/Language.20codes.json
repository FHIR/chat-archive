[
    {
        "content": "<p>Proposal to add the following properties for the BCP-47 code system:<br>\n   - language <br>\n   - ext-lang<br>\n   - script<br>\n   - region<br>\n   -  variant<br>\n   - extension<br>\n   - private-use</p>",
        "id": 153872139,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1487281588
    },
    {
        "content": "<p>all are able to be used for with $lookup, and also for using in value sets filters, for extensional value sets</p>",
        "id": 153872140,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1487281618
    },
    {
        "content": "<p>this creates the language for existing and proposed US conformance rules, and is probably relevant for other countries too </p>",
        "id": 153872141,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1487281647
    },
    {
        "content": "<p>looks good to me</p>",
        "id": 153872191,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1487289132
    },
    {
        "content": "<p>ok, so, then, given this valueset:</p>\n<div class=\"codehilite\"><pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;ValueSet xmlns=&quot;http://hl7.org/fhir&quot;&gt;\n    &lt;id value=&quot;simple-languages&quot;/&gt;\n    &lt;url value=&quot;http://hl7.org/fhir/ValueSet/simple-languages&quot;/&gt;\n    &lt;version value=&quot;1.9.0&quot;/&gt;\n    &lt;name value=&quot;All Language codes with language and optionally a region modifier&quot;/&gt;\n    &lt;status value=&quot;draft&quot;/&gt;\n    &lt;experimental value=&quot;true&quot;/&gt;\n    &lt;publisher value=&quot;HL7 International - FHIR-Infrastructure&quot;/&gt;\n    &lt;contact&gt;\n        &lt;telecom&gt;\n            &lt;system value=&quot;url&quot;/&gt;\n            &lt;value value=&quot;http://hl7.org/fhir&quot;/&gt;\n        &lt;/telecom&gt;\n    &lt;/contact&gt;\n    &lt;description value=&quot;This value set includes all possible codes from BCP-47 (http://tools.ietf.org/html/bcp47)&quot;/&gt;\n    &lt;compose&gt;\n        &lt;include&gt;\n            &lt;system value=&quot;urn:ietf:bcp:47&quot;/&gt;\n            &lt;filter&gt;\n              &lt;property value=&quot;ext-lang&quot;/&gt;\n              &lt;op value=&quot;exists&quot;/&gt;\n              &lt;value value=&quot;false&quot;/&gt;\n            &lt;/filter&gt;\n            &lt;filter&gt;\n              &lt;property value=&quot;script&quot;/&gt;\n              &lt;op value=&quot;exists&quot;/&gt;\n              &lt;value value=&quot;false&quot;/&gt;\n            &lt;/filter&gt;\n            &lt;filter&gt;\n              &lt;property value=&quot;variant&quot;/&gt;\n              &lt;op value=&quot;exists&quot;/&gt;\n              &lt;value value=&quot;false&quot;/&gt;\n            &lt;/filter&gt;\n            &lt;filter&gt;\n              &lt;property value=&quot;extension&quot;/&gt;\n              &lt;op value=&quot;exists&quot;/&gt;\n              &lt;value value=&quot;false&quot;/&gt;\n            &lt;/filter&gt;\n            &lt;filter&gt;\n              &lt;property value=&quot;private-use&quot;/&gt;\n              &lt;op value=&quot;exists&quot;/&gt;\n              &lt;value value=&quot;false&quot;/&gt;\n            &lt;/filter&gt;\n        &lt;/include&gt;\n    &lt;/compose&gt;\n&lt;/ValueSet&gt;\n</pre></div>",
        "id": 153873951,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1488259156
    },
    {
        "content": "<p>then the following is valid:</p>\n<div class=\"codehilite\"><pre>GET http://fhir3.healthintersections.com.au/open/ValueSet/simple-languages/$validate-code?system=urn:ietf:bcp:47&amp;code=en-AU\n</pre></div>",
        "id": 153873952,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1488259260
    },
    {
        "content": "<p>and this is not:</p>",
        "id": 153873953,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1488259264
    },
    {
        "content": "<div class=\"codehilite\"><pre>GET http://fhir3.healthintersections.com.au/open/ValueSet/simple-languages/$validate-code?system=urn:ietf:bcp:47&amp;code=zh-Hans\n</pre></div>",
        "id": 153873954,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1488259270
    },
    {
        "content": "<p>Hans is a script, not a region</p>",
        "id": 153873955,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1488259277
    },
    {
        "content": "<p>those won't work right now, but they will when I next upgrade my server - in the next 24 hours</p>",
        "id": 153873956,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1488259295
    },
    {
        "content": "<p>response:</p>\n<div class=\"codehilite\"><pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Parameters xmlns=&quot;http://hl7.org/fhir&quot;&gt;\n    &lt;parameter&gt;\n        &lt;name value=&quot;result&quot;/&gt;\n        &lt;valueBoolean value=&quot;false&quot;/&gt;\n    &lt;/parameter&gt;\n    &lt;parameter&gt;\n        &lt;name value=&quot;message&quot;/&gt;\n        &lt;valueString value=&quot;The language code zh-Hans contains a script, and it is not allowed to&quot;/&gt;\n    &lt;/parameter&gt;\n    &lt;parameter&gt;\n        &lt;name value=&quot;message&quot;/&gt;\n        &lt;valueString value=&quot;The code provided (urn:ietf:bcp:47#zh-Hans) is not  valid in the value set All Language codes with language and optionally a region modifier&quot;/&gt;\n    &lt;/parameter&gt;\n&lt;/Parameters&gt;\n</pre></div>",
        "id": 153873957,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1488259327
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191503\">@Robert McClure</span> this is for you</p>",
        "id": 153873959,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1488260444
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> Many thanks. I suppose I need to figure out how to test this. Can you notify Brett when it's done? And will there be a \"all codes\" value set - I assume not?</p>",
        "id": 153874355,
        "sender_full_name": "Robert McClure",
        "timestamp": 1488428001
    },
    {
        "content": "<p>Brett has been notified and it is applied in us core.  Still a mystery how this aligns with \"use two letters code first\".  </p>",
        "id": 153874366,
        "sender_full_name": "Eric Haas",
        "timestamp": 1488432457
    },
    {
        "content": "<p>that's not stated explicitly, but the terminology server knows it</p>",
        "id": 153874368,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1488437445
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191503\">@Robert McClure</span> getting back to this: <br>\n- no there won't be an 'all codes' value set, but we could do what we do for UCUM and generate a common values expansion - but, in fact, we already have that in that all the common language values are valid in this value set - so US usage restricts the max value set<br>\n- you can test this using these URLS:<br>\n<a href=\"http://fhir3.healthintersections.com.au/open/ValueSet/simple-languages/$validate-code?system=urn:ietf:bcp:47&amp;code=en-AU\" target=\"_blank\" title=\"http://fhir3.healthintersections.com.au/open/ValueSet/simple-languages/$validate-code?system=urn:ietf:bcp:47&amp;code=en-AU\">http://fhir3.healthintersections.com.au/open/ValueSet/simple-languages/$validate-code?system=urn:ietf:bcp:47&amp;code=en-AU</a><br>\n<a href=\"http://fhir3.healthintersections.com.au/open/ValueSet/simple-languages/$validate-code?system=urn:ietf:bcp:47&amp;code=zh-Hans\" target=\"_blank\" title=\"http://fhir3.healthintersections.com.au/open/ValueSet/simple-languages/$validate-code?system=urn:ietf:bcp:47&amp;code=zh-Hans\">http://fhir3.healthintersections.com.au/open/ValueSet/simple-languages/$validate-code?system=urn:ietf:bcp:47&amp;code=zh-Hans</a></p>",
        "id": 153875844,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1489091117
    },
    {
        "content": "<p>Thanks. Remind me, is \"simple-language\" the code system name you guys decided for this? I think we need to clarify how these validation operations deliver on a subset of the entire grammar. That is correct right? </p>\n<p>And we need to figure out if this represents the same thing the C-CDA referenced content means. I'm assuming it should. Agree <span class=\"user-mention\" data-user-id=\"191410\">@Brett Marquard</span> ?</p>",
        "id": 153876379,
        "sender_full_name": "Robert McClure",
        "timestamp": 1489447475
    },
    {
        "content": "<p>'simple-language' is the arbitrary id for the value set on my server. </p>",
        "id": 153876398,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1489452674
    },
    {
        "content": "<p>you can see the definition of the value set here;</p>",
        "id": 153876399,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1489452686
    },
    {
        "content": "<p><a href=\"http://fhir3.healthintersections.com.au/open/ValueSet/simple-languages\" target=\"_blank\" title=\"http://fhir3.healthintersections.com.au/open/ValueSet/simple-languages\">http://fhir3.healthintersections.com.au/open/ValueSet/simple-languages</a></p>",
        "id": 153876400,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1489452758
    },
    {
        "content": "<p>it explicitly defines the subset of BCP 47 that applies. The fact that BCP says 2 letter codes then 3 is implicit in the code system, and therefore not explicit in the value set </p>",
        "id": 153876401,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1489452803
    },
    {
        "content": "<p>my server knows this fact</p>",
        "id": 153876402,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1489452814
    }
]