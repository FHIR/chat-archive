[
    {
        "content": "<p>I have submitted changes to the branch to get it to re-build.. but it doesn't seem to be moving. Please help  <a href=\"https://github.com/HL7/fhir/pull/561\" target=\"_blank\" title=\"https://github.com/HL7/fhir/pull/561\">https://github.com/HL7/fhir/pull/561</a></p>",
        "id": 167312499,
        "sender_full_name": "John Moehrke",
        "timestamp": 1559666325
    },
    {
        "content": "<p>John is getting conflicts as well....  status-codes.xml and compartmets.xml would not read from excel so I had to go in and remove some attributes in the xml to fix them.   nevertheless even if I revert to the head and try to edit them I get a conflict.  I will try a commit to just touch these files and see what happens</p>",
        "id": 167315329,
        "sender_full_name": "Eric Haas",
        "timestamp": 1559668253
    },
    {
        "content": "<p>I didn't know what to do about that... is that what is stalling my build?</p>",
        "id": 167316654,
        "sender_full_name": "John Moehrke",
        "timestamp": 1559669158
    },
    {
        "content": "<p>and what is the conflict? I click on resolve conflicts and never get a web page to appear.</p>",
        "id": 167316718,
        "sender_full_name": "John Moehrke",
        "timestamp": 1559669180
    },
    {
        "content": "<p>Resolving conflicts on spreadsheets is hard! <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> , is there a way to tell whether a given spreadsheet (as pushed to a git branch) has been properly canonicalized first?</p>",
        "id": 167316885,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1559669285
    },
    {
        "content": "<p>I assumed these were conflicts with master... I expect that master has passed my branch by, as my branch is a temp branch</p>",
        "id": 167316914,
        "sender_full_name": "John Moehrke",
        "timestamp": 1559669304
    },
    {
        "content": "<p>I expected to resolve these conflicts later when the branch intent is approved... and expected I would just manually re-apply the same changes I made to the new master.</p>",
        "id": 167316987,
        "sender_full_name": "John Moehrke",
        "timestamp": 1559669369
    },
    {
        "content": "<p>but are these conflicts different than that? Are they causing other branches failures?</p>",
        "id": 167317032,
        "sender_full_name": "John Moehrke",
        "timestamp": 1559669396
    },
    {
        "content": "<p>hmmm, so Grahame did fixup something in the DocumentReference spreadsheet he commented as \"fix for may problems related to missing code checks...\"  <a href=\"https://github.com/HL7/fhir/commit/fc3c6cadaa37e3406afa114a0e31509e78d7ba51\" target=\"_blank\" title=\"https://github.com/HL7/fhir/commit/fc3c6cadaa37e3406afa114a0e31509e78d7ba51\">https://github.com/HL7/fhir/commit/fc3c6cadaa37e3406afa114a0e31509e78d7ba51</a><br>\ndo I need to merge these changes into my branch now?</p>",
        "id": 167317431,
        "sender_full_name": "John Moehrke",
        "timestamp": 1559669628
    },
    {
        "content": "<p>I guess the new build is doing some new checks?</p>",
        "id": 167317548,
        "sender_full_name": "John Moehrke",
        "timestamp": 1559669676
    },
    {
        "content": "<p>seems similar change to ClinicalImpressions was also done 4 days ago</p>",
        "id": 167317772,
        "sender_full_name": "John Moehrke",
        "timestamp": 1559669817
    },
    {
        "content": "<p>the other two have also been changed..... Surprising that there is only 4 conflicts given that my branch touches 37 files... SO, do I need to manually integrate these changes into my branch? I would guess that I need to pull all other changes into my branch too to get it as close to master?</p>",
        "id": 167318289,
        "sender_full_name": "John Moehrke",
        "timestamp": 1559670150
    },
    {
        "content": "<p>resolving spreadsheet conflicts is easy but tedious (if the source spreadsheet is readable).  you just start over and re-edit it.  but yes its never pretty and that is why its so important to close the spreadsheet before commiting.</p>",
        "id": 167318720,
        "sender_full_name": "Eric Haas",
        "timestamp": 1559670382
    },
    {
        "content": "<p>my problem caused by different reasons... by the long-term branch</p>",
        "id": 167318810,
        "sender_full_name": "John Moehrke",
        "timestamp": 1559670444
    },
    {
        "content": "<p>I can do the manual merge.. just don't know if that is what I should do</p>",
        "id": 167318832,
        "sender_full_name": "John Moehrke",
        "timestamp": 1559670458
    },
    {
        "content": "<p>Ill wait for AU morning</p>",
        "id": 167318925,
        "sender_full_name": "John Moehrke",
        "timestamp": 1559670503
    },
    {
        "content": "<p>here is the error for the status file</p>\n<div class=\"codehilite\"><pre><span></span>Error: The spreadsheet /home/ubuntu/agents/01/_work/2/s/source/status-codes.xml was committed after editing in excel, but before the build could run *after Excel was closed*\n     [java] org.hl7.fhir.exceptions.FHIRException: The spreadsheet /home/ubuntu/agents/01/_work/2/s/source/status-codes.xml was committed after editing in excel, but before the build could run *after Excel was closed*\n</pre></div>\n\n\n<p>I tried this on a mac and pc and saved and closed the file prior to commit.  So I don't know what is going on...</p>",
        "id": 167333706,
        "sender_full_name": "Eric Haas",
        "timestamp": 1559680695
    },
    {
        "content": "<p>I'm in London right now! There is a real conflict here. The github conflict editor fails on large files; the only way to resolve this is to follow the (confusing but correct) git hub command lines instructions</p>",
        "id": 167373205,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1559728224
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> for my long-term branch, do I need to integrate the changes that have happened on master since I branched?</p>",
        "id": 167384335,
        "sender_full_name": "John Moehrke",
        "timestamp": 1559738719
    },
    {
        "content": "<p>It's generally a good practice, to make sure you haven't gotten too far out of sync</p>",
        "id": 167384422,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1559738778
    },
    {
        "content": "<p>I figured I would need to do it eventually, before merging the branch... I was just hoping to hold off the pain given that my integration of the changes likely will not be seen by GIT as a proper versioned merge... I don't like this long-term branch idea, but was forced by committee process.</p>",
        "id": 167384562,
        "sender_full_name": "John Moehrke",
        "timestamp": 1559738891
    },
    {
        "content": "<p>I simply do not understand what GIT is complaining about. See pull request <a href=\"https://github.com/HL7/fhir/pull/561\" target=\"_blank\" title=\"https://github.com/HL7/fhir/pull/561\">https://github.com/HL7/fhir/pull/561</a></p>",
        "id": 167384647,
        "sender_full_name": "John Moehrke",
        "timestamp": 1559738989
    },
    {
        "content": "<p>I can see the conflicts with the provided \"web editor\". I would prefer to keep all my changes and thus just keep what I submitted. However when I use the \"web editor\" to resolve the conflicts, it leaves me ONLY with the choice to \"Merge\". I don't want to merge the branch into master... do they mean this level merge? Or do they mean merge the edits I did in the \"web editor\" to the four files to be merged into the branch?</p>",
        "id": 167406874,
        "sender_full_name": "John Moehrke",
        "timestamp": 1559752794
    },
    {
        "content": "<p>It sounds like there's an issue where the build detects that a source file has not been canonicalized:</p>\n<blockquote>\n<p>[java] Error: The spreadsheet /home/ubuntu/agents/01/_work/2/s/source/status-codes.xml was committed after editing in excel, but before the build could run <em>after Excel was closed</em></p>\n</blockquote>\n<p>Even though <span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> indicates he did close Excel and run the build before committing. <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> can you clarify whether there is a known issue here, or if this looks like a new bug or user error?</p>",
        "id": 167408058,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1559753537
    },
    {
        "content": "<p>Please GIT community help.... I would be glad to resolve these four conflicts, but I must NOT merge my branch into master. This seems to be the only solution I am given.  I want my branch to be built into a temporary build...</p>",
        "id": 167441217,
        "sender_full_name": "John Moehrke",
        "timestamp": 1559780377
    },
    {
        "content": "<p>I'm think what you want to do is merge master into your branch.</p>",
        "id": 167443566,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1559783653
    },
    {
        "content": "<p>On the command line, that's \"git checkout mybranch; git merge master\"</p>",
        "id": 167443579,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1559783692
    },
    {
        "content": "<p>Then resolve conflicts, then \"git add\" the resolved files.</p>",
        "id": 167443596,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1559783714
    },
    {
        "content": "<p>OK I am trying this now ....</p>",
        "id": 167445229,
        "sender_full_name": "Eric Haas",
        "timestamp": 1559786243
    },
    {
        "content": "<p>OK the build is being pickier than snot ....</p>",
        "id": 167445309,
        "sender_full_name": "Eric Haas",
        "timestamp": 1559786373
    },
    {
        "content": "<p>Yes thats the ticket...</p>\n<p>I looks like once you get a conflict on a spreadsheet you can't undo it with a subsequent local build because I  did the following:</p>\n<ul>\n<li>open spreadsheet</li>\n<li>close spreadsheet</li>\n<li><em>skip</em> local build</li>\n<li>commit/push</li>\n<li>build conflict :-(</li>\n<li>build locally</li>\n<li>recommit/push</li>\n<li>build conflict still there :-(</li>\n</ul>",
        "id": 167448099,
        "sender_full_name": "Eric Haas",
        "timestamp": 1559790523
    },
    {
        "content": "<p>ty Josh</p>",
        "id": 167448110,
        "sender_full_name": "Eric Haas",
        "timestamp": 1559790546
    },
    {
        "content": "<p>(I am prone to avoiding local builds since its such a resource hog.  I have to switch computers...)</p>",
        "id": 167448238,
        "sender_full_name": "Eric Haas",
        "timestamp": 1559790749
    },
    {
        "content": "<blockquote>\n<p>Error: The spreadsheet /home/ubuntu/agents/01/_work/2/s/source/status-codes.xml was committed after editing in excel, but before the build could run after Excel was closed</p>\n</blockquote>\n<p>I normalise the spreadsheet to remove non-serious differences in the excel spreadsheet as much as possible. The intent is that the only differences will be deliberately introduced differences, but Excel does like to throw new things my way occasionally.</p>\n<p>But I can't normalise the excel spreadsheet if Excel has it locked for editing. People can commit while excel has it opened, and therefore get 1000s of spurious differences. The CI-Build refuses to build with spreadsheets like that, to make sure something like that never gets into the master. </p>\n<p>I'd rather have us stop using excel altogether now, but the editors are fiercely resisting that</p>",
        "id": 167453135,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1559798406
    },
    {
        "content": "<p>Are you normalizing for IGs now?  If so, that's great - though why not indicate a failure if the spreadsheet was open?</p>",
        "id": 167477721,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1559825040
    },
    {
        "content": "<p>I can confirm Eric's test... I edited these four locally, did a clean, did a build, and then checked them into my branch... Still a conflict.   I don't know how to make git happy. I am afraid of every instruction ends with what looks to my non-GIT expert as a forced merge of my branch with master. I don't understand how I can make git happy with my branch still existing only as a branch. Sorry to be so thick, but this is why I am asking the git-help stream for help</p>",
        "id": 167482399,
        "sender_full_name": "John Moehrke",
        "timestamp": 1559828562
    },
    {
        "content": "<blockquote>\n<p>On the command line, that's \"git checkout mybranch; git merge master\"</p>\n</blockquote>\n<p>This seems most understandable to me... can someone tell me how to do this with tortoise? Im not going to like doing this, but know I need to do it at-least once before this branch eventually gets into master. So I guess catching it up now is as good of a time as any</p>",
        "id": 167482587,
        "sender_full_name": "John Moehrke",
        "timestamp": 1559828722
    },
    {
        "content": "<p>specifically... the directionality of this merge with master is the scary part for me. merge master into my branch, seems like what I need to do next... but it looks very similar to merge my branch into master, which I need to avoid until the 4 workgroups involved approve this media/docRef change.</p>",
        "id": 167482837,
        "sender_full_name": "John Moehrke",
        "timestamp": 1559828895
    },
    {
        "content": "<p>Josh s solution works like a charm. I know it sounds counterintuitive but using the cli is the way to go here.</p>",
        "id": 167483587,
        "sender_full_name": "Eric Haas",
        "timestamp": 1559829465
    },
    {
        "content": "<p>You are merging the master into the branch but that doesn’t mess up your committed changes.  I don’t know why but checkout dies a lot of magic things</p>",
        "id": 167483735,
        "sender_full_name": "Eric Haas",
        "timestamp": 1559829553
    },
    {
        "content": "<p>@GG.    For single sheet workbooks I think we should use a different format.  I hate the status-codes.xml. It messes me up every time.  I’d say cab but I am pretty sure Excel would mess that up too. I live by spreadsheets so I am torn.  Is there a way the commit or push can fail or remind you to do a local build first if an excel file was opened.   (Move the error upstream). Because that would prevent folks (like me) from skipping a local build.  Or is there a way to make the build not use up all the local machine’s resources so it’s less painful to run.</p>",
        "id": 167485234,
        "sender_full_name": "Eric Haas",
        "timestamp": 1559830522
    },
    {
        "content": "<p>csv.  Not cab.</p>",
        "id": 167485339,
        "sender_full_name": "Eric Haas",
        "timestamp": 1559830563
    },
    {
        "content": "<p>I can't fail the commit. Or I would.</p>",
        "id": 167496302,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1559837620
    },
    {
        "content": "<p>why is status-codes.xml such a problem?</p>",
        "id": 167496306,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1559837627
    },
    {
        "content": "<p>I always forget about and it doesn't show until the full build an hour later</p>",
        "id": 167502100,
        "sender_full_name": "Eric Haas",
        "timestamp": 1559841931
    },
    {
        "content": "<blockquote>\n<p>I can't fail the commit. Or I would.</p>\n</blockquote>\n<p>Could define a git hook to do this check and fail.</p>",
        "id": 167532611,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1559864279
    },
    {
        "content": "<p>I have completely recreated my branch from current master. And it builds, and I submitted the pull request, and that succeeded... BUT, I can't find the temporary publication to share with those wanting to review this. I would have expected it at <a href=\"http://build.fhir.org/branches/moehrke-docRef/\" target=\"_blank\" title=\"http://build.fhir.org/branches/moehrke-docRef/\">http://build.fhir.org/branches/moehrke-docRef/</a> given past method of where these pull-request builds go. but it is not there... I do find an error in the \"Publish\" step <br>\n mv: cannot stat '/home/fhir_upload/uploading/www/branches/moehrke-docRef': No such file or directory<br>\n Remove deleted branch: moehrke-docRef<br>\nIs this a problem on the servers?</p>",
        "id": 167574757,
        "sender_full_name": "John Moehrke",
        "timestamp": 1559912840
    },
    {
        "content": "<p>i.e. <a href=\"https://dev.azure.com/fhir-build/build.fhir.org/_build/results?buildId=2032&amp;view=logs\" target=\"_blank\" title=\"https://dev.azure.com/fhir-build/build.fhir.org/_build/results?buildId=2032&amp;view=logs\">https://dev.azure.com/fhir-build/build.fhir.org/_build/results?buildId=2032&amp;view=logs</a></p>",
        "id": 167574865,
        "sender_full_name": "John Moehrke",
        "timestamp": 1559912907
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> please help. I fear I am one step forward, but still two steps behind</p>",
        "id": 167579155,
        "sender_full_name": "John Moehrke",
        "timestamp": 1559916219
    },
    {
        "content": "<p>Thanks for the pointer + @mention <span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span>  -- let me see.</p>",
        "id": 167583956,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1559919379
    },
    {
        "content": "<blockquote>\n<p>mv: cannot stat '/home/fhir_upload/uploading/www/branches/moehrke-docRef': No such file or directory</p>\n</blockquote>\n<p>Is actually okay -- it's just saying \"this branch didn't exist already on the CI server\". But</p>\n<blockquote>\n<p>Remove deleted branch: moehrke-docRef</p>\n</blockquote>\n<p>Is the culprit: it's saying: we don't think this branch exists on github anymore, so we're deleting it from the CI build now. Obviously that shouldn't be happening.</p>",
        "id": 167584131,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1559919524
    },
    {
        "content": "<p>oh good... love to be an example of random()</p>",
        "id": 167584171,
        "sender_full_name": "John Moehrke",
        "timestamp": 1559919569
    },
    {
        "content": "<p>No, this is good stuff -- it's happening because our branch count now exceeds the github API limit for a single results page, so</p>\n<div class=\"codehilite\"><pre><span></span>curl -s  https://api.github.com/repos/HL7/fhir/branches | jq &#39;.[].name\n</pre></div>\n\n\n<p>is no longer a reliable full list. I didn't know this API was paginated until now ;-)</p>",
        "id": 167584316,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1559919653
    },
    {
        "content": "<p>Let me put the quick fix into effect...</p>",
        "id": 167584326,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1559919660
    },
    {
        "content": "<p>This'll take a sec to re-launch the CI server -- it'll go offline for 1-3min</p>",
        "id": 167584673,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1559919923
    },
    {
        "content": "<p>So I'm deploying <a href=\"https://github.com/FHIR/auto-ig-builder/commit/860a6d83ad8d7ce69b0c629575832471522d7043\" target=\"_blank\" title=\"https://github.com/FHIR/auto-ig-builder/commit/860a6d83ad8d7ce69b0c629575832471522d7043\">https://github.com/FHIR/auto-ig-builder/commit/860a6d83ad8d7ce69b0c629575832471522d7043</a> -- basically, changing the logic from \"delete a branch preview from CI whenever it's 2 days old or it's deleted from GH\" to \"delete a branch preview from CI whenever it's 3 weeks old\".</p>",
        "id": 167584763,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1559919984
    },
    {
        "content": "<p>(back up)</p>",
        "id": 167584803,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1559920022
    },
    {
        "content": "<p>Now <span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span> let me re-trigger your last build...</p>",
        "id": 167584825,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1559920042
    },
    {
        "content": "<p>OK, rebuilding now; should get a notification in <a class=\"stream\" data-stream-id=\"179297\" href=\"/#narrow/stream/179297-committers.2Fnotification\">#committers/notification</a> when your branch re-builds and then it should be visible at <a href=\"http://build.fhir.org/branches/moehrke-docRef/\" target=\"_blank\" title=\"http://build.fhir.org/branches/moehrke-docRef/\">http://build.fhir.org/branches/moehrke-docRef/</a></p>",
        "id": 167584917,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1559920105
    },
    {
        "content": "<p>thanks</p>",
        "id": 167586705,
        "sender_full_name": "John Moehrke",
        "timestamp": 1559921420
    },
    {
        "content": "<p>Yeah!  I see the publication   <a href=\"http://build.fhir.org/branches/moehrke-docRef/\" target=\"_blank\" title=\"http://build.fhir.org/branches/moehrke-docRef/\">http://build.fhir.org/branches/moehrke-docRef/</a></p>",
        "id": 167587167,
        "sender_full_name": "John Moehrke",
        "timestamp": 1559921783
    }
]