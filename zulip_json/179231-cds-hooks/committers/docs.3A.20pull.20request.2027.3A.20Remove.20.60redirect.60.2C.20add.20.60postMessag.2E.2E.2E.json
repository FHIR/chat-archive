[
    {
        "content": "<p>bkaney edited <a href=\"https://github.com/cds-hooks/docs/pull/27\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/27\">pull request 27</a></p>",
        "id": 153880436,
        "sender_full_name": "Github Notifications",
        "timestamp": 1490901097
    },
    {
        "content": "<p>isaacvetter <a href=\"https://github.com/cds-hooks/docs/pull/27#issuecomment-290523923\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/27#issuecomment-290523923\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/pull/27\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/27\">pull request 27</a></p>\n<blockquote>\n<p>Hi Brian,</p>\n<p>What would this mean for apps that aren't hosted in an iframe?</p>\n<p>Isaac</p>\n</blockquote>",
        "id": 153880453,
        "sender_full_name": "Github Notifications",
        "timestamp": 1490903218
    },
    {
        "content": "<p>bkaney <a href=\"https://github.com/cds-hooks/docs/pull/27#issuecomment-290585172\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/27#issuecomment-290585172\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/pull/27\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/27\">pull request 27</a></p>\n<blockquote>\n<blockquote>\n<p>Hi Brian,</p>\n<p>What would this mean for apps that aren't hosted in an iframe?</p>\n<p>Isaac</p>\n</blockquote>\n<p>Hi Isaac -- <code>postMessage</code> enables cross-origin communication. This can mean iframe/parent, but also can mean when a window opens another window.</p>\n</blockquote>",
        "id": 153880550,
        "sender_full_name": "Github Notifications",
        "timestamp": 1490921286
    },
    {
        "content": "<p>jmandel <a href=\"https://github.com/cds-hooks/docs/pull/27#issuecomment-292794135\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/27#issuecomment-292794135\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/pull/27\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/27\">pull request 27</a></p>\n<blockquote>\n<p>Thanks @bkaney! One aspect we should cover here (well, in any discussion of <code>postMessage</code>) is the target origin: we should specify how to lock this down on both sides, so that the CDS service's web UI (SMART app) can post messages _to_ a known target domain, and the EHR's listener window can filter by messages coming _from_ a known target domain. Thoughts on how to tie this back into our discovery/launch protocol?</p>\n</blockquote>",
        "id": 153881499,
        "sender_full_name": "Github Notifications",
        "timestamp": 1491753206
    },
    {
        "content": "<p>bkaney <a href=\"https://github.com/cds-hooks/docs/pull/27#issuecomment-293053810\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/27#issuecomment-293053810\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/pull/27\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/27\">pull request 27</a></p>\n<blockquote>\n<blockquote>\n<p>Thanks @bkaney! One aspect we should cover here (well, in any discussion of postMessage) is the target origin: we should specify how to lock this down on both sides, so that the CDS service's web UI (SMART app) can post messages to a known target domain, and the EHR's listener window can filter by messages coming from a known target domain. Thoughts on how to tie this back into our discovery/launch protocol?</p>\n</blockquote>\n<p>Hmm, good point. I wonder if there is a way to use the existing HookInstance identifier somehow? I'll think about this over the next day or so and update the PR.</p>\n</blockquote>",
        "id": 153881643,
        "sender_full_name": "Github Notifications",
        "timestamp": 1491852552
    },
    {
        "content": "<p>bdoolittle <a href=\"https://github.com/cds-hooks/docs/pull/27#issuecomment-294019760\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/27#issuecomment-294019760\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/pull/27\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/27\">pull request 27</a></p>\n<blockquote>\n<p>Hi All,</p>\n<p>postMessage seems like a nice alternative to the redirect url, we're really excited about its ability to enable a more responsive user experience. My team has a few points we'd like to add for consideration. </p>\n<p>First, we agree with Josh that specifying targetOrigin when sending the message and checking the origin on the receiving side is a good security measure to add into the spec. Should the SMART App also be sending a security token (or other mechanism) to add an additional level of authentication?</p>\n<p>Second, a web-based EHR may want to open the SMART App in a new tab rather than an iframe, this introduces the possibility that the user may exit the EHR before completing the SMART App interaction. In this case, there would be no window to send a postMessage to. Would the CDS Service know that the postMessage was not received? Should there be some acknowledgement from the EHR to the SMART App indicating that the EHR successfully received the postMessage? This way, the SMART App could indicate to the user that there was an error in notifying the EHR about the decision.</p>\n<p>Third, there may be implementations where the redirect URL solution is more accessible than postMessage. Would it be reasonable for the hooks standard to be flexible and support both means of communication? The worry here is that the cds-hooks implementation becomes more complex.</p>\n</blockquote>",
        "id": 153884729,
        "sender_full_name": "Github Notifications",
        "timestamp": 1492117079
    },
    {
        "content": "<p>bkaney <a href=\"https://github.com/cds-hooks/docs/pull/27#issuecomment-295879816\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/27#issuecomment-295879816\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/pull/27\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/27\">pull request 27</a></p>\n<blockquote>\n<p>I agree with <span class=\"user-mention\" data-user-email=\"jmandel@gmail.com\">@Josh Mandel</span>. There is two more things I was thinking about. </p>\n<p>1) I was thinking the <code>hookInstance</code> should be passed (as a query parameter, for instance) to the redirect URL. This would be helpful -or- necessary information for EHR to deal with navigation post-interaction.</p>\n<p>2) I appreciate the \"lowest common denominator\" idea around a redirect URL. However, given a client-server EHR that is using some sort web dialog widget, having a javascript way to do this (e.g. <code>postMessage</code>) might be in fact the LCD...</p>\n</blockquote>",
        "id": 153885324,
        "sender_full_name": "Github Notifications",
        "timestamp": 1492717937
    }
]