[
    {
        "content": "<p>kpshek edited <a href=\"https://github.com/cds-hooks/docs/pull/112\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/112\">PR #112</a><br>\nfrom <code>issue59-passing-context</code> to <code>master</code></p>\n<blockquote>\n<p>@kpshek , @isaacvetter , @brynrhodes - I have made changes based on the discussion in <a href=\"https://github.com/cds-hooks/docs/issues/59\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/59\">https://github.com/cds-hooks/docs/issues/59</a>. Please let me your thoughts</p>\n</blockquote>",
        "id": 153920829,
        "sender_full_name": "Github Notifications",
        "timestamp": 1511303505
    },
    {
        "content": "<p>kpshek <a href=\"https://github.com/cds-hooks/docs/pull/112#issuecomment-346336397\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/112#issuecomment-346336397\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/pull/112\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/112\">PR #112</a></p>\n<blockquote>\n<p>While at FHIR DevDays last week, I talked with a couple guys from @StayWell who asked me for the same functionality described in #59 (and what this PR is attempting to address). I just emailed them to ask them to provide their feedback on the various approaches we've been discussing for their input for an additional perspective.</p>\n</blockquote>",
        "id": 153921006,
        "sender_full_name": "Github Notifications",
        "timestamp": 1511353726
    },
    {
        "content": "<p>kpshek <a href=\"https://github.com/cds-hooks/docs/pull/112#issuecomment-346337167\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/112#issuecomment-346337167\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/pull/112\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/112\">PR #112</a></p>\n<blockquote>\n<p>I think a new attribute on a <code>link</code> (specifically for links of type <code>smart</code> only) is the most straightforward approach to solve this particular need. It is more explicit as to the use case we are attempting to solve and works when a card has multiple SMART app links.</p>\n<p>It is not clear to me where else an opaque string on the CDS card would be used (outside of being passed to the SMART app on launch).</p>\n</blockquote>",
        "id": 153921007,
        "sender_full_name": "Github Notifications",
        "timestamp": 1511353957
    },
    {
        "content": "<p>yashaskram <a href=\"https://github.com/cds-hooks/docs/pull/112#issuecomment-347258271\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/112#issuecomment-347258271\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/pull/112\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/112\">PR #112</a></p>\n<blockquote>\n<p>@kpshek Appreciate your input. I am ok to have something at the link level for this use case</p>\n<blockquote>\n<p>It isn't clear to me why we are adding this card-level attribute for a value that is only intended to be passed to a SMART app via a launch parameter. Can you elaborate on why the <strong>proposal</strong> to add a new attribute on the link wasn't ideal?</p>\n<p>I think a new attribute on a link (specifically for links of type smart only) is the most straightforward approach to solve this particular need </p>\n</blockquote>\n<p>which proposal are you referring? Can you point to this? If not, can you propose what you have is mind in issue [#59] </p>\n<p>For example : are you thinking of leveraging query params in the url like </p>\n<div class=\"codehilite\"><pre><span></span><span class=\"p\">{</span>\n      <span class=\"nt\">&quot;cardid&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;345&quot;</span>\n      <span class=\"s2\">&quot;summary&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Card 1 - Clinical Pathway 1&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;indicator&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;info&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;detail&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;This is an example app card.&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;links&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"p\">{</span>\n          <span class=\"nt\">&quot;label&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;SMART App&quot;</span><span class=\"p\">,</span>\n          <span class=\"nt\">&quot;url&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;https://smart.example.com/launch?foo=a&quot;</span><span class=\"p\">,</span>\n          <span class=\"nt\">&quot;type&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;smart&quot;</span>\n        <span class=\"p\">}</span>\n      <span class=\"p\">]</span>\n    <span class=\"p\">}</span>\n</pre></div>\n\n\n<p>vs having an additional attribute like below. If so were you thinking extension vs dedicated attribute name</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"p\">{</span>\n      <span class=\"nt\">&quot;cardid&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;345&quot;</span>\n      <span class=\"s2\">&quot;summary&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Card 1 - Clinical Pathway 1&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;indicator&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;info&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;detail&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;This is an example app card.&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;links&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"p\">{</span>\n          <span class=\"nt\">&quot;label&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;SMART App&quot;</span><span class=\"p\">,</span>\n          <span class=\"nt\">&quot;url&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;https://smart.example.com/launch&quot;</span><span class=\"p\">,</span>\n          <span class=\"nt\">&quot;type&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;smart&quot;</span><span class=\"p\">,</span>\n          <span class=\"nt\">&quot;foo&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;a&quot;</span>\n        <span class=\"p\">}</span>\n      <span class=\"p\">]</span>\n    <span class=\"p\">}</span>\n</pre></div>\n\n\n</blockquote>",
        "id": 153921672,
        "sender_full_name": "Github Notifications",
        "timestamp": 1511803721
    },
    {
        "content": "<p>yashaskram <a href=\"https://github.com/cds-hooks/docs/pull/112#issuecomment-347353453\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/112#issuecomment-347353453\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/pull/112\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/112\">PR #112</a></p>\n<blockquote>\n<p>@kpshek - thx for reviewing my changes, as for your comment <a href=\"https://github.com/cds-hooks/docs/pull/112#pullrequestreview-78423057\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/112#pullrequestreview-78423057\">https://github.com/cds-hooks/docs/pull/112#pullrequestreview-78423057</a>, I will wait to arrive at a consensus on this <a href=\"https://github.com/cds-hooks/docs/pull/112#issuecomment-347258271\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/112#issuecomment-347258271\">https://github.com/cds-hooks/docs/pull/112#issuecomment-347258271</a> and redo the PR</p>\n</blockquote>",
        "id": 153921714,
        "sender_full_name": "Github Notifications",
        "timestamp": 1511822516
    },
    {
        "content": "<p>kpshek <a href=\"https://github.com/cds-hooks/docs/pull/112#issuecomment-347599371\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/112#issuecomment-347599371\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/pull/112\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/112\">PR #112</a></p>\n<blockquote>\n<p>@yashaskram - I was referring to something similar to the example noted under \"A link in CDS card has params data\" in #59. Here is a concrete proposal what I'm in favor of implementing here:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"p\">{</span>\n  <span class=\"nt\">&quot;summary&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Example card&quot;</span><span class=\"p\">,</span>\n  <span class=\"nt\">&quot;indicator&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;info&quot;</span><span class=\"p\">,</span>\n  <span class=\"nt\">&quot;source&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"nt\">&quot;label&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Example CDS Service&quot;</span>\n  <span class=\"p\">},</span>\n  <span class=\"nt\">&quot;links&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n      <span class=\"nt\">&quot;label&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;SMART App&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;url&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;https://smart.example.com/launch&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;type&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;smart&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;cdsHooksContext&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Some opaque (to the EHR) string that will come back alongside your OAuth 2 access token on a SMART app launch&quot;</span>\n    <span class=\"p\">},</span>\n    <span class=\"p\">{</span>\n      <span class=\"nt\">&quot;label&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Another SMART App&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;url&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;https://smart2.example.com/launch&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;type&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;smart&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;cdsHooksContext&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Another context value for this SMART app&quot;</span>\n    <span class=\"p\">},</span>\n    <span class=\"p\">{</span>\n      <span class=\"nt\">&quot;label&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;An absolute link&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;url&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;http://cds-hooks.org&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;type&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;absolute&quot;</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">]</span>\n<span class=\"p\">}</span>\n</pre></div>\n\n\n<p>The <code>cdsHooksContext</code> field should only ever be valued if the link <code>type</code> is <code>smart</code>. <code>cdsHooksContext</code> is not valid for <code>absolute</code> links.</p>\n<p>The <code>cdsHooksContext</code> field and value will be sent to the SMART app alongside the other launch context when the SMART app is launched. See \"Launch context arrives with your access_token\" in the <a href=\"http://docs.smarthealthit.org/authorization/scopes-and-launch-context/\" target=\"_blank\" title=\"http://docs.smarthealthit.org/authorization/scopes-and-launch-context/\">SMART documentation</a>. For instance, here is what would come back for the first SMART app in my example:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"p\">{</span>\n  <span class=\"s2\">&quot;access_token&quot;</span><span class=\"o\">:</span> <span class=\"s2\">&quot;secret-xyz&quot;</span><span class=\"p\">,</span>\n  <span class=\"s2\">&quot;patient&quot;</span><span class=\"o\">:</span> <span class=\"s2\">&quot;123&quot;</span><span class=\"p\">,</span>\n  <span class=\"s2\">&quot;cdsHooksContext&quot;</span><span class=\"o\">:</span> <span class=\"s2\">&quot;Some opaque (to the EHR) string that will come back alongside your OAuth 2 access token on a SMART app launch&quot;</span>\n  <span class=\"c1\">// etc...</span>\n<span class=\"p\">}</span>\n<span class=\"o\">~~~</span>\n</pre></div>\n\n\n</blockquote>",
        "id": 153921893,
        "sender_full_name": "Github Notifications",
        "timestamp": 1511890079
    },
    {
        "content": "<p>yashaskram <a href=\"https://github.com/cds-hooks/docs/pull/112#issuecomment-347641972\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/112#issuecomment-347641972\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/pull/112\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/112\">PR #112</a></p>\n<blockquote>\n<p>@kpshek - I like your proposal. looks like we are back to the start point <br>\n@isaacvetter , @brynrhodes - thoughts? based on your input I can make the changes to my PR</p>\n</blockquote>",
        "id": 153921918,
        "sender_full_name": "Github Notifications",
        "timestamp": 1511898404
    },
    {
        "content": "<p>isaacvetter <a href=\"https://github.com/cds-hooks/docs/pull/112#issuecomment-347643720\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/112#issuecomment-347643720\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/pull/112\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/112\">PR #112</a></p>\n<blockquote>\n<p>Hey @yashaskram , guys,</p>\n<p>Yeah - the above sample message from @kpshek makes sense - the cardInstance that I was pushing towards had the disadvantage of not accounted for multiple smart links in a single card. Not allowing this parameter to be specified in an absolute link makes sense because this param should be passed as a SMART launch parameter (alongside the access token). A similar parameter should simply be put into the url (perhaps in the querystring) of an absolute link.</p>\n<p>The only part of the above proposal that I object to, is the name: <code>cdsHooksContext</code>. Ultimately, it's not descriptive of the purpose of the element. How about: <code>appSession</code> or serviceAppId` or ... something that actually describes the intent and purpose of the field.</p>\n<p>Isaac</p>\n</blockquote>",
        "id": 153921919,
        "sender_full_name": "Github Notifications",
        "timestamp": 1511898787
    },
    {
        "content": "<p>yashaskram <a href=\"https://github.com/cds-hooks/docs/pull/112#issuecomment-347653899\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/112#issuecomment-347653899\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/pull/112\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/112\">PR #112</a></p>\n<blockquote>\n<p>@isaacvetter &amp; team - how about the name - appcontext?</p>\n</blockquote>",
        "id": 153921926,
        "sender_full_name": "Github Notifications",
        "timestamp": 1511901029
    },
    {
        "content": "<p>kpshek <a href=\"https://github.com/cds-hooks/docs/pull/112#issuecomment-347662834\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/112#issuecomment-347662834\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/pull/112\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/112\">PR #112</a></p>\n<blockquote>\n<p>I struggled coming up with a descriptive name for this field as well. I originally named it <code>appContext</code> but changed it when I saw it alongside the other context variables in a SMART app launch. With that being said, I'm fine if we name this <code>appContext</code> (note the camelCase in keeping with our existing field naming conventions).</p>\n</blockquote>",
        "id": 153921929,
        "sender_full_name": "Github Notifications",
        "timestamp": 1511903045
    },
    {
        "content": "<p>yashaskram synchronized <a href=\"https://github.com/cds-hooks/docs/pull/112\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/112\">PR #112</a></p>",
        "id": 153921941,
        "sender_full_name": "Github Notifications",
        "timestamp": 1511906145
    },
    {
        "content": "<p>yashaskram synchronized <a href=\"https://github.com/cds-hooks/docs/pull/112\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/112\">PR #112</a></p>",
        "id": 153921943,
        "sender_full_name": "Github Notifications",
        "timestamp": 1511906828
    },
    {
        "content": "<p>yashaskram synchronized <a href=\"https://github.com/cds-hooks/docs/pull/112\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/112\">PR #112</a></p>",
        "id": 153921950,
        "sender_full_name": "Github Notifications",
        "timestamp": 1511907929
    },
    {
        "content": "<p>kpshek <a href=\"https://github.com/cds-hooks/docs/pull/112#issuecomment-347712670\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/112#issuecomment-347712670\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/pull/112\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/112\">PR #112</a></p>\n<blockquote>\n<p>@travistcummings - can the HSPC Sandbox support passing arbitrary launch context to the SMART app per these proposed changes?</p>\n<p>Tagging @zplata for the eventual <a href=\"https://github.com/cds-hooks/sandbox\" target=\"_blank\" title=\"https://github.com/cds-hooks/sandbox\">cds-hooks/sandbox</a> change that this will also require.</p>\n</blockquote>",
        "id": 153921970,
        "sender_full_name": "Github Notifications",
        "timestamp": 1511915831
    },
    {
        "content": "<p>yashaskram synchronized <a href=\"https://github.com/cds-hooks/docs/pull/112\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/112\">PR #112</a></p>",
        "id": 153922060,
        "sender_full_name": "Github Notifications",
        "timestamp": 1511968585
    },
    {
        "content": "<p>kpshek closed <a href=\"https://github.com/cds-hooks/docs/pull/112\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/112\">PR #112</a></p>",
        "id": 153922114,
        "sender_full_name": "Github Notifications",
        "timestamp": 1511977178
    },
    {
        "content": "<p>travistcummings <a href=\"https://github.com/cds-hooks/docs/pull/112#issuecomment-348571283\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/112#issuecomment-348571283\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/pull/112\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/112\">PR #112</a></p>\n<blockquote>\n<p>@kpshek The HSPC Sandbox launch will support additional parameters in the SOF launch url: <a href=\"https://example.com/launch.html?p1=abc&amp;p2=xyz\" target=\"_blank\" title=\"https://example.com/launch.html?p1=abc&amp;p2=xyz\">https://example.com/launch.html?p1=abc&amp;p2=xyz</a></p>\n<p>When the CDS Hooks sandbox registers a launch context, it can also provide a params map object that will be passed to the client along side their access token:</p>\n<p>launch context:<br>\n{ <br>\n...<br>\n\"parameters\":{ <br>\n\"patient\":\"BILIBABY\",<br>\n\"appContext\": {<br>\n\"p1\": \"abc\",<br>\n\"p2\": \"xyz\"<br>\n},<br>\n\"need_patient_banner\":false<br>\n}<br>\n}</p>\n<p>SOF launch response:<br>\n{<br>\n\"access_token\": \"eyJhbGc...\",<br>\n\"token_type\": \"Bearer\",<br>\n\"expires_in\": 86399,<br>\n\"scope\": \"patient/Observation.read launch patient/Patient.read patient/Observation.write\",<br>\n\"patient\": \"BILIBABY\",<br>\n\"need_patient_banner\": false,<br>\n\"appContext\": {<br>\n\"p1\": \"abc\",<br>\n\"p2\": \"xyz\"<br>\n}<br>\n}</p>\n</blockquote>",
        "id": 153922616,
        "sender_full_name": "Github Notifications",
        "timestamp": 1512152909
    },
    {
        "content": "<p>kpshek <a href=\"https://github.com/cds-hooks/docs/pull/112#issuecomment-348591788\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/112#issuecomment-348591788\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/pull/112\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/112\">PR #112</a></p>\n<blockquote>\n<p>That's great, thanks @travistcummings!</p>\n</blockquote>",
        "id": 153922631,
        "sender_full_name": "Github Notifications",
        "timestamp": 1512156497
    },
    {
        "content": "<p>mtcollie <a href=\"https://github.com/cds-hooks/docs/pull/112#issuecomment-355053212\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/112#issuecomment-355053212\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/pull/112\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/112\">PR #112</a></p>\n<blockquote>\n<p>Hi @kpshek , apologies for the delay, but this parameter would be just what we need to provide contextual links to particular content or a program.  For example, if a physician prescribed a sleep aid medication, we could prompt with a notification that the patient was eligible to be enrolled in the sleep health program and the link to could take them directly to the enrollment section.</p>\n</blockquote>",
        "id": 153927527,
        "sender_full_name": "Github Notifications",
        "timestamp": 1514996204
    }
]