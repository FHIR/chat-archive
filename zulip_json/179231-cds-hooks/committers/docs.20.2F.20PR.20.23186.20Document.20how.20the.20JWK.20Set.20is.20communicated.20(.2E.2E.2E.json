[
    {
        "content": "<p>kpshek opened <a href=\"https://github.com/cds-hooks/docs/pull/186\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/186\">PR #186</a><br>\nfrom <code>issue/87-public-keys</code> to <code>master</code></p>\n<blockquote>\n<p>In addition to documenting that the JWK Set is communicated either via the standard <code>jku</code> header or out-of-band, I relaxed the <code>iss</code> value from URL to URI. This is to address deployment scenarios where the issuer cannot be a URL.</p>\n</blockquote>",
        "id": 153948442,
        "sender_full_name": "Github Notifications",
        "timestamp": 1522167347
    },
    {
        "content": "<p>kpshek edited <a href=\"https://github.com/cds-hooks/docs/pull/186\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/186\">PR #186</a><br>\nfrom <code>issue/87-public-keys</code> to <code>master</code></p>\n<blockquote>\n<p>In addition to documenting that the JWK Set is communicated either via the standard <code>jku</code> header or out-of-band, I relaxed the <code>iss</code> value from URL to URI. This is to address deployment scenarios where the issuer cannot be a URL.</p>\n<p>Fixes #87 </p>\n</blockquote>",
        "id": 153948444,
        "sender_full_name": "Github Notifications",
        "timestamp": 1522167477
    },
    {
        "content": "<p>kpshek review_requested <a href=\"https://github.com/cds-hooks/docs/pull/186\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/186\">PR #186</a></p>",
        "id": 153948445,
        "sender_full_name": "Github Notifications",
        "timestamp": 1522167493
    },
    {
        "content": "<p>kpshek review_requested <a href=\"https://github.com/cds-hooks/docs/pull/186\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/186\">PR #186</a></p>",
        "id": 153948446,
        "sender_full_name": "Github Notifications",
        "timestamp": 1522167493
    },
    {
        "content": "<p>kpshek review_requested <a href=\"https://github.com/cds-hooks/docs/pull/186\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/186\">PR #186</a></p>",
        "id": 153948447,
        "sender_full_name": "Github Notifications",
        "timestamp": 1522167494
    },
    {
        "content": "<p>kpshek review_requested <a href=\"https://github.com/cds-hooks/docs/pull/186\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/186\">PR #186</a></p>",
        "id": 153948448,
        "sender_full_name": "Github Notifications",
        "timestamp": 1522167496
    },
    {
        "content": "<p>kpshek synchronized <a href=\"https://github.com/cds-hooks/docs/pull/186\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/186\">PR #186</a></p>",
        "id": 153948451,
        "sender_full_name": "Github Notifications",
        "timestamp": 1522167577
    },
    {
        "content": "<p>isaacvetter <a href=\"https://github.com/cds-hooks/docs/pull/186#issuecomment-376688703\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/186#issuecomment-376688703\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/pull/186\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/186\">PR #186</a></p>\n<blockquote>\n<p>Hey @kpshek ,</p>\n<p>A bit of feedback; overall, it's a solid design:</p>\n<p>1) It's important that the jku value be whitelisted by the CDS Service. This was (one of) @mattvarghese's points in #87. This url should be communicated out-of-band. The CDS Service client_id creation process already exists and would be a good time to do this.</p>\n<p>2) Our current alg example shows HS256. For commonality in implementations, the spec should dictate that CDS Services MUST support an algorithm. We're slightly partial to EC386, but HS256 would also work fine. The important thing is to standardize it.</p>\n<p>3) Note that in the JWK RFC, kid is not actually required to be unique. Further, when it's not unique the RFC doesn't specify the actual lookup mechanism that a client should use. The CDS Hooks spec should just state that kid values MUST be unique within the jwk set. </p>\n<p>4) We should provide a guidance section to CDS Service developers containing the following guidelines:<br>\n  * The jku and iss urls should be whitelisted within your service. <br>\n  * Using the ita field, CDS Services should reject any requests older than 5 minutes. <br>\n  * CDS Services should validate that a newly received jti is unique over the past 5 minutes. This prevents replay attacks.</p>\n<p>5) Lastly, the example json should include an example jku.</p>\n<p>Want me to help by making commits?</p>\n<p>Isaac</p>\n</blockquote>",
        "id": 153948586,
        "sender_full_name": "Github Notifications",
        "timestamp": 1522187706
    },
    {
        "content": "<p>isaacvetter synchronized <a href=\"https://github.com/cds-hooks/docs/pull/186\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/186\">PR #186</a></p>",
        "id": 153948589,
        "sender_full_name": "Github Notifications",
        "timestamp": 1522188153
    },
    {
        "content": "<p>isaacvetter synchronized <a href=\"https://github.com/cds-hooks/docs/pull/186\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/186\">PR #186</a></p>",
        "id": 153948593,
        "sender_full_name": "Github Notifications",
        "timestamp": 1522188330
    },
    {
        "content": "<p>isaacvetter synchronized <a href=\"https://github.com/cds-hooks/docs/pull/186\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/186\">PR #186</a></p>",
        "id": 153948596,
        "sender_full_name": "Github Notifications",
        "timestamp": 1522188584
    },
    {
        "content": "<p>kpshek <a href=\"https://github.com/cds-hooks/docs/pull/186#issuecomment-376692683\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/186#issuecomment-376692683\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/pull/186\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/186\">PR #186</a></p>\n<blockquote>\n<p>Thanks for the feedback @isaacvetter! I agree with all of your comments and had thought of most of these gaps. However, I was planning on addressing them via the ballot process since most of these comments are outside of the scope of this issue: how do we communicate the JWK Set in a standard way?</p>\n<p>All of the guidance around how CDS Services should use these particular JWT header/payload fields, etc are fantastic. I just want to get this PR in so that we can cut a ballot version.</p>\n<p>I really appreciate you helping out to address these additional concerns but given that they are outside of the scope of this issue, can we revert your additional comments here and put them on a separate branch for another issue please?</p>\n</blockquote>",
        "id": 153948598,
        "sender_full_name": "Github Notifications",
        "timestamp": 1522188659
    },
    {
        "content": "<p>isaacvetter synchronized <a href=\"https://github.com/cds-hooks/docs/pull/186\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/186\">PR #186</a></p>",
        "id": 153948603,
        "sender_full_name": "Github Notifications",
        "timestamp": 1522189079
    },
    {
        "content": "<p>isaacvetter <a href=\"https://github.com/cds-hooks/docs/pull/186#issuecomment-376696082\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/186#issuecomment-376696082\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/pull/186\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/186\">PR #186</a></p>\n<blockquote>\n<p>Hey Kevin,</p>\n<p>I think that your incorrect to state that none of these changes are relevant ...</p>\n<p>Isaac</p>\n</blockquote>",
        "id": 153948607,
        "sender_full_name": "Github Notifications",
        "timestamp": 1522189534
    },
    {
        "content": "<p>bkaney <a href=\"https://github.com/cds-hooks/docs/pull/186#issuecomment-376909076\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/186#issuecomment-376909076\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/pull/186\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/186\">PR #186</a></p>\n<blockquote>\n<blockquote>\n<p>Our current alg example shows HS256. For commonality in implementations, the spec should dictate that CDS Services MUST support an algorithm. We're slightly partial to ES386, but HS256 would also work fine. The important thing is to standardize it.</p>\n</blockquote>\n<p>I am not at all a crypto expert, but it is my understanding that HS256 is a symmetric algorithm with only one (secret) key that is shared between the two parties. ES386 is asymmetric with a public/private key pair.</p>\n<p>After reading this: <a href=\"https://auth0.com/blog/critical-vulnerabilities-in-json-web-token-libraries/\" target=\"_blank\" title=\"https://auth0.com/blog/critical-vulnerabilities-in-json-web-token-libraries/\">https://auth0.com/blog/critical-vulnerabilities-in-json-web-token-libraries/</a> there is a catch-22 with having the algorithm be discovered in the JWT header of which is supposed to be signed. I think the upshot is the algorithm should be pre-coordinated out-of-band (or specified, as ES386). Thoughts?</p>\n</blockquote>",
        "id": 153948707,
        "sender_full_name": "Github Notifications",
        "timestamp": 1522247664
    },
    {
        "content": "<p>isaacvetter <a href=\"https://github.com/cds-hooks/docs/pull/186#issuecomment-376926059\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/186#issuecomment-376926059\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/pull/186\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/186\">PR #186</a></p>\n<blockquote>\n<p>Talked with @kpshek this morning:</p>\n<p>Keeping in this PR: <br>\n* kid should be unique<br>\n* jku example<br>\n* jku should be whitelisted</p>\n<p>Moving to issue: <br>\n- Guidance to CDS services to validate a JWT - how to verify a JWT? (guidance around iat, jti)<br>\n  - is this an imlpementation guide?<br>\n - Standardizing JWT alg. </p>\n</blockquote>",
        "id": 153948718,
        "sender_full_name": "Github Notifications",
        "timestamp": 1522250485
    },
    {
        "content": "<p>isaacvetter synchronized <a href=\"https://github.com/cds-hooks/docs/pull/186\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/186\">PR #186</a></p>",
        "id": 153948722,
        "sender_full_name": "Github Notifications",
        "timestamp": 1522251188
    },
    {
        "content": "<p>kpshek closed <a href=\"https://github.com/cds-hooks/docs/pull/186\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/186\">PR #186</a></p>",
        "id": 153948727,
        "sender_full_name": "Github Notifications",
        "timestamp": 1522252159
    },
    {
        "content": "<p>yashaskram <a href=\"https://github.com/cds-hooks/docs/pull/186#issuecomment-377037272\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/186#issuecomment-377037272\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/pull/186\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/186\">PR #186</a></p>\n<blockquote>\n<p>jku should be a required field. </p>\n</blockquote>",
        "id": 153948827,
        "sender_full_name": "Github Notifications",
        "timestamp": 1522271309
    },
    {
        "content": "<p>isaacvetter <a href=\"https://github.com/cds-hooks/docs/pull/186#issuecomment-377043399\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/186#issuecomment-377043399\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/pull/186\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/186\">PR #186</a></p>\n<blockquote>\n<p>Hey Raj, </p>\n<blockquote>\n<p>The EHR MAY make its JWK Set available via a URL identified by the jku header field, as defined by rfc7517 4.1.2. If the jku header field is ommitted, the EHR and CDS Service SHALL communicate the JWK Set out-of-band.</p>\n</blockquote>\n<p>Mind creating an issue and we can talk it through as part of the ballot? We'll support jku, but I'm not convinced that you're right. </p>\n<p>I _think_ that right now, it's still possible for an EHR to not expose any endpoints to a CDS Hooks service and still be compliant with the spec. </p>\n<p>Why do you think it should be required?</p>\n<p>Isaac</p>\n</blockquote>",
        "id": 153948832,
        "sender_full_name": "Github Notifications",
        "timestamp": 1522272554
    },
    {
        "content": "<p>yashaskram <a href=\"https://github.com/cds-hooks/docs/pull/186#issuecomment-377099686\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/186#issuecomment-377099686\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/pull/186\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/186\">PR #186</a></p>\n<blockquote>\n<p>Hey @isaacvetter, </p>\n<p>First off, I have to admit that I missed to read below. Below allows to have more one option to share JWK. I agree jku can be optional with below</p>\n<blockquote>\n<p>The EHR MAY make its JWK Set available via a URL identified by the jku header field, as defined by rfc7517 4.1.2. If the jku header field is ommitted, the EHR and CDS Service SHALL communicate the JWK Set out-of-band.</p>\n</blockquote>\n<p>I thought issue <a href=\"https://github.com/cds-hooks/docs/issues/87\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/87\">https://github.com/cds-hooks/docs/issues/87</a> is to come with an one universal approach for JWK discovery. I assumed jku is the only option to share JWK and just reading the line below, I jumped to the conclusion that the spec allows sharing of JWK to be optional </p>\n<blockquote>\n<p>jku    OPTIONAL    url The URL to the JWK Set containing the public key(s).</p>\n</blockquote>\n<p>In general it is ok to allow out of band JWK sharing in addition to jku. But I am going to create an issue on this topic to gather feedback from others given the need to maintain combination of whitelist across jku, issuer and sub on the CDS service provider end vs exposing endpoint on the EHR side. </p>\n<p>There typo in the note below. </p>\n<blockquote>\n<p>The EHR MAY make its JWK Set available via a URL identified by the jku header field, as defined by rfc<del>7517</del>7515 4.1.2. If the jku header field is ommitted, the EHR and CDS Service SHALL communicate the JWK Set out-of-band.</p>\n</blockquote>\n</blockquote>",
        "id": 153948926,
        "sender_full_name": "Github Notifications",
        "timestamp": 1522290222
    },
    {
        "content": "<p>isaacvetter <a href=\"https://github.com/cds-hooks/docs/pull/186#issuecomment-377106664\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/186#issuecomment-377106664\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/pull/186\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/pull/186\">PR #186</a></p>\n<blockquote>\n<p>Raj! Great catch on the rfc typo - I went ahead and created #189 for this. </p>\n<p>I know how deeply you think about these security issues, as you think through the whitelisting considerations, they might fit well into #188. Also, your feedback is needed on #187 as well.</p>\n</blockquote>",
        "id": 153948933,
        "sender_full_name": "Github Notifications",
        "timestamp": 1522292923
    }
]