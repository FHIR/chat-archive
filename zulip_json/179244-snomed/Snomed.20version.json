[
    {
        "content": "<p>One of the tasks for FHIR R4 was to stop using an sct code that is no not active, and to update the build tool to emit a warning for an use of inactive codes</p>",
        "id": 153985472,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1534049252
    },
    {
        "content": "<p>the first thing I did was to update to the latest sct intl release, and that caused me 10000s of issues (invalid sct codes). I'm not sure what and I think it's something infrastructural, and I don't have time to deal with that. So the version of FHIR that will be balloted in the sept ballot cycle will be based on SCT 20160731. I will update to 20180731 by the time the final version of FHIR is released</p>",
        "id": 153985473,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1534049317
    },
    {
        "content": "<p>However I'm going to need help from people here to find me replacement code for 10-20 SCT codes that appear to be a genuine issue (scanning through the 1000s of errors quickly).</p>",
        "id": 153985474,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1534049391
    },
    {
        "content": "<p>it might be that some of my issue relates to 1000s of old style snomed codes somewhere.... I'm not sure</p>",
        "id": 153985475,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1534049441
    },
    {
        "content": "<p>I don't recall encountering \"old style\" codes very often, if at all - I wouldn't have have guessed there were thousands, but maybe could be (behind the scenes somewhere)?</p>",
        "id": 153985476,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1534049600
    },
    {
        "content": "<p>in the imaging stuff ? i don't know and I don't have time right now</p>",
        "id": 153985477,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1534049768
    },
    {
        "content": "<p>maybe - most common in pathology, I expect, but I don't think we likely have a great deal of that?<br>\nagree there's not time to sort it out now</p>",
        "id": 153985478,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1534049869
    },
    {
        "content": "<p>no my main problem is not fixed by backing out the version change</p>",
        "id": 153985479,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1534050792
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span>  <span class=\"nt\">&lt;concept&gt;</span>\n    <span class=\"nt\">&lt;extension</span> <span class=\"na\">url=</span><span class=\"s\">&quot;http://hl7.org/fhir/StructureDefinition/codesystem-replacedby&quot;</span><span class=\"nt\">&gt;</span>\n      <span class=\"nt\">&lt;valueCoding&gt;</span>\n        <span class=\"nt\">&lt;system</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://snomed.info/sct&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">&quot;F-00E1F&quot;</span><span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;display</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Minimum diastolic blood pressure&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;/valueCoding&gt;</span>\n    <span class=\"nt\">&lt;/extension&gt;</span>\n    <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">&quot;109021&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;display</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Diastolic pressure nadir&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;definition</span> <span class=\"na\">value=</span><span class=\"s\">&quot;The lowest pressure value excluding any undershoot artifact&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;property&gt;</span>\n      <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">&quot;status&quot;</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;valueCode</span> <span class=\"na\">value=</span><span class=\"s\">&quot;deprecated&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/property&gt;</span>\n  <span class=\"nt\">&lt;/concept&gt;</span>\n</pre></div>",
        "id": 153985480,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1534050800
    },
    {
        "content": "<p>There's 90 of these in the DICOM code system</p>",
        "id": 153985481,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1534050811
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191380\">@Elliot Silver</span> <span class=\"user-mention\" data-user-id=\"193145\">@David Clunie</span> my understanding of the SCT response on this issue (at <a href=\"https://confluence.ihtsdotools.org/display/FHIR/URIs+antecedent+SNOMED+versions\" target=\"_blank\" title=\"https://confluence.ihtsdotools.org/display/FHIR/URIs+antecedent+SNOMED+versions\">https://confluence.ihtsdotools.org/display/FHIR/URIs+antecedent+SNOMED+versions</a>) is that this usage above is not compliant with the SCT license, and you need to regenerate the code system (or I do? I'm not clear on it's origin right now) to use SCT Ids not RTs</p>",
        "id": 153985482,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1534051027
    },
    {
        "content": "<p>for now, I'm changing them all to an FHIR SID to work around the validation problem (my validation is very enthusiastic on this code system, it gets validated plenty of times, and I was getting showered with duplicate errors)</p>",
        "id": 153985483,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1534051975
    },
    {
        "content": "<p>If you can send me a list of the problematic codes, then I should be able to build you a map of their replacements.  Actually, those ConceptMaps already exists as implicit maps in Ontoserver. URIs are ReplacedBy: <code>http://snomed.info.sct?fhir_cm=900000000000526001</code> and SameAs: <code>http://snomed.info.sct?fhir_cm=900000000000527005</code>  Public Ontoserver has International 20180131 but not 20180731 yet</p>",
        "id": 153985693,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1534143570
    },
    {
        "content": "<p>SCT have not been at all helpful with the issue of these old codes.  You're not licensed to create new records with them (they can't force people to removed them from existing records), but it doesn't help when you need to create artefacts whose purpose is to support migration from old to new</p>",
        "id": 153985697,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1534144842
    },
    {
        "content": "<p>ok I'll do that when I get to it again</p>",
        "id": 153985714,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1534154682
    },
    {
        "content": "<p>thanks</p>",
        "id": 153985715,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1534154684
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>, I'm not quite following. Are you finding SCT values in <a href=\"http://build.fhir.org/codesystem-dicom-dcim.html\" target=\"_blank\" title=\"http://build.fhir.org/codesystem-dicom-dcim.html\">http://build.fhir.org/codesystem-dicom-dcim.html</a>?</p>",
        "id": 153985868,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1534183863
    },
    {
        "content": "<p>It looks like he's finding legacy SNOMED identifiers (not strictly from SNOMED RT) like \"F-00E1F\" - apparently 90 of them.  And those identifiers should not be used for any current data or going forward.</p>",
        "id": 153985897,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1534191222
    },
    {
        "content": "<p>Where are they being found?</p>",
        "id": 153985906,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1534192004
    },
    {
        "content": "<p>each of the deprecated codes - but they aren't rendered, so look in the source e.g. <a href=\"http://build.fhir.org/codesystem-dicom-dcim.xml.html\" target=\"_blank\" title=\"http://build.fhir.org/codesystem-dicom-dcim.xml.html\">http://build.fhir.org/codesystem-dicom-dcim.xml.html</a></p>",
        "id": 153985925,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1534193925
    },
    {
        "content": "<p>OK, so DICOM has retired codes that say go see SNOMED RT, but SNOMED has retired RT. So right now, they are marked as replaced with an invalid replacement. On the one hand, this doesn't impact any of the currently defined DICOM vocabulary. On the other hand, DICOM isn't giving good guidance for what to replace their retired terms with. Is that the issue? If so, I can file a DICOM change proposal (CP) to provide updated mappings, but that could easily take 6 months to get addressed. Beyond that, we'll have to get <span class=\"user-mention\" data-user-id=\"193145\">@David Clunie</span> involved.</p>",
        "id": 153985946,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1534198142
    },
    {
        "content": "<p>Seems like SNOMED International should also be approaching DICOM to get them to migrate properly - <span class=\"user-mention\" data-user-id=\"192077\">@Linda Bird</span> <span class=\"user-mention\" data-user-id=\"192993\">@Peter Williams</span> ?</p>",
        "id": 153985965,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1534199900
    },
    {
        "content": "<p>I think that <br>\n- DICOM should provide concept ids as well as the RT codes<br>\n- SNOMED international should allow Dicom &amp; HL7 to publish the old codes so that people with those codes know what do with them</p>",
        "id": 153986015,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1534203105
    },
    {
        "content": "<p>Maybe it's not really important, but I'll mention again that this isn't (at least mostly) about identifiers that were <strong>introduced</strong> in SNOMED RT.  These are the legacy identifiers that were used in all of the versions of SNOMED <strong>prior</strong> to RT and then were also carried forward as additional (not the primary) identifiers in both SNOMED RT and the earlier (RF1) versions of SNOMED CT.</p>",
        "id": 153986016,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1534203117
    },
    {
        "content": "<p>I suppose SCT publishes a map of these somewhere, and I could find it if I spent the time...</p>",
        "id": 153986017,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1534203125
    },
    {
        "content": "<p>I will try to remember to call them 'legacy identifiers'</p>",
        "id": 153986018,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1534203161
    },
    {
        "content": "<p>ok :)</p>",
        "id": 153986019,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1534203171
    },
    {
        "content": "<p>and I'll try not to mention it again</p>",
        "id": 153986020,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1534203197
    },
    {
        "content": "<p>right, they exist in a file called <code>SnomedCT_IdentifierRefset_DEPRECATED_20170731T120000Z.zip</code> containing <code>SnomedCT_IdentifierRefset_DEPRECATED_20170731T120000Z/Snapshot/Refset/Map/der2_sRefset_SimpleMapSnapshot_INT_20170731.txt</code> which says that <code>F-00E1F</code> maps to <code>314451001</code> for example</p>",
        "id": 153986075,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1534211410
    },
    {
        "content": "<p>thanks. I guess I'll have to find it and process it</p>",
        "id": 153986240,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1534231359
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191343\">@Michael Lawley</span>  Yes Jane Millar had a conversation with DICOM and I believe they are heading in that direction but there are technical reasons for them not having already made the move.   I'll follow up with her, thanks.</p>",
        "id": 153986244,
        "sender_full_name": "Peter Williams",
        "timestamp": 1534235367
    },
    {
        "content": "<p>I'm not following Snomed Intl 's logic here. As things stand, we can't even publish a mapping table from SRT codes to SCT concept ids, because we can't define a system by which to represent SRT codes. So, SI's desire to get people to stop using SRT codes is preventing us (and/or DICOM) from publishing ConceptMap resources that would help people to stop using SRT codes)</p>",
        "id": 153990921,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1535321879
    },
    {
        "content": "<p>Exactly.  And as I see things, unless this position can be changed (e.g., via the SHOMED on FHIR working group) the only path forward will be for FHIR to establish its own CodeSystem URI for these old codes.</p>",
        "id": 153990923,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1535322894
    },
    {
        "content": "<p>well, perhaps it's time to do that.</p>",
        "id": 153990924,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1535322978
    },
    {
        "content": "<p><a href=\"http://hl7.org/fhir/sid/srt\" target=\"_blank\" title=\"http://hl7.org/fhir/sid/srt\">http://hl7.org/fhir/sid/srt</a> would be our normal practice</p>",
        "id": 153990925,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1535322992
    },
    {
        "content": "<p>I still say that these <strong>are not</strong> SNOMED RT id's - they are legacy SNOMED identifiers which began being assigned and used in the earlier SNOMED versions (long before SNOMED RT was ever imagined).  And they didn't stop being available for use as alternate identifiers at first (in RF1) when SNOMED RT was replaced with SNOMED CT.  I would propose that we use <a href=\"http://hl7.org/fhir/sid/snm\" target=\"_blank\" title=\"http://hl7.org/fhir/sid/snm\">http://hl7.org/fhir/sid/snm</a> (or something similar).</p>",
        "id": 153990928,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1535325435
    },
    {
        "content": "<p>For the record, here is the discussion on this topic from before <a href=\"https://confluence.ihtsdotools.org/display/FHIR/URIs+antecedent+SNOMED+versions\" target=\"_blank\" title=\"https://confluence.ihtsdotools.org/display/FHIR/URIs+antecedent+SNOMED+versions\">https://confluence.ihtsdotools.org/display/FHIR/URIs+antecedent+SNOMED+versions</a><br>\nAnd this is the documentation for the two relevant maps published by SNOMED International <a href=\"https://confluence.ihtsdotools.org/display/DOCTSG/4.3.1+Legacy+Code+Map+Reference+Sets\" target=\"_blank\" title=\"https://confluence.ihtsdotools.org/display/DOCTSG/4.3.1+Legacy+Code+Map+Reference+Sets\">https://confluence.ihtsdotools.org/display/DOCTSG/4.3.1+Legacy+Code+Map+Reference+Sets</a><br>\nIt looks like two URIs are needed - <a href=\"http://hl7.org/fhir/sid/s3x\" target=\"_blank\" title=\"http://hl7.org/fhir/sid/s3x\">http://hl7.org/fhir/sid/s3x</a> for SNOMED 3.x and (my proposal) <a href=\"http://hl7.org/fhir/sid/snid\" target=\"_blank\" title=\"http://hl7.org/fhir/sid/snid\">http://hl7.org/fhir/sid/snid</a> for the SNOMEDIDs - avoiding things that reference SNOMED RT is probably best since it included SCTIDs.</p>",
        "id": 153990932,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1535328572
    },
    {
        "content": "<p>I like Michael's proposal, except that I'm not fond of 'snid' (at least to me it's maybe a bit too close to \"snide\").  I would suggest 'snmid', which is consistent with the prior V2 table 0396 codes (\"SNM\" and \"SNM3\") and with \"<strong>S</strong>ystematized <strong>N</strong>omenclature of <strong>M</strong>edicine\".</p>",
        "id": 153990971,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1535371015
    },
    {
        "content": "<p>I almost suggested 'snmid'  originally but arbitrarily went for a shorter option.</p>",
        "id": 153990972,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1535371113
    },
    {
        "content": "<p>snid - sounds like a Dr Suess name</p>",
        "id": 153990977,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1535371704
    },
    {
        "content": "<p>yes, it does :)</p>",
        "id": 153991050,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1535393264
    },
    {
        "content": "<p>which is almost reason enough to prefer it :)</p>",
        "id": 153991711,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1535577755
    }
]