[
    {
        "content": "<p>I am getting errors trying to update the branch, as below. I have got the main build, done a pull to update it to the R4B branch (as in thread above, which seemed to work), made some changes, and now I am trying to push back (using tortoise to do a push on the folder). Do I need to push with a branch specific command?</p>\n<p>git.exe push --progress \"origin\" R4B:R4B</p>\n<p>Enumerating objects: 40, done.<br>\nCounting objects: 100% (32/32), done.<br>\n...<br>\nremote: This repository moved. Please use the new location:<br>\nremote:   <a href=\"https://github.com/HL7/fhir.git\">https://github.com/HL7/fhir.git</a><br>\nremote: error: GH006: Protected branch update failed for refs/heads/R4B.<br>\nremote: error: 2 of 2 required status checks are expected. At least 1 approving review is required by reviewers with write access.<br>\nTo <a href=\"https://github.com/hl7/fhir\">https://github.com/hl7/fhir</a><br>\n! [remote rejected]       R4B -&gt; R4B (protected branch hook declined)<br>\nerror: failed to push some refs to '<a href=\"https://github.com/hl7/fhir\">https://github.com/hl7/fhir</a>'<br>\ngit did not exit cleanly (exit code 1) (5312 ms @ 11/02/2021 10:43:21)</p>",
        "id": 225973700,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1613040619
    },
    {
        "content": "<p>The branch is protected. To make changes you need to open a pull request, and that pull request must build successfully before you can push changes.</p>",
        "id": 226006966,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613057199
    },
    {
        "content": "<p>(Or.before you can *merge changes into r4b)</p>",
        "id": 226007081,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1613057251
    },
    {
        "content": "<p>R4B is treated just like master, it is considered a 'live' version of the spec that people are actively using, so we need to perform checks everytime the code is changed. Otherwise, you could break the website for everyone (like I did yesterday).</p>",
        "id": 226007145,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613057272
    },
    {
        "content": "<p>if you need assistance in creating a pull request, please look at these two articles here:</p>",
        "id": 226007226,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613057290
    },
    {
        "content": "<p><a href=\"https://docs.github.com/en/github/collaborating-with-issues-and-pull-requests/about-pull-requests\">https://docs.github.com/en/github/collaborating-with-issues-and-pull-requests/about-pull-requests</a></p>",
        "id": 226007228,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613057290
    },
    {
        "content": "<p><a href=\"https://docs.github.com/en/github/collaborating-with-issues-and-pull-requests/creating-a-pull-request\">https://docs.github.com/en/github/collaborating-with-issues-and-pull-requests/creating-a-pull-request</a></p>",
        "id": 226007243,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613057298
    },
    {
        "content": "<p>if after going through those, it still doesn't make sense, let me know, and I will have a call with you and we can work through creating a pull request (PR)</p>",
        "id": 226007354,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613057339
    },
    {
        "content": "<p>ok I will go read that thanks. I am curious why this needs to be different from the main build though? Its not as if we want people breaking that one. It does a build when stuff is pushed and rejects breaking changes. So unless you are deep in the weeds tweaking pipelines etc, how would my build-passing changes break it? Is it just that we need manual review of all changes to R4B?</p>",
        "id": 226037873,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1613068870
    },
    {
        "content": "<p>This prevents any \"it works on my machine\" errors.</p>",
        "id": 226038370,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613069103
    },
    {
        "content": "<p>If we trusted everyone to build on their own local machine everytime they commit, and that their machine is the exact same as everyone elses, then we wouldn't need the CI at all.</p>",
        "id": 226038456,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613069148
    },
    {
        "content": "<p>We rebuild the spec on a generic build machine in the cloud that ensure the build is stable and repeatable. That way we have a 'source of truth'</p>",
        "id": 226038579,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613069203
    },
    {
        "content": "<p>I should be the same process as the main branch though?</p>",
        "id": 226038678,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613069250
    },
    {
        "content": "<p>you create your own branch, do a PR against the branch you want to merge into, and if the CI passes, you can merge. How are you finding it different?</p>",
        "id": 226038770,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613069285
    },
    {
        "content": "<p>If there is a workflow issue, I can make changes?</p>",
        "id": 226038810,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613069307
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span>  With the main build I can do a push and it goes into the build. I go to the web page and do a pull request. It checks it and eventually it says its mergeable and in it goes. With R4B, the push simply fails, as above. (remote: error: GH006: Protected branch update failed for refs/heads/R4B.)</p>",
        "id": 226067424,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1613082437
    },
    {
        "content": "<p>The main branch requires the same checks to pass as R4B? You should not be able to push directly to the main branch without opening a pull request? If you are...then something is wrong...and we should fix that</p>",
        "id": 226067596,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613082543
    },
    {
        "content": "<p>Yeah I just checked, not even I can push directly to the master branch</p>",
        "id": 226067664,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613082597
    },
    {
        "content": "<p>If you are able to, please let me know. That should not be happening. The process is to open a pull request and have the checks run.</p>",
        "id": 226067746,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613082629
    },
    {
        "content": "<p>The process should be identical for R4B and Master</p>",
        "id": 226067770,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613082649
    },
    {
        "content": "<p>there is no problem with the main branch. I dont go \"direct\", that is not what I was describing above</p>",
        "id": 226067775,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1613082653
    },
    {
        "content": "<p><code>With the main build I can do a push and it goes into the build</code> I don't understand what you mean by this then</p>",
        "id": 226067837,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613082696
    },
    {
        "content": "<p>well I push, and it goes up to somewhere :-)</p>",
        "id": 226067912,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1613082726
    },
    {
        "content": "<p>then I pull and it works</p>",
        "id": 226067917,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1613082735
    },
    {
        "content": "<p>Yeah, so you create a branch I assume?</p>",
        "id": 226067928,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613082740
    },
    {
        "content": "<p>and the PR goes from branch -&gt; master</p>",
        "id": 226067954,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613082758
    },
    {
        "content": "<p>the same flow should occur for R4B</p>",
        "id": 226067982,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613082780
    },
    {
        "content": "<p>on main, yes</p>",
        "id": 226067987,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1613082782
    },
    {
        "content": "<p>you would create a branch</p>",
        "id": 226068001,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613082785
    },
    {
        "content": "<p>I think the issue for R4b is that I need a branch on my r4b branch</p>",
        "id": 226068010,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1613082790
    },
    {
        "content": "<p>then the PR goes from branch -&gt; R4B</p>",
        "id": 226068033,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613082802
    },
    {
        "content": "<p>treat R4B like another master</p>",
        "id": 226068038,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613082808
    },
    {
        "content": "<p>I thought I was, but when I switched to the R4B branch, it removes my local branch I guess</p>",
        "id": 226068135,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1613082856
    },
    {
        "content": "<p>like, locally on your computer , the branch is deleted?</p>",
        "id": 226068174,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613082886
    },
    {
        "content": "<p>so I am not on a branch of the branch. if that even makes sense...</p>",
        "id": 226068185,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1613082891
    },
    {
        "content": "<p>not sure if it is deleted, but I am just no longer on it it seems</p>",
        "id": 226068313,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1613082972
    },
    {
        "content": "<p>but this is locally on your computer?</p>",
        "id": 226068359,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613083006
    },
    {
        "content": "<p>yes</p>",
        "id": 226068365,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1613083013
    },
    {
        "content": "<p>okay, I think this might just be a workflow issue locally</p>",
        "id": 226068431,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613083064
    },
    {
        "content": "<p>I get the concept of \"main\" and I normally make a branch and work with that. But now I need to use the R4B branch, so I switch to that. Do I then make a branch on that branch?</p>",
        "id": 226068433,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1613083067
    },
    {
        "content": "<p>do you want to have a quick call tomorrow?</p>",
        "id": 226068443,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613083076
    },
    {
        "content": "<p>I can walk you through it?</p>",
        "id": 226068476,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613083084
    },
    {
        "content": "<p>I'm not sure what tools you are using</p>",
        "id": 226068509,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613083100
    },
    {
        "content": "<p>so seeing your setup would help me in giving you the proper direction</p>",
        "id": 226068525,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613083110
    },
    {
        "content": "<p>I do everything on command line so life is quite different ofr me</p>",
        "id": 226068544,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613083123
    },
    {
        "content": "<p>ok thanks for the offer, I will try to figure it out and maybe ask for a call if I cannot. but can you answer this one: If I switch to the R4B branch locally, to work on it, do I also need to create another branch, on that branch, to do so?</p>",
        "id": 226068701,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1613083217
    },
    {
        "content": "<p>yes, you would want to treat R4B the exact same way you treat master</p>",
        "id": 226068821,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613083278
    },
    {
        "content": "<p>it's another master</p>",
        "id": 226068825,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613083286
    },
    {
        "content": "<p>except for R4B</p>",
        "id": 226068840,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613083294
    },
    {
        "content": "<p>that is what I had not appreciated</p>",
        "id": 226068847,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1613083299
    },
    {
        "content": "<p>Master is the 'master' for all the other versions</p>",
        "id": 226068856,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613083308
    },
    {
        "content": "<p>R4B is the 'master ' for R4B</p>",
        "id": 226068870,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613083317
    },
    {
        "content": "<p>I should probably write this all up for people</p>",
        "id": 226068913,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613083325
    },
    {
        "content": "<p>I'll carve some time out tomorrow for docs</p>",
        "id": 226068925,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613083334
    },
    {
        "content": "<p>well I had not considered it. I was on my branch (of main) working fine, switched to R4B, then did not think to make a branch on the \"branch of R4B\". So when I push it fails.</p>",
        "id": 226068986,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1613083377
    },
    {
        "content": "<p>No worries at all. Let me know if you do need assistance tomorrow.</p>",
        "id": 226069101,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613083443
    },
    {
        "content": "<p>thanks Mark</p>",
        "id": 226069265,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1613083547
    },
    {
        "content": "<p>I managed to push my changes, but the pull request hasn't got anywhere. <br>\n<a href=\"https://github.com/HL7/fhir/pull/1096#issue-572187169\">https://github.com/HL7/fhir/pull/1096#issue-572187169</a>. <br>\nIt said that it cannot be merged automatically. I am not sure if that is due to something in my changes or because its coming after some other changes. The conflicts involve lots of files that I have not touched e.g. gradlew.bat (unless something very strange happened in my push). <br>\nIt is also saying \"Some checks haven’t completed yet<br>\n1 expected check<br>\nPull Request Pipeline (buildAndPublishSpecification) Expected — Waiting for status to be reported\"</p>",
        "id": 226123583,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1613128099
    },
    {
        "content": "<p>so</p>",
        "id": 226143036,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613140224
    },
    {
        "content": "<p>right now you pulled all the changes from master into your changes for R4B</p>",
        "id": 226143065,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613140238
    },
    {
        "content": "<p>but that won't work</p>",
        "id": 226143075,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613140243
    },
    {
        "content": "<p>you need to treat them like completely different projects</p>",
        "id": 226143096,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613140256
    },
    {
        "content": "<p>why don't we have a call at some point today</p>",
        "id": 226143113,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613140265
    },
    {
        "content": "<p>I can help you out</p>",
        "id": 226143132,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613140277
    },
    {
        "content": "<p>I can also do next week if that works better for you</p>",
        "id": 226143171,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613140296
    },
    {
        "content": "<p>just keep in mind I have Monday and Friday off</p>",
        "id": 226143572,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613140458
    },
    {
        "content": "<p>I'm in EST timezone</p>",
        "id": 226143584,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613140466
    },
    {
        "content": "<p>Well I do need this explaining yes, thanks. If the steps for getting the locally, creating a local branch, pushing it back and creating a pull can be documented, that would be very helpful.</p>\n<p>What I have done to work on R4B:<br>\nI first get all of <a href=\"https://github.com/hl7/fhir\">https://github.com/hl7/fhir</a><br>\nthen I switch to the R4B \"branch\" (but I think this is not a branch, its another thing like master?)<br>\ngit checkout R4B<br>\nI am then on the R4B branch (am I?)<br>\nI now make a local branch for my work<br>\ngit checkout -b rikr4b<br>\nThen I make changes, and it builds ok and looks fine. <br>\nI commit (using windows tortoise git)<br>\nI push (using windows tortoise git, with the defaults that it shows, which is normally fine)<br>\nI go to the web page and try to create the pull, but I assume by this time it has already gone wrong.</p>\n<p>Is it possible to edit the above to be correct?</p>",
        "id": 226163941,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1613149025
    },
    {
        "content": "<p>Do your pull request against the R4B branch and not master</p>",
        "id": 226164621,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613149310
    },
    {
        "content": "<p>Right now you're trying to merge your personal R4B branch into master...which will cause you to get an absolute monster diff and won't build or merge</p>",
        "id": 226164759,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613149357
    },
    {
        "content": "<p>ok, so what page would I go to for that?</p>",
        "id": 226164780,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1613149366
    },
    {
        "content": "<p><a href=\"https://github.com/HL7/fhir/tree/R4B\">https://github.com/HL7/fhir/tree/R4B</a>?</p>",
        "id": 226164830,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1613149384
    },
    {
        "content": "<p>At you last step when you create the pull request</p>",
        "id": 226164841,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613149386
    },
    {
        "content": "<p>instead of creating the pull request to merge into master branch</p>",
        "id": 226164888,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613149402
    },
    {
        "content": "<p>create it to merge into R4B branch</p>",
        "id": 226164904,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613149410
    },
    {
        "content": "<p>yes I understand what to do, but I dont know how to do it :-)</p>",
        "id": 226164964,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1613149432
    },
    {
        "content": "<p>Ah, when you are on the Github page to create the pull request, right at the top, you can just click on the branch names</p>",
        "id": 226165074,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613149471
    },
    {
        "content": "<p>the to and from branches</p>",
        "id": 226165091,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613149477
    },
    {
        "content": "<p>you can create a pull between any two branches</p>",
        "id": 226165111,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613149485
    },
    {
        "content": "<p>if I have the pull request on the wrong thing is it possible to move it to the right thing? Or do I need to start all over again</p>",
        "id": 226165341,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1613149572
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/VuMorvdxskWGN1PT7wbLmclg/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/VuMorvdxskWGN1PT7wbLmclg/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/VuMorvdxskWGN1PT7wbLmclg/image.png\"></a></div>",
        "id": 226165349,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613149576
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/CoVEgiu0NFYBq6YfZgcKPtNU/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/CoVEgiu0NFYBq6YfZgcKPtNU/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/CoVEgiu0NFYBq6YfZgcKPtNU/image.png\"></a></div>",
        "id": 226165406,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613149602
    },
    {
        "content": "<p>it would be best to just open a new one and close the old one</p>",
        "id": 226165659,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613149722
    },
    {
        "content": "<p>it's easy to do just hit close pull request button at the bottom of the current PR</p>",
        "id": 226165769,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613149780
    },
    {
        "content": "<p>then create a new one</p>",
        "id": 226165777,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613149785
    },
    {
        "content": "<p>I'm ok to close that yes thanks. <br>\nI created a pull request <a href=\"https://github.com/HL7/fhir/pull/1097\">https://github.com/HL7/fhir/pull/1097</a>, into R4B from rikr4b2.</p>",
        "id": 226166098,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1613149915
    },
    {
        "content": "<p>I now see<br>\nMerging is blocked<br>\nMerging can be performed automatically with 1 approving review.</p>",
        "id": 226166289,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1613149991
    },
    {
        "content": "<p>Yeah so once the checks pass Grahame will need to review</p>",
        "id": 226170046,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613151457
    },
    {
        "content": "<p>I just do the plumbing, I'm not familiar enough with the standard to give you feedback of value</p>",
        "id": 226170089,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1613151476
    }
]