[
    {
        "content": "<p>A confidence-range extension could look like this:</p>\n<div class=\"codehilite\"><pre><span></span>&quot;extension&quot;: [\n    {\n        &quot;url&quot;: &quot;http://fhir.de/StructureDefinition/confidence/0.5&quot;,\n        &quot;valueQuantity&quot;:  {\n                &quot;value&quot;: 0.9\n         }\n    }\n]\n</pre></div>",
        "id": 154020639,
        "sender_full_name": "Philipp Daumke",
        "timestamp": 1543007777
    },
    {
        "content": "<p>If I understand this correctly, the idea would be to represent confidence with a single number on a single, universal scale. My feeling is that this would be difficult without further context. Confidence in a prediction can be indicated in a wide range of ways e.g. p-values (for different test statistics and null hypotheses), likelihood ratios, the Bayesian or Akaike information criterion, or various types of confidence intervals (which again can be estimated in various ways). These differ e.g. in the range of possible values, whether bigger is better etc., and AFAIK there aren't standard ways of mapping them onto a fixed scale. Hence, it would be difficult to e.g. compare two different confidence-values, because they could describe very different forms of confidence mapped in non-standardized ways.</p>\n<p>Based on that, I think it would be necessary to allow both a value (or range) <em>and</em> some sort of description of what that number represents, like value and unit go together in <code>Quantity</code>.  It's not quite obvious to me how to best add this context. It may be possible to have a value-set for standard kinds of confidence-measures. However, given that people might invent their own measures of confidence for a particular software or contexts, I suspect that one would also have to allow some sort of \"free-text\" description and/or custom code system to at least allow humans to get an idea of what is meant.</p>\n<p>Adding this context would of course make it harder to automatically process of the information, but I think that this only reflects the fact it would be difficult to confidently process the information <em>without</em> that context.</p>",
        "id": 154020815,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1543232789
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"194703\">@Morten Ernebjerg</span> I agree, it will be difficult to find a universal measure. However, I would like to aim for at least a commonly agreed upon classification/categorization of  confidence, e.g. a ValueSet with \"high/medium/low\" certainty. Just so that systems who do not care to further process or compare confidence values can at least visualize them for the user in a generic way.</p>\n<p>It will be important for all systems to understand if a value is \"uncertain\" and make this obvious to the user, so I would like to see a mandatory field with a required binding to the ValueSet there...</p>\n<p>If this minimal interoperable information is present, any additional \"exact\" values along with a description of the method that has been used could be optional and may have loose bindings or even only textual descriptions.</p>",
        "id": 154554899,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1546851646
    },
    {
        "content": "<p>Sort of like this:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">&lt;extension</span> <span class=\"na\">url=</span><span class=\"s\">&quot;http://example.fhir.org/StructureDefinition/confidence&quot;</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;extension</span> <span class=\"na\">url=</span><span class=\"s\">&quot;confidence-class&quot;</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;valueCode</span> <span class=\"na\">value=</span><span class=\"s\">&quot;high&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/extension&gt;</span>\n    <span class=\"nt\">&lt;extension</span> <span class=\"na\">url=</span><span class=\"s\">&quot;confidence-value&quot;</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;valueDecimal</span> <span class=\"na\">value=</span><span class=\"s\">&quot;0.01&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/extension&gt;</span>\n    <span class=\"nt\">&lt;extension</span> <span class=\"na\">url=</span><span class=\"s\">&quot;confidence-method&quot;</span><span class=\"nt\">&gt;</span>\n        <span class=\"nt\">&lt;valueString</span> <span class=\"na\">value=</span><span class=\"s\">&quot;p-value&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/extension&gt;</span>\n<span class=\"nt\">&lt;/extension&gt;</span>\n</pre></div>\n\n\n<p>With the confidence-class being mandatory and the rest optional...</p>",
        "id": 154555216,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1546852184
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191450\">@Simone Heckmann</span> That sounds like a good approach to me (&amp; frohes Neues BTW :) ). In this set-up, one could then also require that <code>confidence-value</code> cannot be used without <code>confidence-method</code>.</p>\n<p>I guess a key piece here will be to find definitions of the various levels in the <code>conficence-class</code> ValueSet that are clear and can be also applied unambiguously and consistently across all use cases. I know that even for the  old workhorse p-value, there are current discussions (triggered by slews or non-reproducible studies) over whether the traditional 0.05 threshold of significance is too lax and one should instead require e.g. 0.005 (see e.g. <a href=\"https://cos.io/blog/we-should-redefine-statistical-significance/\" target=\"_blank\" title=\"https://cos.io/blog/we-should-redefine-statistical-significance/\">this comment</a>, based on <a href=\"https://imai.fas.harvard.edu/research/files/significance.pdf\" target=\"_blank\" title=\"https://imai.fas.harvard.edu/research/files/significance.pdf\">this paper</a>). So even in that restricted context, it is contested what counts as \"certain\". But I guess it would still be useful to have a rough classification even if it contains a dash of subjectivity (I guess all clinical judgements do), and systems that are very particular about their standard can of course require more info and/or manual control.</p>",
        "id": 154558218,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1546855662
    },
    {
        "content": "<p>I was wondering why not using as Extension the ISO GrAF structure.</p>\n<p>It's use is nicely shown in the CDA context in the following paper <a href=\"https://www.sciencedirect.com/science/article/pii/S1532046411002085\" target=\"_blank\" title=\"https://www.sciencedirect.com/science/article/pii/S1532046411002085\">https://www.sciencedirect.com/science/article/pii/S1532046411002085</a></p>\n<p>or perhaps using the <a href=\"http://hl7.org/fhir/graphdefinition.html\" target=\"_blank\" title=\"http://hl7.org/fhir/graphdefinition.html\">http://hl7.org/fhir/graphdefinition.html</a> instead of GrAF ?</p>",
        "id": 159053877,
        "sender_full_name": "Luca Toldo",
        "timestamp": 1550742848
    },
    {
        "content": "<p>I have created an Extension based on the results of the discussion so far:<br>\n<a href=\"https://simplifier.net/semantischeanalyse/confidence\" target=\"_blank\" title=\"https://simplifier.net/semantischeanalyse/confidence\">https://simplifier.net/semantischeanalyse/confidence</a><br>\nIt has </p>\n<ul>\n<li>a <code>confidence-class</code>element of type <code>code</code> that allows for the values high | medium | low as a common ground for all systems</li>\n<li>a <code>confidence-value</code>element of type <code>decimal</code> for the calculated, exact value </li>\n<li>a <code>method</code> element of type <code>string</code> to indicate the method used for estimating/calculation confidence (e.g. p-Value)</li>\n</ul>\n<p>Comments?</p>",
        "id": 182006670,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1574850918
    },
    {
        "content": "<p>The Extention Context is Provenance.target, so if multiple target ressources are created from one common source (i.e. a Document), the extensions are specific to each target.</p>",
        "id": 182006771,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1574851021
    },
    {
        "content": "<p>Cool, looks good <span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span> (with the side note that I am neither an  AI nor NLP expert). Two comments:</p>\n<ol>\n<li>How about making <code>method</code> a code and binding it to an extensible ValueSet so standard measures - if they exist - can be identified across systems? (I'm afraid I myself don't have a good overview of what should be in this list)</li>\n<li>I think it would be worth considering adding the constraint that if <code>confidence-value</code> is used, then <code>method</code> must also be filled, as numbers without context would be hard to use</li>\n</ol>",
        "id": 182093397,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1574932898
    },
    {
        "content": "<blockquote>\n<p>Cool, looks good <span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span> (with the side note that I am neither an  AI nor NLP expert). Two comments:</p>\n<ol>\n<li>How about making <code>method</code> a code and binding it to an extensible ValueSet so standard measures - if they exist - can be identified across systems? (I'm afraid I myself don't have a good overview of what should be in this list)</li>\n<li>I think it would be worth considering adding the constraint that if <code>confidence-value</code> is used, then <code>method</code> must also be filled, as numbers without context would be hard to use</li>\n</ol>\n</blockquote>\n<p>Agree to both. If we can come up with a list of at least three plausible example values for the method list, I'll be happy to update the extension accordingly :)</p>\n<p>Thing is: if you use coded datatypes but don't offer at least an example binding, the QA process will throw it back in your face :) (not 100% sure that's true for extensions too, though)</p>",
        "id": 182097494,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1574936897
    },
    {
        "content": "<p>once we're happy with the draft, I'll add an CR into Jira to make it a core extension for Provenance and assign an <a href=\"http://hl7.org\" target=\"_blank\" title=\"http://hl7.org\">hl7.org</a> canonical url</p>",
        "id": 182097556,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1574936992
    },
    {
        "content": "<p>Alas, I'm out of my depth domain-wise when comes to a sensible starter list <span aria-label=\"disappointed\" class=\"emoji emoji-1f61e\" role=\"img\" title=\"disappointed\">:disappointed:</span> - we'd need a real expert. The best I can offer is to check with my machine learning PhD colleague.</p>",
        "id": 182325505,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1575276962
    },
    {
        "content": "<p>So, I discussed the question of codes for a <code>method</code> field with my friendly machine learning PhD colleague and his statement was that it's, well, difficult. To really be able to e.g. compare confidence-values coming from different sources, you would typically need a very precise description of how that number was derived, well beyond just saying \"p-value\". You would <em>de facto_</em>need a unique identifier for the specific algorithm including parameters, sample sizes etc. That makes it sound like making confidence values interoperable is  hard, except in cases where the parties exchanging data already share knowledge of how the value was derived and have a shared code for it. So maybe staying with <code>string</code> for <code>method</code> and accepting that it will only be human-readable is more realistic. </p>\n<p>Confidence level statement: The previous paragraph is based on statements from a non-randomly selected group of experts (sample size = 1) <span aria-label=\"grinning face with smiling eyes\" class=\"emoji emoji-1f601\" role=\"img\" title=\"grinning face with smiling eyes\">:grinning_face_with_smiling_eyes:</span></p>",
        "id": 182646320,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1575542126
    },
    {
        "content": "<p>In the HL7 v2 space, in order to match patients based on their demographics, it's also a method/value pair. Different use case, I know, but it shows there's generally no agreement on a common methodology how to calculate confidence levels.</p>",
        "id": 182647140,
        "sender_full_name": "René Spronk",
        "timestamp": 1575542774
    }
]