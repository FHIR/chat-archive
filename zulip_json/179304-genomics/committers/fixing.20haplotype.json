[
    {
        "content": "<p>Patrick Werner: Fixed the discriminator, added a MolSeq slice and pattern matching for the Obs slices.</p>\n<p>Patrick Werner: Tried to build:<br>\n[java] java.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0<br>\n[java] at java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:64)<br>\n[java] at java.base/jdk.internal.util.Preconditions.outOfBoundsCheckIndex(Preconditions.java:70)<br>\n[java] at java.base/jdk.internal.util.Preconditions.checkIndex(Preconditions.java:248)<br>\n[java] at java.base/java.util.Objects.checkIndex(Objects.java:372)<br>\n[java] at java.base/java.util.ArrayList.get(ArrayList.java:458)<br>\n[java] at org.hl7.fhir.validation.instance.InstanceValidator.sliceMatches(InstanceValidator.java:3122)<br>\n[java] at org.hl7.fhir.validation.instance.InstanceValidator.matchSlice(InstanceValidator.java:5140)<br>\n[java] at org.hl7.fhir.validation.instance.InstanceValidator.assignChildren(InstanceValidator.java:5066)</p>\n<p>Patrick Werner: Will have a look at the Validator later this week to fix this in our spreadsheet, and/or fix the Java Validator.</p>",
        "id": 194830602,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1587487834
    },
    {
        "content": "<p>Did you commit your the change?  Which example is this error coming from?</p>",
        "id": 194848626,
        "sender_full_name": "Kevin Power",
        "timestamp": 1587496402
    },
    {
        "content": "<p>not yet. Didn't want to break the build of the branch</p>",
        "id": 194850628,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1587497484
    },
    {
        "content": "<p>I ask about the example that was breaking this, as I think there are some derivedFrom's in our examples that are not the best.  And I am assuming it is an example being validated that is generating that error?</p>",
        "id": 194850992,
        "sender_full_name": "Kevin Power",
        "timestamp": 1587497652
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191451\">@Patrick Werner</span> -- any luck?</p>",
        "id": 195085085,
        "sender_full_name": "Kevin Power",
        "timestamp": 1587658767
    },
    {
        "content": "<p>not yet. Currently the whole build doesn't work:</p>",
        "id": 195409726,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1587990723
    },
    {
        "content": "<p><a href=\"#narrow/stream/179297-committers.2Fnotification/topic/Builds.20failing.20on.20pubpack\" title=\"#narrow/stream/179297-committers.2Fnotification/topic/Builds.20failing.20on.20pubpack\">https://chat.fhir.org/#narrow/stream/179297-committers.2Fnotification/topic/Builds.20failing.20on.20pubpack</a></p>",
        "id": 195409764,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1587990755
    },
    {
        "content": "<p>We really need to fix the slicing issues... anything I can do to help? build seems working now</p>",
        "id": 195423799,
        "sender_full_name": "Jamie Jones",
        "timestamp": 1587997161
    },
    {
        "content": "<p>i'm in the debugger right now.</p>",
        "id": 195429771,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1587999638
    },
    {
        "content": "<p>IG publisher throws an NPE when using two discriminators</p>",
        "id": 195429849,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1587999669
    },
    {
        "content": "<p>can I reproduce that?</p>",
        "id": 195489761,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588032552
    },
    {
        "content": "<p>yes: <a href=\"https://github.com/HL7/genomics-reporting/tree/hoploFix\" title=\"https://github.com/HL7/genomics-reporting/tree/hoploFix\">https://github.com/HL7/genomics-reporting/tree/hoploFix</a></p>",
        "id": 195523151,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1588055312
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code> [java] java.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0\n     [java]     at java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:64)\n     [java]     at java.base/jdk.internal.util.Preconditions.outOfBoundsCheckIndex(Preconditions.java:70)\n     [java]     at java.base/jdk.internal.util.Preconditions.checkIndex(Preconditions.java:248)\n     [java]     at java.base/java.util.Objects.checkIndex(Objects.java:372)\n     [java]     at java.base/java.util.ArrayList.get(ArrayList.java:458)\n     [java]     at org.hl7.fhir.validation.instance.InstanceValidator.sliceMatches(InstanceValidator.java:3104)\n     [java]     at org.hl7.fhir.validation.instance.InstanceValidator.matchSlice(InstanceValidator.java:4465)\n     [java]     at org.hl7.fhir.validation.instance.InstanceValidator.assignChildren(InstanceValidator.java:4391)\n     [java]     at org.hl7.fhir.validation.instance.InstanceValidator.validateElement(InstanceValidator.java:3984)\n     [java]     at org.hl7.fhir.validation.instance.InstanceValidator.startInner(InstanceValidator.java:3451)\n     [java]     at org.hl7.fhir.validation.instance.InstanceValidator.start(InstanceValidator.java:3363)\n     [java]     at org.hl7.fhir.validation.instance.InstanceValidator.validateResource(InstanceValidator.java:4683)\n     [java]     at org.hl7.fhir.validation.instance.InstanceValidator.validate(InstanceValidator.java:702)\n     [java]     at org.hl7.fhir.validation.instance.InstanceValidator.validate(InstanceValidator.java:684)\n     [java]     at org.hl7.fhir.igtools.publisher.Publisher.validate(Publisher.java:4444)\n     [java]     at org.hl7.fhir.igtools.publisher.Publisher.validate(Publisher.java:4316)\n     [java]     at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:824)\n     [java]     at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:680)\n     [java]     at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:7141)\n     [java] Unhandled Exception: java.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0 (00:51.0976)\n</code></pre></div>",
        "id": 195523157,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1588055327
    },
    {
        "content": "<p>Problem is: <code> type = ((TypeRefComponent)criteriaElement.getType().get(0)).getWorkingCode();</code><br>\nand type is <code>null</code> in the InstanceValidator</p>",
        "id": 195523250,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1588055457
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 195523256,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1588055464
    },
    {
        "content": "<p>so it's not really the 2 discriminators thing.</p>",
        "id": 195526161,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588057937
    },
    {
        "content": "<p>nope. Just saw that the spreadsheet got an empty row in it. Checking if this fixes the issue.</p>",
        "id": 195526779,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1588058409
    },
    {
        "content": "<p>glad it didn't :-)</p>",
        "id": 195526945,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1588058526
    },
    {
        "content": "<p>i think i fixed it</p>",
        "id": 195527265,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1588058798
    },
    {
        "content": "<p>the discriminator was: <code>resolve().code.@pattern</code>i was confused by the point behind code and assumed thats the correct way to do it and went with <code>resolve().code.@pattern,$this.resolve().@type</code></p>",
        "id": 195527330,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1588058869
    },
    {
        "content": "<p>removing the trailing dots fixes the build (wondering where there were comming from in the first place</p>",
        "id": 195527407,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1588058903
    },
    {
        "content": "<p>what's the @?</p>",
        "id": 195527431,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588058918
    },
    {
        "content": "<p>oh that's the spreadsheet format... right</p>",
        "id": 195527444,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588058933
    },
    {
        "content": "<p>Ok i fixed the issue, also fixed element order issues in implication and sequ-phase</p>",
        "id": 195546393,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1588071162
    },
    {
        "content": "<p>builds well locally. (edit): online as well</p>",
        "id": 195546463,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1588071234
    },
    {
        "content": "<p>will continue fixing build errors.</p>",
        "id": 195546527,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1588071257
    },
    {
        "content": "<p>Did we already define a merging point in timer for the implications branch?</p>",
        "id": 195546568,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1588071296
    },
    {
        "content": "<p>aaaand its not working. The last dot is needed before the @</p>",
        "id": 195547719,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1588072025
    },
    {
        "content": "<p>that doesn't make sense, really</p>",
        "id": 195548153,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588072285
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> with the wrong discriminators the build worked. I fixed it again to: <code>$this.resolve().code.@pattern,$this.resolve().@type</code></p>",
        "id": 195548317,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1588072371
    },
    {
        "content": "<p>(still don't really understand if i need $this before the resolve or not.) trying without them now</p>",
        "id": 195548485,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1588072500
    },
    {
        "content": "<p>no difference (in the stacktrace)</p>",
        "id": 195548506,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1588072523
    },
    {
        "content": "<p>If i remove the <code>.</code> before the <code>@</code>the build works, but the discriminators are missing the last char  --&gt; resolve().cod</p>",
        "id": 195548729,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1588072646
    },
    {
        "content": "<p>I think there's something wrong with the string processing</p>",
        "id": 195548947,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588072788
    },
    {
        "content": "<p>can you commit it wrong to a fork and I'll look at it?  (though possibly not tonight)</p>",
        "id": 195549049,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1588072816
    },
    {
        "content": "<p>sure: <a href=\"https://github.com/HL7/genomics-reporting/tree/discriminatorProb\" title=\"https://github.com/HL7/genomics-reporting/tree/discriminatorProb\">https://github.com/HL7/genomics-reporting/tree/discriminatorProb</a><br>\nfor my own bug-hunting:</p>\n<ul>\n<li><code>.@</code> is used everywhere in the discriminators of our IG. So i left it like this.</li>\n<li>do i need <code>$this.resolve()</code> or <code>resolve()</code> on Observation.derivedFrom? (still unclear when i need $this)</li>\n<li>do you think the discriminator <code>$this.resolve().code.@pattern,$this.resolve().@type</code>is correct?</li>\n</ul>",
        "id": 195550099,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1588073533
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191451\">@Patrick Werner</span>  - Did you apply a fix of some sort to the 'implications' branch for this?  If so, do we need to back that out before we merge to master?<br>\n<a href=\"https://github.com/HL7/genomics-reporting/commit/c85eb1c932d373b3fa2f594395e0472a79e8698b\" title=\"https://github.com/HL7/genomics-reporting/commit/c85eb1c932d373b3fa2f594395e0472a79e8698b\">https://github.com/HL7/genomics-reporting/commit/c85eb1c932d373b3fa2f594395e0472a79e8698b</a></p>",
        "id": 195588764,
        "sender_full_name": "Kevin Power",
        "timestamp": 1588090830
    },
    {
        "content": "<p>I think it can go in, the TC doesn't need to be voted on</p>",
        "id": 195589034,
        "sender_full_name": "Jamie Jones",
        "timestamp": 1588090965
    },
    {
        "content": "<p>I don't think what is in the implication branch is the full fix (but wanted to confirm)</p>",
        "id": 195589235,
        "sender_full_name": "Kevin Power",
        "timestamp": 1588091054
    },
    {
        "content": "<p>I think we can merge (now or when the build error is resolved)</p>",
        "id": 195589433,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1588091160
    },
    {
        "content": "<p>For the TC (STU1, 1.0.1) i would then apply the fix to the STU1 version. Leaving all other modifications out.</p>",
        "id": 195589570,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1588091221
    },
    {
        "content": "<p>Yes. Best to do a clean one from stu1.0</p>",
        "id": 195589627,
        "sender_full_name": "Jamie Jones",
        "timestamp": 1588091248
    },
    {
        "content": "<p>Can make the diff as small as possible to show just what is changed (should be 1 cell in the obs spreadsheet??)</p>",
        "id": 195589732,
        "sender_full_name": "Jamie Jones",
        "timestamp": 1588091293
    },
    {
        "content": "<p>Can use text editor for that, hopefully</p>",
        "id": 195589774,
        "sender_full_name": "Jamie Jones",
        "timestamp": 1588091316
    },
    {
        "content": "<p>Oh, OK.  Will plan to remove the complex extension, then merge that branch into master.</p>",
        "id": 195589787,
        "sender_full_name": "Kevin Power",
        "timestamp": 1588091328
    },
    {
        "content": "<p>And yes, if we do a TC, would likely be easier reapply the fix to our STU1 tag.</p>",
        "id": 195589848,
        "sender_full_name": "Kevin Power",
        "timestamp": 1588091363
    },
    {
        "content": "<p>fyi, I started a <a href=\"#narrow/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets\" title=\"#narrow/stream/179202-terminology/topic/non-typical.20Codesystems.20and.20Valuesets\">thread in the terminology track</a> about genomics codesystems and valuesets</p>",
        "id": 196202981,
        "sender_full_name": " Bob Milius",
        "timestamp": 1588608676
    },
    {
        "content": "<p>Hey btw - I was searching through some JIRAs, and stumbled over this: <a href=\"http://jira.hl7.org/browse/FHIR-19966\" title=\"http://jira.hl7.org/browse/FHIR-19966\">J#19966</a> \"Fix slicings in obs profiles\"<br>\nSo when (if?) we can completely fix the slicing issues, we have a tracker <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span></p>",
        "id": 196638662,
        "sender_full_name": "Kevin Power",
        "timestamp": 1588773668
    },
    {
        "content": "<p>Hey what happened with O and O observation profiles removing the bad genomics examples?</p>",
        "id": 197021766,
        "sender_full_name": "Bret H",
        "timestamp": 1589069062
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191451\">@Patrick Werner</span> - Is this branch ready to merge, or are there still outstanding questions? <a href=\"https://github.com/HL7/genomics-reporting/tree/discriminatorProb\">https://github.com/HL7/genomics-reporting/tree/discriminatorProb</a></p>",
        "id": 197160985,
        "sender_full_name": "Kevin Power",
        "timestamp": 1589210493
    }
]