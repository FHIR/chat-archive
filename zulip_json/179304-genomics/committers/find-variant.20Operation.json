[
    {
        "content": "<p>Starting a new topic for the Operations branch of work.</p>\n<p><span class=\"user-mention\" data-user-id=\"193751\">@Bob Dolin</span> - Looks like you have been tweaking a lot today, I like the progress.  I will note that you can do the build locally (by running the \"_genUpdatePublisher\" script that is appropriate for your OS), the opening the output folder, and loading \"operations.html\" page in a browser to view your changes.</p>",
        "id": 185549744,
        "sender_full_name": "Kevin Power",
        "timestamp": 1578958211
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191913\">@Kevin Power</span> Let me add that to the list of things I haven't figured out how to do... ;-). I just get a 'BUILD FAILED' when I run _genUpdatePublisher.</p>",
        "id": 185549952,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1578958439
    },
    {
        "content": "<p>If it's too annoying seeing all the traffic on committers/notification, let me know and I'll figure it out</p>",
        "id": 185550010,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1578958487
    },
    {
        "content": "<p>Can you paste the build log you get locally (just copy/paste your terminal screen text after the build fails)?</p>",
        "id": 185550051,
        "sender_full_name": "Kevin Power",
        "timestamp": 1578958558
    },
    {
        "content": "<p>will do. In the meantime, here's where I am with the page, and the current issues that are stumping me:</p>",
        "id": 185550304,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1578958746
    },
    {
        "content": "<p>[1] I can't seem to change the position of 'Find variants' in the Table of Contents. How does one determine the ToC sort order, or deliberately move an item elsewhere in the list?</p>\n<p>[2] On the artifacts page, where would you enter in a revised description of the operation? I changed the description in the IG (resource.description), but that didn't seem to do it. </p>\n<p>[3] On the operations page (<a href=\"http://build.fhir.org/ig/HL7/genomics-reporting/branches/fhir_operations/operations.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/genomics-reporting/branches/fhir_operations/operations.html\">http://build.fhir.org/ig/HL7/genomics-reporting/branches/fhir_operations/operations.html</a>), I can't figure out how to insert a line break after the image, so that section 3.1 starts on a fresh line.</p>\n<p>[4] For the description of the find-variant operations (<a href=\"http://build.fhir.org/ig/HL7/genomics-reporting/branches/fhir_operations/find-variants.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/genomics-reporting/branches/fhir_operations/find-variants.html\">http://build.fhir.org/ig/HL7/genomics-reporting/branches/fhir_operations/find-variants.html</a>), I can't figure out how to place an intro or a notes page, so that I can include introductory and footer text, respectively.</p>",
        "id": 185550315,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1578958754
    },
    {
        "content": "<p>And here is the build log from my attempt at a local build:</p>",
        "id": 185550567,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1578958927
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/16khfcvce3CVV1nXtqKWbbsd/build.log\" target=\"_blank\" title=\"build.log\">build.log</a></p>",
        "id": 185550581,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1578958945
    },
    {
        "content": "<p>re: the build error, you have to install some extra stuff.  See the list here: <a href=\"https://confluence.hl7.org/display/FHIR/IG+Publisher+Documentation#IGPublisherDocumentation-Installing\" target=\"_blank\" title=\"https://confluence.hl7.org/display/FHIR/IG+Publisher+Documentation#IGPublisherDocumentation-Installing\">https://confluence.hl7.org/display/FHIR/IG+Publisher+Documentation#IGPublisherDocumentation-Installing</a> (for Windows it looks like you are using)</p>",
        "id": 185550744,
        "sender_full_name": "Kevin Power",
        "timestamp": 1578959102
    },
    {
        "content": "<p>This was the key part of the log:</p>\n<div class=\"codehilite\"><pre><span></span> [java] Generating Summary Outputs                                                       (01:30.0416)\n [java] Sending Usage Stats to Server                                                    (01:41.0672)\n [java] Jekyll: &#39;jekyll&#39; is not recognized as an internal or external command,           (01:42.0131)\n [java] Jekyll: operable program or batch file.                                          (01:42.0131)\n</pre></div>",
        "id": 185550771,
        "sender_full_name": "Kevin Power",
        "timestamp": 1578959133
    },
    {
        "content": "<p>RE: other items</p>\n<p>[1] - I am not sure about the ordering of things in the TOC, but would assume it is based on the order of the Resources in the IG?<br>\n[2] - It should be the resource.description - I made a change and it seems to update after I build?<br>\n[3] - I fixed that and will push to GitHub shortly.<br>\n[4] - I am not sure either</p>",
        "id": 185551432,
        "sender_full_name": "Kevin Power",
        "timestamp": 1578959773
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> Can you help with a question? It looks like the publisher supports including a header and footer to the operation (<a href=\"http://build.fhir.org/ig/HL7/genomics-reporting/branches/fhir_operations/find-variants.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/genomics-reporting/branches/fhir_operations/find-variants.html\">http://build.fhir.org/ig/HL7/genomics-reporting/branches/fhir_operations/find-variants.html</a>), but I can't seem to figure out how to do it.  The referenced operation is 'src/resources/operationdefinition-find-variants.xml'. I've tried inserting 'operationdefinition-find-variants-intro.xml' into src/pagecontent and src/resources, but no luck. Can you advise?</p>",
        "id": 185552846,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1578961160
    },
    {
        "content": "<p>Try OperationDefinition-find-variants-intro.xml</p>",
        "id": 185552962,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1578961303
    },
    {
        "content": "<p>There is header/footer content for Variant, you should be able to follow that pattern</p>",
        "id": 185553222,
        "sender_full_name": "Jamie Jones",
        "timestamp": 1578961554
    },
    {
        "content": "<p>What folder do those extra files for intro  belong?</p>",
        "id": 185553436,
        "sender_full_name": "Kevin Power",
        "timestamp": 1578961747
    },
    {
        "content": "<p>I think pagecontent - let's see what happens with this build...</p>",
        "id": 185553944,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1578962253
    },
    {
        "content": "<p>Ok, it worked (whew, finally, something...) the operation is here: src/resources/operationdefinition-find-variants.xml; and when it renders, it is automatically picking up this header (src/pagecontent/find-variants-intro.xml) and this footer (src/pagecontent/find-variants-notes.xml)</p>",
        "id": 185554375,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1578962649
    },
    {
        "content": "<p>Ah, because you're still using the old template.  Once you migrate, you'll need to tack OperationDefinition- on to the front.  (No hurry to migrate - a few more changes to commit before I start poking people.)</p>",
        "id": 185556747,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1578965198
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"193751\">@Bob Dolin</span> - I think we had talked about the return being a Bundle of Observations rather than a DiagnosticReport.  Any more thoughts on that?</p>",
        "id": 185607523,
        "sender_full_name": "Kevin Power",
        "timestamp": 1579016423
    },
    {
        "content": "<p>Ideally it should come with a provenance resource as well, in my opinion</p>",
        "id": 185607588,
        "sender_full_name": "Jamie Jones",
        "timestamp": 1579016489
    },
    {
        "content": "<p>Anytime we are creating Observations with an algorithm we should push for versioned representation of the computation</p>",
        "id": 185607729,
        "sender_full_name": "Jamie Jones",
        "timestamp": 1579016566
    },
    {
        "content": "<p>If there is a report then we could get around that maybe, by including that information in the report's fields</p>",
        "id": 185607930,
        "sender_full_name": "Jamie Jones",
        "timestamp": 1579016660
    },
    {
        "content": "<p>Seems we would need a profile or at least guidance to describe what that would look like?</p>",
        "id": 185607931,
        "sender_full_name": "Kevin Power",
        "timestamp": 1579016660
    },
    {
        "content": "<p>Is there guidance on performer, etc for the DR? The report won't have been created by the original lab</p>",
        "id": 185608021,
        "sender_full_name": "Jamie Jones",
        "timestamp": 1579016727
    },
    {
        "content": "<p>That may be cleanest</p>",
        "id": 185608058,
        "sender_full_name": "Jamie Jones",
        "timestamp": 1579016757
    },
    {
        "content": "<p>I am not a fan of using DR, as I think it could be confused with a \"real\" report.   But, the 'performer' as an example has pretty generic guidance: <a href=\"http://build.fhir.org/diagnosticreport-definitions.html#DiagnosticReport.performer\" target=\"_blank\" title=\"http://build.fhir.org/diagnosticreport-definitions.html#DiagnosticReport.performer\">http://build.fhir.org/diagnosticreport-definitions.html#DiagnosticReport.performer</a></p>",
        "id": 185608401,
        "sender_full_name": "Kevin Power",
        "timestamp": 1579016951
    },
    {
        "content": "<p>But I still think a Bundle with a type = collection makes the most sense in this case:<br>\ncollection  Collection  The bundle is a set of resources collected into a single package for ease of distribution that imposes no processing obligations or behavioral rules beyond persistence.</p>",
        "id": 185608699,
        "sender_full_name": "Kevin Power",
        "timestamp": 1579017153
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191913\">@Kevin Power</span> . I'm still in the process of making the pages look pretty, and then plan to return to the outstanding comments that are on the google sheet. In the latest incarnation (<a href=\"http://build.fhir.org/ig/HL7/genomics-reporting/branches/fhir_operations/find-variants.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/genomics-reporting/branches/fhir_operations/find-variants.html\">http://build.fhir.org/ig/HL7/genomics-reporting/branches/fhir_operations/find-variants.html</a>), the response is a bundle.</p>",
        "id": 185608849,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1579017262
    },
    {
        "content": "<p>Rationale for including DR was based on assumption that folks would having growing comfort with the IG, and would find the DR more intuitive than some other bundle of objects.</p>",
        "id": 185609148,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1579017457
    },
    {
        "content": "<p>I'm kinda anticipating additional operations that provide annotation services (e.g. include implications), and was thinking that those would also follow the IG.</p>",
        "id": 185609428,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1579017606
    },
    {
        "content": "<p>Now that I review the OperationDefinition a bit more, perhaps we should describe it as different Out parameters?  1..1 RegionStudied, 0..* Variants, and 0..* SeqPhaseReltns?  And if need, 0..1 or 1..1 Provenance?</p>",
        "id": 185609431,
        "sender_full_name": "Kevin Power",
        "timestamp": 1579017607
    },
    {
        "content": "<p>ahhh, I like that idea.</p>",
        "id": 185609707,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1579017766
    },
    {
        "content": "<p>Do we also need to define a 1..1 Bundle as a return parameter, or is that just implicit?</p>",
        "id": 185609804,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1579017833
    },
    {
        "content": "<p>If we do things as OUT parameters, we would not need a Bundle.  Just define different OUT parameters (one for each type of thing we would return), and they would be returned in the \"Parameters\" resource.</p>\n<p>I did find this example that is sort of similar to what we are doing, and they did define a single OUT parameter as a Bundle:<br>\n<a href=\"http://build.fhir.org/group-operation-everything.html\" target=\"_blank\" title=\"http://build.fhir.org/group-operation-everything.html\">http://build.fhir.org/group-operation-everything.html</a></p>\n<p>That might be because enumerating all the kinds of things that could be returned is not possible in that case.  But in our case, we are OK in limiting the kinds of thing returned.</p>",
        "id": 185611529,
        "sender_full_name": "Kevin Power",
        "timestamp": 1579018860
    },
    {
        "content": "<p>Not sure I really know all the pros and cons when weighing DR or not, Bundle vs. Parameters, +/- Provenance, etc. For now, I'll revise the page to have a DR as part of a bundle, and add OUT parameters per Kevin's suggestion, and I'll add in some examples, and then we can start throwing stones at it.</p>",
        "id": 185619647,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1579023652
    },
    {
        "content": "<blockquote>\n<p>For now, I'll revise the page to have a DR as part of a bundle ....</p>\n</blockquote>\n<p>I was suggesting bundle INSTEAD OF a DR, not in addition too?  Unless you are saying we would also return any DRs associated to the Observations we are returning?</p>",
        "id": 185620989,
        "sender_full_name": "Kevin Power",
        "timestamp": 1579024561
    },
    {
        "content": "<p>oh, I thought the addition of the DR might help tie everything together, package everything up in a way that folks find intuitive (because they understand the IG). Here's an example (although I'm not wedded to keeping the DR, just showing you what I'd been thinking):</p>",
        "id": 185621826,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1579025067
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/Ec89Wri3g7hxDmw7e4a9H3EK/find-variants_response.fhir.json\" target=\"_blank\" title=\"find-variants_response.fhir.json\">find-variants_response.fhir.json</a></p>",
        "id": 185621833,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1579025076
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> Wondering if you can help with another question? I'm trying to indicate that the operation response needs to include instances of several different profiles (region-studied, variant, sequence-phase-relationship). OperationDefinition.outputProfile has cardinality of 0..1, so that doesn't seem to work. If I define OperationDefinition.parameter.type='canonical', I can point to the profile using OperationDefinition.parameter.targetProfile, but the target profile doesn't appear in the rendering. Any suggestions?</p>",
        "id": 185629507,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1579029483
    },
    {
        "content": "<p>What are you passing out in the Operation?  If you're passing out a Bundle, then the profile you refer to needs to be a profile for the Bundle as a whole, not for individual entries.  (The Bundle profile could enforce that a certain number of entries exist that comply with certain profiles).</p>",
        "id": 185632649,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1579031206
    },
    {
        "content": "<p>The DR still seems duplicative and potentially confusing to me - confusing in that will everyone expect it to be a 'real' DR that was produced by the lab, not a \"virtual\" one that is effectively bundling the results for you, inside the Bundle we are returning.</p>\n<p>In a review of other operations, it seems fairly common for the return to be a Bundle, versus having multiple OUT parameters (which we could define as. I didn't see any that profiled Bundle, but maybe some do.</p>",
        "id": 185634763,
        "sender_full_name": "Kevin Power",
        "timestamp": 1579032399
    },
    {
        "content": "<p>so if I'm understanding correctly, [1] I'll remove DR; [2] we'd only have a single OUT, which is a Bundle. For now, I can describe the constraints on the bundle, but ultimately, we'd want a profile on the bundle.</p>",
        "id": 185635618,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1579033001
    },
    {
        "content": "<p>alternatively, we would not have the bundle. Instead, we'd just have OUT parameters 1..1 RegionStudied, 0..* Variants, and 0..* SeqPhaseReltns (which presumably means you'd then return a Parameters resource, instead of a Bundle)</p>",
        "id": 185636181,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1579033323
    },
    {
        "content": "<p>sigh, but we can't do that, because I can't define multiple OUT parameters, each pointing to a different profile...</p>",
        "id": 185636261,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1579033384
    },
    {
        "content": "<blockquote>\n<p>sigh, but we can't do that, because I can't define multiple OUT parameters, each pointing to a different profile...</p>\n</blockquote>\n<p>Really?  Why not, seems like from reading OperationDefinition you should be able to?</p>",
        "id": 185637525,
        "sender_full_name": "Kevin Power",
        "timestamp": 1579034238
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191913\">@Kevin Power</span> I don't see a way to associate each OUT parameter with a profile.</p>",
        "id": 185637869,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1579034488
    },
    {
        "content": "<p>OH, I thought you meant just multiple OUT parameters - sorry, I didn't catch the 'different profile' part.</p>",
        "id": 185637962,
        "sender_full_name": "Kevin Power",
        "timestamp": 1579034547
    },
    {
        "content": "<p>What about <a href=\"http://build.fhir.org/operationdefinition-definitions.html#OperationDefinition.parameter.targetProfile\" target=\"_blank\" title=\"http://build.fhir.org/operationdefinition-definitions.html#OperationDefinition.parameter.targetProfile\">http://build.fhir.org/operationdefinition-definitions.html#OperationDefinition.parameter.targetProfile</a> ?  Is the problem that is just isn't rendering but maybe it works otherwise?</p>",
        "id": 185638062,
        "sender_full_name": "Kevin Power",
        "timestamp": 1579034624
    },
    {
        "content": "<p>That was the main issue. I think the semantics are right, but it doesn't render. I suppose I could go that route and also include the canonical URL in parameter.documenation?</p>",
        "id": 185638176,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1579034699
    },
    {
        "content": "<p>I still don't know which is better (multiple OUT params or a Bundle) - maybe <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> would guide us?</p>",
        "id": 185639690,
        "sender_full_name": "Kevin Power",
        "timestamp": 1579035649
    },
    {
        "content": "<p>Multiple 'out' params allows you to be clear about what each parameter is for and easily control the cardinality of each one.  You can also have a deep hierarchy and mix resources with individual data elements (booleans, codes, integers, etc.).  A Bundle of resources is primarily useful when all of the results will be tied together using natural relationships within the Bundle and all meaning can be extracted from there.  If the semantics are clearly expressed that way, then the Bundle is a more interoperable and intuitive way of sharing the data.</p>",
        "id": 185642884,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1579037725
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> If we go with multiple OUT parameters, do you know of any way to get the profile for each one to render?</p>",
        "id": 185649415,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1579041764
    },
    {
        "content": "<p>The outputProfile would be a profile on Parameters</p>",
        "id": 185652005,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1579043741
    },
    {
        "content": "<p>Latest build (<a href=\"http://build.fhir.org/ig/HL7/genomics-reporting/branches/fhir_operations/find-variants.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/genomics-reporting/branches/fhir_operations/find-variants.html\">http://build.fhir.org/ig/HL7/genomics-reporting/branches/fhir_operations/find-variants.html</a>) includes multiple OUT parameters, and a new section on normalization. Next is to add some examples, and then I think it'll be ready for folks to start throwing stones at it...</p>",
        "id": 185655902,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1579047481
    },
    {
        "content": "<p>One question RE: normalization - would we go so far as to say it is 'required' for implementers of this Operation?  Without it, these examples you referenced wouldn't be returned in the same query:</p>\n<p>component:genomic-dna-chg: HGVS = NC_000019.9:g.11200236G&gt;A<br>\ncomponent:genomic-dna-chg: HGVS = NC_000019.10:g.11089560G&gt;A</p>",
        "id": 185712766,
        "sender_full_name": "Kevin Power",
        "timestamp": 1579104629
    },
    {
        "content": "<p>That's a good point - you can't really implement the operation without normalization, but we don't prescribe how to do it, but rather, just offer guidance/suggestions - is that what you're getting at?</p>",
        "id": 185713102,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1579104828
    },
    {
        "content": "<p>but there's another subtlety, that I was thinking we didn't need to get in to - the notion of 'liftOver' (<a href=\"https://genome.sph.umich.edu/wiki/LiftOver\" target=\"_blank\" title=\"https://genome.sph.umich.edu/wiki/LiftOver\">https://genome.sph.umich.edu/wiki/LiftOver</a>). If my VCF was generated based on build 37, and the query comes in with a build 38 refSeq, there's nothing that says whether an implementation must also try to retrieve build37-based variants.</p>",
        "id": 185713409,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1579104980
    },
    {
        "content": "<p>I am not sure what the right answer is, but I think we need to discuss the ramifications more.  A simple implementation of the operation (lookup by only the data given) could obviously miss things - we need to decide how comfortable we are with that.</p>",
        "id": 185713694,
        "sender_full_name": "Kevin Power",
        "timestamp": 1579105128
    },
    {
        "content": "<p>looking up by only the data given could be done using a complex search query and likely wouldn't need an operation</p>",
        "id": 185714062,
        "sender_full_name": "Jamie Jones",
        "timestamp": 1579105304
    },
    {
        "content": "<p>a couple options come to mind: [1] just describe this caveat in the documentation (and let liftOver be up to the specific implementation); [2] add another operation that lets you retrieve metadata (available builds) so that you can then selectively query for the build(s) you want; [3] expect that a conformant operation implementation would implement liftOver.</p>",
        "id": 185714191,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1579105363
    },
    {
        "content": "<p>I would lean towards [1], but am wondering if [3] is the right answer.  To Jamie's point, if you are just using the data you were given, do you really need to support this Operation?</p>",
        "id": 185714418,
        "sender_full_name": "Kevin Power",
        "timestamp": 1579105497
    },
    {
        "content": "<p>the operation highlights the normalization issues and pitfalls of ignoring them. I'm of the opinion that all normalization (including liftOver) should be required to be a conformant implementation of the operation.</p>",
        "id": 185714434,
        "sender_full_name": "Jamie Jones",
        "timestamp": 1579105504
    },
    {
        "content": "<p>I'd kinda lean towards [1], given there are some 'gotchas' with liftOver - it doesn't always work, and the results can change. In our local implementation, we went with [2].</p>",
        "id": 185714587,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1579105584
    },
    {
        "content": "<p>deriving variants on demand from other formats does circumvent the normalization</p>",
        "id": 185714609,
        "sender_full_name": "Jamie Jones",
        "timestamp": 1579105603
    },
    {
        "content": "<p>I like [2], to be able to ask a server what normalization operations it can perform seems very valuable</p>",
        "id": 185714639,
        "sender_full_name": "Jamie Jones",
        "timestamp": 1579105624
    },
    {
        "content": "<p>even very simple servers can respond to that with \"none, thank you very much\"</p>",
        "id": 185714675,
        "sender_full_name": "Jamie Jones",
        "timestamp": 1579105648
    },
    {
        "content": "<p>ah, I was thinking that [2] gave patient-specific information (e.g. for patient HG00403, we are storing build37 and build38 data), but you are suggesting that instead [2] not be patient-specific, but rather talks about the types of normalization (i.e. if liftOver is included).</p>",
        "id": 185714873,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1579105763
    },
    {
        "content": "<p>What if, for now, we add another section, 'liftOver', and describe the issue, and note that implementations may vary, so you may need to query with both build37 and build38 refSeqs?</p>",
        "id": 185715261,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1579105951
    },
    {
        "content": "<p>Highlighting these potential issues as much as possible seems the best approach for now</p>",
        "id": 185715374,
        "sender_full_name": "Jamie Jones",
        "timestamp": 1579106020
    },
    {
        "content": "<p>I don't know much about these specific normalization issues. Perhaps another response code could simplify the situation; \"unable to normalize patient data to the query\"</p>",
        "id": 185716207,
        "sender_full_name": "Jamie Jones",
        "timestamp": 1579106520
    },
    {
        "content": "<p>something along these lines would prompt the user to try different queries</p>",
        "id": 185716392,
        "sender_full_name": "Jamie Jones",
        "timestamp": 1579106623
    },
    {
        "content": "<p>I thought about that, but I think you only get to send back a single response code, so where the request is based on a build37 refSeq, and the patient has build37 and build38 data, would you not send anything back, just the new response code?</p>",
        "id": 185716475,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1579106655
    },
    {
        "content": "<p>If a server could easily tell it had more data than was being returned, I'm not sure a 200 OK is the correct response. Can we allow multiple reference sequences in the IN parameter?</p>",
        "id": 185717330,
        "sender_full_name": "Jamie Jones",
        "timestamp": 1579107131
    },
    {
        "content": "<p>hmmm, I think it gets complicated pretty quickly, when the service accepts multiple regions, across different builds. Maybe that would be a future operation?</p>",
        "id": 185717627,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1579107295
    },
    {
        "content": "<p>what if we say, by default, an operation need only respond with variants based on the requested build, and it is up to the requestor if they want to query twice?</p>",
        "id": 185717939,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1579107414
    },
    {
        "content": "<p>and that optionally, some implementations may choose to include liftOver</p>",
        "id": 185718000,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1579107440
    },
    {
        "content": "<p>Another consideration - in the two variants from above:</p>\n<p>component:genomic-dna-chg: HGVS = NC_000019.9:g.11200236G&gt;A<br>\ncomponent:genomic-dna-chg: HGVS = NC_000019.10:g.11089560G&gt;A</p>\n<p>So let's say a smart server does normalization and realizes it should return both of these.  I noticed that the Region Studied only allows 0..1 on the genomics ref seq component.  Would it respond with whichever one was in the request?</p>",
        "id": 185732475,
        "sender_full_name": "Kevin Power",
        "timestamp": 1579115321
    },
    {
        "content": "<p>Another question for region-studied.component:ranges-examied - is this the range given to the Operation, or what was really examined that happened to include this range?</p>\n<p>Imagine this use case:</p>\n<ul>\n<li>Sequenced an Exon, and found a variant</li>\n<li>find-variants range is really the full Gene, so we return the variant</li>\n<li>the region-studied.component:ranges-examined should be ?</li>\n</ul>",
        "id": 185733154,
        "sender_full_name": "Kevin Power",
        "timestamp": 1579115749
    },
    {
        "content": "<p>The proposal currently has the <code>OUT</code> region-studied match the query <code>IN</code> range, as it is interpreting the query as the 'study'. This is not completely compliant with our \"region-studied is there to help describe the test done by the laboratory\" ideology (that is not very well documented anywhere at this time).</p>",
        "id": 185733542,
        "sender_full_name": "Jamie Jones",
        "timestamp": 1579115951
    },
    {
        "content": "<p>This is also where I was considering the inclusion of an optional IN parameter 'includeUncallableSubregions' (boolean), which would identify that the intron regions weren't studied.</p>",
        "id": 185734635,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1579116606
    },
    {
        "content": "<p>I didn't see what ranges are expected documented, which we should do.</p>\n<p>And this is different from uncallable, right?  This is \"you asked for variants in a region, but I only tested a part of that region\" - I guess the outcome is the same, but I wouldn't use the word uncallable.</p>\n<p>This is starting to make me uncomfortable using Region Studied as an OUT parameter.  It sounds like we are redefining what the range-examied component means, right?</p>",
        "id": 185736772,
        "sender_full_name": "Kevin Power",
        "timestamp": 1579117897
    },
    {
        "content": "<p>well, Grahame once told me that we really don't HAVE to reflect back what the query parameters were... Anyhow, what do you think if I make a few more edits based on some of today's discussion, and then maybe we should move the discussion to the normal Zulip genomics channel?</p>",
        "id": 185739350,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1579119403
    },
    {
        "content": "<p>Geesh, sorry - I didn't even realize we were in the committers stream <span aria-label=\"dizzy\" class=\"emoji emoji-1f635\" role=\"img\" title=\"dizzy\">:dizzy:</span></p>",
        "id": 185741517,
        "sender_full_name": "Kevin Power",
        "timestamp": 1579120723
    },
    {
        "content": "<p>ok, page has been updated: [1] added an example; [2] included discussion of normalization and liftover. Still need to work through <span class=\"user-mention\" data-user-id=\"191913\">@Kevin Power</span> 's comment regarding RegionStudied, <span class=\"user-mention\" data-user-id=\"196553\">@Jamie Jones</span>'s comment regarding the need for a Provenance OUT parameter, note on google doc questioning if genomic-source-class needs to be required. I think most of <span class=\"user-mention\" data-user-id=\"192123\">@Bret H</span>'s questions on the google doc are addressed by having done away with DR. We can continue the discussion on the Zulip genomics channel.</p>",
        "id": 185743933,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1579122313
    },
    {
        "content": "<p>After the discussion in last weeks call about the base of this operation would be better on/Observation, i had another look on the current branch and wanted to post some thought of mine:</p>\n<ul>\n<li>as this is a query on a single subject i'd like to discuss changing the name to <code>find-subject-variants</code>.If we later decide to add a subject independent query we then can name it <code>find-variants</code></li>\n<li>the OUT Parameters are currently having the data type canonical, which is used to reference conformance resources uris. These should be changed to Observation</li>\n</ul>",
        "id": 188828097,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1582396432
    },
    {
        "content": "<p>Good catch with canonical. I also think the name should imply it is patient level and not system level</p>",
        "id": 188828376,
        "sender_full_name": "Jamie Jones",
        "timestamp": 1582396898
    },
    {
        "content": "<p>Regarding the operation name, is there any guidance we can follow so that we align with other FHIR operations?  For example, should we lean towards fewer and generic operations, which would imply some optional parameters?  Or is the idea to have more specific operations?</p>",
        "id": 188829427,
        "sender_full_name": "Kevin Power",
        "timestamp": 1582398811
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191913\">Kevin Power</span> <a href=\"#narrow/stream/179304-genomics.2Fcommitters/topic/find-variant.20Operation/near/188829427\" title=\"#narrow/stream/179304-genomics.2Fcommitters/topic/find-variant.20Operation/near/188829427\">said</a>:</p>\n<blockquote>\n<p>Regarding the operation name, is there any guidance we can follow so that we align with other FHIR operations?  For example, should we lean towards fewer and generic operations, which would imply some optional parameters?  Or is the idea to have more specific operations?</p>\n</blockquote>\n<p>good question. I would be in favour of fewer operations. But changing subject to 0..1 wont help a endpoint which only can do a subject specific query. Then the server endpoint might implement a subject specific operation and choose its own operation name. So i think two operations, one subject related, one independent would be ok.</p>",
        "id": 188868463,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1582462772
    },
    {
        "content": "<p>i corrected the out parameters to Reference, but the build fails (not sure if it was failing already before my change). Will have a closer look next week.</p>",
        "id": 188868528,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1582462848
    },
    {
        "content": "<p>Hi all - I am including a discussion about these things on the operation in Tuesday's agenda.  Is that OK <span class=\"user-mention\" data-user-id=\"193751\">@Bob Dolin</span>  and <span class=\"user-mention\" data-user-id=\"191451\">@Patrick Werner</span> ?</p>",
        "id": 188954780,
        "sender_full_name": "Kevin Power",
        "timestamp": 1582570720
    },
    {
        "content": "<p>sounds great to me. Thanks <span class=\"user-mention\" data-user-id=\"191913\">@Kevin Power</span> .</p>",
        "id": 188955456,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1582571113
    },
    {
        "content": "<p>+1</p>",
        "id": 188998229,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1582617354
    },
    {
        "content": "<p>The find-subject-variants operation (<a href=\"http://build.fhir.org/ig/HL7/genomics-reporting/branches/fhir_operations/find-subject-variants.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/genomics-reporting/branches/fhir_operations/find-subject-variants.html\">http://build.fhir.org/ig/HL7/genomics-reporting/branches/fhir_operations/find-subject-variants.html</a>) has been updated:</p>",
        "id": 189081083,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1582683833
    },
    {
        "content": "<ul>\n<li>updated Table of Contents to point to $find-subject-variants</li>\n<li>updated Operations.html to point to $find-subject-variants</li>\n<li>updated Operations.html to include hyperlink to <a href=\"http://hl7.org/fhir/operations.html\" target=\"_blank\" title=\"http://hl7.org/fhir/operations.html\">http://hl7.org/fhir/operations.html</a></li>\n<li>updated $find-subject-variants to include hyperlink to <a href=\"http://hl7.org/fhir/parameters.html\" target=\"_blank\" title=\"http://hl7.org/fhir/parameters.html\">http://hl7.org/fhir/parameters.html</a></li>\n<li>updated $find-subject-variants OUT parameters to be Observations, with no targetProfile</li>\n</ul>",
        "id": 189081084,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1582683840
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"193751\">@Bob Dolin</span> !  Would you mind reviewing the Resolution Description on the JIRA and suggesting updates based on your changes? <a href=\"https://jira.hl7.org/browse/FHIR-25250\" target=\"_blank\" title=\"https://jira.hl7.org/browse/FHIR-25250\">https://jira.hl7.org/browse/FHIR-25250</a></p>",
        "id": 189228561,
        "sender_full_name": "Kevin Power",
        "timestamp": 1582820392
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191913\">@Kevin Power</span> . I'm not sure I have rights to edit the Resolution Description. Here's a suggested update:</p>",
        "id": 189229924,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1582821247
    },
    {
        "content": "<p>Resolution is to merge the $find-subject-variants operation (<a href=\"http://build.fhir.org/ig/HL7/genomics-reporting/branches/fhir_operations/find-subject-variants.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/genomics-reporting/branches/fhir_operations/find-subject-variants.html\">http://build.fhir.org/ig/HL7/genomics-reporting/branches/fhir_operations/find-subject-variants.html</a>) into the Master branch. (Additional change proposals to the operation are still welcome, and will be managed in the Master branch).</p>\n<p>Description of $find-subject-variants operation: </p>\n<p>Use this operation to retrieve variants with precise endpoints from a specified genomic region for a specified patient. If the range in question has been studied, the operation returns variants overlapping the region. If the patient or the specified region has not been studied, the operation returns a 404 error.</p>\n<p>IN Parameters:<br>\nsubject [1..1]<br>\ngenomicRefSeq [1..1]<br>\nrange (numeric within the ref seq) [1..1]</p>\n<p>OUT Parameters:<br>\nregionStudied [0..1]<br>\nvariant [0..*]<br>\nsequencePhaseRelationships [0..*]</p>\n<p>Details of the operation are here: <a href=\"http://build.fhir.org/ig/HL7/genomics-reporting/branches/fhir_operations/find-subject-variants.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/genomics-reporting/branches/fhir_operations/find-subject-variants.html\">http://build.fhir.org/ig/HL7/genomics-reporting/branches/fhir_operations/find-subject-variants.html</a></p>",
        "id": 189229926,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1582821250
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"193751\">@Bob Dolin</span> - two wonderings:<br>\n1 - Should we mention the [base] we decided on?<br>\n2 - I had listed the following, should we leave it or remove?</p>\n<blockquote>\n<p>Other Requirements:</p>\n<ul>\n<li>Include discussion of variant normalization, and expectations of the server</li>\n<li>Include discussion of variant liftover, and expectations of the server</li>\n</ul>\n</blockquote>",
        "id": 189230277,
        "sender_full_name": "Kevin Power",
        "timestamp": 1582821481
    },
    {
        "content": "<p>Okido, how about this:</p>",
        "id": 189231579,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1582822218
    },
    {
        "content": "<p>Resolution is to merge the $find-subject-variants operation (<a href=\"http://build.fhir.org/ig/HL7/genomics-reporting/branches/fhir_operations/find-subject-variants.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/genomics-reporting/branches/fhir_operations/find-subject-variants.html\">http://build.fhir.org/ig/HL7/genomics-reporting/branches/fhir_operations/find-subject-variants.html</a>) into the Master branch. (Additional change proposals to the operation are still welcome, and will be managed in the Master branch).</p>\n<p>Description of $find-subject-variants operation: </p>\n<p>Use this operation to retrieve variants with precise endpoints from a specified genomic region for a specified patient. If the range in question has been studied, the operation returns variants overlapping the region. If the patient or the specified region has not been studied, the operation returns a 404 error.</p>\n<p>IN Parameters:<br>\nsubject [1..1]<br>\ngenomicRefSeq [1..1]<br>\nrange (numeric within the ref seq) [1..1]</p>\n<p>OUT Parameters:<br>\nregionStudied [0..1]<br>\nvariant [0..*]<br>\nsequencePhaseRelationships [0..*]</p>\n<p>Additional resolutions include:</p>\n<ul>\n<li>operation name: $find-subject-variants</li>\n<li>context: [base]/$find-subject-variants</li>\n<li>include discussion of normalization and liftover, including expectations of the server</li>\n</ul>\n<p>Details of the operation are here: <a href=\"http://build.fhir.org/ig/HL7/genomics-reporting/branches/fhir_operations/find-subject-variants.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/genomics-reporting/branches/fhir_operations/find-subject-variants.html\">http://build.fhir.org/ig/HL7/genomics-reporting/branches/fhir_operations/find-subject-variants.html</a></p>",
        "id": 189231587,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1582822222
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191913\">@Kevin Power</span> <span class=\"user-mention\" data-user-id=\"196553\">@Jamie Jones</span> Being a bit of a github novice, I thought I'd run this by you before starting. I can go ahead and create a pull request for the fhir_operations branch. Did you also want me to do the merge?</p>",
        "id": 190220693,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1583872150
    },
    {
        "content": "<p>I have some time to look into the merge</p>",
        "id": 190221432,
        "sender_full_name": "Jamie Jones",
        "timestamp": 1583872576
    },
    {
        "content": "<p>Certainly do the pull request.  It is probably a good habit for our group to have someone else do a review and then merge.</p>",
        "id": 190221481,
        "sender_full_name": "Kevin Power",
        "timestamp": 1583872622
    },
    {
        "content": "<p>good news - the branch has no conflicts with the base branch, and can be automatically merged.</p>",
        "id": 190221850,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1583872817
    },
    {
        "content": "<p>But I'll leave the merging to one of you, just to play it safe</p>",
        "id": 190221920,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1583872857
    },
    {
        "content": "<p>We were doing work in the other branch yeah</p>",
        "id": 190222086,
        "sender_full_name": "Jamie Jones",
        "timestamp": 1583872944
    },
    {
        "content": "<p>That's gonna be the harder one (and I may just port over the diff manually)</p>",
        "id": 190222101,
        "sender_full_name": "Jamie Jones",
        "timestamp": 1583872958
    },
    {
        "content": "<p>I did a quick review, merged, and deleted the branch.  We can watch and see if it builds OK after the merge</p>",
        "id": 190222371,
        "sender_full_name": "Kevin Power",
        "timestamp": 1583873091
    },
    {
        "content": "<p>HL7/genomics-reporting: master rebuilt<br>\nCommit: Merge pull request #5 from HL7/fhir_operations</p>\n<p>Fhir operations (Kevin Power) <span aria-label=\"thumbs up\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"thumbs up\">:thumbs_up:</span><br>\nDetails: build logs | published | qa: broken links = 31, errors = 28, warn = 21, info = 30</p>",
        "id": 190222557,
        "sender_full_name": "Kevin Power",
        "timestamp": 1583873191
    },
    {
        "content": "<p>whoo hoo!!!</p>",
        "id": 190222642,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1583873253
    },
    {
        "content": "<p>Nice work <span class=\"user-mention\" data-user-id=\"193751\">@Bob Dolin</span> !!  You can see the operation here now: <a href=\"http://build.fhir.org/ig/HL7/genomics-reporting/operations.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/genomics-reporting/operations.html\">http://build.fhir.org/ig/HL7/genomics-reporting/operations.html</a></p>",
        "id": 190222643,
        "sender_full_name": "Kevin Power",
        "timestamp": 1583873254
    },
    {
        "content": "<p>very exciting. Now we can start talking about the next operation ;-)</p>",
        "id": 190222731,
        "sender_full_name": "Bob Dolin",
        "timestamp": 1583873288
    }
]