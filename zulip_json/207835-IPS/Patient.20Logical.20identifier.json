[
    {
        "content": "<p>Hi, a few of us wanted to confirm that for the Immunization.patient.identifier in the IPS it should be a literal reference, and logical should be used when literal is not available. The wording is not clear. Is then Immunization.patient.reference the literal and Immunization.patient.identifier the logical only if the literal is unavailable? Does that mean if we fill reference, we do not need identifier? <span class=\"user-mention\" data-user-id=\"192667\">@Nityan Khanna</span> <span class=\"user-mention\" data-user-id=\"252917\">@Mo Ibrahim</span> <span class=\"user-mention\" data-user-id=\"193307\">@Derek Ritz</span> <a href=\"https://build.fhir.org/ig/HL7/fhir-ips/StructureDefinition-Immunization-uv-ips.html\">https://build.fhir.org/ig/HL7/fhir-ips/StructureDefinition-Immunization-uv-ips.html</a><br>\n<a href=\"/user_uploads/10155/gw_jrxDkJQ6K43R4LW126-v_/IPSImmunizationQuestion.png\">IPSImmunizationQuestion.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/gw_jrxDkJQ6K43R4LW126-v_/IPSImmunizationQuestion.png\" title=\"IPSImmunizationQuestion.png\"><img src=\"/user_uploads/10155/gw_jrxDkJQ6K43R4LW126-v_/IPSImmunizationQuestion.png\"></a></div>",
        "id": 217015142,
        "sender_full_name": "Alex Goel",
        "timestamp": 1605625942
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"192545\">@Alex Goel</span>   for some kinds of elements (including subject/patient) in the IPS we expect that a reference to an actual FHIR resource is provided. That the reason why the reference is 1..1 This doesn't exclude that you can provide a 'display' or an 'identifier' if you wish to ..but you are not obliged to do it ...</p>",
        "id": 217036350,
        "sender_full_name": "Giorgio Cangioli",
        "timestamp": 1605634754
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191415\">@Giorgio Cangioli</span> thanks for the clarification. so that means that Immunization.patient.identifier in the IPS could be equivalent to the <a href=\"http://Patient.id\">Patient.id</a>?</p>",
        "id": 217039506,
        "sender_full_name": "Alex Goel",
        "timestamp": 1605636211
    },
    {
        "content": "<p>the <a href=\"http://Patient.id\">Patient.id</a> is the id for that Patient  resource; not the \"identifier\" of that patient (see <a href=\"https://www.hl7.org/fhir/resource.html#identification\">https://www.hl7.org/fhir/resource.html#identification</a>).</p>\n<p>business identifiers of the patient are in Patient.identifier</p>\n<p>if the <a href=\"http://patient.id\">patient.id</a> = \"ips-patient-1\", a possible Immunization.patient.reference might be something like \"<a href=\"http://myserver.foo/Patient/ips-patient-1\">http://myserver.foo/Patient/ips-patient-1</a>\" .</p>",
        "id": 217043799,
        "sender_full_name": "Giorgio Cangioli",
        "timestamp": 1605638068
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191415\">Giorgio Cangioli</span> <a href=\"#narrow/stream/207835-IPS/topic/Patient.20Logical.20identifier/near/217043799\">said</a>:</p>\n<blockquote>\n<p>if the <a href=\"http://patient.id\">patient.id</a> = \"ips-patient-1\", a possible Immunization.patient.reference might be something like \"<a href=\"http://myserver.foo/Patient/ips-patient-1\">http://myserver.foo/Patient/ips-patient-1</a>\" .</p>\n</blockquote>\n<p>So... the composition.subject.reference and the immunization.patient.reference <strong>MUST</strong> be identical... right? It makes sense that these will all be the same... but it also is a bit <em>awkward</em> that we're normatively replicating the patient reference for various elements  inside the IPS composition, and the composition also normatively mandates the patient reference. I'm sure this is true for other resources, too, that are in the IPS composition. (I'm curious... would a FHIR server throw an exception if all of these patient references were <strong>NOT</strong> identical?)</p>\n<p>Also... as you illustrate... the <a href=\"http://patient.id\">patient.id</a> is a necessary part of the reference... or is it? Is it possible to create a valid reference that doesn't include the id in it?</p>\n<p>Lastly... as has been getting discussed on another thread... although it isn't <strong>mandated</strong> that the reference should be a fully formed URL -- is sure could be considered as a \"best practice\" (especially in cases where there may be an EMPI server separate from the shared health record repository). <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 217194766,
        "sender_full_name": "Derek Ritz",
        "timestamp": 1605732633
    },
    {
        "content": "<p>Interesting. I just notice that (at least in the context of a \"Clinical Document\") the rules for Context Conduction within a CDA Clinical Document were quite useful. In FHIR the idea is more like \"each resource provides the fully qualified context\"?</p>",
        "id": 217196385,
        "sender_full_name": "Christof Gessner",
        "timestamp": 1605733415
    },
    {
        "content": "<p>They could also be quite tricky. FHIR takes that position that all references must be explicit...</p>",
        "id": 217223072,
        "sender_full_name": "David Hay",
        "timestamp": 1605753166
    },
    {
        "content": "<p>I only recently discovered the <a href=\"http://build.fhir.org/comparison.html\">comparisons between FHIR and other standards</a> in the FHIR spec, but found them quite illuminating (especially as someone who never worked directly with the older standards). <a href=\"http://build.fhir.org/comparison-v3.html\">The comparison between FHIR &amp; v3/RIM</a> offers the following argument for explicit references (along the lines of what David said)</p>\n<blockquote>\n<p>In FHIR, no context is conducted - everything is explicit. (...). One of the benefits of this approach is that each resource can be safely consumed and examined without concern for the context in which that resource was communicated. The meaning of each resource instance is fully self-contained.</p>\n</blockquote>",
        "id": 217241707,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1605775707
    },
    {
        "content": "<blockquote>\n<p>So... the composition.subject.reference and the immunization.patient.reference <strong>MUST</strong> be identical... right? It makes sense that these will all be the same... but it also is a bit <em>awkward</em> that we're normatively replicating the patient reference for various elements  inside the IPS composition, and the composition also normatively mandates the patient reference. I'm sure this is true for other resources, too, that are in the IPS composition.</p>\n</blockquote>\n<p>Yes it is highly probable that all the information inside a IPS belong to the same patient :-)<br>\nand, as explained by others, no context conduction is the way FHIR has been (IMHO correctly) designed.</p>",
        "id": 217243855,
        "sender_full_name": "Giorgio Cangioli",
        "timestamp": 1605777165
    },
    {
        "content": "<blockquote>\n<p>(I'm curious... would a FHIR server throw an exception if all of these patient references were <strong>NOT</strong> identical?)</p>\n</blockquote>\n<p>It might be a test to be done ...</p>",
        "id": 217243903,
        "sender_full_name": "Giorgio Cangioli",
        "timestamp": 1605777192
    },
    {
        "content": "<blockquote>\n<p>Also... as you illustrate... the <a href=\"http://patient.id\">patient.id</a> is a necessary part of the reference... or is it? Is it possible to create a valid reference that doesn't include the id in it?<br>\nLastly... as has been getting discussed on another thread... although it isn't mandated that the reference should be a fully formed URL -- is sure could be considered as a \"best practice\" (especially in cases where there may be an EMPI server separate from the shared health record repository).</p>\n</blockquote>\n<p>there are different options for managing the references, in particular with bundles where you can use a sort of  'Temporary Resource identifier'  in case you don't know yet what is the 'real' id. In that case is the receiving server that will assigned the right ids  and references to the resources, as needed. <br>\n[Removed wrong example, thanks Olivier]</p>",
        "id": 217244043,
        "sender_full_name": "Giorgio Cangioli",
        "timestamp": 1605777261
    },
    {
        "content": "<p>Are this references correct for a bundle which is not coming from a RESTFul API? I would have thought that the references should be in above example to the fullUrl: &lt;reference value=\"urn:uuid:2b90dd2b-2dab-4c75-9bb9-a355e07401e8\"/&gt; maybe with the resource type added below the reference and that the id element is not added in the resource.</p>",
        "id": 217248050,
        "sender_full_name": "Oliver Egger",
        "timestamp": 1605779859
    },
    {
        "content": "<p>with the example above I think the Patient entry would not be found according to the spec <a href=\"http://hl7.org/fhir/bundle.html#references\">2.36.4.1 Resolving references in Bundles</a></p>",
        "id": 217248265,
        "sender_full_name": "Oliver Egger",
        "timestamp": 1605779983
    },
    {
        "content": "<p>see also the example in the spec \"reference to a locally identified resource\" <a href=\"http://hl7.org/fhir/bundle-references.xml.html\">http://hl7.org/fhir/bundle-references.xml.html</a></p>",
        "id": 217248776,
        "sender_full_name": "Oliver Egger",
        "timestamp": 1605780279
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191415\">@Giorgio Cangioli</span> Maybe one comment on the IPS requirement that certain patient references be literal. I think this might be slightly awkward for certain use cases that use IPS as a \"foundational library\". For instance, we are using IPS as a basis for our profiles. These are also used in scenarios where the data is ingested piece by piece, rather than as a complete IPS document Bundle.  In some scenarios, the relevant patient is only identified by  the business context (e.g. through the authorization mechanism or via an ID on the source system). The data source does not (and cannot) know the <code>id</code> of the corresponding FHIR Patient resource on the server, only the server can make that connection. Hence , the source could provide an identifier but not a reference to a FHIR resource, i.e. they would always have to \"wiggle out\" of the requirement by filling <code>display</code> (or they would redundantly have to send along an own Patient resource with every piece of data).</p>",
        "id": 217250242,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1605781250
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191478\">Oliver Egger</span> <a href=\"#narrow/stream/207835-IPS/topic/Patient.20Logical.20identifier/near/217248050\">said</a>:</p>\n<blockquote>\n<p>Are this references correct for a bundle which is not coming from a RESTFul API? ...</p>\n</blockquote>\n<p>Sure, thank you for pointing this out :-)</p>",
        "id": 217260902,
        "sender_full_name": "Giorgio Cangioli",
        "timestamp": 1605788008
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"194703\">Morten Ernebjerg</span> <a href=\"#narrow/stream/207835-IPS/topic/Patient.20Logical.20identifier/near/217250242\">said</a>:</p>\n<blockquote>\n<p>I think this might be slightly awkward for certain use cases that use IPS as a \"foundational library\". </p>\n</blockquote>\n<p>Hi <span class=\"user-mention\" data-user-id=\"194703\">@Morten Ernebjerg</span>  as you know the IPS has been (mainly) designed for being used within the IPS document, but this is a discussion that I think we should have for the evolution of the IPS, as for example distinguishing IPS document specific constraints from IPS constraints.</p>",
        "id": 217261697,
        "sender_full_name": "Giorgio Cangioli",
        "timestamp": 1605788595
    }
]