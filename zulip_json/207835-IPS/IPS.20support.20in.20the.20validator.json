[
    {
        "content": "<p>It's been tricky to use the validator to validate IPS documents. After the next release, due in 24-48 hours, you can just specify -ips as a parameter, and the validator will figure out all the other parameters. It defaults to the connectathon-2 branch, but you can specify -ips$[branch} for another alternative</p>",
        "id": 256397956,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1633521308
    },
    {
        "content": "<p>so just </p>\n<p><code>java validator.jar -ips {filename}</code></p>",
        "id": 256398010,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1633521340
    },
    {
        "content": "<p>Nice.</p>",
        "id": 256398473,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1633521590
    },
    {
        "content": "<p>What's the difference between this and testing against the <a href=\"https://build.fhir.org/ig/HL7/fhir-ips/branches/connectathon-2/StructureDefinition-Bundle-uv-ips.html\">IPS Bundle Profile</a>? Just more helpful error messages?</p>\n<p>Context: We have tooling that uses the FHIR validator Java classes (e.g. <a href=\"https://inferno.healthit.gov/validator\">https://inferno.healthit.gov/validator</a>) and one thing we support is validating IPS bundles against the IPS bundle profiles so supporting better validation is important to us.</p>",
        "id": 256398496,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1633521596
    },
    {
        "content": "<p>well, it's a syntactical shortcut to validate against the IPS bundle profile using the branch of your choice. So it sounds like pretty much the same thing</p>",
        "id": 256399141,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1633521880
    },
    {
        "content": "<p>I'm not sure how you go keeping the version up to date</p>",
        "id": 256399188,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1633521906
    },
    {
        "content": "<p>Keeping the version up to date is not an automated process currently so we load the IG from a local copy to make sure we're getting the correct branch version (<a href=\"https://github.com/inferno-community/fhir-validator-wrapper/blob/master/src/main/java/org/mitre/inferno/Validator.java#L67-L71\">relevant code in our app</a>)</p>",
        "id": 256399475,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1633522059
    },
    {
        "content": "<p>A user can also manually load a specific <code>package.tgz</code>using the web app at <a href=\"https://inferno.healthit.gov/validator/\">https://inferno.healthit.gov/validator/</a></p>",
        "id": 256399604,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1633522116
    },
    {
        "content": "<p>yes it's tricky. Anyway, if you're running the java validator internally, you'll get all the fundamentals I'm doing</p>",
        "id": 256399617,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1633522125
    },
    {
        "content": "<p>Is this specifying the <code>-ig</code> (I assume it is)?</p>",
        "id": 256400000,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1633522319
    },
    {
        "content": "<p>-ips looks after all the details like -ig</p>",
        "id": 256400426,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1633522515
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/207835-IPS/topic/IPS.20support.20in.20the.20validator/near/256397956\">said</a>:</p>\n<blockquote>\n<p>It's been tricky to use the validator to validate IPS documents. After the next release, due in 24-48 hours, you can just specify -ips as a parameter, and the validator will figure out all the other parameters. It defaults to the connectathon-2 branch, but you can specify -ips$[branch} for another alternative</p>\n</blockquote>\n<p>Great ! I'll try with the examples I have</p>",
        "id": 256400918,
        "sender_full_name": "Giorgio Cangioli",
        "timestamp": 1633522731
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"197651\">@Reece Adamson</span> we need some process for reconciling when the java validator returns different errors than inferno.</p>",
        "id": 256402380,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1633523461
    },
    {
        "content": "<p>it's happening.</p>",
        "id": 256402388,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1633523465
    },
    {
        "content": "<p>The differences (<em>should</em>) come down to the version of the validator used. Inferno is using version 5.3.14 of the validator library, but the most recent published is 5.5.4. I'm working on updating that now.</p>\n<p>Our team should update this dependency more frequently to keep pace though and provide back unit tests if we notice any unexpected changes. Up for thoughts or suggestions for improved coordination!</p>",
        "id": 256405914,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1633525081
    },
    {
        "content": "<p>yes that's quite the gap. That will explain the difference</p>",
        "id": 256406104,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1633525150
    },
    {
        "content": "<p>what java class are you using?</p>",
        "id": 256406163,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1633525181
    },
    {
        "content": "<p>primarily ValidationEngine (<a href=\"https://github.com/inferno-community/fhir-validator-wrapper/blob/40203932707b0539eada1492fe3dce76bf611675/src/main/java/org/mitre/inferno/Validator.java#L38\">relevant source file</a>)</p>",
        "id": 256406632,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1633525346
    },
    {
        "content": "<p>HI Grahame, Can you please validate this sample and give us feedback? </p>\n<p><a href=\"https://github.com/SixOThree/IPSviewer/blob/DynamicExampleChanges2/samples/connectathon_samples/US_Dynamic_Health_IT_Happy_Kid_FHIR_Bundle-IPS.json\">https://github.com/SixOThree/IPSviewer/blob/DynamicExampleChanges2/samples/connectathon_samples/US_Dynamic_Health_IT_Happy_Kid_FHIR_Bundle-IPS.json</a></p>\n<p>Thank you,<br>\nSumanth Bandaru</p>",
        "id": 256407729,
        "sender_full_name": "Sumanth Bandaru",
        "timestamp": 1633525773
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> I made a PR to update the dependency, but it looks like it breaks Java 8 support. Not sure if we should move to another stream or a private thread for further discussion, but here's some details on what I'm seeing for now.</p>\n<p><a href=\"https://github.com/inferno-community/fhir-validator-wrapper/pull/41/checks?check_run_id=3815304341\">inferno-validator-wrapper CI results showing Java 8 unit tests failing</a>. Still tracking down exactly what the issue is.</p>\n<p>Interestingly, It looks like the maven compiler plugin is targeting Java 8 in the <a href=\"https://github.com/hapifhir/org.hl7.fhir.core/blob/master/pom.xml#L164-L165\">org.hl7.fhir.core pom</a>, but the CI appears to be targeting <a href=\"https://github.com/hapifhir/org.hl7.fhir.core/blob/f0997bc0c06b253f93883fadbcb7a1a11b5c80b6/master-branch-pipeline.yml#L90\">Java 11</a>. Is Java 8 intended to be supported?</p>",
        "id": 256418383,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1633529736
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span> handles all these things for us. Mark, can you look into this?</p>",
        "id": 256419448,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1633530143
    },
    {
        "content": "<p>Hey</p>",
        "id": 256419536,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633530176
    },
    {
        "content": "<p>Java 8 is intended to be supported. Let me read the full chat one sec</p>",
        "id": 256419580,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633530193
    },
    {
        "content": "<p>might move the Java specific stuff to <a class=\"stream\" data-stream-id=\"179167\" href=\"/#narrow/stream/179167-hapi\">#hapi</a></p>",
        "id": 256419675,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1633530229
    },
    {
        "content": "<p>We can do that. But first, can someone link me to the PR that apparently breaks Java8</p>",
        "id": 256419793,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633530265
    },
    {
        "content": "<p>that's Reece's PR to his own code</p>",
        "id": 256419826,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1633530278
    },
    {
        "content": "<p>ok, well <span class=\"user-mention\" data-user-id=\"197651\">@Reece Adamson</span> if you give me access and send me a link, we can work on alternatives</p>",
        "id": 256419892,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633530306
    },
    {
        "content": "<p>also, I'm confident that we need to keep support for Java8 ongoing</p>",
        "id": 256419928,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633530321
    },
    {
        "content": "<p>for HAPI</p>",
        "id": 256419949,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633530332
    },
    {
        "content": "<ul>\n<li><a href=\"https://github.com/inferno-community/fhir-validator-wrapper/pull/41\">My PR (just updates the validator dependency from 5.3.14 -&gt; 5.5.4)</a></li>\n<li><a href=\"https://github.com/inferno-community/fhir-validator-wrapper/pull/41/checks?check_run_id=3815304341\">CI Details showing Java 11 &amp; 16 passing, but Java 8 failing</a></li>\n</ul>",
        "id": 256420120,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1633530386
    },
    {
        "content": "<p>Wait</p>",
        "id": 256420156,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633530400
    },
    {
        "content": "<p>so Java8 passed before</p>",
        "id": 256420173,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633530407
    },
    {
        "content": "<p>it's pretty old</p>",
        "id": 256420199,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1633530419
    },
    {
        "content": "<p>and the change that made it fail was bumping core from 5.3.14 to 5.5.4</p>",
        "id": 256420228,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633530433
    },
    {
        "content": "<p>So it's this test <code>ValidatorTest &gt; getKnownIGs() FAILED\n    org.opentest4j.AssertionFailedError at ValidatorTest.java:100</code></p>",
        "id": 256420425,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633530504
    },
    {
        "content": "<p>Correct.</p>",
        "id": 256420444,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1633530513
    },
    {
        "content": "<p>So, I don't think this is a <code>Java 8</code> issue</p>",
        "id": 256420503,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633530535
    },
    {
        "content": "<p>I think there is a dependency in your tests for Java 8 that is no longer present in the core, let me check</p>",
        "id": 256420561,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633530558
    },
    {
        "content": "<p>I'm cloning the project now</p>",
        "id": 256420573,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633530563
    },
    {
        "content": "<p>It passes on 11 &amp; 16 though and all I did was update the validator dependency</p>",
        "id": 256420579,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1633530567
    },
    {
        "content": "<p>Is the code identical for all the tests other than the version of Java?</p>",
        "id": 256420621,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633530585
    },
    {
        "content": "<p>yup, everything is the same except java version. You can see the CI config <a href=\"https://github.com/inferno-community/fhir-validator-wrapper/blob/40203932707b0539eada1492fe3dce76bf611675/.github/workflows/gradle.yml#L18\">here</a>. I can reproduce it locally as well trying the docker build/test.</p>",
        "id": 256420915,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1633530673
    },
    {
        "content": "<p>I'm looking right now</p>",
        "id": 256420940,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633530681
    },
    {
        "content": "<p>gotcha let me know if I can help! Still trying to investigate myself in the meantime.</p>",
        "id": 256421105,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1633530737
    },
    {
        "content": "<p>fwiw, I'm happy you're using gradle</p>",
        "id": 256421556,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633530915
    },
    {
        "content": "<p><span aria-label=\"laughing\" class=\"emoji emoji-1f606\" role=\"img\" title=\"laughing\">:laughing:</span> me too</p>",
        "id": 256421809,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1633531019
    },
    {
        "content": "<p>So...the code works? Here's where I'm at</p>",
        "id": 256422125,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633531131
    },
    {
        "content": "<p>the fetched list of profiles in the ig contains 30 entries</p>",
        "id": 256422184,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633531160
    },
    {
        "content": "<p>0 = \"<a href=\"http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-cancer-condition-parent\">http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-cancer-condition-parent</a>\"<br>\n1 = \"<a href=\"http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-cancer-disease-status\">http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-cancer-disease-status</a>\"<br>\n2 = \"<a href=\"http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-cancer-genetic-variant\">http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-cancer-genetic-variant</a>\"<br>\n3 = \"<a href=\"http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-cancer-genomics-report\">http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-cancer-genomics-report</a>\"<br>\n4 = \"<a href=\"http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-cancer-patient\">http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-cancer-patient</a>\"<br>\n5 = \"<a href=\"http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-cancer-related-medication-statement\">http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-cancer-related-medication-statement</a>\"<br>\n6 = \"<a href=\"http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-cancer-related-radiation-procedure\">http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-cancer-related-radiation-procedure</a>\"<br>\n7 = \"<a href=\"http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-cancer-related-surgical-procedure\">http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-cancer-related-surgical-procedure</a>\"<br>\n8 = \"<a href=\"http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-cancer-stage-parent\">http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-cancer-stage-parent</a>\"<br>\n9 = \"<a href=\"http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-comorbid-condition\">http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-comorbid-condition</a>\"<br>\n10 = \"<a href=\"http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-ecog-performance-status\">http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-ecog-performance-status</a>\"<br>\n11 = \"<a href=\"http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-evidence-type\">http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-evidence-type</a>\"<br>\n12 = \"<a href=\"http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-genetic-specimen\">http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-genetic-specimen</a>\"<br>\n13 = \"<a href=\"http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-genomic-region-studied\">http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-genomic-region-studied</a>\"<br>\n14 = \"<a href=\"http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-histology-morphology-behavior\">http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-histology-morphology-behavior</a>\"<br>\n15 = \"<a href=\"http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-karnofsky-performance-status\">http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-karnofsky-performance-status</a>\"<br>\n16 = \"<a href=\"http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-laterality\">http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-laterality</a>\"<br>\n17 = \"<a href=\"http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-primary-cancer-condition\">http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-primary-cancer-condition</a>\"<br>\n18 = \"<a href=\"http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-related-primary-cancer-condition\">http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-related-primary-cancer-condition</a>\"<br>\n19 = \"<a href=\"http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-secondary-cancer-condition\">http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-secondary-cancer-condition</a>\"<br>\n20 = \"<a href=\"http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-termination-reason\">http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-termination-reason</a>\"<br>\n21 = \"<a href=\"http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-tnm-clinical-distant-metastases-category\">http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-tnm-clinical-distant-metastases-category</a>\"<br>\n22 = \"<a href=\"http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-tnm-clinical-primary-tumor-category\">http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-tnm-clinical-primary-tumor-category</a>\"<br>\n23 = \"<a href=\"http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-tnm-clinical-regional-nodes-category\">http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-tnm-clinical-regional-nodes-category</a>\"<br>\n24 = \"<a href=\"http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-tnm-clinical-stage-group\">http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-tnm-clinical-stage-group</a>\"<br>\n25 = \"<a href=\"http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-tnm-pathological-distant-metastases-category\">http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-tnm-pathological-distant-metastases-category</a>\"<br>\n26 = \"<a href=\"http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-tnm-pathological-primary-tumor-category\">http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-tnm-pathological-primary-tumor-category</a>\"<br>\n27 = \"<a href=\"http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-tnm-pathological-regional-nodes-category\">http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-tnm-pathological-regional-nodes-category</a>\"<br>\n28 = \"<a href=\"http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-tnm-pathological-stage-group\">http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-tnm-pathological-stage-group</a>\"<br>\n29 = \"<a href=\"http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-treatment-intent\">http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-treatment-intent</a>\"<br>\n30 = \"<a href=\"http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-tumor-marker\">http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-tumor-marker</a>\"</p>",
        "id": 256422235,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633531181
    },
    {
        "content": "<p>and your test searches for</p>",
        "id": 256422277,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633531202
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>    &quot;http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-comorbidities-parent&quot;,\n    &quot;http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-cancer-disease-status&quot;,\n    &quot;http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-cancer-genetic-variant&quot;,\n    &quot;http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-cancer-genomics-report&quot;,\n    &quot;http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-cancer-patient&quot;,\n    &quot;http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-cancer-related-medication-request&quot;,\n    &quot;http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-cancer-related-surgical-procedure&quot;,\n    &quot;http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-cancer-stage-group&quot;\n</code></pre></div>",
        "id": 256422286,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633531202
    },
    {
        "content": "<p>so it's missing</p>",
        "id": 256422436,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633531261
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>    &quot;http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-comorbidities-parent&quot;,\n</code></pre></div>",
        "id": 256422437,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633531262
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>    &quot;http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-cancer-stage-group&quot;\n</code></pre></div>",
        "id": 256422472,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633531274
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>    &quot;http://hl7.org/fhir/us/mcode/StructureDefinition/mcode-cancer-related-medication-request&quot;,\n</code></pre></div>",
        "id": 256422528,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633531297
    },
    {
        "content": "<p>So...the question would be, why does it partially work</p>",
        "id": 256422671,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633531341
    },
    {
        "content": "<p>but only with Java 8? presumably are present when using Java 11 or 16 since the test passesthose</p>",
        "id": 256422674,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1633531341
    },
    {
        "content": "<p>so I'm just dumping what I find, still looking into it</p>",
        "id": 256422758,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633531379
    },
    {
        "content": "<p>appreciate it <span aria-label=\"pray\" class=\"emoji emoji-1f64f\" role=\"img\" title=\"pray\">:pray:</span></p>",
        "id": 256422791,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1633531389
    },
    {
        "content": "<p>Now we know why the test is failing</p>",
        "id": 256422817,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633531401
    },
    {
        "content": "<p>well, the data that is causing the test to fail</p>",
        "id": 256422840,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633531411
    },
    {
        "content": "<p>at least</p>",
        "id": 256422844,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633531413
    },
    {
        "content": "<p>Yeah if I comment out those three profiles it passes for sure, let me switch around my java versions and see what's up with 11 and 116</p>",
        "id": 256423050,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633531493
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"197651\">@Reece Adamson</span> if you are comfortable with it, could you please temporarily grant me admin access on the repo so I can force the CI to run</p>",
        "id": 256423278,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633531599
    },
    {
        "content": "<p>not even admin</p>",
        "id": 256423335,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633531628
    },
    {
        "content": "<p>contributor or whatever</p>",
        "id": 256423346,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633531632
    },
    {
        "content": "<p>I'm running it locally with Java 11 and I'm getting the same failure</p>",
        "id": 256423562,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633531709
    },
    {
        "content": "<p>That should be fine, lemme just double check with <span class=\"user-mention\" data-user-id=\"192576\">@Robert Scanlon</span> real quick that he's cool with it</p>",
        "id": 256423702,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1633531764
    },
    {
        "content": "<p>I can kick the CI right now in the meantime if you want though</p>",
        "id": 256423723,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1633531775
    },
    {
        "content": "<p>Please do</p>",
        "id": 256423737,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633531780
    },
    {
        "content": "<p>rerunning now</p>",
        "id": 256423854,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1633531812
    },
    {
        "content": "<p>Ah, so, when doing this locally, I need to blow away my fhir cache to see the pass/fail on different versions</p>",
        "id": 256423972,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633531864
    },
    {
        "content": "<p>I wonder if that is related to the error...</p>",
        "id": 256424006,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633531875
    },
    {
        "content": "<p>ah good catch</p>",
        "id": 256424021,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1633531880
    },
    {
        "content": "<p>Can you change the order they run in</p>",
        "id": 256424033,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633531887
    },
    {
        "content": "<p>for my curiosity</p>",
        "id": 256424066,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633531900
    },
    {
        "content": "<p>run 16, 11, 8</p>",
        "id": 256424087,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633531909
    },
    {
        "content": "<p>I can, but they run in separate containers so they shouldn't share cache</p>",
        "id": 256424090,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1633531910
    },
    {
        "content": "<p>I'll do that right now</p>",
        "id": 256424100,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1633531916
    },
    {
        "content": "<p>oh forget it then</p>",
        "id": 256424101,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633531916
    },
    {
        "content": "<p>I'm puzzled at why the version of java would affect the number of profiles that are fetched</p>",
        "id": 256424285,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633531971
    },
    {
        "content": "<p>if you want to test locally you can see it fail using <code>docker build -t hl7_validator .</code>. I haven't tried it but I bet if we change the JDK version there we might see a difference</p>",
        "id": 256424291,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1633531974
    },
    {
        "content": "<p>ya it's very odd</p>",
        "id": 256424322,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1633531985
    },
    {
        "content": "<p>So, I have a meeting now</p>",
        "id": 256424346,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633531998
    },
    {
        "content": "<p>but I'm at the point now where I can replicate it locally, and I'll dive into it after my meeting</p>",
        "id": 256424387,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633532015
    },
    {
        "content": "<p>My meeting goes until 12, then I will lunch and I'll dedicate hte first part of my afternoon to this</p>",
        "id": 256424456,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633532038
    },
    {
        "content": "<p>will have to actually step through the code in the core that fetches the packages</p>",
        "id": 256424542,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633532054
    },
    {
        "content": "<p>I'll keep you posted</p>",
        "id": 256424569,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633532061
    },
    {
        "content": "<p>Thanks! I also have a meeting now but I'll try and do the same and share whatever I find</p>",
        "id": 256424624,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1633532080
    },
    {
        "content": "<p>I just have to line by line step through <code>    IgResponse ig = validator.loadIg(\"hl7.fhir.us.mcode\", null);\n</code></p>",
        "id": 256424645,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633532090
    },
    {
        "content": "<p>that's where the difference will be</p>",
        "id": 256424668,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633532098
    },
    {
        "content": "<p>Yeah...java 11 fetches 43 profile entries</p>",
        "id": 256424716,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633532118
    },
    {
        "content": "<p>vs the 30 from java 8</p>",
        "id": 256424732,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633532125
    },
    {
        "content": "<p>so strange</p>",
        "id": 256424741,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633532128
    },
    {
        "content": "<p>You've tickled my interest here</p>",
        "id": 256424772,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633532143
    },
    {
        "content": "<p>So I'm getting the same error on validator version 5.3.14</p>",
        "id": 256432734,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633534877
    },
    {
        "content": "<p>as 5.5.4</p>",
        "id": 256432748,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633534883
    },
    {
        "content": "<p>I made another commit to my PR reverting to 5.3.14 and I <a href=\"https://github.com/inferno-community/fhir-validator-wrapper/pull/41/checks?check_run_id=3818136231\">see Java 8 passing in the CI</a> when using validator version 5.3.14</p>\n<p>Did you wipe your fhir cache between testing?</p>",
        "id": 256446421,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1633539774
    },
    {
        "content": "<p>yeah I did, but I ran it locally</p>",
        "id": 256450025,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633541217
    },
    {
        "content": "<p>truthfully, I think this is related to changes in caching</p>",
        "id": 256450075,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633541240
    },
    {
        "content": "<p>why this only affects Java 8</p>",
        "id": 256450095,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633541247
    },
    {
        "content": "<p>I am unsure</p>",
        "id": 256450103,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633541250
    },
    {
        "content": "<p>Just for testing purposes, could you change the order of the runs</p>",
        "id": 256450159,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633541277
    },
    {
        "content": "<p>like 16, 11, 8</p>",
        "id": 256450167,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633541281
    },
    {
        "content": "<p>It most likely will not do anything</p>",
        "id": 256450231,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633541292
    },
    {
        "content": "<p>but...I just want to rule it out</p>",
        "id": 256450245,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633541298
    },
    {
        "content": "<p>yup trying it now</p>",
        "id": 256452027,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1633541990
    },
    {
        "content": "<p>same result with reordering the ci builds</p>\n<p>Fails with Java 8 on 5.3.14<br>\nPasses with Java 8 on 5.5.4</p>\n<p><span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 256452870,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1633542279
    },
    {
        "content": "<p>I am 99.9% sure this has nothing to do with Java</p>",
        "id": 256456022,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633543354
    },
    {
        "content": "<p>and everything to do with changes to caching</p>",
        "id": 256456038,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633543360
    },
    {
        "content": "<p>So, wait</p>",
        "id": 256456790,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633543615
    },
    {
        "content": "<p>you said</p>",
        "id": 256456808,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633543622
    },
    {
        "content": "<p>Fails with Java 8 on 5.3.14<br>\nPasses with Java 8 on 5.5.4</p>",
        "id": 256456810,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633543622
    },
    {
        "content": "<p>but above you said</p>",
        "id": 256456828,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633543628
    },
    {
        "content": "<p>I made another commit to my PR reverting to 5.3.14 and I see Java 8 passing in the CI when using validator version 5.3.14</p>",
        "id": 256456845,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633543636
    },
    {
        "content": "<p>is it inconsistent</p>",
        "id": 256456878,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633543645
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"197651\">@Reece Adamson</span></p>",
        "id": 256457935,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633544023
    },
    {
        "content": "<p>I mistyped.</p>\n<p>Fails with Java 8 on 5.5.4<br>\nPasses with Java 8 on 5.3.14</p>",
        "id": 256457951,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1633544027
    },
    {
        "content": "<p>kk</p>",
        "id": 256457971,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633544034
    },
    {
        "content": "<p>that makes sense then</p>",
        "id": 256457995,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633544041
    },
    {
        "content": "<p>was worried there</p>",
        "id": 256458038,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633544044
    },
    {
        "content": "<p>I don't think it has anything to do with my system cache since I have tested locally using docker (<code>docker build -t hl7_validator .</code>) which doesn't use my system <code>~/.fhir</code> cache. Still might have to do with the caching in general though <span aria-label=\"shrug\" class=\"emoji emoji-1f937\" role=\"img\" title=\"shrug\">:shrug:</span> .</p>",
        "id": 256458644,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1633544272
    },
    {
        "content": "<p>I'm just in another meeting from 2-4, will continue to look afterwardss</p>",
        "id": 256459248,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1633544491
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span> not sure if you've had a chance to look at this. Would it be helpful to for me to create a simple test case targeting this in a new repo?</p>",
        "id": 256767184,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1633710919
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span> I opened a <a href=\"https://github.com/hapifhir/org.hl7.fhir.core/pull/622\">PR on org.hl7.fhir.core</a> to update the pull request CI pipeline to test with multiple JDK versions (right now 8 and 11).</p>",
        "id": 257535726,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1634218552
    },
    {
        "content": "<p>just gave some feedback on that. Looks like some tests are failing under different versions</p>",
        "id": 257610408,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1634247587
    },
    {
        "content": "<p>I will have to look into it tomorrow</p>",
        "id": 257610417,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1634247595
    },
    {
        "content": "<p>thanks for doing this</p>",
        "id": 257610421,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1634247598
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span> the main problem to address is that the Validator is returning various bogus information messages with respect to ALL IPS examples when using the -ips parameter which, in turn, uses this profile <a href=\"http://hl7.org/fhir/uv/ips/StructureDefinition/Bundle-uv-ips\">http://hl7.org/fhir/uv/ips/StructureDefinition/Bundle-uv-ips</a>. A simple fix, at this stage, might be for the -ips parameter to use the cross-border, Bundle Profile - <a href=\"http://hl7.org/fhir/uv/ips/StructureDefinition/Bundle-cross-border-uv-ips\">http://hl7.org/fhir/uv/ips/StructureDefinition/Bundle-cross-border-uv-ips</a>. It may take longer for the IPS WG to fix the other Profile and most of the activity now is around the cross-border use case.</p>\n<p>BTW validating against the published IPS examples without using a specific profile or IG does not result in the generation of these information messages.</p>",
        "id": 257611890,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1634248385
    },
    {
        "content": "<p>The main issue is that right now that I need to fix is that we have a validator that doesn't pass tests consistently across versions. From what I looked at, the issue is less to do with the actual validation rules and more with how caching is being done. Now that the pipeline is set up to run the tests, I will look into fixing that first. Thanks for doing that <span class=\"user-mention\" data-user-id=\"197651\">@Reece Adamson</span></p>",
        "id": 257614411,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1634249640
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191364\">@Peter Jordan</span> <span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span> We need to get away from relying at all on the cross-border Bundle profile (or the other cross-border profiles), as we agreed that we will not be carrying those forward into the CI build and the updated IG publication we are working on.  But it seems very odd that the cross-border Bundle profile would validate correctly where the other IPS Bundle profile doesn't, as the cross-border profile is based on the other one and only adds one main constraint to close the slicing plus adding an additional slice.</p>",
        "id": 257615054,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1634249951
    },
    {
        "content": "<p>OK - I didn't realise that we're moving to single version of the Profiles which is really good news! <br>\nThese information messages, repeated for all examples on the majority of resource entries (excluding composition and the other other required resources if in certain ordinal positions), suggest it may be an issue with the slicing...</p>\n<div class=\"codehilite\"><pre><span></span><code>This element does not match any known slice defined in the profile http://hl7.org/fhir/uv/ips/StructureDefinition/Bundle-uv-ips&lt;\n</code></pre></div>",
        "id": 257616099,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1634250555
    },
    {
        "content": "<p>Well, we came to that conclusion while you were sleeping yesterday. :)<br>\nYes, at least some of it does have to do with the slicing - but I don't think it's actually because there is anything wrong with the slicing per se.  The validator code explicitly allows what we are doing with the slicing (even though some of the wording in the spec does not).  I've been getting ready (i.e. marshaling my ammunition) to enter another issue to see if we can resolve that.  I think most of these messages are somewhat of a red herring, because when you leverage the \"open\" aspect of open slicing then you are logically going to \"not match any known slice\".  We can suppress or ignore those, if they are reflecting expected behavior.</p>",
        "id": 257616919,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1634250976
    },
    {
        "content": "<p>you can let me know if you still think that there's outstanding issues for the validator, but the validator can't fix up the fact that the bundle profiles are not baked in IPS</p>",
        "id": 258451975,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1634767630
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"196733\">@Sumanth Bandaru</span> I never got back to you about your sample IPS. The most obvious problem is here:</p>\n<div class=\"codehilite\" data-code-language=\"JSON\"><pre><span></span><code>                        <span class=\"nt\">\"language\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n                            <span class=\"nt\">\"coding\"</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n                                <span class=\"p\">{</span>\n                                    <span class=\"nt\">\"code\"</span><span class=\"p\">:</span> <span class=\"s2\">\"en-US\"</span><span class=\"p\">,</span>\n                                    <span class=\"nt\">\"display\"</span><span class=\"p\">:</span> <span class=\"s2\">\"English (Region=United States)\"</span>\n                                <span class=\"p\">}</span>\n                            <span class=\"p\">],</span>\n                            <span class=\"nt\">\"text\"</span><span class=\"p\">:</span> <span class=\"s2\">\"English (Region=United States)\"</span>\n                        <span class=\"p\">}</span>\n</code></pre></div>",
        "id": 258452268,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1634767790
    },
    {
        "content": "<p>you need a system  on that code.</p>",
        "id": 258452286,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1634767797
    },
    {
        "content": "<p>the rest of the issues... kind of depend on getting the IPS bundle profile sort out and then decide whether there's a real problem</p>",
        "id": 258452371,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1634767817
    },
    {
        "content": "<p>The Bundle profiles will be moved from the 'connectathon-2' branch to the CI build <em>really</em> soon.  It has kept getting delayed, but I will try to get that and some other key items done tonight.</p>",
        "id": 258452795,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1634768029
    },
    {
        "content": "<p>the validator with the option -ips is running off the connectathon-2 branch already, so that's not the answer. The bundle profile just doesn't say enough right now</p>",
        "id": 258477792,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1634783477
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  So it doesn't say enough for what?  Happy to hear suggestions from you (or anyone else).</p>",
        "id": 258478032,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1634783645
    },
    {
        "content": "<p>well, last I looked, it only profiles 4 entries, and leaves the rest to 'open', and I got a series of issues reported to me that seemed to all come from the bundle profile, not the validator</p>",
        "id": 258478110,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1634783726
    },
    {
        "content": "<p>I agree with the first part - need to add the other entries for the recommended and optional sections.  Not sure about the issues, though.  I would like to work through that and see what's going on.  I'll see what I'm getting with the updated publisher, and if you want to share what you are seeing (should be the same?) I can look at that, too.</p>",
        "id": 258478427,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1634783989
    },
    {
        "content": "<p>see this thread</p>",
        "id": 258478997,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1634784481
    },
    {
        "content": "<p><a href=\"#narrow/stream/207835-IPS/topic/IPS.20Validation.20Issue\">https://chat.fhir.org/#narrow/stream/207835-IPS/topic/IPS.20Validation.20Issue</a></p>",
        "id": 258479024,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1634784482
    },
    {
        "content": "<p>Yes, I've been following that.  I found the better results that <span class=\"user-mention\" data-user-id=\"191364\">@Peter Jordan</span> was getting with the cross-border profiles to be a bit odd.  I'll try to reproduce and see what we need to do.</p>",
        "id": 258479959,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1634785218
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"453078\">@David Otasek</span></p>",
        "id": 260862603,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1636492626
    }
]