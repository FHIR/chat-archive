[
    {
        "content": "<p>I looked at the <a href=\"https://github.com/smart-on-fhir/fhir-parser/tree/6eb44a9639a7fdab9d8f62781b33ecf5d7a9f40e\" target=\"_blank\" title=\"https://github.com/smart-on-fhir/fhir-parser/tree/6eb44a9639a7fdab9d8f62781b33ecf5d7a9f40e\">fhir-parser</a>  to see if there was a way to use it to create a  python model from logical model SD file.  Short of adding a SD to the build bundle, I could not see an obvious entry point for a single custom resource that would still be using all the base types.   Any ideas?</p>",
        "id": 153909541,
        "sender_full_name": "Eric Haas",
        "timestamp": 1505950121
    },
    {
        "content": "<p>Try running fhir-parser once, then add your SD into the \"downloads\" folder and run it again. That could work.</p>",
        "id": 153909542,
        "sender_full_name": "Pascal Pfiffner",
        "timestamp": 1505950300
    },
    {
        "content": "<p>Thanks I tried it and did not work.  It seem that classes are not being  generated from the  <code>.../client-py/fhir-parser/downloads</code> folder. - I removed the SD for Account from the directory but its class was still generated anyway.</p>",
        "id": 153909796,
        "sender_full_name": "Eric Haas",
        "timestamp": 1506027902
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> I just checked, and the parser simply reads <code>downloads/profiles-resources.json</code>, which is a Bundle containing all StructureDefinitons of the resources. You can either run the generator (from client-py) once, then replace that file with a Bundle of your own SDs, or give your Bundle of SDs a custom name, place it into <code>downloads</code> as well and edit <code>fhirspec.py</code> on line 95 to also read your file (there's a commented out part in place already also looking for <code>profiles-others.json</code>).</p>",
        "id": 153910111,
        "sender_full_name": "Pascal Pfiffner",
        "timestamp": 1506227875
    },
    {
        "content": "<p>LMK how that goes!</p>",
        "id": 153910112,
        "sender_full_name": "Pascal Pfiffner",
        "timestamp": 1506227893
    },
    {
        "content": "<p>yes that works well - thanks</p>",
        "id": 153910521,
        "sender_full_name": "Eric Haas",
        "timestamp": 1506357113
    },
    {
        "content": "<p>I'm using the Python model for creating a Flask scheduling application and was going well until this mysterious message:</p>\n<p>fhirclient.models.fhirabstractbase.FHIRValidationError</p>\n<p>fhirclient.models.fhirabstractbase.FHIRValidationError: {root}: 'Non-optional property \"type\" on &lt;fhirclient.models.bundle.Bundle object at 0x101ff0ac8&gt; is missing'</p>",
        "id": 153930786,
        "sender_full_name": "Eric Haas",
        "timestamp": 1516920699
    },
    {
        "content": "<p>the bundles I created all have the type elements and I reverted back to a working version and can't find the source.  Anyway is there a way to turn off the validation?</p>",
        "id": 153930787,
        "sender_full_name": "Eric Haas",
        "timestamp": 1516920778
    },
    {
        "content": "<p>It looks like you can pass a strict=False to the initialisation and it will probably work (ie _bundle = bundle.Bundle(jsondict=dict(XX), strict=False) - it defaults to True.  type is a reserved word in python so their may be some clash on that maybe?</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">c</span> <span class=\"o\">=</span> <span class=\"n\">bundle</span><span class=\"o\">.</span><span class=\"n\">Bundle</span><span class=\"p\">(</span><span class=\"n\">jsondict</span><span class=\"o\">=</span><span class=\"nb\">dict</span><span class=\"p\">(</span><span class=\"nb\">type</span><span class=\"o\">=</span><span class=\"s2\">&quot;sausage&quot;</span><span class=\"p\">,</span> <span class=\"n\">identifier</span><span class=\"o\">=</span><span class=\"nb\">dict</span><span class=\"p\">(</span><span class=\"n\">system</span><span class=\"o\">=</span><span class=\"s2\">&quot;https://example.org/glow&quot;</span><span class=\"p\">,</span> <span class=\"n\">value</span><span class=\"o\">=</span><span class=\"s1\">&#39;my_erroneous_bundle&#39;</span><span class=\"p\">)))</span>\n<span class=\"n\">c</span> <span class=\"o\">=</span> <span class=\"n\">bundle</span><span class=\"o\">.</span><span class=\"n\">Bundle</span><span class=\"p\">(</span><span class=\"n\">jsondict</span><span class=\"o\">=</span><span class=\"nb\">dict</span><span class=\"p\">(</span><span class=\"n\">identifier</span><span class=\"o\">=</span><span class=\"nb\">dict</span><span class=\"p\">(</span><span class=\"n\">system</span><span class=\"o\">=</span><span class=\"s2\">&quot;https://example.org/glow&quot;</span><span class=\"p\">,</span> <span class=\"n\">value</span><span class=\"o\">=</span><span class=\"s1\">&#39;my_erroneous_bundle&#39;</span><span class=\"p\">)))</span>\n<span class=\"n\">Traceback</span> <span class=\"p\">(</span><span class=\"n\">most</span> <span class=\"n\">recent</span> <span class=\"n\">call</span> <span class=\"n\">last</span><span class=\"p\">):</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;&lt;input&gt;&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">1</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"o\">&lt;</span><span class=\"n\">module</span><span class=\"o\">&gt;</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;/Users/glow/Documents/Devel/PycharmProjects/fhirton/models/models_r4/bundle.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">55</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"fm\">__init__</span>\n    <span class=\"nb\">super</span><span class=\"p\">(</span><span class=\"n\">Bundle</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"n\">jsondict</span><span class=\"o\">=</span><span class=\"n\">jsondict</span><span class=\"p\">,</span> <span class=\"n\">strict</span><span class=\"o\">=</span><span class=\"n\">strict</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;/Users/glow/Documents/Devel/PycharmProjects/fhirton/models/models_r4/resource.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">42</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"fm\">__init__</span>\n    <span class=\"nb\">super</span><span class=\"p\">(</span><span class=\"n\">Resource</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"n\">jsondict</span><span class=\"o\">=</span><span class=\"n\">jsondict</span><span class=\"p\">,</span> <span class=\"n\">strict</span><span class=\"o\">=</span><span class=\"n\">strict</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;/Users/glow/Documents/Devel/PycharmProjects/fhirton/models/models_r4/fhirabstractresource.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">25</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"fm\">__init__</span>\n    <span class=\"nb\">super</span><span class=\"p\">(</span><span class=\"n\">FHIRAbstractResource</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"n\">jsondict</span><span class=\"o\">=</span><span class=\"n\">jsondict</span><span class=\"p\">,</span> <span class=\"n\">strict</span><span class=\"o\">=</span><span class=\"n\">strict</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;/Users/glow/Documents/Devel/PycharmProjects/fhirton/models/models_r4/fhirabstractbase.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">61</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"fm\">__init__</span>\n    <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">update_with_json</span><span class=\"p\">(</span><span class=\"n\">jsondict</span><span class=\"p\">)</span>\n  <span class=\"n\">File</span> <span class=\"s2\">&quot;/Users/glow/Documents/Devel/PycharmProjects/fhirton/models/models_r4/fhirabstractbase.py&quot;</span><span class=\"p\">,</span> <span class=\"n\">line</span> <span class=\"mi\">226</span><span class=\"p\">,</span> <span class=\"ow\">in</span> <span class=\"n\">update_with_json</span>\n    <span class=\"k\">raise</span> <span class=\"n\">FHIRValidationError</span><span class=\"p\">(</span><span class=\"n\">errs</span><span class=\"p\">)</span>\n<span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">models_r4</span><span class=\"o\">.</span><span class=\"n\">fhirabstractbase</span><span class=\"o\">.</span><span class=\"n\">FHIRValidationError</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"n\">root</span><span class=\"p\">}:</span>\n  <span class=\"s1\">&#39;Non-optional property &quot;type&quot; on &lt;models.models_r4.bundle.Bundle object at 0x10b463ba8&gt; is missing&#39;</span>\n<span class=\"n\">c</span> <span class=\"o\">=</span> <span class=\"n\">bundle</span><span class=\"o\">.</span><span class=\"n\">Bundle</span><span class=\"p\">(</span><span class=\"n\">jsondict</span><span class=\"o\">=</span><span class=\"nb\">dict</span><span class=\"p\">(</span><span class=\"n\">identifier</span><span class=\"o\">=</span><span class=\"nb\">dict</span><span class=\"p\">(</span><span class=\"n\">system</span><span class=\"o\">=</span><span class=\"s2\">&quot;https://example.org/glow&quot;</span><span class=\"p\">,</span> <span class=\"n\">value</span><span class=\"o\">=</span><span class=\"s1\">&#39;my_erroneous_bundle&#39;</span><span class=\"p\">)),</span> <span class=\"n\">strict</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">)</span>\n<span class=\"n\">WARNING</span><span class=\"p\">:</span><span class=\"n\">root</span><span class=\"p\">:</span><span class=\"s1\">&#39;Non-optional property &quot;type&quot; on &lt;models.models_r4.bundle.Bundle object at 0x10b456dd8&gt; is missing&#39;</span>\n</pre></div>",
        "id": 153930815,
        "sender_full_name": "Geoff Low",
        "timestamp": 1516969828
    }
]