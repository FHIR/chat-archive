[
    {
        "content": "<p>Zulip bots are written in python.. which I don't know. Does someone here want to hp me write a bot that integrates the FHIR validator into Zulip?</p>",
        "id": 192512475,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1585739702
    },
    {
        "content": "<p>(As a minor clarification, Zulip has an http API and bots can be written in any language, though indeed the supported client libraries are in Python.)</p>",
        "id": 192526406,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1585747465
    },
    {
        "content": "<p>I am a beginner. If nobody else shows up, I'll help - but it's best for everyone if I stay away from coding.. <br>\n<span class=\"user-mention\" data-user-id=\"196255\">@Ilya Beda</span> <span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> <span class=\"user-mention\" data-user-id=\"191339\">@Pascal Pfiffner</span></p>",
        "id": 192548391,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1585755839
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> I am ready to help you! Could you provide a bit more details?</p>",
        "id": 192619119,
        "sender_full_name": "Ilya Beda",
        "timestamp": 1585800749
    },
    {
        "content": "<p>great. So we want to write a Zulip bot such that whenever anyone tags @validator in their message, the bot takes the message and the previous message and somehow gets it to a java process that running in the cloud somewhere</p>",
        "id": 192619482,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1585801313
    },
    {
        "content": "<p>I'm not quite clear how the best way to set this up is</p>",
        "id": 192619523,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1585801327
    },
    {
        "content": "<p>Ok, I will review existing documentation and propose the solution.</p>",
        "id": 192620487,
        "sender_full_name": "Ilya Beda",
        "timestamp": 1585802701
    },
    {
        "content": "<p>wonderful - thanks</p>",
        "id": 192620619,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1585802855
    },
    {
        "content": "<p>FYI: <a href=\"https://chat.zulip.org/#narrow/stream/2-general/topic/Validating.20examples\" title=\"https://chat.zulip.org/#narrow/stream/2-general/topic/Validating.20examples\">https://chat.zulip.org/#narrow/stream/2-general/topic/Validating.20examples</a></p>",
        "id": 192649202,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1585825260
    },
    {
        "content": "<p>i really thought this was an april fool's joke.  (especially because you spelled Zulip wrong in the topic title)</p>",
        "id": 192675324,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1585838696
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179218-python/topic/Zilip.20Bot/near/192619482\" title=\"#narrow/stream/179218-python/topic/Zilip.20Bot/near/192619482\">said</a>:</p>\n<blockquote>\n<p>great. So we want to write a Zulip bot such that whenever anyone tags @validator in their message, the bot takes the message and the previous message and somehow gets it to a java process that running in the cloud somewhere</p>\n</blockquote>\n<p>do these have to be in different messages?<br>\nMay be simpler (implementation-wise) to just do it all in one message like this:</p>",
        "id": 193028658,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1586173139
    },
    {
        "content": "<p>hey @ validator</p>\n<div class=\"codehilite\"><pre><span></span>here&#39;s my json/xml\n</pre></div>",
        "id": 193029373,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1586173571
    },
    {
        "content": "<p>well, so I (or someone else) can also look at a message and say \"hey @ validator - look at that\"</p>",
        "id": 193030003,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1586174029
    },
    {
        "content": "<p>True. <br>\nIf we have them separate, we call the validator right after the content? In this case, the bot must see the previous message from that user.</p>",
        "id": 193030479,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1586174320
    },
    {
        "content": "<p>But if we put them together, we could simply quote messages, no?</p>",
        "id": 193030496,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1586174335
    },
    {
        "content": "<p>yes - easier.</p>",
        "id": 193032722,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1586175754
    },
    {
        "content": "<p>I'd suggest putting something inline, like <br>\n<a href=\"/user_uploads/10155/ukKDQFyw1B7Pj-5QyDzcGlyL/image.png\" title=\"image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/ukKDQFyw1B7Pj-5QyDzcGlyL/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/ukKDQFyw1B7Pj-5QyDzcGlyL/image.png\"></a></div>",
        "id": 193090646,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1586201900
    },
    {
        "content": "<p>(or more generally: make it clear <em>exactly</em> what is going to be validated; this could be in addition to a bot-mention, or just have the bot always lurking)</p>",
        "id": 193090775,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1586201975
    },
    {
        "content": "<p>I'm expecting that people won't do that, and one of the power users will need to ask for it to be done. Hence my interest in the previous message</p>",
        "id": 193091261,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1586202210
    },
    {
        "content": "<p>Zulip bot API looks very nice.<br>\nI setup dev infrastructure and start experimenting with it.</p>\n<p>I will start with a simple implementation.</p>\n<p>You need to mention a bot by name and provide JSON+FHIR to validate, the bot will respond with validation result.</p>\n<div class=\"codehilite\"><pre><span></span>@validate\n{&quot;resourceType&quot;: &quot;Patient&quot;}\n</pre></div>\n\n\n<p>Then I will improve this scenario to allow bot to validate the previous message in the chat.</p>",
        "id": 193323324,
        "sender_full_name": "Ilya Beda",
        "timestamp": 1586354243
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> What web service bot should use for json validation?</p>",
        "id": 193323463,
        "sender_full_name": "Ilya Beda",
        "timestamp": 1586354290
    },
    {
        "content": "<p>we're still working on the service.</p>",
        "id": 193372172,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1586376486
    },
    {
        "content": "<p>so I'll give you a URL but it will be this operation, I think: <a href=\"http://hl7.org/fhir/resource-operation-validate.html\" title=\"http://hl7.org/fhir/resource-operation-validate.html\">http://hl7.org/fhir/resource-operation-validate.html</a></p>",
        "id": 193372346,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1586376591
    },
    {
        "content": "<p>I think that the bot should just report counts: 1 Error, 2 warnings, 0 Hints (details) where details is a URL that links to <code>OperationOutcome.meta.source</code></p>",
        "id": 193372510,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1586376684
    },
    {
        "content": "<p>Does this mean a user could follow the details link to see a full operation outcome?</p>",
        "id": 193380504,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1586381099
    },
    {
        "content": "<p>yes. or an html presentation of that</p>",
        "id": 193381209,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1586381579
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> <br>\nI implemented the first simple version of the bot.</p>\n<p>Please join <a href=\"#narrow/stream/233901-test-validator\" title=\"#narrow/stream/233901-test-validator\">https://chat.fhir.org/#narrow/stream/233901-test-validator</a> for bot testing. You can find example of bot usage there.</p>\n<p>Please leave your feedback at GitHub issues <a href=\"https://github.com/beda-software/fhir-validator/issues\" title=\"https://github.com/beda-software/fhir-validator/issues\">https://github.com/beda-software/fhir-validator/issues</a></p>",
        "id": 193914812,
        "sender_full_name": "Ilya Beda",
        "timestamp": 1586878167
    },
    {
        "content": "<p>Does the Zulip bot API make it possible to interrupt someone who is asking a question in <code>#Announcements</code>?  Kidding.  Not Kidding.</p>",
        "id": 194448751,
        "sender_full_name": "Carl Anderson",
        "timestamp": 1587133894
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192151\">@Tim Abbott</span> this is actually an interesting question - have you considered it?</p>",
        "id": 194502551,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587159137
    },
    {
        "content": "<p>We do have a feature to limit who can post to <a class=\"stream\" data-stream-id=\"179240\" href=\"/#narrow/stream/179240-Announcements\">#Announcements</a>.</p>",
        "id": 194504117,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1587159941
    },
    {
        "content": "<p>And there's work on making a better version of that which isn't just limiting senders to organization administrators.</p>",
        "id": 194504376,
        "sender_full_name": "Tim Abbott",
        "timestamp": 1587160076
    },
    {
        "content": "<p>For #announcements it would be sufficient yo only allow \"frequent users\" of <a href=\"http://chat.fhir.org\" title=\"http://chat.fhir.org\">chat.fhir.org</a>. Those that are new are unlikely to know the our 'customary rules' when it comes to #announcements.</p>",
        "id": 194531821,
        "sender_full_name": "René Spronk",
        "timestamp": 1587196288
    },
    {
        "content": "<p>Agreed, that'd be really helpful <span class=\"user-mention\" data-user-id=\"191372\">@René Spronk</span>. (Speaks to a broader concept of cred/karma, but wouldn't need to go very far in that direction.)</p>",
        "id": 194858102,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1587501396
    },
    {
        "content": "<p>age of account may not be perfect, but I suspect it would work much more often than not.  And has a low impact on usability</p>",
        "id": 194927135,
        "sender_full_name": "John Moehrke",
        "timestamp": 1587560917
    }
]