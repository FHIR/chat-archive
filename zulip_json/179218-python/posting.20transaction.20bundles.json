[
    {
        "content": "<p>How do I post a transaction bundle in python?</p>\n<div class=\"codehilite\"><pre><span></span>settings = {\n    &#39;app_id&#39;: &#39;my_web_app&#39;,\n    &#39;api_base&#39;: &#39;http://fhirtest.b12x.org/r3&#39;\n}\nsmart = client.FHIRClient(settings=settings)\nresponse = bundle.create(smart.server)\n</pre></div>\n\n\n<p>will POST to the bundle endpoint, but not to the base url where it needs to go for transactions to be processed.</p>",
        "id": 153977334,
        "sender_full_name": " Bob Milius",
        "timestamp": 1532363430
    },
    {
        "content": "<p><code>requests.exceptions.HTTPError: 422 Client Error: Unprocessable Entity for url: http://fhirtest.b12x.org/r3/Bundle</code></p>",
        "id": 153977335,
        "sender_full_name": " Bob Milius",
        "timestamp": 1532363535
    },
    {
        "content": "<p>Indeed, <code>create</code> always posts to base_url + resource_type, you'll need to do that manually. Look at <code>def create(...)</code> in <code>fhirabstractresource.py</code> (9 lines of code, around line 114) and create a method that does the same, expect using <code>None</code> instead of <code>self.relativeBase()</code> in the <code>post_json</code> call.</p>",
        "id": 153977343,
        "sender_full_name": "Pascal Pfiffner",
        "timestamp": 1532366826
    },
    {
        "content": "<p>*except</p>",
        "id": 153977344,
        "sender_full_name": "Pascal Pfiffner",
        "timestamp": 1532366840
    },
    {
        "content": "<p>Thanks! <span class=\"user-mention\" data-user-id=\"191339\">@Pascal Pfiffner</span></p>",
        "id": 153977351,
        "sender_full_name": " Bob Milius",
        "timestamp": 1532368165
    },
    {
        "content": "<p>If we created a new method, say \"create_bundle\", then it would be accessible to all resource models even though it should only be used with a bundle resource. Does checking to see if it's a Bundle transaction make sense instead of creating a new method? Adding the following lines of code to the <code>create</code> method works.</p>\n<div class=\"codehilite\"><pre><span></span>    base_url = self.relativeBase()\n    if(self.resource_type == &quot;Bundle&quot;\n       and self.type == &quot;transaction&quot;):\n        base_url = None\n</pre></div>",
        "id": 153977358,
        "sender_full_name": "Mike Halagan",
        "timestamp": 1532370566
    },
    {
        "content": "<p>should also test for self.type == \"batch\" which should also be processed</p>",
        "id": 153977365,
        "sender_full_name": " Bob Milius",
        "timestamp": 1532372164
    }
]