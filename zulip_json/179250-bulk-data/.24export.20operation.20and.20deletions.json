[
    {
        "content": "<p>When using the resource type based $export operations since a timestamp, could deletions be included in a bundle file in the output called <br>\n[resource type]_deletions.json for each resource type?</p>",
        "id": 158579439,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1550191643
    },
    {
        "content": "<p>Well, the filenames themselves don't have meaning, but we could specify another top-level array alongside outputs if we wanted to convey this. Wouldn't you also want a serious intermediate states too, for resources that had been altered _since your last request?</p>",
        "id": 158581765,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1550194536
    },
    {
        "content": "<p>It's a question of is this the history, or the latest (where deleted is the latest) I'm content with this just being the most recent version (assuming it was deleted and not re-created)</p>",
        "id": 158582138,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1550195160
    },
    {
        "content": "<p>I do like the idea of this being another array in the output though - especially since the content is probably json, not ndjson as it is a bundle, and not a list of resources. And they wouldn't have any links inside?</p>",
        "id": 158582398,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1550195523
    },
    {
        "content": "<p>I think most \"deleted\" is not a physical delete but a status update from active to \"non-active\". $export \"deleted\" actually mean $export latest _history item. Is my understanding correct?</p>",
        "id": 158619480,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1550242389
    },
    {
        "content": "<p>The language there about \"status\" is confusing me; I agree it's about conveying the same kind of information you'd have in a _historu bundle.</p>",
        "id": 158621695,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1550244086
    },
    {
        "content": "<p>There is also the <span class=\"user-mention\" data-user-id=\"191318\">@nicola (RIO/SS)</span> use case about being able to convey which sets of changes occurred as part of the same transaction.</p>",
        "id": 158621719,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1550244120
    },
    {
        "content": "<p>This doesn't handle the issue <span class=\"user-mention\" data-user-id=\"191318\">@nicola (RIO/SS)</span> describes.</p>",
        "id": 158654284,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1550268728
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191506\">@Yunwei Wang</span> is correct, this usually isn't an issue with directory content, as they should be marking as inactive, or end-dating entries. But deletions do happen, and can be used to clear out over stale content occasionally.</p>",
        "id": 158656888,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1550271015
    },
    {
        "content": "<p>I've updated the proposal making the deletions property the same as the others, and made the note that total is the number of deletion bundles, not the number of resources deleted (which would be the sum of the bundle totals).<br>\nUnless we decided to make each bundle contain only 1 deletion - which I guess we could do, would just make the file larger.</p>",
        "id": 158656940,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1550271113
    },
    {
        "content": "<p>Interesting, so you'd have multiple bundles each of which could capture an arbitrary number of deletes?</p>",
        "id": 158664489,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1550278594
    },
    {
        "content": "<p>(for consistency, should say <code>deletion</code> rather than <code>deletions</code> as the field name)</p>",
        "id": 158664508,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1550278617
    },
    {
        "content": "<p>Also given the bundle approach, this could communicate more than just deletions; might even generalize the name to something like <code>history</code>.</p>",
        "id": 158664660,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1550278793
    },
    {
        "content": "<p>I thought the reason we did ndjson and only single type per file to make parsing easier for some reason.<br>\nAnd history could still be done with the structure we have now.</p>",
        "id": 158673351,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1550287884
    },
    {
        "content": "<p>I really don't think we want to conflate history and $export. I don't understand where this list of deletions is supposed to go?</p>",
        "id": 158743914,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1550410564
    },
    {
        "content": "<p>oh ok found the other thread. I don't think it should be in the status json.  it should be in some downloadable file. though no obvious format definition jumps out</p>",
        "id": 158743975,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1550410701
    },
    {
        "content": "<p>The file(s) that have the deletions in it are referenced in the status json, so that you can download those. And suggested  bundle format as the way to define which ones were deleted (as per history bundles).<br>\nAnd if you want to ignore the deletions, don't download them (as they are referenced separately to the resource files), and is only relevant if using the _since parameter.</p>",
        "id": 158762763,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1550444257
    },
    {
        "content": "<p>an alternative is to use Provenance of Removal -- <a href=\"http://build.fhir.org/provenance.html#removal\" target=\"_blank\" title=\"http://build.fhir.org/provenance.html#removal\">http://build.fhir.org/provenance.html#removal</a></p>",
        "id": 159070854,
        "sender_full_name": "John Moehrke",
        "timestamp": 1550758913
    },
    {
        "content": "<p>That's interesting and pretty clean</p>",
        "id": 159071237,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1550759162
    },
    {
        "content": "<p>That's not bad, I'll take a look at what that would be like.</p>",
        "id": 159102374,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1550781498
    },
    {
        "content": "<p>Resurrecting this - is there a consensus on what's the best way to export what has been deleted?</p>",
        "id": 167870263,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1560273334
    }
]