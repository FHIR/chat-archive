[
    {
        "content": "<p>At <a href=\"https://hl7.org/fhir/uv/bulkdata/operations/index.html\" title=\"https://hl7.org/fhir/uv/bulkdata/operations/index.html\">https://hl7.org/fhir/uv/bulkdata/operations/index.html</a> it says:</p>\n<blockquote>\n<p>To declare conformance with this IG, a server should include the following URL in its own CapabilityStatement.instantiates: <a href=\"http://www.hl7.org/fhir/bulk-data/CapabilityStatement-bulk-data.html\" title=\"http://www.hl7.org/fhir/bulk-data/CapabilityStatement-bulk-data.html\">http://www.hl7.org/fhir/bulk-data/CapabilityStatement-bulk-data.html</a></p>\n</blockquote>",
        "id": 192586799,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1585772149
    },
    {
        "content": "<p>Per the core spec, the value of that field should be a canonical uri for the CapabilityStatement.  It seems weird to me that it ends in <code>.html</code> and even weirder given that this URL is not dereferencable</p>",
        "id": 192586912,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1585772201
    },
    {
        "content": "<p>maybe it should be <code>https://hl7.org/fhir/uv/bulkdata|1.0.0</code> ?</p>",
        "id": 192586978,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1585772234
    },
    {
        "content": "<p>agree it should not include .html</p>",
        "id": 192587237,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1585772352
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191414\">@Dan Gottlieb</span> agree this one is worthy of a jira issue? ^</p>",
        "id": 192666395,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1585834865
    },
    {
        "content": "<p>Definitely - do you mind opening one?</p>",
        "id": 192668491,
        "sender_full_name": "Dan Gottlieb",
        "timestamp": 1585835863
    },
    {
        "content": "<p>This feels extremely familiar. Either we had the same bug on another page, or we failed to fix it.</p>",
        "id": 192668612,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1585835906
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> is there a standard approach for incorporating the IG version in the capability url? I looked at a few IGs and most don't include the version, but US Core uses a dash followed by the version number: <a href=\"http://hl7.org/fhir/us/core/ImplementationGuide/hl7.fhir.us.core-3.1.0\" title=\"http://hl7.org/fhir/us/core/ImplementationGuide/hl7.fhir.us.core-3.1.0\">http://hl7.org/fhir/us/core/ImplementationGuide/hl7.fhir.us.core-3.1.0</a></p>",
        "id": 192668636,
        "sender_full_name": "Dan Gottlieb",
        "timestamp": 1585835918
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> I think this was fixed in the capability statement JSON, but not the html page <span aria-label=\"rolling eyes\" class=\"emoji emoji-1f644\" role=\"img\" title=\"rolling eyes\">:rolling_eyes:</span></p>",
        "id": 192668803,
        "sender_full_name": "Dan Gottlieb",
        "timestamp": 1585835999
    },
    {
        "content": "<p>Ah, I didn't even realize there was a CapabilityStatement shipped with the bulk data IG...how do I get to that?</p>",
        "id": 192671320,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1585837115
    },
    {
        "content": "<p>Opened <a href=\"http://jira.hl7.org/browse/FHIR-26683\" title=\"http://jira.hl7.org/browse/FHIR-26683\">FHIR#26683</a>.</p>\n<blockquote>\n<p>US Core uses a dash followed by the version number: <a href=\"http://hl7.org/fhir/us/core/ImplementationGuide/hl7.fhir.us.core-3.1.0\" title=\"http://hl7.org/fhir/us/core/ImplementationGuide/hl7.fhir.us.core-3.1.0\">http://hl7.org/fhir/us/core/ImplementationGuide/hl7.fhir.us.core-3.1.0</a></p>\n</blockquote>\n<p>IMHO including the version in the uri portion of the canonical is bad practice...canonical has a built-in way to support versioned references and it involves appending the version after a <code>|</code></p>",
        "id": 192672193,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1585837472
    },
    {
        "content": "<p>And yeah, just double-checked, <a href=\"http://hl7.org/fhir/us/core/STU3.1/ImplementationGuide-hl7.fhir.us.core.html\" title=\"http://hl7.org/fhir/us/core/STU3.1/ImplementationGuide-hl7.fhir.us.core.html\">http://hl7.org/fhir/us/core/STU3.1/ImplementationGuide-hl7.fhir.us.core.html</a> doesn't include the version after a dash.  Do you know where you saw that?</p>",
        "id": 192672454,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1585837591
    },
    {
        "content": "<p><a href=\"http://hl7.org/fhir/us/core/STU3.1/CapabilityStatement-us-core-server.xml.html\" title=\"http://hl7.org/fhir/us/core/STU3.1/CapabilityStatement-us-core-server.xml.html\">http://hl7.org/fhir/us/core/STU3.1/CapabilityStatement-us-core-server.xml.html</a> agrees:</p>\n<div class=\"codehilite\"><pre><span></span>  &lt;url value=&quot;http://hl7.org/fhir/us/core/CapabilityStatement/us-core-server&quot;/&gt;\n  &lt;version value=&quot;3.1.0&quot;/&gt;\n</pre></div>",
        "id": 192672702,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1585837689
    },
    {
        "content": "<p>Interesting! The dashed version is used where the US Core server CapabilityStatement references the the US Core IG in <a href=\"http://hl7.org/fhir/us/core/STU3.1/CapabilityStatement-us-core-server.json.html\" title=\"http://hl7.org/fhir/us/core/STU3.1/CapabilityStatement-us-core-server.json.html\">http://hl7.org/fhir/us/core/STU3.1/CapabilityStatement-us-core-server.json.html</a> </p>\n<div class=\"codehilite\"><pre><span></span>  &quot;implementationGuide&quot; : [\n    &quot;http://hl7.org/fhir/us/core/ImplementationGuide/hl7.fhir.us.core-3.1.0&quot;\n  ],\n</pre></div>",
        "id": 192673852,
        "sender_full_name": "Dan Gottlieb",
        "timestamp": 1585838118
    },
    {
        "content": "<p>smells like another bug...care to open that one against US Core or should i have a go?</p>",
        "id": 192675580,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1585838808
    },
    {
        "content": "<p>I can follow up on US Core, but just taking out the version isn't a great solution. Fundamentally it seems like version numbers should be baked into the IG canonical urls (preferably in a de-referenceable manner) so that CapabilityStatements are declaring support for a particular IG version (eg. <a href=\"https://hl7.org/fhir/uv/bulkdata/1.0.0\" title=\"https://hl7.org/fhir/uv/bulkdata/1.0.0\">https://hl7.org/fhir/uv/bulkdata/1.0.0</a>).</p>",
        "id": 192677597,
        "sender_full_name": "Dan Gottlieb",
        "timestamp": 1585839629
    },
    {
        "content": "<p>thats why i say it should follow the canonical pattern:  uri|version</p>",
        "id": 192677976,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1585839788
    },
    {
        "content": "<p><code>https://hl7.org/fhir/uv/bulkdata|1.0.0</code></p>",
        "id": 192677998,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1585839801
    },
    {
        "content": "<p><code>http://hl7.org/fhir/us/core/ImplementationGuide/hl7.fhir.us.core|3.1.0</code></p>",
        "id": 192678030,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1585839815
    },
    {
        "content": "<p>the uri part of it should be dereferencable</p>",
        "id": 192678184,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1585839856
    },
    {
        "content": "<p>but will take you to the \"latest\"</p>",
        "id": 192678194,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1585839861
    },
    {
        "content": "<p>Why not include the version in the URL though, so it takes you to the actual version that was implemented?</p>",
        "id": 192679016,
        "sender_full_name": "Dan Gottlieb",
        "timestamp": 1585840155
    },
    {
        "content": "<p>Ideally all the things that we write down would resolve. Version references would be referencable and resolve to the right version. It's not hard to describe \"good\" behavior... but I don't know that we have control over the HL7 web server in a way that permits all this to happen correctly. I know Grahame has done quite a bit on this front, but also hit limitations.</p>",
        "id": 192679393,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1585840272
    },
    {
        "content": "<blockquote>\n<p>Why not include the version in the URL though, so it takes you to the actual version that was implemented?</p>\n</blockquote>\n<p>because its a canonical reference and the community had decided that those should follow the pattern i mentioned above:  <a href=\"https://www.hl7.org/fhir/references.html#canonical\" title=\"https://www.hl7.org/fhir/references.html#canonical\">https://www.hl7.org/fhir/references.html#canonical</a></p>\n<blockquote>\n<p>I know Grahame has done quite a bit on this front, but also hit limitations.</p>\n</blockquote>\n<p>Yeah, I'm guessing its not possible, but it would be cool if a canonical uri could dereference to the version being referenced; i.e. <code>https://hl7.org/fhir/uv/bulkdata|1.0.0</code> -&gt; <code>https://hl7.org/fhir/uv/bulkdata/1.0.0</code> -&gt; <code>http://hl7.org/fhir/uv/bulkdata/STU1</code></p>",
        "id": 192681155,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1585840714
    },
    {
        "content": "<p>I think Dan wasn't saying \"why not include the version as a path component\" -- I took him to be saying \"let's make sure not to propagate versionless references\"</p>",
        "id": 192681761,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1585840897
    },
    {
        "content": "<p>Including a version with a pipe delimiter avoids propagating versionless references.</p>",
        "id": 192681811,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1585840916
    },
    {
        "content": "<p>(Gosh I'm feeling bad about these double negatives, but it's hard to write precisely here.)</p>\n<p>Basically I think Dan was saying that for purposes of conveying <em>enough</em> information:</p>\n<ul>\n<li>Bad: \"<a href=\"https://hl7.org/fhir/uv/bulkdata\" title=\"https://hl7.org/fhir/uv/bulkdata\">https://hl7.org/fhir/uv/bulkdata</a>\"</li>\n<li>OK: \"<a href=\"https://hl7.org/fhir/uv/bulkdata|1.0.0\" title=\"https://hl7.org/fhir/uv/bulkdata|1.0.0\">https://hl7.org/fhir/uv/bulkdata|1.0.0</a>\"</li>\n<li>OK: \"<a href=\"https://hl7.org/fhir/uv/bulkdata/1.0.0\" title=\"https://hl7.org/fhir/uv/bulkdata/1.0.0\">https://hl7.org/fhir/uv/bulkdata/1.0.0</a>\"</li>\n</ul>\n<p>... am I reading you right <span class=\"user-mention\" data-user-id=\"191414\">@Dan Gottlieb</span> ?</p>",
        "id": 192681996,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1585840986
    },
    {
        "content": "<p>Yep, exactly (sorry, I expressed the idea poorly)! I don't have a preference between the latter two of Josh's examples, though if one could be made de-referenceable on the HL7 server, that would get my vote for a best practice :)</p>",
        "id": 192682513,
        "sender_full_name": "Dan Gottlieb",
        "timestamp": 1585841208
    },
    {
        "content": "<p>ok, makes sense.  and i think my opinion was already clear, but i'll say again anyway; i think fhir core says <code>https://hl7.org/fhir/uv/bulkdata|1.0.0</code> is \"correct\" and <code>https://hl7.org/fhir/uv/bulkdata/1.0.0</code> is not (unless you make that the value of the CapabilityStatement.url field as well, which does not seem right to me)</p>",
        "id": 192698372,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1585847862
    },
    {
        "content": "<p>Yeah, I agree that that the pipe delimited version fits with the FHIR url rules. In the next update, I'll  go through and try to align everything between the html docs, the canonical ig url, and the capability statement url and references.</p>",
        "id": 192702891,
        "sender_full_name": "Dan Gottlieb",
        "timestamp": 1585850055
    },
    {
        "content": "<p>I think I can make |version work on <a href=\"http://hl7.org\" title=\"http://hl7.org\">hl7.org</a>, but I'd have to check</p>",
        "id": 192716989,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1585857144
    },
    {
        "content": "<p>I'm not sure what's the deal with the US core approach</p>",
        "id": 192717023,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1585857161
    },
    {
        "content": "<p>I don't remember the conversation on why we picked what we did in US Core - Do you <span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> ?</p>",
        "id": 192742729,
        "sender_full_name": "Brett Marquard",
        "timestamp": 1585871478
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191676\">@Lee Surprenant</span>  suggestion for bulk seems logical for US Core also. If you would be willing a tracker would be great.</p>",
        "id": 192742774,
        "sender_full_name": "Brett Marquard",
        "timestamp": 1585871513
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 192744842,
        "sender_full_name": "Eric Haas",
        "timestamp": 1585873182
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 192744853,
        "sender_full_name": "Eric Haas",
        "timestamp": 1585873197
    },
    {
        "content": "<p>When we were publishing the IG \"<a href=\"http://hl7.org/fhir/us/core/ImplementationGuide/hl7.fhir.us.core|3.1.0\" title=\"http://hl7.org/fhir/us/core/ImplementationGuide/hl7.fhir.us.core|3.1.0\">http://hl7.org/fhir/us/core/ImplementationGuide/hl7.fhir.us.core|3.1.0</a>\"  generated a qa error because the package file listed it as \"<a href=\"http://hl7.org/fhir/us/core/ImplementationGuide/hl7.fhir.us.core-3.1.0\" title=\"http://hl7.org/fhir/us/core/ImplementationGuide/hl7.fhir.us.core-3.1.0\">http://hl7.org/fhir/us/core/ImplementationGuide/hl7.fhir.us.core-3.1.0</a>\" </p>\n<p>We went with what worked at the time.</p>",
        "id": 192746735,
        "sender_full_name": "Eric Haas",
        "timestamp": 1585874792
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191410\">@Brett Marquard</span>  <a href=\"http://jira.hl7.org/browse/FHIR-26686\" title=\"http://jira.hl7.org/browse/FHIR-26686\">FHIR#26686</a></p>",
        "id": 192804774,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1585921146
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191315\">Josh Mandel</span> <a href=\"#narrow/stream/179250-bulk-data/topic/Canonical.20URI.20for.20the.20Bulk.20Data.20CapabilityStatement/near/192668612\" title=\"#narrow/stream/179250-bulk-data/topic/Canonical.20URI.20for.20the.20Bulk.20Data.20CapabilityStatement/near/192668612\">said</a>:</p>\n<blockquote>\n<p>This feels extremely familiar. Either we had the same bug on another page, or we failed to fix it.</p>\n</blockquote>\n<p>I raised this and some other CapabilityStatement issues during last September's connectathon. Here is the tracker item created: <a href=\"http://jira.hl7.org/browse/FHIR-24434\" title=\"http://jira.hl7.org/browse/FHIR-24434\">FHIR#24434</a></p>",
        "id": 193047729,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1586182527
    },
    {
        "content": "<p>So... this was part of what we decided to fix in our \"technical correction,\" and we updated the github repo (master branch) but never managed to publish the technical correction to <a href=\"http://hl7.org/fhir/uv/bulkdata\" title=\"http://hl7.org/fhir/uv/bulkdata\">http://hl7.org/fhir/uv/bulkdata</a>. <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> or <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>,  can you help us understand the steps involved in publishing these corrections that FHIR-I decided to address?</p>",
        "id": 193061682,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1586188198
    },
    {
        "content": "<p>Once made, we'll have to do a review of the updated spec to make sure it contains what it's supposed to (and only what it's supposed to), then submit a \"publication request\" to the TSC.  Template is here: <a href=\"https://confluence.hl7.org/display/HDH/How+to+Create+a+Publication+Request+from+Template\" title=\"https://confluence.hl7.org/display/HDH/How+to+Create+a+Publication+Request+from+Template\">https://confluence.hl7.org/display/HDH/How+to+Create+a+Publication+Request+from+Template</a></p>",
        "id": 193065832,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1586190039
    }
]