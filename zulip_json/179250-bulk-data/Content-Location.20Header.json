[
    {
        "content": "<p>Currently, in the documentation, we do not say whether the content-location returned from the initial request is absolute or relative. Nor do we say anything about whether it can be a reference to another server</p>",
        "id": 154001602,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1538232268
    },
    {
        "content": "<p>that just caught me out</p>",
        "id": 154001604,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1538232274
    },
    {
        "content": "<p>I propose that we clarify this explicitly - whether the Content-Location can be absolute or relative. There's 3 options:</p>",
        "id": 154001608,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1538232314
    },
    {
        "content": "<p>absolute: the content-location header must contain an absolute URL</p>",
        "id": 154001609,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1538232338
    },
    {
        "content": "<p>relative: the content location header must contain a relative URL</p>",
        "id": 154001610,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1538232350
    },
    {
        "content": "<p>either: the content location header can contain either, and we document this explicitly</p>",
        "id": 154001611,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1538232366
    },
    {
        "content": "<p>vote for your preference with a thumbs up</p>",
        "id": 154001613,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1538232377
    },
    {
        "content": "<p>Also, unless we decide it must be relative, we should add a rule that if the content-location refers to another server, the access tokens must work on that target server (no new authentication)</p>",
        "id": 154001616,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1538232471
    },
    {
        "content": "<p>(<a href=\"https://github.com/smart-on-fhir/fhir-bulk-data-docs/pull/75/files?short_path=1542050#diff-1542050bd54a14a0d9937b4f7db31db0\" target=\"_blank\" title=\"https://github.com/smart-on-fhir/fhir-bulk-data-docs/pull/75/files?short_path=1542050#diff-1542050bd54a14a0d9937b4f7db31db0\">https://github.com/smart-on-fhir/fhir-bulk-data-docs/pull/75/files?short_path=1542050#diff-1542050bd54a14a0d9937b4f7db31db0</a> has a preview of what this change look like if we go the \"absolute\" route)</p>",
        "id": 154001636,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1538233191
    },
    {
        "content": "<p>Merged!</p>",
        "id": 154001668,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1538234163
    },
    {
        "content": "<blockquote>\n<p>Also, unless we decide it must be relative, we should add a rule that if the content-location refers to another server, the access tokens must work on that target server (no new authentication)</p>\n</blockquote>\n<p>That seems like an unlikely to be true situation except in very constrained cases. Are we constraining this for short-term connectathon success, or long-term architecture?</p>",
        "id": 154002067,
        "sender_full_name": "John Moehrke",
        "timestamp": 1538247459
    },
    {
        "content": "<p>long term.</p>",
        "id": 154002203,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1538250772
    },
    {
        "content": "<p>why do you think that's unlikely?</p>",
        "id": 154002204,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1538250783
    },
    {
        "content": "<p>because a security token is often specific to the request context, which is going to be different when one requests information from another service. Epecially when two services are in two different organizations.</p>",
        "id": 154002231,
        "sender_full_name": "John Moehrke",
        "timestamp": 1538252296
    },
    {
        "content": "<p>well, that's the point; what we want is for the redirect from the async request to have a contract that it will not require different tokens</p>",
        "id": 154002248,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1538252905
    }
]