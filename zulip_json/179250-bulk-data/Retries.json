[
    {
        "content": "<p>We don't provide any advice for what to do if an attempted download fails at the end of the bulk data. Should a client retry? How many times?</p>",
        "id": 153963299,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1526571533
    },
    {
        "content": "<p>Should we have advice on this? Beyond \"use appropriate HTC status code to indicate and respond to errors\"? Some error statuses indicate that they are transient and retry makes sense;  others don't.</p>",
        "id": 153963302,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1526571943
    },
    {
        "content": "<p>I don't know. it feels as though it would be unfriendly to hammer on the server in case the problem resolved but it would also be unfriendly to the client to just give up... I'm not sure how to handle this .</p>",
        "id": 153963318,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1526574540
    },
    {
        "content": "<p>ok, so other than this, I - finally - have a general client that you can point to any server to do a bulk download. Let me know if you want me to point it to your server and try it out</p>",
        "id": 153963324,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1526575085
    },
    {
        "content": "<p>Sure - the front end to the SMART bulk data server is at <a href=\"https://bulk-data.smarthealthit.org/\" target=\"_blank\" title=\"https://bulk-data.smarthealthit.org/\">https://bulk-data.smarthealthit.org/</a></p>",
        "id": 153963332,
        "sender_full_name": "Dan Gottlieb",
        "timestamp": 1526581802
    },
    {
        "content": "<p>Dan, that server returns a json capability statement even if you ask for an XML one</p>",
        "id": 153963743,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1526669899
    },
    {
        "content": "<p>Yup, we only have json support implemented so far :)</p>",
        "id": 153963744,
        "sender_full_name": "Dan Gottlieb",
        "timestamp": 1526670089
    },
    {
        "content": "<p>(I think the \"fix\" is to return 406, and to ensure the Capability Statement represents this fact )</p>",
        "id": 153963745,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1526670110
    },
    {
        "content": "<p>yes.</p>",
        "id": 153963746,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1526670169
    },
    {
        "content": "<p>I made the request for xml by mistake, but you should return an error if you're not going to support xml</p>",
        "id": 153963747,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1526670190
    },
    {
        "content": "<p>also, this is a fragment of what you return for Group?_summary=true</p>",
        "id": 153963748,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1526670365
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><span class=\"s2\">&quot;entry&quot;</span><span class=\"err\">:</span> <span class=\"p\">[{</span>\n        <span class=\"nt\">&quot;resourceType&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Group&quot;</span><span class=\"p\">,</span>\n        <span class=\"nt\">&quot;id&quot;</span><span class=\"p\">:</span> <span class=\"mi\">1</span><span class=\"p\">,</span>\n        <span class=\"nt\">&quot;quantity&quot;</span><span class=\"p\">:</span> <span class=\"mi\">27</span><span class=\"p\">,</span>\n        <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Blue Cross Blue Shield&quot;</span><span class=\"p\">,</span>\n        <span class=\"nt\">&quot;text&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n            <span class=\"nt\">&quot;status&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;generated&quot;</span><span class=\"p\">,</span>\n            <span class=\"nt\">&quot;div&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;&lt;div xmlns=\\&quot;http://www.w3.org/1999/xhtml\\&quot;&gt;Blue Cross Blue Shield&lt;/div&gt;&quot;</span>\n        <span class=\"p\">},</span>\n        <span class=\"nt\">&quot;type&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;person&quot;</span><span class=\"p\">,</span>\n        <span class=\"nt\">&quot;actual&quot;</span><span class=\"p\">:</span> <span class=\"kc\">true</span>\n    <span class=\"p\">},</span>\n</pre></div>",
        "id": 153963749,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1526670369
    },
    {
        "content": "<p>this is not valid...</p>",
        "id": 153963750,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1526670374
    },
    {
        "content": "<p>so then I initiate a bulk data request, get a response, and then check on the task to see how it's going. I get this:</p>",
        "id": 153963751,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1526670574
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span>---------------------------\nDebugger Exception Notification\n---------------------------\nProject FHIRToolkitR3.exe raised exception class Exception with message &#39;&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot;&gt;\n&lt;head&gt;\n&lt;meta charset=&quot;utf-8&quot;&gt;\n&lt;title&gt;Error&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;pre&gt;Cannot GET /eyJlcnIiOiIiLCJwYWdlIjoxMDAwMCwiZHVyIjoxMCwidGx0IjoxNSwibSI6MX0/fhir/OiI2NDgwYWM4YjJjZDBmYjhkMjc3MTRiNzg2MGFlMzEyYTNkNGE5NzdkYTFlYzc3OTA2MGY0MWVkZGFiOTVlOWUzIiwicmVxdWVzdFN0YXJ0IjoxNTI2NjcwNTI3NjY1LCJzZWN1cmUiOmZhbHNlLCJyZXF1ZXN0IjoiaHR0cDovL2J1bGstZGF0YS5zbWFydGhlYWx0aGl0Lm9yZy9leUpsY25JaU9pSWlMQ0p3WVdkbElqb3hNREF3TUN3aVpIVnlJam94TUN3aWRHeDBJam94TlN3aWJTSTZNWDAvZmhpci9QYXRpZW50LyRleHBvcnQ_X291dHB1dEZvcm1hdD1hcHBsaWNhdGlvbi94LW5kanNvbiJ9/fhir/bulkstatus&lt;/pre&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n&#39;.\n---------------------------\nBreak   Continue   Help\n---------------------------\n</pre></div>",
        "id": 153963752,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1526670581
    },
    {
        "content": "<p>?</p>",
        "id": 153963753,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1526670598
    },
    {
        "content": "<p>Is this HTML from your FHIRToolkit app Grahame?</p>",
        "id": 153963754,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1526670861
    },
    {
        "content": "<p>So the issue with groups is the lack of support for the _summary parameter?</p>",
        "id": 153963756,
        "sender_full_name": "Dan Gottlieb",
        "timestamp": 1526671107
    },
    {
        "content": "<p>Also, that url doesn't look right (two /fhir path segments) - here's what the url I get from the content-location header looks like: <a href=\"https://bulk-data.smarthealthit.org/eyJlcnIiOiIiLCJwYWdlIjoxMDAwMCwiZHVyIjoxMCwidGx0IjoxNSwibSI6MSwiaWQiOiJmMjEyOGIxYThmY2ZkMmJmMjg0MTI0ZTNiZTZiMTBjZjY4YWM1OWE2MGI1MTc1NDc2Mjk1M2NkNTFkYjdmZWZkIiwicmVxdWVzdFN0YXJ0IjoxNTI2NjcxNDc5MDczLCJzZWN1cmUiOmZhbHNlLCJyZXF1ZXN0IjoiaHR0cDovL2J1bGstZGF0YS5zbWFydGhlYWx0aGl0Lm9yZy9leUpsY25JaU9pSWlMQ0p3WVdkbElqb3hNREF3TUN3aVpIVnlJam94TUN3aWRHeDBJam94TlN3aWJTSTZNWDAvZmhpci9QYXRpZW50LyRleHBvcnQifQ/fhir/bulkstatus\" target=\"_blank\" title=\"https://bulk-data.smarthealthit.org/eyJlcnIiOiIiLCJwYWdlIjoxMDAwMCwiZHVyIjoxMCwidGx0IjoxNSwibSI6MSwiaWQiOiJmMjEyOGIxYThmY2ZkMmJmMjg0MTI0ZTNiZTZiMTBjZjY4YWM1OWE2MGI1MTc1NDc2Mjk1M2NkNTFkYjdmZWZkIiwicmVxdWVzdFN0YXJ0IjoxNTI2NjcxNDc5MDczLCJzZWN1cmUiOmZhbHNlLCJyZXF1ZXN0IjoiaHR0cDovL2J1bGstZGF0YS5zbWFydGhlYWx0aGl0Lm9yZy9leUpsY25JaU9pSWlMQ0p3WVdkbElqb3hNREF3TUN3aVpIVnlJam94TUN3aWRHeDBJam94TlN3aWJTSTZNWDAvZmhpci9QYXRpZW50LyRleHBvcnQifQ/fhir/bulkstatus\">https://bulk-data.smarthealthit.org/eyJlcnIiOiIiLCJwYWdlIjoxMDAwMCwiZHVyIjoxMCwidGx0IjoxNSwibSI6MSwiaWQiOiJmMjEyOGIxYThmY2ZkMmJmMjg0MTI0ZTNiZTZiMTBjZjY4YWM1OWE2MGI1MTc1NDc2Mjk1M2NkNTFkYjdmZWZkIiwicmVxdWVzdFN0YXJ0IjoxNTI2NjcxNDc5MDczLCJzZWN1cmUiOmZhbHNlLCJyZXF1ZXN0IjoiaHR0cDovL2J1bGstZGF0YS5zbWFydGhlYWx0aGl0Lm9yZy9leUpsY25JaU9pSWlMQ0p3WVdkbElqb3hNREF3TUN3aVpIVnlJam94TUN3aWRHeDBJam94TlN3aWJTSTZNWDAvZmhpci9QYXRpZW50LyRleHBvcnQifQ/fhir/bulkstatus</a></p>",
        "id": 153963757,
        "sender_full_name": "Dan Gottlieb",
        "timestamp": 1526671569
    },
    {
        "content": "<p>no the HTML is from the server</p>",
        "id": 153963781,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1526818767
    },
    {
        "content": "<p>the issue with groups is that the bundle is not valid</p>",
        "id": 153963782,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1526818780
    },
    {
        "content": "<p>Ah, I see what you mean about the bundle now - we'll fix that.</p>",
        "id": 153963846,
        "sender_full_name": "Dan Gottlieb",
        "timestamp": 1526910355
    },
    {
        "content": "<p>Regarding the 404, is it possible the client is modifying the url it's getting from the header?</p>",
        "id": 153963847,
        "sender_full_name": "Dan Gottlieb",
        "timestamp": 1526910407
    },
    {
        "content": "<p>it's not supposed to be, but I'll double check</p>",
        "id": 153963856,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1526916340
    }
]