[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  where/how can someone register a backend services client for <a href=\"https://test.fhir.org/\" target=\"_blank\" title=\"https://test.fhir.org/\">https://test.fhir.org/</a></p>",
        "id": 153931776,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1517152346
    },
    {
        "content": "<p>you can do it one of 2 ways:<br>\n- log in in your browser through  <a href=\"https://test.fhir.org/r3\" target=\"_blank\" title=\"https://test.fhir.org/r3\">https://test.fhir.org/r3</a> and then chose 'register a client'<br>\n- use the dynamic registration end point at <a href=\"https://test.fhir.org/auth/register\" target=\"_blank\" title=\"https://test.fhir.org/auth/register\">https://test.fhir.org/auth/register</a></p>",
        "id": 153931781,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1517152478
    },
    {
        "content": "<p>For #1, I don't see \"register a client\"</p>",
        "id": 153931784,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1517152509
    },
    {
        "content": "<p>Is there something funny happening <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> ?</p>",
        "id": 153931785,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1517152581
    },
    {
        "content": "<p>did you go through oauth login first?</p>",
        "id": 153931786,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1517152583
    },
    {
        "content": "<p>there's always something funny happening</p>",
        "id": 153931788,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1517152618
    },
    {
        "content": "<p>I tried with and without.</p>",
        "id": 153931789,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1517152619
    },
    {
        "content": "<p>\"You can also Register a client\"</p>",
        "id": 153931790,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1517152662
    },
    {
        "content": "<p>For my public key, I think I can't paste in a PEM-formatted public key directly? But if I put it in a JWKS, is it a whole set as in <a href=\"https://tools.ietf.org/html/rfc7517#appendix-A.1\" target=\"_blank\" title=\"https://tools.ietf.org/html/rfc7517#appendix-A.1\">https://tools.ietf.org/html/rfc7517#appendix-A.1</a> or a single JWK? Which properties on the JWK are supported? e.g. bare values, or <code>x5c</code>, or <code>x5u</code>?</p>",
        "id": 153931825,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1517153667
    },
    {
        "content": "<p>no pEM - either DER or JWKS. If JWKS - I expect a whole set format wise, but you only need the actual key</p>",
        "id": 153931827,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1517153708
    },
    {
        "content": "<p>I expect the following properties:</p>",
        "id": 153931828,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1517153721
    },
    {
        "content": "<p>But if can I provide the key in a x5c property?</p>",
        "id": 153931829,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1517153727
    },
    {
        "content": "<p>I'm looking</p>",
        "id": 153931835,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1517153884
    },
    {
        "content": "<p>I think it's e d p</p>",
        "id": 153931836,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1517153887
    },
    {
        "content": "<p>OK -- now I've registered a client and I'm seeing, when I submit an access token request with the following JWT:</p>\n<div class=\"codehilite\"><pre><span></span>eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzUxMiJ9.eyJpc3MiOiJodHRwczovL2J1bGstZGF0YS1sb2FkZXIuc21hcnRoZWFsdGhpdC5vcmciLCJzdWIiOiJjLjIiLCJhdWQiOiJodHRwczovL3Rlc3QuZmhpci5vcmcvYXV0aDMvdG9rZW4iLCJleHAiOjE1MTc1OTE3ODMuMCwianRpIjoiM2FkZjBjYjZhM2Y4YmU4Y2FiMGUxNGExZDJiNjQxZTllZTRhNzk1OTg3ZGRiNzdkZDcxMDRmOWUxY2Y2NWU0NiJ9.HcDF5ST1uHueXOOei2CUq7d6CyGsTBsZlAvm4Mw0INsYKOAPuP77293yP4G7xPWEuEvxzuQILRalItyjlEqw1EUIBvJccHOcEW-XxuL9XBqsyRx3_U2nB3OLg9NSvqEb4U7U2YpCe6RXKkvAhXnp79ybJ1R1Y99aBFabP37mVQgR-APUphP8Jifr1tG1kYe4mm9SIbSPFlbM6BNKyGTvMoxvLWBd0BmAb-9nQ49NgKsgkNVd2CH90ymTL4H0dElFPRQdEBqZnWIm7v6JrGtw-La6yFEccyfmDsJgF2viSxTlWgv56OrISqRg11MzTiy6UHaJ1LQGRxEtRl_8WHC06g\n</pre></div>\n\n\n<p>I get the following error from <a href=\"https://test.fhir.org/auth3/token\" target=\"_blank\" title=\"https://test.fhir.org/auth3/token\">https://test.fhir.org/auth3/token</a>:</p>\n<div class=\"codehilite\"><pre><span></span>{&#39;error&#39;: &#39;invalid_request&#39;, &#39;error_description&#39;: &#39;JWT expiry is too old&#39;}\n</pre></div>\n\n\n<p>... but the JWT above expires in February! The tokens's header (decoded) is:</p>\n<div class=\"codehilite\"><pre><span></span>{\n  &quot;typ&quot;: &quot;JWT&quot;,\n  &quot;alg&quot;: &quot;RS512&quot;\n}\n</pre></div>\n\n\n<p>And the token's payload (decoded) is:</p>\n<div class=\"codehilite\"><pre><span></span>{\n  &quot;iss&quot;: &quot;https://bulk-data-loader.smarthealthit.org&quot;,\n  &quot;sub&quot;: &quot;c.2&quot;,\n  &quot;aud&quot;: &quot;https://test.fhir.org/auth3/token&quot;,\n  &quot;exp&quot;: 1517591783,\n  &quot;jti&quot;: &quot;3adf0cb6a3f8be8cab0e14a1d2b641e9ee4a795987ddb77dd7104f9e1cf65e46&quot;\n}\n</pre></div>",
        "id": 153931997,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1517159972
    },
    {
        "content": "<p>I'll look into it</p>",
        "id": 153932002,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1517160188
    },
    {
        "content": "<p>I've added more information to the error-  working on the upgrade now</p>",
        "id": 153932015,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1517160767
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 153932051,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1517161702
    },
    {
        "content": "<p>try again</p>",
        "id": 153932061,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1517162276
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span>Got access token {&#39;error&#39;: &#39;invalid_request&#39;, &#39;error_description&#39;: &#39;JWT expiry (1/1/1970) is too old&#39;}\n</pre></div>",
        "id": 153932074,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1517162940
    },
    {
        "content": "<p>hmm.</p>",
        "id": 153932087,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1517163129
    },
    {
        "content": "<p>so you are populating \"exp\"?</p>",
        "id": 153932089,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1517163165
    },
    {
        "content": "<p>what with?</p>",
        "id": 153932090,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1517163169
    },
    {
        "content": "<p>I shared a complete payload above.</p>",
        "id": 153932092,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1517163317
    },
    {
        "content": "<p>You can see the token, the decoded header, and the decoded payload.</p>",
        "id": 153932093,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1517163329
    },
    {
        "content": "<p>k sorry.</p>",
        "id": 153932094,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1517163353
    },
    {
        "content": "<p><a href=\"http://jwt.io\" target=\"_blank\" title=\"http://jwt.io\">jwt.io</a> thinks the token above may fail a few JWT libraries, though I haven't dug into it much <span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span></p>",
        "id": 153932103,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1517163548
    },
    {
        "content": "<p>actually, I think I'm misreading what it is trying to represent :)</p>",
        "id": 153932108,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1517163599
    },
    {
        "content": "<p>Yeah, I pasted it into <a href=\"http://jwt.io\" target=\"_blank\" title=\"http://jwt.io\">jwt.io</a> to debug and it looked OK to me :-)</p>",
        "id": 153932112,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1517163617
    },
    {
        "content": "<p>I may be doing something silly though.</p>",
        "id": 153932113,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1517163622
    },
    {
        "content": "<p>so the exp value I'm seeing is 0. I'm trying to figure out why</p>",
        "id": 153932115,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1517163653
    },
    {
        "content": "<p>Oh,  Grahame: I see somethign silly</p>",
        "id": 153932116,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1517163656
    },
    {
        "content": "<p>maybe unrelated, but I'm doing RS512 signatures</p>",
        "id": 153932117,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1517163666
    },
    {
        "content": "<p>that should be ok for me</p>",
        "id": 153932118,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1517163675
    },
    {
        "content": "<p>I should be doing RS256 per the SMART spec though, so I'll fix that at least. But good to know you support both!</p>",
        "id": 153932119,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1517163696
    }
]