[
    {
        "content": "<p>Bulk Data IG states that</p>\n<div class=\"codehilite\"><pre><span></span><code>        {\n          &quot;type&quot; : &quot;Group&quot;,\n          &quot;operation&quot; : [\n            {\n              &quot;extension&quot; : [\n                {\n                  &quot;url&quot; : &quot;http://hl7.org/fhir/StructureDefinition/capabilitystatement-expectation&quot;,\n                  &quot;valueCode&quot; : &quot;SHOULD&quot;\n                }\n              ],\n              &quot;name&quot; : &quot;group-export&quot;,\n              &quot;definition&quot; : &quot;http://hl7.org/fhir/uv/bulkdata/OperationDefinition/group-export&quot;,\n              &quot;documentation&quot; : &quot;FHIR Operation to obtain a detailed set of FHIR resources of diverse resource types pertaining to all patients in specified [Group](https://www.hl7.org/fhir/group.html).\\n\\nIf a FHIR server supports Group-level data export, it SHOULD support reading and searching for `Group` resource. This enables clients to discover available groups based on stable characteristics such as `Group.identifier`.\\n\\nThe [Patient Compartment](https://www.hl7.org/fhir/compartmentdefinition-patient.html) SHOULD be used as a point of reference for recommended resources to be returned and, where applicable, Patient resources SHOULD be returned. Other resources outside of the patient compartment that are helpful in interpreting the patient data (such as Organization and Practitioner) MAY also be returned.&quot;\n            }\n          ]\n        },\n</code></pre></div>\n<p>ONC (g)(10) test procedure requires server implementation support Multi-Patient export so Inferno has a validation test verify that Server declare its support of \"<a href=\"http://hl7.org/fhir/uv/bulkdata/OperationDefinition/group-export\">http://hl7.org/fhir/uv/bulkdata/OperationDefinition/group-export</a>\" in it's CapabilityStatement.<br>\nWe received a question from an implementer recently that they profiled OperationDefinition of group-export to indicate that their server supports only subset of the input parameters defined in Bulk IG's group-export. They put their own operation definition in server's CS, like</p>\n<div class=\"codehilite\"><pre><span></span><code>              &quot;name&quot; : &quot;group-export&quot;,\n              &quot;definition&quot; : &quot;http://myserver/OperationDefinition/group-export&quot;,\n</code></pre></div>\n<p>where <a href=\"http://myserver/OperationDefinition/group-export\">http://myserver/OperationDefinition/group-export</a> is a constrained OperationDefinition of <a href=\"http://hl7.org/fhir/uv/bulkdata/OperationDefinition/group-export\">http://hl7.org/fhir/uv/bulkdata/OperationDefinition/group-export</a><br>\nThis sounds good but fails Inferno test since Inferno expects the Bulk IG's group-export url.<br>\nHere are some questions<br>\n1) if server declares \"<a href=\"http://hl7.org/fhir/uv/bulkdata/OperationDefinition/group-export\">http://hl7.org/fhir/uv/bulkdata/OperationDefinition/group-export</a>\" in its CS, does that mean it supports all parameters declared in that OD?<br>\n2) how could a server indicate that it supports a constrained group-export operation?<br>\na) using a same name 'group-export' but with different definition url?<br>\nb) using a different name 'my-group-export' and with different url?<br>\nc) list both 'group-export' and 'my-group-export' side by side (like resource.supportedProfile)<br>\n3) how does a client know a server support group-export definition?<br>\na) looking the name 'group-definition'<br>\nb) get the OperationDefinition and verify it is either Bulk IG's group-export or descendent of Bulk IG's group-export <br>\n4) Should we consider add operation.supportedOperation [0..*] to CapabilityStatement?</p>",
        "id": 274568849,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1646758193
    },
    {
        "content": "<p>Can you include a link to the source for the first snippet you embedded (with the <code>SHOULD</code> extension)?</p>",
        "id": 274690096,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1646834005
    },
    {
        "content": "<ol>\n<li><a href=\"http://hl7.org/fhir/uv/bulkdata/STU2/export.html#query-parameters\">http://hl7.org/fhir/uv/bulkdata/STU2/export.html#query-parameters</a> documents which parameters a server is allowed to ignore.</li>\n</ol>",
        "id": 274690286,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1646834093
    },
    {
        "content": "<ol start=\"2\">\n<li><a href=\"http://hl7.org/fhir/uv/bulkdata/STU2/index.html#conformance\">http://hl7.org/fhir/uv/bulkdata/STU2/index.html#conformance</a> documents what we specific about advertising conformance --  I.e. populating <code>CapabilityStatement.instantiates</code>. The rest falls back to standard FHIR rules, but in practice it sounds like the vendor you're working with actually supports the full group export operation definition (which allows servers to ignore certain parameters but not others).</li>\n</ol>\n<p>(If I wanted to advertise support for a constrained profile I'd advertise just that constrained profile, and populate <code>OperationDefinition.base</code> and host it at $export because -- let's face it -- clients are going to hardcode this path.)</p>",
        "id": 274691564,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1646834630
    },
    {
        "content": "<ol start=\"3\">\n<li>see (1) above plus core FHIR spec for ways to advertise</li>\n<li>I think core FHIR spec already provides a dizzying array of ways to advertise support for capabilities. If you think something new would help, do you want to write up a proposal for FHIR- I (and especially provide an example showing what you could communicate with this new mechanism that was difficult to communicate with a standard mechanisms)?</li>\n</ol>",
        "id": 274692019,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1646834814
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> Most of the question actually belongs to general FHIR discussion. I will move the discussion to implementer thread. <br>\nThe quote is from CapabilityStatement in Bulk IG: <a href=\"https://hl7.org/fhir/uv/bulkdata/CapabilityStatement-bulk-data.json.html\">https://hl7.org/fhir/uv/bulkdata/CapabilityStatement-bulk-data.json.html</a><br>\nI am always confused by the CapabilityStatement with \"requirement\" kind.<br>\nSince Bulk IG states that requirement CS (as above), shall server implementation declare the same name/definition in its instance kind CS?</p>",
        "id": 274715683,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1646844441
    },
    {
        "content": "<p>I have no official answer on this. My personal perspective is:</p>\n<ul>\n<li>\n<p>servers need to include the <code>instantiates</code> field in their CapabilityStatement, per <a href=\"https://hl7.org/fhir/uv/bulkdata/index.html#conformance\">https://hl7.org/fhir/uv/bulkdata/index.html#conformance</a> -- this is how clients learn \"this server does bulk export\"</p>\n</li>\n<li>\n<p>servers should host a spec-compliant operation for at least one of:</p>\n<ul>\n<li><code>/$export</code></li>\n<li><code>/Patient/$export</code></li>\n<li><code>/Group/:id/$export</code> </li>\n</ul>\n</li>\n</ul>\n<p>Other modeling of \"how do I advertise the details of what I do\" is outside the scope of Bulk Data; can take this up in FHIR-I.</p>",
        "id": 274717325,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1646845083
    }
]