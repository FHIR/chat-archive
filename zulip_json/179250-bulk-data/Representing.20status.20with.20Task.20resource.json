[
    {
        "content": "<p>I just went through the exercise of trying to represent the example status response from <a href=\"http://hl7.org/fhir/R4/async.html#3.1.6.4.0.4\" target=\"_blank\" title=\"http://hl7.org/fhir/R4/async.html#3.1.6.4.0.4\">http://hl7.org/fhir/R4/async.html#3.1.6.4.0.4</a> with the Task resource. I can't say I'm psyched about it, and none of our ballot commenters requested a change to the status representation.</p>\n<div class=\"codehilite\"><pre><span></span>{\n  &quot;resourceType&quot;: &quot;Task&quot;,\n  &quot;status&quot;: &quot;in-progress&quot;,\n  &quot;intent&quot;: &quot;order&quot;, // this seems really wrong, but it&#39;s required\n  &quot;executionPeriod&quot;: {\n    &quot;start&quot;: &quot;[instant&quot;],\n    &quot;end&quot;: &quot;[instant]&quot;\n  },\n  &quot;extension&quot;: [{\n    &quot;url&quot;: &quot;http://hl7.org/fhir/StructureDefinition/async-request-url&quot;,\n    &quot;valueUrl&quot;: &quot;[base]/Patient/$export?_type=Patient,Observation&quot;\n  },{\n    &quot;url&quot;: &quot;http://hl7.org/fhir/StructureDefinition/async-requires-access-token&quot;,\n    &quot;valueBoolean&quot;: true\n  }],\n  &quot;output&quot;: [{\n    &quot;type&quot;: {\n      &quot;coding&quot;: [{\n        &quot;system&quot;: &quot;http://hl7.org/fhir/resource-types&quot;,\n        &quot;code&quot;: &quot;Patient&quot;\n      }]\n    },\n    &quot;extension&quot;: [{\n      &quot;url&quot;: &quot;http://hl7.org/fhir/StructureDefinition/async-request-output-type&quot;,\n      &quot;valueCode&quot;: &quot;output&quot;\n    }]\n    &quot;valueUrl&quot;: &quot;https://serverpath2/patient_file_1.ndjson&quot;\n  }, {\n    &quot;type&quot;: {\n      &quot;coding&quot;: [{\n        &quot;system&quot;: &quot;http://hl7.org/fhir/resource-types&quot;,\n        &quot;code&quot;: &quot;Observation&quot;\n      }]\n    },\n    &quot;valueUrl&quot;: &quot;https://serverpath2/observation_file_1.ndjson&quot;\n  }, {\n    &quot;type&quot;: {\n      &quot;coding&quot;: [{\n        &quot;system&quot;: &quot;http://hl7.org/fhir/resource-types&quot;,\n        &quot;code&quot;: &quot;Observation&quot;\n      }]\n    },\n    &quot;extension&quot;: [{\n      &quot;url&quot;: &quot;http://hl7.org/fhir/StructureDefinition/async-request-output-type&quot;,\n      &quot;valueCode&quot;: &quot;error&quot;\n    }],\n    &quot;valueUrl&quot;: &quot;https://serverpath2/operationoutcome_file_1.ndjson&quot;\n  }]\n}\n</pre></div>",
        "id": 164952621,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1557117853
    },
    {
        "content": "<p>That's a lit more useful than Task was last time we looked at that. It's possible to support both based on mime types... I'm not sure how useful it is</p>",
        "id": 164971196,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1557139052
    },
    {
        "content": "<p>Curious about the choice to use extensions rather than additional input/output parameters</p>",
        "id": 164979363,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1557147293
    },
    {
        "content": "<p>They're \"complex\" parameters --- each output or error file needs a type, a url,  and an indication of whether it includes successful vs error responses (currently we model this as an outputs array and an errors array).</p>",
        "id": 164983109,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1557150743
    },
    {
        "content": "<p>I agree that all the extensions make this look a bit complex and counterintuitive. But we should be able to update the Task resource or profile it to make this easier. <br>\nTo summarize some of the points from yesterday, using Task resource has the following benefits:<br>\n- Using existing FHIR backend (e.g. persistence model) to store and archive results.<br>\n- Using versioning on the resource to track change of status and partial results. <br>\n- Using FHIR search on Tasks for admin reporting.<br>\n- Using Subscription to receive async notifications on partial updates and status changes to the Task resource.<br>\nOne can even bulk export all the Tasks for analytics on the history of all previous bulk exports :P</p>",
        "id": 164983945,
        "sender_full_name": "Mohammad Jafari",
        "timestamp": 1557151337
    },
    {
        "content": "<p><span aria-label=\"thumbs up\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"thumbs up\">:thumbs_up:</span> only for the last line !</p>",
        "id": 164984026,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1557151411
    },
    {
        "content": "<p>I think the brass-tacks question is whether we'd contemplate making this change to \"bulk data\" particularly -- or just try to work with FHIR r5 to make this kind of change. (My strong leaning is: address this in fhir R5 core infrastructure.)</p>",
        "id": 164989111,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1557155113
    },
    {
        "content": "<p>we could make space for this by making some note about the use of mime type when requesting this thing?</p>",
        "id": 164989476,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1557155376
    },
    {
        "content": "<p>In other words, a note like \"future versions of fhir may require a fhir-specific mime type for async requests\"?</p>",
        "id": 164989681,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1557155455
    },
    {
        "content": "<p>(Ideally I was expecting we'd remove most of the details about how async requests work from the bulk data IG, deferring to definitions in FHIR R4+.)</p>",
        "id": 164989722,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1557155498
    },
    {
        "content": "<p>we'd still have examples, but a lot of the duplicative content with fhir R4 async.html would be stripped.</p>",
        "id": 164989787,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1557155523
    },
    {
        "content": "<p>well I agree about that. But we can say things in the IG that are ahead of R5. I was more thinking of some statement like 'future versions this specification or the base FHIR specification may describe the use of other mime types as options and/or replacement for this json object\"</p>",
        "id": 164990391,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1557155957
    },
    {
        "content": "<p>Perfect -- will capture this.</p>",
        "id": 164990849,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1557156245
    },
    {
        "content": "<p>What would the mime type look like for Task vs. the current JSON result format? Which one are we expecting to be associated with <code>application/fhir+json</code>?</p>",
        "id": 165013641,
        "sender_full_name": "Mohammad Jafari",
        "timestamp": 1557172659
    },
    {
        "content": "<p>In future state, if R5's async.html documents Task as the status response, it'd use <code>application/fhir+json</code>.</p>",
        "id": 165014391,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1557173246
    },
    {
        "content": "<p>it's much easier to mix things than \"unmix\" them later, i think it's false-similarity</p>",
        "id": 165018469,
        "sender_full_name": "nicola (RIO/SS)",
        "timestamp": 1557176394
    },
    {
        "content": "<p>Is there something else you'd propose <span class=\"user-mention\" data-user-id=\"191318\">@nicola (RIO/SS)</span> ?</p>",
        "id": 165094370,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1557251560
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span>  Nothing new - just specialized resource for this specific operation - i.e. turn current JSON result into Resource</p>",
        "id": 165106361,
        "sender_full_name": "nicola (RIO/SS)",
        "timestamp": 1557259919
    },
    {
        "content": "<p>Gotcha -- that's clear enough, thanks!</p>",
        "id": 165107367,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1557260566
    }
]