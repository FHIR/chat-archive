[
    {
        "content": "<p>I am seeing duplicate Patient - first without any data and then complete:</p>",
        "id": 153998990,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1537540383
    },
    {
        "content": "<p><code>{\"resourceType\":\"Patient\",\"id\":\"bba01432d6105631c9115683f52b0956f3a03b6c\"}\n{\"resourceType\":\"Patient\",\"id\":\"bba01432d6105631c9115683f52b0956f3a03b6c\",\"name\":[{\"family\":\"Baeza\",\"given\":[\"Dudley*\"]}],\"birthDate\":\"2009-01-01\",\"address\":[{\"line\":[\"136 Lang Avenue\"],\"city\":\"Springfield\",\"state\":\"22\",\"postalCode\":\"34471\"}]}</code></p>",
        "id": 153998991,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1537540389
    },
    {
        "content": "<p>You're absolutely right, Michele.  This was found during the last connectathon and I reported it to the folks behind the data generation.  I'll be focused on Backend Services support leading up to the event, but I'll be glad to start sifting through the patient files after that to clean up things like this.  We'll definitely take any feedback on data issues.</p>",
        "id": 153998993,
        "sender_full_name": "Dennis Patterson",
        "timestamp": 1537540607
    },
    {
        "content": "<p>OK, thanks. I'll work around it. I _think_ this should be considered an error and clients should flag it (...and try to keep going)</p>",
        "id": 153998994,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1537540800
    },
    {
        "content": "<p>For anyone hitting the Cerner server, we've taken down the previous instance and are in the process of deploying a separate server as we prep for the connectathon. Apologies for the downtime inconvenience; it's likely to be resolved early next week.  One change with the separate server is that it should immediately be pointing to gzipped ndjson, for one thing.  Will provide an update when I have additional information.</p>",
        "id": 153999127,
        "sender_full_name": "Dennis Patterson",
        "timestamp": 1537563767
    },
    {
        "content": "<p>The server is back up and should serve up gzipped ndjson</p>",
        "id": 153999428,
        "sender_full_name": "Dennis Patterson",
        "timestamp": 1537798521
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191358\">@Dennis Patterson</span>  - for clarification - does Cerner also support a non-gzip ndjson file?  We are expecting a ndjson file but not gzipped for the Connectathon. I recall earlier discussions on gzipped files, but if those are in the connectathon, how does one either request a gzip file or a non-gzip file when invoking the FHIR bulk data downloader?</p>",
        "id": 153999477,
        "sender_full_name": "Karen Fairchild",
        "timestamp": 1537810204
    },
    {
        "content": "<p>Based on discussion in <a href=\"#narrow/stream/95-bulk-data/subject/Gzip.20compression.20on.20Cerner.20staging.20server\" title=\"#narrow/stream/95-bulk-data/subject/Gzip.20compression.20on.20Cerner.20staging.20server\">https://chat.fhir.org/#narrow/stream/95-bulk-data/subject/Gzip.20compression.20on.20Cerner.20staging.20server</a>, the server now currently <em>only</em> serves up gzipped contents.  On the day of the connectathon, this will make downloads much faster.   <span class=\"user-mention\" data-user-id=\"193731\">@Vladimir Ignatov</span>  does the bulk data downloader support gzipped contents?  If not, could it?</p>",
        "id": 153999491,
        "sender_full_name": "Dennis Patterson",
        "timestamp": 1537811772
    },
    {
        "content": "<p>The SMART Bulk Data Server did not support gzip, but I found this is is a great idea so now it does. You enable that by sending \"accept-encoding: gzip\" header to the file download endpoint. The sample client was also updated and you can pass a \"--gzip\" option to set that header. It will also display download sizes before and after decompression and the total time spent.</p>",
        "id": 153999745,
        "sender_full_name": "Vladimir Ignatov",
        "timestamp": 1537884542
    },
    {
        "content": "<p>Fantastic.  Thanks, <span class=\"user-mention\" data-user-id=\"193731\">@Vladimir Ignatov</span> !   cc: <span class=\"user-mention\" data-user-id=\"195992\">@Karen Fairchild</span></p>",
        "id": 153999746,
        "sender_full_name": "Dennis Patterson",
        "timestamp": 1537884717
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191358\">@Dennis Patterson</span>  - FYI we updated our client now to be able to accept gzip files and what had taken 20 minutes to get data from your Cerner server now only takes 3 minutes.</p>",
        "id": 153999774,
        "sender_full_name": "Karen Fairchild",
        "timestamp": 1537890638
    },
    {
        "content": "<p>Going to be out of office the rest of the day, but I'm planning to push out a token endpoint for the Cerner server in the morning (central time).  If anybody has a client that they want registered, feel free to reach out to me and I'll register your jku (or jwks) so we can start trying to integrate.</p>",
        "id": 154000043,
        "sender_full_name": "Dennis Patterson",
        "timestamp": 1537982620
    },
    {
        "content": "<p>Great. Our client JWKS url is <a href=\"https://demo.careevolution.com/CNjwtcareevolutioncom.json\" target=\"_blank\" title=\"https://demo.careevolution.com/CNjwtcareevolutioncom.json\">https://demo.careevolution.com/CNjwtcareevolutioncom.json</a> (I added it to the spreadhseet as well)</p>",
        "id": 154000105,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1537995239
    },
    {
        "content": "<p>Deployed the token endpoint and added it to the spreadsheet</p>",
        "id": 154000316,
        "sender_full_name": "Dennis Patterson",
        "timestamp": 1538064232
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191358\">@Dennis Patterson</span>  - when we get your gzip files, our standard gzip utilities (python, linux, windows/7zip) don't seem to be able to recognize these as gzip files (even if we give them a gz suffix).  We've tried multiple platforms and tools but not able to be recognized as gzip.  How are you creating your gzip files?</p>",
        "id": 154001019,
        "sender_full_name": "Karen Fairchild",
        "timestamp": 1538145429
    },
    {
        "content": "<p>Using .NET GZipStream worked for me</p>",
        "id": 154001020,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1538145601
    },
    {
        "content": "<p>(from code ... did not try decompress utilities)</p>",
        "id": 154001021,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1538145753
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191912\">@Michele Mottini</span> is this something worth adding to the conMan server tab as well?</p>",
        "id": 154001047,
        "sender_full_name": "David Hay",
        "timestamp": 1538148089
    },
    {
        "content": "<p>Sorry, what do you mean by 'this' ?</p>",
        "id": 154001054,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1538148274
    },
    {
        "content": "<p>I'm not sure if we're planning on using conman (though I'm happy to; I also set up a spreadsheet)</p>",
        "id": 154001062,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1538148342
    },
    {
        "content": "<p><a href=\"https://docs.google.com/spreadsheets/d/1gzjQemCLIvURUBjC3hQA7t-ZPaHPctAayfpW0_hB-90/edit#gid=0\" target=\"_blank\" title=\"https://docs.google.com/spreadsheets/d/1gzjQemCLIvURUBjC3hQA7t-ZPaHPctAayfpW0_hB-90/edit#gid=0\">shared spreadsheet</a> to list participants and the scenarios they're working on</p>",
        "id": 154001065,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1538148369
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"195992\">@Karen Fairchild</span>  are you still having this issue? I'm able to retrieve an example via <code>curl --compressed https://d3mme9o1hh15io.cloudfront.net/0000.Patient.ndjson</code>or use gunzip once the compressed version is retrieved e.g. <code>curl https://d3mme9o1hh15io.cloudfront.net/0000.Patient.ndjson | gunzip</code></p>",
        "id": 154001098,
        "sender_full_name": "Dennis Patterson",
        "timestamp": 1538159638
    },
    {
        "content": "<p>I’m traveling to Baltimore now but will give that a try when I get to the hotel tonight.   The first 2 bytes of the file didn’t seem to match up with ISO standards I looked at for fIle sIgnatures.  Maybe we can discuss what standard to use for gzip files so it’s highly portable.   Thanks.</p>",
        "id": 154001099,
        "sender_full_name": "Karen Fairchild",
        "timestamp": 1538160163
    },
    {
        "content": "<p>I used gzip on my Mac to compress them, but I'll be interested to hear what you find.  Glad that Michele didn't have issue.  Please, anybody else having issues (or not), feel free to chime in.  You could also let me know what language/library you're using to try to decompress them beyond the command-line utilities you're troubleshooting with</p>",
        "id": 154001100,
        "sender_full_name": "Dennis Patterson",
        "timestamp": 1538160433
    },
    {
        "content": "<p>Python libraries</p>",
        "id": 154001101,
        "sender_full_name": "Karen Fairchild",
        "timestamp": 1538160887
    },
    {
        "content": "<p>But we also tried some command line utilities on Mac, windows, Ubuntu Linux.</p>",
        "id": 154001102,
        "sender_full_name": "Karen Fairchild",
        "timestamp": 1538160948
    },
    {
        "content": "<p>FWIW, I happened to have a REPL open when I saw this and the following worked in Python. The Python requests library automatically unzipped, so I saw the content as expected.</p>\n<p>import requests</p>\n<p>response = requests.get('<a href=\"https://d3mme9o1hh15io.cloudfront.net/0000.Patient.ndjson\" target=\"_blank\" title=\"https://d3mme9o1hh15io.cloudfront.net/0000.Patient.ndjson\">https://d3mme9o1hh15io.cloudfront.net/0000.Patient.ndjson</a>')<br>\nresponse.content</p>",
        "id": 154001103,
        "sender_full_name": "Ryan Brush",
        "timestamp": 1538161131
    },
    {
        "content": "<p>Thanks.  We did some more testing. <br>\nThis works<br>\ncurl <a href=\"https://d3mme9o1hh15io.cloudfront.net/0000.Patient.ndjson\" target=\"_blank\" title=\"https://d3mme9o1hh15io.cloudfront.net/0000.Patient.ndjson\">https://d3mme9o1hh15io.cloudfront.net/0000.Patient.ndjson</a> &gt; outfile.gz<br>\nGunzip outfile.gz</p>\n<p>And this works<br>\ncurl <a href=\"https://d3mme9o1hh15io.cloudfront.net/0000.Patient.ndjson\" target=\"_blank\" title=\"https://d3mme9o1hh15io.cloudfront.net/0000.Patient.ndjson\">https://d3mme9o1hh15io.cloudfront.net/0000.Patient.ndjson</a> &gt; outfile<br>\nGunzip outfile</p>\n<p>However, if we save the file has an NDJSON file directly, it seems to corrupt the file:<br>\nThis does not work<br>\ncurl <a href=\"https://d3mme9o1hh15io.cloudfront.net/0000.Patient.ndjson\" target=\"_blank\" title=\"https://d3mme9o1hh15io.cloudfront.net/0000.Patient.ndjson\">https://d3mme9o1hh15io.cloudfront.net/0000.Patient.ndjson</a> &gt; outfile.ndjson<br>\ngunzip outfile.ndjson<br>\n➢ gunzip: outfile.ndjson: unknown suffix -- ignored</p>",
        "id": 154001124,
        "sender_full_name": "Karen Fairchild",
        "timestamp": 1538165611
    },
    {
        "content": "<p>Perhaps we can discuss more tomorrow at the connectathon....</p>",
        "id": 154001125,
        "sender_full_name": "Karen Fairchild",
        "timestamp": 1538165718
    },
    {
        "content": "<p>Sure, yeah gzip just expects a particular suffix.  If you gunzip via python I'm curious if it'd even care.  We can chat tomorrow</p>",
        "id": 154001166,
        "sender_full_name": "Dennis Patterson",
        "timestamp": 1538186313
    },
    {
        "content": "<p>Apparently something broke with authentication: trying to get access token fail with <code>invalid_request - Signature nbf has not been reached</code></p>",
        "id": 154006355,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1538753457
    },
    {
        "content": "<p>(The nbf looks OK)</p>",
        "id": 154006356,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1538753501
    },
    {
        "content": "<p>correlation ID: <code>4dd590ac-ee39-4301-b0fe-b77d8ac149c5</code></p>",
        "id": 154006357,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1538753507
    },
    {
        "content": "<p>If I remove the nbf I can get an access token - but apparently an invalid one:</p>",
        "id": 154006359,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1538753533
    },
    {
        "content": "<p><code>error=\"invalid_token\", error_description=\"Invalid issuer. Expected https://fhir-ehr.stagingcerner.com/r4/a758f80e-aa74-4118-80aa-98cc75846c76/token, received https://fhir-ehr.stagingcerner.com/r4/0b8a0111-e8e6-4c26-a91c-5069cbc6b1ca/token\"</code></p>",
        "id": 154006360,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1538753556
    },
    {
        "content": "<p>request id <code>6a9fa245-5fa3-4128-a993-356e0a347ac2</code></p>",
        "id": 154006361,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1538753571
    },
    {
        "content": "<p>(also: the invalid token errors above are inside the <code>WWW-Authenticate</code> header - should probably be in the body instead, as an OperationOutcome</p>",
        "id": 154006362,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1538753627
    },
    {
        "content": "<p>I think <span class=\"user-mention\" data-user-id=\"191358\">@Dennis Patterson</span> is traveling today, so it may take some time to troubleshoot.</p>",
        "id": 154006409,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1538760019
    },
    {
        "content": "<p>The body part is an interesting question, since OAuth 2 defines this response here: <a href=\"https://tools.ietf.org/html/rfc6749#section-5.2\" target=\"_blank\" title=\"https://tools.ietf.org/html/rfc6749#section-5.2\">https://tools.ietf.org/html/rfc6749#section-5.2</a></p>",
        "id": 154006411,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1538760079
    },
    {
        "content": "<p>No problem - not urgent</p>",
        "id": 154006414,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1538760486
    },
    {
        "content": "<p>Clarification: I get that <code>WWW-Authenticate</code> header in the response to the <code>$export</code> request, not to the token request</p>",
        "id": 154006415,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1538760546
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191912\">@Michele Mottini</span>  Your first issue is related to clock skew because our server saw the nbf time as a future value.  I have a todo to account for this, though I'll mention it's Cerner Health Conference (CHC) week so no immediate plans.</p>\n<p>For the second issue, it looks like you're using two separate base urls for creating the token and requesting the export.  (You may have been doing this before, but I did work at the connectathon to issue JWTs instead of mock tokens.)  Our logs show you're using <a href=\"https://fhir-ehr.stagingcerner.com/r4/0b8a0111-e8e6-4c26-a91c-5069cbc6b1ca/token\" target=\"_blank\" title=\"https://fhir-ehr.stagingcerner.com/r4/0b8a0111-e8e6-4c26-a91c-5069cbc6b1ca/token\">https://fhir-ehr.stagingcerner.com/r4/0b8a0111-e8e6-4c26-a91c-5069cbc6b1ca/token</a> and <a href=\"https://fhir-ehr.stagingcerner.com/r4/a758f80e-aa74-4118-80aa-98cc75846c76/Patient/$export\" target=\"_blank\" title=\"https://fhir-ehr.stagingcerner.com/r4/a758f80e-aa74-4118-80aa-98cc75846c76/Patient/$export\">https://fhir-ehr.stagingcerner.com/r4/a758f80e-aa74-4118-80aa-98cc75846c76/Patient/$export</a> .  Note that the uuid in those urls is different.  Because our data is still mocked, it doesn't matter which of the two base urls you use, but they must be consistent.</p>",
        "id": 154006696,
        "sender_full_name": "Dennis Patterson",
        "timestamp": 1539009537
    },
    {
        "content": "<p>Got it, thanks Dennis</p>",
        "id": 154006700,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1539010926
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191358\">@Dennis Patterson</span>  Getting the <code>Signature nbf has not been reached</code> problem - it was on and off but not it seems to be happening always (maybe the click change last Sunday?)</p>",
        "id": 154016660,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1541686460
    },
    {
        "content": "<p>Something apparently broke: now getting</p>",
        "id": 154019030,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1542343498
    },
    {
        "content": "<p>Unable to get an access token: invalid_request - &lt;!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"<a href=\"http://www.w3.org/TR/html4/loose.dtd\" target=\"_blank\" title=\"http://www.w3.org/TR/html4/loose.dtd\">http://www.w3.org/TR/html4/loose.dtd</a>\"&gt; &lt;HTML&gt;&lt;HEAD&gt;&lt;META HTTP-EQUIV=\"Content-Type\" CONTENT=\"text/html; charset=iso-8859-1\"&gt; &lt;TITLE&gt;ERROR: The request could not be satisfied&lt;/TITLE&gt; &lt;/HEAD&gt;&lt;BODY&gt; &lt;H1&gt;502 ERROR&lt;/H1&gt; &lt;H2&gt;The request could not be satisfied.&lt;/H2&gt; &lt;HR noshade size=\"1px\"&gt; The origin closed the connection. &lt;BR clear=\"all\"/&gt; If you received this error while trying to use an app or access a website, please contact the provider or website owner for assistance. &lt;BR clear=\"all\"&gt; If you provide content to customers through CloudFront, you can find steps to troubleshoot and help prevent this error by following steps in the CloudFront documentation (&lt;A href=\"https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/http-502-bad-gateway.html\"&gt;https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/http-502-bad-gateway.html&lt;/A&gt;). &lt;BR clear=\"all\"&gt; &lt;HR noshade size=\"1px\"&gt; &lt;PRE&gt; Generated by cloudfront (CloudFront) Request ID: 9BAjBda3RxYJ0jXZEVAb999gQA_hgKOVhIO9N22B1Mq9XrMVv8IiqQ== &lt;/PRE&gt; &lt;ADDRESS&gt; &lt;/ADDRESS&gt; &lt;/BODY&gt;&lt;/HTML&gt;</p>",
        "id": 154019031,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1542343551
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191912\">@Michele Mottini</span>  apologies for the delay.  We are looking at what's going on.  To clarify, I assume you're using the Care Evolution client id?  (We found that the <a href=\"http://cdn.rawgit.com\" target=\"_blank\" title=\"http://cdn.rawgit.com\">cdn.rawgit.com</a> service we were using to access the sample Bulk Data spec jwks has been deprecated, so wanted to confirm which client id)</p>",
        "id": 154023155,
        "sender_full_name": "Dennis Patterson",
        "timestamp": 1544026851
    },
    {
        "content": "<p>No problem</p>",
        "id": 154023197,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1544028750
    },
    {
        "content": "<p>Yes, CareEvolution - e91fff6f-4d78-4b0a-b5a6-6fa04c23a10c</p>",
        "id": 154023198,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1544028764
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191912\">@Michele Mottini</span> I addressed some issues that had arisen since the last Connectathon.  Can you give it another shot?</p>",
        "id": 154023277,
        "sender_full_name": "Dennis Patterson",
        "timestamp": 1544043300
    },
    {
        "content": "<p>No...fails trying to get the token:</p>",
        "id": 154023281,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1544043950
    },
    {
        "content": "<p>invalid_request - &lt;!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"<a href=\"http://www.w3.org/TR/html4/loose.dtd\" target=\"_blank\" title=\"http://www.w3.org/TR/html4/loose.dtd\">http://www.w3.org/TR/html4/loose.dtd</a>\"&gt; &lt;HTML&gt;&lt;HEAD&gt;&lt;META HTTP-EQUIV=\"Content-Type\" CONTENT=\"text/html; charset=iso-8859-1\"&gt; &lt;TITLE&gt;ERROR: The request could not be satisfied&lt;/TITLE&gt; &lt;/HEAD&gt;&lt;BODY&gt; &lt;H1&gt;502 ERROR&lt;/H1&gt; &lt;H2&gt;The request could not be satisfied.&lt;/H2&gt; &lt;HR noshade size=\"1px\"&gt; The origin closed the connection. &lt;BR clear=\"all\"/&gt; If you received this error while trying to use an app or access a website, please contact the provider or website owner for assistance. &lt;BR clear=\"all\"&gt; If you provide content to customers through CloudFront, you can find steps to troubleshoot and help prevent this error by following steps in the CloudFront documentation (&lt;A href=\"https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/http-502-bad-gateway.html\"&gt;https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/http-502-bad-gateway.html&lt;/A&gt;). &lt;BR clear=\"all\"&gt; &lt;HR noshade size=\"1px\"&gt; &lt;PRE&gt; Generated by cloudfront (CloudFront) Request ID: zgmFNGGotOawHDg4hKjBYmOjQK2AqVTAHPxiNkBd5ld5yPqVMlN0TQ== &lt;/PRE&gt; &lt;ADDRESS&gt; &lt;/ADDRESS&gt; &lt;/BODY&gt;&lt;/HTML&gt;</p>",
        "id": 154023282,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1544043953
    },
    {
        "content": "<p>Can you verify what url you're hitting?</p>",
        "id": 154023283,
        "sender_full_name": "Dennis Patterson",
        "timestamp": 1544044818
    },
    {
        "content": "<p><code>https://fhir-ehr.stagingcerner.com/r4/a758f80e-aa74-4118-80aa-98cc75846c76/token</code></p>",
        "id": 154023284,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1544045080
    },
    {
        "content": "<p>Hmm it's working for me.. I'll send you a private message and we can debug</p>",
        "id": 154023287,
        "sender_full_name": "Dennis Patterson",
        "timestamp": 1544045589
    },
    {
        "content": "<p>The Cerner Server has a new home!<br>\n- <a href=\"https://fhir-open.stagingcerner.com/beta/a758f80e-aa74-4118-80aa-98cc75846c76\" target=\"_blank\" title=\"https://fhir-open.stagingcerner.com/beta/a758f80e-aa74-4118-80aa-98cc75846c76\">https://fhir-open.stagingcerner.com/beta/a758f80e-aa74-4118-80aa-98cc75846c76</a><br>\n- <a href=\"https://fhir-ehr.stagingcerner.com/beta/a758f80e-aa74-4118-80aa-98cc75846c76\" target=\"_blank\" title=\"https://fhir-ehr.stagingcerner.com/beta/a758f80e-aa74-4118-80aa-98cc75846c76\">https://fhir-ehr.stagingcerner.com/beta/a758f80e-aa74-4118-80aa-98cc75846c76</a><br>\n- <a href=\"https://fhir-myrecord.stagingcerner.com/beta/a758f80e-aa74-4118-80aa-98cc75846c76\" target=\"_blank\" title=\"https://fhir-myrecord.stagingcerner.com/beta/a758f80e-aa74-4118-80aa-98cc75846c76\">https://fhir-myrecord.stagingcerner.com/beta/a758f80e-aa74-4118-80aa-98cc75846c76</a></p>",
        "id": 154439723,
        "sender_full_name": "Bradley Strecker",
        "timestamp": 1546638467
    },
    {
        "content": "<p>clients need to be registered again?</p>",
        "id": 154878741,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1547160563
    },
    {
        "content": "<p>(authentication request fails with 401, empty body and WWW-Authenticate header containing <code>Bearer realm=\"Cerner Millennium\",  error=\"invalid_token\", error_description=\"The request has not been applied because it lacks valid authentication credentials for the target resource.</code>)</p>",
        "id": 154878958,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1547160748
    },
    {
        "content": "<p>(that looks like what should be in the body)</p>",
        "id": 154878970,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1547160764
    },
    {
        "content": "<p>We've moved around some of the client registration logic to make it easier to add registrations. Yours should have been carried over though. Do you happen to have an X-Request-Id response header I could used to try to track down the issue?</p>",
        "id": 154920414,
        "sender_full_name": "Bradley Strecker",
        "timestamp": 1547216984
    },
    {
        "content": "<p>Here is request / response:</p>",
        "id": 154942352,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1547236603
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span>\n</pre></div>",
        "id": 154942354,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1547236605
    },
    {
        "content": "<p>&lt;LogInfo xmlns:xsd=\"<a href=\"http://www.w3.org/2001/XMLSchema\" target=\"_blank\" title=\"http://www.w3.org/2001/XMLSchema\">http://www.w3.org/2001/XMLSchema</a>\" xmlns:xsi=\"<a href=\"http://www.w3.org/2001/XMLSchema-instance\" target=\"_blank\" title=\"http://www.w3.org/2001/XMLSchema-instance\">http://www.w3.org/2001/XMLSchema-instance</a>\"&gt;<br>\n  &lt;Time&gt;1/10/2019 5:48:11 PM -05:00&lt;/Time&gt;<br>\n  &lt;UserID xsi:nil=\"true\" /&gt;<br>\n  &lt;SessionID xsi:nil=\"true\" /&gt;<br>\n  &lt;ApplicationID&gt;0&lt;/ApplicationID&gt;<br>\n  &lt;Method&gt;POST&lt;/Method&gt;<br>\n  &lt;Uri&gt;https://fhir-ehr.stagingcerner.com/r4/a758f80e-aa74-4118-80aa-98cc75846c76/token&lt;/Uri&gt;<br>\n  &lt;RequestHeaders&gt;<br>\n    &lt;Header Name=\"Accept\"&gt;<br>\n      &lt;Value&gt;application/json&lt;/Value&gt;<br>\n    &lt;/Header&gt;<br>\n    &lt;Header Name=\"Content-Type\"&gt;<br>\n      &lt;Value&gt;application/x-www-form-urlencoded&lt;/Value&gt;<br>\n    &lt;/Header&gt;<br>\n    &lt;Header Name=\"Content-Length\"&gt;<br>\n      &lt;Value&gt;943&lt;/Value&gt;<br>\n    &lt;/Header&gt;<br>\n  &lt;/RequestHeaders&gt;<br>\n  &lt;RequestBody&gt;grant_type=client_credentials&amp;client_assertion_type=urn%3Aietf%3Aparams%3Aoauth%3Aclient-assertion-type%3Ajwt-bearer&amp;client_assertion=eyJ0eXAiOiJKV1QiLCJrdHkiOiJSU0EiLCJhbGciOiJSUzM4NCIsImtpZCI6IjY2NjJGMkY4MUMxQTQ1QTcxNTNEREI3NUM4MjJCNjY3M0U2RTdBMjkifQ.eyJpc3MiOiJlOTFmZmY2Zi00ZDc4LTRiMGEtYjVhNi02ZmEwNGMyM2ExMGMiLCJzdWIiOiJlOTFmZmY2Zi00ZDc4LTRiMGEtYjVhNi02ZmEwNGMyM2ExMGMiLCJhdWQiOiJodHRwczovL2ZoaXItZWhyLnN0YWdpbmdjZXJuZXIuY29tL3I0L2E3NThmODBlLWFhNzQtNDExOC04MGFhLTk4Y2M3NTg0NmM3Ni90b2tlbiIsImp0aSI6ImFjYWQ1NjM4LTJkZmUtNDAwYy05MTIxLWE4M2I0NjBjNWEzZCIsImV4cCI6MTU0NzE2MDc5MH0.EpFw0pSjOzoiPli75wvMCIJwuY0MlWqpRJQArO6vTxNrN23V-yxGcm8i76azdcuD49_rbJyra1XqX3q5PeKsswgCcEZe0Rn2RYlXuPBuhmKX_SlS7W-pZOrtiErYSzKNx4cJwh2NBO3NqiP5VHXgpIfpYhpmyWRfLP9S8b9Q7F3qITCrHjaxj61SBnXKT1bSrtC41TYD_Y-7bjt9myTbqp8Dcz7W3TjVSYREoQFH2JZFKQ7VMkldDhDVpZCaZH9eF5gvObsR1tnoNEc6gOV85BhrK0Baz1Chu3F6FcUmc2Xs1CYt9DI0-Zj9FYy6JwTnZ5OHWQ9X-zCPavEhfbsbZw&amp;scope=system%2F%2A.read&lt;/RequestBody&gt;<br>\n  &lt;ResponseStatusCode&gt;401&lt;/ResponseStatusCode&gt;<br>\n  &lt;ResponseHeaders&gt;<br>\n    &lt;Header Name=\"Connection\"&gt;<br>\n      &lt;Value&gt;keep-alive&lt;/Value&gt;<br>\n    &lt;/Header&gt;<br>\n    &lt;Header Name=\"x-amzn-RequestId\"&gt;<br>\n      &lt;Value&gt;d36dc663-1529-11e9-a8e0-65c0231b79c6&lt;/Value&gt;<br>\n    &lt;/Header&gt;<br>\n    &lt;Header Name=\"x-amzn-ErrorType\"&gt;<br>\n      &lt;Value&gt;UnauthorizedException&lt;/Value&gt;<br>\n    &lt;/Header&gt;<br>\n    &lt;Header Name=\"x-amz-apigw-id\"&gt;<br>\n      &lt;Value&gt;TTzEEFcKvHcF-mg=&lt;/Value&gt;<br>\n    &lt;/Header&gt;<br>\n    &lt;Header Name=\"X-Cache\"&gt;<br>\n      &lt;Value&gt;Error from cloudfront&lt;/Value&gt;<br>\n    &lt;/Header&gt;<br>\n    &lt;Header Name=\"X-Amz-Cf-Id\"&gt;<br>\n      &lt;Value&gt;8Rp0T_5LWeP4jQEES39QWW5b86b8MJgYRDFL8jHTd-hvRa5cM2DFHA==&lt;/Value&gt;<br>\n    &lt;/Header&gt;<br>\n    &lt;Header Name=\"Date\"&gt;<br>\n      &lt;Value&gt;Thu, 10 Jan 2019 22:48:19 GMT&lt;/Value&gt;<br>\n    &lt;/Header&gt;<br>\n    &lt;Header Name=\"Via\"&gt;<br>\n      &lt;Value&gt;1.1 <a href=\"http://6acd4ebf1a0179dd8e00eb58764e453a.cloudfront.net\" target=\"_blank\" title=\"http://6acd4ebf1a0179dd8e00eb58764e453a.cloudfront.net\">6acd4ebf1a0179dd8e00eb58764e453a.cloudfront.net</a> (CloudFront)&lt;/Value&gt;<br>\n    &lt;/Header&gt;<br>\n    &lt;Header Name=\"WWW-Authenticate\"&gt;<br>\n      &lt;Value&gt;Bearer realm=\"Cerner Millennium\",  error=\"invalid_token\", error_description=\"The request has not been applied because it lacks valid authentication credentials for the target resource.\"&lt;/Value&gt;<br>\n    &lt;/Header&gt;<br>\n  &lt;/ResponseHeaders&gt;<br>\n  &lt;ResponseBody&gt; &lt;/ResponseBody&gt;<br>\n&lt;/LogInfo&gt;</p>",
        "id": 154942357,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1547236607
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span>\n</pre></div>",
        "id": 154942358,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1547236608
    },
    {
        "content": "<p>(In our log format - apologies for that)</p>",
        "id": 154942376,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1547236625
    },
    {
        "content": "<p>Found the problem - I updated the FHIR end point but not the token end point in our configuration - now works</p>",
        "id": 154949670,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1547243150
    },
    {
        "content": "<p>apologies</p>",
        "id": 154949674,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1547243152
    },
    {
        "content": "<p>Yup, that'll do it. Explains why I wasn't able to find it in the logs :)</p>",
        "id": 154985784,
        "sender_full_name": "Bradley Strecker",
        "timestamp": 1547302915
    },
    {
        "content": "<p>Already spoke about it with Bradley, but posting it for reference: it would be nice to have a smaller test data set - the current one is so big that we cannot process it in any reasonable time - just importing the patients take hours, so I can never get to the rest of clinical data</p>",
        "id": 154989041,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1547309153
    },
    {
        "content": "<p>(we are inserting the data in our db, and that takes time for 350K patient)</p>",
        "id": 154989089,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1547309185
    }
]