[
    {
        "content": "<p>I think we had discussed this one at the last connectathon, but unfortunately I didn't open any thread / issue to track it.<br>\nOur server implementation is failing the following two tests from the inferno (community edition) Bulk Data Test:</p>\n<ul>\n<li>Auth-01.0.0: Kick-off request at the system-level export endpoint requires authorization header</li>\n<li>Auth-01.0.1: Kick-off request at the system-level export endpoint rejects invalid token</li>\n</ul>\n<p>In both cases, our auth layer is intercepting the call and rejecting the invalid request with a response code of 401 and no body.<br>\nI believe that behavior should be valid (and I think folks agreed in september), but I'm hoping to follow up on that and make a specific change request this time around (so that I don't forget and then re-discover it next connectathon).</p>",
        "id": 267640493,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1641932945
    },
    {
        "content": "<p>For Auth-01.0.0, we are failing with this messages:</p>\n<div class=\"codehilite\"><pre><span></span><code>Error: In case of error, the response body must be an OperationOutcome Expected the request to return an OperationOutcome but the response has no body.\n\nThe server does not respond with JSON regardless of the accept header! Error: the server must reply with JSON content-type header (application/json, application/json+fhir or application/fhir+json).\n</code></pre></div>\n<p>But I don't think the Content-Type header matters much when we return an empty response.</p>",
        "id": 267641027,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1641933203
    },
    {
        "content": "<p>For Auth-01.0.1, we are failing with this message:</p>\n<div class=\"codehilite\"><pre><span></span><code>Error: In case of error, the response body must be an OperationOutcome Expected the request to return an OperationOutcome but the response has no body.\n\n The server does not respond with JSON regardless of the accept header!\n</code></pre></div>",
        "id": 267641063,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1641933236
    },
    {
        "content": "<p>Do we agree that servers are allowed to return a 401 with an empty body for unauthorized $export requests (instead of always returning an OperationOutcome)?<br>\nI think that was asserted in the bulk data v2 timeframe, but not sure if this clarification ever made it into the spec or not...</p>",
        "id": 267641177,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1641933285
    },
    {
        "content": "<p>ok, I think I tracked down the specific clarification I was thinking of:  <a href=\"https://github.com/HL7/bulk-data/pull/94/files\">https://github.com/HL7/bulk-data/pull/94/files</a><br>\nso I think we just need advice on where to open this issue / how to help progress it along</p>",
        "id": 267641645,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1641933546
    },
    {
        "content": "<p>Yup, agree that this behavior is in line with the v2 requirements. Can you open an issue at <a href=\"https://github.com/smart-on-fhir/bdt\">https://github.com/smart-on-fhir/bdt</a> ?</p>",
        "id": 267652389,
        "sender_full_name": "Dan Gottlieb",
        "timestamp": 1641938651
    },
    {
        "content": "<p>actually, it looks like vlad already fixed this one in bdt:  <a href=\"https://github.com/smart-on-fhir/bdt/issues/7\">https://github.com/smart-on-fhir/bdt/issues/7</a><br>\nso i guess we just need inferno to pick up an updated version.</p>",
        "id": 267666129,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1641946543
    },
    {
        "content": "<p>I opened <a href=\"https://github.com/onc-healthit/inferno/issues/592\">https://github.com/onc-healthit/inferno/issues/592</a> for it</p>",
        "id": 267671256,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1641950379
    },
    {
        "content": "<p>I admit that our Inferno community edition is kinda fall behind because we are so focused to get program edition done.</p>",
        "id": 267673287,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1641952239
    }
]