[
    {
        "content": "<p>SD needs to make some changes to Composition in R5.<br>\nIs this the correct page describing the build process? <a href=\"https://confluence.hl7.org/display/FHIR/FHIR+Build+Process\">https://confluence.hl7.org/display/FHIR/FHIR+Build+Process</a><br>\nAlso, do I need to use PR for changes, or is it just good faith that I make sure the build isn't broken before committing to the main branch?</p>",
        "id": 257755264,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1634327774
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> and <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 257755281,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1634327784
    },
    {
        "content": "<p>you must do a PR and express the jira tickets it is addressing, and it must pass (long wait)... then you yourself accept the PR, delete the PR, update the jira tickets.</p>",
        "id": 257755771,
        "sender_full_name": "John Moehrke",
        "timestamp": 1634327974
    },
    {
        "content": "<p>seems all that is said on some confluence page, and I didn't see it on the page you found</p>",
        "id": 257755862,
        "sender_full_name": "John Moehrke",
        "timestamp": 1634327990
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span> I meant to follow up sooner... Thanks for the clarification.</p>",
        "id": 259167892,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1635285652
    },
    {
        "content": "<p>I found a confluence page (linked previously)</p>",
        "id": 259167916,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1635285666
    },
    {
        "content": "<p>but, it didn't describe anything about a PR</p>",
        "id": 259167925,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1635285670
    },
    {
        "content": "<p>PR seemed right to me, so that's why I asked</p>",
        "id": 259167964,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1635285682
    },
    {
        "content": "<p>but, now I have a question about the PR... Should it include the <code>vscache</code> files?</p>",
        "id": 259168007,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1635285701
    },
    {
        "content": "<p>For example:<br>\n<a href=\"/user_uploads/10155/V1C--cCL6aL0JHVEeO76jsv3/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/V1C--cCL6aL0JHVEeO76jsv3/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/V1C--cCL6aL0JHVEeO76jsv3/image.png\"></a></div>",
        "id": 259168009,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1635285703
    },
    {
        "content": "<p>I would think the PR should only include the changes I made, not the automatically generated files such as <code>vscache</code></p>",
        "id": 259168115,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1635285741
    },
    {
        "content": "<p>vscache are special files. Right now, it seems to be beneficial to merge them.</p>",
        "id": 259173575,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1635289041
    },
    {
        "content": "<p>yes you need to commit them. They are in response to changes you made (or someone else did, who didn't commit them)</p>",
        "id": 259174780,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635289877
    },
    {
        "content": "<p>huh! OK! Will do. thx</p>",
        "id": 259244191,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1635343686
    },
    {
        "content": "<p>Ok. So, I used to be able to commit to the repo. Looks like my committer privileges were removed. Can someone re-add me as a committer to the FHIR repo? Username <code>seanmcilvenna</code> <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> ?</p>",
        "id": 259404705,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1635434416
    },
    {
        "content": "<p>Hmm.  Last time we pruned was probably 1.5 years ago or more when we yanked everyone who was evidently not monitoring <a class=\"stream\" data-stream-id=\"179294\" href=\"/#narrow/stream/179294-committers.2Fannounce\">#committers/announce</a>.  Are you now actively monitoring <a class=\"stream\" data-stream-id=\"179294\" href=\"/#narrow/stream/179294-committers.2Fannounce\">#committers/announce</a> ? :)</p>",
        "id": 259404891,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1635434508
    },
    {
        "content": "<p>if \"actively monitoring\" is looking at it once a week, yes</p>",
        "id": 259409338,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1635436320
    },
    {
        "content": "<p>I just need to get some changes done to Composition for SDWG</p>",
        "id": 259410861,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1635436878
    },
    {
        "content": "<p>if easier, I can do a PR on my personal github account</p>",
        "id": 259410885,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1635436889
    },
    {
        "content": "<p>and you can merge it for me :)</p>",
        "id": 259410894,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1635436892
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span></p>",
        "id": 259415271,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1635438689
    },
    {
        "content": "<p>So long as you look at it before making commits, that's ok.</p>",
        "id": 259417018,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1635439348
    },
    {
        "content": "<p>Granted</p>",
        "id": 259417022,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1635439352
    },
    {
        "content": "<p>is there something specific I should be on the lookout for? for exmaple \"don't commit anything right now?\"</p>",
        "id": 259417654,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1635439612
    },
    {
        "content": "<p>That's one of the key ones, yup.  More common are things like \"Tx server is going down for a few minutes\".</p>",
        "id": 259419238,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1635440191
    },
    {
        "content": "<p>Committers/announce is super-low-traffic, so whatever messages are there are likely to be relevant - at least if they've been posted recently.</p>",
        "id": 259419335,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1635440229
    },
    {
        "content": "<p>So, I just tried out a PR... Azure Pipelines failed at the Gradle task:</p>\n<blockquote>\n<p>Error: The process '/home/markiantorno/azure-pipelines/_work/2/s/gradlew' failed with exit code 1</p>\n</blockquote>\n<p>I have no idea what this implies... Can you help <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> ?<br>\n<a href=\"https://github.com/HL7/fhir/pull/1478\">https://github.com/HL7/fhir/pull/1478</a></p>",
        "id": 259428860,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1635444200
    },
    {
        "content": "<p>you need to look at the azure pipeline detail.  in this case, it points to an error in the resource validator:</p>\n<div class=\"codehilite\"><pre><span></span><code>Error: null\njava.lang.NullPointerException\n    at java.util.ResourceBundle.containsKey(ResourceBundle.java:1821)\n    at org.hl7.fhir.utilities.i18n.I18nBase.messageExistsForLocale(I18nBase.java:50)\n    at org.hl7.fhir.utilities.i18n.I18nBase.formatMessage(I18nBase.java:67)\n    at org.hl7.fhir.validation.BaseValidator.ruleHtml(BaseValidator.java:425)\n    at org.hl7.fhir.definitions.validation.ResourceValidator.rule(ResourceValidator.java:124)\n    at org.hl7.fhir.definitions.validation.ResourceValidator.checkSearchParams(ResourceValidator.java:383)\n    at org.hl7.fhir.definitions.validation.ResourceValidator.check(ResourceValidator.java:217)\n    at org.hl7.fhir.definitions.validation.ResourceValidator.check(ResourceValidator.java:594)\n    at org.hl7.fhir.tools.publisher.Publisher.validate(Publisher.java:1791)\n    at org.hl7.fhir.tools.publisher.Publisher.execute(Publisher.java:613)\n    at org.hl7.fhir.tools.publisher.Publisher.main(Publisher.java:478)\n</code></pre></div>\n<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> <span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span></p>",
        "id": 259429640,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1635444542
    },
    {
        "content": "<p>huh... not sure I know what to do with that, either. :P<br>\nI ran <code>publish</code> on my local machine and it finished successfully. Where's the discrepency?</p>",
        "id": 259434410,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1635446829
    },
    {
        "content": "<p>there's nothing <em>you</em> can do we need grahame or mark to chime in.</p>",
        "id": 259435292,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1635447143
    },
    {
        "content": "<p>Just to double check, can you run <code>clean</code> and then <code>publish</code> again locally? I am assuming you've checked for any missed files via<br>\n<code>git ls-files -o --exclude-standard</code></p>",
        "id": 259444052,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1635451264
    },
    {
        "content": "<p>there were no missed files.<br>\nrunning <code>clean</code> and <code>publish</code> again locally</p>",
        "id": 259453984,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1635456148
    },
    {
        "content": "<p>so is this sorted?</p>",
        "id": 259479667,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635479350
    },
    {
        "content": "<p>no... trying to figure out why it's failing still</p>",
        "id": 259533507,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1635518280
    },
    {
        "content": "<p>I ran <code>clean</code> and <code>publish</code>, and sure enough, found errors that didn't show up previously</p>",
        "id": 259533562,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1635518292
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>Candidate for CodeableReference: [ClinicalImpression.prognosis]\nThis was a Full Build                                                      1.524  35sec 1940MB\nFHIR build failure @ Thu, Oct 28, 2021 14:22-0700                          1.514  37sec 1940MB\nError: null\njava.lang.NullPointerException\n        at java.base/java.util.ResourceBundle.containsKey(ResourceBundle.java:2302)\n        at org.hl7.fhir.utilities.i18n.I18nBase.messageExistsForLocale(I18nBase.java:50)\n        at org.hl7.fhir.utilities.i18n.I18nBase.formatMessage(I18nBase.java:67)\n        at org.hl7.fhir.validation.BaseValidator.ruleHtml(BaseValidator.java:425)\n        at org.hl7.fhir.definitions.validation.ResourceValidator.rule(ResourceValidator.java:124)\n        at org.hl7.fhir.definitions.validation.ResourceValidator.checkSearchParams(ResourceValidator.java:383)\n        at org.hl7.fhir.definitions.validation.ResourceValidator.check(ResourceValidator.java:217)\n        at org.hl7.fhir.definitions.validation.ResourceValidator.check(ResourceValidator.java:594)\n        at org.hl7.fhir.tools.publisher.Publisher.validate(Publisher.java:1791)\n        at org.hl7.fhir.tools.publisher.Publisher.execute(Publisher.java:613)\n        at org.hl7.fhir.tools.publisher.Publisher.main(Publisher.java:478)\n</code></pre></div>",
        "id": 259533567,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1635518295
    },
    {
        "content": "<p>My changes were entirely related to <code>Composition</code>, though... so I'm not sure why I'm getting errors on <code>ClinicalImpression</code></p>",
        "id": 259533625,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1635518322
    },
    {
        "content": "<p><code>ClinicalImpression</code> doesn't <em>appear</em> to relate to <code>Composition</code>...</p>",
        "id": 259533650,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1635518335
    },
    {
        "content": "<p>I get those from time to time.  The only way I've found to fix it is a full delete and reclone of the git.</p>",
        "id": 259535523,
        "sender_full_name": "David Pyke",
        "timestamp": 1635519146
    },
    {
        "content": "<p>ugh</p>",
        "id": 259541917,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1635521800
    },
    {
        "content": "<p>really?</p>",
        "id": 259541944,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1635521815
    },
    {
        "content": "<p>Nothing else has worked for me.  OTher people may have better ideas</p>",
        "id": 259542160,
        "sender_full_name": "David Pyke",
        "timestamp": 1635521908
    },
    {
        "content": "<p>maybe someone can help me understand why the Azure checks on the GitHub PR failed? The error seems to be different? I'd like to restart the pipeline run to see if it solves itself and was just glitch. But, I can't seem to find an option to do that, either</p>",
        "id": 259542213,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1635521931
    },
    {
        "content": "<p><a href=\"https://github.com/HL7/fhir/pull/1478\">https://github.com/HL7/fhir/pull/1478</a></p>",
        "id": 259542222,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1635521935
    },
    {
        "content": "<p>Looking at the PR, I see this:</p>\n<p><a href=\"/user_uploads/10155/6CjbUfoGHijjGouX3FbWtFKB/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/6CjbUfoGHijjGouX3FbWtFKB/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/6CjbUfoGHijjGouX3FbWtFKB/image.png\"></a></div><p>Things I don't know:</p>\n<ul>\n<li>is this file supposed to be committed?</li>\n<li>why are there XML entities in the file instead of a single quote?</li>\n<li>is this related to the NPE?</li>\n</ul>",
        "id": 259549229,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1635524711
    },
    {
        "content": "<p>I was told those files <em>should</em> be part of the commit... See earlier I asked with a screenshot if those extra tools and vscache files should be included, and Grahame indicated they shoudl be</p>",
        "id": 259556947,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1635528384
    },
    {
        "content": "<p>I think we both meant vscache... But in this case the original file was wrong, so it should be corrected. I am running the publish locally on master, and will fix the single quote, and run again. Unfortunately I am running the build in a VM, so it takes a bit longer than usual.</p>",
        "id": 259557348,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1635528574
    },
    {
        "content": "<p>The build is failing now due to examples with invalid NDC, LOINC and SNOMED codes. Something must have changed in the <a href=\"http://tx.fhir.org\">tx.fhir.org</a> server to cause the amount of errors.<br>\n<span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 259562418,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1635530691
    },
    {
        "content": "<p>I think what has actually changed is more likely in the validator in that it is now caring about some things that were being overlooked before - <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> can comment on this.  I'm pretty sure that both SNOMED (at least the International and US Editions, and probably all of them) and LOINC (except possibly for some LOINC answer lists and value sets?) are correct on <a href=\"http://tx.fhir.org\">tx.fhir.org</a>.  NDC has issues where the updated version drops codes that were included in earlier versions, since those products are no longer being marketed.  We may have to do something about that.  But if we do something it can't be based solely on what NDC provides as current - so the issue there is most likely not with the validator or <a href=\"http://tx.fhir.org\">tx.fhir.org</a>, but with NDC itself.</p>",
        "id": 259564071,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1635531503
    },
    {
        "content": "<p>see thread in <a class=\"stream\" data-stream-id=\"179249\" href=\"/#narrow/stream/179249-Medication\">#Medication</a></p>",
        "id": 259566292,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635532658
    },
    {
        "content": "<p>It's not just NDC codes, there are LOINC and SNOMED codes as well:</p>\n<blockquote>\n<p>Summary: Errors=47, Warnings=3786, Information messages=657<br>\nERROR @ CapabilityStatement.url (line 0, col0): capabilitystatement-example:: CapabilityStatement.url: UUIDs must be valid (src = InstanceValidator)<br>\nERROR @ CapabilityStatement2.url (line 0, col0): capabilitystatement2-example:: CapabilityStatement2.url: UUIDs must be valid (src = InstanceValidator)<br>\nERROR @ Citation.url (line 0, col0): citation-example-systematic-meta-review:: Citation.url: Canonical URLs must be absolute URLs if they are not fragment references (Citation/citation-example-systematic-meta-review) (src = InstanceValidator)<br>\nERROR @ Composition.category[0].coding[0] (line 0, col0): composition-example:: Composition.category[0].coding[0]: The code \"LP173421-1\" is not valid in the system <a href=\"http://loinc.org\">http://loinc.org</a>; The code provided (http://loinc.org#LP173421-1) is not valid in the value set 'All codes known to the system' (from <a href=\"http://tx.fhir.org/r4\">http://tx.fhir.org/r4</a>) for 'http://loinc.org#LP173421-1' (src = TerminologyEngine)<br>\nERROR @ Composition.category[0].coding[0] (line 0, col0): composition-example-mixed:: Composition.category[0].coding[0]: The code \"LP173421-1\" is not valid in the system <a href=\"http://loinc.org\">http://loinc.org</a>; The code provided (http://loinc.org#LP173421-1) is not valid in the value set 'All codes known to the system' (from <a href=\"http://tx.fhir.org/r4\">http://tx.fhir.org/r4</a>) for 'http://loinc.org#LP173421-1' (src = TerminologyEngine)<br>\n[...]</p>\n</blockquote>\n<p>and </p>\n<blockquote>\n<p>[...]<br>\nERROR @ MedicationDispense.quantity (line 0, col0): medicationdispense0314:: MedicationDispense.quantity: Unable to find code 415818005 in <a href=\"http://snomed.info/sct\">http://snomed.info/sct</a> (version <a href=\"http://snomed.info/sct/900000000000207008/version/20190731\">http://snomed.info/sct/900000000000207008/version/20190731</a>); The code \"415818005\" is not valid in the system <a href=\"http://snomed.info/sct\">http://snomed.info/sct</a>; The code provided (<a href=\"http://snomed.info/sct#415818005\">http://snomed.info/sct#415818005</a>) is not valid in the value set 'All codes known to the system' (from <a href=\"http://tx.fhir.org/r4\">http://tx.fhir.org/r4</a>) for '<a href=\"http://snomed.info/sct#415818005\">http://snomed.info/sct#415818005</a>' (src = TerminologyEngine)<br>\nERROR @ MedicationDispense.quantity (line 0, col0): medicationdispense0317:: MedicationDispense.quantity: Unable to find code 415818005 in <a href=\"http://snomed.info/sct\">http://snomed.info/sct</a> (version <a href=\"http://snomed.info/sct/900000000000207008/version/20190731\">http://snomed.info/sct/900000000000207008/version/20190731</a>); The code \"415818005\" is not valid in the system <a href=\"http://snomed.info/sct\">http://snomed.info/sct</a>; The code provided (<a href=\"http://snomed.info/sct#415818005\">http://snomed.info/sct#415818005</a>) is not valid in the value set 'All codes known to the system' (from <a href=\"http://tx.fhir.org/r4\">http://tx.fhir.org/r4</a>) for '<a href=\"http://snomed.info/sct#415818005\">http://snomed.info/sct#415818005</a>' (src = TerminologyEngine)<br>\nERROR @ MedicationDispense.contained[0].ofType(Medication).code.coding[0] (line 0, col0): medicationdispense0319:: MedicationDispense.contained[0].ofType(Medication).code.coding[0]: Code \"33261-141-20\" not found in NDC; The code \"33261-141-20\" is not valid in the system <a href=\"http://hl7.org/fhir/sid/ndc\">http://hl7.org/fhir/sid/ndc</a>; The code provided (<a href=\"http://hl7.org/fhir/sid/ndc#33261-141-20\">http://hl7.org/fhir/sid/ndc#33261-141-20</a>) is not valid in the value set 'All codes known to the system' (from <a href=\"http://tx.fhir.org/r4\">http://tx.fhir.org/r4</a>) for '<a href=\"http://hl7.org/fhir/sid/ndc#33261-141-20\">http://hl7.org/fhir/sid/ndc#33261-141-20</a>' (src = TerminologyEngine)</p>\n</blockquote>",
        "id": 259567251,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1635533097
    },
    {
        "content": "<p>I don't get LOINC and Snomed errors - weird?</p>",
        "id": 259571726,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635535438
    }
]