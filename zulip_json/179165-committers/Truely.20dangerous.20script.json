[
    {
        "content": "<p>Folks:  A word of warning.  I just ran <code>clean.sh</code> in the fhir base directory.  If guides/ccda2/output doesn't exist this delightful little script ends up changing two directories <em>up</em> from the fhir directory, executing a batch delete then (as guides/ccda2/qa doesn't exist) goes three MORE directories up and tries again.  One way or another it ends up executing a \"find . -type f -delete\" in your <em>root</em> directory.  We're testing the limits of the Mac time machine at the moment, but my machine will never be the same...</p>",
        "id": 158927248,
        "sender_full_name": "Harold Solbrig",
        "timestamp": 1550616771
    },
    {
        "content": "<p>I thought we had fixed this.  <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> <span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> ?</p>",
        "id": 158928884,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1550618043
    },
    {
        "content": "<p>Man, I sure wish you had...<br>\n... on a clean disk you can seek forever</p>",
        "id": 158928949,
        "sender_full_name": "Harold Solbrig",
        "timestamp": 1550618116
    },
    {
        "content": "<p><a href=\"https://github.com/HL7/fhir/blob/master/clean.sh\" target=\"_blank\" title=\"https://github.com/HL7/fhir/blob/master/clean.sh\">https://github.com/HL7/fhir/blob/master/clean.sh</a></p>",
        "id": 158928998,
        "sender_full_name": "Harold Solbrig",
        "timestamp": 1550618163
    },
    {
        "content": "<p>there was a complaint about it, and I thought someone was going to do it.. but don't remember who</p>",
        "id": 158930414,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1550619456
    },
    {
        "content": "<p><a href=\"https://github.com/HL7/fhir/pull/452\" target=\"_blank\" title=\"https://github.com/HL7/fhir/pull/452\">https://github.com/HL7/fhir/pull/452</a></p>",
        "id": 158930922,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1550620000
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> can you check my changes? I can't test if they work</p>",
        "id": 158930929,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1550620010
    },
    {
        "content": "<p>So <a href=\"#narrow/stream/179165-committers/topic/clean.2Esh\" title=\"#narrow/stream/179165-committers/topic/clean.2Esh\">historically</a> the todo was just to delete this script and use git clean.</p>",
        "id": 158988583,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1550678810
    },
    {
        "content": "<p>The current version still has some troubling bits, like <code>find -name *class -delete</code>, so if it's run in the wrong place it'll delete any files with <code>class</code> at the end of the name, rather than <code>.class</code>.  And overall, running it from the wrong place could delete files outside of the fhir repo checkout, which is not great.</p>",
        "id": 158988755,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1550678898
    },
    {
        "content": "<p>that script cleaned my mac as well and I set up time machine <em>afterwards</em> and made sure .gitignores did not ignore my python scripts after that .   So I would suggest it be removed.</p>",
        "id": 158993078,
        "sender_full_name": "Eric Haas",
        "timestamp": 1550682147
    },
    {
        "content": "<p>I've learned a lot about what you can and can't do with time machine.  I'm back and limping but dread the day I have to reboot.  No way to be sure that I've restored everything I need until then</p>",
        "id": 158993215,
        "sender_full_name": "Harold Solbrig",
        "timestamp": 1550682281
    },
    {
        "content": "<p>I had most of my work on Github and work on a pc too so that was a savior.</p>",
        "id": 158993323,
        "sender_full_name": "Eric Haas",
        "timestamp": 1550682378
    },
    {
        "content": "<p>Yup, although time machine doesn't do hidden files without some cooercion.  It was /usr that really hit me hard...</p>",
        "id": 158993347,
        "sender_full_name": "Harold Solbrig",
        "timestamp": 1550682420
    },
    {
        "content": "<p>I'm thinking that I may just start working inside docker containers (VM's).  A whole lot safer</p>",
        "id": 158993384,
        "sender_full_name": "Harold Solbrig",
        "timestamp": 1550682466
    },
    {
        "content": "<p>I would not like to use git clean because this deletes only generated files, not all files. A very different thing.</p>",
        "id": 159010236,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1550693474
    },
    {
        "content": "<p>we should add a confirm step : This will delete all generated files in [dir]: Continue [y/N] but I don't know how to do that in bash. Does someone want to do that?</p>",
        "id": 159010544,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1550693692
    },
    {
        "content": "<p>I think the \"select\" shell statement lets you do this.</p>",
        "id": 159012110,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1550694858
    },
    {
        "content": "<p>is that a 'I'll do it'?</p>",
        "id": 159012480,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1550695089
    },
    {
        "content": "<blockquote>\n<p>is that a 'I'll do it'?</p>\n</blockquote>\n<p>I second the motion for <span class=\"user-mention\" data-user-id=\"191380\">@Elliot Silver</span> to fix..   :-)</p>",
        "id": 159013946,
        "sender_full_name": "John Moehrke",
        "timestamp": 1550696107
    },
    {
        "content": "<p>I think my first act as a committer should start somewhere other than a “truly dangerous script” — for your sake as much as mine.</p>",
        "id": 159014132,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1550696258
    },
    {
        "content": "<p>I'll volunteer to catch it.  (Seeings as how I coined the term...)</p>",
        "id": 159014247,
        "sender_full_name": "Harold Solbrig",
        "timestamp": 1550696336
    },
    {
        "content": "<p>Can you just get rid of all navigation that changes directory up?  Put the root folder in a variable and then express all paths as absolute paths based on that root?  That would seem safer than a check that people might not look at properly</p>",
        "id": 159014458,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1550696471
    },
    {
        "content": "<p>Yup - although a confirm would be good anyway...</p>",
        "id": 159014652,
        "sender_full_name": "Harold Solbrig",
        "timestamp": 1550696613
    },
    {
        "content": "<p>I already made those kind of changes</p>",
        "id": 159014803,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1550696729
    },
    {
        "content": "<p>Saw that, which makes it easier.  Want to add a double check and fix it to catch the \".bak\" and \".class\" files as well as the IG bits that made it go wacko in the first place.</p>",
        "id": 159015417,
        "sender_full_name": "Harold Solbrig",
        "timestamp": 1550697220
    },
    {
        "content": "<p>Tell you what, I'm going to test it in a VM however...</p>",
        "id": 159015492,
        "sender_full_name": "Harold Solbrig",
        "timestamp": 1550697256
    },
    {
        "content": "<p>well, I already removed the wacko bits. the remaining concern is that you aren't running it in the right folder</p>",
        "id": 159015979,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1550697636
    },
    {
        "content": "<p>What of the ccda2/qa and temp directories.  That said, happy to let it be...</p>",
        "id": 159016022,
        "sender_full_name": "Harold Solbrig",
        "timestamp": 1550697678
    },
    {
        "content": "<p>I removed those references. make sure you have the latest copty</p>",
        "id": 159016033,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1550697693
    },
    {
        "content": "<p>Should they be removed?</p>",
        "id": 159016589,
        "sender_full_name": "Harold Solbrig",
        "timestamp": 1550698138
    },
    {
        "content": "<p>yes they are not used anymore</p>",
        "id": 159017455,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1550698761
    },
    {
        "content": "<p>I mean, those directories do not exist anymore</p>",
        "id": 159017471,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1550698774
    },
    {
        "content": "<p>Gotcha.  IMO we're in good enough shape and have other things to do -- I'll catch the '.' on bak and class and call it  good</p>",
        "id": 159017630,
        "sender_full_name": "Harold Solbrig",
        "timestamp": 1550698887
    },
    {
        "content": "<p>k</p>",
        "id": 159017645,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1550698900
    },
    {
        "content": "<p>If those directories <em>had</em> existed, I'd still have my computer...</p>",
        "id": 159017727,
        "sender_full_name": "Harold Solbrig",
        "timestamp": 1550698928
    },
    {
        "content": "<p>Done</p>",
        "id": 159019084,
        "sender_full_name": "Harold Solbrig",
        "timestamp": 1550699969
    },
    {
        "content": "<p>This experience was a teaching moment for me.  Never run a bash script I didn't write or test.  Never run anything called 'clean'  :-)</p>",
        "id": 159090128,
        "sender_full_name": "Eric Haas",
        "timestamp": 1550772452
    }
]