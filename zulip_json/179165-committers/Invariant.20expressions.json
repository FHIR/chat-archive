[
    {
        "content": "<p>Are we still populating the XPath expression definition?</p>",
        "id": 154012797,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1540608890
    },
    {
        "content": "<p>If so, need a little help with the fhirpath expression <code>appointment.cancelationReason.exists() implies (Appointment.status='no-show' or Appointment.status='cancelled')</code> as XPath</p>",
        "id": 154012798,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1540608986
    },
    {
        "content": "<p>I came up with this, hope its right - tested ok with an online tester</p>\n<div class=\"codehilite\"><pre><span></span>not(exists(Appointment/cancellationReason)) or (exists(Appointment/cancellationReason) and (Appointment/status/@value=&#39;no-show&#39; or Appointment/status/@value=&#39;cancelled&#39;))\n</pre></div>",
        "id": 154012799,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1540609476
    },
    {
        "content": "<p>Why is appointment part of the invariant?  Isn't that the context?</p>",
        "id": 154012807,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1540613186
    },
    {
        "content": "<p>This invariant is on the appointment resource, in the fhirpath expression its not required, but others have it and is more illustrative</p>",
        "id": 154012809,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1540617347
    },
    {
        "content": "<p>And in the XPath, isn't the top level the context, so has to be applied there?</p>",
        "id": 154012810,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1540617387
    },
    {
        "content": "<p>In XPath the context would be the Appointment resource, so the invariant refers to nodes that exist beneath that</p>",
        "id": 154012819,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1540619208
    },
    {
        "content": "<p>not(exists(f:cancellationReason)) or f:status/@value=('no-show', 'cancelled')</p>",
        "id": 154012820,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1540619277
    },
    {
        "content": "<p>Thanks, I'll update it</p>",
        "id": 154012821,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1540619642
    }
]