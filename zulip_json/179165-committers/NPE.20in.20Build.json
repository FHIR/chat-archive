[
    {
        "content": "<p>I'm getting a NullPointerException in the build that I don't get locally:</p>\n<div class=\"codehilite\"><pre><span></span><code>This was a Full Build                                                      2.722  52sec  862MB\nFHIR build failure @ Wed, Apr 7, 2021 14:09+0000                           0.109  52sec  862MB\nError: null\njava.lang.NullPointerException\n    at org.hl7.fhir.definitions.validation.ResourceValidator.noExternals(ResourceValidator.java:1199)\n    at org.hl7.fhir.definitions.validation.ResourceValidator.check(ResourceValidator.java:1155)\n    at org.hl7.fhir.definitions.validation.ResourceValidator.checkElement(ResourceValidator.java:728)\n    at org.hl7.fhir.definitions.validation.ResourceValidator.checkElement(ResourceValidator.java:779)\n    at org.hl7.fhir.definitions.validation.ResourceValidator.check(ResourceValidator.java:184)\n    at org.hl7.fhir.definitions.validation.ResourceValidator.check(ResourceValidator.java:594)\n    at org.hl7.fhir.tools.publisher.Publisher.validate(Publisher.java:1786)\n    at org.hl7.fhir.tools.publisher.Publisher.execute(Publisher.java:608)\n    at org.hl7.fhir.tools.publisher.Publisher.main(Publisher.java:473)\n</code></pre></div>\n<p>Anyone seen this/have any ideas where to check?</p>",
        "id": 233501094,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1617806935
    },
    {
        "content": "<p>Looks like you've got a binding with no ValueSet declared and it's not handling that gracefully.  No clue why it would be different locally vs. in the build...  If you can share the branch, <span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span> might be able to dig and fix.</p>",
        "id": 233513910,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1617810414
    },
    {
        "content": "<p>Thank you for the hint, that helped track down that I missed committing the value set, I think that was it</p>",
        "id": 233524463,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1617814363
    },
    {
        "content": "<p>I'm also getting an NPE, but for a different reason:</p>\n<div class=\"codehilite\"><pre><span></span><code>Candidate for CodeableReference: [ClinicalImpression.prognosis]\nThis was a Full Build                                                      0.742  26sec 1536MB\nFHIR build failure @ Fri, Nov 5, 2021 06:43-0700                           0.965  27sec 1536MB\nError: null\njava.lang.NullPointerException\n        at java.base/java.util.ResourceBundle.containsKey(ResourceBundle.java:2302)\n        at org.hl7.fhir.utilities.i18n.I18nBase.messageExistsForLocale(I18nBase.java:50)\n        at org.hl7.fhir.utilities.i18n.I18nBase.formatMessage(I18nBase.java:67)\n        at org.hl7.fhir.validation.BaseValidator.ruleHtml(BaseValidator.java:425)\n        at org.hl7.fhir.definitions.validation.ResourceValidator.rule(ResourceValidator.java:124)\n        at org.hl7.fhir.definitions.validation.ResourceValidator.checkSearchParams(ResourceValidator.java:383)\n        at org.hl7.fhir.definitions.validation.ResourceValidator.check(ResourceValidator.java:217)\n        at org.hl7.fhir.definitions.validation.ResourceValidator.check(ResourceValidator.java:594)\n        at org.hl7.fhir.tools.publisher.Publisher.validate(Publisher.java:1791)\n        at org.hl7.fhir.tools.publisher.Publisher.execute(Publisher.java:613)\n        at org.hl7.fhir.tools.publisher.Publisher.main(Publisher.java:478)\n</code></pre></div>\n<p>Can someone help me figure this out. It is demonstrated by this PR: <a href=\"https://github.com/HL7/fhir/pull/1478\">https://github.com/HL7/fhir/pull/1478</a><br>\nI made changes to Composition's StructureDefinition and examples. I didn't touch ClinicalImpression. I've also looked at ClinicalImpression and don't see <code>.prognosisCodeableReference</code>... There <em>is no</em> CodeableReference within the ClinicalImpression profile, so I'm not sure why it's talking about a \"candidate for CodeableReference\" in the error.</p>",
        "id": 260407527,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1636120327
    },
    {
        "content": "<p>the pattern of definitions suggests to the build that prognosis should be a CodeableReference. So it won't be - wouldn't say that if it was. But that's nothing to do with your build error</p>",
        "id": 260459540,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1636143686
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> so what do I do here? the main build doesn't seem to be failing... Only my branch. But, I haven't touched ClinicalImpression! I don't know how to get this dang PR to build!</p>",
        "id": 261147162,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1636644374
    },
    {
        "content": "<p>I was told , and it worked, to clone FHIR core fresh. make the changes you need to THAT clone.. and it will work fine. It seems old clones get somehow out-of-sync.</p>",
        "id": 261147303,
        "sender_full_name": "John Moehrke",
        "timestamp": 1636644441
    },
    {
        "content": "<p>ugh. that's a timely solution when I already don't have any time.</p>",
        "id": 261148195,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1636644875
    },
    {
        "content": "<p><em>sigh</em></p>",
        "id": 261148202,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1636644880
    },
    {
        "content": "<p>you already have your changes.. so just copy those files to the new clone. bingo, done</p>",
        "id": 261158255,
        "sender_full_name": "John Moehrke",
        "timestamp": 1636649751
    },
    {
        "content": "<p>the problem is not with what you edited.</p>",
        "id": 261158341,
        "sender_full_name": "John Moehrke",
        "timestamp": 1636649777
    },
    {
        "content": "<p>and the ClinicalImpression is <em>not</em> the error.  That was just an information message that was printed out before the build failed.  This error is in the publisher code and <span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span> or <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> need to find it and squash it.  You can do what John suggests and copy your changes over, but I suspect that whatever you did has caused some error but when it goes to spit out the error, it can't find the appropriate message and that is failing.</p>",
        "id": 261159015,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1636650090
    },
    {
        "content": "<p>my experience was that I was getting dozens of errors in other resources. I cloned new, copied my edited changes to that clone, and built. zero errors.</p>",
        "id": 261160878,
        "sender_full_name": "John Moehrke",
        "timestamp": 1636650915
    },
    {
        "content": "<p>I thank <span class=\"user-mention\" data-user-id=\"192587\">@David Pyke</span> for that recommendation.</p>",
        "id": 261160929,
        "sender_full_name": "John Moehrke",
        "timestamp": 1636650948
    },
    {
        "content": "<p>Trying your suggesting now <span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span>...<br>\nRe-cloned the repository, doing a fresh (no changes) publish, and getting errors:</p>\n<div class=\"codehilite\"><pre><span></span><code>FHIR build failure @ Wed, Nov 17, 2021 09:16-0800                           0.96 2258sec 1740MB\nError: Resource Examples failed instance validation\norg.hl7.fhir.tools.publisher.ExampleInspector$EValidationFailed: Resource Examples failed instance validation\n        at org.hl7.fhir.tools.publisher.ExampleInspector.summarise(ExampleInspector.java:421)\n        at org.hl7.fhir.tools.publisher.Publisher.validationProcess(Publisher.java:5821)\n        at org.hl7.fhir.tools.publisher.Publisher.execute(Publisher.java:703)\n        at org.hl7.fhir.tools.publisher.Publisher.main(Publisher.java:487)\n</code></pre></div>",
        "id": 261824590,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1637172630
    },
    {
        "content": "<p>well, last updates by Grahame are failing. so, yes <a class=\"stream\" data-stream-id=\"179297\" href=\"/#narrow/stream/179297-committers.2Fnotification\">#committers/notification</a> is important to follow</p>",
        "id": 261825015,
        "sender_full_name": "John Moehrke",
        "timestamp": 1637172811
    },
    {
        "content": "<p>yah, glanced. missed it</p>",
        "id": 261828426,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1637174236
    },
    {
        "content": "<p>should be building OK for me by the end of the day</p>",
        "id": 261856071,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1637186304
    },
    {
        "content": "<p>Looking through <a class=\"stream\" data-stream-id=\"179297\" href=\"/#narrow/stream/179297-committers.2Fnotification\">#committers/notification</a> can't see anything about the build being fixed... <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> did you ever get it working again? I just tried cleaning and re-publishing the core fhir spec, and it failed with the same issue as above. Something more I need to do? Or it just isn't fixed yet?</p>",
        "id": 261943911,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1637249993
    },
    {
        "content": "<p>I spent all day wrangling with the build pipeline</p>",
        "id": 261968640,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1637259882
    },
    {
        "content": "<p>ok, in , and updated</p>",
        "id": 261988885,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1637268729
    }
]