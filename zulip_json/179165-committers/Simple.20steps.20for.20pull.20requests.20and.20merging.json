[
    {
        "content": "<p>I hope the following may help people better navigate git and GitHub (within the context for <code>master</code> and <code>R4B</code>)</p>\n<p><strong>Background</strong><br>\nAs far as git is concerned, <code>master</code> and <code>R4B</code> are just branches in the FHIR repository. Github layers functionality on top of git for features like <em>pull requests</em> to help with managing repositories. </p>\n<p>Pull requests in Github can be done from a branch, or from a fork. The description below is for pull requests from a branch. As far as I know, forks are not used in the current process.</p>\n<p><strong>First time</strong><br>\nClone the  repository - note that it will bring information about all branches. I prefer using ssh, so the command is</p>\n<div class=\"codehilite\"><pre><span></span><code>git clone git@github.com:HL7/fhir.git\n</code></pre></div>\n<p>Using a URL, it would look like this:</p>\n<div class=\"codehilite\"><pre><span></span><code>git clone https://github.com/HL7/fhir.git\n</code></pre></div>\n<p><strong>Which branch?</strong><br>\nWhen you first clone the repository, you are placed in the <code>master</code> branch. If you need to do work that will go in the <code>R4B</code> branch, you can switch to it using</p>\n<div class=\"codehilite\"><pre><span></span><code>git checkout R4B\n</code></pre></div>\n<p>Now, make sure you can successfully build the branch you are interested in, to confirm that your local setup is working.</p>\n<p><strong>Creating your local development branch</strong><br>\nYou can confirm that you are starting from the correct branch using the <code>git branch</code> command, which will list all local branches, and show you which the currently checked out branch is. At this point you can create you own branch:</p>\n<div class=\"codehilite\"><pre><span></span><code>git checkout -b myCoolBranch\n</code></pre></div>\n<p>You will be in the new branch, and ready to make your changes</p>\n<p><strong>Committing your changes</strong><br>\nNew files need to be added explicitly with the <code>git add</code> command. Once added, subsequent changes can be committed with a single command:</p>\n<div class=\"codehilite\"><pre><span></span><code>git commit -am &quot;helpful message&quot;\n</code></pre></div>\n<p><strong>Re-sync with original branch</strong><br>\nThe following commands will make sure any changes to <code>R4B</code> (or <code>master</code>) since the last time you pulled them from Github  are accounted for</p>\n<div class=\"codehilite\"><pre><span></span><code>git checkout R4B\ngit pull origin R4B\ngit checkout myCoolBranch\n</code></pre></div>\n<p>If there were changes to <code>R4B</code> (or <code>master</code>), you must merge them to your branch (make sure that you are in your development branch, in this example <code>myCoolBranch</code>):</p>\n<div class=\"codehilite\"><pre><span></span><code>git merge --no-ff R4B\n</code></pre></div>\n<p><em>The <code>--no-ff</code>flag is optional, it preserves individual commits - I don't know if this is helpful or not in the long run.</em></p>\n<p><strong>Build your branch</strong><br>\nThis will maximize the chances that the changes are going to be successfully merged in the end.</p>\n<p><strong>Push your branch</strong></p>\n<div class=\"codehilite\"><pre><span></span><code>git push origin myCoolBranch\n</code></pre></div>\n<p><strong>Create a pull request</strong><br>\nNow, if you got to Github you will see your branch and you can create the pull request.</p>\n<p>I believe following these basic steps will make the process less prone to encountering issues. If something is wrong, or can be improved, please chime in.</p>",
        "id": 227816947,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1614279052
    },
    {
        "content": "<p>This is wonderful advice to people who may not be experienced with git and branching.  I do note that we need an equivalent article for people who use forks as I see that many people have been doing that.</p>",
        "id": 227820311,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1614280300
    },
    {
        "content": "<p>Given that forks are for taking the content and doing something different with it, rather than managing the development of the content, maybe we should be more explicitly discouraging the use of forks? </p>\n<p>I definitely don't know enough about it to make suggestions on making pull requests work from forks.</p>",
        "id": 227821988,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1614280935
    },
    {
        "content": "<p>the issue with discouraging forks is a) people have been told to do that rather than branch and b) branching requires committer access so we'd need to be given committer access to more people.  Neither of those are showstoppers.</p>",
        "id": 227829046,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1614283256
    },
    {
        "content": "<p>I have enabled forking access to the secure files in the pipeline</p>",
        "id": 227829438,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1614283394
    },
    {
        "content": "<p>This should no longer be an issue</p>",
        "id": 227829450,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1614283399
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> <span class=\"user-mention\" data-user-id=\"191321\">@David Hay</span>  - is using fork-based pull requests something that FMG needs to address? I have no idea if there are any implications whatsoever, and it could be that is has already been discussed and dealt with.</p>",
        "id": 227845191,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1614289861
    },
    {
        "content": "<p>If needed, I could provide my git commands for fork users</p>",
        "id": 227849235,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1614291552
    },
    {
        "content": "<p>this is what we have today <a href=\"https://github.com/hl7/fhir/wiki/Get-Started-with-FHIR-on-GitHub\">https://github.com/hl7/fhir/wiki/Get-Started-with-FHIR-on-GitHub</a></p>",
        "id": 227849595,
        "sender_full_name": "John Moehrke",
        "timestamp": 1614291726
    },
    {
        "content": "<p>I'll admit to not really understanding the ramification of branch vs. fork.  <span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> Do you have advice here?</p>",
        "id": 227857173,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1614295734
    },
    {
        "content": "<p>Everyone can use forks, it is no longer an issue</p>",
        "id": 227857236,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1614295770
    },
    {
        "content": "<p>The issue was that I need to use secure keys to upload the built version to <a href=\"http://build.fhir.org\">build.fhir.org</a>. Azure Pipelines, by default, restricts access to the private keys. Only pull requests originating from the actual repo, not forks, can access those secret keys. They recommend this as best practice.</p>",
        "id": 227857404,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1614295858
    },
    {
        "content": "<p>I did not know this.</p>",
        "id": 227857418,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1614295866
    },
    {
        "content": "<p>I have since gone in and enable key access to all PRs, including forks.</p>",
        "id": 227857460,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1614295888
    },
    {
        "content": "<p>Wait, so you are saying you have chosen not to adhere to this best practice?</p>",
        "id": 227857477,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1614295907
    },
    {
        "content": "<p>The choice is either to expand the list of contributors to the repo, (or open it to all contributors), or allow fork PRs to access the keys. After reading through the documentation, I don't think there is any reason to not allow the fork PRs to run on the pipeline.</p>",
        "id": 227857681,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1614295996
    },
    {
        "content": "<p>I monitor the pipeline, and get notifications of all activity, so I will see if anything is up.</p>",
        "id": 227857744,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1614296042
    },
    {
        "content": "<p>I mean the risk is that somebody exfiltrates keys and uses them at will.</p>",
        "id": 227857829,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1614296072
    },
    {
        "content": "<p>This keys can be used to replace all content in <a href=\"http://build.fhir.org\">build.fhir.org</a> at least -- it's worth thinking through what else could go wrong.</p>",
        "id": 227857954,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1614296144
    },
    {
        "content": "<p>Yeah, I understand. If you feel that it's not the right approach, I can disable it.</p>",
        "id": 227858032,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1614296171
    },
    {
        "content": "<p>The alternative though is maintenance of the list of contributors, which is fine.</p>",
        "id": 227858072,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1614296204
    },
    {
        "content": "<p>We already have a model where only committers are allowed to contribute to the source tree, for intellectual property reasons as well as maintenance reasons. I'm just trying to figure out what we are accomplishing by opening up to editors outside.</p>",
        "id": 227858078,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1614296206
    },
    {
        "content": "<p>This seemed to be the way people were doing PRs so I assumed it was standard practice&gt;</p>",
        "id": 227858129,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1614296238
    },
    {
        "content": "<p>How were people contributing before?</p>",
        "id": 227858143,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1614296250
    },
    {
        "content": "<p>You mean before we moved to GitHub?</p>",
        "id": 227858214,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1614296286
    },
    {
        "content": "<p>They needed to be registered as subversion users in a system called GForge</p>",
        "id": 227858228,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1614296293
    },
    {
        "content": "<p>Okay, so I'm fine with saying not to do forks</p>",
        "id": 227858254,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1614296316
    },
    {
        "content": "<p>Is that okay with you <span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span></p>",
        "id": 227858340,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1614296375
    },
    {
        "content": "<p>I just disabled it</p>",
        "id": 227858658,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1614296527
    },
    {
        "content": "<p>It seems like that's probably the best and easiest solution for this.</p>",
        "id": 227858779,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1614296630
    },
    {
        "content": "<p>Everyone just use regular branches, and if they want to be added as contributors let me know and I can do it</p>",
        "id": 227858851,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1614296675
    },
    {
        "content": "<p>I use forks and create PRs in GH all the time - but not with a build pipeline like this.</p>",
        "id": 227858977,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1614296739
    },
    {
        "content": "<p>The instruction is confusing and conflict. Is this final? <span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> <br>\nPlease add my user name <code>yunwwang</code> to the contributor. <span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span> BTW, do I need to re-create my PR?</p>",
        "id": 227871131,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1614305039
    },
    {
        "content": "<p>You will need to clone the main repository and create a pull request off the R4B branch</p>",
        "id": 227871211,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1614305071
    },
    {
        "content": "<p>The one I create this afternoon already passed system test. Can I merge that after I have my contributorship?</p>",
        "id": 227871297,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1614305151
    },
    {
        "content": "<p>If the option to merge is there then yes, if not, then it would be best to re-create the PR</p>",
        "id": 227871407,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1614305208
    },
    {
        "content": "<p>I send you an invite</p>",
        "id": 227871413,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1614305217
    },
    {
        "content": "<p>I can merge my PR now. Thanks</p>",
        "id": 227871553,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1614305305
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span> If you're going to add new committers, make sure you have an email from them indicating that they agree to abide by the IP chapter of the HL7 GOM and also to actively monitor <a class=\"stream\" data-stream-id=\"179294\" href=\"/#narrow/stream/179294-committers.2Fannounce\">#committers/announce</a></p>",
        "id": 227884794,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1614317490
    },
    {
        "content": "<p>Is there a template message for this Lloyd?</p>",
        "id": 227927230,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1614346152
    },
    {
        "content": "<p>Not really.</p>",
        "id": 227931857,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1614348340
    },
    {
        "content": "<p>Okay, I will make one and put it on the wiki</p>",
        "id": 227931883,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1614348351
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> \"to abide by the IP chapter of the HL7 GOM\" is there a link to this?</p>",
        "id": 227937022,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1614350547
    },
    {
        "content": "<p><a href=\"http://www.hl7.org/documentcenter/public/membership/HL7_Governance_and_Operations_Manual.pdf\">http://www.hl7.org/documentcenter/public/membership/HL7_Governance_and_Operations_Manual.pdf</a></p>",
        "id": 227937299,
        "sender_full_name": "David Pyke",
        "timestamp": 1614350674
    },
    {
        "content": "<p><a href=\"http://www.hl7.org/documentcenter/public/membership/HL7_Governance_and_Operations_Manual.pdf\">http://www.hl7.org/documentcenter/public/membership/HL7_Governance_and_Operations_Manual.pdf</a></p>",
        "id": 227937312,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1614350681
    },
    {
        "content": "<p>ty</p>",
        "id": 227937314,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1614350681
    },
    {
        "content": "<p>ty x2</p>",
        "id": 227937324,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1614350688
    },
    {
        "content": "<p>We don't refer to a specific chapter by number because they rejig chapters occasionally.</p>",
        "id": 227937374,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1614350709
    },
    {
        "content": "<p>fwiw, I didn't even agree to this and I have the keys to the castle...so I will send you an email agreeing to this asap Lloyd</p>",
        "id": 227937409,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1614350726
    }
]