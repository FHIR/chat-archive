[
    {
        "content": "<p>I've just fixed a significant bug in the IG generator. Here's the bug:</p>\n<ul>\n<li>as part of the publication process, the IG pubisher generates snapshots for any profiles <em>that don't have snapshots</em></li>\n<li>It carefully checks the outcomes of the generation process and puts any exceptions/errors in the qa.html file</li>\n<li>but snapshots are generated earlier in the process under a variety of conditions</li>\n<li>if that process fails there, errors are not trapped - <em>and the partially generated snapshot remains in place</em></li>\n<li>so when the IG publisher goes to check the snapshot, it already exists - and errors are not reported</li>\n</ul>",
        "id": 160970342,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552774585
    },
    {
        "content": "<p>The first and most obvious fix is that partially generated snapshots should not be left in place - which I've fixed.</p>",
        "id": 160970415,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552774727
    },
    {
        "content": "<p>a deeper question is whether the IG publisher should accept snapshots at all.</p>",
        "id": 160970477,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552774820
    },
    {
        "content": "<p>but irrespective of that, as of the next release, the IG publisher will be making more checks on the profiles, and you may get more qa issues, or your build might fail. Once it's released, I'll do rebuild the current set of IGs on the ci-build to see if there's any problems</p>",
        "id": 160970564,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552774941
    },
    {
        "content": "<p>Maybe we add a command line option for the IG publisher about whether or not to accept snapshots, since I could definitely see that as a performance enhancement for local builds, but I don't think the CI build should use that option.</p>",
        "id": 160988978,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1552809609
    },
    {
        "content": "<p>I don't see many advantages to using snapshots for defining profiles.  It may be useful for logical models and narrative or other text generation.  I only use the differential when IG authoring and let the tooling deal with the snaphot generation.</p>",
        "id": 161008167,
        "sender_full_name": "Eric Haas",
        "timestamp": 1552844945
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> The IGs for VRDR and BSeR no longer build. I've made no changes to resources or profiles. All that I've done is remove some broken links and made minor modification to text. Also, the links <a href=\"http://build.fhir.org/ig/HL7/bser/index.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/bser/index.html\">http://build.fhir.org/ig/HL7/bser/index.html</a> and <a href=\"http://build.fhir.org/ig/HL7/vrdr/index.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/vrdr/index.html\">http://build.fhir.org/ig/HL7/vrdr/index.html</a> no longer point to the prior successful build. I think that this fix to the IG generation may have been a breaking change for my IGs. Is the fix absolutely necessary?</p>",
        "id": 161040457,
        "sender_full_name": "AbdulMalik Shakir",
        "timestamp": 1552899354
    },
    {
        "content": "<p>yes it is necessary and you need to fix your IGs</p>",
        "id": 161051580,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552911016
    },
    {
        "content": "<blockquote>\n<p>Unable to generate snapshot for <a href=\"http://hl7.org/fhir/us/bser/StructureDefinition/PatientAllergy\" target=\"_blank\" title=\"http://hl7.org/fhir/us/bser/StructureDefinition/PatientAllergy\">http://hl7.org/fhir/us/bser/StructureDefinition/PatientAllergy</a> because StructureDefinition PatientAllergy at AllergyIntolerance.verificationStatus: illegal constrained type code from CodeableConcept</p>\n</blockquote>",
        "id": 161051598,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552911053
    },
    {
        "content": "<p>this you <em>must</em> fix</p>",
        "id": 161051605,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552911059
    },
    {
        "content": "<blockquote>\n<p>Unable to generate snapshot for <a href=\"http://hl7.org/fhir/us/vrdr/StructureDefinition/VRDR-Funeral-Home-Director\" target=\"_blank\" title=\"http://hl7.org/fhir/us/vrdr/StructureDefinition/VRDR-Funeral-Home-Director\">http://hl7.org/fhir/us/vrdr/StructureDefinition/VRDR-Funeral-Home-Director</a> because StructureDefinition VRDR-Funeral-Home-Director.meta at PractitionerRole.meta.profile: illegal constrained type Reference from uri</p>\n</blockquote>\n<p>this one too</p>",
        "id": 161051706,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552911154
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> Any idea how many others might be affected and not know it?</p>",
        "id": 161057129,
        "sender_full_name": "AbdulMalik Shakir",
        "timestamp": 1552915870
    },
    {
        "content": "<p>no.</p>",
        "id": 161086339,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552935705
    },
    {
        "content": "<p>I've posted to the committers/announce stream.  That should let everyone know.</p>",
        "id": 161087235,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1552936382
    },
    {
        "content": "<p>Anyone impacted has profiles that are already broken - they just might not have known prior to the fix</p>",
        "id": 161087313,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1552936436
    }
]