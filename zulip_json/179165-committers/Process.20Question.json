[
    {
        "content": "<p>I was doing a clean build of R4B and got the following error:</p>\n<div class=\"codehilite\" data-code-language=\"Bash Session\"><pre><span></span><code><span class=\"go\">Caused by: java.io.IOException: Error parsing JSON source: Duplicated property name: equivalence at Line 133 (path=[//contained[]/contained/group[]/group/element[]/equivalence/target[]/targetequivalent])</span>\n</code></pre></div>\n<p>Looking at <code>/source/valueset/valueset-nhin-purposeofuse.xml</code>, I assume the error is on line 134, that code <code>THREAT</code> has a listed <code>equivalent</code> target of itself.</p>\n<p>I don't know how it got into the main R4B branch, but I am wary of changing something like that (since I neither have a ticket nor even know who is managing it).  Do I fix or just notify, e.g., <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  =)</p>\n<p>Thanks!</p>",
        "id": 259026595,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1635199475
    },
    {
        "content": "<p>same code, but different codesystem. right?</p>",
        "id": 259026762,
        "sender_full_name": "John Moehrke",
        "timestamp": 1635199571
    },
    {
        "content": "<p>the nhin codes should not be in the fhir core. I didn't know they were anywhere near HL7. They borrowed what they thought were our codes many many years ago, and have evolved them themselves.</p>",
        "id": 259026819,
        "sender_full_name": "John Moehrke",
        "timestamp": 1635199628
    },
    {
        "content": "<p>git shows they have been here for a long time</p>",
        "id": 259026936,
        "sender_full_name": "John Moehrke",
        "timestamp": 1635199702
    },
    {
        "content": "<p>hmmm, concept maps are in the valueset? WHY!? that would be a nice thing for Sequoia to own, but that should not be in FHIR core.... where is this used?</p>",
        "id": 259027003,
        "sender_full_name": "John Moehrke",
        "timestamp": 1635199774
    },
    {
        "content": "<p>these codes have a different codeSystem - <a href=\"http://healthit.gov/nhin/purposeofuse\">http://healthit.gov/nhin/purposeofuse</a><br>\nWhy would the same code name be seen as a conflict? It is not nice, but it should not be a conflict... right?</p>",
        "id": 259027578,
        "sender_full_name": "John Moehrke",
        "timestamp": 1635200092
    },
    {
        "content": "<p>looking at the rendering it says everything I just said... so it knows what itself is.... is it intended as an example of ConceptMap?<br>\n<a href=\"http://hl7.org/fhir/codesystem-nhin-purposeofuse.html\">http://hl7.org/fhir/codesystem-nhin-purposeofuse.html</a></p>",
        "id": 259028060,
        "sender_full_name": "John Moehrke",
        "timestamp": 1635200378
    },
    {
        "content": "<p>guessing the build was \"improved\" with stricter rules?</p>",
        "id": 259029340,
        "sender_full_name": "John Moehrke",
        "timestamp": 1635201082
    },
    {
        "content": "<p>to your original question of process....  this specific example shows that there is no easy answer.</p>",
        "id": 259032458,
        "sender_full_name": "John Moehrke",
        "timestamp": 1635203183
    },
    {
        "content": "<p>I would like to know what rule changed to make this a error. duplicate code value should not matter with different codesystem .. right? So is this a bug in the build tools?</p>",
        "id": 259032506,
        "sender_full_name": "John Moehrke",
        "timestamp": 1635203227
    },
    {
        "content": "<p>so the nhin valueSet and codesystem are referenced on only on the ValueSet and CodeSystem resources \"examples\". </p>\n<ul>\n<li><a href=\"http://hl7.org/fhir/codesystem-examples.html\">http://hl7.org/fhir/codesystem-examples.html</a></li>\n<li><a href=\"http://hl7.org/fhir/valueset-examples.html\">http://hl7.org/fhir/valueset-examples.html</a><br>\nthere is a conceptMap, but it is .contained in the valueSet.</li>\n</ul>\n<p>Thus the provenance of these would be the Vocabulary workgroup... not the Security Workgroup (who would normally be the guilty one with regard to PurposeOfUse).</p>",
        "id": 259032975,
        "sender_full_name": "John Moehrke",
        "timestamp": 1635203524
    },
    {
        "content": "<p><del>I'd say that listing a code as an equivalent to itself is at least poor practice, if not an outright error.  I also think it is good that the build tools improve and start finding issues that have been missed in previous iterations.</del> (edit: this is not what is happening here)</p>\n<p>I would love to see updates to the tooling run against the 'main' branches before they are pushed out, but I also understand that 'tooling' is stretched <em>a bit</em> thin.</p>\n<p>Thanks for the insight into that particular VS John.  Given that the page it points to (<a href=\"http://healthit.gov/nhin/purposeofuse\">http://healthit.gov/nhin/purposeofuse</a>) is 404, I'd guess that someone added it at one point and it has bit rot.  Given the git history on the file, it seems reasonable.</p>\n<p>That said, what's the path to unblock on R4B work?  This should be affecting everyone working on R4B, since the source branch fails to build (e.g., nothing can be merged since no branch will pass checks).  <del>I'm happy to make a change here and possibly in other places, but I generally avoid tromping around the spec making changes  =)</del> (edit: cannot fix in source content, this is a build tooling issue)</p>\n<p><del>Is the process to fix and file a ticket as pre-applied?</del> (edit: cannot fix in source content, this is a build tooling issue)</p>\n<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> ? (trying to avoid just tagging everyone =)</p>",
        "id": 259107284,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1635259512
    },
    {
        "content": "<p>If you mean \"update the ticket to mark it as pre-applied\", then yes - with a comment indicating your local commit id.  (And then merge once the tooling stack allows)</p>",
        "id": 259110996,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1635260899
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span>  - it also helps if I <em>fully</em> read your messages =).  I agree that it is incorrect for that to be flagged as an error.  The contained <code>ConceptMap</code> is linking two systems that have the same code value, which should not be an error.</p>\n<p>So, I guess I need to reframe this for <span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span> and <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> , that the tooling is incorrectly flagging that as an error (when a <code>ConceptMap</code> has a <code>code</code> and <code>target.code</code> of the same value).</p>",
        "id": 259113577,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1635261896
    },
    {
        "content": "<p>so this is definitely on my list but it's not holding anyone up at the moment, right?</p>",
        "id": 259479647,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635479292
    },
    {
        "content": "<p>I think it is holding everyone wanting to make their CR changes to FHIR core.</p>",
        "id": 259512759,
        "sender_full_name": "John Moehrke",
        "timestamp": 1635508103
    },
    {
        "content": "<p>why?</p>",
        "id": 259513353,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635508490
    },
    {
        "content": "<p>when Gino first mentioned it, the build was failing with that error</p>",
        "id": 259513812,
        "sender_full_name": "John Moehrke",
        "timestamp": 1635508699
    },
    {
        "content": "<p>I tried it at that time and got the same thing</p>",
        "id": 259513830,
        "sender_full_name": "John Moehrke",
        "timestamp": 1635508707
    },
    {
        "content": "<p>I just pulled, clean, and am trying a build</p>",
        "id": 259513840,
        "sender_full_name": "John Moehrke",
        "timestamp": 1635508720
    },
    {
        "content": "<p>Ill let you know the success/failure in a couple of hours</p>",
        "id": 259513873,
        "sender_full_name": "John Moehrke",
        "timestamp": 1635508735
    },
    {
        "content": "<p>fails</p>",
        "id": 259522038,
        "sender_full_name": "John Moehrke",
        "timestamp": 1635513312
    },
    {
        "content": "<p>note that it seems to fail differently. the validate nhin does not throw errors or warnings</p>",
        "id": 259522635,
        "sender_full_name": "John Moehrke",
        "timestamp": 1635513611
    },
    {
        "content": "<p>so the new \"Process Question\" is about the new set of errors... I would guess...</p>\n<div class=\"codehilite\"><pre><span></span><code>\n</code></pre></div>",
        "id": 259522851,
        "sender_full_name": "John Moehrke",
        "timestamp": 1635513719
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>Summary: Errors=47, Warnings=3786, Information messages=657\nERROR @ CapabilityStatement.url (line 0, col0): capabilitystatement-example:: CapabilityStatement.url: UUIDs must be valid (src = InstanceValidator)\nERROR @ CapabilityStatement2.url (line 0, col0): capabilitystatement2-example:: CapabilityStatement2.url: UUIDs must be valid (src = InstanceValidator)\nERROR @ Citation.url (line 0, col0): citation-example-systematic-meta-review:: Citation.url: Canonical URLs must be absolute URLs if they are not fragment references (Citation/citation-example-systematic-meta-review) (src = InstanceValidator)\nERROR @ Composition.category[0].coding[0] (line 0, col0): composition-example:: Composition.category[0].coding[0]: The code &quot;LP173421-1&quot; is not valid in the system http://loinc.org; The code provided (http://loinc.org#LP173421-1) is not valid in the value set &#39;All codes known to the system&#39; (from http://tx.fhir.org/r4) for &#39;http://loinc.org#LP173421-1&#39; (src = TerminologyEngine)\n...\n</code></pre></div>",
        "id": 259522919,
        "sender_full_name": "John Moehrke",
        "timestamp": 1635513734
    },
    {
        "content": "<p>right nhin is not the issue. I'm planning on releasing a fix for R4B over the weekend</p>",
        "id": 259566085,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1635532558
    }
]