[
    {
        "content": "<p>Hi all (and especially <span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span> =) - was working on some changes for R4B things and wondering if CI builds for R4B are posted anywhere.  I cannot find them at <a href=\"http://build.fhir.org/branches\">build.fhir.org/branches</a> (neither <code>R4B</code> itself nor <code>R4B-gino</code>), and my Zulip searching didn't turn up anything. <br>\n Thanks!</p>",
        "id": 244453635,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1625071770
    },
    {
        "content": "<p>R4B is not set up to publish interim branches in the same way that master is</p>",
        "id": 244462828,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1625075476
    },
    {
        "content": "<p>That functionality is only done for master branch, which is why you're not seeing it there'</p>",
        "id": 244462855,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1625075496
    },
    {
        "content": "<p>Hmm.. so making changes public/visible is out of band for those branches?</p>",
        "id": 244464464,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1625076189
    },
    {
        "content": "<p>Is this a decision not to publish R4B CI content, or just ... something that doesn't currently work?</p>",
        "id": 244464664,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1625076302
    },
    {
        "content": "<p>I'm sure that they were posted before. We couldn't have worked without it working - why isn't it happening?</p>",
        "id": 244475500,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1625081360
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 244971784,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1625517002
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 244971829,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1625517008
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 244972172,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1625517283
    },
    {
        "content": "<p>Forget everything I wrote above, it does do this, I just looked, and I made this change months ago</p>",
        "id": 244973007,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1625518071
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"222054\">@Gino Canessa</span> If you're build isn't publishing on a PR, then it's an issue with the branch name or some other error for that branch</p>",
        "id": 244973075,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1625518114
    },
    {
        "content": "<p>it should definitely publish a build on <a href=\"http://fhir.org/branches\">fhir.org/branches</a></p>",
        "id": 244973088,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1625518131
    },
    {
        "content": "<p>Yeah, on R4B, if you look at the pull-request-pipeline.yml file, it executes this base script:</p>",
        "id": 244973229,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1625518248
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>  # This task takes the successfully built publish directory produced in the &#39;buildSpecification&#39; job above and pushes it to\n  # build.fhir.org in a directory named after that branch that triggered this pull request.\n  - task: Bash@3\n    inputs:\n      targetType: &#39;inline&#39;\n      script: |\n        cd publish\n        chmod 400 $(Agent.TempDirectory)/deploy.rsa\n        TARGET_DIRECTORY=$(echo &quot;$(System.PullRequest.SourceBranch)&quot; | sed -r &#39;s/\\//_/g&#39;)\n        echo &quot;Publishing to target $TARGET_DIRECTORY&quot;\n        tar czf - * | ssh  -i $(Agent.TempDirectory)/deploy.rsa -p 2222 $(BUILD_FHIR_ORG_USERNAME)@build.fhir.org ./publish $TARGET_DIRECTORY\n</code></pre></div>",
        "id": 244973233,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1625518252
    },
    {
        "content": "<p>Which throws it up to the branches directory</p>",
        "id": 244973264,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1625518278
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"222054\">@Gino Canessa</span> next time you encounter the failed upload behavior, tag me and I'll look into it</p>",
        "id": 244973389,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1625518362
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span> and happy Friday!  Sorry that I just got back to making these changes today, but tagging per your request  :-|</p>\n<p>So, I pushed up another round of changes and AFAICT everything succeeded: <a href=\"https://github.com/HL7/fhir/pull/1299/checks?check_run_id=3032549858\">https://github.com/HL7/fhir/pull/1299/checks?check_run_id=3032549858</a></p>\n<p>I also saw the bot post on <a class=\"stream\" data-stream-id=\"179297\" href=\"/#narrow/stream/179297-committers.2Fnotification\">#committers/notification</a> that it was successful.</p>\n<p>But, there is no folder for it on <a href=\"http://build.fhir.org/branches/\">http://build.fhir.org/branches/</a> .</p>\n<p>If there's anything I can do/help with, please let me know.  Thanks!</p>",
        "id": 245495306,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1625863400
    },
    {
        "content": "<p>Interesting, interesting</p>",
        "id": 245509188,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1625868015
    },
    {
        "content": "<p>Let me take a quick look</p>",
        "id": 245509242,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1625868027
    },
    {
        "content": "<p>100% something to do with your name</p>",
        "id": 245517247,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1625873585
    },
    {
        "content": "<p>just got mine to publish no issue</p>",
        "id": 245517255,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1625873594
    },
    {
        "content": "<p>I am unsure what the exact issue is</p>",
        "id": 245517263,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1625873604
    },
    {
        "content": "<p>So, I would suggest to change the name to something else like <code>gino-the-dreamo</code> or something like that, and then on Monday, I will try to get around to looking into this.</p>",
        "id": 245517324,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1625873659
    },
    {
        "content": "<p>I strongly suspect that this has to do with the name containing R4B?</p>",
        "id": 245517364,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1625873719
    },
    {
        "content": "<p>Like if I had to guess offhand.</p>",
        "id": 245517368,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1625873728
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"222054\">@Gino Canessa</span></p>",
        "id": 245517372,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1625873733
    },
    {
        "content": "<p>let me know if changing the name works for you</p>",
        "id": 245517380,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1625873742
    },
    {
        "content": "<p>Morning <span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span> , hope you had a good weekend  =).  Unfortunately, doesn't seem to have made any difference: branch is <code>subscription-b</code>.  PR is there, checks completed successfully, nothing on <a href=\"http://build.fhir.org/branches\">build.fhir.org/branches</a>.</p>",
        "id": 245709647,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1626106581
    },
    {
        "content": "<p>Can you please try just going to the repo, changing the README file online and making a PR for it</p>",
        "id": 245717678,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1626110248
    },
    {
        "content": "<p>just see if it will work</p>",
        "id": 245717692,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1626110255
    },
    {
        "content": "<p>On the new branch?<br>\nedit: ah, create a new branch - PR to <code>master</code> or PR to <code>R4B</code>?</p>",
        "id": 245717953,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1626110378
    },
    {
        "content": "<p>Ah, do both</p>",
        "id": 245722065,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1626112270
    },
    {
        "content": "<p>and see if they work</p>",
        "id": 245722077,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1626112276
    },
    {
        "content": "<p>The repo that you are branching from...is it public?</p>",
        "id": 245722124,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1626112297
    },
    {
        "content": "<p>or private?</p>",
        "id": 245722131,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1626112300
    },
    {
        "content": "<p>I remember an issue like this coming up before</p>",
        "id": 245722152,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1626112311
    },
    {
        "content": "<p>where private repos were not working</p>",
        "id": 245722166,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1626112317
    },
    {
        "content": "<p>It's just a branch on the HL7/fhir repo.</p>",
        "id": 245722248,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1626112339
    },
    {
        "content": "<p>Where is the PR? Can you link</p>",
        "id": 245722617,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1626112487
    },
    {
        "content": "<p>Yep, it's <a href=\"https://github.com/HL7/fhir/pull/1310\">PR 1310</a></p>",
        "id": 245722676,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1626112516
    },
    {
        "content": "<p>I started a PR with a Readme change on R4B, it's <a href=\"https://github.com/HL7/fhir/pull/1311\">PR 1311</a></p>",
        "id": 245722767,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1626112558
    },
    {
        "content": "<p>yeah I saw that, that's good</p>",
        "id": 245722821,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1626112566
    },
    {
        "content": "<p>yeah the host key changed, now that I look at it</p>",
        "id": 245722956,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1626112646
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span>  and I had discussed this before. I just have to remember how I fixed it.</p>",
        "id": 245722994,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1626112663
    },
    {
        "content": "<p>this is the error fyi</p>",
        "id": 245723389,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1626112814
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>Publishing to target subscription-b\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\n@    WARNING: REMOTE HOST IDENTIFICATION HAS CHANGED!     @\n@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@\nIT IS POSSIBLE THAT SOMEONE IS DOING SOMETHING NASTY!\nSomeone could be eavesdropping on you right now (man-in-the-middle attack)!\nIt is also possible that a host key has just been changed.\nThe fingerprint for the ECDSA key sent by the remote host is\nSHA256:LisYQkgqtTm3QMJdGhfiGJRbhG9VkfTloIHJCsuLQFw.\nPlease contact your system administrator.\nAdd correct host key in /home/markiantorno/.ssh/known_hosts to get rid of this message.\nOffending ECDSA key in /home/markiantorno/.ssh/known_hosts:1\n  remove with:\n  ssh-keygen -f &quot;/home/markiantorno/.ssh/known_hosts&quot; -R [build.fhir.org]:2222\nECDSA host key for [build.fhir.org]:2222 has changed and you have requested strict checking.\nHost key verification failed.\n</code></pre></div>",
        "id": 245723401,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1626112817
    },
    {
        "content": "<p>ah</p>",
        "id": 245724009,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1626113090
    },
    {
        "content": "<p>I see</p>",
        "id": 245724016,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1626113093
    },
    {
        "content": "<p>Alright</p>",
        "id": 245724556,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1626113301
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"222054\">@Gino Canessa</span> I am a dummy. This should be fixed now.</p>",
        "id": 245724599,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1626113319
    },
    {
        "content": "<p>Could you please pull R4B into your branch</p>",
        "id": 245724620,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1626113326
    },
    {
        "content": "<p>and try again</p>",
        "id": 245724635,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1626113330
    },
    {
        "content": "<p>Will try in one sec</p>",
        "id": 245724721,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1626113361
    },
    {
        "content": "<p>It _should_ work now. The issue was that when this bug originally occurred, I made the fix on master, but not on the R4B branch...we technically have to maintain 2 different pipeline files because they are basically treated as two separate repositories.</p>",
        "id": 245724891,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1626113426
    },
    {
        "content": "<p>Which leads me to question if anyone committing to R4B has actually been verifying their changes before they commit? or if they were just slamming the merge button as soon as the build was successful...</p>",
        "id": 245724987,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1626113470
    },
    {
        "content": "<p>which is troubling</p>",
        "id": 245725002,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1626113479
    },
    {
        "content": "<p>They may be verifying locally ;-)</p>",
        "id": 245725035,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1626113502
    },
    {
        "content": "<p>Ah, there you go</p>",
        "id": 245725055,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1626113509
    },
    {
        "content": "<p>i wish I shared your faith in people</p>",
        "id": 245725196,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1626113560
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"222054\">@Gino Canessa</span> please let me know once it builds, if it succeeds or fails</p>",
        "id": 245725231,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1626113583
    },
    {
        "content": "<p>Will do right after my current meeting</p>",
        "id": 245725254,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1626113597
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span> , the branch is published correctly after the CI build.</p>",
        "id": 245733634,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1626117135
    },
    {
        "content": "<p>nice</p>",
        "id": 245733666,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1626117151
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span> hi, I dont understand this:<br>\n been verifying their changes before they commit? or if they were just slamming the merge button as soon as the build was successful...</p>\n<p>I don't know of a way to verify online before merge.</p>\n<p>I merge as soon as the online build \"some checks are needed\" is finished. </p>\n<p>Obviously I build and check it looks ok locally before committing. If you don't do that you have no idea what your changes look like.</p>",
        "id": 245741801,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1626120905
    },
    {
        "content": "<p>Yeah that's what I mean. The system was set up to actually post a live version of your PR on <a href=\"http://build.fhir.org/branches\">build.fhir.org/branches</a> if the PR is successful.</p>",
        "id": 245755776,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1626127185
    },
    {
        "content": "<p>So I was just wondering if people were actually using this feature of the pipeline, or if they were just merging once the build was successful.</p>",
        "id": 245755918,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1626127238
    },
    {
        "content": "<p>I didn't think of the third option which was that people were also doing a build locally and viewing the page locally on their computer.</p>",
        "id": 245755953,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1626127270
    },
    {
        "content": "<p>As it stands, the R4B branches website hosting feature was not working on pull requests, and <span class=\"user-mention\" data-user-id=\"222054\">@Gino Canessa</span> pointed this out to me.</p>",
        "id": 245756006,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1626127318
    },
    {
        "content": "<p>It has been working on master branch with no issues though.</p>",
        "id": 245756067,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1626127335
    },
    {
        "content": "<p>Yes, I build locally before pushing, but it's harder to collaborate with a group if I have the only copy (asking everyone to build locally isn't a great workflow =)</p>",
        "id": 245756093,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1626127355
    },
    {
        "content": "<p>Yeah, that's what I figured.</p>",
        "id": 245756124,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1626127379
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191651\">@Rik Smithies</span> next time you rip a pull request on R4B, let me know, and I can show you what's up if you'd like.</p>",
        "id": 245756152,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1626127414
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span> thanks for the info, I had no idea that each branch build had an online output</p>",
        "id": 245757138,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1626128040
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191651\">@Rik Smithies</span> in order to trigger the build/publish you need to have a PR on the branch.  I would recommend creating one any time you make a branch so that it just runs any time you push.</p>",
        "id": 245980777,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1626278518
    },
    {
        "content": "<p>thanks <span class=\"user-mention\" data-user-id=\"222054\">@Gino Canessa</span> <span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span> I now have an R4B build showing up on the server</p>",
        "id": 246627252,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1626804061
    },
    {
        "content": "<p>Nice <span aria-label=\"ok\" class=\"emoji emoji-1f44c\" role=\"img\" title=\"ok\">:ok:</span></p>",
        "id": 246628596,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1626804765
    }
]