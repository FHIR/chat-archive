[
    {
        "content": "<p>I am trying to change an attribute</p>\n<p>from Coding|Quantity|string|date|boolean|Attachment</p>\n<p>to CodeableConcept|Quantity|date|boolean|Attachment</p>\n<p>and getting a strange build error.</p>\n<div class=\"codehilite\"><pre><span></span> [java] Caused by: org.hl7.fhir.exceptions.FHIRException: Unable to find type string for element valueString with path ManufacturedItemDefinition.characteristic.value[x]\n</pre></div>\n\n\n<p>But there is no longer a string there. It is as if it is remembering that it had a string in it from before the change. Why might that be?<br>\nIf I put back the string it says Unable to find type Coding (which is also no longer there).</p>",
        "id": 190393290,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1584022220
    },
    {
        "content": "<p>There may be mappings that have to be updated to deal with the change to the resource.  Can you provide the full stack trace?</p>",
        "id": 190396776,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1584023986
    },
    {
        "content": "<p>no mappings, bindings or search parameters.</p>",
        "id": 190402346,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1584026579
    },
    {
        "content": "<p>this is trace I get <br>\n[java] This was a Partial Build                                                   0.398 267sec 1025MB<br>\n     [java]   Build: manufactureditemdefinition                                          0.0 267sec 1025MB<br>\n     [java] java.lang.Exception: processing manufactureditemdefinition-example<br>\n     [java]     at org.hl7.fhir.tools.publisher.Publisher.produceResource2(Publisher.java:4165)<br>\n     [java]     at org.hl7.fhir.tools.publisher.Publisher.produceSpec(Publisher.java:2404)<br>\n     [java]     at org.hl7.fhir.tools.publisher.Publisher.produceSpecification(Publisher.java:2217)<br>\n     [java]     at org.hl7.fhir.tools.publisher.Publisher.execute(Publisher.java:625)<br>\n     [java]     at org.hl7.fhir.tools.publisher.Publisher.main(Publisher.java:486)<br>\n     [java] Caused by: org.hl7.fhir.exceptions.FHIRException: Unable to find type Coding for element valueCoding with path ManufacturedItemDefinition.characteristic.value[x]<br>\n     [java]     at org.hl7.fhir.r5.elementmodel.Property.getChildProperties(Property.java:312)<br>\n     [java]     at org.hl7.fhir.r5.elementmodel.XmlParser.parseChildren(XmlParser.java:242)<br>\n     [java]     at org.hl7.fhir.r5.elementmodel.XmlParser.parseChildren(XmlParser.java:333)<br>\n     [java]     at org.hl7.fhir.r5.elementmodel.XmlParser.parseChildren(XmlParser.java:333)<br>\n     [java]     at org.hl7.fhir.r5.elementmodel.XmlParser.parse(XmlParser.java:179)<br>\n     [java]     at org.hl7.fhir.r5.elementmodel.XmlParser.parse(XmlParser.java:163)<br>\n     [java]     at org.hl7.fhir.r5.elementmodel.XmlParser.parse(XmlParser.java:135)<br>\n     [java]     at org.hl7.fhir.r5.elementmodel.Manager.parse(Manager.java:57)<br>\n     [java]     at org.hl7.fhir.tools.publisher.Publisher.processExample(Publisher.java:4623)<br>\n     [java]     at org.hl7.fhir.tools.publisher.Publisher.produceResource2(Publisher.java:4163)<br>\n     [java]     ... 4 more</p>",
        "id": 190402391,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1584026596
    },
    {
        "content": "<p>maybe it is validating the example that is failing</p>",
        "id": 190402544,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1584026664
    },
    {
        "content": "<p>Nope.  The issue is that certain types of changes to the resource require a new push of the HAPI reference implementation.  This appears to be one of them.  <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 190402634,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1584026714
    },
    {
        "content": "<p>Yes.  I ran into that when making changes to ConceptMap.</p>",
        "id": 190402848,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1584026810
    },
    {
        "content": "<p>ah ok, thanks. it only seems to affect some attributes. Maybe it is when there's some combination of choices. Straight change of Coding to CodeableConcept, or Coding|Reference to CodeableReference doesn't seem to trigger it.</p>",
        "id": 190403265,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1584027008
    },
    {
        "content": "<p>So what is the fix? I can just roll back, but then HAPI won't ever get updated. Is it a case of waiting for a build fix?</p>",
        "id": 190403376,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1584027072
    },
    {
        "content": "<p>Build fix</p>",
        "id": 190434312,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1584041613
    },
    {
        "content": "<p>nah this isn't one of them. that only happens to core conformance resources</p>",
        "id": 190443550,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1584046315
    },
    {
        "content": "<p>this one looks to me like you still have an example using a string</p>",
        "id": 190443601,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1584046326
    },
    {
        "content": "<p>yes, thanks it was the example. Odd error, but now that I know :-)</p>",
        "id": 190457390,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1584056370
    }
]