[
    {
        "content": "<p>Anyone willing to update the <a href=\"http://_updatePublisher.sh\">_updatePublisher.sh</a> to match the _updatePublisher.bat ?<br>\n<a href=\"https://github.com/FHIR/sample-ig/blob/master/_updatePublisher.sh\">https://github.com/FHIR/sample-ig/blob/master/_updatePublisher.sh</a></p>",
        "id": 202837734,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1593811459
    },
    {
        "content": "<p>What needs to be done: After downloading the publisher, it should ask the user whether to update the scripts (_genOnce, _genContinuous, _updatePublisher) and if Yes, download and replace existing ones (including itself).</p>",
        "id": 202837737,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1593811461
    },
    {
        "content": "<p><a href=\"https://github.com/FHIR/sample-ig/blob/master/_updatePublisher.bat\">https://github.com/FHIR/sample-ig/blob/master/_updatePublisher.bat</a> shows how, but it is rather simple:</p>\n<ol>\n<li>declare url variables:</li>\n</ol>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"k\">set</span> <span class=\"nv\">update_bat_url</span><span class=\"p\">=</span>https://raw.githubusercontent.com/FHIR/sample-ig/master/_updatePublisher.bat\n<span class=\"k\">set</span> <span class=\"nv\">gen_bat_url</span><span class=\"p\">=</span>https://raw.githubusercontent.com/FHIR/sample-ig/master/_genonce.bat\n<span class=\"k\">set</span> <span class=\"nv\">gencont_bat_url</span><span class=\"p\">=</span>https://raw.githubusercontent.com/FHIR/sample-ig/master/_gencontinuous.bat\n<span class=\"k\">set</span> <span class=\"nv\">gencont_sh_url</span><span class=\"p\">=</span>https://raw.githubusercontent.com/FHIR/sample-ig/master/_gencontinuous.sh\n<span class=\"k\">set</span> <span class=\"nv\">gen_sh_url</span><span class=\"p\">=</span>https://raw.githubusercontent.com/FHIR/sample-ig/master/_genonce.sh\n<span class=\"k\">set</span> <span class=\"nv\">update_sh_url</span><span class=\"p\">=</span>https://raw.githubusercontent.com/FHIR/sample-ig/master/_updatePublisher.sh\n</code></pre></div>\n\n\n<ol start=\"2\">\n<li>\n<p>(update the promping logic with the ifs /elses</p>\n</li>\n<li>\n<p>for each of the urls, download the file under a new name, and if no errors, start a new process to copy the downloaded file to the right name , delete the downloaded file, and exit the new process</p>\n</li>\n</ol>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">:</span><span class=\"nl\">dl_script_6</span>\n<span class=\"k\">ECHO</span> Updating _updatePublisher.bat\n<span class=\"k\">call</span> POWERSHELL -command if (&#39;System.Net.WebClient&#39; -as [type]) {(new-object System.Net.WebClient).DownloadFile(\\<span class=\"s2\">&quot;</span><span class=\"nv\">%update_bat_url%</span><span class=\"s2\">\\&quot;</span>,\\<span class=\"s2\">&quot;_updatePublisher.new.bat\\&quot;</span>) } else { Invoke-WebRequest -Uri <span class=\"s2\">&quot;</span><span class=\"nv\">%update_bat_url%</span><span class=\"s2\">&quot;</span> -Outfile <span class=\"s2\">&quot;_updatePublisher.new.bat&quot;</span> }\n<span class=\"k\">if</span> <span class=\"nv\">%ERRORLEVEL%</span> <span class=\"o\">==</span> 0 <span class=\"k\">goto</span> <span class=\"nl\">upd_script_6</span>\n<span class=\"k\">echo</span> <span class=\"s2\">&quot;Errors encountered during download: </span><span class=\"nv\">%errorlevel%</span><span class=\"s2\">&quot;</span>\n<span class=\"k\">goto</span> <span class=\"nl\">end</span>\n<span class=\"p\">:</span><span class=\"nl\">upd_script_6</span>\n<span class=\"k\">start</span> copy /y <span class=\"s2\">&quot;_updatePublisher.new.bat&quot;</span> <span class=\"s2\">&quot;_updatePublisher.bat&quot;</span> <span class=\"se\">^&amp;^&amp;</span> del <span class=\"s2\">&quot;_updatePublisher.new.bat&quot;</span> <span class=\"se\">^&amp;^&amp;</span> exit\n</code></pre></div>\n\n\n<p>(trick is to make sure that the action performed by <a href=\"http://_updatePublisher.sh\">_updatePublisher.sh</a> is to launch a new process to replace itself, this way the file is no longer in use and can be replaced).</p>",
        "id": 202838079,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1593811979
    },
    {
        "content": "<p>ping anyone?</p>",
        "id": 204678811,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1595430656
    },
    {
        "content": "<p>I'll take a kick at it.</p>",
        "id": 204683254,
        "sender_full_name": "David Pyke",
        "timestamp": 1595432511
    },
    {
        "content": "<p>thanks</p>",
        "id": 204683861,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1595432772
    }
]