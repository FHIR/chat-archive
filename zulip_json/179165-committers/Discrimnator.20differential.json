[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>   I am having troubles with IG build where I have a profile with one discriminator .e.g HealthcareService.identifier slicing discriminator is Value 'system' then create a derived profile with an additional discriminator Value 'type'  am getting error </p>\n<div class=\"codehilite\"><pre><span></span>Publishing Content Failed: Exception loading http://hl7.org.au/fhir/StructureDef\ninition/au-pd-healthcareservice: Slicing rules on differential (org.hl7.fhir.r4.\nmodel.ElementDefinition$ElementDefinitionSlicingDiscriminatorComponent@2e9f5b, o\nrg.hl7.fhir.r4.model.ElementDefinition$ElementDefinitionSlicingDiscriminatorComp\nonent@1a34b26(/open)) do not match those on base (org.hl7.fhir.r4.model.ElementD\nefinition$ElementDefinitionSlicingDiscriminatorComponent@13fd7a1(/open)) - disci\nminator @ HealthcareService.identifier (http://hl7.org/fhir/StructureDefinition/\nMeta) (14.0994sec)\n</pre></div>",
        "id": 153950115,
        "sender_full_name": "Brett Esler",
        "timestamp": 1522740230
    },
    {
        "content": "<p>Should I be repeating the whole slicing discriminator in the derived profile definition?</p>",
        "id": 153950116,
        "sender_full_name": "Brett Esler",
        "timestamp": 1522740391
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span> &lt;slicing&gt;\n        &lt;discriminator&gt;\n          &lt;type value=&quot;value&quot; /&gt;\n          &lt;path value=&quot;system&quot; /&gt;\n        &lt;/discriminator&gt;\n        &lt;discriminator&gt;\n          &lt;type value=&quot;value&quot; /&gt;\n          &lt;path value=&quot;type&quot; /&gt;\n        &lt;/discriminator&gt;\n        &lt;rules value=&quot;open&quot; /&gt;\n      &lt;/slicing&gt;\n</pre></div>",
        "id": 153950117,
        "sender_full_name": "Brett Esler",
        "timestamp": 1522740402
    },
    {
        "content": "<p>Here is the full log <a href=\"http://build.fhir.org/ig/hl7au/au-fhir-pd/build.log\" target=\"_blank\" title=\"http://build.fhir.org/ig/hl7au/au-fhir-pd/build.log\">http://build.fhir.org/ig/hl7au/au-fhir-pd/build.log</a></p>",
        "id": 153950118,
        "sender_full_name": "Brett Esler",
        "timestamp": 1522740537
    },
    {
        "content": "<p>is that the base or the derived? Paste both...</p>",
        "id": 153950120,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1522741806
    },
    {
        "content": "<p>The base is:</p>",
        "id": 153950380,
        "sender_full_name": "Brett Esler",
        "timestamp": 1522797862
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span> &lt;element id=&quot;HealthcareService.identifier&quot;&gt;\n      &lt;path value=&quot;HealthcareService.identifier&quot; /&gt;\n      &lt;slicing&gt;\n        &lt;discriminator&gt;\n          &lt;type value=&quot;value&quot; /&gt;\n          &lt;path value=&quot;system&quot; /&gt;\n        &lt;/discriminator&gt;\n        &lt;rules value=&quot;open&quot; /&gt;\n      &lt;/slicing&gt;\n      &lt;short value=&quot;Healthcare service identifiers&quot; /&gt;\n    &lt;/element&gt;\n</pre></div>",
        "id": 153950381,
        "sender_full_name": "Brett Esler",
        "timestamp": 1522797864
    },
    {
        "content": "<p>derived element is</p>",
        "id": 153950383,
        "sender_full_name": "Brett Esler",
        "timestamp": 1522797901
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span>  &lt;element id=&quot;HealthcareService.identifier&quot;&gt;\n      &lt;path value=&quot;HealthcareService.identifier&quot; /&gt;\n      &lt;slicing&gt;\n        &lt;discriminator&gt;\n          &lt;type value=&quot;value&quot; /&gt;\n          &lt;path value=&quot;system&quot; /&gt;\n        &lt;/discriminator&gt;\n        &lt;discriminator&gt;\n          &lt;type value=&quot;value&quot; /&gt;\n          &lt;path value=&quot;type&quot; /&gt;\n        &lt;/discriminator&gt;\n        &lt;rules value=&quot;open&quot; /&gt;\n      &lt;/slicing&gt;\n      &lt;short value=&quot;Directory entry healthcare service identifiers&quot; /&gt;\n    &lt;/element&gt;\n</pre></div>",
        "id": 153950384,
        "sender_full_name": "Brett Esler",
        "timestamp": 1522797904
    },
    {
        "content": "<p>ok so that should work then. this is committed somewhere so I can try it out?</p>",
        "id": 153950385,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1522797949
    },
    {
        "content": "<p>yep <br>\n<a href=\"https://github.com/hl7au/au-fhir-base\" target=\"_blank\" title=\"https://github.com/hl7au/au-fhir-base\">https://github.com/hl7au/au-fhir-base</a><br>\n<a href=\"https://github.com/hl7au/au-fhir-pd\" target=\"_blank\" title=\"https://github.com/hl7au/au-fhir-pd\">https://github.com/hl7au/au-fhir-pd</a></p>",
        "id": 153950386,
        "sender_full_name": "Brett Esler",
        "timestamp": 1522798017
    },
    {
        "content": "<p>ok I'll try and look this afternoon</p>",
        "id": 153950388,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1522798223
    },
    {
        "content": "<p>Following up on this one still failing - <a href=\"http://build.fhir.org/ig/hl7au/au-fhir-pd/build.log\" target=\"_blank\" title=\"http://build.fhir.org/ig/hl7au/au-fhir-pd/build.log\">http://build.fhir.org/ig/hl7au/au-fhir-pd/build.log</a></p>",
        "id": 153951418,
        "sender_full_name": "Brett Esler",
        "timestamp": 1523255198
    },
    {
        "content": "<p>I still have this problem - but now am thinking about whether it makes sense to add further discriminators in a derived model - as this would seem to actually relax the discriminating elements - e,g, if a profile discriminates on Identifier.system then in a derived profile discriminates also on Identifier.type - this could mean multiple slice matches in the base model could occur where it would be okay in the derived model (e.g. same system and a discriminating type) - make sense?... maybe IG builder is behaving as it should as that seems to be a problem to me...</p>",
        "id": 153955314,
        "sender_full_name": "Brett Esler",
        "timestamp": 1525222581
    },
    {
        "content": "<p>would mean the base model would need to have all the discriminators defined for any derived model to be able to use them... this is a bit problematic but can't see how it would work any other way...</p>",
        "id": 153955315,
        "sender_full_name": "Brett Esler",
        "timestamp": 1525222645
    },
    {
        "content": "<p>okay after discussion I am less worried and feeling okay... if a slice matches in the base profile it should still be conforming; and the derived slice constraints can only be more specific and still conform to the base.. .so back to needing to be able to build IG with additional discriminators defined...</p>",
        "id": 153955320,
        "sender_full_name": "Brett Esler",
        "timestamp": 1525224655
    }
]