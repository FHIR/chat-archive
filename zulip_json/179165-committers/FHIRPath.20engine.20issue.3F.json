[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> ,  I'm trying to apply a new invariant for CareTeam, <a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12647\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12647\">GF#12647</a>, but after working with <span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span> , he suggested I log <a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12707\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12707\">GF#12707</a> to investigate the FHIRPath engine.  The issue is that the (local) build chokes on an example, <a href=\"http://build.fhir.org/careteam-example.xml.html\" target=\"_blank\" title=\"http://build.fhir.org/careteam-example.xml.html\">http://build.fhir.org/careteam-example.xml.html</a>, that should be fine.</p>\n<p>FYI, <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> , the Request pattern has a very similar invariant to what I'm trying to do with <a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12647\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12647\">GF#12647</a>. </p>\n<p>Request pattern invariant expression:  (agent is Practitioner) or (agent is Device) or onBehalfOf.exists().not()</p>\n<p>CareTeam invariant expression: (member is Practitioner) or onBehalfOf.exists().not()</p>\n<p>The exact build error is:  <br>\n     [java] ERROR @ CareTeam.participant[2] (line 0, col0) careteam-example:: CareTeam.participant[2]: onBehalfOf can only be specified if member is practitioner [(member is Practitioner) or onBehalfOf.exists().not()] (src = InstanceValidator)<br>\n      [java] ERROR @ CareTeam.participant[2] careteam-example:: CareTeam.participant[2]: onBehalfOf can only be specified if member is practitioner [(member is Practitioner) or onBehalfOf.exists().not()] (src = InstanceValidator)</p>\n<p>It seems like the issue is related to the \"member is Practitioner\" part and with Bryn's help, I've tried a few other variations like \"member.resolve() is Practitioner\" and \"member.resolve().is(Practitioner)\" with no luck.</p>\n<p>Any other suggestions?</p>",
        "id": 153870731,
        "sender_full_name": "Michelle (Moseman) Miller",
        "timestamp": 1486564043
    },
    {
        "content": "<p>definitely need the .resolve() - but I'm not sure what the actual error you are getting is?</p>",
        "id": 153870813,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1486614829
    },
    {
        "content": "<p>The error I saw after building is below, but was not very descriptive.  Just seems like it thinks my example, <a href=\"http://build.fhir.org/careteam-example.xml.html\" target=\"_blank\" title=\"http://build.fhir.org/careteam-example.xml.html\">http://build.fhir.org/careteam-example.xml.html</a>, violates the invariant.</p>\n<div class=\"codehilite\"><pre> [java] ERROR @ CareTeam.participant[2] (line 0, col0) careteam-example:: CareTeam.participant[2]: onBehalfOf can only be specified if member is practitioner [(member is Practitioner) or onBehalfOf.exists().not()] (src = InstanceValidator)\n [java] ERROR @ CareTeam.participant[2] careteam-example:: CareTeam.participant[2]: onBehalfOf can only be specified if member is practitioner [(member is Practitioner) or onBehalfOf.exists().not()] (src = InstanceValidator)\n</pre></div>",
        "id": 153870840,
        "sender_full_name": "Michelle (Moseman) Miller",
        "timestamp": 1486638783
    },
    {
        "content": "<p>Same type of error when I use   (onBehalfOf.exists()).not() or (member.resolve() is Practitioner)</p>\n<p>[java] careteam-example:: CareTeam.participant[2]: CareTeam.participant.onBehalfOf can only be populated when CareTeam.participant.member is a Practitioner [(onBehalfOf.exists()).not() or (member.resolve() is Practitioner)]<br>\n [java] careteam-example:: CareTeam.participant[2]: CareTeam.participant.onBehalfOf can only be populated when CareTeam.participant.member is a Practitioner [(onBehalfOf.exists()).not() or (member.resolve() is Practitioner)]</p>",
        "id": 153870841,
        "sender_full_name": "Michelle (Moseman) Miller",
        "timestamp": 1486638971
    },
    {
        "content": "<p>hmm. I'm going to have to debug this</p>",
        "id": 153870843,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1486639540
    },
    {
        "content": "<p>fixed</p>",
        "id": 153870919,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1486672078
    },
    {
        "content": "<p>thanks!!</p>",
        "id": 153870923,
        "sender_full_name": "Michelle (Moseman) Miller",
        "timestamp": 1486673433
    }
]