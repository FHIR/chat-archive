[
    {
        "content": "<p>Hello <span class=\"user-mention\" data-user-id=\"191676\">@Lee Surprenant</span> <br>\nWhen there are many records for a resource, it gives \"next\" url in the bundle. We have a case as below<br>\n\"link\": [<br>\n    {<br>\n      \"relation\": \"self\",<br>\n      \"url\": \"<a href=\"https://fhirserver.justtest.in:9443/fhir-server/api/v4/Observation?_count=10&amp;category=vital-signs&amp;date=gt1940-10-04T00:00:00+00:00&amp;patient=17e77411359-8837d878-ea1e-45b5-bb89-882fdfb2be4b&amp;_page=1\">https://fhirserver.justtest.in:9443/fhir-server/api/v4/Observation?_count=10&amp;category=vital-signs&amp;date=gt1940-10-04T00:00:00+00:00&amp;patient=17e77411359-8837d878-ea1e-45b5-bb89-882fdfb2be4b&amp;_page=1</a>\"<br>\n    },<br>\n    {<br>\n      \"relation\": \"next\",<br>\n      \"url\": \"<a href=\"https://fhirserver.justtest.in:9443/fhir-server/api/v4/Observation?_count=10&amp;category=vital-signs&amp;date=gt1940-10-04T00:00:00+00:00&amp;patient=17e77411359-8837d878-ea1e-45b5-bb89-882fdfb2be4b&amp;_page=2\">https://fhirserver.justtest.in:9443/fhir-server/api/v4/Observation?_count=10&amp;category=vital-signs&amp;date=gt1940-10-04T00:00:00+00:00&amp;patient=17e77411359-8837d878-ea1e-45b5-bb89-882fdfb2be4b&amp;_page=2</a>\"<br>\n    }</p>\n<p>Here in the URL, there is \"+\" sign in the date parameter, and hence the GET on this URL to FHIR server fails saying  below<br>\n{<br>\n    \"resourceType\": \"OperationOutcome\",<br>\n    \"id\": \"ac-1f-5-a3-1d80ad82-06d4-41c1-9f6a-2cd2c2ecfc7a\",<br>\n    \"issue\": [<br>\n        {<br>\n            \"severity\": \"fatal\",<br>\n            \"code\": \"invalid\",<br>\n            \"details\": {<br>\n                \"text\": \"Invalid Date Time Format found please use 'yyyy-mm-ddThh:mm:ss[Z|(+|-)hh:mm].'\"<br>\n            },</p>\n<div class=\"codehilite\"><pre><span></span><code>    }\n]\n</code></pre></div>\n\n<p>}</p>\n<p>Just to test, the moment, I encode, the + sign to make the URL <a href=\"https://fhirserver.justtest.in:9443/fhir-server/api/v4/Observation?_count=10&amp;category=vital-signs&amp;date=gt1940-10-04T00:00:00%2B00:00&amp;patient=17e77411359-8837d878-ea1e-45b5-bb89-882fdfb2be4b&amp;_page=2\">https://fhirserver.justtest.in:9443/fhir-server/api/v4/Observation?_count=10&amp;category=vital-signs&amp;date=gt1940-10-04T00:00:00%2B00:00&amp;patient=17e77411359-8837d878-ea1e-45b5-bb89-882fdfb2be4b&amp;_page=2</a><br>\nit gives me the desired result.</p>\n<p>Could you please let me know your thoughts?</p>\n<p>Thanks,<br>\nSagar</p>",
        "id": 269138401,
        "sender_full_name": "Sagar Sarvankar",
        "timestamp": 1643044632
    },
    {
        "content": "<p>HI Sagar, + is a special case. It also signals a space in URLs.  It's best that they be URL Encoded.</p>",
        "id": 269143606,
        "sender_full_name": "Paul Bastide",
        "timestamp": 1643046899
    },
    {
        "content": "<p>Hello <span class=\"user-mention\" data-user-id=\"192632\">@Paul Bastide</span> ,<br>\nThank you for your reply.</p>\n<p>Here in this case, the + signifies part of the date and is not a space.</p>\n<p>In the link <a href=\"https://www.hl7.org/fhir/http.html#paging\">https://www.hl7.org/fhir/http.html#paging</a> it says \"The links are opaque to the client, have no dictated structure, and only the server understands them. The client must use the server supplied links in order to traverse the pages.\"</p>\n<p>So going by the above information, do you think the IBM FHIR should encode it and send it? </p>\n<p>Regards,<br>\nSagar</p>",
        "id": 269210239,
        "sender_full_name": "Sagar Sarvankar",
        "timestamp": 1643087109
    },
    {
        "content": "<p>I'm not sure if we should url-encode the full link url in our responses or not.<br>\nI think it might make sense for us to at least encode the datetime values since <code>+</code> is known to cause trouble.<br>\n<span class=\"user-mention\" data-user-id=\"192632\">@Paul Bastide</span> agree?<br>\n<span class=\"user-mention\" data-user-id=\"392120\">@Sagar Sarvankar</span> care to open an issue for it at <a href=\"https://github.com/IBM/FHIR/issues\">https://github.com/IBM/FHIR/issues</a> ?</p>",
        "id": 269250128,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1643114269
    },
    {
        "content": "<p>I agree <span class=\"user-mention\" data-user-id=\"191676\">@Lee Surprenant</span></p>",
        "id": 269251852,
        "sender_full_name": "Paul Bastide",
        "timestamp": 1643115161
    },
    {
        "content": "<p>Thank you <span class=\"user-mention\" data-user-id=\"191676\">@Lee Surprenant</span>  and <span class=\"user-mention\" data-user-id=\"192632\">@Paul Bastide</span>  </p>\n<p>Please find the issue created at <a href=\"https://github.com/IBM/FHIR/issues/3245\">https://github.com/IBM/FHIR/issues/3245</a></p>",
        "id": 269269858,
        "sender_full_name": "Sagar Sarvankar",
        "timestamp": 1643123340
    }
]