[
    {
        "content": "<p>Hello <span class=\"user-mention\" data-user-id=\"191676\">@Lee Surprenant</span> ,</p>\n<p>We have a situation, where we issue a token from oauth server. Using this token, we can then access FHIR patient resource.<br>\nAfter we revoke this token from our auth server, it is expected that this token is no more valid since it is not available on the oauth server.</p>\n<p>Now, when we access FHIR patient resource with this revoked token, the IBM FHIR server response with 200 and the requested patient resource. It should have denied access and returned a 400, since the token that is used here is revoked.</p>\n<p>This is one of the test cases that is tested by Inferno.</p>\n<p>Please let me know your thoughts.</p>\n<p>Thank you,<br>\nSagar</p>",
        "id": 276964297,
        "sender_full_name": "Sagar Sarvankar",
        "timestamp": 1648536602
    },
    {
        "content": "<p>the access tokens should have a short lifespan and the client will be unable to get a new one.  is it truly necessary?</p>",
        "id": 276989189,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1648552509
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191676\">@Lee Surprenant</span>  for your response.</p>\n<p>Let me see if by shortening the lifespan of the token will give us the desired behavior.<br>\nIs there a way where the IBM FHIR server can check if the token is revoked or not, by using the oauth servers's introspect URL before providing access to any of its resources?</p>\n<p>Regards,<br>\nSagar</p>",
        "id": 277005871,
        "sender_full_name": "Sagar Sarvankar",
        "timestamp": 1648561239
    },
    {
        "content": "<p>We're just using OpenLiberty's support for this.  Specifically they have a couple different features that are relevant:</p>\n<ol>\n<li>mpJwt:  <a href=\"https://www.openliberty.io/docs/21.0.0.3/reference/config/mpJwt.html\">https://www.openliberty.io/docs/21.0.0.3/reference/config/mpJwt.html</a></li>\n<li>openidConnectClient:  <a href=\"https://www.openliberty.io/docs/21.0.0.3/reference/config/openidConnectClient.html\">https://www.openliberty.io/docs/21.0.0.3/reference/config/openidConnectClient.html</a></li>\n</ol>",
        "id": 277008415,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1648562338
    },
    {
        "content": "<p>originally I was working with openidConnectClient which supports token introspection</p>",
        "id": 277008483,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1648562375
    },
    {
        "content": "<p>but over time I moved to mpJwt (which does not)</p>",
        "id": 277008513,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1648562388
    },
    {
        "content": "<p><a href=\"https://ibm.github.io/FHIR/guides/FHIRServerUsersGuide#53-openid-connect-and-oauth-20\">https://ibm.github.io/FHIR/guides/FHIRServerUsersGuide#53-openid-connect-and-oauth-20</a> mentions the OpenID Connect Client option, we don't have any doc for that...you'd need to configure it yourself based on the Liberty docs</p>",
        "id": 277008779,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1648562467
    },
    {
        "content": "<p>Ok <span class=\"user-mention\" data-user-id=\"191676\">@Lee Surprenant</span> , I will go through the links that you have shared here.</p>\n<p>Thank you,<br>\nSagar</p>",
        "id": 277021165,
        "sender_full_name": "Sagar Sarvankar",
        "timestamp": 1648567307
    }
]