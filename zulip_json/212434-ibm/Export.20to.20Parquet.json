[
    {
        "content": "<p>I finally took a swag at packaging up the prototype code from <span class=\"user-mention\" data-user-id=\"197632\">@Gidon Gershinsky</span> and <span class=\"user-mention\" data-user-id=\"251796\">@Eliot Salant</span> for use from the FHIR Server:  <a href=\"https://github.com/IBM/FHIR/pull/1374/files\">https://github.com/IBM/FHIR/pull/1374/files</a></p>",
        "id": 205528794,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1596141052
    },
    {
        "content": "<p>I just finished reviewing it with the team and we think this will work (though should be considered experimental at present).</p>",
        "id": 205528845,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1596141090
    },
    {
        "content": "<p>Unfortunately, this new power comes at a pretty heavy cost...by using Apache Spark to do the heavy lifting of the JSON -&gt; Parquet writing, we introduce over 200MB of new dependencies to our already considerable size.</p>",
        "id": 205528989,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1596141151
    },
    {
        "content": "<p>It pushes the fhir-bulkimportexport-webapp over the size limit enforced by bintray, so we wouldn't even be able to publish it there.<br>\nSo we explored an option of pushing that spark stuff into the install; that would allow us to continue posting the webapp to bintray, but we'd still pay to cost in terms of the size (and complexity) of our installer zip and docker image.</p>\n<p>So with these considerations in mind we're thinking to do this:</p>\n<p><em>Short term</em>:  mark these new dependencies as \"provided\" and introduce a config property called \"enableParquet\" which is false by default.  then document that to turn it on, you need to add all the spark dependencies.  when its false, reject requests for bulk export to parquet.</p>\n<p><em>Long term</em>:  split fhir-bulkimportexport-webapp into a separate project with its own docker image.  this way, the ibm-fhir-server can stay its current size (or get a bit smaller), and we can put all the new heft into the new image and call that <code>ibmcom/ibm-fhir-job-server</code> or some such</p>",
        "id": 205529193,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1596141270
    },
    {
        "content": "<p>Your feedback welcome on this plan...</p>",
        "id": 205529219,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1596141288
    }
]