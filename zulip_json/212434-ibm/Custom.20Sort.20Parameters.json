[
    {
        "content": "<p>Hello  <span class=\"user-mention\" data-user-id=\"191676\">@Lee Surprenant</span> ,</p>\n<p>I have a custom resource created by extending Basic resource. I want to sort them by datetime, decreasing. There is no default fields that holds datetime data in Basic resource, only date, which is not enough. This is why i use an extension to implement createdAt field of type \"instant\". I have created a search parameter config and it's code is \"created-at\". I'm trying to sort by adding \"_sort=-created-at\" query but this leads error. The log output says this: \"<strong>Undefined sort parameter. resourceType=[Resource] sortParmCode=[created-at]</strong>\". Looks like it is not enough to define search parameter and I couldn't find any document about defining a new sort parameter. Is there a way to achieve my goal?</p>\n<p>Thanks in advance.</p>",
        "id": 275791233,
        "sender_full_name": "Batuhan Bulut",
        "timestamp": 1647603962
    },
    {
        "content": "<p>Hi Batuhan, <code>resourceType=[Resource]</code> looks a bit suspicious... are you trying a whole-system search or are you searching Basic resources?</p>",
        "id": 275796658,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1647607456
    },
    {
        "content": "<p>It looks like you are doing <code>GET [base]?_sort=created-at</code></p>",
        "id": 275796719,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1647607493
    },
    {
        "content": "<p>but your search param is only defined for Basic</p>",
        "id": 275796747,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1647607506
    },
    {
        "content": "<p>so it should be <code>GET [base]/Basic?_sort=created-at</code></p>",
        "id": 275796779,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1647607524
    },
    {
        "content": "<p>or if you want it scoped to just your custom resource type, add a <code>&amp;code=your-code</code> in there</p>",
        "id": 275796816,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1647607548
    },
    {
        "content": "<p>finally, what are the semantics of <code>created-at</code>?  if its just when the resource was created, then you should be using <code>_lastUpdated</code>.  if its some other instant (like when some real-world entity was created) then your approach seems right</p>",
        "id": 275796998,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1647607631
    },
    {
        "content": "<p>Actually I'm searching on Basic resources but like this: <code>GET [base]/?_type=Basic&amp;_profile=${this.PROFILE}&amp;to=${id}&amp;_count=${count}&amp;_page=${page}&amp;_sort=-created-at</code>. Probably this is why it cannot resolve resourceType as Basic while logging. <code>to</code> here is another search parameter and it works fine.</p>\n<p>Let me show you some of my search attempts.<br>\n<code>GET [base]/Basic</code><br>\nResponse:</p>\n<div class=\"codehilite\" data-code-language=\"JSON\"><pre><span></span><code><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">\"resourceType\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Bundle\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">\"id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"e2a9bbbf-08af-47cb-9730-584ffd0447c5\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">\"type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"searchset\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">\"total\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">\"link\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"nt\">\"relation\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"self\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"nt\">\"url\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://localhost:9443/fhir-server/api/v4/Basic?_count=10&amp;_page=1\"</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"p\">}</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n</code></pre></div>\n<p><code>GET [base]/Basic?_profile=https://mydomain.com/fhir/R4/StructureDefinition/UserNotification&amp;_sort=created-at</code><br>\nResponse:</p>\n<div class=\"codehilite\" data-code-language=\"JSON\"><pre><span></span><code><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">\"resourceType\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Bundle\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">\"id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"bd76b098-8ef6-430d-984f-47e4fb6a4ce5\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">\"type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"searchset\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">\"total\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">\"link\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"nt\">\"relation\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"self\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"nt\">\"url\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://localhost:9443/fhir-server/api/v4/Basic?_count=10&amp;_profile=https://mydomain.com/fhir/R4/StructureDefinition/UserNotification&amp;_sort=created-at&amp;_page=1\"</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"p\">}</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n</code></pre></div>\n<p><code>GET [base]/?_type=Basic&amp;_profile=https://mydomain.com/fhir/R4/StructureDefinition/UserNotification&amp;_sort=created-at</code><br>\nResponse:</p>\n<div class=\"codehilite\" data-code-language=\"JSON\"><pre><span></span><code><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">\"resourceType\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"OperationOutcome\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">\"id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"ac-12-0-3-b8e26aae-37cb-44b7-a0b9-3c820b1c9214\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">\"issue\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"nt\">\"severity\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"fatal\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"nt\">\"code\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"invalid\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"nt\">\"details\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">                </span><span class=\"nt\">\"text\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Undefined sort parameter. resourceType=[Resource] sortParmCode=[created-at]\"</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"p\">},</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"nt\">\"expression\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"w\"></span>\n<span class=\"w\">                </span><span class=\"s2\">\"&lt;empty&gt;\"</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"p\">}</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n</code></pre></div>\n<p><code>GET [base]/?_type=Basic&amp;_profile=https://mydomain.com/fhir/R4/StructureDefinition/UserNotification</code><br>\nResponse:</p>\n<div class=\"codehilite\" data-code-language=\"JSON\"><pre><span></span><code><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">\"resourceType\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Bundle\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">\"id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"99cca769-e38e-41e2-adfd-3a989c61955d\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">\"type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"searchset\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">\"total\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">6</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">\"link\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"nt\">\"relation\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"self\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"nt\">\"url\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://localhost:9443/fhir-server/api/v4/?_count=10&amp;_profile=https://mydomain.com/fhir/R4/StructureDefinition/UserNotification&amp;_type=Basic&amp;_page=1\"</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"p\">}</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p\">],</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">\"entry\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"nt\">\"fullUrl\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://localhost:9443/fhir-server/api/v4//Basic/notification-id-1\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"nt\">\"resource\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">                </span><span class=\"nt\">\"resourceType\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Basic\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">                </span><span class=\"nt\">\"id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"notification-id-1\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">                </span><span class=\"nt\">\"meta\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">                    </span><span class=\"nt\">\"versionId\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"1\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">                    </span><span class=\"nt\">\"lastUpdated\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"2022-03-18T10:54:13.833583Z\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">                    </span><span class=\"nt\">\"profile\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"s2\">\"https://mydomain.com/fhir/R4/StructureDefinition/UserNotification\"</span><span class=\"w\"></span>\n<span class=\"w\">                    </span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"w\">                </span><span class=\"p\">},</span><span class=\"w\"></span>\n<span class=\"w\">                </span><span class=\"nt\">\"extension\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"w\"></span>\n<span class=\"w\">                    </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">                        </span><span class=\"nt\">\"extension\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"w\"></span>\n<span class=\"w\">                            </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">                                </span><span class=\"nt\">\"url\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"createdAt\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">                                </span><span class=\"nt\">\"valueInstant\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"2022-03-18T10:54:07.156Z\"</span><span class=\"w\"></span>\n<span class=\"w\">                            </span><span class=\"p\">},</span><span class=\"w\"></span>\n<span class=\"w\">                    </span><span class=\"p\">}</span><span class=\"w\"></span>\n<span class=\"w\">                </span><span class=\"p\">],</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"p\">},</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"nt\">\"search\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">                </span><span class=\"nt\">\"mode\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"match\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">                </span><span class=\"nt\">\"score\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"p\">}</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"p\">},</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n</code></pre></div>\n<p>I have clipped some of the data from last response to make it smaller.</p>",
        "id": 275802777,
        "sender_full_name": "Batuhan Bulut",
        "timestamp": 1647610521
    },
    {
        "content": "<p>And here is my search parameter definition:</p>\n<div class=\"codehilite\" data-code-language=\"JSON\"><pre><span></span><code><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">\"fullUrl\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://mydomain.com/fhir/R4/SearchParameter/UserNotification-createdAt\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">\"resource\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">\"resourceType\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"SearchParameter\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">\"id\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"UserNotification-createdAt\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">\"url\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"https://mydomain.com/fhir/R4/SearchParameter/UserNotification-createdAt\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">\"version\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"4.0.0\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">\"name\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"createdAt\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">\"status\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"draft\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">\"experimental\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"kc\">false</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">\"date\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"2022-03-15T22:37:54+11:00\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">\"description\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"UserNotification's createdAt field\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">\"code\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"created-at\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">\"base\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"s2\">\"Basic\"</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"p\">],</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">\"type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"date\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">\"xpathUsage\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"normal\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">\"xpath\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"f:Basic/f:extension[@url='https://mydomain.com/fhir/R4/StructureDefinition/UserNotificationExtension']/f:extension[@url='createdAt']/f:valueInstant\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">\"expression\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Basic.extension.where(url='https://mydomain.com/fhir/R4/StructureDefinition/UserNotificationExtension').extension.where(url='createdAt').value\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">\"multipleOr\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"kc\">true</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">\"multipleAnd\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"kc\">true</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">\"modifier\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[]</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p\">}</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n</code></pre></div>",
        "id": 275803258,
        "sender_full_name": "Batuhan Bulut",
        "timestamp": 1647610763
    },
    {
        "content": "<p>I didn't use <code>lastUpdated</code> field because hl7 documentation says it shall be updated with current time when the resource updated. I want a datetime field that prone to updates.</p>",
        "id": 275804700,
        "sender_full_name": "Batuhan Bulut",
        "timestamp": 1647611379
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191676\">Lee Surprenant</span> <a href=\"#narrow/stream/212434-ibm/topic/Custom.20Sort.20Parameters/near/275796658\">said</a>:</p>\n<blockquote>\n<p>Hi Batuhan, <code>resourceType=[Resource]</code> looks a bit suspicious... are you trying a whole-system search or are you searching Basic resources?</p>\n</blockquote>\n<p>Since it's not giving me error but zero results when I do <code>GET [base]/Basic?_sort=created-at</code>, the problem is different then.</p>\n<p>When i directly search on Basic resource, none of my resources found, zero result. But I can access individual resources with <code>GET [base]/Basic/[id]</code>. When i do whole-system search by restricting the types, <code>GET [base]/?_type=Basic</code>, it just finds my resources (total 21 entries). Isn't it inconsistent? Does it have anything to do with SMART on FHIR?</p>",
        "id": 275813474,
        "sender_full_name": "Batuhan Bulut",
        "timestamp": 1647615423
    },
    {
        "content": "<blockquote>\n<p>Does it have anything to do with SMART on FHIR?</p>\n</blockquote>\n<p>do you have <code>fhir-smart</code> in your userlib?<br>\nif so, that could definitely contribute to this... the \"Basic\" resource can be in the patient compartment and so the fhir-smart interceptor <em>would</em> change a search like <code>GET [base]/Basic</code> into a compartment search like <code>GET [base]/Patient/[context-id]/Basic</code>.<br>\nbut that doesn't really explain why you wouldn't be able to sort on your custom search parameter</p>",
        "id": 275922257,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1647713718
    },
    {
        "content": "<p>for that one, its probably just a limitation of our whole-system search implementation.  whole-system search with a <code>_type</code> parameter that has a single value is a bit wonky... we allow you to use search parameters that apply to just that resource type but (as you found) apparently we don't allow sort parameters that apply to just that resource type in this case.  personally, I think that seems like a reasonable limitation, but feel free to open an enhancement request.</p>",
        "id": 275922498,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1647714023
    },
    {
        "content": "<p>i think these would be my general recommendations:</p>\n<ol>\n<li>use the Basic endpoint instead of whole-system search</li>\n<li>if using SMART App Launch, use the <code>user/Basic.read</code> scope instead of <code>patient/Basic.read</code></li>\n</ol>\n<p>but, with that said, I still don't think our current fhir-smart implementation would support this because it doesn't know that your special Basic resource should be searchable to all users (i.e. is not bound to any patient compartment). therefor, I'm thinking your best bet would be to also do this:</p>\n<ol start=\"3\">\n<li>create your own persistence interceptor (probably starting with fhir-smart as your base) and make it do what you want</li>\n</ol>\n<p>if you do number 3 and it feels generally applicable, feel free to open an issue to discuss your proposed changes</p>",
        "id": 275922595,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1647714187
    },
    {
        "content": "<p>for example, I could imagine modifying <code>fhir-smart</code> so that it does a normal search (instead of scoping the search to the compartment) when <code>user/</code> scopes have been granted.  or possibly make that configurable or something</p>",
        "id": 275923674,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1647715560
    },
    {
        "content": "<p><a href=\"https://github.com/IBM/FHIR/issues/3495\">https://github.com/IBM/FHIR/issues/3495</a> &lt;- <span class=\"user-mention\" data-user-id=\"463702\">@Batuhan Bulut</span>  interested for your feedback on this</p>",
        "id": 276185803,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1647954664
    }
]