[
    {
        "content": "<p>Hi, I have installed your FHIR Server  according to the <a href=\"https://ibm.github.io/FHIR/guides/FHIRServerUsersGuide#21-installing-a-new-server\" target=\"_blank\" title=\"https://ibm.github.io/FHIR/guides/FHIRServerUsersGuide#21-installing-a-new-server\">Guide</a>, but I get the following response on:</p>\n<div class=\"codehilite\"><pre><span></span>curl -k -u fhiruser https://localhost:9443/fhir-server/api/metadata\n</pre></div>\n\n\n<div class=\"codehilite\"><pre><span></span>&lt;!DOCTYPE HTML PUBLIC &quot;-//IETF//DTD HTML 2.0//EN&quot;&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;404 Not Found&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;h1&gt;Not Found&lt;/h1&gt;&lt;p&gt;The application or context root for this request has not been found: &amp;#047;fhir&amp;#045;server&amp;#047;api&amp;#047;v1&amp;#047;metadata&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;\n</pre></div>",
        "id": 179310971,
        "sender_full_name": "Alexander Kiel",
        "timestamp": 1572340058
    },
    {
        "content": "<p>hi Alexander  please try <code>curl -k -u fhiruser:change-password https://localhost:9443/fhir-server/api/v4/metadata</code>  (note the user password and the \"v4\" in the path)</p>",
        "id": 179320906,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572349129
    },
    {
        "content": "<p>also, if you happen to find a link thats missing that in the docs, please let us know :-)</p>",
        "id": 179320921,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572349148
    },
    {
        "content": "<p>The site should be updated now.  as well as the passwords to the default change-password</p>",
        "id": 179331305,
        "sender_full_name": "Paul Bastide",
        "timestamp": 1572357928
    },
    {
        "content": "<p>we use gatsby so it might be 'uber cached</p>",
        "id": 179331344,
        "sender_full_name": "Paul Bastide",
        "timestamp": 1572357954
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191676\">@Lee Surprenant</span> Thanks. The path v4 vs. v1 was the problem. I found the password in the config file.<br>\n<span class=\"user-mention\" data-user-id=\"192632\">@Paul Bastide</span> Thanks for updating the config.</p>\n<p>Something slightly different: Is it possible to use the FHIR server without authentication and without TLS termination?</p>",
        "id": 179337202,
        "sender_full_name": "Alexander Kiel",
        "timestamp": 1572361210
    },
    {
        "content": "<p>its possible but we make you do some work</p>",
        "id": 179337239,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572361237
    },
    {
        "content": "<p>its \"all TLS\" by default</p>",
        "id": 179337255,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572361246
    },
    {
        "content": "<p>IIRC our compliance folks asked us to do that a long time ago...we could revisit that decision now that we're open</p>",
        "id": 179337314,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572361279
    },
    {
        "content": "<p>I usually run my servers without TLS behind a TLS terminating load-balancer</p>",
        "id": 179337344,
        "sender_full_name": "Alexander Kiel",
        "timestamp": 1572361291
    },
    {
        "content": "<p>i think there's two spots you need to update to run with HTTP</p>",
        "id": 179337359,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572361302
    },
    {
        "content": "<p>the easy one is in server.xml</p>",
        "id": 179337378,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572361308
    },
    {
        "content": "<p>not sure if you're familiar with WebSphere Liberty (or OpenLiberty) application server</p>",
        "id": 179337446,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572361328
    },
    {
        "content": "<p>but server.xml is like the 1 config file that drives everything in Liberty</p>",
        "id": 179337495,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572361351
    },
    {
        "content": "<p>there's a line like this:  <code>&lt;httpEndpoint host=\"*\" httpPort=\"-1\" httpsPort=\"9443\" id=\"defaultHttpEndpoint\" onError=\"FAIL\"/&gt;</code></p>",
        "id": 179337556,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572361388
    },
    {
        "content": "<p>you can change it to <code>&lt;httpEndpoint host=\"*\" httpPort=\"9080\" httpsPort=\"9443\" id=\"defaultHttpEndpoint\" onError=\"FAIL\"/&gt;</code></p>",
        "id": 179337569,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572361400
    },
    {
        "content": "<p>or whatever you want</p>",
        "id": 179337575,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572361405
    },
    {
        "content": "<p>I'm not familiar with WebSphere Liberty, but with Glassfish and Tomcat.</p>",
        "id": 179337592,
        "sender_full_name": "Alexander Kiel",
        "timestamp": 1572361418
    },
    {
        "content": "<p>should be possible to run our webapp on Glassfish but we've never done it and so there's probalby lots of gotchas</p>",
        "id": 179337749,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572361480
    },
    {
        "content": "<p>No it's ok. I didn't mean to try to run it in Glassfish.</p>",
        "id": 179337814,
        "sender_full_name": "Alexander Kiel",
        "timestamp": 1572361519
    },
    {
        "content": "<p>the install should have given you structure like <code>wlp/usr/servers/fhir-server</code></p>",
        "id": 179337822,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572361522
    },
    {
        "content": "<p>thats where you should find server.xml</p>",
        "id": 179337835,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572361535
    },
    {
        "content": "<p>this one is a supported config change and the server will even auto-restart to pick it up I think.<br>\nBUT, there is also a second spot to change.</p>",
        "id": 179337849,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572361549
    },
    {
        "content": "<p>and this one is harder...</p>",
        "id": 179337856,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572361553
    },
    {
        "content": "<p>If I add a HTTP port, I get a redirect to https</p>",
        "id": 179337970,
        "sender_full_name": "Alexander Kiel",
        "timestamp": 1572361595
    },
    {
        "content": "<p>getting there...</p>",
        "id": 179337981,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572361604
    },
    {
        "content": "<p>our webapp itself has a transport restriction enabled</p>",
        "id": 179338018,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572361620
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/JwWPLftAmur2WSg8gnHfHNVW/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/JwWPLftAmur2WSg8gnHfHNVW/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/JwWPLftAmur2WSg8gnHfHNVW/pasted_image.png\"></a></div>",
        "id": 179338105,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572361669
    },
    {
        "content": "<p>i need to think through the best way to change that...</p>",
        "id": 179338220,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572361715
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192632\">@Paul Bastide</span> curious if you have thoughts on this one ^</p>",
        "id": 179338287,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572361750
    },
    {
        "content": "<p>ideally we'd have a way for users of the binary release to run with HTTP if they want</p>",
        "id": 179338312,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572361769
    },
    {
        "content": "<p>without needing to hack the war file or build it themselves</p>",
        "id": 179338352,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572361790
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"197470\">@Alexander Kiel</span> wanna open an issue (enhancement request) for this one?</p>",
        "id": 179338433,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572361814
    },
    {
        "content": "<p>Ok I see.</p>",
        "id": 179338449,
        "sender_full_name": "Alexander Kiel",
        "timestamp": 1572361821
    },
    {
        "content": "<p>Yes I can do that. Directly on GitHub?</p>",
        "id": 179338465,
        "sender_full_name": "Alexander Kiel",
        "timestamp": 1572361833
    },
    {
        "content": "<p>yes please</p>",
        "id": 179338475,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572361836
    },
    {
        "content": "<p><a href=\"https://github.com/ibm/fhir/issues\" target=\"_blank\" title=\"https://github.com/ibm/fhir/issues\">https://github.com/ibm/fhir/issues</a></p>",
        "id": 179338480,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572361841
    },
    {
        "content": "<p>in meantime, you can explode the war file, change this one file to remove the <code>transport-guarantee</code>, re-zip it into a war, and replace the old one in the server.  sorry  :-P</p>",
        "id": 179338592,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572361895
    },
    {
        "content": "<p>actually, probably easier just to clone the project and build it yourself</p>",
        "id": 179338687,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572361927
    },
    {
        "content": "<p>no need for full setup...you'd just edit that one file and then run:<br>\n<code>mvn clean install -f fhir-parent -DskipTests</code></p>",
        "id": 179338805,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572361997
    },
    {
        "content": "<p>might even get away with just <code>mvn clean install -f fhir-install</code>, but i'm not positive it would rebuild <code>fhir-server-webapp</code> that builds the war</p>",
        "id": 179338938,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572362064
    },
    {
        "content": "<p>I think we can drop this into a separate war as part of the build.  I wouldn't include it in the fhir-install.   We could mark-it experimental</p>",
        "id": 179339954,
        "sender_full_name": "Paul Bastide",
        "timestamp": 1572362644
    },
    {
        "content": "<p>I think I'd rather not introduce separate build artifact for it.  I just wish there was a simple way to say \"I want to expose this over HTTP and I know what I'm doing so just let me\"</p>",
        "id": 179341118,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572363296
    },
    {
        "content": "<p>I have my issue here with more context to decide if it fits your FHIR server: <a href=\"https://github.com/IBM/FHIR/issues/331\" target=\"_blank\" title=\"https://github.com/IBM/FHIR/issues/331\">https://github.com/IBM/FHIR/issues/331</a></p>",
        "id": 179341140,
        "sender_full_name": "Alexander Kiel",
        "timestamp": 1572363306
    },
    {
        "content": "<p>Thanks, I can look at it in the next 1-2 days.  We just need to figure out our build packaging implications</p>",
        "id": 179341283,
        "sender_full_name": "Paul Bastide",
        "timestamp": 1572363392
    },
    {
        "content": "<p>thanks Alexander.  we also run this in our cloud on kubernetes, so its definitely a scenario we want to major in.</p>",
        "id": 179341293,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572363399
    },
    {
        "content": "<p>today we do that with TLS on, which our security folks make us do</p>",
        "id": 179341312,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572363418
    },
    {
        "content": "<p>on the radar is exploring use of Istio to manage the pod-to-pod TLS</p>",
        "id": 179341363,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572363456
    },
    {
        "content": "<p>And do you have an additional TLS terminating load balancer or do you just tunnel the TLS connection though a load balancer?</p>",
        "id": 179341429,
        "sender_full_name": "Alexander Kiel",
        "timestamp": 1572363485
    },
    {
        "content": "<p>mostly because managing the certs is such a huge pain</p>",
        "id": 179341433,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572363487
    },
    {
        "content": "<p>yes, we're using IBM Cloud Kubernetes Service (IKS) and I believe its using nginx-ingress under covers</p>",
        "id": 179341519,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572363545
    },
    {
        "content": "<p>so thats terminating the TLS</p>",
        "id": 179341540,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572363558
    },
    {
        "content": "<p>but then it creates new TLS connection to the app server on the other side</p>",
        "id": 179341559,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572363575
    },
    {
        "content": "<p>everything encrypted</p>",
        "id": 179341576,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572363590
    },
    {
        "content": "<p>I didn't look into istio, only heard of it.  Does it manage the certificates?</p>",
        "id": 179341640,
        "sender_full_name": "Alexander Kiel",
        "timestamp": 1572363611
    },
    {
        "content": "<p>not sure :-)</p>",
        "id": 179341651,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572363623
    },
    {
        "content": "<p>i'm hoping it helps us there</p>",
        "id": 179341660,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572363631
    },
    {
        "content": "<p>cuz managing the certs is a PITA</p>",
        "id": 179341669,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572363639
    },
    {
        "content": "<p>today we just ship with a self-signed cert</p>",
        "id": 179341695,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572363659
    },
    {
        "content": "<p>We have the data flow inside the cluster unencrypted. But yes, you are right, one should encrypt everywhere.</p>",
        "id": 179341713,
        "sender_full_name": "Alexander Kiel",
        "timestamp": 1572363666
    },
    {
        "content": "<p>and we just tell all the clients (other pods in the cluster) not to validate the server cert hostname :-P</p>",
        "id": 179341726,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572363676
    },
    {
        "content": "<p>but at least its encrypted <span aria-label=\"shrug\" class=\"emoji emoji-1f937\" role=\"img\" title=\"shrug\">:shrug:</span></p>",
        "id": 179341743,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572363689
    },
    {
        "content": "<p>I don't like self-signed certificates and using <code>curl -k</code>. :-) That is just bad guidance and negates the advantages of having TLS mostly.</p>",
        "id": 179341905,
        "sender_full_name": "Alexander Kiel",
        "timestamp": 1572363781
    },
    {
        "content": "<p>i don't disagree</p>",
        "id": 179341923,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572363794
    },
    {
        "content": "<p>we need better solution for inter-pod (intra-cluster) TLS</p>",
        "id": 179341942,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572363809
    },
    {
        "content": "<p>and I <em>think</em> Istio can help us here</p>",
        "id": 179341977,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572363832
    },
    {
        "content": "<p>I just havn't gotten to that yet (like so many other things...)</p>",
        "id": 179342043,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1572363850
    },
    {
        "content": "<p>I agree using TLS for pod-to-pod communication but it should use a proper CA. So maybe Istio is a solution here.</p>",
        "id": 179342274,
        "sender_full_name": "Alexander Kiel",
        "timestamp": 1572363972
    },
    {
        "content": "<p>So please do not jump on the issue implementing dual builds. Just take it as a discussion whether it is more practical to manage proper signed certificates outside of WebSphere or not.</p>",
        "id": 179342463,
        "sender_full_name": "Alexander Kiel",
        "timestamp": 1572364105
    }
]