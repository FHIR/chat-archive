[
    {
        "content": "<p>Hi,</p>\n<p>Installed v4.3.3. and using single embedded Derby database.</p>\n<p>I did a curl $healthcheck and got error response:</p>\n<p>{\"resourceType\":\"OperationOutcome\",\"id\":\"7f-0-0-1-97f933f8-17fa-4e4a-aa28-d7539abd73a0\",\"issue\":[{\"severity\":\"fatal\",\"code\":\"exception\",\"details\":{\"text\":\"The FHIR Server web application cannot process requests because it did not initialize correctly\"}}]</p>\n<p>Seeing following errors in the logs after starting fhir server.</p>\n<p>any help would be appreciated..</p>\n<p>[8/7/20 14:52:34:905 EDT] 00000032 com.ibm.fhir.persistence.jdbc.util.DerbyBootstrapper         E Encountered an exception while bootstrapping the FHIR database<br>\ncom.ibm.fhir.database.utils.api.ConnectionException: java.sql.SQLNonTransientConnectionException: No current connection.<br>\n    at com.ibm.fhir.database.utils.derby.DerbyTranslator.translate(DerbyTranslator.java:88)<br>\n    at com.ibm.fhir.database.utils.common.JdbcTarget.runStatement(JdbcTarget.java:41)<br>\n    at com.ibm.fhir.database.utils.common.CommonDatabaseAdapter.runStatement(CommonDatabaseAdapter.java:225)<br>\n    at com.ibm.fhir.database.utils.common.CommonDatabaseAdapter.createForeignKeyConstraint(CommonDatabaseAdapter.java:355)<br>\n    at com.ibm.fhir.database.utils.derby.DerbyAdapter.createForeignKeyConstraint(DerbyAdapter.java:277)<br>\n    at com.ibm.fhir.database.utils.model.ForeignKeyConstraint.apply(ForeignKeyConstraint.java:112)<br>\n    at com.ibm.fhir.database.utils.model.Table.apply(Table.java:126)<br>\n    at com.ibm.fhir.database.utils.model.Table.apply(Table.java:145)<br>\n    at com.ibm.fhir.database.utils.model.BaseObject.applyVersion(BaseObject.java:262)<br>\n    at com.ibm.fhir.database.utils.model.ObjectGroup.applyVersion(ObjectGroup.java:67)<br>\n    at com.ibm.fhir.database.utils.model.PhysicalDataModel.applyWithHistory(PhysicalDataModel.java:133)<br>\n    at com.ibm.fhir.persistence.jdbc.util.DerbyBootstrapper.bootstrap(DerbyBootstrapper.java:133)<br>\n    at com.ibm.fhir.persistence.jdbc.util.DerbyBootstrapper.bootstrapDb(DerbyBootstrapper.java:81)<br>\n    at com.ibm.fhir.server.listener.FHIRServletContextListener.bootstrapFhirDb(FHIRServletContextListener.java:282)<br>\n    at com.ibm.fhir.server.listener.FHIRServletContextListener.bootstrapDerbyDatabases(FHIRServletContextListener.java:216)<br>\n    at com.ibm.fhir.server.listener.FHIRServletContextListener.contextInitialized(FHIRServletContextListener.java:177)<br>\n    at com.ibm.ws.webcontainer.webapp.WebApp.notifyServletContextCreated(WebApp.java:2433)<br>\n    at com.ibm.ws.webcontainer31.osgi.webapp.WebApp31.notifyServletContextCreated(WebApp31.java:514)<br>\n    at com.ibm.ws.webcontainer.webapp.WebApp.initialize(WebApp.java:1037)<br>\n    at com.ibm.ws.webcontainer.webapp.WebApp.initialize(WebApp.java:6663)<br>\n    at com.ibm.ws.webcontainer.osgi.DynamicVirtualHost.startWebApp(DynamicVirtualHost.java:467)<br>\n    at com.ibm.ws.webcontainer.osgi.DynamicVirtualHost.startWebApplication(DynamicVirtualHost.java:462)<br>\n    at com.ibm.ws.webcontainer.osgi.WebContainer.startWebApplication(WebContainer.java:1175)<br>\n    at com.ibm.ws.webcontainer.osgi.WebContainer.startModule(WebContainer.java:967)<br>\n    at com.ibm.ws.app.manager.module.internal.ModuleHandlerBase.deployModule(ModuleHandlerBase.java:99)<br>\n    at com.ibm.ws.app.manager.module.internal.DeployedModuleInfoImpl.installModule(DeployedModuleInfoImpl.java:49)<br>\n    at com.ibm.ws.app.manager.module.internal.SimpleDeployedAppInfoBase.deployModules(SimpleDeployedAppInfoBase.java:597)<br>\n    at com.ibm.ws.app.manager.module.internal.SimpleDeployedAppInfoBase.installApp(SimpleDeployedAppInfoBase.java:511)<br>\n    at com.ibm.ws.app.manager.module.internal.DeployedAppInfoBase.deployApp(DeployedAppInfoBase.java:347)<br>\n    at com.ibm.ws.app.manager.war.internal.WARApplicationHandlerImpl.install(WARApplicationHandlerImpl.java:65)<br>\n    at com.ibm.ws.app.manager.internal.statemachine.StartAction.execute(StartAction.java:144)<br>\n    at com.ibm.ws.app.manager.internal.statemachine.ApplicationStateMachineImpl.enterState(ApplicationStateMachineImpl.java:1315)<br>\n    at com.ibm.ws.app.manager.internal.statemachine.ApplicationStateMachineImpl.run(ApplicationStateMachineImpl.java:897)<br>\n    at com.ibm.ws.threading.internal.ExecutorServiceImpl$RunnableWrapper.run(ExecutorServiceImpl.java:239)<br>\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)<br>\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)<br>\n    at java.lang.Thread.run(Thread.java:748)<br>\nCaused by: java.sql.SQLNonTransientConnectionException: No current connection.<br>\n    at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)<br>\n    at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)<br>\n    at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source)<br>\n    at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source)<br>\n    at org.apache.derby.impl.jdbc.Util.noCurrentConnection(Unknown Source)<br>\n    at org.apache.derby.impl.jdbc.EmbedConnection.checkIfClosed(Unknown Source)<br>\n    at org.apache.derby.impl.jdbc.EmbedConnection.createStatement(Unknown Source)<br>\n    at org.apache.derby.impl.jdbc.EmbedConnection.createStatement(Unknown Source)<br>\n    at org.apache.derby.iapi.jdbc.BrokeredConnection.createStatement(Unknown Source)<br>\n    at com.ibm.ws.rsadapter.jdbc.WSJdbcConnection.createStatement(WSJdbcConnection.java:1075)<br>\n    at com.ibm.ws.rsadapter.jdbc.WSJdbcConnection.createStatement(WSJdbcConnection.java:1058)<br>\n    at com.ibm.fhir.database.utils.common.JdbcTarget.runStatement(JdbcTarget.java:37)</p>",
        "id": 206300164,
        "sender_full_name": "Purush Das",
        "timestamp": 1596828659
    },
    {
        "content": "<p>thanks for the report purush, did you do anything with the config or is this just running the official container image (single-node embedded derby is the default)?</p>",
        "id": 206300403,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1596828779
    },
    {
        "content": "<p>Yes. using default.</p>",
        "id": 206300531,
        "sender_full_name": "Purush Das",
        "timestamp": 1596828865
    },
    {
        "content": "<p>We've seen issues like this in our build pipeline when there is a disk performance issue.  Is this on a local machine in this case?</p>",
        "id": 206300616,
        "sender_full_name": "Paul Bastide",
        "timestamp": 1596828948
    },
    {
        "content": "<p>ubuntu-16-04-lts</p>",
        "id": 206300711,
        "sender_full_name": "Purush Das",
        "timestamp": 1596828997
    },
    {
        "content": "<p>btw - Not a workstation. Installed on ubuntu 16-04-lts server</p>",
        "id": 206301034,
        "sender_full_name": "Purush Das",
        "timestamp": 1596829208
    },
    {
        "content": "<p>using the installer or using the docker image?</p>",
        "id": 206301076,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1596829247
    },
    {
        "content": "<p>assuming the installer, can you grab the <code>messages.log</code> for us from<br>\n<code>[yourinstalldir]/wlp/usr/servers/fhir-server/logs</code>?</p>",
        "id": 206301167,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1596829316
    },
    {
        "content": "<p>mostly, we'll be interested in the timings on the derby bootstrapping</p>",
        "id": 206301248,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1596829358
    },
    {
        "content": "<p>a healthy startup would look something like this:</p>\n<div class=\"codehilite\"><pre><span></span><code>[8/7/20 19:39:23:758 UTC] 00000030 com.ibm.fhir.persistence.jdbc.util.DerbyBootstrapper         I Performing derby db bootstrapping for tenant-id &#39;default&#39;, datastore-id &#39;default&#39;.\n[8/7/20 19:39:24:983 UTC] 00000030 com.ibm.ws.rsadapter.impl.DatabaseHelper                     I DSRA8203I: Database product name : Apache Derby\n[8/7/20 19:39:24:985 UTC] 00000030 com.ibm.ws.rsadapter.impl.DatabaseHelper                     I DSRA8204I: Database product version : 10.14.2.0 - (1828579)\n[8/7/20 19:39:24:986 UTC] 00000030 com.ibm.ws.rsadapter.impl.DatabaseHelper                     I DSRA8205I: JDBC driver name  : Apache Derby Embedded JDBC Driver\n[8/7/20 19:39:24:986 UTC] 00000030 com.ibm.ws.rsadapter.impl.DatabaseHelper                     I DSRA8206I: JDBC driver version  : 10.14.2.0 - (1828579)\n[8/7/20 19:39:25:168 UTC] 00000030 com.ibm.fhir.database.utils.derby.DerbyServerPropertiesMgr   I Database Property [derby.language.sequence.preallocator] desired value [10000] and is currently [null]\n[8/7/20 19:39:25:183 UTC] 00000030 com.ibm.fhir.database.utils.derby.DerbyServerPropertiesMgr   I Database Property [derby.language.sequence.preallocator] desired value [10000] and is now [10000]\n[8/7/20 19:39:25:466 UTC] 00000030 com.ibm.fhir.database.utils.model.DatabaseObject             I Applying change [v1]: TABLESPACE:FHIR_TS:1\n[8/7/20 19:39:25:632 UTC] 00000030 com.ibm.fhir.database.utils.derby.DerbyAdapter               W [ONCE] Derby does not support CREATE VARIABLE for: SV_TENANT_ID\n[8/7/20 19:39:25:635 UTC] 00000030 com.ibm.fhir.database.utils.derby.DerbyAdapter               W [ONCE] Create procedure not supported in Derby\n[8/7/20 19:39:25:653 UTC] 00000030 com.ibm.fhir.database.utils.derby.DerbyAdapter               I Recreating sequence &#39;APP.FHIR_REF_SEQUENCE&#39; START WITH 20000\n[8/7/20 19:39:25:660 UTC] 00000030 com.ibm.fhir.database.utils.derby.DerbyAdapter               W [ONCE] Derby does not support multi-tenancy on: [PARAMETER_NAMES]\n[8/7/20 19:39:25:686 UTC] 00000030 com.ibm.fhir.database.utils.derby.DerbyAdapter               W [ONCE] Derby does not support CREATE PERMISSION for: PARAMETER_NAMES_TENANT\n[8/7/20 19:39:25:687 UTC] 00000030 com.ibm.fhir.database.utils.derby.DerbyAdapter               W [ONCE] Derby does not support ROW ACCESS CONTROL for table: PARAMETER_NAMES\n[8/7/20 19:39:26:148 UTC] 00000030 com.ibm.fhir.database.utils.derby.DerbyAdapter               W [ONCE] Not supported in Derby: ALTER TABLE APP.APPOINTMENT_STR_VALUES ALTER COLUMN ROW_ID SET CACHE 1000\n</code></pre></div>",
        "id": 206301427,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1596829471
    },
    {
        "content": "<p>it's installer. Here's the message.log file. <a href=\"/user_uploads/10155/19l-RTqv7HZPaJt2SNF-Da9X/messages.log\">messages.log</a></p>",
        "id": 206302047,
        "sender_full_name": "Purush Das",
        "timestamp": 1596829876
    },
    {
        "content": "<p>thanks purush, we'll have a look.  did you happen to try multiple times or just this once?</p>",
        "id": 206303663,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1596830814
    },
    {
        "content": "<p>if you want, you could retry and let us know if it happens again</p>",
        "id": 206303694,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1596830835
    },
    {
        "content": "<p>I tried stopping and starting couple of times.<br>\nThanks</p>",
        "id": 206303735,
        "sender_full_name": "Purush Das",
        "timestamp": 1596830868
    },
    {
        "content": "<p>one of our ideas is to move this derby bootstrapping out of server startup...its there as a convenience so you can just \"docker run\" without worrying about it, but it looks like maybe the bootstrapping is taking longer on your system than ours and leading to a transaction timeout. (just based on first error in the logs)</p>",
        "id": 206304054,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1596831040
    },
    {
        "content": "<p>if you're willing/able to help us debug it further, I can ask you to bump that transaction timeout in your config and see if it helps</p>",
        "id": 206304080,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1596831064
    },
    {
        "content": "<p>we'd also be curious what kind of the specs for your server.  we recommend having 4GB of RAM available to run the FHIR Server (though you can get it smaller if you know how)</p>",
        "id": 206306409,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1596832656
    },
    {
        "content": "<p>I can try  docker. Could you please provide docker image download link?</p>",
        "id": 206306736,
        "sender_full_name": "Purush Das",
        "timestamp": 1596832841
    },
    {
        "content": "<p><code>docker run -p 9443:9443 ibmcom/ibm-fhir-server:4.3.3</code></p>",
        "id": 206306823,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1596832901
    },
    {
        "content": "<p>see <a href=\"https://hub.docker.com/r/ibmcom/ibm-fhir-server\">https://hub.docker.com/r/ibmcom/ibm-fhir-server</a> for details</p>",
        "id": 206306849,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1596832921
    },
    {
        "content": "<p>Hi Lee,</p>\n<p>I tried docker and throwing similar error: Encountered an exception while bootstrapping the FHIR database</p>\n<p>[ERROR   ] DSRA0304E:  XAException occurred. XAException contents and details are: .<br>\n[ERROR   ] DSRA0302E:  XAException occurred.  Error code is: XA_RBROLLBACK (100).  Exception is: null<br>\n[ERROR   ] Encountered an exception while bootstrapping the FHIR database<br>\njava.sql.SQLNonTransientConnectionException: No current connection.<br>\n[ERROR   ] transaction rollback failed<br>\nNo Global Transaction exists to commit.<br>\n[ERROR   ] Encountered an exception while initializing the servlet context.<br>\njavax.transaction.RollbackException<br>\n[ERROR   ] SRVE0283E: Exception caught while initializing context: java.lang.RuntimeException: Encountered an exception while initializing the servlet context.<br>\n    at com.ibm.fhir.server.listener.FHIRServletContextListener.contextInitialized(FHIRServletContextListener.java:195)<br>\n    at com.ibm.ws.webcontainer.webapp.WebApp.notifyServletContextCreated(WebApp.java:2433)<br>\n    at [internal classes]<br>\nCaused by: javax.transaction.RollbackException<br>\n    at com.ibm.tx.jta.impl.TransactionImpl.stage3CommitProcessing(TransactionImpl.java:978)<br>\n    at [internal classes]<br>\n    at com.ibm.fhir.server.listener.FHIRServletContextListener.bootstrapFhirDb(FHIRServletContextListener.java:286)<br>\n    at com.ibm.fhir.server.listener.FHIRServletContextListener.bootstrapDerbyDatabases(FHIRServletContextListener.java:216)<br>\n    at com.ibm.fhir.server.listener.FHIRServletContextListener.contextInitialized(FHIRServletContextListener.java:177)<br>\n    ... 2 more</p>\n<p>[AUDIT   ] CWWKZ0001I: Application fhir-server-webapp started in 150.635 seconds.<br>\n[ERROR   ] The FHIR Server web application cannot process requests because it did not initialize correctly<br>\nThe FHIR Server web application cannot process requests because it did not initialize correctly</p>",
        "id": 206309550,
        "sender_full_name": "Purush Das",
        "timestamp": 1596834410
    },
    {
        "content": "<p>was it on the same system?</p>",
        "id": 206309617,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1596834463
    },
    {
        "content": "<p>if so, i'd expect similar results</p>",
        "id": 206309626,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1596834472
    },
    {
        "content": "<p>your options are:</p>\n<ol>\n<li>create the db before starting the server (we can give you steps); or</li>\n<li>increase the transaction timeout to see if it helps</li>\n</ol>",
        "id": 206309921,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1596834623
    },
    {
        "content": "<p>either way, if you could send output for <code>lscpu</code> and <code>grep MemTotal /proc/meminfo</code> and <code>free -g</code> that would be helpful so we can see what your system is working with (we're think maybe it is resource starved or something)</p>",
        "id": 206310038,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1596834695
    },
    {
        "content": "<p>Yes. Same server(8 cores/16GB)..Could you provide steps to increase transaction timeout?</p>",
        "id": 206310277,
        "sender_full_name": "Purush Das",
        "timestamp": 1596834825
    },
    {
        "content": "<p>either:<br>\nA. finding server.xml and adding this line in there:<br>\n<code>&lt;transaction totalTranLifetimeTimeout=\"480s\" /&gt;</code><br>\nOR (for docker)<br>\nB. following the steps at <a href=\"https://hub.docker.com/r/ibmcom/ibm-fhir-server\">https://hub.docker.com/r/ibmcom/ibm-fhir-server</a> to specify a server.xml override</p>\n<div class=\"codehilite\"><pre><span></span><code>&lt;server&gt;\n    &lt;logging traceSpecification=&quot;com.ibm.fhir.*=fine&quot; traceFileName=&quot;stdout&quot; /&gt;\n    &lt;transaction totalTranLifetimeTimeout=&quot;480s&quot; /&gt;\n&lt;/server&gt;\n</code></pre></div>",
        "id": 206310374,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1596834856
    },
    {
        "content": "<p>by default, the transaction timeout is 120s</p>",
        "id": 206310541,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1596834962
    },
    {
        "content": "<p>Increased timeout to 480s. Still same issues. </p>\n<p>Here's the output of free memory and CPU</p>\n<p>grep MemTotal /proc/meminfo<br>\nMemTotal:       16431692 kB</p>\n<p>free -g<br>\nMem:             15           4           0           0          11          10<br>\nSwap:             0           0           0</p>\n<p>lscpu:<br>\nroot@ubuntu16:/opt/ibm/fhir-server/wlp/usr/servers/fhir-server/logs# lscpu<br>\nArchitecture:          x86_64<br>\nCPU op-mode(s):        32-bit, 64-bit<br>\nByte Order:            Little Endian<br>\nCPU(s):                8<br>\nOn-line CPU(s) list:   0-7<br>\nThread(s) per core:    1<br>\nCore(s) per socket:    1<br>\nSocket(s):             8<br>\nNUMA node(s):          1<br>\nVendor ID:             GenuineIntel<br>\nCPU family:            6<br>\nModel:                 26<br>\nModel name:            Intel(R) Xeon(R) CPU           E5504  @ 2.00GHz<br>\nStepping:              5<br>\nCPU MHz:               1995.000<br>\nBogoMIPS:              3990.00<br>\nHypervisor vendor:     VMware</p>",
        "id": 206312235,
        "sender_full_name": "Purush Das",
        "timestamp": 1596836103
    },
    {
        "content": "<p>ok, one last ask:  please add the logging line i place above (in option B).  that will log a lot of debug stuff to the console</p>",
        "id": 206312383,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1596836211
    },
    {
        "content": "<p>then, either attach that output here or open an issue at <a href=\"https://github.com/ibm/fhir/issues\">https://github.com/ibm/fhir/issues</a> and drop in there</p>",
        "id": 206312411,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1596836235
    },
    {
        "content": "<p>if you can do that, we'll get to the bottom of this</p>",
        "id": 206312421,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1596836242
    },
    {
        "content": "<p>thanks purush and have a good weekend</p>",
        "id": 206312442,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1596836258
    },
    {
        "content": "<p>I did restart fhir-server  after making timeout changes. Just now rebooted the server and started fhir-server.  healthcheck is working. Probably,  timeout changes did the trick.  I will monitor and let you know if i face this issue again.<br>\nThanks for all your help! <br>\nHave a nice weekend!</p>",
        "id": 206312833,
        "sender_full_name": "Purush Das",
        "timestamp": 1596836612
    },
    {
        "content": "<p>when i tried to post a bundle of length: 20k+ resources I am getting below error. But i can post those resources successfully  in small chunks like 1000 resources in a bundle at a time.</p>\n<p>[12/8/20 4:24:08:540 UTC] 0000005a com.ibm.fhir.server.resources.FHIRResource                   E Commit global transaction failed. See server log for details<br>\ncom.ibm.fhir.persistence.jdbc.exception.FHIRPersistenceDataAccessException: Commit global transaction failed. See server log for details  [probeId=a-2c-0-1-3ea7a13d-c204-4abd-b597-e9b3568cf226]<br>\n    at com.ibm.fhir.persistence.jdbc.connection.FHIRUserTransactionAdapter.end(FHIRUserTransactionAdapter.java:119)<br>\n    at com.ibm.fhir.persistence.helper.FHIRTransactionHelper.commit(FHIRTransactionHelper.java:43)<br>\n    at com.ibm.fhir.server.util.FHIRRestHelper.processBundleEntries(FHIRRestHelper.java:1520)<br>\n    at com.ibm.fhir.server.util.FHIRRestHelper.doBundle(FHIRRestHelper.java:1078)<br>\n    at com.ibm.fhir.server.resources.Batch.bundle(Batch.java:77)<br>\n    at com.ibm.fhir.server.resources.Batch$Proxy$_$$_WeldClientProxy.bundle(Unknown Source)<br>\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br>\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)<br>\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)<br>\n    at java.lang.reflect.Method.invoke(Method.java:498)<br>\n    at com.ibm.ws.jaxrs20.cdi.component.JaxRsFactoryImplicitBeanCDICustomizer.serviceInvoke(JaxRsFactoryImplicitBeanCDICustomizer.java:339)<br>\n    at com.ibm.ws.jaxrs20.server.LibertyJaxRsServerFactoryBean.performInvocation(LibertyJaxRsServerFactoryBean.java:641)<br>\n    at com.ibm.ws.jaxrs20.server.LibertyJaxRsInvoker.performInvocation(LibertyJaxRsInvoker.java:160)<br>\n    at org.apache.cxf.service.invoker.AbstractInvoker.invoke(AbstractInvoker.java:96)<br>\n    at com.ibm.ws.jaxrs20.server.LibertyJaxRsInvoker.invoke(LibertyJaxRsInvoker.java:273)<br>\n    at org.apache.cxf.jaxrs.JAXRSInvoker.invoke(JAXRSInvoker.java:210)<br>\n    at com.ibm.ws.jaxrs20.server.LibertyJaxRsInvoker.invoke(LibertyJaxRsInvoker.java:444)<br>\n    at org.apache.cxf.jaxrs.JAXRSInvoker.invoke(JAXRSInvoker.java:112)<br>\n    at org.apache.cxf.interceptor.ServiceInvokerInterceptor$1.run(ServiceInvokerInterceptor.java:61)<br>\n    at org.apache.cxf.interceptor.ServiceInvokerInterceptor.handleMessage(ServiceInvokerInterceptor.java:99)<br>\n    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:318)<br>\n    at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:123)<br>\n    at org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:273)<br>\n    at com.ibm.ws.jaxrs20.endpoint.AbstractJaxRsWebEndpoint.invoke(AbstractJaxRsWebEndpoint.java:136)<br>\n    at com.ibm.websphere.jaxrs.server.IBMRestServlet.handleRequest(IBMRestServlet.java:146)<br>\n    at com.ibm.websphere.jaxrs.server.IBMRestServlet.doPost(IBMRestServlet.java:104)<br>\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:706)<br>\n    at com.ibm.websphere.jaxrs.server.IBMRestServlet.service(IBMRestServlet.java:96)<br>\n    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1230)<br>\n    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:729)<br>\n    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:426)<br>\n    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.invokeTarget(WebAppFilterChain.java:182)<br>\n    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:93)<br>\n    at com.ibm.fhir.server.filter.rest.FHIRRestServletFilter.doFilter(FHIRRestServletFilter.java:139)<br>\n    at javax.servlet.http.HttpFilter.doFilter(HttpFilter.java:127)<br>\n    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:201)<br>\n    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:90)<br>\n    at com.ibm.fhir.server.filter.rest.FHIRRestAuthorizationServletFilter.doFilter(FHIRRestAuthorizationServletFilter.java:86)<br>\n    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:201)<br>\n    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:90)<br>\n    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:1001)<br>\n    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1139)<br>\n    at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:5037)<br>\n    at com.ibm.ws.webcontainer.osgi.DynamicVirtualHost$2.handleRequest(DynamicVirtualHost.java:314)<br>\n    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:1005)<br>\n    at com.ibm.ws.webcontainer.osgi.DynamicVirtualHost$2.run(DynamicVirtualHost.java:279)<br>\n    at com.ibm.ws.http.dispatcher.internal.channel.HttpDispatcherLink$TaskWrapper.run(HttpDispatcherLink.java:1134)<br>\n    at com.ibm.ws.http.dispatcher.internal.channel.HttpDispatcherLink.wrapHandlerAndExecute(HttpDispatcherLink.java:415)<br>\n    at com.ibm.ws.http.dispatcher.internal.channel.HttpDispatcherLink.ready(HttpDispatcherLink.java:374)<br>\n    at com.ibm.ws.http.channel.internal.inbound.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:577)<br>\n    at com.ibm.ws.http.channel.internal.inbound.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511)<br>\n    at com.ibm.ws.http.channel.internal.inbound.HttpInboundLink.processRequest(HttpInboundLink.java:359)<br>\n    at com.ibm.ws.http.channel.internal.inbound.HttpInboundLink.ready(HttpInboundLink.java:326)<br>\n    at com.ibm.ws.channel.ssl.internal.SSLConnectionLink.determineNextChannel(SSLConnectionLink.java:1100)<br>\n    at com.ibm.ws.channel.ssl.internal.SSLConnectionLink.readyInboundPostHandshake(SSLConnectionLink.java:757)<br>\n    at com.ibm.ws.channel.ssl.internal.SSLConnectionLink$MyHandshakeCompletedCallback.complete(SSLConnectionLink.java:427)<br>\n    at com.ibm.ws.channel.ssl.internal.SSLUtils.handleHandshake(SSLUtils.java:953)<br>\n    at com.ibm.ws.channel.ssl.internal.SSLHandshakeIOCallback.complete(SSLHandshakeIOCallback.java:85)<br>\n    at com.ibm.ws.tcpchannel.internal.WorkQueueManager.requestComplete(WorkQueueManager.java:504)<br>\n    at com.ibm.ws.tcpchannel.internal.WorkQueueManager.attemptIO(WorkQueueManager.java:574)<br>\n    at com.ibm.ws.tcpchannel.internal.WorkQueueManager.workerRun(WorkQueueManager.java:958)<br>\n    at com.ibm.ws.tcpchannel.internal.WorkQueueManager$Worker.run(WorkQueueManager.java:1047)<br>\n    at com.ibm.ws.threading.internal.ExecutorServiceImpl$RunnableWrapper.run(ExecutorServiceImpl.java:239)<br>\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)<br>\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)<br>\n    at java.lang.Thread.run(Thread.java:823)</p>\n<p>0000005a com.ibm.fhir.server.filter.rest.FHIRRestServletFilter        I Completed request[43.361 secs]: tenantId:[<strong><strong><em>] dsId:[default] user:[fhiruser] method:[POST] uri:[</em></strong></strong><strong>*</strong><strong>*</strong><strong>*</strong><strong>*</strong><strong>*</strong><strong>*</strong>*] status:[500]</p>\n<p>I tried:<br>\n1.Copied transaction-manager-long.xml from the WLP configDropins from /disabled to /overrides folder<br>\n2.adding <em>&lt;transaction totalTranLifeTimeout=\"480s\"&gt;</em> in server.xml</p>",
        "id": 219170427,
        "sender_full_name": "Digamber Kalivemula",
        "timestamp": 1607401741
    },
    {
        "content": "<p>20k+ resources in a single transaction bundle is not advisable.  for ingesting large amounts of resources, we'd recommend looking into the bulk import support:  <a href=\"https://ibm.github.io/FHIR/guides/FHIRBulkOperations/#import-operation-dollarimport\">https://ibm.github.io/FHIR/guides/FHIRBulkOperations/#import-operation-dollarimport</a></p>",
        "id": 219391714,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1607545022
    },
    {
        "content": "<p>alternatively, you can look into our <code>fhir-bucket</code> project which has some utilities for splitting a large transaction bundle into many smaller ones (though very limited documentation at the moment)</p>",
        "id": 219391789,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1607545075
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191676\">@Lee Surprenant</span> Does this approaches support referencing?</p>",
        "id": 219430979,
        "sender_full_name": "Digamber Kalivemula",
        "timestamp": 1607574413
    },
    {
        "content": "<p>We are creating a bundle which will have resources referencing to each-other.We are using server created ID's for resources.Does this type of referencing work while using fhir-bucket to post data?</p>",
        "id": 219463333,
        "sender_full_name": "Digamber Kalivemula",
        "timestamp": 1607602036
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"253392\">@Digamber Kalivemula</span> please only post in a single thread.  can you please delete the duplicate post in #Literal-References ?</p>",
        "id": 219492836,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1607616201
    }
]