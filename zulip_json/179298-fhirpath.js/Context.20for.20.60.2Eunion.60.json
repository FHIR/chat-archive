[
    {
        "content": "<p>Is it expected that</p>\n<div class=\"codehilite\"><pre><span></span><code>name.select(use | given)\n</code></pre></div>\n\n<p>should return different results from</p>\n<div class=\"codehilite\"><pre><span></span><code>name.select(use.union(given))\n</code></pre></div>\n\n<p>? I would have expected these to be equivalent but <code>union</code> appears to be operating at the root level even when it occurs inside a <code>select</code>.</p>",
        "id": 275991830,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1647816451
    },
    {
        "content": "<p>Ah, <a href=\"https://hl7.org/fhirpath/#unionother-collection\">https://hl7.org/fhirpath/#unionother-collection</a> explicitly states that these should be equivalent, so it looks like a bug in fhirpath.js unless I'm missing something.</p>",
        "id": 275991949,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1647816614
    },
    {
        "content": "<p>It is not clear us whether the documentation means \"a\" and \"b\" are elements of the same node.  For some functions, in a.someFunction(b), \"b\" is interpreted as being a child of the elements in \"a\", and I think that is how fhirpath.js is handling union.</p>",
        "id": 276089278,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1647884918
    },
    {
        "content": "<p>Note that in <a href=\"https://hl7.org/fhirpath/#function-invocations\">https://hl7.org/fhirpath/#function-invocations</a>, the full path is used.<br>\n<code>Patient.telecom.where(use = 'official').union(Patient.contact.telecom.where(use = 'official')).exists().not()</code><br>\n(Though, that has \"contact\" in the path, so it not quite a counter-example.)</p>",
        "id": 276089365,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1647884967
    },
    {
        "content": "<p>Maybe this should be discussed on the fhirpath stream?</p>",
        "id": 276089387,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1647884983
    }
]