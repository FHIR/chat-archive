[
    {
        "content": "<p>Hi, I'm new to Zulip and the chat server.  I'm trying to incorporate fhirpath.js into my code and am having trouble filtering resources by type.  I'd appreciate a little guidance.  I've tried <code>Bundle.entry.resource.ofType(Observation)</code> and <code>Bundle.entry.select(resource as Observation)</code>.  The former returns empty collection and the latter returns error <code>Error: No TypeExpression evaluator</code></p>",
        "id": 200476940,
        "sender_full_name": "Tim Harsch",
        "timestamp": 1591823323
    },
    {
        "content": "<p>Seems this also returns empty array:  <code>Bundle.entry.where(resourceType = Observation)</code>.    If these are unexpected results I could post my test file and JSON document to a gist, if it helps.</p>",
        "id": 200478297,
        "sender_full_name": "Tim Harsch",
        "timestamp": 1591823932
    },
    {
        "content": "<p>ofType in fhirpath.js never got past types \"integer\" and \"decimal\", but I think the code to fully support it is nearly there.  Please file raise an issue on the <a href=\"https://github.com/HL7/fhirpath.js/issues\">GitHub repository</a>-- better to make separate requests for ofType and \"as\".  One might be easier to complete than the other.</p>",
        "id": 200478367,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1591823983
    },
    {
        "content": "<p>Bundle.entry.where(resourceType = 'Observation')  should work.  (You were missing the quotes for the string.)</p>",
        "id": 200478759,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1591824203
    },
    {
        "content": "<p>will do.  thanks</p>",
        "id": 200480873,
        "sender_full_name": "Tim Harsch",
        "timestamp": 1591825372
    },
    {
        "content": "<p>quoting Observation did not change the result.   If you think that is an error perhaps then I'm willing to open a third github issue for it.  Would you like to see my FHIR json document first?</p>",
        "id": 200481392,
        "sender_full_name": "Tim Harsch",
        "timestamp": 1591825655
    },
    {
        "content": "<p>Yes, please.  My test of that form worked.</p>",
        "id": 200481489,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1591825707
    },
    {
        "content": "<p>Also, is there a way to validate the syntax itself?  something I can use a pre-check that would have told me about the missing quotes?  In my hurried reading of the spec I thought I saw something to the effect that quotes were optional but I'm not sure</p>",
        "id": 200481529,
        "sender_full_name": "Tim Harsch",
        "timestamp": 1591825739
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"195344\">Paul Lynch</span> <a href=\"#narrow/stream/179298-fhirpath.2Ejs/topic/Querying.20for.20resources.20of.20a.20specified.20type/near/200481489\">said</a>:</p>\n<blockquote>\n<p>Yes, please.  My test of that form worked.</p>\n</blockquote>\n<p><a href=\"https://gist.github.com/timharsch/80ebf952d4c784bbfa5542d9ca518b2d\">https://gist.github.com/timharsch/80ebf952d4c784bbfa5542d9ca518b2d</a></p>",
        "id": 200481923,
        "sender_full_name": "Tim Harsch",
        "timestamp": 1591825940
    },
    {
        "content": "<p>Without the quotes, it is checking field resourceType against field \"Observation\" (which doesn't exist).  So, I am not sure how this problem would have been caught.  Also, note that \"resourceType\" is an artifact of the JSON encoding, and does not really exist in the FHIR resource.  So, while it will work in fhirpath.js, it is kind of a hack.  But, it might be your only option until ofType is implemented.</p>",
        "id": 200482050,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1591826012
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310838\">Tim Harsch</span> <a href=\"#narrow/stream/179298-fhirpath.2Ejs/topic/Querying.20for.20resources.20of.20a.20specified.20type/near/200481923\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"195344\">Paul Lynch</span> <a href=\"#narrow/stream/179298-fhirpath.2Ejs/topic/Querying.20for.20resources.20of.20a.20specified.20type/near/200481489\">said</a>:</p>\n<blockquote>\n<p>Yes, please.  My test of that form worked.</p>\n</blockquote>\n<p><a href=\"https://gist.github.com/timharsch/80ebf952d4c784bbfa5542d9ca518b2d\">https://gist.github.com/timharsch/80ebf952d4c784bbfa5542d9ca518b2d</a></p>\n</blockquote>\n<p>Bundle.entry.resource.where(resourceType = 'Observation')<br>\n(.resource was missing)</p>",
        "id": 200482498,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1591826225
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"195344\">Paul Lynch</span> <a href=\"#narrow/stream/179298-fhirpath.2Ejs/topic/Querying.20for.20resources.20of.20a.20specified.20type/near/200481489\">said</a>:</p>\n<blockquote>\n<p>Yes, please.  My test of that form worked.</p>\n</blockquote>\n<p><a href=\"https://github.com/HL7/fhirpath.js/issues/50\">https://github.com/HL7/fhirpath.js/issues/50</a></p>",
        "id": 200482718,
        "sender_full_name": "Tim Harsch",
        "timestamp": 1591826340
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"195344\">Paul Lynch</span> <a href=\"#narrow/stream/179298-fhirpath.2Ejs/topic/Querying.20for.20resources.20of.20a.20specified.20type/near/200478367\">said</a>:</p>\n<blockquote>\n<p>better to make separate requests for ofType and \"as\".  One might be easier to complete than the other.</p>\n</blockquote>\n<p><a href=\"https://github.com/HL7/fhirpath.js/issues/51\">https://github.com/HL7/fhirpath.js/issues/51</a></p>",
        "id": 200483410,
        "sender_full_name": "Tim Harsch",
        "timestamp": 1591826739
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"195344\">@Paul Lynch</span>  let me know what you think about <code>Bundle.entry.where(resourceType = 'Observation') </code> (with the quotes) against my document.  If you want me to file an issue on GitHub for it, I'd be happy too.</p>",
        "id": 200483733,
        "sender_full_name": "Tim Harsch",
        "timestamp": 1591826905
    },
    {
        "content": "<p>See above.</p>",
        "id": 200483762,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1591826929
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"310838\">@Tim Harsch</span> <a href=\"#narrow/stream/179298-fhirpath.2Ejs/topic/Querying.20for.20resources.20of.20a.20specified.20type/near/200482498\">https://chat.fhir.org/#narrow/stream/179298-fhirpath.2Ejs/topic/Querying.20for.20resources.20of.20a.20specified.20type/near/200482498</a></p>",
        "id": 200483809,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1591826958
    },
    {
        "content": "<p>That link was not very specific.  I'll repeat what I said above:  <br>\nBundle.entry.resource.where(resourceType = 'Observation')<br>\n(.resource was missing)</p>",
        "id": 200483948,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1591827011
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"195344\">Paul Lynch</span> <a href=\"#narrow/stream/179298-fhirpath.2Ejs/topic/Querying.20for.20resources.20of.20a.20specified.20type/near/200483948\">said</a>:</p>\n<blockquote>\n<p>That link was not very specific.  I'll repeat what I said above:  <br>\nBundle.entry.resource.where(resourceType = 'Observation')<br>\n(.resource was missing)</p>\n</blockquote>\n<p>That worked for me.   I got back 10 observations from my document..  Thank you!</p>",
        "id": 200484546,
        "sender_full_name": "Tim Harsch",
        "timestamp": 1591827370
    }
]