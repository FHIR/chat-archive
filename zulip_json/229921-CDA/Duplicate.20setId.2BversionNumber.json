[
    {
        "content": "<p>I am a developer of Health Information Systems. Recently I encountered several HL7 CDA referrals which had the same setId and versionNumber. I was always convinced that it's incorrect situation.</p>\n<p>May I ask for your advice? Is it correct if two HL7 CDA documents exist with identifiers  like these below? They are not real life examples, I changed them because of privacy of medical records, however they are a good example of the problem.</p>\n<p>In short: I have found CDA documents with identical setId+versionNumber pair of identifiers.</p>\n<p>First document:<br>\n&lt;id displayable=\"false\" extension=\"ABC123\" <br>\nroot=\"2.16.840.1.113883.3.4424.2.7.0.4.1\"/&gt;<br>\n&lt;setId extension=\"1234\" root=\"2.16.840.1.113883.3.4424.2.7.0.4.2\"/&gt;<br>\n&lt;versionNumber value=\"1\"/&gt;</p>\n<p>Second document:<br>\n&lt;id displayable=\"false\" extension=\"XYZ987\" <br>\nroot=\"2.16.840.1.113883.3.4424.2.7.0.4.1\"/&gt;<br>\n&lt;setId extension=\"1234\" root=\"2.16.840.1.113883.3.4424.2.7.0.4.2\"/&gt;<br>\n&lt;versionNumber value=\"1\"/&gt;</p>\n<p>Best Regards,<br>\nArtur</p>",
        "id": 226381156,
        "sender_full_name": "Artur Łysik",
        "timestamp": 1613394252
    },
    {
        "content": "<p>Version management in CDA assumes that all versions are known/available to the party that authors a new version in a set. But an authoring system may not have access to the latest version, or have persisted the latest VersionNumber. This can't always be avoided, even if systems were to act in good faith.</p>",
        "id": 226389334,
        "sender_full_name": "René Spronk",
        "timestamp": 1613398744
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191372\">René Spronk</span> <a href=\"#narrow/stream/229921-CDA/topic/Duplicate.20setId.2BversionNumber/near/226389334\">said</a>:</p>\n<blockquote>\n<p>Version management in CDA assumes that all versions are known/available to the party that authors a new version in a set. But an authoring system may not have access to the latest version, or have persisted the latest VersionNumber. This can't always be avoided, even if systems were to act in good faith.</p>\n</blockquote>\n<p>Good point. However, both documents come from the central system. Every e-referral issued in our country should be uploaded to this system.  So all  versions are known to this central system. Still it allows to duplicate setId+versionNumber. I think it should be validated during upload and duplicates should be rejected.<br>\nThank you for your response!<br>\nArtur</p>",
        "id": 226393907,
        "sender_full_name": "Artur Łysik",
        "timestamp": 1613401337
    }
]