[
    {
        "content": "<p>I have 3 component slices in my Observation resource. I want to add a constraint in my profile. This is my constraint name:</p>\n<p>If one of the component codes is present, all SHALL be present.</p>\n<p>I have created an expression in the following way:</p>\n<p><strong>( component.code.coding.where(system='urn:oid:2.16.840.1.113883.2.4.3.11.60.40.4.0').where(code='4.6.5').empty() and component.code.coding.where(system='urn:oid:2.16.840.1.113883.2.4.3.11.60.40.4.0').where(code='4.6.4').empty() and component.code.coding.where(system='urn:oid:2.16.840.1.113883.2.4.3.11.60.40.4.0').where(code='4.6.3').empty() ) or ( component.code.coding.where(system='urn:oid:2.16.840.1.113883.2.4.3.11.60.40.4.0').where(code='4.6.5').exists() and component.code.coding.where(system='urn:oid:2.16.840.1.113883.2.4.3.11.60.40.4.0').where(code='4.6.4').exists() and component.code.coding.where(system='urn:oid:2.16.840.1.113883.2.4.3.11.60.40.4.0').where(code='4.6.3').exists() )</strong></p>\n<p>This works for my use case, but is there a better way to create this expression?</p>",
        "id": 263980202,
        "sender_full_name": "Ashwin Djorai",
        "timestamp": 1638871819
    },
    {
        "content": "<p>I think you could do<br>\n<code>component.code.coding.where(system='...').where(code='4.6.5' or code='4.6.4' or code='4.6.3').empty() or component.code.coding.where(system='...').where(code='4.6.5' or code='4.6.4' or code='4.6.3').code().distinct().count()=3</code></p>",
        "id": 264007314,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1638886680
    },
    {
        "content": "<p>Thank you <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> I will test this and let know you the results</p>",
        "id": 264135390,
        "sender_full_name": "Ashwin Djorai",
        "timestamp": 1638958663
    }
]