[
    {
        "content": "<p>if i am using the newest validator with:  -ig  de.abda.eRezeptAbgabedaten#1.0.3 i'm getting these errors:</p>\n<div class=\"codehilite\"><pre><span></span><code>2021-11-11 13:48:31.981 [main] INFO  o.h.f.u.npm.BasePackageCacheManager [BasePackageCacheManager.java:80] Failed to resolve package de.abda.eRezeptAbgabedaten#1.0.3 from server: http://packages.fhir.org\n2021-11-11 13:48:32.872 [main] INFO  o.h.f.u.npm.BasePackageCacheManager [BasePackageCacheManager.java:80] Failed to resolve package de.abda.eRezeptAbgabedaten#1.0.3 from server: https://packages2.fhir.org/packages\n2021-11-11 13:48:33.117 [main] INFO  o.h.f.u.npm.BasePackageCacheManager [BasePackageCacheManager.java:80] Failed to resolve package de.abda.eRezeptAbgabedaten#1.0.3 from server: http://packages.fhir.org\n2021-11-11 13:48:33.524 [main] INFO  o.h.f.u.npm.BasePackageCacheManager [BasePackageCacheManager.java:80] Failed to resolve package de.abda.eRezeptAbgabedaten#1.0.3 from server: https://packages2.fhir.org/packages\n</code></pre></div>",
        "id": 261129077,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1636634996
    },
    {
        "content": "<p>according to the registry this package should be available: <a href=\"https://registry.fhir.org/package/de.abda.eRezeptAbgabedaten%7C1.0.3\">https://registry.fhir.org/package/de.abda.eRezeptAbgabedaten%7C1.0.3</a></p>",
        "id": 261129078,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1636634996
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 261455483,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1636949746
    },
    {
        "content": "<p>which is the newest one?</p>",
        "id": 261460141,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1636955713
    },
    {
        "content": "<p>check with 5.5.12 - there's reason to think it'll have fixed that</p>",
        "id": 261460179,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1636955746
    },
    {
        "content": "<p>I originally tried with 5.5.11, and re-tried with 5.5.12 - with no luck:</p>\n<div class=\"codehilite\"><pre><span></span><code>FHIR Validation tool Version 5.5.12 (Git# 86eb372965c8). Built 2021-11-13T22:03:24.233Z (36 hours old)\n  Java:   11.0.2 from /Library/Java/JavaVirtualMachines/openjdk-11.0.2.jdk/Contents/Home on x86_64 (64bit). 4096MB available\n  Paths:  Current = /Users/patrickwerner/Downloads, Package Cache = /Users/patrickwerner/.fhir/packages\n  Params: fehlerhaftes-erezept-anonymisiert.xml -ig de.abda.eRezeptAbgabedaten#1.0.3\nScanning for versions (no -version parameter):\n2021-11-15 11:27:55.265 [main] INFO  o.h.f.u.npm.BasePackageCacheManager [BasePackageCacheManager.java:80] Failed to resolve package de.abda.eRezeptAbgabedaten#1.0.3 from server: http://packages.fhir.org\n2021-11-15 11:27:56.178 [main] INFO  o.h.f.u.npm.BasePackageCacheManager [BasePackageCacheManager.java:80] Failed to resolve package de.abda.eRezeptAbgabedaten#1.0.3 from server: https://packages2.fhir.org/packages\n2021-11-15 11:27:56.411 [main] INFO  o.h.f.u.npm.BasePackageCacheManager [BasePackageCacheManager.java:80] Failed to resolve package de.abda.eRezeptAbgabedaten#1.0.3 from server: http://packages.fhir.org\n2021-11-15 11:27:56.794 [main] INFO  o.h.f.u.npm.BasePackageCacheManager [BasePackageCacheManager.java:80] Failed to resolve package de.abda.eRezeptAbgabedaten#1.0.3 from server: https://packages2.fhir.org/packages\nException in thread &quot;main&quot; org.hl7.fhir.exceptions.FHIRException: Unable to resolve package id de.abda.eRezeptAbgabedaten#1.0.3\n    at org.hl7.fhir.utilities.npm.FilesystemPackageCacheManager.fetchTheOldWay(FilesystemPackageCacheManager.java:704)\n    at org.hl7.fhir.utilities.npm.FilesystemPackageCacheManager.loadFromPackageServer(FilesystemPackageCacheManager.java:223)\n    at org.hl7.fhir.utilities.npm.FilesystemPackageCacheManager.loadPackage(FilesystemPackageCacheManager.java:507)\n    at org.hl7.fhir.validation.IgLoader.resolvePackageForVersion(IgLoader.java:584)\n    at org.hl7.fhir.validation.IgLoader.fetchVersionByPackage(IgLoader.java:507)\n    at org.hl7.fhir.validation.IgLoader.loadIgSourceForVersion(IgLoader.java:334)\n    at org.hl7.fhir.validation.IgLoader.scanForIgVersion(IgLoader.java:209)\n    at org.hl7.fhir.validation.cli.services.ValidationService.scanForVersions(ValidationService.java:92)\n    at org.hl7.fhir.validation.cli.services.ValidationService.determineVersion(ValidationService.java:322)\n    at org.hl7.fhir.validation.cli.services.ValidationService.determineVersion(ValidationService.java:314)\n    at org.hl7.fhir.validation.ValidatorCli.doValidation(ValidatorCli.java:232)\n    at org.hl7.fhir.validation.ValidatorCli.main(ValidatorCli.java:164)\n</code></pre></div>",
        "id": 261479964,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1636972142
    },
    {
        "content": "<p>`</p>",
        "id": 261479965,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1636972142
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 261767735,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1637145865
    },
    {
        "content": "<p>how did you invoke that?</p>",
        "id": 261768499,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1637146341
    },
    {
        "content": "<p><code>java -jar validator_cli.jar fehlerhaftes-erezept-anonymisiert.xml -ig de.abda.eRezeptAbgabedaten#1.0.3</code></p>",
        "id": 261768769,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1637146502
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 261768770,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1637146502
    },
    {
        "content": "<p>this works for me. I'm adding more logging for the next release</p>",
        "id": 261834535,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1637176988
    },
    {
        "content": "<p>just wanted to confirm. This was an issue in the fhir package cache.</p>",
        "id": 262177608,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1637406438
    },
    {
        "content": "<p>hmm ok. there shouldn't be issues in the package cache. Do you have any idea what went wrong?</p>",
        "id": 262234401,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1637491899
    },
    {
        "content": "<p>unfortunately not. Will keep you updated if i encounter this issue again.</p>",
        "id": 262299476,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1637575459
    },
    {
        "content": "<p>Hello - I am looking at implementing a FHIR data model  - are there any XSD or XML describing all the tables and attributes of the FHIR schema ?</p>",
        "id": 262332993,
        "sender_full_name": "Greg Zaoui",
        "timestamp": 1637594548
    },
    {
        "content": "<p><a href=\"http://hl7.org/fhir/xml.html#schema\">http://hl7.org/fhir/xml.html#schema</a></p>",
        "id": 262342430,
        "sender_full_name": "Oliver Egger",
        "timestamp": 1637598316
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> im facing this issue again:</p>\n<div class=\"codehilite\"><pre><span></span><code>java -jar validator_cli.jar fehlerhaftes-erezept-anonymisiert.xml -ig de.medizininformatikinitiative.kerndatensatz.fall#1.0.1 -ig de.medizinofmatikinitiative.kerndatensatz.person#1.0.14\nFHIR Validation tool Version 5.6.1 (Git# 9717d321b4b4). Built 2021-11-26T15:21:45.67Z (4 days old)\n  Java:   11.0.2 from /Library/Java/JavaVirtualMachines/openjdk-11.0.2.jdk/Contents/Home on x86_64 (64bit). 4096MB available\n  Paths:  Current = /Users/patrickwerner/Downloads, Package Cache = /Users/patrickwerner/.fhir/packages\n  Params: fehlerhaftes-erezept-anonymisiert.xml -ig de.medizininformatikinitiative.kerndatensatz.fall#1.0.1 -ig de.medizinofmatikinitiative.kerndatensatz.person#1.0.14\nScanning for versions (no -version parameter):\n2021-12-01 14:30:32.233 [main] INFO  o.h.f.u.npm.BasePackageCacheManager [BasePackageCacheManager.java:80] Failed to resolve package de.medizininformatikinitiative.kerndatensatz.fall#1.0.1 from server: http://packages.fhir.org (Server returned HTTP response code: 400 for URL: http://packages.fhir.org/de.medizininformatikinitiative.kerndatensatz.fall/1.0.1)\n2021-12-01 14:30:33.254 [main] INFO  o.h.f.u.npm.BasePackageCacheManager [BasePackageCacheManager.java:80] Failed to resolve package de.medizininformatikinitiative.kerndatensatz.fall#1.0.1 from server: https://packages2.fhir.org/packages (https://packages2.fhir.org/packages/de.medizininformatikinitiative.kerndatensatz.fall/1.0.1)\n2021-12-01 14:30:33.401 [main] INFO  o.h.f.u.npm.BasePackageCacheManager [BasePackageCacheManager.java:80] Failed to resolve package de.medizininformatikinitiative.kerndatensatz.fall#1.0.1 from server: http://packages.fhir.org (Server returned HTTP response code: 400 for URL: http://packages.fhir.org/de.medizininformatikinitiative.kerndatensatz.fall/1.0.1)\n2021-12-01 14:30:34.244 [main] INFO  o.h.f.u.npm.BasePackageCacheManager [BasePackageCacheManager.java:80] Failed to resolve package de.medizininformatikinitiative.kerndatensatz.fall#1.0.1 from server: https://packages2.fhir.org/packages (https://packages2.fhir.org/packages/de.medizininformatikinitiative.kerndatensatz.fall/1.0.1)\nException in thread &quot;main&quot; org.hl7.fhir.exceptions.FHIRException: Unable to resolve package id de.medizininformatikinitiative.kerndatensatz.fall#1.0.1\n    at org.hl7.fhir.utilities.npm.FilesystemPackageCacheManager.fetchTheOldWay(FilesystemPackageCacheManager.java:705)\n    at org.hl7.fhir.utilities.npm.FilesystemPackageCacheManager.loadFromPackageServer(FilesystemPackageCacheManager.java:223)\n    at org.hl7.fhir.utilities.npm.FilesystemPackageCacheManager.loadPackage(FilesystemPackageCacheManager.java:507)\n    at org.hl7.fhir.validation.IgLoader.resolvePackageForVersion(IgLoader.java:584)\n    at org.hl7.fhir.validation.IgLoader.fetchVersionByPackage(IgLoader.java:507)\n    at org.hl7.fhir.validation.IgLoader.loadIgSourceForVersion(IgLoader.java:334)\n    at org.hl7.fhir.validation.IgLoader.scanForIgVersion(IgLoader.java:209)\n    at org.hl7.fhir.validation.cli.services.ValidationService.scanForVersions(ValidationService.java:92)\n    at org.hl7.fhir.validation.cli.services.ValidationService.determineVersion(ValidationService.java:322)\n    at org.hl7.fhir.validation.cli.services.ValidationService.determineVersion(ValidationService.java:314)\n    at org.hl7.fhir.validation.ValidatorCli.doValidation(ValidatorCli.java:232)\n    at org.hl7.fhir.validation.ValidatorCli.main(ValidatorCli.java:164)\n</code></pre></div>",
        "id": 263289784,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1638365498
    },
    {
        "content": "<p>i deleted my local .fhir cache.</p>",
        "id": 263290069,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1638365621
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 263290451,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1638365790
    },
    {
        "content": "<p>i can manually download the packages with the displayed urls</p>",
        "id": 263290814,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1638365938
    },
    {
        "content": "<p>issue confirmed by <span class=\"user-mention\" data-user-id=\"193430\">@Alexander Zautke</span></p>",
        "id": 263306294,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1638372036
    },
    {
        "content": "<p>Just tested it together with <span class=\"user-mention\" data-user-id=\"191451\">@Patrick Werner</span>. Same error happens on the latest master of the validator.</p>",
        "id": 263306359,
        "sender_full_name": "Alexander Zautke",
        "timestamp": 1638372060
    },
    {
        "content": "<p>Is it consistently failing? AFAIK, there was a rate limitation placed on <a href=\"http://packages2.fhir.org\">packages2.fhir.org</a> to deal with an out of control automated testing script of unknown origin, could that be the reason?</p>",
        "id": 263312818,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1638374588
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"259036\">@Matthijs van der Wielen</span> Is there any chance to see in the logs of the package server what's going on?</p>",
        "id": 263313416,
        "sender_full_name": "Alexander Zautke",
        "timestamp": 1638374786
    },
    {
        "content": "<p>Sorry, faulty memory - it is the <strong>packages2</strong> server that is rate limited. Not sure what the <strong>packages</strong> server considers as a \"bad request\"</p>",
        "id": 263314521,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1638375216
    },
    {
        "content": "<p>this package is from <a href=\"http://packages.fhir.org\">packages.fhir.org</a> - it's not on <a href=\"http://packages2.fhir.org\">packages2.fhir.org</a> (which is only the backup)</p>",
        "id": 263342190,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1638386076
    },
    {
        "content": "<p>and the rate limitation on <a href=\"http://packages2.fhir.org\">packages2.fhir.org</a> is by IP, so I'm looking forward to someone complaining about it ;-)</p>",
        "id": 263342234,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1638386097
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191451\">@Patrick Werner</span> the parameter <code>-ig de.medizinofmatikinitiative.kerndatensatz.person#1.0.14</code> means the following request from the package server:</p>\n<div class=\"codehilite\"><pre><span></span><code>GET http://packages.fhir.org/de.medizinofmatikinitiative.kerndatensatz.person/1.0.14\n</code></pre></div>",
        "id": 263349580,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1638388840
    },
    {
        "content": "<p>and the response is </p>\n<div class=\"codehilite\"><pre><span></span><code>The package was not found.\n</code></pre></div>",
        "id": 263349695,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1638388888
    },
    {
        "content": "<p>so I don't see how this is a validator issue</p>",
        "id": 263349758,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1638388922
    },
    {
        "content": "<p>sorry there was a typo in the example for the person package.</p>",
        "id": 263406035,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1638434190
    },
    {
        "content": "<p>fixed it: <code>java -jar validator_cli.jar fehlerhaftes-erezept-anonymisiert.xml -ig de.medizininformatikinitiative.kerndatensatz.person#1.0.14</code></p>",
        "id": 263406046,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1638434195
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>java -jar validator_cli.jar fehlerhaftes-erezept-anonymisiert.xml -ig de.medizininformatikinitiative.kerndatensatz.person#1.0.14                                            1 ↵  4423  09:33:34\nFHIR Validation tool Version 5.6.1 (Git# 9717d321b4b4). Built 2021-11-26T15:21:45.67Z (5 days old)\n  Java:   11.0.2 from /Library/Java/JavaVirtualMachines/openjdk-11.0.2.jdk/Contents/Home on x86_64 (64bit). 4096MB available\n  Paths:  Current = /Users/patrickwerner/Downloads, Package Cache = /Users/patrickwerner/.fhir/packages\n  Params: fehlerhaftes-erezept-anonymisiert.xml -ig de.medizininformatikinitiative.kerndatensatz.person#1.0.14\nScanning for versions (no -version parameter):\n2021-12-02 09:35:56.569 [main] INFO  o.h.f.u.npm.BasePackageCacheManager [BasePackageCacheManager.java:80] Failed to resolve package de.medizininformatikinitiative.kerndatensatz.person#1.0.14 from server: http://packages.fhir.org (Server returned HTTP response code: 400 for URL: http://packages.fhir.org/de.medizininformatikinitiative.kerndatensatz.person/1.0.14)\n2021-12-02 09:35:57.641 [main] INFO  o.h.f.u.npm.BasePackageCacheManager [BasePackageCacheManager.java:80] Failed to resolve package de.medizininformatikinitiative.kerndatensatz.person#1.0.14 from server: https://packages2.fhir.org/packages (https://packages2.fhir.org/packages/de.medizininformatikinitiative.kerndatensatz.person/1.0.14)\n2021-12-02 09:35:57.843 [main] INFO  o.h.f.u.npm.BasePackageCacheManager [BasePackageCacheManager.java:80] Failed to resolve package de.medizininformatikinitiative.kerndatensatz.person#1.0.9 from server: http://packages.fhir.org (Server returned HTTP response code: 400 for URL: http://packages.fhir.org/de.medizininformatikinitiative.kerndatensatz.person/1.0.9)\n2021-12-02 09:35:58.626 [main] INFO  o.h.f.u.npm.BasePackageCacheManager [BasePackageCacheManager.java:80] Failed to resolve package de.medizininformatikinitiative.kerndatensatz.person#1.0.9 from server: https://packages2.fhir.org/packages (https://packages2.fhir.org/packages/de.medizininformatikinitiative.kerndatensatz.person/1.0.9)\nException in thread &quot;main&quot; org.hl7.fhir.exceptions.FHIRException: Unable to resolve package id de.medizininformatikinitiative.kerndatensatz.person#1.0.14\n    at org.hl7.fhir.utilities.npm.FilesystemPackageCacheManager.fetchTheOldWay(FilesystemPackageCacheManager.java:705)\n    at org.hl7.fhir.utilities.npm.FilesystemPackageCacheManager.loadFromPackageServer(FilesystemPackageCacheManager.java:223)\n    at org.hl7.fhir.utilities.npm.FilesystemPackageCacheManager.loadPackage(FilesystemPackageCacheManager.java:507)\n    at org.hl7.fhir.validation.IgLoader.resolvePackageForVersion(IgLoader.java:584)\n    at org.hl7.fhir.validation.IgLoader.fetchVersionByPackage(IgLoader.java:507)\n    at org.hl7.fhir.validation.IgLoader.loadIgSourceForVersion(IgLoader.java:334)\n    at org.hl7.fhir.validation.IgLoader.scanForIgVersion(IgLoader.java:209)\n    at org.hl7.fhir.validation.cli.services.ValidationService.scanForVersions(ValidationService.java:92)\n    at org.hl7.fhir.validation.cli.services.ValidationService.determineVersion(ValidationService.java:322)\n    at org.hl7.fhir.validation.cli.services.ValidationService.determineVersion(ValidationService.java:314)\n    at org.hl7.fhir.validation.ValidatorCli.doValidation(ValidatorCli.java:232)\n    at org.hl7.fhir.validation.ValidatorCli.main(ValidatorCli.java:164)\n</code></pre></div>",
        "id": 263406048,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1638434196
    },
    {
        "content": "<p>The Validator cant't find the package, the url  the validator is displaying is resolvable (you get the correct pacakage).<br>\n`<br>\n2021-12-02 09:35:56.569 [main] INFO  o.h.f.u.npm.BasePackageCacheManager [BasePackageCacheManager.java:80] Failed to resolve package de.medizininformatikinitiative.kerndatensatz.person#1.0.14 from server: <a href=\"http://packages.fhir.org\">http://packages.fhir.org</a> (Server returned HTTP response code: 400 for URL: <a href=\"http://packages.fhir.org/de.medizininformatikinitiative.kerndatensatz.person/1.0.14\">http://packages.fhir.org/de.medizininformatikinitiative.kerndatensatz.person/1.0.14</a>)</p>",
        "id": 263406216,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1638434304
    },
    {
        "content": "<p>So the Server returns 400 if the validator is asking, but no issues if a browser is doing the same</p>",
        "id": 263406310,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1638434370
    },
    {
        "content": "<p>works for me</p>",
        "id": 263478070,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1638468584
    },
    {
        "content": "<p>and if it's not working, it's not in the validator. A caching problem? or a network interception?</p>",
        "id": 263478169,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1638468614
    },
    {
        "content": "<p>FWIW, <a href=\"http://packages.fhir.org/de.medizininformatikinitiative.kerndatensatz.person/1.0.14\">http://packages.fhir.org/de.medizininformatikinitiative.kerndatensatz.person/1.0.14</a> does not work when I click the link in Zulip, but it works if I copy and paste the link in the browser address link</p>",
        "id": 263511145,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1638485635
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179166-implementers/topic/newest.20java.20validator.20fails.20to.20load.20package/near/263478169\">said</a>:</p>\n<blockquote>\n<p>and if it's not working, it's not in the validator. A caching problem? or a network interception?</p>\n</blockquote>\n<p>already deleted the whole fhir package cache</p>",
        "id": 263573493,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1638535209
    },
    {
        "content": "<p>will try to get the cause of the problem with wireshark</p>",
        "id": 263574597,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1638535868
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191451\">@Patrick Werner</span> <span class=\"user-mention\" data-user-id=\"259036\">@Matthijs van der Wielen</span> confirmed that there were <strong>no</strong> HTTP 400 responses in the logs.</p>",
        "id": 263591904,
        "sender_full_name": "Alexander Zautke",
        "timestamp": 1638543832
    }
]