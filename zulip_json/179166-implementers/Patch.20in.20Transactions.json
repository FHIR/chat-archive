[
    {
        "content": "<p>Is there a way to include patch operations in the JSON-patch fromat inside transactions?<br>\nI see that using  the FHIRPath Patch is valid (although I couldn't find any examples of its being used in transaction) but I'm implementing a server in Javascript and XML is a very tedious format to handle. <br>\nIs there a way to encode FHIRPath Patch in JSON?</p>",
        "id": 153930735,
        "sender_full_name": "emilio",
        "timestamp": 1516909557
    },
    {
        "content": "<p>Just making sure you know you can use either JSON or XML for the <a href=\"http://build.fhir.org/formats.html\" target=\"_blank\" title=\"http://build.fhir.org/formats.html\">wire format</a></p>",
        "id": 153930765,
        "sender_full_name": "Eric Haas",
        "timestamp": 1516912829
    },
    {
        "content": "<p>Patch in JSON is described here: <a href=\"http://build.fhir.org/http.html\" target=\"_blank\" title=\"http://build.fhir.org/http.html\">http://build.fhir.org/http.html</a></p>",
        "id": 153930766,
        "sender_full_name": "Eric Haas",
        "timestamp": 1516912892
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span>  But how would you make a FHIRPath patch in JSON? I can't find an example.</p>",
        "id": 153930767,
        "sender_full_name": "emilio",
        "timestamp": 1516913083
    },
    {
        "content": "<p>And yes, I saw what is written about Patch and JSON-Patch in  <a href=\"http://build.fhir.org/http.html\" target=\"_blank\" title=\"http://build.fhir.org/http.html\">http://build.fhir.org/http.html</a> but I'm interested in Patch as part of a transaction, where, as I understand, json-patch is not valid.</p>",
        "id": 153930768,
        "sender_full_name": "emilio",
        "timestamp": 1516913211
    },
    {
        "content": "<p>I did a paper example here-: <a href=\"https://argonautproject.github.io/scheduling/patient-scheduling.html#examples-1\" target=\"_blank\" title=\"https://argonautproject.github.io/scheduling/patient-scheduling.html#examples-1\">https://argonautproject.github.io/scheduling/patient-scheduling.html#examples-1</a></p>\n<p>I did test it out on the hapi test server.</p>",
        "id": 153930769,
        "sender_full_name": "Eric Haas",
        "timestamp": 1516913472
    },
    {
        "content": "<p>not sure about Patch in transactions - good question</p>",
        "id": 153930770,
        "sender_full_name": "Eric Haas",
        "timestamp": 1516913543
    },
    {
        "content": "<p>Yes, What you have in that example is clear to me, I mean, the fact that you can PATCH with either json-patch or fhirPath.  <br>\nMy questions are: <br>\n1) Is it valid to use json-patch in a transaction?<br>\n2) Is it valid to use fhirPath Patch in a transaction?<br>\n3) How do you encode a fhirPath Patch in JSON (and use it in a transaction)?</p>",
        "id": 153930771,
        "sender_full_name": "emilio",
        "timestamp": 1516913861
    },
    {
        "content": "<p>it is not valid to use json-patch in a transaction</p>",
        "id": 153930794,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1516927691
    },
    {
        "content": "<p>it is valid to use a fhirpath patch in a transaction - see <a href=\"http://build.fhir.org/fhirpatch.html\" target=\"_blank\" title=\"http://build.fhir.org/fhirpatch.html\">http://build.fhir.org/fhirpatch.html</a> for an example fhirpath patch</p>",
        "id": 153930795,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1516927770
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> Thanks, but what about my third question (fhirPath Patch as JSON)?</p>",
        "id": 153930799,
        "sender_full_name": "emilio",
        "timestamp": 1516931889
    },
    {
        "content": "<p>well, it would be the json equivalent of the xml form in that link</p>",
        "id": 153930801,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1516933638
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><span class=\"p\">{</span>\n  <span class=\"nt\">&quot;resourceType&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;Parameters&quot;</span><span class=\"p\">,</span>\n  <span class=\"nt\">&quot;parameter&quot;</span> <span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n      <span class=\"nt\">&quot;name&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;operation&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;part&quot;</span> <span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"p\">{</span>\n          <span class=\"nt\">&quot;name&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;type&quot;</span><span class=\"p\">,</span>\n          <span class=\"nt\">&quot;valueCode&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;add&quot;</span>\n        <span class=\"p\">},</span>\n        <span class=\"p\">{</span>\n          <span class=\"nt\">&quot;name&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;path&quot;</span><span class=\"p\">,</span>\n          <span class=\"nt\">&quot;valueString&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;Patient&quot;</span>\n        <span class=\"p\">},</span>\n        <span class=\"p\">{</span>\n          <span class=\"nt\">&quot;name&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;name&quot;</span><span class=\"p\">,</span>\n          <span class=\"nt\">&quot;valueString&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;birthDate&quot;</span>\n        <span class=\"p\">},</span>\n        <span class=\"p\">{</span>\n          <span class=\"nt\">&quot;name&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;value&quot;</span><span class=\"p\">,</span>\n          <span class=\"nt\">&quot;valueDate&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;1930-01-01&quot;</span>\n        <span class=\"p\">}</span>\n      <span class=\"p\">]</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">]</span>\n<span class=\"p\">}</span>\n</pre></div>",
        "id": 153930802,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1516933685
    },
    {
        "content": "<p>Additional question regarding this.</p>\n<p>I'm looking at <a href=\"http://build.fhir.org/http.html#trules\" target=\"_blank\" title=\"http://build.fhir.org/http.html#trules\">http://build.fhir.org/http.html#trules</a> and I don't see the order at which PATCH interactions should be executed (e.g. after POSTs, PUTs, or ?). Is there some guidance?</p>",
        "id": 153999926,
        "sender_full_name": "Michael Calderero",
        "timestamp": 1537966127
    },
    {
        "content": "<p>Sounds like a good thing to raise as a change request.</p>",
        "id": 154000006,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1537977987
    },
    {
        "content": "<p><a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=18300\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=18300\">GF#18300</a>. Thanks.</p>",
        "id": 154000174,
        "sender_full_name": "Michael Calderero",
        "timestamp": 1538010565
    },
    {
        "content": "<p>Does STU3 provide support for putting PATCH operations in a batch/transaction interaction?</p>\n<p>My assumption is no.</p>\n<p>Even though <a href=\"http://hl7.org/fhir/STU3/http.html#patch\" target=\"_blank\" title=\"http://hl7.org/fhir/STU3/http.html#patch\">http://hl7.org/fhir/STU3/http.html#patch</a> says at the very end that PATCH is supported for batch and interaction transactions, you actually cannot build a STU3 batch or transaction bundle with a PATCH request in it because <a href=\"http://hl7.org/fhir/STU3/valueset-http-verb.html\" target=\"_blank\" title=\"http://hl7.org/fhir/STU3/valueset-http-verb.html\">http://hl7.org/fhir/STU3/valueset-http-verb.html</a> doesn't list out PATCH, and the binding on <a href=\"http://hl7.org/fhir/STU3/bundle-definitions.html#Bundle.entry.request.method\" target=\"_blank\" title=\"http://hl7.org/fhir/STU3/bundle-definitions.html#Bundle.entry.request.method\">http://hl7.org/fhir/STU3/bundle-definitions.html#Bundle.entry.request.method</a> is required.</p>\n<p>Is my interpretation correct? We have to use R4 to be able to use PATCH in a batch/transaction bundle?</p>",
        "id": 154006249,
        "sender_full_name": "Michael Calderero",
        "timestamp": 1538743301
    },
    {
        "content": "<p>The way I'd phrase is is that the R3 behavior is \"undefined\".  Systems can certainly choose to support it, but can't count on it being supported.</p>",
        "id": 154006251,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1538743414
    },
    {
        "content": "<p>We're using HAPI and my understanding is the STU3 definitions of its classes are generated. We could certainly fork it and add the necessary enums to HTTPVerb, but we'd rather not do that if we can avoid it.</p>\n<p>I'm guessing my real question is is STU3 set in stone, or can it be updated via an errata (like for this one)? It would be nice if this were possible (it would make it look more official) and then perhaps it would flow down to the definitions HAPI uses for autogenerating the classes.</p>",
        "id": 154006254,
        "sender_full_name": "Michael Calderero",
        "timestamp": 1538743925
    },
    {
        "content": "<p>STU 3 is more or less set in stone.  Updating it requires a <em>large</em> number of person-hours and there are also rules about what changes can retroactively be made to a balloted specification.  Thus in the past we've only done it when either a tooling issue meant that some of the artifacts where technically non-useable or when there was a serious security hole - and even then, we made the bare minimum change possible.  This change would be the introduction of new capability and thus a \"substantive change\" which is prohibited under HL7's rules.  While implementers are free to pre-adopt conventions from future releases (and implementation guides could theoretically mandate that), past releases won't be changed.</p>",
        "id": 154006264,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1538745051
    },
    {
        "content": "<p>Had this been resolved in R4?</p>",
        "id": 154006346,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1538751645
    },
    {
        "content": "<p>Yes.  We approved a change request around this to clarify it at this WGM.</p>",
        "id": 154006350,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1538752797
    },
    {
        "content": "<p>Thanks, I just checked too connectivity getting limited now.</p>",
        "id": 154006399,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1538758064
    }
]