[
    {
        "content": "<p>Is there any documentation about how to read \"<a href=\"http://hl7.org/fhirpath/System.String\" target=\"_blank\" title=\"http://hl7.org/fhirpath/System.String\">http://hl7.org/fhirpath/System.String</a>\" ?  It seems to hook in to <a href=\"http://hl7.org/fhir/StructureDefinition/structuredefinition-fhir-type\" target=\"_blank\" title=\"http://hl7.org/fhir/StructureDefinition/structuredefinition-fhir-type\">http://hl7.org/fhir/StructureDefinition/structuredefinition-fhir-type</a>, which is described as \"Compiler magic\", which is quite vague :/</p>",
        "id": 182384024,
        "sender_full_name": "Nick George",
        "timestamp": 1575317205
    },
    {
        "content": "<p>I'd love to read a description of how this works and the reasons it exists, it makes 4.0.1 kind of a bear</p>",
        "id": 182384074,
        "sender_full_name": "Nick George",
        "timestamp": 1575317239
    },
    {
        "content": "<p>Why, for instance, are id fields no longer typed as ids?  is this explained somewhere?</p>",
        "id": 182384227,
        "sender_full_name": "Nick George",
        "timestamp": 1575317329
    },
    {
        "content": "<p>I'm very confused - <a href=\"https://www.hl7.org/fhir/resource.html\" target=\"_blank\" title=\"https://www.hl7.org/fhir/resource.html\">https://www.hl7.org/fhir/resource.html</a> lists id as typed as id, but <a href=\"https://www.hl7.org/fhir/patient.profile.json.html\" target=\"_blank\" title=\"https://www.hl7.org/fhir/patient.profile.json.html\">https://www.hl7.org/fhir/patient.profile.json.html</a> uses \"compiler magic\" to type it as a \"String\"</p>",
        "id": 182384528,
        "sender_full_name": "Nick George",
        "timestamp": 1575317525
    },
    {
        "content": "<p>so we used to define those special elements (<a href=\"http://Element.id\" target=\"_blank\" title=\"http://Element.id\">Element.id</a>, Extension.url, [PrimitiveType].value) with the FHIR type as their primary type, and extensions defining the actual working type in the different formats. The problem with this was that it wasn't accurate. Those elements don't have .id or .extension, but that declared that they do</p>\n<p>With 4.0.1, we have flipped this over; the type is now a system type, without .id or .extension - so we use the FHIRPath types as a conveniently available type. And we declare the conceptual FHIR type in an extension</p>",
        "id": 182388090,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1575319809
    },
    {
        "content": "<p>I found that it made things much easier, though I had to go through various pieces of code adapting for this</p>",
        "id": 182388121,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1575319844
    },
    {
        "content": "<p>whatever we do, those elements do have compiler magic associated with them</p>",
        "id": 182388155,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1575319883
    },
    {
        "content": "<p>Why is it insufficient to specify that the id datatype has extensions and id size zero?</p>",
        "id": 182389101,
        "sender_full_name": "Nick George",
        "timestamp": 1575320479
    },
    {
        "content": "<p>Making primitive value fields use a system type makes sense, but it seems weird to have things like patient not be able to use the id data type</p>",
        "id": 182389298,
        "sender_full_name": "Nick George",
        "timestamp": 1575320600
    },
    {
        "content": "<blockquote>\n<p>it seems weird to have things like patient not be able to use the id data type</p>\n</blockquote>\n<p>I have no idea what you mean there</p>",
        "id": 182389524,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1575320737
    },
    {
        "content": "<p>we could have used constraints, but the vote was to use system types</p>",
        "id": 182389544,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1575320752
    },
    {
        "content": "<p>well, given that the \"id\" primitive type exists, why is <a href=\"http://patient.id\" target=\"_blank\" title=\"http://patient.id\">patient.id</a> not an id? <a href=\"https://www.hl7.org/fhir/patient.profile.json.html\" target=\"_blank\" title=\"https://www.hl7.org/fhir/patient.profile.json.html\">https://www.hl7.org/fhir/patient.profile.json.html</a></p>",
        "id": 182389626,
        "sender_full_name": "Nick George",
        "timestamp": 1575320788
    },
    {
        "content": "<p>because that's not an id in the normal sense. If we hadn't changed it, it would be inconsistect</p>",
        "id": 182389729,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1575320860
    },
    {
        "content": "<p>so is <a href=\"https://www.hl7.org/fhir/resource.html\" target=\"_blank\" title=\"https://www.hl7.org/fhir/resource.html\">https://www.hl7.org/fhir/resource.html</a> incorrect when it lists the id as an id?</p>",
        "id": 182389854,
        "sender_full_name": "Nick George",
        "timestamp": 1575320947
    },
    {
        "content": "<p>no. At least, that was deliberate. The structure definitions define the type precisely. But the detail of the gap between the conceptual FHIR type and the is not considered important for the standard itself, so the presentation is based on the extension</p>",
        "id": 182391357,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1575321706
    },
    {
        "content": "<p>I'm not sure what about the spec indicates it's an id - the structure definition says it's a System.String with an extension with code \"string\"</p>",
        "id": 182391656,
        "sender_full_name": "Nick George",
        "timestamp": 1575321884
    },
    {
        "content": "<p>oh. that's just an error then. the extension should very definitely say 'id'</p>",
        "id": 182391748,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1575321940
    },
    {
        "content": "<p>it's an error on every single resource!</p>",
        "id": 182391810,
        "sender_full_name": "Nick George",
        "timestamp": 1575321966
    },
    {
        "content": "<p>and conceptually, it seems we can no longer say that leaf nodes on resources are fhir datatypes - now it seems leaf nodes on resources can be fhir datatypes OR system primitives - is it written up anywhere why that was considered better than a constraint saying <a href=\"http://Reasource.id\" target=\"_blank\" title=\"http://Reasource.id\">Reasource.id</a> doesn't have any extensions?</p>",
        "id": 182391836,
        "sender_full_name": "Nick George",
        "timestamp": 1575322000
    },
    {
        "content": "<blockquote>\n<p>it's an error on every single resource!</p>\n</blockquote>\n<p>Yep, it would be</p>",
        "id": 182392670,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1575322546
    },
    {
        "content": "<p>written up.... committee minutes, maybe. And the approving task. WHich according to the history is: <a href=\"http://jira.hl7.org/browse/FHIR-22493\" target=\"_blank\" title=\"http://jira.hl7.org/browse/FHIR-22493\">GF#22493</a></p>",
        "id": 182392779,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1575322649
    },
    {
        "content": "<p>but the task is not useful</p>",
        "id": 182392797,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1575322676
    },
    {
        "content": "<p>but conceptually, it seems a pretty big hammer to say fhir resources are no longer fundamentally composed of fhir datatypes</p>",
        "id": 182393110,
        "sender_full_name": "Nick George",
        "timestamp": 1575322899
    },
    {
        "content": "<p>I guess maybe that was never the case but it was our assumption</p>",
        "id": 182393281,
        "sender_full_name": "Nick George",
        "timestamp": 1575323011
    },
    {
        "content": "<p>well, nothing actually changed in the resources</p>",
        "id": 182393404,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1575323088
    },
    {
        "content": "<p>Well, what changes is the datatype of \"<a href=\"http://Patient.id\" target=\"_blank\" title=\"http://Patient.id\">Patient.id</a>\".  Unless the advice is \"Just pretend it's typed as the datatype in the extension\", in which case it's a bit frustrating that we don't just keep it typed as the type in the extension.</p>",
        "id": 182393810,
        "sender_full_name": "Nick George",
        "timestamp": 1575323405
    },
    {
        "content": "<p>the extension is there so that you can choose to pretend that if you want. Obviously it doesn't help that the extension is wrong in those cases.</p>",
        "id": 182393850,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1575323467
    },
    {
        "content": "<p>filed <a href=\"https://jira.hl7.org/browse/FHIR-25262\" target=\"_blank\" title=\"https://jira.hl7.org/browse/FHIR-25262\">https://jira.hl7.org/browse/FHIR-25262</a></p>",
        "id": 182403916,
        "sender_full_name": "Nick George",
        "timestamp": 1575332484
    },
    {
        "content": "<p>potentially related bug: <a href=\"http://hl7.org/fhir/xhtml.profile.json.html\" target=\"_blank\" title=\"http://hl7.org/fhir/xhtml.profile.json.html\">http://hl7.org/fhir/xhtml.profile.json.html</a> doesn't have any type extension at all for <a href=\"http://xhtml.id\" target=\"_blank\" title=\"http://xhtml.id\">xhtml.id</a></p>",
        "id": 182405501,
        "sender_full_name": "Nick George",
        "timestamp": 1575334066
    },
    {
        "content": "<p>hmm, actually, are we sure it <em>should</em> be id?  and not string?  <a href=\"https://www.hl7.org/fhir/element.html\" target=\"_blank\" title=\"https://www.hl7.org/fhir/element.html\">https://www.hl7.org/fhir/element.html</a> has id as a string, and so do primitive types in 4.0.0</p>",
        "id": 182406992,
        "sender_full_name": "Nick George",
        "timestamp": 1575335591
    },
    {
        "content": "<p>in other words, I think the thing that is actually wrong might be just <a href=\"https://www.hl7.org/fhir/resource.html\" target=\"_blank\" title=\"https://www.hl7.org/fhir/resource.html\">https://www.hl7.org/fhir/resource.html</a></p>",
        "id": 182407012,
        "sender_full_name": "Nick George",
        "timestamp": 1575335623
    },
    {
        "content": "<p>definitely an id</p>",
        "id": 182407431,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1575336068
    },
    {
        "content": "<p>element id is definitely a string</p>",
        "id": 182407436,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1575336077
    },
    {
        "content": "<p>wait id or string?</p>",
        "id": 182407457,
        "sender_full_name": "Nick George",
        "timestamp": 1575336098
    },
    {
        "content": "<p>are you saying <a href=\"http://Resource.id\" target=\"_blank\" title=\"http://Resource.id\">Resource.id</a> is not the same type as <a href=\"http://Element.id\" target=\"_blank\" title=\"http://Element.id\">Element.id</a>?</p>",
        "id": 182407556,
        "sender_full_name": "Nick George",
        "timestamp": 1575336202
    },
    {
        "content": "<p><a href=\"http://Resource.id\" target=\"_blank\" title=\"http://Resource.id\">Resource.id</a> is definitely an 'id' conceptually, though it is a System.string in the structure definitions.<br>\n<a href=\"http://Element.id\" target=\"_blank\" title=\"http://Element.id\">Element.id</a> is definitely a string conceptually - not subject to the id data type restrictions</p>\n<p>So yes: they have different types</p>",
        "id": 182407596,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1575336241
    },
    {
        "content": "<p>I see.  ok, so only thing that has to change is what I outlined in <a href=\"https://jira.hl7.org/browse/FHIR-25262\" target=\"_blank\" title=\"https://jira.hl7.org/browse/FHIR-25262\">https://jira.hl7.org/browse/FHIR-25262</a></p>",
        "id": 182407691,
        "sender_full_name": "Nick George",
        "timestamp": 1575336322
    },
    {
        "content": "<p>yes I think so</p>",
        "id": 182407711,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1575336356
    },
    {
        "content": "<p>There seem to be some more issues with this.</p>",
        "id": 182416659,
        "sender_full_name": "Nick George",
        "timestamp": 1575348901
    },
    {
        "content": "<p>not sure yet how widespread, but for instance, <a href=\"http://hl7.org/fhir/extension-structuredefinition-rdf-type.json.html\" target=\"_blank\" title=\"http://hl7.org/fhir/extension-structuredefinition-rdf-type.json.html\">http://hl7.org/fhir/extension-structuredefinition-rdf-type.json.html</a> is incorrect - it is the 4.0.0 version</p>",
        "id": 182416672,
        "sender_full_name": "Nick George",
        "timestamp": 1575348930
    },
    {
        "content": "<p>in the 4.0.1 version in the package, the id field has the following type:</p>\n<div class=\"codehilite\"><pre><span></span>        &quot;type&quot;:[ \n           { \n              &quot;_code&quot;:{ \n                 &quot;extension&quot;:[ \n                    { \n                       &quot;url&quot;:&quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-json-type&quot;,\n                       &quot;valueString&quot;:&quot;string&quot;\n                    },\n                    { \n                       &quot;url&quot;:&quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-xml-type&quot;,\n                       &quot;valueString&quot;:&quot;xsd:string&quot;\n                    },\n                    { \n                       &quot;url&quot;:&quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-rdf-type&quot;,\n                       &quot;valueString&quot;:&quot;xsd:string&quot;\n                    }\n                 ]\n              }\n           }\n        ],\n</pre></div>",
        "id": 182416732,
        "sender_full_name": "Nick George",
        "timestamp": 1575348985
    },
    {
        "content": "<p>this has <em>no code at all</em>!</p>",
        "id": 182416737,
        "sender_full_name": "Nick George",
        "timestamp": 1575348996
    },
    {
        "content": "<p>crap where did you find that?</p>",
        "id": 182416739,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1575348998
    },
    {
        "content": "<p>the npm package</p>",
        "id": 182416822,
        "sender_full_name": "Nick George",
        "timestamp": 1575349095
    },
    {
        "content": "<p>where in the NPM package?</p>",
        "id": 182417017,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1575349338
    },
    {
        "content": "<p>again, not sure how widespread yet, but at least<br>\nStructureDefinition-structuredefinition-rdf-type.json</p>",
        "id": 182417028,
        "sender_full_name": "Nick George",
        "timestamp": 1575349367
    },
    {
        "content": "<p>that shouldn't still exist....</p>",
        "id": 182417227,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1575349633
    },
    {
        "content": "<p>presumably same for the json-type and xml-type extensions, they also have the issue</p>",
        "id": 182417383,
        "sender_full_name": "Nick George",
        "timestamp": 1575349816
    },
    {
        "content": "<p>presumably same for the json-type and xml-type extensions, they also have the issue</p>",
        "id": 182417394,
        "sender_full_name": "Nick George",
        "timestamp": 1575349833
    },
    {
        "content": "<p>I can blacklist those structure definitions and see if anything else fails</p>",
        "id": 182417401,
        "sender_full_name": "Nick George",
        "timestamp": 1575349854
    },
    {
        "content": "<p>seems those are the only 3 with the issue</p>",
        "id": 182417549,
        "sender_full_name": "Nick George",
        "timestamp": 1575350081
    },
    {
        "content": "<p>good. they aren't part of the spec anymore - they've accidentally appeared in the package because of a file synchronization issue on the web site</p>",
        "id": 182425692,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1575362031
    },
    {
        "content": "<p>I am also implementing the new version 4.0.1 and I see that <a href=\"http://Patient.id\" target=\"_blank\" title=\"http://Patient.id\">Patient.id</a> is not of type id but extended. I would have expect those extensions at the datatype id (which they do). Will this be updated in the spec?</p>",
        "id": 182439957,
        "sender_full_name": "Marco Visser",
        "timestamp": 1575374157
    },
    {
        "content": "<p>I didn't follow that - can you try again?</p>",
        "id": 182440297,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1575374425
    },
    {
        "content": "<p>I would have expect the following for the structureDefinition of Patient:</p>\n<div class=\"codehilite\"><pre><span></span>          &lt;element id=&quot;Patient.id&quot;&gt;\n            &lt;path value=&quot;Patient.id&quot; /&gt;\n            &lt;short value=&quot;Logical id of this artifact&quot; /&gt;\n            &lt;definition value=&quot;The logical id of the resource, as used in the URL for the resource. Once assigned, this value never changes.&quot; /&gt;\n            &lt;comment value=&quot;The only time that a resource does not have an id is when it is being submitted to the server using a create operation.&quot; /&gt;\n            &lt;min value=&quot;0&quot; /&gt;\n            &lt;max value=&quot;1&quot; /&gt;\n            &lt;base&gt;\n              &lt;path value=&quot;Resource.id&quot; /&gt;\n              &lt;min value=&quot;0&quot; /&gt;\n              &lt;max value=&quot;1&quot; /&gt;\n            &lt;/base&gt;\n            &lt;type&gt;\n              &lt;code value=&quot;id&quot; /&gt;\n            &lt;/type&gt;\n            &lt;isModifier value=&quot;false&quot; /&gt;\n            &lt;isSummary value=&quot;true&quot; /&gt;\n          &lt;/element&gt;\n</pre></div>\n\n\n<p>and not </p>\n<div class=\"codehilite\"><pre><span></span>          &lt;element id=&quot;Patient.id&quot;&gt;\n            &lt;path value=&quot;Patient.id&quot; /&gt;\n            &lt;short value=&quot;Logical id of this artifact&quot; /&gt;\n            &lt;definition value=&quot;The logical id of the resource, as used in the URL for the resource. Once assigned, this value never changes.&quot; /&gt;\n            &lt;comment value=&quot;The only time that a resource does not have an id is when it is being submitted to the server using a create operation.&quot; /&gt;\n            &lt;min value=&quot;0&quot; /&gt;\n            &lt;max value=&quot;1&quot; /&gt;\n            &lt;base&gt;\n              &lt;path value=&quot;Resource.id&quot; /&gt;\n              &lt;min value=&quot;0&quot; /&gt;\n              &lt;max value=&quot;1&quot; /&gt;\n            &lt;/base&gt;\n          &lt;!-- Note: special primitive values have a FHIRPath system type. e.g. this is compiler magic (j) --&gt;\n            &lt;type&gt;\n              &lt;extension url=&quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-fhir-type&quot;&gt;\n                &lt;valueUrl value=&quot;string&quot; /&gt;\n              &lt;/extension&gt;\n              &lt;code value=&quot;http://hl7.org/fhirpath/System.String&quot; /&gt;\n            &lt;/type&gt;\n            &lt;isModifier value=&quot;false&quot; /&gt;\n            &lt;isSummary value=&quot;true&quot; /&gt;\n          &lt;/element&gt;\n</pre></div>\n\n\n<p>So I would expect the datatype of <a href=\"http://Patient.id\" target=\"_blank\" title=\"http://Patient.id\">Patient.id</a> to be of type id and not <a href=\"http://hl7.org/fhirpath/System.String\" target=\"_blank\" title=\"http://hl7.org/fhirpath/System.String\">http://hl7.org/fhirpath/System.String</a>. In the datatype id I expect the compiler magic, which is indeed specified:</p>\n<div class=\"codehilite\"><pre><span></span>          &lt;element id=&quot;id.id&quot;&gt;\n            &lt;path value=&quot;id.id&quot; /&gt;\n            &lt;representation value=&quot;xmlAttr&quot; /&gt;\n            &lt;short value=&quot;xml:id (or equivalent in JSON)&quot; /&gt;\n            &lt;definition value=&quot;unique id for the element within a resource (for internal references)&quot; /&gt;\n            &lt;min value=&quot;0&quot; /&gt;\n            &lt;max value=&quot;1&quot; /&gt;\n            &lt;base&gt;\n              &lt;path value=&quot;Element.id&quot; /&gt;\n              &lt;min value=&quot;0&quot; /&gt;\n              &lt;max value=&quot;1&quot; /&gt;\n            &lt;/base&gt;\n          &lt;!-- Note: special primitive values have a FHIRPath system type. e.g. this is compiler magic (h) --&gt;\n            &lt;type&gt;\n              &lt;extension url=&quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-fhir-type&quot;&gt;\n                &lt;valueUrl value=&quot;string&quot; /&gt;\n              &lt;/extension&gt;\n              &lt;code value=&quot;http://hl7.org/fhirpath/System.String&quot; /&gt;\n            &lt;/type&gt;\n            &lt;isModifier value=&quot;false&quot; /&gt;\n            &lt;isSummary value=&quot;false&quot; /&gt;\n          &lt;/element&gt;\n</pre></div>",
        "id": 182442404,
        "sender_full_name": "Marco Visser",
        "timestamp": 1575375785
    },
    {
        "content": "<p>those are saying different things.</p>",
        "id": 182443009,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1575376216
    },
    {
        "content": "<p>There's an error here as <span class=\"user-mention\" data-user-id=\"196561\">@Nick George</span> pointed out:</p>\n<div class=\"codehilite\"><pre><span></span>      &lt;element id=&quot;Patient.id&quot;&gt;\n            &lt;path value=&quot;Patient.id&quot; /&gt;\n            &lt;short value=&quot;Logical id of this artifact&quot; /&gt;\n            &lt;definition value=&quot;The logical id of the resource, as used in the URL for the resource. Once assigned, this value never changes.&quot; /&gt;\n            &lt;comment value=&quot;The only time that a resource does not have an id is when it is being submitted to the server using a create operation.&quot; /&gt;\n            &lt;min value=&quot;0&quot; /&gt;\n            &lt;max value=&quot;1&quot; /&gt;\n            &lt;base&gt;\n              &lt;path value=&quot;Resource.id&quot; /&gt;\n              &lt;min value=&quot;0&quot; /&gt;\n              &lt;max value=&quot;1&quot; /&gt;\n            &lt;/base&gt;\n          &lt;!-- Note: special primitive values have a FHIRPath system type. e.g. this is compiler magic (j) --&gt;\n            &lt;type&gt;\n              &lt;extension url=&quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-fhir-type&quot;&gt;\n                &lt;valueUrl value=&quot;id&quot; /&gt;\n              &lt;/extension&gt;\n              &lt;code value=&quot;http://hl7.org/fhirpath/System.String&quot; /&gt;\n            &lt;/type&gt;\n            &lt;isModifier value=&quot;false&quot; /&gt;\n            &lt;isSummary value=&quot;true&quot; /&gt;\n          &lt;/element&gt;\n</pre></div>",
        "id": 182443108,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1575376306
    },
    {
        "content": "<p>So in the early versions (4.0.0) the compiler magic was at the datatype id level, but now the magic has been moved up a little to the resource level, saying that <a href=\"http://Patient.id\" target=\"_blank\" title=\"http://Patient.id\">Patient.id</a> is of type System.String, but conceptually is an id (solved by the extension <a href=\"http://hl7.org/fhir/StructureDefinition/structuredefinition-fhir-type\" target=\"_blank\" title=\"http://hl7.org/fhir/StructureDefinition/structuredefinition-fhir-type\">http://hl7.org/fhir/StructureDefinition/structuredefinition-fhir-type</a>). Only this extension points now to string instead of id. Is this correct?</p>",
        "id": 182445385,
        "sender_full_name": "Marco Visser",
        "timestamp": 1575377968
    },
    {
        "content": "<p>yes that is correct. The extension pointing to string is wrong</p>",
        "id": 182446631,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1575378976
    },
    {
        "content": "<p>Okay, thanks Graham. So this is going to be changed soon in the spec?</p>",
        "id": 182446814,
        "sender_full_name": "Marco Visser",
        "timestamp": 1575379184
    },
    {
        "content": "<p>the extension?</p>",
        "id": 182446923,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1575379256
    },
    {
        "content": "<p>yes</p>",
        "id": 182446941,
        "sender_full_name": "Marco Visser",
        "timestamp": 1575379267
    },
    {
        "content": "<p>well, it'll be fixed... I'm not particularly in favor of doing it soon :-(</p>",
        "id": 182446987,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1575379317
    },
    {
        "content": "<p>technical corrections consume weeks of my life</p>",
        "id": 182447036,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1575379338
    },
    {
        "content": "<p>I can imagine. So I have to do some extra compiler magic to get it right in the meantime. No problem</p>",
        "id": 182447099,
        "sender_full_name": "Marco Visser",
        "timestamp": 1575379385
    },
    {
        "content": "<p>worth noting that it affects validation pretty significantly, if basically any string is considered a valid Id in the current version of the spec</p>",
        "id": 182468332,
        "sender_full_name": "Nick George",
        "timestamp": 1575391235
    },
    {
        "content": "<p>the java validator checks that directly without dependency on the structure definitions, which is why I didn't notice that mistake</p>",
        "id": 182483615,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1575399898
    },
    {
        "content": "<p>Although this is already a lengthy discussion, I also noticed the <a href=\"http://hl7.org/fhirpath/System.String\" target=\"_blank\" title=\"http://hl7.org/fhirpath/System.String\">http://hl7.org/fhirpath/System.String</a> type recently. The ValueSet binding for  ElementDefinition.type.code is <a href=\"http://www.hl7.org/fhir/valueset-defined-types.html\" target=\"_blank\" title=\"http://www.hl7.org/fhir/valueset-defined-types.html\">http://www.hl7.org/fhir/valueset-defined-types.html</a>, which doesn't include <a href=\"http://hl7.org/fhirpath/System.String\" target=\"_blank\" title=\"http://hl7.org/fhirpath/System.String\">http://hl7.org/fhirpath/System.String</a>. However the binding is extensible. But shouldn't a much used code like <a href=\"http://hl7.org/fhirpath/System.String\" target=\"_blank\" title=\"http://hl7.org/fhirpath/System.String\">http://hl7.org/fhirpath/System.String</a> appear in this ValueSet?</p>\n<p>Also I haven't really understand why it is useful for implementations to have <a href=\"http://hl7.org/fhirpath/System.String\" target=\"_blank\" title=\"http://hl7.org/fhirpath/System.String\">http://hl7.org/fhirpath/System.String</a> instead of id? Which implementations are that? What is the \"compiler magic\" referred here?</p>",
        "id": 182560649,
        "sender_full_name": "Alexander Kiel",
        "timestamp": 1575470233
    },
    {
        "content": "<p>We also ran into this <a href=\"http://hl7.org/fhirpath/System.String\" target=\"_blank\" title=\"http://hl7.org/fhirpath/System.String\">http://hl7.org/fhirpath/System.String</a> oddity while updating to 4.0.1 today.  Is there a JIRA issue for it yet?</p>",
        "id": 182585208,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1575484581
    },
    {
        "content": "<p>so far the only known issue is that extension on <a href=\"http://Resource.id\" target=\"_blank\" title=\"http://Resource.id\">Resource.id</a> says \"string\" not \"id\"</p>",
        "id": 182585460,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1575484722
    },
    {
        "content": "<p>ok, want a JIRA for that?  or its already to be fixed?</p>",
        "id": 182585744,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1575484836
    },
    {
        "content": "<p>Clearly I have to revisit the whole discussion. The problem was that the elements in question:</p>\n<ul>\n<li><a href=\"http://Element.id\" target=\"_blank\" title=\"http://Element.id\">Element.id</a></li>\n<li><a href=\"http://Resource.id\" target=\"_blank\" title=\"http://Resource.id\">Resource.id</a></li>\n<li>Extension.url</li>\n<li>[PrimitiveType].value </li>\n</ul>\n<p>were all declared to have a FHIR type but they weren't really - you couldn't have an extension or an id on them. </p>\n<p>After much discussion, we agreed that we would rework the way we represent them, and define them as having a specific type that actually declares what they are.</p>",
        "id": 182585893,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1575484922
    },
    {
        "content": "<p>you could make a JIRA for that, sure</p>",
        "id": 182585944,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1575484937
    },
    {
        "content": "<p>well i don't have to.  i just like having something i can track.  assuming its helpful to others as well, I'll do it now</p>",
        "id": 182586090,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1575485027
    },
    {
        "content": "<p>OK, I opened     <a href=\"https://jira.hl7.org/browse/FHIR-25274\" target=\"_blank\" title=\"https://jira.hl7.org/browse/FHIR-25274\">FHIR-25274 Resource.id is defined with fhir type string instead of id</a></p>",
        "id": 182587496,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1575485848
    },
    {
        "content": "<p>I already filed one: <a href=\"https://jira.hl7.org/browse/FHIR-25262\" target=\"_blank\" title=\"https://jira.hl7.org/browse/FHIR-25262\">https://jira.hl7.org/browse/FHIR-25262</a></p>",
        "id": 182616853,
        "sender_full_name": "Nick George",
        "timestamp": 1575506976
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> Ok now I understand. Up until now I was ignoring extensions on primitive values altogether. So there really was no difference for me.</p>",
        "id": 182654531,
        "sender_full_name": "Alexander Kiel",
        "timestamp": 1575549174
    },
    {
        "content": "<blockquote>\n<p>I already filed one: <a href=\"https://jira.hl7.org/browse/FHIR-25262\" target=\"_blank\" title=\"https://jira.hl7.org/browse/FHIR-25262\">https://jira.hl7.org/browse/FHIR-25262</a></p>\n</blockquote>\n<p>My apologies Nick, I asked here before opening 25274 but I should have just searched.  Should I keep mine for just this part?:</p>\n<blockquote>\n<p>Additionally, it would be very good to write down how this is intended to work. Something like:<br>\n1. An element definition with a type code of <a href=\"http://hl7.org/fhirpath/System.String\" target=\"_blank\" title=\"http://hl7.org/fhirpath/System.String\">http://hl7.org/fhirpath/System.String</a> is a string in the underlying system.  For example, in Java this might be the <code>java.lang.String</code> class.<br>\n2. When an element is defined to have type <a href=\"http://hl7.org/fhirpath/System.String\" target=\"_blank\" title=\"http://hl7.org/fhirpath/System.String\">http://hl7.org/fhirpath/System.String</a> then it SHOULD include a <a href=\"http://hl7.org/fhir/extension-structuredefinition-fhir-type.html\" target=\"_blank\" title=\"http://hl7.org/fhir/extension-structuredefinition-fhir-type.html\">http://hl7.org/fhir/extension-structuredefinition-fhir-type.html</a> extension and, if included, it SHALL be used to constrain the allowed values of the underlying system string. (and maybe more?)</p>\n</blockquote>",
        "id": 182719368,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1575593001
    }
]