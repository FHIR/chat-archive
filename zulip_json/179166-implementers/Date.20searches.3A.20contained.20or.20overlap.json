[
    {
        "content": "<p>So search by date should use overlap or contains? eg date=2019-03 matches only encounters that happened entirely within march 2019, or any encounter that was even partially in March 2019?<br>\nI cannot really understand which is supposed to be from <a href=\"http://hl7.org/fhir/search.html#date\" target=\"_blank\" title=\"http://hl7.org/fhir/search.html#date\">http://hl7.org/fhir/search.html#date</a><br>\nOur server used to use overlap, but a while ago (November 2017) we switched to contained - based on some information / discussions that happened here I think, but that I cannot find</p>",
        "id": 172887905,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1565383866
    },
    {
        "content": "<p>I'm astounded to find that the specification doesn't seem to make clear that it's an \"intersection\" match, not a \"contains\" match.  <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> ?</p>",
        "id": 172903272,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1565401342
    },
    {
        "content": "<p>I thought it was very clear</p>",
        "id": 172903488,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565401748
    },
    {
        "content": "<p>I can't see wording that says it...</p>",
        "id": 172904444,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1565403515
    },
    {
        "content": "<p>Added <a href=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=23558\" target=\"_blank\" title=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=23558\">https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=23558</a></p>",
        "id": 173028031,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1565620038
    },
    {
        "content": "<p>..and you do positively confirm that should be overlap?</p>",
        "id": 173028209,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1565620172
    },
    {
        "content": "<p>I think it's overlap, yes</p>",
        "id": 173185534,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565772665
    },
    {
        "content": "<p>Actually - it is documented at <a href=\"http://hl7.org/fhir/search.html#prefix\" target=\"_blank\" title=\"http://hl7.org/fhir/search.html#prefix\">http://hl7.org/fhir/search.html#prefix</a> - and it is contains for <code>eq</code>, overlap for <code>ge</code>, <code>gt</code>, <code>le</code>, <code>lt</code></p>",
        "id": 173198374,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1565786355
    },
    {
        "content": "<p>Those prefix work for when the element is a date or dateTime.. but not well for when the element is a period. This CR and one I entered (<a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19909\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=19909\">GF#19909</a>) , are about searching against a period.</p>",
        "id": 173207145,
        "sender_full_name": "John Moehrke",
        "timestamp": 1565792448
    },
    {
        "content": "<p>It is partially clear for inclusive searches (give me observatinos within range of x to y). Not clear how start/end of period is used here, but more clear that the intent is to favor false-positives... What is not clear at all is when one is asking for things before x, or after y; mostly I want everything NOT during the period x to y. Usecase that happens in XDS is that there is a known period of time that is very noisy but known to not be relevant. So I want things that happened before that period, and things after. (or there is consent policy restricting that period from x to y).</p>",
        "id": 173207731,
        "sender_full_name": "John Moehrke",
        "timestamp": 1565792821
    },
    {
        "content": "<p>might need some more qualifiers for some of these cases. Sounds like a face to face discussion in Atlanta during the connectathon to me</p>",
        "id": 173261086,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565837151
    },
    {
        "content": "<p>Sure<br>\nDon't understand what's the difference between dates and periods: dates are periods as well (of 1 day or 1 month or 1 year) and the spec say they should be treated as such</p>",
        "id": 173290050,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1565875888
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191912\">@Michele Mottini</span>  Are there any news here? How can I find the gForge issues in JIRA? Thanks.</p>",
        "id": 188044198,
        "sender_full_name": "Alexander Kiel",
        "timestamp": 1581535208
    },
    {
        "content": "<p>As I see it the <code>ap</code> prefix covers the overlap case were the <code>eq</code> prefix covers the contains case.</p>",
        "id": 188049676,
        "sender_full_name": "Alexander Kiel",
        "timestamp": 1581538758
    },
    {
        "content": "<p>If you know the gForge id for an issue, you can find the Jira equivalent using <code>http://jira.hl7.org/browse/FHIR-[id]</code> where [id] is your gForge id.  E.g. <a href=\"http://jira.hl7.org/browse/FHIR-19909\" target=\"_blank\" title=\"http://jira.hl7.org/browse/FHIR-19909\">http://jira.hl7.org/browse/FHIR-19909</a></p>",
        "id": 188050910,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1581539705
    },
    {
        "content": "<p>If you don't know the gForge id, Jira has significant search capabilities.  There's some documentation here: <a href=\"https://confluence.hl7.org/display/HL7/Specification+Feedback#SpecificationFeedback-Searchingandmonitoringissues\" target=\"_blank\" title=\"https://confluence.hl7.org/display/HL7/Specification+Feedback#SpecificationFeedback-Searchingandmonitoringissues\">https://confluence.hl7.org/display/HL7/Specification+Feedback#SpecificationFeedback-Searchingandmonitoringissues</a></p>",
        "id": 188051013,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1581539784
    },
    {
        "content": "<p>No news per se. We implemented <code>eq</code> as contains and <code>gt</code>, <code>lt</code>, <code>ge</code>, <code>le</code> as overlap. We do not support <code>ap</code>. We handle dates as periods of 1 day</p>",
        "id": 188051064,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1581539861
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191912\">@Michele Mottini</span> Is in your case <code>gt</code> the same as <code>ge</code> for dates? I ask because for dates the <code>range above the value</code> is defined the same as the lower bound for dates. In the example it's <code>2015-08-12T05:23:45.000000000000000</code> for <code>2015-08-12T05:23:45</code> where <code>2015-08-12T05:23:45.000000000000000</code> would also the lower bound. For decimals however the lower bound of  <code>2.0</code> is <code>1.95</code>, so it's different from the point where <code>range above the value</code> starts (<code>2.00000000000000000000</code>) and so <code>ge</code> matches more values as <code>gt</code>.</p>",
        "id": 188097043,
        "sender_full_name": "Alexander Kiel",
        "timestamp": 1581592975
    },
    {
        "content": "<p>No, <code>ge</code> and <code>gt</code> are different  (we actually had to fix that - automatic testing with the Inferno tool was failing)</p>",
        "id": 188146819,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1581625515
    },
    {
        "content": "<p><code>ge</code> =&gt; the end of the period is greater or equal to the start of the search period (or the period is open ended)</p>",
        "id": 188147453,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1581625935
    },
    {
        "content": "<p><code>gt</code> =&gt; the end of the period is greater to the start of the search period (or the period is open ended)</p>",
        "id": 188147476,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1581625961
    }
]