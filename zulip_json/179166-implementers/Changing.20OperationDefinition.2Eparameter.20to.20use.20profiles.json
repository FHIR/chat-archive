[
    {
        "content": "<p>Change request <a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13561\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13561\">GF#13561</a> proposes dropping OperationDefinition.parameter and instead pointing to StructureDefinition to define both input and output parameters.  The rationale for this is that OperationDefinition.parameter does exactly the same sort of thing that StructureDefinition elements do, but without the same level of expressivity.  As well, OperationDefinition.parameter can't be used to validate input our output Parameters instances.  So at present, if implementers want to perform validation they will need to first define the parameters within the OperationDefinition and then also define those same parameters creating profiles on the Parameters resource.</p>\n<p>The concern raised on FHIR Infrastructure was whether  making this change is likely to make it too complex for implementers to feel comfortable defining their own operations.  This topic is to solicit feedback on the proposal.</p>",
        "id": 153902891,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1503274399
    },
    {
        "content": "<p>A set of graded examples would flatten the learning curve.</p>",
        "id": 153902893,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1503276220
    },
    {
        "content": "<p>Currently it is possible to hand edit a typical OperationDefinition but that would be a challenge if we used SD.  Here is an example of an OperationDefinition I created in XMLSpy:</p>",
        "id": 153902894,
        "sender_full_name": "Eric Haas",
        "timestamp": 1503277695
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span>    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n    &lt;OperationDefinition xmlns=&quot;http://hl7.org/fhir&quot;&gt;\n        &lt;id value=&quot;Appointment-hold&quot;/&gt;\n        &lt;url value=&quot;http://fhir.org/guides/argonaut-scheduling/OperationDefinition/Appointment-hold&quot;/&gt;\n        &lt;name value=&quot;Appointment Hold&quot;/&gt;\n        &lt;status value=&quot;draft&quot;/&gt;\n        &lt;kind value=&quot;operation&quot;/&gt;\n        &lt;date value=&quot;2017-08-09T11:36:05-07:00&quot;/&gt;\n        &lt;publisher value=&quot;Argonaut Project&quot;/&gt;\n        &lt;description value=&quot;Request for a hold on the selected proposed Appointment in order for the user to complete entering data for booking an appointment.  This operation precedes  the booking operation for an appointment and  follows the appointment availability operation ($find).  The server determines if the nominated appointment is still available (i.e., all the required actors and physical assets needed for the appointment are still available) . The length of the hold is defined by local business rules.&quot;/&gt;\n        &lt;code value=&quot;hold&quot;/&gt;\n        &lt;comment value=&quot;additional notes here&quot;/&gt;\n        &lt;resource value=&quot;Appointment&quot;/&gt;\n        &lt;system value=&quot;true&quot;/&gt;\n        &lt;type value=&quot;true&quot;/&gt;\n        &lt;instance value=&quot;false&quot;/&gt;\n        &lt;parameter&gt;\n            &lt;name value=&quot;appt-id&quot;/&gt;\n            &lt;use value=&quot;in&quot;/&gt;\n            &lt;min value=&quot;0&quot;/&gt;\n            &lt;max value=&quot;1&quot;/&gt;\n            &lt;documentation value=&quot;A resource id for one of proposed Appointments returned by a prior $find operation (e.g., Resource/1234).  References can be to an absolute URL, but servers only perform this operation on their own appointments.&quot;/&gt;\n            &lt;type value=&quot;uri&quot;/&gt;\n        &lt;/parameter&gt;\n        &lt;parameter&gt;\n            &lt;name value=&quot;return&quot;/&gt;\n            &lt;use value=&quot;out&quot;/&gt;\n            &lt;min value=&quot;0&quot;/&gt;\n            &lt;max value=&quot;1&quot;/&gt;\n            &lt;documentation value=&quot;An [Appointment Availability Bundle profile](StructureDefinition-avail-bundle.html)  of type `searchset` of requested held Appointment resource and may also contain an OperationOutcome with errors, warnings or information as a result of processing the operation.   The Appointment resource will have an updated `status` of &amp;quot;pending&amp;quot; if the hold is approved or  &amp;quot;cancelled&amp;quot; if the hold is rejected.&quot;/&gt;\n            &lt;type value=&quot;Bundle&quot;/&gt;\n                    &lt;profile&gt;\n                &lt;reference value=&quot;StructureDefinition/avail-bundle&quot;/&gt;\n            &lt;/profile&gt;\n        &lt;/parameter&gt;\n\n    &lt;/OperationDefinition&gt;\n</pre></div>",
        "id": 153902895,
        "sender_full_name": "Eric Haas",
        "timestamp": 1503277701
    },
    {
        "content": "<p>True, but you would then be able to use tools like Forge or Trifolia to define the parameters rather than needing to hand-edit that portion at all...</p>",
        "id": 153902897,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1503281616
    },
    {
        "content": "<p>I understand and I probably used the IG Build to generate this initially since I am lazy.... but I want to illustrate how simple it is now.   It would be nice to create an example using SD but I haven't thought it through to that level.</p>",
        "id": 153902898,
        "sender_full_name": "Eric Haas",
        "timestamp": 1503281857
    },
    {
        "content": "<p>StructureDefinition doesn't do everything that OperationDefinition.parameter does, and does a pile stuff that's not necessary. Feels very much like using a sledgehammer to crack a nut</p>",
        "id": 153902952,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1503298747
    },
    {
        "content": "<p>I agree with <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> We have a number of solutions using OperationDefinition. The simplicity of the parameters is very useful a StructureDefinitions seems to be excessive.</p>",
        "id": 153902971,
        "sender_full_name": "Richard Kavanagh",
        "timestamp": 1503315905
    },
    {
        "content": "<p>What does StructureDefinition do that OperationDefinition doesn't need?  We need invariants, length constraints, etc.  And we definitely need validation.  The only thing OperationDefinition does that StructureDefinition doesn't is define the URI query parameter data type - and that can easily be handled by an extension.  Note that we're not talking about removing OperationDefinition, just moving the parameter definition out of it.</p>",
        "id": 153903003,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1503330232
    }
]