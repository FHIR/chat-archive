[
    {
        "content": "<p>How can I set a fixed value of an element of an extension in a profile using that extension.<br>\nFor example I have an extension of type \"Coding\" and in a profile I am using that extension but I want to set a fixedUri for the system used in that coding. How can I do that? One option is to set it in the extension, but the challenge is that  it is not 1 fixex value for all the uses of that Extension.</p>",
        "id": 223649193,
        "sender_full_name": "Michael van der Zel",
        "timestamp": 1611326498
    },
    {
        "content": "<p>In the structureDefinition that uses the extension you should be able to use the fixed[x] or pattern[x] just like if you were making a fixed code for any other element.</p>",
        "id": 223650957,
        "sender_full_name": "ryan moehrke",
        "timestamp": 1611327244
    },
    {
        "content": "<p>To expand on <span class=\"user-mention\" data-user-id=\"237342\">@ryan moehrke</span>'s answer, here is an example (or two) of how to do this in FSH: <a href=\"https://fshschool.org/FSHOnline/#/share/399fxs6\">https://fshschool.org/FSHOnline/#/share/399fxs6</a></p>\n<p><em>NOTE: If you don't care about FSH, you can still click the \"Run\" button if you want to see what such a thing looks like in a StructureDefinition.</em></p>",
        "id": 223654791,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1611328876
    },
    {
        "content": "<p>Also, thanks for presenting the opportunity for me to use FSH Online's brand new <em>SHARE</em> feature for the first time in Zulip!</p>",
        "id": 223654883,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1611328913
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"237342\">ryan moehrke</span> <a href=\"#narrow/stream/179166-implementers/topic/FixedValue.20of.20an.20extension.20value/near/223650957\">said</a>:</p>\n<blockquote>\n<p>In the structureDefinition that uses the extension you should be able to use the fixed[x] or pattern[x] just like if you were making a fixed code for any other element.</p>\n</blockquote>\n<p>That doesnot work since in the structuredefinition the type is \"Extension\", so the fixed[x] is about setting a fixed value for that type. I want to set a fixed value for the value in the Extension.</p>",
        "id": 224159655,
        "sender_full_name": "Michael van der Zel",
        "timestamp": 1611741416
    },
    {
        "content": "<p>The extension reference in your profile is a slice.  Just walk into the slice and specify the value[x] element, then walk into the value[x]:sometype slice and assert your fixed value</p>",
        "id": 224195853,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1611760719
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>  Can you point me to an example. I tried this, but get errors on validation. Not existing path or wrong name and things like that. Shall try to reproduce.</p>",
        "id": 224260466,
        "sender_full_name": "Michael van der Zel",
        "timestamp": 1611788021
    },
    {
        "content": "<p>Your id ought to be <code>foo.extension:extensionSliceName.value[x]:valueSomeType</code> and would have a fixedSomeType value.  I don't actually have a full example I can copy from handy.  If you try the above and get an error, share what you're getting and I may be able to help further.</p>",
        "id": 224269371,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1611793805
    },
    {
        "content": "<p>use of a simple Coding type extension on Provenance.whoReference.extension</p>\n<div class=\"codehilite\"><pre><span></span><code>       {\n        &quot;id&quot;: &quot;Provenance..agent.whoReference.extension&quot;,\n        &quot;path&quot;: &quot;Provenance.agent.whoReference.extension&quot;,\n        &quot;sliceName&quot;: &quot;signatureMode&quot;,\n        &quot;type&quot;: [\n          {\n            &quot;code&quot;: &quot;Extension&quot;,\n            &quot;profile&quot;: &quot;http://example.com/fhir/StructureDefinition/signatureMode&quot;\n          }\n        ]\n      },\n      {\n        &quot;id&quot;: &quot;Provenance.agent.who[x].extension:signatureMode.value[x]:valueCoding.system&quot;,\n        &quot;path&quot;: &quot;Provenance.agent.who[x].extension.valueCoding.system&quot;,\n        &quot;sliceName&quot;: &quot;signatureMode&quot;,\n        &quot;fixedUri&quot;: &quot;http://example.com/Terminology/DefinedTerms&quot;\n      }\n</code></pre></div>\n<p>The extension itself \"works\" and created the expected result in an IG. <br>\nThe fixed value part I don't get to work.</p>\n<p>java validator output</p>\n<div class=\"codehilite\"><pre><span></span><code>*FAILURE*: 2 errors, 0 warnings, 0 notes\n  Error @ StructureDefinition.differential.element.where(path = &#39;Provenance.agent.who[x].extension:signatureMode.value[x]:valueCoding.system&#39;) : No match found in the generated snapshot: check that the path and definitions are legal in the differential (including order)\n  Error @ StructureDefinition : The profile http://example.com/fhir/StructureDefinition/ProgressNoteSignature has 1 element in the differential (id: Provenance.agent.who[x].extension:signatureMode.value[x]:valueCoding.system) that don&#39;t have a matching element in the snapshot: check that the path and definitions are legal in the differential (including order)\n</code></pre></div>",
        "id": 224320308,
        "sender_full_name": "Michael van der Zel",
        "timestamp": 1611837917
    },
    {
        "content": "<p>Your id needs to contain your slicename.  Also looks like it's got double-periods.  Should be \"Provenance.agent.who[x]:whoReference.extension:signatureMode<br>\nSecond one \"Provenance.agent.who[x]:whoReference.extension:signatureMode.value[x]:valueCoding.system\"</p>",
        "id": 224431681,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1611897195
    },
    {
        "content": "<p>And what are the associated paths with those id's?<br>\n#1: Provenance.agent.whoReference.extension<br>\n#2: Provenance.agent.whoReference.extension.valueCoding.system<br>\nI keep getting errors on no 2</p>\n<div class=\"codehilite\"><pre><span></span><code>*FAILURE*: 2 errors, 0 warnings, 0 notes\n  Error @ StructureDefinition.differential.element.where(path = &#39;Provenance.agent.who[x]:whoReference.extension:signatureMode.value[x]:valueCoding.system&#39;) : No match found in the generated snapshot: check that the path and definitions are legal in the differential (including order)\n  Error @ StructureDefinition : The profile http://example.com/fhir/StructureDefinition/ProgressNoteSignature has 1 element in the differential (id: Provenance.agent.who[x]:whoReference.extension:signatureMode.value[x]:valueCoding.system) that don&#39;t have a matching element in the snapshot: check that the path and definitions are legal in the differential (including order)\n</code></pre></div>",
        "id": 224482938,
        "sender_full_name": "Michael van der Zel",
        "timestamp": 1611932867
    },
    {
        "content": "<p>Paths should be Provenance.agent.who[x].extension and Provenance.agent.who[x].extension.value[x].system</p>",
        "id": 224539053,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1611957318
    },
    {
        "content": "<p>Still not working :-(</p>\n<div class=\"codehilite\"><pre><span></span><code>  Provenance.agent.who[x].extension : Extension[0..*] (slicing by url)\n  Provenance.agent.who[x].extension:signatureMode : Extension([CanonicalType[http://example.com/fhir/StructureDefinition/signatureMode]])[0..*] (slicename = signatureMode)\n  Provenance.agent.who[x].extension:signatureMode.id : string[0..1]\n  Provenance.agent.who[x].extension:signatureMode.extension : Extension[0..*] (slicing by url)\n  Provenance.agent.who[x].extension:signatureMode.url : uri[1..1]  fixed=uri\n  Provenance.agent.who[x].extension:signatureMode.value[x] : Coding[0..1] (slicing by $this)\n  Provenance.agent.who[x].extension:signatureMode.value[x]:valueCoding : Coding[0..1] (slicename = valueCoding)\n...\n  Error @ StructureDefinition.differential.element.where(path = &#39;Provenance.agent.who[x]:whoReference.extension:signatureMode.value[x]:valueCoding.system&#39;) : No match found in the generated snapshot: check that the path and definitions are legal in the differential (including order)\n  Error @ StructureDefinition : The profile http://example.com/fhir/StructureDefinition/ProgressNoteSignature has 1 element in the differential (id: Provenance.agent.who[x]:whoReference.extension:signatureMode.value[x]:valueCoding.system) that don&#39;t have a matching element in the snapshot: check that the path and definitions are legal in the differential (including order)\n</code></pre></div>",
        "id": 224549355,
        "sender_full_name": "Michael van der Zel",
        "timestamp": 1611962361
    },
    {
        "content": "<p>Don't know if it makes any difference, but I am doing this in FHIR version 3.0.2</p>",
        "id": 224549426,
        "sender_full_name": "Michael van der Zel",
        "timestamp": 1611962402
    },
    {
        "content": "<p>Are you using the most recent publisher/validator?  It's possible there's a snapshot generation error.  What you have looks right to me.  <span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span>, thoughts?</p>",
        "id": 224588403,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1612018016
    },
    {
        "content": "<p>Ah, away from my computer right now. I will look later today</p>",
        "id": 224589204,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1612019063
    },
    {
        "content": "<p>I have \"FHIR Validation tool Version 5.2.16 (Git# f815bc8fb8f0). Built 2021-01-14T22:39:23.297Z (15 days old)\" now, will update and run again.</p>",
        "id": 224701517,
        "sender_full_name": "Michael van der Zel",
        "timestamp": 1612171279
    },
    {
        "content": "<p>Same result for \"FHIR Validation tool Version 5.2.20 (Git# af05868a82bf). Built 2021-01-25T15:02:44.742Z (6 days old)\"</p>",
        "id": 224701711,
        "sender_full_name": "Michael van der Zel",
        "timestamp": 1612171440
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"248736\">Mark Iantorno</span> <a href=\"#narrow/stream/179166-implementers/topic/FixedValue.20of.20an.20extension.20value/near/224589204\">said</a>:</p>\n<blockquote>\n<p>Ah, away from my computer right now. I will look later today</p>\n</blockquote>\n<p>Sorry to keep bugging you. Hope you get a change to look at this issue. Thanks!</p>",
        "id": 226640285,
        "sender_full_name": "Michael van der Zel",
        "timestamp": 1613559284
    }
]