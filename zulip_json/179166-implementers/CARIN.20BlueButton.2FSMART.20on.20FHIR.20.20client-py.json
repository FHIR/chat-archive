[
    {
        "content": "<p>Hello, I built a CARIN CPCDS Reference Server and CARIN CPCDS Authorization Server  locally. I can make requests to the server-ri and authenticate via auth-server using oauth2 successfully. Now I am working on making the requests via a flask app within the smart on fhir client-py library. Should I be able to request an access token via the app, or would I need to pass the token to the app? Are there any available resources to aid me in getting this up and running? Thank you in advance!</p>\n<p>cc <span class=\"user-mention\" data-user-id=\"191660\">@Harold Solbrig</span></p>",
        "id": 193483772,
        "sender_full_name": "Stephen Whitney",
        "timestamp": 1586453735
    },
    {
        "content": "<p>I register the app URL as <a href=\"http://localhost:8000/fhir-app/\" title=\"http://localhost:8000/fhir-app/\">http://localhost:8000/fhir-app/</a> and receive an app_id and app_secret outside of the flask app. I then pass the following as the settings:</p>\n<p><code>smart_defaults = {\n    'app_id': '855471ae-ece0-41bb-88cb-de2cc967bb5f',\n    'app_secret': 'FiYefhrSv0wkDE1bx7vWBkhdsTsVenVeI9z9P',\n    'api_base': 'http://localhost:8080/cpcds-server/fhir',\n    'redirect_uri': 'http://localhost:8000/fhir-app/',\n}</code></p>\n<p>I then attempt to authorize at <a href=\"http://localhost:8000\" title=\"http://localhost:8000\">http://localhost:8000</a>. It prompts me to log in to the auth server. I log in with a registered user and get redirected to the redirect_uri (<a href=\"http://localhost:8000/fhir-app/\" title=\"http://localhost:8000/fhir-app/\">http://localhost:8000/fhir-app/</a>) and receive an authorization code in the URL. At that point I get an Authorization Error and the flow stops.</p>",
        "id": 193488640,
        "sender_full_name": "Stephen Whitney",
        "timestamp": 1586456021
    },
    {
        "content": "<p>I understand that this is the point in the flow where I'm getting stuck:</p>\n<p><a href=\"/user_uploads/10155/NMuWQqCuEEkzDdy7yjZb9Xu0/image.png\" title=\"image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/NMuWQqCuEEkzDdy7yjZb9Xu0/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/NMuWQqCuEEkzDdy7yjZb9Xu0/image.png\"></a></div>",
        "id": 193492942,
        "sender_full_name": "Stephen Whitney",
        "timestamp": 1586457965
    },
    {
        "content": "<p><a href=\"https://github.com/smart-on-fhir/client-py/blob/1f622d28d039ae7d60045595680b3a2aef66f473/fhirclient/auth.py#L231\" title=\"https://github.com/smart-on-fhir/client-py/blob/1f622d28d039ae7d60045595680b3a2aef66f473/fhirclient/auth.py#L231\">https://github.com/smart-on-fhir/client-py/blob/1f622d28d039ae7d60045595680b3a2aef66f473/fhirclient/auth.py#L231</a></p>\n<p>The line above in auth.py correctly parses the URL with code when I test:</p>\n<p><a href=\"/user_uploads/10155/2XnSNvO6bV420n9yV9O8BT6G/image.png\" title=\"image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/2XnSNvO6bV420n9yV9O8BT6G/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/2XnSNvO6bV420n9yV9O8BT6G/image.png\"></a></div>",
        "id": 193495581,
        "sender_full_name": "Stephen Whitney",
        "timestamp": 1586459254
    },
    {
        "content": "<p>I believe the issue might be that the app doesn't pass a basic Authorization header. I'll likely have to edit the code to handle.<br>\n<a href=\"/user_uploads/10155/OP4VUrcA9LZd6VFy6oLd9v0E/image.png\" title=\"image.png\">image.png</a> <br>\n<a href=\"/user_uploads/10155/KVW4RvFH_9daB0rS-DeWbhQN/image.png\" title=\"image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/OP4VUrcA9LZd6VFy6oLd9v0E/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/OP4VUrcA9LZd6VFy6oLd9v0E/image.png\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/10155/KVW4RvFH_9daB0rS-DeWbhQN/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/KVW4RvFH_9daB0rS-DeWbhQN/image.png\"></a></div>",
        "id": 193497531,
        "sender_full_name": "Stephen Whitney",
        "timestamp": 1586460129
    },
    {
        "content": "<p>perhaps you might ask in the <a class=\"stream\" data-stream-id=\"179170\" href=\"/#narrow/stream/179170-smart\">#smart</a> stream</p>",
        "id": 193505077,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1586464146
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> . I was successful in getting it to work!<br>\n<a href=\"/user_uploads/10155/tA522vObzoEZMsvZ8F2q4vWD/image.png\" title=\"image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/tA522vObzoEZMsvZ8F2q4vWD/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/tA522vObzoEZMsvZ8F2q4vWD/image.png\"></a></div>",
        "id": 193506636,
        "sender_full_name": "Stephen Whitney",
        "timestamp": 1586464911
    },
    {
        "content": "<p>Hello, I have question can we use third party authorization server like OKTA instead of CPCDS auth server?</p>",
        "id": 196829762,
        "sender_full_name": "Tushar",
        "timestamp": 1588885403
    }
]