[
    {
        "content": "<p>We need to do patient based searches against a local fhir server. It is recommended internally to use POST based searches to avoid exposure of PHI on the query string. <br>\nThe fhir server is placed behind a gateway that does the Authorization based on specific fhir resources and scopes. Gateway tries to be independent from payload and business logic ( i.e avoid looking into the body of the http payload)<br>\nHowever now the gateway is having difficulties to authorize call for search and Create to this endpoint beaches they are on the same subpath (i.e. /Observatoin)  and use the same http verb (POST).    <br>\nJust wondering whether there good approaches to address this from the community? <br>\nThank you.</p>",
        "id": 267912000,
        "sender_full_name": "Sanjaai",
        "timestamp": 1642099265
    },
    {
        "content": "<p>The ContentType header ought to be distinct...</p>",
        "id": 267913269,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1642099888
    },
    {
        "content": "<p>the POST search REST path is /Observation/_search, which is distinct from a POST to /Observation</p>",
        "id": 267913745,
        "sender_full_name": "Paul Church",
        "timestamp": 1642100090
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>  are you referring to  content type \"application/x-www-form-urlencoded\"   I believe it was stated as \"May\"  so I'm not sure whether I can rely on that always.</p>",
        "id": 267914379,
        "sender_full_name": "Sanjaai",
        "timestamp": 1642100399
    },
    {
        "content": "<p>Is that optional? I thought that Content-Type was required. Looking at the spec I don't see a clear MAY/SHALL word, in a quick read through.</p>",
        "id": 267914883,
        "sender_full_name": "Paul Church",
        "timestamp": 1642100567
    },
    {
        "content": "<p>There is a fairly thinly implied requirement in this statement</p>\n<blockquote>\n<p>For this RESTful search (see definition in RESTful API), the parameters are a series of name=[value] pairs encoded in the URL or as <strong>an application/x-www-form-urlencoded submission for a POST</strong></p>\n</blockquote>\n<p>I <em>think</em> the underlying HTTP requirements actually make it required</p>",
        "id": 267918690,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1642102305
    },
    {
        "content": "<p>It would certainly be wrong to have a ContentType that said the content was FHIR JSON or XML.</p>",
        "id": 267945540,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1642115711
    },
    {
        "content": "<p>Anyhow, Paul's point (which I'd forgotten) means that the distinguishing feature can be the URL.</p>",
        "id": 267945585,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1642115755
    },
    {
        "content": "<p>Thank you <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> <span class=\"user-mention\" data-user-id=\"197072\">@Paul Church</span> , i think I can use the _search subpath to differentiate. I misread it as optional initially. I verified with few public servers and seems to be mandatory with POST based searches</p>",
        "id": 267969327,
        "sender_full_name": "Sanjaai",
        "timestamp": 1642132258
    }
]