[
    {
        "content": "<p>In a structure Definition when defining an element are the following equivalent</p>\n<div class=\"codehilite\"><pre>        &lt;type&gt;\n            &lt;code value=&quot;Reference&quot;/&gt;\n            &lt;profile value=&quot;http://hl7.org/fhir/StructureDefinition/Patient&quot;/&gt;\n        &lt;/type&gt;\n        &lt;type&gt;\n            &lt;code value=&quot;Reference&quot;/&gt;\n            &lt;profile value=&quot;http://hl7.org/fhir/StructureDefinition/Practitioner&quot;/&gt;\n        &lt;/type&gt;\n        &lt;type&gt;\n            &lt;code value=&quot;Reference&quot;/&gt;\n            &lt;profile value=&quot;http://hl7.org/fhir/StructureDefinition/RelatedPerson&quot;/&gt;\n        &lt;/type&gt;\n        &lt;type&gt;\n            &lt;code value=&quot;Reference&quot;/&gt;\n            &lt;profile value=&quot;http://hl7.org/fhir/StructureDefinition/Device&quot;/&gt;\n        &lt;/type&gt;\n</pre></div>\n\n\n<p>and</p>\n<div class=\"codehilite\"><pre>        &lt;type&gt;\n            &lt;code value=&quot;Reference&quot;/&gt;\n            &lt;profile value=&quot;http://hl7.org/fhir/StructureDefinition/Patient&quot;/&gt;\n            &lt;profile value=&quot;http://hl7.org/fhir/StructureDefinition/Practitioner&quot;/&gt;\n            &lt;profile value=&quot;http://hl7.org/fhir/StructureDefinition/RelatedPerson&quot;/&gt;\n            &lt;profile value=&quot;http://hl7.org/fhir/StructureDefinition/Device&quot;/&gt;\n        &lt;/type&gt;\n</pre></div>",
        "id": 153813839,
        "sender_full_name": "Richard Kavanagh",
        "timestamp": 1456906379
    },
    {
        "content": "<p>I think the last example means the reference must conform to all profiles. And the first is a choice.</p>",
        "id": 153813840,
        "sender_full_name": "Marten Smits",
        "timestamp": 1456912245
    },
    {
        "content": "<p>Hi Richard, during the last WGM in Atlanta I  had a discussion with Grahame about the interpretation of multiple profiles. Multiple &lt;type&gt; elements express an \"OR\" relationship, i.e. the target resource should conform the (at least) one of the listed types. Support for multiple profiles on a single &lt;type&gt; element was originally intended to express an \"AND\" relationship, i.e. for a target resource to be valid it must conform to all the specified type profiles.<br>\nHowever multiple profiles may express conflicting constraints. In practice, this is (very) hard to compute. Also this introduces challenges for e.g. code generation and UI generation on profiles. Currently I don't know of any FHIR tools that actually provide support for multiple type profiles. Grahame told me that he does not intend to implement support for this. Forge supports multiple type profiles (press enter in the profile textbox to add another line), however Grahame and I agreed that we only consider the first profile for type checking, validation etc. So although Forge accepts additional (secondary) type profiles, they are ignored by the application logic.</p>",
        "id": 153813841,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1456920198
    },
    {
        "content": "<p>Thanks Michel - makes sense</p>",
        "id": 153813842,
        "sender_full_name": "Richard Kavanagh",
        "timestamp": 1456923615
    },
    {
        "content": "<p>I'm anticipating resources complying with multiple profiles -- in fact, I think the <code>Resource.meta.profile</code> data should be mandatory (I'll make a profile for that [joking]). In the US, I can easily see resources complying with multiple profiles -- both DAF and QICore for example. Or an Observation complying with DAF, QICore, and US Lab. If a resource specifies that it adheres to multiple profiles (<code>Resource.meta.profile</code> is <code>0..*</code>) then validation tooling should validate all of them. </p>",
        "id": 153813845,
        "sender_full_name": "Jason Walonoski",
        "timestamp": 1456925125
    },
    {
        "content": "<p>Jason: correct</p>",
        "id": 153813850,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1456926393
    },
    {
        "content": "<p>and that was why the committee added multiple profiles - sounded like a good idea at the time. but the committee that decided that did not include any of us who actually use this stuff, and none of us have done it. </p>",
        "id": 153813851,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1456926481
    },
    {
        "content": "<p>Not sure who \"the committee\" is, but I have validation code in Crucible that could easily check multiple profiles (just iterate on <code>Resource.meta.profile</code>). Doesn't seem that hard to me -- am I missing something?</p>",
        "id": 153813852,
        "sender_full_name": "Jason Walonoski",
        "timestamp": 1456926642
    },
    {
        "content": "<p>You're thinking about the wrong element. My validator will validate multiple profiles there too. The element in question is ElementDefinition.type.profile, and what the cardinality of that should be. </p>",
        "id": 153813853,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1456927388
    },
    {
        "content": "<p>and the committee was CGIT</p>",
        "id": 153813854,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1456927401
    }
]