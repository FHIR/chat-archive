[
    {
        "content": "<p>Looking at the patch connectathon details, it's really unclear to me what the correct mime type for the patch is. For JSON, I used application/json-patch+json. It would seem that we should use  application/patch-ops-error+xml for the XML patch, but it looks like the test scripts are using the standard fhir xml mime type?</p>",
        "id": 153824610,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1462432068
    },
    {
        "content": "<p>Definitely using the FHIR ones is wrong, since these aren't FHIR documents.</p>\n<p>Using the ones you proposed, with the normal <code>application/json</code> and <code>application/xml</code> being accepted by the server sounds like good behaviour to me. IMO the server should reject the <code>+fhir</code> variants.</p>",
        "id": 153824618,
        "sender_full_name": "James Agnew",
        "timestamp": 1462447352
    },
    {
        "content": "<p>both the json patch and xml patch define their own mime types. we should use those</p>",
        "id": 153824619,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1462447424
    },
    {
        "content": "<p>Those being <code>application/json-patch+json</code> and <code>application/patch-ops-error+xml</code> right? I am in agreement.</p>",
        "id": 153824620,
        "sender_full_name": "James Agnew",
        "timestamp": 1462447481
    },
    {
        "content": "<p>y</p>",
        "id": 153824621,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1462447719
    },
    {
        "content": "<p>sorry, I didn't parse what you wrote correctly</p>",
        "id": 153824622,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1462447740
    },
    {
        "content": "<p>finally getting to this: the patch specc says </p>",
        "id": 153824764,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1462518317
    },
    {
        "content": "<p>As the schema defined in this document does not declare any target namespace, the type definitions inherit the target namespace of the including schema.</p>",
        "id": 153824765,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1462518328
    },
    {
        "content": "<p>hence we need to define a namespace. I'd prefer not to use <a href=\"http://hl7.org/fhir\" target=\"_blank\" title=\"http://hl7.org/fhir\">http://hl7.org/fhir</a></p>",
        "id": 153824766,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1462518348
    },
    {
        "content": "<p>opinions?</p>",
        "id": 153824767,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1462518352
    },
    {
        "content": "<p>I'm not enjoying reading the XML Patch specification. In particular, the section \"Departures from XPath Requirements\" - does anyone seriously intend to write their own XPath processor in order to be conformant? </p>",
        "id": 153824768,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1462519154
    },
    {
        "content": "<p>and the sections about namespaces are horrifying....</p>",
        "id": 153824769,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1462519173
    },
    {
        "content": "<p>actually, after learning more about xml patch, I am using <a href=\"http://hl7.org/fhir\" target=\"_blank\" title=\"http://hl7.org/fhir\">http://hl7.org/fhir</a></p>",
        "id": 153824801,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1462546708
    },
    {
        "content": "<p>I found an open source implementation on github that I'm incorporating into my server - <a href=\"https://github.com/dnault/xml-patch\" target=\"_blank\" title=\"https://github.com/dnault/xml-patch\">https://github.com/dnault/xml-patch</a>.</p>",
        "id": 153824819,
        "sender_full_name": "Richard Ettema",
        "timestamp": 1462547529
    },
    {
        "content": "<p>Yes, I'm finding the namespace issue is a pain.</p>",
        "id": 153824821,
        "sender_full_name": "Richard Ettema",
        "timestamp": 1462547563
    },
    {
        "content": "<p>does your implementataion agree with my tests:</p>",
        "id": 153824827,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1462548132
    },
    {
        "content": "<p><a href=\"https://github.com/grahamegrieve/fhirserver/blob/master/tests/xml-patch-tests.xml\" target=\"_blank\" title=\"https://github.com/grahamegrieve/fhirserver/blob/master/tests/xml-patch-tests.xml\">https://github.com/grahamegrieve/fhirserver/blob/master/tests/xml-patch-tests.xml</a></p>",
        "id": 153824828,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1462548132
    },
    {
        "content": "<p>?</p>",
        "id": 153824829,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1462548134
    },
    {
        "content": "<p>I'll review and work on these as best I can during my travel to Montreal. I need to leave for the airport in about an hour.</p>",
        "id": 153824830,
        "sender_full_name": "Richard Ettema",
        "timestamp": 1462549362
    },
    {
        "content": "<p>ok. actually, I have all the xpaths wrong - I'll commit a fixed version shortly</p>",
        "id": 153824831,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1462549399
    },
    {
        "content": "<p>Ok. I was thinking I could also turn these into a TestScript set of tests. :)</p>",
        "id": 153824832,
        "sender_full_name": "Richard Ettema",
        "timestamp": 1462549462
    },
    {
        "content": "<p>well, perhaps. but the more you get your hammer to do, the messier the hammer gets</p>",
        "id": 153824833,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1462549852
    },
    {
        "content": "<p>updated</p>",
        "id": 153824834,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1462550117
    },
    {
        "content": "<p>Agreed. But, I love a good challenge.  And I thought I wouldn't have anything to do on the plane. Thanks!</p>",
        "id": 153824835,
        "sender_full_name": "Richard Ettema",
        "timestamp": 1462550370
    },
    {
        "content": "<p>ok. Patch works on my server. Here's an example patch:</p>\n<div class=\"codehilite\"><pre>&lt;patch xmlns=&quot;http://hl7.org/fhir&quot;&gt;\n  &lt;remove sel=&quot;f:Location/f:extension[@url=&#39;http://hl7.org/fhir/StructureDefinition/location-alias&#39;][1]&quot;/&gt;\n  &lt;replace sel=&quot;f:Location/f:status/@value&quot;&gt;inactive&lt;/replace&gt;\n&lt;/patch&gt;\n</pre></div>",
        "id": 153824881,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1462568900
    },
    {
        "content": "<p>I didn't say - to use patch on my server:</p>\n<div class=\"codehilite\"><pre>PATCH /open/[type]/[id]\nContent-Type: application/patch-ops-error+xml\n\n&lt;patch xmlns=&quot;http://hl7.org/fhir&quot;&gt;\n  &lt;op.....&gt;\n&lt;/patch&gt;\n</pre></div>",
        "id": 153824998,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1462627452
    },
    {
        "content": "<p>the json patch still works, of course</p>",
        "id": 153824999,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1462627461
    },
    {
        "content": "<p>I have both json and xml patch working on my server as well - <a href=\"http://wildfhir.aegis.net/fhir\" target=\"_blank\" title=\"http://wildfhir.aegis.net/fhir\">http://wildfhir.aegis.net/fhir</a>. For Content-Type you can specify standard json or xml media types as well as \"application/json-patch+json\" or \"application/xml-patch+xml\" (rfc7351).</p>",
        "id": 153825019,
        "sender_full_name": "Richard Ettema",
        "timestamp": 1462628886
    },
    {
        "content": "<p>PATCH [baseurl]/[type]/[id]<br>\nContent-Type: \"*json\" or \"*xml\"</p>",
        "id": 153825020,
        "sender_full_name": "Richard Ettema",
        "timestamp": 1462628899
    },
    {
        "content": "<p>The payload for xml patch can use &lt;diff&gt; or &lt;patch&gt; as the root element; e.g.</p>\n<p>&lt;diff&gt;<br>\n  &lt;op.....&gt;<br>\n&lt;/diff&gt;</p>\n<p>or </p>\n<p>&lt;patch&gt;<br>\n  &lt;op.....&gt;<br>\n&lt;/patch&gt;</p>",
        "id": 153825022,
        "sender_full_name": "Richard Ettema",
        "timestamp": 1462628910
    },
    {
        "content": "<p>why are we using different media types?</p>",
        "id": 153825023,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1462628948
    },
    {
        "content": "<p>I've changed my server to application/xml-patch+xml now</p>",
        "id": 153825029,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1462629105
    },
    {
        "content": "<p>The Cerner fhir server firewall fun has been resolved. JSON patch is now available at <a href=\"https://fhir.stagingcernerpowerchart.com/dstu2/a758f80e-aa74-4118-80aa-98cc75846c76/\" target=\"_blank\" title=\"https://fhir.stagingcernerpowerchart.com/dstu2/a758f80e-aa74-4118-80aa-98cc75846c76/\">https://fhir.stagingcernerpowerchart.com/dstu2/a758f80e-aa74-4118-80aa-98cc75846c76/</a> (and it's stu3 despite what the URL indicates...)</p>",
        "id": 153825137,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1462635803
    },
    {
        "content": "<p>working on xml patch</p>",
        "id": 153825138,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1462635813
    },
    {
        "content": "<p>Something for the PATCH interested to consider.  We have this working in our environment today.  <a href=\"https://github.com/chrisgrenz/FHIR-Primer/wiki/PATCH-with-Profiles\" target=\"_blank\" title=\"https://github.com/chrisgrenz/FHIR-Primer/wiki/PATCH-with-Profiles\">https://github.com/chrisgrenz/FHIR-Primer/wiki/PATCH-with-Profiles</a></p>",
        "id": 153825354,
        "sender_full_name": "Chris Grenz",
        "timestamp": 1462652889
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191351\">@Chris Grenz</span>  A few initial concerns with the profile approach:<br>\n1) I thought profiles couldn't \"remove\" required fields, how would a client send in an update when the required fields aren't being updated? (I could be wrong about this rule/restriction.<br>\n2) How will you version the profiles? EG: if one of the profiles adds a field, you'll end up in the same place as a normal modify where you can't tell if then intended to delete a field or aren't on the latest version of the profile<br>\n3) Sheer number of profiles to represent every combination of a modify a client application can do.</p>",
        "id": 153825527,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1462715938
    },
    {
        "content": "<p>Hi Jenni - for posterity and others my response!<br>\n1 - True.  This is an open discussion with FHIR-I.  We're using the SUBSETTED tag for profiles that remove a required or modifier element.  Otherwise, the profile is standard.<br>\n2 - Versioning of profiles is an issue...generally we're more concerned with the appearance of new extensions rather than changes to the base elements from HL7 which we handle via endpoint versioning.  In other words, and API is stable at the element level (since only HL7 can change the list of valid elements) by convention and stable at the slice level explicitly via the profile.<br>\n3 - Yep.  I guess we're expecting *many* profiles to be published (both internal to the enterprise and globally) so this is assumed in our design.</p>",
        "id": 153825560,
        "sender_full_name": "Chris Grenz",
        "timestamp": 1462717361
    },
    {
        "content": "<p>Graham - gathered a few medication statement resources off your server for the demo, but realized that the fields aren't up to date with the stu3 order. Known issue?</p>",
        "id": 153825645,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1462722878
    },
    {
        "content": "<p>literally just field order</p>",
        "id": 153825646,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1462722902
    },
    {
        "content": "<p>which server were you using? </p>",
        "id": 153825647,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1462722903
    },
    {
        "content": "<p>eg: <a href=\"http://fhir3.healthintersections.com.au/open/MedicationStatement/6\" target=\"_blank\" title=\"http://fhir3.healthintersections.com.au/open/MedicationStatement/6\">http://fhir3.healthintersections.com.au/open/MedicationStatement/6</a></p>",
        "id": 153825648,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1462722920
    },
    {
        "content": "<p>so the connectathon is based on the frozen version here: </p>",
        "id": 153825651,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1462723006
    },
    {
        "content": "<p>actually... my rest client may be reordering... which is a bit surprising...</p>",
        "id": 153825652,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1462723017
    },
    {
        "content": "<p><a href=\"http://hl7.org/fhir/2016May/index.html\" target=\"_blank\" title=\"http://hl7.org/fhir/2016May/index.html\">http://hl7.org/fhir/2016May/index.html</a></p>",
        "id": 153825653,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1462723022
    },
    {
        "content": "<p>I'll play around more</p>",
        "id": 153825654,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1462723026
    },
    {
        "content": "<p>you were looking at the current build</p>",
        "id": 153825655,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1462723035
    },
    {
        "content": "<p>+3</p>",
        "id": 153825734,
        "sender_full_name": "Sajjad Hussain",
        "timestamp": 1462729968
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191356\">@Jenni Syed</span>  is the typical use case for Patch to have a client update a single element in a single transaction, or do your client applications want to make changes to multiple elements in a single transaction? I have some thoughts on PATCH but I want to understand the use cases you're working with first, since my experience is theoretical, and not yet practical.</p>",
        "id": 153826481,
        "sender_full_name": "Sean Moore",
        "timestamp": 1462909553
    },
    {
        "content": "<p>one change - may be two actions - remove + add</p>",
        "id": 153826487,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1462909615
    },
    {
        "content": "<p>that would be most common, but there's no limit to only that </p>",
        "id": 153826488,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1462909624
    },
    {
        "content": "<p>It can be either. We have apps that are updating medicationStatement status only right now. We also have apps where the doctor may modify a Condition (comment, etc), and what is modified depends entirely on what the physician is trying to do. </p>",
        "id": 153826514,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1462909867
    },
    {
        "content": "<p>patch allows you to do either in a single request (with multiple operations included in that request)</p>",
        "id": 153826521,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1462909909
    }
]