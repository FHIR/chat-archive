[
    {
        "content": "<p>Hello Grahame,</p>\n<p>When I run the latest FHIR Build package, the error \"Invalid System URI: <a href=\"http://loinc.org\" target=\"_blank\" title=\"http://loinc.org\">http://loinc.org</a>\" is being reported for almost all of the compositions. </p>\n<p>I am using the latest FHIR Build package from <a href=\"https://github.com/HL7/ccda-on-fhir\" target=\"_blank\" title=\"https://github.com/HL7/ccda-on-fhir\">https://github.com/HL7/ccda-on-fhir</a>, and the  org.hl7.fhir.igpublisher.jar from <a href=\"http://build.fhir.org/org.hl7.fhir.igpublisher.jar\" target=\"_blank\" title=\"http://build.fhir.org/org.hl7.fhir.igpublisher.jar\">http://build.fhir.org/org.hl7.fhir.igpublisher.jar</a>.</p>\n<p>However, This directly contradicts the official FHIR documentation, which requires http not https:, as specified in <a href=\"http://hl7.org/fhir/terminologies-systems.html\" target=\"_blank\" title=\"http://hl7.org/fhir/terminologies-systems.html\">http://hl7.org/fhir/terminologies-systems.html</a>.</p>\n<p>Please let me know if you require more details or further clarification on the issue.</p>\n<p>Thank you,</p>\n<p>Meenaxi Gosai<br>\nQA Analyst/Engineer<br>\nLantana Consulting Group<br>\nt: 360.450.0545<br>\nMaple Ridgeâ€”BC PST</p>\n<p><a href=\"http://www.lantanagroup.com\" target=\"_blank\" title=\"http://www.lantanagroup.com\">www.lantanagroup.com</a><br>\nBlog | Twitter | LinkedIn</p>",
        "id": 153902718,
        "sender_full_name": "Max Nakamura",
        "timestamp": 1503001569
    },
    {
        "content": "<p>I think Meenaxi forgot to mention that if you change the URI to \"<a href=\"https://loinc.org\" target=\"_blank\" title=\"https://loinc.org\">https://loinc.org</a>\" in the sample files she is referring to the error goes away, but according to the terminologies-systems page the HTTPS URI is not the correct one.</p>",
        "id": 153902720,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1503002279
    },
    {
        "content": "<p>how do I reproduce this?</p>",
        "id": 153902731,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1503023370
    },
    {
        "content": "<p>Run the IG publisher against any IG that has example files  with &lt;system value=\"http://loinc.org\"/&gt; in them, then look at the resulting qa.html. Here are two examples:<br>\n<a href=\"http://build.fhir.org/ig/HL7/ccda-on-fhir/qa.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/ccda-on-fhir/qa.html\">http://build.fhir.org/ig/HL7/ccda-on-fhir/qa.html</a><br>\n<a href=\"http://build.fhir.org/ig/cqframework/qi-core/qa.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/cqframework/qi-core/qa.html\">http://build.fhir.org/ig/cqframework/qi-core/qa.html</a></p>",
        "id": 153902775,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1503073594
    },
    {
        "content": "<p>Search for \"Invalid System URI\" in those qa.html files to see the issue. Meenaxi also discovered that if you try resolving <a href=\"http://loinc.org\" target=\"_blank\" title=\"http://loinc.org\">http://loinc.org</a> now, it redirects to <a href=\"https://loinc.org\" target=\"_blank\" title=\"https://loinc.org\">https://loinc.org</a>, so that might be part of the issue.</p>",
        "id": 153902776,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1503073638
    },
    {
        "content": "<p>The redirect wouldn't be causing the issue.  I've had that error before when the issue was the code and not the system - so you might double-check your code and display name.  Alternatively, it might be a terminology server problem.</p>",
        "id": 153902782,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1503076134
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> The codes are valid LOINC codes, and as Meenaxi and I reported above, if you change the system in the example files to <a href=\"https://loinc.org\" target=\"_blank\" title=\"https://loinc.org\">https://loinc.org</a> the error goes away. Also, I ran this against an older version of the IG publisher jar file from July 19 and the error does not occur when using that version, so unless it is accessing a different terminology server I'm guessing the bug is in the IG publisher code itself.</p>",
        "id": 153902789,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1503080689
    },
    {
        "content": "<p>The error goes away because there isn't special code that looks for \"<a href=\"https://loinc.org\" target=\"_blank\" title=\"https://loinc.org\">https://loinc.org</a>\".  There is for \"<a href=\"http://loinc.org\" target=\"_blank\" title=\"http://loinc.org\">http://loinc.org</a>\".  (Your problem would go away if you changed to to \"<a href=\"http://foo.bar\" target=\"_blank\" title=\"http://foo.bar\">http://foo.bar</a>\" too :&gt;)</p>",
        "id": 153902792,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1503081814
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> Might have a clue. I did some debugging locally, and found that on line 629 of org.hl7.fhir.r4.validation.InstanceValidator  context.supportsSystem() is returning false for <a href=\"http://loinc.org\" target=\"_blank\" title=\"http://loinc.org\">http://loinc.org</a>. It returns true for <a href=\"http://snomed.info/sct\" target=\"_blank\" title=\"http://snomed.info/sct\">http://snomed.info/sct</a>, <a href=\"http://hl7.org/fhir/v3/ActClass\" target=\"_blank\" title=\"http://hl7.org/fhir/v3/ActClass\">http://hl7.org/fhir/v3/ActClass</a>, etc.</p>",
        "id": 153902800,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1503087291
    },
    {
        "content": "<p>Ok.  That sounds like there may be an issue with the terminology server</p>",
        "id": 153902824,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1503101904
    }
]