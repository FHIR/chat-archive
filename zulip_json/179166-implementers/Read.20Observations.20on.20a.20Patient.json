[
    {
        "content": "<p>Not sure how to use this API to get all observations on a given patient.  Tried this:</p>\n<div class=\"codehilite\"><pre><span></span>        var loc = new Uri(FhirClient.Endpoint + string.Format(&quot;/Observation?patient={0}&quot;, patId));\n        var obs = FhirClient.Read&lt;Observation&gt;(loc);\n</pre></div>\n\n\n<p>and i've tried this:<br>\n var obs = FhirClient.Read&lt;Observation&gt;(string.Format(\"patient={0}\",patId));</p>\n<p>both return this:<br>\n&lt;ExceptionMessage&gt;<br>\nMust be a FHIR REST url containing the resource type in its path Parameter name: location<br>\n&lt;/ExceptionMessage&gt;<br>\n&lt;ExceptionType&gt;System.ArgumentException&lt;/ExceptionType&gt;<br>\n&lt;StackTrace&gt;<br>\nat Hl7.Fhir.Rest.FhirClient.verifyResourceIdentity(Uri location, Boolean needId, Boolean needVid) at Hl7.Fhir.Rest.FhirClient.Read</p>\n<p>can someone point me in the right direction?</p>",
        "id": 153886573,
        "sender_full_name": "Chris Meeusen",
        "timestamp": 1493660604
    },
    {
        "content": "<p>getting this Additional information: Must be a FHIR REST url containing the resource type in its path<br>\nwhen i change the code to this:</p>\n<p>var obs = FhirClient.Read&lt;Observation&gt;(\"Observation\");</p>\n<p>I'm just trying to get a list of observations for a given patient.<br>\nThanks</p>",
        "id": 153886577,
        "sender_full_name": "Chris Meeusen",
        "timestamp": 1493661298
    },
    {
        "content": "<p>You should use FhirClient.Search&lt;Observation&gt;(string.Format(\"patient={0}\",patId));</p>",
        "id": 153886579,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1493662261
    },
    {
        "content": "<p>Just to be clear I have this query i can run in postman and it pulls back what i want:</p>\n<p><a href=\"https://api.hspconsortium.org/mysandboxidhere/data/Observation?patient=SMART-1288992\" target=\"_blank\" title=\"https://api.hspconsortium.org/mysandboxidhere/data/Observation?patient=SMART-1288992\">https://api.hspconsortium.org/mysandboxidhere/data/Observation?patient=SMART-1288992</a></p>\n<p>And all I'm trying to do is execute that with this api.  </p>\n<p>var obs =FhirClient.Search&lt;Observation&gt;(new string[] { string.Format(\"Observation?patient={0}\",patId) });</p>\n<p>returns this error message:<br>\nOperation was unsuccessful, and returned status NotAcceptable. OperationOutcome: Overall result: FAILURE (1 errors and 0 warnings) [ERROR] (no details)(further diagnostics: Endpoint returned a body with contentType 'text/html', while a valid FHIR xml/json body type was expected. Is this a FHIR endpoint?)</p>",
        "id": 153886580,
        "sender_full_name": "Chris Meeusen",
        "timestamp": 1493662666
    },
    {
        "content": "<p>Have you got authentication in your query? When I access that link directly, I got error: Full authentication is required to access this resourceunauthorized</p>",
        "id": 153886585,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1493664539
    },
    {
        "content": "<p>You're correct I had a flaw in my code, I wasn't setting the access_token.  <br>\n var obs =FhirClient.Search&lt;Observation&gt;(new string[] { string.Format(\"patient={0}\",patId) });<br>\nseems to work, thanks!</p>",
        "id": 153886586,
        "sender_full_name": "Chris Meeusen",
        "timestamp": 1493664641
    }
]