[
    {
        "content": "<p>Hi everyone,<br>\nAt the moment I'm working on creating a development setup with a HAPI fhir server using the \"hapiproject/hapi:latest\" docker image.<br>\nI'm trying to import the basic FHIR definitions and examples (version STU3) into this server using the hapi server CLI tool ( <a href=\"https://hapifhir.io/hapi-fhir/docs/tools/hapi_fhir_cli.html\">https://hapifhir.io/hapi-fhir/docs/tools/hapi_fhir_cli.html</a> ).<br>\nThe import of basic FHIR definitions seems to go just fine. However, the examples fail to be uploaded because they are referencing codes that are not currently in any of the valuesets on my server.</p>\n<p>Example:</p>\n<p>definition-importer_1  | 2021-05-17 09:00:02.100 [main] INFO  c.u.f.c.ExampleDataUploader Found example valueset-valueset-vision-eye-codes(vision-eye-codes).json - ValueSet - 1791 chars<br>\ndefinition-importer_1  | 2021-05-17 09:00:02.103 [main] INFO  c.u.f.c.ExampleDataUploader FAILED to validate example valueset-valueset-vision-eye-codes(vision-eye-codes).json - ValidationResult{messageCount=5, isSuccessful=false, description='ERROR - The value provided ('generated') is not in the value set <a href=\"http://hl7.org/fhir/ValueSet/narrative-status\">http://hl7.org/fhir/ValueSet/narrative-status</a> (<a href=\"http://hl7.org/fhir/ValueSet/narrative-status\">http://hl7.org/fhir/ValueSet/narrative-status</a>), and a code is required from this value set) (error message = Validation failed) - ValueSet.text.status'}<br>\ndefinition-importer_1  | 2021-05-17 09:00:02.103 [main] INFO  c.u.f.c.ExampleDataUploader Found example valueset-valueset-vision-product(vision-product).json - ValueSet - 1940 chars<br>\ndefinition-importer_1  | 2021-05-17 09:00:02.106 [main] INFO  c.u.f.c.ExampleDataUploader FAILED to validate example valueset-valueset-vision-product(vision-product).json - ValidationResult{messageCount=4, isSuccessful=false, description='ERROR - The value provided ('generated') is not in the value set <a href=\"http://hl7.org/fhir/ValueSet/narrative-status\">http://hl7.org/fhir/ValueSet/narrative-status</a> (<a href=\"http://hl7.org/fhir/ValueSet/narrative-status\">http://hl7.org/fhir/ValueSet/narrative-status</a>), and a code is required from this value set) (error message = Validation failed) - ValueSet.text.status'}</p>\n<p>Here it complains about the code \"generated\" not being in the narrative-status valueset. When I inspect my server this indeed appears to be the case. The narrative-status valueset is defined but it does not contain any values.</p>\n<p>When I inspect the official FHIR STU3 valueset definitions I see that narrative-status is defined twice.  I've included these pieces of the valuesets json in this message.</p>\n<p>Could anyone advise me on how to fix my setup? <a href=\"/user_uploads/10155/0gw6tIkITpEQItaFLFLABcua/valueset_full.json\">valueset_full.json</a> <a href=\"/user_uploads/10155/OptyyHhQoSJXX-THYFwgy-mV/valueset_empty.json\">valueset_empty.json</a></p>\n<p>Edit: I crossposted this in the <a href=\"#narrow/stream/179167-hapi/topic/Importing.20fhir.20definitions.20and.20examples.20into.20HAPI.20FHIR/near/239060389\">hapi channel</a> as well, which is perhaps the more appropriate channel.  I'm still new to this community.</p>",
        "id": 239060133,
        "sender_full_name": "Djura",
        "timestamp": 1621244595
    },
    {
        "content": "<p>I think I understand the difference now between the two entries of narrative-status. One is a valueset and one is a codesystem.<br>\nThe definitions of the codes are listed as codesystem. Then why do these examples fail to validate?<br>\nAnother example from the cli</p>\n<div class=\"codehilite\"><pre><span></span><code>2021-05-17 13:12:47.914 [main] [ExampleDataUploader.java:200] INFO  c.u.f.c.ExampleDataUploader Found example valueset-valueset-vision-product(vision-product).json - ValueSet - 1940 chars\n2021-05-17 13:12:47.917 [main] [ExampleDataUploader.java:204] INFO  c.u.f.c.ExampleDataUploader FAILED to validate example valueset-valueset-vision-product(vision-product).json - ValidationResult{messageCount=4, isSuccessful=false, description=&#39;ERROR - The value provided (&#39;generated&#39;) is not in the value set http://hl7.org/fhir/ValueSet/narrative-status (http://hl7.org/fhir/ValueSet/narrative-status), and a code is required from this value set) (error message = Validation failed) - ValueSet.text.status&#39;}\n</code></pre></div>",
        "id": 239070625,
        "sender_full_name": "Djura",
        "timestamp": 1621250305
    },
    {
        "content": "<p>please ask on the <a class=\"stream\" data-stream-id=\"179167\" href=\"/#narrow/stream/179167-hapi\">#hapi</a> stream</p>",
        "id": 239084323,
        "sender_full_name": "John Moehrke",
        "timestamp": 1621256622
    }
]