[
    {
        "content": "<p>The documentation of <code>Element.id</code> says: Unique id for the element within a resource (for internal references).</p>\n<p>In most StructureDefinitions, ElementDefinitions, which inherit <a href=\"http://Element.id\" target=\"_blank\" title=\"http://Element.id\">Element.id</a>, are repeated in snapshot and differential but have the same id. Is this a violation of the uniqueness constraint of <a href=\"http://Element.id\" target=\"_blank\" title=\"http://Element.id\">Element.id</a>?</p>",
        "id": 168788994,
        "sender_full_name": "Alexander Kiel",
        "timestamp": 1561286591
    },
    {
        "content": "<p>It's not because snapshot and differential are two views of the same thing.  However, it would be good if we made that clearer.  Can you submit a change request?</p>",
        "id": 168789170,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1561286908
    },
    {
        "content": "<p>Well, actually, it is. And thatâ€™s a problem</p>",
        "id": 168792511,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1561293154
    },
    {
        "content": "<p>Is that something that can even be changed at this point?.  We already have scoping rules around id in Bundle.  Can't we just officially do the same here?  Is there a usecase for the snapshot and differential ids being distinct?</p>",
        "id": 168800139,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1561308709
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> Good point. In a Bundle, Element ids would also not unique. Can you please point me to the scoping rules? I can't find them.</p>",
        "id": 168829154,
        "sender_full_name": "Alexander Kiel",
        "timestamp": 1561362442
    },
    {
        "content": "<p><a href=\"http://build.fhir.org/element.html#id\" target=\"_blank\" title=\"http://build.fhir.org/element.html#id\">http://build.fhir.org/element.html#id</a></p>",
        "id": 168838797,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1561373181
    },
    {
        "content": "<p>(Though I had to do some digging to find that :&gt;)</p>",
        "id": 168838805,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1561373195
    },
    {
        "content": "<p>Ok but then we have still the problem in StructureDefinition snapshot/differential. I think someone with more experience in FHIR has to decide whether we should fix this problem by using different ids in snapshot and differential or simply add this case to the scoping rules.</p>",
        "id": 168839098,
        "sender_full_name": "Alexander Kiel",
        "timestamp": 1561373595
    },
    {
        "content": "<p>hah 2 normative rules that disagree with each other....</p>",
        "id": 168839174,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1561373673
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>, can you think of any situations where we'd <em>need</em> a differential and snapshot element that corresponded to the same thing to have distinct ids?</p>",
        "id": 168839404,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1561373952
    },
    {
        "content": "<p>only because of this rule</p>",
        "id": 168840232,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1561374770
    },
    {
        "content": "<p>If we have conflicting rules, obviously we'll need to fix one of them.  If there's no need for distinct ids between snapshot and differential, the simplest is to add this as one of the official exceptions to unique ids - on the grounds that none of the current tools are expecting unique ids here - if they were, they'd have been blowing up all over.  (Ideally, we could reflect this as a technical correction in R4 too.)  Do you want me to capture a change request?</p>",
        "id": 168892658,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1561417380
    },
    {
        "content": "<p>Note: StructureDefinition invariants sdf-16 and sdf-17 constrain element id's to be unique within the differential component and within the snapshot component (separately):<br>\n<a href=\"http://build.fhir.org/structuredefinition.html#invs\" target=\"_blank\" title=\"http://build.fhir.org/structuredefinition.html#invs\">http://build.fhir.org/structuredefinition.html#invs</a></p>",
        "id": 170976216,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1563276447
    }
]