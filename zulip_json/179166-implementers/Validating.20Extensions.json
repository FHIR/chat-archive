[
    {
        "content": "<p>Hi, just wondering if something's wrong with my extension use as I seem to get validation successful message when not supplying what's actually defined in an extension. I have the following in my data that I'm validating <br>\n&lt;extension url=\"<a href=\"http://hl7.org/fhir/StructureDefinition/patient-birthTime\" target=\"_blank\" title=\"http://hl7.org/fhir/StructureDefinition/patient-birthTime\">http://hl7.org/fhir/StructureDefinition/patient-birthTime</a>\"&gt;<br>\n      &lt;valueBoolean value=\"false\"/&gt;<br>\n&lt;/extension&gt;</p>\n<p>As valueBoolean should be valueDateTime I'm trying to work out why it validates correctly, is there an error in what I'm trying to do somewhere or is this level of validation not actually processed (any value for a required extension is a good value)?</p>\n<p>Thanks</p>",
        "id": 153861877,
        "sender_full_name": "Stephen Lloyd",
        "timestamp": 1481125042
    },
    {
        "content": "<p>The only thing I can think of is that the validator isn't finding your extension definition - though if that were the case I'd expect an \"Information\" message letting you know that.</p>",
        "id": 153861880,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1481125953
    },
    {
        "content": "<p>Or the validator has a bug - which can happen.</p>",
        "id": 153861881,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1481125963
    },
    {
        "content": "<p>Thanks Lloyd, should the (what I believe is a core item and resolvable externally) \"<a href=\"http://hl7.org/fhir/StructureDefinition/patient-birthTime\" target=\"_blank\" title=\"http://hl7.org/fhir/StructureDefinition/patient-birthTime\">http://hl7.org/fhir/StructureDefinition/patient-birthTime</a> extension be located in the validation bundle when using command line jar  or do you happen to know if it resolves the extension via url? <br>\nI have seen the not found error if I don't upload the definition of \"<a href=\"http://hl7.org/fhir/StructureDefinition/patient-birthTime\" target=\"_blank\" title=\"http://hl7.org/fhir/StructureDefinition/patient-birthTime\">http://hl7.org/fhir/StructureDefinition/patient-birthTime</a> to our vanilla HAPI server (so it appears as if it's trying to resolve the extension locally when I try that).</p>",
        "id": 153861883,
        "sender_full_name": "Stephen Lloyd",
        "timestamp": 1481126376
    },
    {
        "content": "<p>The standard extensions *should* be in the validator pack</p>",
        "id": 153861884,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1481126428
    },
    {
        "content": "<p>Found it in the validation pack so that's why it doesn't complain from the command line. Hopefully I've just missed a critical piece of data in my profile somewhere as a bug in the validator will more difficult to track down.</p>",
        "id": 153861887,
        "sender_full_name": "Stephen Lloyd",
        "timestamp": 1481126816
    },
    {
        "content": "<p>how are you invoking the validator? </p>",
        "id": 153861940,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1481137704
    },
    {
        "content": "<p>java -jar org.hl7.fhir.validator.jar data\\simpleBasic.xml -defn validation.xml.zip -profile profiles\\SimpleBasic.xml</p>",
        "id": 153862213,
        "sender_full_name": "Stephen Lloyd",
        "timestamp": 1481191533
    },
    {
        "content": "<p>can you send me your example and your profile?</p>",
        "id": 153862266,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1481197502
    },
    {
        "content": "<p>Sent to your PM Grahame, thanks</p>",
        "id": 153862303,
        "sender_full_name": "Stephen Lloyd",
        "timestamp": 1481200930
    },
    {
        "content": "<p>so when I run this, I get: </p>",
        "id": 153862395,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1481225382
    },
    {
        "content": "<p>Error @ Basic.extension (line 15, col78) : Profile <a href=\"http://hl7.org/fhir/StructureDefinition/patient-birthTime\" target=\"_blank\" title=\"http://hl7.org/fhir/StructureDefinition/patient-birthTime\">http://hl7.org/fhir/StructureDefinition/patient-birthTime</a>, Element 'Basic.extension.valueDateTime': minimum required = 1, but only found 0</p>",
        "id": 153862396,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1481225396
    },
    {
        "content": "<p>improved the validator so that now you also get:</p>",
        "id": 153862444,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1481227301
    },
    {
        "content": "<p>Error @ Basic.extension[url='<a href=\"http://hl7.org/fhir/StructureDefinition/patient-birthTime']\" target=\"_blank\" title=\"http://hl7.org/fhir/StructureDefinition/patient-birthTime']\">http://hl7.org/fhir/StructureDefinition/patient-birthTime']</a> (line 15, col78) : The Extension '<a href=\"http://hl7.org/fhir/StructureDefinition/patient-birthTime\" target=\"_blank\" title=\"http://hl7.org/fhir/StructureDefinition/patient-birthTime\">http://hl7.org/fhir/StructureDefinition/patient-birthTime</a>' definition allows for the types [dateTime] but found type integer</p>",
        "id": 153862445,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1481227313
    },
    {
        "content": "<p>That makes it even worse, I get 0 errors. I was hoping for a missing tag in my example or something :S<br>\nThe only other thing I can think of is that I'm testing it from the command line on a Windows development machine, I'll try it on a Linux VM to see if there is any difference (it will be running on linux eventually anyway).<br>\nThanks for taking the time to give it a test, much appreciated.</p>",
        "id": 153862446,
        "sender_full_name": "Stephen Lloyd",
        "timestamp": 1481228105
    },
    {
        "content": "<p>Testing on ubuntu following the online instructions here - <a href=\"https://www.hl7.org/fhir/validation.html#jar\" target=\"_blank\" title=\"https://www.hl7.org/fhir/validation.html#jar\">https://www.hl7.org/fhir/validation.html#jar</a> - with the files I sent give the same \"All Ok\" or \"success\" messages. Something's not right somewhere as I get the same success message on linux &amp; windows and it doesn't complain about the integer data type as it does for you.</p>",
        "id": 153862488,
        "sender_full_name": "Stephen Lloyd",
        "timestamp": 1481232945
    },
    {
        "content": "<p>it can't have made it worse because I haven't committed it yet</p>",
        "id": 153862489,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1481233016
    },
    {
        "content": "<p>Sorry, I assumed the first section of your response was as it stands currently. Which seems to suggest it does complain for you.</p>",
        "id": 153862490,
        "sender_full_name": "Stephen Lloyd",
        "timestamp": 1481233100
    },
    {
        "content": "<p>Did you get the Error @ Basic.extension (line 15, col78) : Profile <a href=\"http://hl7.org/fhir/StructureDefinition/patient-birthTime\" target=\"_blank\" title=\"http://hl7.org/fhir/StructureDefinition/patient-birthTime\">http://hl7.org/fhir/StructureDefinition/patient-birthTime</a>, Element 'Basic.extension.valueDateTime': minimum required = 1, but only found 0 - before your new changes?</p>",
        "id": 153862492,
        "sender_full_name": "Stephen Lloyd",
        "timestamp": 1481233241
    },
    {
        "content": "<p>can you try with this batch file then:</p>",
        "id": 153862493,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1481233256
    },
    {
        "content": "<div class=\"codehilite\"><pre>@ECHO OFF\n\n ECHO get the validator and unzip it \n REM c:\\tools\\wget\\bin\\wget http://build.fhir.org/validator.zip\n REM &quot;C:\\Program Files\\7-Zip\\7z.exe&quot; x validator.zip\n\n ECHO Get the validation source file (dictionary)\n REM c:\\tools\\wget\\bin\\wget http://build.fhir.org/igpack.zip\n\n java -jar org.hl7.fhir.validator.jar simpleBasicData.xml -defn igpack.zip \n\n ECHO Press Any Key to Close\n pause\n</pre></div>",
        "id": 153862494,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1481233317
    },
    {
        "content": "<p>you'll have to replace the paths with your paths, and/or use other similar tools for wget and 7z</p>",
        "id": 153862495,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1481233348
    },
    {
        "content": "<p>I'm trying to log back into my work's computer, will try if it ever lets me back in sorry.</p>",
        "id": 153862497,
        "sender_full_name": "Stephen Lloyd",
        "timestamp": 1481233399
    },
    {
        "content": "<p>remote back in rather</p>",
        "id": 153862498,
        "sender_full_name": "Stephen Lloyd",
        "timestamp": 1481233415
    },
    {
        "content": "<p>That's worked Grahame thanks, can I use this as before with specified custom profiles or do I need to wait for an official validator update?</p>\n<p>Error returned:<br>\n*FAILURE* validating simpleBasicData.xml:  error:1 warn:0 info:1<br>\n  Error @ Basic.extension (line 14, col78) : Profile <a href=\"http://hl7.org/fhir/StructureDefinition/patient-birthTime\" target=\"_blank\" title=\"http://hl7.org/fhir/StructureDefinition/patient-birthTime\">http://hl7.org/fhir/StructureDefinition/patient-birthTime</a>, Element 'Basic.extension.valueDateTime': minimum required = 1, but only found 0<br>\n  Information @ Basic.extension.valueInteger (line 15, col31) : Could not verify slice for profile <a href=\"http://hl7.org/fhir/StructureDefinition/patient-birthTime\" target=\"_blank\" title=\"http://hl7.org/fhir/StructureDefinition/patient-birthTime\">http://hl7.org/fhir/StructureDefinition/patient-birthTime</a></p>\n<p>All I need at the moment is the ability to identify errors such as this whilst we are converting data sets to FHIR even if our vanilla HAPI server doesn't raise it as an issue at the moment.</p>\n<p>Thanks.</p>",
        "id": 153862520,
        "sender_full_name": "Stephen Lloyd",
        "timestamp": 1481237618
    },
    {
        "content": "<p>With custom extensions too actually.</p>",
        "id": 153862521,
        "sender_full_name": "Stephen Lloyd",
        "timestamp": 1481237798
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> Just noticed this \"That makes it even worse, I get 0 errors\" what I meant was \"That makes the situation worse as I currently get 0 errors whilst you get one in the validator's current state\". Sorry for not explaining myself properly :)</p>",
        "id": 153862660,
        "sender_full_name": "Stephen Lloyd",
        "timestamp": 1481275884
    }
]