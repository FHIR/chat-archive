[
    {
        "content": "<p>Okay..Do we have a unit test doc which contains some test cases for a Patient record json/xml ?</p>",
        "id": 159646214,
        "sender_full_name": "vineet gandhi",
        "timestamp": 1551383678
    },
    {
        "content": "<p>With a purpose of testing what?<br>\nWe don't have tests that check schema validation because we're pretty confident about how that works.</p>",
        "id": 159646618,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1551383915
    },
    {
        "content": "<blockquote>\n<p>With a purpose of testing what?<br>\nWe don't have tests that check schema validation because we're pretty confident about how that works.</p>\n</blockquote>\n<p>Let me clear my requirement first.<br>\nI have FHIR patient json coming like below :<br>\n<a href=\"https://www.hl7.org/fhir/patient-example-f001-pieter.json.html\" target=\"_blank\" title=\"https://www.hl7.org/fhir/patient-example-f001-pieter.json.html\">https://www.hl7.org/fhir/patient-example-f001-pieter.json.html</a></p>\n<p>Now I wanted to validate the record. So I am using SchemaBaseValidation module which intern uses fhir-single.xsd.<br>\nQuestion :<br>\n1. What are some possible rules in xsd? I found two like max length of \"Id\" can't me more then 64 and Gender can't be any string.<br>\n2. Sample java code of using schema validation in java.(Junits can be helpful).<br>\n3. We have like 50 threads accessing parallel the below code <br>\n<code>                FhirValidator validator = context.newValidator();\n                 IValidatorModule module1 = new SchemaBaseValidator(context);\n                 validator.registerValidatorModule(module1);\n                 ValidationResult result = validator.validateWithResult(value);\n</code></p>\n<p>Is there a way we can improve the throughput?. Currently on average it takes around 900 ms per record which is expensive for our requirement</p>",
        "id": 159647487,
        "sender_full_name": "vineet gandhi",
        "timestamp": 1551384472
    },
    {
        "content": "<p>1. You can read through the schema to see all of the rules, so it's not clear why you're asking for possible rules here<br>\n2. There's nothing specific about schema validation to FHIR - you should be able to find sample code for doing schema validation with Java with a Google search or on Stack Overflow.  If you want, you can dig into the validator code on the HAPI FHIR reference implementation<br>\n3. You may want to write your own thread-safe validator that loads the schema into memory once and then just parses and reads the XML.  That said, there's a limit to how fast schema validation can be</p>",
        "id": 159651483,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1551387455
    },
    {
        "content": "<p>why don't you just use on the normal FHIR validators that is much more effective than the schema validator?</p>",
        "id": 159704240,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1551440692
    },
    {
        "content": "<p>Can u explain more?What is a normal validator.</p>",
        "id": 159707376,
        "sender_full_name": "vineet gandhi",
        "timestamp": 1551443137
    },
    {
        "content": "<p>you can start by  reading about it here:  <a href=\"http://build.fhir.org/validation.html\" target=\"_blank\" title=\"http://build.fhir.org/validation.html\">http://build.fhir.org/validation.html</a></p>",
        "id": 159718015,
        "sender_full_name": "Eric Haas",
        "timestamp": 1551450447
    },
    {
        "content": "<p>The \"normal validator\" may not address his performance issue.</p>",
        "id": 159734603,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1551463454
    },
    {
        "content": "<p>there's no hint in the sample code for me as to whether we're talking java or C#. But 900ms is about what I'd expect from schema validation</p>",
        "id": 159738418,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1551466043
    }
]