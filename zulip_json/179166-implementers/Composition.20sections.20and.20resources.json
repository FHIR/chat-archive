[
    {
        "content": "<p>Is there a way to properly model a document (using the Composition resource) with a section that has text, a questionnaire resource, and then more text? This would be analogous to a document with a section that has some narrative text, a questionnaire, and then some more text. Is this possible? This is as close as I've been able to get, but this only allows text at the \"top\":</p>\n<div class=\"codehilite\"><pre><span></span>{\n  &quot;resourceType&quot;: &quot;Bundle&quot;,\n  &quot;type&quot;: &quot;document&quot;,\n  &quot;entry&quot;: [\n    {\n      &quot;resource&quot;: {\n        &quot;resourceType&quot;: &quot;Composition&quot;,\n        &quot;text&quot;: {\n          &quot;status&quot;: &quot;generated&quot;,\n          &quot;div&quot;: &quot;&lt;div xmlns=&#39;http://www.w3.org/1999/xhtml&#39;&gt;&lt;a name=&#39;mm&#39;/&gt;&lt;/div&gt;&quot;\n        },\n        &quot;id&quot;: &quot;cf-1577800395586&quot;,\n        &quot;section&quot;: [\n          {\n            &quot;title&quot;: &quot;Section 1&quot;,\n            &quot;text&quot;: {\n              &quot;status&quot;: &quot;additional&quot;,\n              &quot;div&quot;: &quot;&lt;div xmlns=&#39;http://www.w3.org/1999/xhtml&#39;&gt;&lt;h2 class=\\&quot;md\\&quot;  id=\\&quot;teststuffhere\\&quot;&gt;Test Stuff here&lt;/h2&gt;\\n&lt;p&gt;Paragraph HTML.&lt;/p&gt;&lt;/div&gt;&quot;\n            },\n            &quot;entry&quot;: [\n              {\n                &quot;reference&quot;: &quot;Questionnaire/cf-1577800630025&quot;\n              }\n            ],\n            &quot;code&quot;: {\n              &quot;coding&quot;: [\n                {\n                  &quot;system&quot;: &quot;http://loinc.org&quot;,\n                  &quot;code&quot;: &quot;18776-5&quot;,\n                  &quot;display&quot;: &quot;Plan of care note&quot;\n                }\n              ]\n            }\n          }\n        ]\n      }\n    },\n    {\n      &quot;resource&quot;: {\n        &quot;resourceType&quot;: &quot;Questionnaire&quot;,\n        &quot;text&quot;: {\n          &quot;status&quot;: &quot;generated&quot;,\n          &quot;div&quot;: &quot;&lt;div xmlns=&#39;http://www.w3.org/1999/xhtml&#39;&gt;Family Related Questions&lt;a name=&#39;mm&#39;/&gt;&lt;/div&gt;&quot;\n        },\n        &quot;id&quot;: &quot;cf-1577800630025&quot;\n      }\n    }\n  ],\n  &quot;id&quot;: &quot;cf-1577800382507&quot;\n}\n</pre></div>",
        "id": 184545642,
        "sender_full_name": "Matthew Koch",
        "timestamp": 1577801115
    },
    {
        "content": "<blockquote>\n<p>a section that has text, a questionnaire resource, and then more text? This would be analogous to a document with a section that has some narrative text, a questionnaire, and then some more text. </p>\n</blockquote>\n<p>is \"text\" fixed text? Is it plain text, markdown...?</p>",
        "id": 184546359,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1577802203
    },
    {
        "content": "<p>if it's fixed text (like a standard form header), perhaps Binary would be an option.</p>",
        "id": 184546497,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1577802393
    },
    {
        "content": "<p>In our case it is HTML, authored by a staff member. When you say Binary, does that mean we'd just add additional Binary resources?</p>",
        "id": 184547949,
        "sender_full_name": "Matthew Koch",
        "timestamp": 1577804402
    },
    {
        "content": "<p>Yes, resources of type Binary</p>",
        "id": 184548728,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1577805323
    },
    {
        "content": "<p>Neat. I can look into that, although the Binary type indicates you have to Base64 encode the content...</p>",
        "id": 184548751,
        "sender_full_name": "Matthew Koch",
        "timestamp": 1577805360
    },
    {
        "content": "<p>yeah... I am not sure if there is a resource like Annotation or something.. That could also be useful, but I didn't find it so I presume we don't have it.</p>",
        "id": 184548844,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1577805427
    },
    {
        "content": "<p>It might not be so bad to have to encode the content, the client would just need to have to unpack it/decode it once received.</p>",
        "id": 184548869,
        "sender_full_name": "Matthew Koch",
        "timestamp": 1577805478
    },
    {
        "content": "<p>Should be easy to decode in any language. Perhaps I should have challenged a bit the requirement just to make sure the scope is clear to me: do you really need the text to be sent as an additional resource? I presume you considered that, but doesn't hurt to check the source for your requirements.</p>",
        "id": 184549106,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1577805770
    },
    {
        "content": "<p>I don't think we need the text as an additional resource, it's more about the fact that when looking at our existing document structures, there are plenty with clearly defined \"sections\" that have text interspersed with other content like images and questionnaires. To me, it makes sense to fully qualify the questionnaires and possibly the images, but I don't see a clean way to then allow for more text \"in between.\" - does this make sense?</p>",
        "id": 184549261,
        "sender_full_name": "Matthew Koch",
        "timestamp": 1577805967
    },
    {
        "content": "<p>Here's an updated JSON snippet, including a questionnaire and a binary resource for more textual content, base64 encoded. This seems like it might work:</p>\n<div class=\"codehilite\"><pre><span></span>{\n  &quot;resourceType&quot;: &quot;Bundle&quot;,\n  &quot;id&quot;: &quot;cf-1577800382507&quot;,\n  &quot;type&quot;: &quot;document&quot;,\n  &quot;entry&quot;: [\n    {\n      &quot;resource&quot;: {\n        &quot;resourceType&quot;: &quot;Composition&quot;,\n        &quot;text&quot;: {\n          &quot;status&quot;: &quot;generated&quot;,\n          &quot;div&quot;: &quot;&lt;div xmlns=&#39;http://www.w3.org/1999/xhtml&#39;&gt;&lt;a name=&#39;mm&#39;/&gt;&lt;/div&gt;&quot;\n        },\n        &quot;id&quot;: &quot;cf-1577800395586&quot;,\n        &quot;section&quot;: [\n          {\n            &quot;title&quot;: &quot;Section 1&quot;,\n            &quot;text&quot;: {\n              &quot;status&quot;: &quot;additional&quot;,\n              &quot;div&quot;: &quot;&lt;div xmlns=&#39;http://www.w3.org/1999/xhtml&#39;&gt;&lt;h2 class=\\&quot;md\\&quot;  id=\\&quot;teststuffhere\\&quot;&gt;Test Stuff here&lt;/h2&gt;\\n&lt;p&gt;Paragraph HTML.&lt;/p&gt;&lt;/div&gt;&quot;\n            },\n            &quot;entry&quot;: [\n              {\n                &quot;reference&quot;: &quot;Questionnaire/cf-1577800630025&quot;\n              },\n              {\n                &quot;reference&quot;: &quot;Binary/cf-1577804877200&quot;\n              }\n            ],\n            &quot;code&quot;: {\n              &quot;coding&quot;: [\n                {\n                  &quot;system&quot;: &quot;http://loinc.org&quot;,\n                  &quot;code&quot;: &quot;18776-5&quot;,\n                  &quot;display&quot;: &quot;Plan of care note&quot;\n                }\n              ]\n            }\n          }\n        ]\n      }\n    },\n    {\n      &quot;resource&quot;: {\n        &quot;resourceType&quot;: &quot;Binary&quot;,\n        &quot;text&quot;: {\n          &quot;status&quot;: &quot;generated&quot;,\n          &quot;div&quot;: &quot;&lt;div xmlns=&#39;http://www.w3.org/1999/xhtml&#39;&gt;More text goes here&lt;a name=&#39;mm&#39;/&gt;&lt;/div&gt;&quot;\n        },\n        &quot;contentType&quot;: &quot;text/html&quot;,\n        &quot;data&quot;: &quot;KJBNSFKJ8398y238djnjdfi9&quot;,\n        &quot;id&quot;: &quot;cf-1577804877200&quot;\n      }\n    },\n    {\n      &quot;resource&quot;: {\n        &quot;resourceType&quot;: &quot;Questionnaire&quot;,\n        &quot;text&quot;: {\n          &quot;status&quot;: &quot;generated&quot;,\n          &quot;div&quot;: &quot;&lt;div xmlns=&#39;http://www.w3.org/1999/xhtml&#39;&gt;Family Related Questions&lt;a name=&#39;mm&#39;/&gt;&lt;/div&gt;&quot;\n        },\n        &quot;id&quot;: &quot;cf-1577800630025&quot;,\n        &quot;title&quot;: &quot;Family Information&quot;,\n        &quot;version&quot;: &quot;1&quot;\n      }\n    }\n  ]\n}\n</pre></div>",
        "id": 184550527,
        "sender_full_name": "Matthew Koch",
        "timestamp": 1577807731
    },
    {
        "content": "<p>note that although the binary content within the Binary resource must be base64 encoded... when one does a GET on the Binary, the http negotiate is used such that if the http negotiate allows the native mime-type then the native mime-type will be returned in the http response. Thus Binary requirement to base64 encode is only a burden when forcing FHIR mime-types.</p>",
        "id": 184561230,
        "sender_full_name": "John Moehrke",
        "timestamp": 1577820129
    },
    {
        "content": "<p>or when accessing it as a bundle. but you have to escape or base64 it either way... I think it's not that much different</p>",
        "id": 184561267,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1577820231
    },
    {
        "content": "<p>Thanks all. <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> does this seem like it would work, given the snippet here?</p>",
        "id": 184603763,
        "sender_full_name": "Matthew Koch",
        "timestamp": 1577895158
    },
    {
        "content": "<p>yes</p>",
        "id": 184610015,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1577906486
    },
    {
        "content": "<p>Rendering of a document will render the narrative for the section.  If you want to have a rendering of certain text, then the questionnaire response, then additional text, you'll have to go with sub-sections.</p>",
        "id": 184751662,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1578072729
    }
]