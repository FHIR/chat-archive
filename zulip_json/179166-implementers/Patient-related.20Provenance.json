[
    {
        "content": "<p>A project needs to track who changed clinical data about a patient (not the Patient resource). Like updating an ObservationX for a Patient1.<br>\nFrom the Provenance resource, I see the Patient could be mentioned as a Target, but the definition of the Target seems to contradict this, since the Patient has not changed, it was the Observation that changed.</p>",
        "id": 274092702,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1646380800
    },
    {
        "content": "<p>has this been considered?</p>",
        "id": 274093061,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1646380864
    },
    {
        "content": "<p>From the structure of the resource, I would put the Patient as an entity in the Provenance resource, but this would not be aligned with the search parameter that exists for patient.</p>",
        "id": 274093172,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1646380938
    },
    {
        "content": "<p>Provenance is about the data that was created/changed. It is not about the patient.</p>",
        "id": 274127786,
        "sender_full_name": "John Moehrke",
        "timestamp": 1646400517
    },
    {
        "content": "<p>When the Patient is the one changing the data, then the Patient is the Provenance.agent</p>",
        "id": 274127900,
        "sender_full_name": "John Moehrke",
        "timestamp": 1646400573
    },
    {
        "content": "<p>When the Patient is not involved in the changing of  the data, then the Patient is not mentioned anywhere in the Provenance resource</p>",
        "id": 274128003,
        "sender_full_name": "John Moehrke",
        "timestamp": 1646400606
    },
    {
        "content": "<p>Ah, so you are mentioning that in Provenance, the patient search parameter is defined as</p>\n<div class=\"codehilite\"><pre><span></span><code>patient reference   Target Reference(s) (usually version specific)  Provenance.target.where(resolve() is Patient)\n(Any)\n</code></pre></div>\n<p>That is very odd indeed. I would not have expected at patient search parameter at all.</p>",
        "id": 274128365,
        "sender_full_name": "John Moehrke",
        "timestamp": 1646400714
    },
    {
        "content": "<p>Or would have expected it to be more like AuditEvent patient search parameter that looks broader.</p>",
        "id": 274128459,
        "sender_full_name": "John Moehrke",
        "timestamp": 1646400749
    },
    {
        "content": "<p>This noted... We approved a CR this week to add a Provenance.patient (and AuditEvent.patient) that are to be filled when there is a patient known to be an agent, entity, or subject of the data in the activity (entity-&gt;patient). So this search parameter will change to that element.</p>",
        "id": 274128585,
        "sender_full_name": "John Moehrke",
        "timestamp": 1646400835
    },
    {
        "content": "<p>Provenance should <em>always</em> have an explicit reference to the Patient if the <a href=\"http://Provenance.target\">Provenance.target</a> is part of the Patient compartment.  That's essential to access control.  I thought we'd agreed to do that in R5 <span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span>?</p>",
        "id": 274139359,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1646405592
    },
    {
        "content": "<p>no. we did not agree to that</p>",
        "id": 274139976,
        "sender_full_name": "John Moehrke",
        "timestamp": 1646405844
    },
    {
        "content": "<p>but we did this week agree to add a .patient</p>",
        "id": 274140022,
        "sender_full_name": "John Moehrke",
        "timestamp": 1646405861
    },
    {
        "content": "<p>Sure.. Thank you for your update.</p>",
        "id": 274140468,
        "sender_full_name": "Sukanta Barai",
        "timestamp": 1646406010
    },
    {
        "content": "<p>Isn't that what .patient would do?</p>",
        "id": 274140902,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1646406112
    },
    {
        "content": "<p>Certainly I would expect there to be a rule mandating it for Provenance that points to records that are tied to a single Patient.</p>",
        "id": 274141014,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1646406145
    },
    {
        "content": "<p>the .patient would enable compartment.. yes. but it would be distinct from <a href=\"http://Provenance.target\">Provenance.target</a> (which is ONLY the changed resources), and Provenance.agent (which is all the agents involved), and Provenance.entity (which is the entities directly used in the activity).</p>",
        "id": 274141102,
        "sender_full_name": "John Moehrke",
        "timestamp": 1646406192
    },
    {
        "content": "<p>yes, that is the idea</p>",
        "id": 274141152,
        "sender_full_name": "John Moehrke",
        "timestamp": 1646406209
    },
    {
        "content": "<p>Ill try to get that into the current build today. we just approved the CR on monday</p>",
        "id": 274141288,
        "sender_full_name": "John Moehrke",
        "timestamp": 1646406246
    },
    {
        "content": "<p>And if the provenance targets many resources and those resources cross multiple patients, how does the ,patient reference reference THE patient? Are we now saying that provenance cannot span resources that span multiple patients?</p>",
        "id": 274142344,
        "sender_full_name": "Daniel Venton",
        "timestamp": 1646406605
    },
    {
        "content": "<p>What if the provenance spanned patient compartment and non-patient compartment resources?</p>",
        "id": 274142658,
        "sender_full_name": "Daniel Venton",
        "timestamp": 1646406747
    },
    {
        "content": "<p>the CR recommends that when an activity involved more than one Patient, then multiple Provenance instances would be created so as to prevent leakage between patient compartments.</p>",
        "id": 274143446,
        "sender_full_name": "John Moehrke",
        "timestamp": 1646407110
    },
    {
        "content": "<p>only patient compartment was persuasive. other compartments can be handled by extensions.</p>",
        "id": 274143527,
        "sender_full_name": "John Moehrke",
        "timestamp": 1646407151
    }
]