[
    {
        "content": "<p>I implemented the validators according to the examples on HAPI FHIR and all Observation resources examples fail the validation if there is no component. I'm using the \"Resource Validation Module: Schema/Schematron\".<br>\nIs this a bug in the XSD provided?</p>",
        "id": 153952278,
        "sender_full_name": "Alexandre Santos",
        "timestamp": 1523639171
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span></p>",
        "id": 153952282,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1523639715
    },
    {
        "content": "<p>BTW, this is the output:<br>\n&lt;OperationOutcome &gt;<br>\n    &lt;issue&gt;<br>\n        &lt;severity value=\"error\"&gt;&lt;/severity&gt;<br>\n        &lt;code value=\"processing\"&gt;&lt;/code&gt;<br>\n        &lt;diagnostics value=\"[error] Observation @ /<em>:Observation[namespace-uri()='<a href=\"http://hl7.org/fhir'][1]\" target=\"_blank\" title=\"http://hl7.org/fhir'][1]\">http://hl7.org/fhir'][1]</a>; Test=not(exists(f:</em>[starts-with(local-name(.), 'value')])) or not(count(for $coding in f:code/f:coding return parent::*/f:component/f:code/f:coding[f:code/@value=$coding/f:code/@value and f:system/@value=$coding/f:system/@value])=0); Message=obs-7: If code is the same as a component code then the value element associated with the code SHALL NOT be present\"&gt;&lt;/diagnostics&gt;<br>\n        &lt;location value=\"Observation @ /*:Observation[namespace-uri()='http://hl7.org/fhir'][1]\"&gt;&lt;/location&gt;<br>\n    &lt;/issue&gt;<br>\n&lt;/OperationOutcome&gt;</p>",
        "id": 153952283,
        "sender_full_name": "Alexandre Santos",
        "timestamp": 1523639794
    },
    {
        "content": "<p>what version of FHIR, and what version of HAPI?</p>",
        "id": 153952355,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1523662323
    },
    {
        "content": "<blockquote>\n<p>what version of FHIR, and what version of HAPI?</p>\n</blockquote>\n<p>DSTU3 and this happens with HAPI 3.3.0. If this message is used as a document in the HAPI Test Server (<a href=\"http://fhirtest.uhn.ca/validate\" target=\"_blank\" title=\"http://fhirtest.uhn.ca/validate\">http://fhirtest.uhn.ca/validate</a>) and we try to create a new resource, we don't see this error (the team that produces the specs for our FHIR messages uses that). But if we try to use the Validators then we see that error about the component.<br>\nHere is the permanent link from gazelle where you can see it: <a href=\"https://gazelle.ihe.net/EVSClient/detailedResult.seam?type=FHIR&amp;oid=1.3.6.1.4.1.12559.11.1.2.1.4.849544\" target=\"_blank\" title=\"https://gazelle.ihe.net/EVSClient/detailedResult.seam?type=FHIR&amp;oid=1.3.6.1.4.1.12559.11.1.2.1.4.849544\">https://gazelle.ihe.net/EVSClient/detailedResult.seam?type=FHIR&amp;oid=1.3.6.1.4.1.12559.11.1.2.1.4.849544</a></p>",
        "id": 153952450,
        "sender_full_name": "Alexandre Santos",
        "timestamp": 1523869174
    }
]