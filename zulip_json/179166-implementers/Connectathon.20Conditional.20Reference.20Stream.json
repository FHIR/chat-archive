[
    {
        "content": "<p>from the example:</p>\n<div class=\"codehilite\"><pre>&lt;Bundle xmlns=&quot;http://hl7.org/fhir&quot;&gt;\n   &lt;id value=&quot;20160113160203&quot; /&gt;\n   &lt;type value=&quot;transaction&quot; /&gt;\n   &lt;entry&gt;\n     &lt;fullUrl value=&quot;urn:uuid:c72aa430-2ddc-456e-7a09-dea8264671d8&quot; /&gt;\n     &lt;resource&gt;\n       &lt;Observation&gt;\n         &lt;subject&gt;\n            &lt;reference value=&quot;Patient?identifier=12345&quot;/&gt;\n         &lt;/subject&gt;\n         &lt;--! rest of resource omitted --&gt;\n       &lt;/Observation&gt;\n     &lt;/resource&gt;\n     &lt;request&gt;\n       &lt;method value=&quot;CREATE&quot; /&gt;\n     &lt;/request&gt;\n   &lt;/entry&gt;\n &lt;Bundle&gt;\n</pre></div>",
        "id": 153825428,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1462705925
    },
    {
        "content": "<p>the method is wrong - it should be POST in this case</p>",
        "id": 153825429,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1462705940
    },
    {
        "content": "<p>The deployed fixtures in Touchstone all have POST as the method. So this is just a correction needed on the proposal page.</p>",
        "id": 153825431,
        "sender_full_name": "Richard Ettema",
        "timestamp": 1462708155
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> and <span class=\"user-mention\" data-user-id=\"191450\">@Simone Heckmann</span>, I have redeployed the conditional reference test definitions to Touchstone for nomatch and multimatch to error out on a 404 and 412 respectively. </p>",
        "id": 153825432,
        "sender_full_name": "Richard Ettema",
        "timestamp": 1462709710
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191450\">@Simone Heckmann</span> I've now redeployed our server too with the correct codes. Do you mind to try testing again?</p>",
        "id": 153825449,
        "sender_full_name": "James Agnew",
        "timestamp": 1462712586
    },
    {
        "content": "<p>Interesting. How did this ever work!? :D I fixed the Wiki.</p>",
        "id": 153825463,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1462713542
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> : I get a 404 on the multimatch. Other than that, HAPI passes all tests.</p>",
        "id": 153825465,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1462713580
    },
    {
        "content": "<p>When I built the TestScripts and fixtures I fixed the transaction Bundles... and then I forgot to tell you.</p>",
        "id": 153825467,
        "sender_full_name": "Richard Ettema",
        "timestamp": 1462713709
    },
    {
        "content": "<p>Ah. That explains it :) <br>\nI already suspected James to have some kind of \"do what i mean\"-algorithm implemented :D :D :D</p>",
        "id": 153825472,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1462713831
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> : Grahame's server passed as well, however in his case I get a 202 if the transaction was successful, James returns 200 (and thats also what the test script expects). Which is correct? Should the Test script accept both?</p>",
        "id": 153825507,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1462715070
    },
    {
        "content": "<p>In that case, the test script should accept both I would say.</p>",
        "id": 153825521,
        "sender_full_name": "James Agnew",
        "timestamp": 1462715802
    },
    {
        "content": "<p>2xx codes all indicate success, so 202 and 200 would both be fine</p>",
        "id": 153825528,
        "sender_full_name": "James Agnew",
        "timestamp": 1462715946
    },
    {
        "content": "<p>However, I can't replicate the 404 for multimatch... I'm seeing 412 when I do it. That's strange!</p>",
        "id": 153825529,
        "sender_full_name": "James Agnew",
        "timestamp": 1462715971
    },
    {
        "content": "<p>Except, the spec says: <br>\n\"For a transaction, servers SHALL either accept all actions and return a 200 OK, along with a response bundle (see below), or reject all resources and return an HTTP 400 or 500 type response.\"</p>",
        "id": 153825531,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1462716023
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> : give me a second, I'll run the scipt again...</p>",
        "id": 153825533,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1462716079
    },
    {
        "content": "<p>Heh, that's true. Spec should probably be less strict about that....</p>",
        "id": 153825536,
        "sender_full_name": "James Agnew",
        "timestamp": 1462716145
    },
    {
        "content": "<p>ps, just restarting my server, it will be down for a second</p>",
        "id": 153825537,
        "sender_full_name": "James Agnew",
        "timestamp": 1462716161
    },
    {
        "content": "<p>Yes. It's not a mix up of the return codes with the 404, it's a problem with our conditional URL:<br>\n\"diagnostics\":\"Invalid match URL \\\"Patient?family=van%20de%20Heuvelcx85ioqWJbI%38given=Pietercx85ioqWJbI\\\" - No resources match this search\"</p>",
        "id": 153825539,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1462716382
    },
    {
        "content": "<p>This URL really matches 0 patients, even though the fixtures habe been created successfully</p>",
        "id": 153825543,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1462716417
    },
    {
        "content": "<p>The URL /Patient?given=Pietercx85ioqWJbI returns 2 results</p>",
        "id": 153825546,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1462716441
    },
    {
        "content": "<p>It's actually %38-Character! If I replace it with \"&amp;\" the URL is ok.</p>",
        "id": 153825548,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1462716531
    },
    {
        "content": "<p>Ah yeah, that makes sense... That <code>&amp;</code> shoudn't be escaped</p>",
        "id": 153825551,
        "sender_full_name": "James Agnew",
        "timestamp": 1462716557
    },
    {
        "content": "<p>Oh. So this is an issue. XML doesn't allow unescaped &amp; character. It will have to be &amp;amp; in the URL string</p>",
        "id": 153825553,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1462717030
    },
    {
        "content": "<p>With HAPI, the JSON version passes now, but the XML Version gives:<br>\n            \"diagnostics\":\"Failed to parse match URL[Patient?family=van%20de%20Heuvelcx85ioqWJbI&amp;amp;given=Pietercx85ioqWJbI] - Resource type Patient does not have a parameter with name: amp;given\"</p>",
        "id": 153825554,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1462717154
    },
    {
        "content": "<p>...and Grahame's Server just doesn't care. It works, whatever we put in that URL :D</p>",
        "id": 153825557,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1462717266
    },
    {
        "content": "<p>I don't think we should allow 202 accepted until we have a purpose. I've fixed my server</p>",
        "id": 153825594,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1462720055
    },
    {
        "content": "<p>and, huh, I've spent ages getting URL decoding correctly. There's such a lot to get right there</p>",
        "id": 153825596,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1462720093
    },
    {
        "content": "<p>Interestingly I can't recreate the XML failure.. It's working for me.</p>\n<p>Was this with your code Simone, or with Touchstone? I'm just wondering if you can do it again and I'll check the logs on my end.</p>",
        "id": 153825613,
        "sender_full_name": "James Agnew",
        "timestamp": 1462721221
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> : running it now...</p>",
        "id": 153825620,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1462721627
    },
    {
        "content": "<p>...running...</p>",
        "id": 153825621,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1462721647
    },
    {
        "content": "<p>still failing</p>",
        "id": 153825622,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1462721738
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/IknSrEslGyND26SabUtvtK0k/request.txt\" target=\"_blank\" title=\"/user_uploads/10155/IknSrEslGyND26SabUtvtK0k/request.txt\">request.txt</a> </p>",
        "id": 153825623,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1462721755
    },
    {
        "content": "<p>Wait, is it failing for JSON or XML? Or both? That's a json request...</p>",
        "id": 153825624,
        "sender_full_name": "James Agnew",
        "timestamp": 1462721798
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/CZFJfzzVRWKvOYrI07ViWunQ/response.txt\" target=\"_blank\" title=\"/user_uploads/10155/CZFJfzzVRWKvOYrI07ViWunQ/response.txt\">response.txt</a> </p>",
        "id": 153825625,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1462721800
    },
    {
        "content": "<p>ah interesting</p>",
        "id": 153825627,
        "sender_full_name": "James Agnew",
        "timestamp": 1462721821
    },
    {
        "content": "<p>Uhm. wait. yes.</p>",
        "id": 153825628,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1462721830
    },
    {
        "content": "<p>JSON is failing, not XML. Sorry. My bad</p>",
        "id": 153825629,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1462721840
    },
    {
        "content": "<p>Hehehe... the problem there is that the &amp; shouldn't be escaped now. It's still the test that's wrong. :)</p>\n<p>In JSON you don't put <code>&amp;amp;</code> for an ampersand, just <code>&amp;</code></p>",
        "id": 153825630,
        "sender_full_name": "James Agnew",
        "timestamp": 1462721877
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191370\">@Richard Ettema</span> : ...are you listening? :)</p>",
        "id": 153825631,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1462721920
    },
    {
        "content": "<p>I am now. Wireless issues.  :(</p>",
        "id": 153825634,
        "sender_full_name": "Richard Ettema",
        "timestamp": 1462722399
    },
    {
        "content": "<p>Ok.  The JSON fixture has been updated with just &amp; and uploaded to Touchstone.  Please try again.  :)</p>",
        "id": 153825637,
        "sender_full_name": "Richard Ettema",
        "timestamp": 1462722581
    },
    {
        "content": "<p>100% successful :)</p>",
        "id": 153825662,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1462723333
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-email=\"grahame@healthintersections.com.au\">@Grahame Grieve</span>: I still get 202 on the Transaction!</p>",
        "id": 153825665,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1462723469
    },
    {
        "content": "<p>...so what are the next steps now...? Should I create a Tracker Item and request the addition of conditional references to the standard?</p>",
        "id": 153827066,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1462998003
    },
    {
        "content": "<p>Apparently we're very very close to issue 10000. You should try to be it!</p>",
        "id": 153827105,
        "sender_full_name": "James Agnew",
        "timestamp": 1463000355
    },
    {
        "content": "<p>Damn.<br>\n<a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=9998\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=9998\">http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=9998</a></p>",
        "id": 153827114,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1463000812
    }
]