[
    {
        "content": "<p><a href=\"http://hl7.org/fhir/valueset-allergy-intolerance-status.html\" target=\"_blank\" title=\"http://hl7.org/fhir/valueset-allergy-intolerance-status.html\">http://hl7.org/fhir/valueset-allergy-intolerance-status.html</a> suggests a hierarchical value set  -- but this is a bit misleading in behavior; do we expect:<br>\n<code>GET /AllergyIntolerance?status=active</code><br>\nto return <code>unconfirmed</code> and <code>confirmed</code> results as well ?!</p>",
        "id": 153816135,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1458235477
    },
    {
        "content": "<p>It would certainly be desirable, but it would be good to clarify in the spec.  Change request?</p>",
        "id": 153816144,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1458236381
    },
    {
        "content": "<p>\"It would certainly be desireable\" Maybe, but it needs to be more clear when a single value is conveying a heirarchy. My inital thought is that this is very surprising value for something that doesn't seem multi-value (status - can something be in more than one state at a single time? maybe in physics :), but not intuitively)</p>",
        "id": 153816159,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1458236562
    },
    {
        "content": "<p>But if I think of this in terms of the Observation.category, things can be categorized as multiple concepts - I can be both a \"lab\" and a \"blood chem\" (even though the spec doesn't allow a multi-value for that field)</p>",
        "id": 153816162,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1458236659
    },
    {
        "content": "<p>\"do we expect:<br>\nGET /AllergyIntolerance?status=active<br>\nto return unconfirmed and confirmed results as well ?!\" - no. we are clear in the spec that we do not. There's a modifier if you want to include unconfirmed and confirmed as well. </p>",
        "id": 153816182,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1458238720
    },
    {
        "content": "<p>@GG I can't find this in the spec so is unclear at least to me.  I would certainly expect the behaviour Josh desc<br>\nribes since 'active' is a parent concept of both 'unconfirmed' and 'confirmed'.</p>",
        "id": 153816193,
        "sender_full_name": "Eric Haas",
        "timestamp": 1458239480
    },
    {
        "content": "<p>never mind found the references to modifiers</p>",
        "id": 153816194,
        "sender_full_name": "Eric Haas",
        "timestamp": 1458239740
    },
    {
        "content": "<p>GET /AllergyIntolerance?status:below=active</p>",
        "id": 153816195,
        "sender_full_name": "Eric Haas",
        "timestamp": 1458239989
    },
    {
        "content": "<p>I certainly don't think we've described the interaction of modifiers like <code>:below</code> with tokens specified only by code (with no system). That's another can of worms. When search problems, can I write <code>GET /Condition?code:below=233873004</code>, without even specifying snomed??</p>",
        "id": 153816196,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1458240157
    },
    {
        "content": "<p>And servers don't have a way to say \"I support :below only in certain contexts\"</p>",
        "id": 153816197,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1458240180
    },
    {
        "content": "<p>Yes to your first questions ( its in the spec as an example GET [base]/Condition?code:below=126851005 )</p>",
        "id": 153816198,
        "sender_full_name": "Eric Haas",
        "timestamp": 1458240277
    },
    {
        "content": "<p>the search matches irrespective of code system - jsut readin this now</p>",
        "id": 153816199,
        "sender_full_name": "Eric Haas",
        "timestamp": 1458240355
    },
    {
        "content": "<p>Josh there is probably room for improvement with regard to documentation. I'm not sure that it's worth providing a computable way to say which modifiers are represented in which cases, but we are clear about the equality thing:</p>",
        "id": 153816200,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1458240450
    },
    {
        "content": "<p>Matches are literal (e.g. not based on subsumption or other code system features), but not case sensitive</p>",
        "id": 153816202,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1458240480
    },
    {
        "content": "<p>we should say just that last bit.   I'll make a tracker</p>",
        "id": 153816203,
        "sender_full_name": "Eric Haas",
        "timestamp": 1458240535
    },
    {
        "content": "<p>what's the tracker for?</p>",
        "id": 153816204,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1458240549
    },
    {
        "content": "<p>to add \"Matches are literal (e.g. not based on subsumption or other code system features), but not case sensitive\"  to here <a href=\"http://hl7-fhir.github.io/search.html#token\" target=\"_blank\" title=\"http://hl7-fhir.github.io/search.html#token\">http://hl7-fhir.github.io/search.html#token</a>   I think that clears it up.</p>",
        "id": 153816206,
        "sender_full_name": "Eric Haas",
        "timestamp": 1458240648
    },
    {
        "content": "<p>that's where I copied it from</p>",
        "id": 153816207,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1458240671
    },
    {
        "content": "<p>Obviously I need new glasses cause I just read it</p>",
        "id": 153816208,
        "sender_full_name": "Eric Haas",
        "timestamp": 1458240740
    },
    {
        "content": "<p>The thing I find incredibly confusing is this interacts with <code>code</code> datatypes like <code>AllergIntolerance.staus</code></p>",
        "id": 153816209,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1458240945
    },
    {
        "content": "<p>but I think it should be more prominent not an ..oh by the way..   and then say something like if you want to base on subsumption use the modifiers described below.   minor editorial stuff.  </p>",
        "id": 153816210,
        "sender_full_name": "Eric Haas",
        "timestamp": 1458240948
    },
    {
        "content": "<p>why is that confusing? </p>",
        "id": 153816211,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1458240962
    },
    {
        "content": "<p>its a token search</p>",
        "id": 153816213,
        "sender_full_name": "Eric Haas",
        "timestamp": 1458241000
    },
    {
        "content": "<p>...still</p>",
        "id": 153816215,
        "sender_full_name": "Eric Haas",
        "timestamp": 1458241012
    },
    {
        "content": "<p>This discussion is giving me some shivers...  Your GET shoud NOT (please no) return subsumed codes based as a defualt because a value set expansion (that's what you are operating against for the GET) is a flat list of codes. The expansion can also include additional information, like the hierarchy defined in the code system the codes came from, but that information is suplemental and not somehow \"inside the code\". So if you want your GET to bring back codes from the value set based on some of the additional information available to you, you should structure the GET \"query\" to bring a value set subset based on defined parameters. For your example you need to craft a GET that explicitly communicates you want code=\"active\" and all codes subsumed by \"active\". </p>",
        "id": 153816276,
        "sender_full_name": "Robert McClure",
        "timestamp": 1458245647
    },
    {
        "content": "<p>Rob - you've misunderstood the context of the question, which is the primary reason you have the shivers</p>",
        "id": 153816286,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1458245779
    },
    {
        "content": "<p>OK... So when would a GET return subsumed concepts? </p>",
        "id": 153816291,
        "sender_full_name": "Robert McClure",
        "timestamp": 1458245852
    },
    {
        "content": "<p>well, we're not actually doing value set expansion here. The context is something else</p>",
        "id": 153816295,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1458245911
    }
]