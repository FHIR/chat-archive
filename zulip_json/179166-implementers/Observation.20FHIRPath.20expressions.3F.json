[
    {
        "content": "<p>Hi! Hopefully quick question:</p>\n<p>Observation has a few search parameters which use the 'as' type specifier, such as: (Observation.component.value as CodeableConcept). The 'as' documentation (<a href=\"http://hl7.org/fhirpath/#as-type-specifier\">http://hl7.org/fhirpath/#as-type-specifier</a>) says the left hand operator, in this case Observation.component.value, must only have one entry, otherwise an error should be returned.</p>\n<p>I'm aware that each component is only going to have a single value[x], but Observation.component is used if multiple results are included, so the left hand operator is basically always going to have more than one entry. We're seeing lots of errors being thrown on blood pressure Observations, which have two components, each with a single valueQuantity.</p>\n<p>I'm not sure if this is an issue with the Observation search parameter FHIRPath expressions, the FHIRPath documentation, or our interpretation of it. Any help would be much appreciated!</p>",
        "id": 215093725,
        "sender_full_name": "Alex Brown",
        "timestamp": 1604064428
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 215109977,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1604071719
    },
    {
        "content": "<p>I would agree that this is an error (bug) in the FHIR SearchParameters.  The proper expression  would be<br>\n   Observation.component.value.ofType(CodeableConcept)<br>\ninstead of<br>\n   Observation.component.value as CodeableConcept<br>\nin cases where the left side could be a multivalue collection.  <br>\n(And it could be used everywhere that 'as' is used in search parameters )</p>",
        "id": 215135812,
        "sender_full_name": "Arny Epstein",
        "timestamp": 1604083750
    },
    {
        "content": "<p>yes I agree that's an issue - can you make a task to fix please</p>",
        "id": 215376377,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1604350024
    },
    {
        "content": "<p>Thanks! Opened an issue: <a href=\"https://jira.hl7.org/browse/FHIR-29653\">https://jira.hl7.org/browse/FHIR-29653</a></p>",
        "id": 215595040,
        "sender_full_name": "Alex Brown",
        "timestamp": 1604503200
    }
]