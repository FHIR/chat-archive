[
    {
        "content": "<p>Hi All. I am finding difficult to understand how to map PV1-3 assigned patient location details to Location resource. I am not able to understand how Location resource will look like with details - building, room, bed, floor details. There is one element physicalType in Location resource where one can map these V2 values but this element cannot repeat, so either of the V2 value can map to this element. Could some provide Location resource example with building, room, bed, floor details etc. I feel Point of Care (PL.1) should map to Location.type element</p>",
        "id": 153846546,
        "sender_full_name": "Aditya Joshi",
        "timestamp": 1473166251
    },
    {
        "content": "<p>What is your use case? How much does the target system already know about the structures of the locations within the hospital? Does it already know the locations (Bedplaces, Rooms, Wards) or do you want to create them \"at runtime\"? Does it need all the details of the Location or is it more or less just a \"String\" or a human readable information?</p>",
        "id": 153846549,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1473168995
    },
    {
        "content": "<p>If you create the Locations at runtime, your Resources will always be just stubs because you won't know anything more that the name/number of the room/bed/ward... So this will only work if the target system doesn't need to know any more than that. In which case, Encounter.location.display may even suffice to stuff PV1.#3 in.</p>",
        "id": 153846550,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1473169202
    },
    {
        "content": "<p>If the target system on the other hand indeed cares about the location, the information you can get from the V2 message will most likely be insufficent and the target system will create it's Location resources from a different source. Maybe even enriched with detailed location descriptions, geodata and whatnot. In that case, the target system shoul already know which Bedplace belongs to which room, belongs to which ward, belongs to which Wing, Building, Department etc.</p>",
        "id": 153846552,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1473169358
    },
    {
        "content": "<p>So the hierarchical structure will already be there in the Location.partOf references of the Location resources.<br>\nIn this case, you basically only need to make sure, Encounter.location hits the right bedplace. All the rest of the information will already be known to the Receiver.</p>",
        "id": 153846553,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1473169459
    },
    {
        "content": "<p>I have had a usecase where the location only mattered in terms of which ward and which department the patient is assigned to. Adding to the complexity was the fact, that wards are not assignet to one specific Department but may be used by different Departments. So I referenced Encounter.location to the Location \"ward\" and Encounter.serviceProvider to the Organization \"Department\". THis allows for filtering and searching by ward and department, which I guess is good enough for the 80%.</p>",
        "id": 153846555,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1473169628
    },
    {
        "content": "<p>Please note that currently Encounter.serviceProvider is not (yet) a search criteria for Encounter. I added a change request for that.</p>",
        "id": 153846558,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1473169678
    },
    {
        "content": "<p>Thanks Simone, it was great explanation. As of now my requirement is to map Patient Location from V2 to FHIR resource. In my understanding, Patient location in V2 would come in PV1-3 which can include details of location including facility and rest others. I am not sure what all I can expect in PV1-3, I might get only ward (PV1-3.1 Point of care) and building or can get full fledged populated PV1-3. My target would be to map whatever comes in PV1-3. </p>",
        "id": 153846560,
        "sender_full_name": "Aditya Joshi",
        "timestamp": 1473170478
    },
    {
        "content": "<p>I guess I got your point and if I want to detail out all information then I need to use Location.partOf references</p>",
        "id": 153846561,
        "sender_full_name": "Aditya Joshi",
        "timestamp": 1473170513
    },
    {
        "content": "<p><a href=\"https://www.hl7.org/fhir/location.html\" target=\"_blank\" title=\"https://www.hl7.org/fhir/location.html\">https://www.hl7.org/fhir/location.html</a> - this page defines hierarchy. Yes, but it is bit complex in terms of implementation, I need to create entire hierarchy if I want to map everything from PV1-3 to Location resource. Yes, can create ward or building as Location resource and rest other details like floor, bed, room as Location partOf reference resources  </p>",
        "id": 153846562,
        "sender_full_name": "Aditya Joshi",
        "timestamp": 1473170615
    },
    {
        "content": "<p>Yes, if you really want to convey all PV1.#3 information and create the resources at runtime, you'd have to create a Location resource for the Bed with a part Of Reference to a Location Resource with the room with a partOf reference to the Location Resource with the ward. Which may then have a managedBy reference to the department if that's a static reference...</p>",
        "id": 153846563,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1473170683
    },
    {
        "content": "<p>great, got it. and in each Location resource, type of location that is bed, room etc. can be mapped with Location.physicalType? </p>",
        "id": 153846564,
        "sender_full_name": "Aditya Joshi",
        "timestamp": 1473170913
    },
    {
        "content": "<p>Also, what about address, I see most of the time it is address of the hospital, this information does not appear in PV1-3. Not sure even if in entire PV1, no field where can map provider organization information (with XAD data type). </p>",
        "id": 153846565,
        "sender_full_name": "Aditya Joshi",
        "timestamp": 1473171057
    }
]