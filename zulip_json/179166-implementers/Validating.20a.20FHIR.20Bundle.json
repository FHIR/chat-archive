[
    {
        "content": "<p>Hi, after having uploaded a FHIR Bundle (type document) to a FHIR Server, is it possible to validate a resource within the Bundle (for example a MedicationStatement) against a specific profile with a GET Request?</p>\n<p>For example like this, but I would like to validate a specific instance of the FHIR Bundle:<br>\nGET {{host}}/Bundle/1989598/$validate?_profile=http://hl7.org/fhir/uv/ips/StructureDefinition/MedicationStatement-uv-ips HTTP/1.1</p>\n<p>Or would such a validation be only possible with the FHIR Validator?</p>\n<p>Thanks in advance!</p>",
        "id": 235176415,
        "sender_full_name": "Alexander Dimitrov",
        "timestamp": 1618837464
    },
    {
        "content": "<p>I don't think this is possible - as far as I know, resources within a Bundle cannot be directly addressed.</p>",
        "id": 235184191,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1618840636
    },
    {
        "content": "<p>This is not directly possible (also not with the FHIR Validator). But you can create a Bundle document profile which indicates that the entries to follow the MedicationStatement-uv-ips profile. </p>\n<p>E.g we do this for our exchange formats that we write first a profile requiring that the bundle needs a composition (<a href=\"http://fhir.ch/ig/ch-emed/StructureDefinition-ch-emed-document-medicationcard.html\">http://fhir.ch/ig/ch-emed/StructureDefinition-ch-emed-document-medicationcard.html</a>) and then profile the composition with its section and entries (<a href=\"http://fhir.ch/ig/ch-emed/StructureDefinition-ch-emed-composition-medicationcard.html\">http://fhir.ch/ig/ch-emed/StructureDefinition-ch-emed-composition-medicationcard.html</a>) to the individual medication statement profile.</p>",
        "id": 235184550,
        "sender_full_name": "Oliver Egger",
        "timestamp": 1618840788
    },
    {
        "content": "<p>I found a strange behavior. Assume a bundle profile requires [1..1] Patient entry with profile A which mandates [1..1] <a href=\"http://Patient.name\">Patient.name</a>. If a Bundle instance contains only one Patient resource but without <a href=\"http://Patient.name\">Patient.name</a>, the validator reports that the bundle requires [1..1] Patient entry with profile A but found 0. This message is correct but not pointing out the real error that Patient is missing <a href=\"http://Patient.name\">Patient.name</a></p>",
        "id": 235187978,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1618841950
    },
    {
        "content": "<p>The validator's process is perfectly logical because you haven't said that <em>all</em> Patient resources must correspond to your profile.  If you sliced by type and then declared the profile, that might give you a clearer result.</p>",
        "id": 235188626,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1618842151
    },
    {
        "content": "<p>Thanks for the responses! Writing a profile for the bundle seems like a clean solution, will try it!</p>",
        "id": 235209707,
        "sender_full_name": "Alexander Dimitrov",
        "timestamp": 1618849655
    },
    {
        "content": "<p>We've done a small extension for bundle type=message to validate according to a MessageDefintion (based on MessageHeader.eventCoding)<br>\nI'd probably do similar for type=document to validate against a Composition profile - profile for validation  is selected based on Composition.type</p>",
        "id": 235230734,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1618858646
    },
    {
        "content": "<p><a href=\"https://github.com/NHSDigital/validation-service-fhir-r4/blob/master/src/main/kotlin/com/example/fhirvalidator/service/MessageDefinitionApplier.kt\">https://github.com/NHSDigital/validation-service-fhir-r4/blob/master/src/main/kotlin/com/example/fhirvalidator/service/MessageDefinitionApplier.kt</a></p>",
        "id": 235230770,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1618858655
    }
]