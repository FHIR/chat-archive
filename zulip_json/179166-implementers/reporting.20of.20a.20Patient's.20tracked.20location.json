[
    {
        "content": "<p>How would a Device tracking a Patient's Location (e.g. a wearable device detecting emergency situations) report the Location?<br>\nThe question is derived from a comment on David's Blog: <a href=\"https://fhirblog.com/2016/09/20/fhir-and-version-2-the-location/\" target=\"_blank\" title=\"https://fhirblog.com/2016/09/20/fhir-and-version-2-the-location/\">https://fhirblog.com/2016/09/20/fhir-and-version-2-the-location/</a>:</p>\n<blockquote>\n<p>My question is could, should and how would location info be posted for info collected by a Consumer/Patient Mobile Health Device?<br>\nCase 1: Patient fallen, canâ€™t get up [...]</p>\n</blockquote>",
        "id": 153850297,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1474491651
    },
    {
        "content": "<p>I'm considering the actual event to be recorded as an Observation with a Location reported by a Device, thus Observation.device.location...?</p>",
        "id": 153850298,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1474491864
    },
    {
        "content": "<p>In <a href=\"https://github.com/synthetichealth/synthea\" target=\"_blank\" title=\"https://github.com/synthetichealth/synthea\">Synthea</a> (synthetic patient generator), we're using an extension... right now on Patient, but it could be on any resource...</p>",
        "id": 153850331,
        "sender_full_name": "Jason Walonoski",
        "timestamp": 1474545794
    },
    {
        "content": "<div class=\"codehilite\"><pre><span class=\"p\">{</span>\n            <span class=\"nt\">&quot;url&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;http://standardhealthrecord.org/fhir/extensions/wkt-geospatialpoint&quot;</span><span class=\"p\">,</span>\n            <span class=\"nt\">&quot;valueString&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;POINT (-71.10671654481652, 41.85438652696115)&quot;</span>\n <span class=\"p\">}</span>\n</pre></div>",
        "id": 153850332,
        "sender_full_name": "Jason Walonoski",
        "timestamp": 1474545826
    },
    {
        "content": "<p>The format is the WKT ( Well Known Text) standard. So the first number (-71) is longitude, and the second (41) is latitude.</p>",
        "id": 153850333,
        "sender_full_name": "Jason Walonoski",
        "timestamp": 1474545854
    },
    {
        "content": "<p>I think for the above use case, a point in space only has meaning if it is associated with a point in time. What is your usecase for capturing a Patient's location without a timestamp? Are your synthetic Patients not moving around? :)</p>",
        "id": 153850360,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1474550592
    },
    {
        "content": "<p>I admit I had never heard of WKT before, so I looked it up: <a href=\"https://en.wikipedia.org/wiki/Well-known_text\" target=\"_blank\" title=\"https://en.wikipedia.org/wiki/Well-known_text\">https://en.wikipedia.org/wiki/Well-known_text</a><br>\nAccording to that, shouldn't the notation of the coordinates be whitespace separated rather than colon separated?</p>",
        "id": 153850361,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1474551054
    },
    {
        "content": "<p>The use case is to geolocate their address... but yes, if they were moving around and we were tracking them ala \"big brother\" then we'd have timestamps. And yes, you are correct, the comma is invalid.</p>",
        "id": 153850531,
        "sender_full_name": "Jason Walonoski",
        "timestamp": 1474628176
    },
    {
        "content": "<p>There is an extension on address that you can now use as defined here:<br>\n<a href=\"http://hl7.org/fhir/2016Sep/extension-geolocation.html\" target=\"_blank\" title=\"http://hl7.org/fhir/2016Sep/extension-geolocation.html\">http://hl7.org/fhir/2016Sep/extension-geolocation.html</a><br>\nand a sample resource with it filled in here:<br>\n<a href=\"http://sqlonfhir-ci.azurewebsites.net/fhir/Patient/10004992\" target=\"_blank\" title=\"http://sqlonfhir-ci.azurewebsites.net/fhir/Patient/10004992\">http://sqlonfhir-ci.azurewebsites.net/fhir/Patient/10004992</a></p>",
        "id": 153850616,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1474659185
    },
    {
        "content": "<p>You can convert this into your WKT format on the client side, and others who don't use that format don't have to parse it out.</p>",
        "id": 153850618,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1474659224
    },
    {
        "content": "<p>Really handy if you're using the addresses for routing home visits ;)</p>",
        "id": 153850619,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1474659290
    },
    {
        "content": "<p>Latitude is spelled incorrectly on that extension. Submitted gforge ticket: <a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12185\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12185\">12185</a></p>",
        "id": 153850757,
        "sender_full_name": "Jason Walonoski",
        "timestamp": 1474895902
    },
    {
        "content": "<p>Thanks, will fix</p>",
        "id": 153850875,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1474978268
    },
    {
        "content": "<p>I agree, that this extension is useful for (static) adresses but not for moving objects! I believe that there will be plenty of IoT use cases to trace Patients, Devices, or Practitioners around, requiring to pinpoint their Location at a specific time or their \"Last known location\". I'm still not sure how to handle that. I rather wouldn't extend the tracked Resources because in case of high precision tracking there'd be way too many updates on the  Resources.<br>\nI'd rather have one seperate Resource referencing the tracked person/item and reporting their last known location.</p>\n<p>The Location Resource however is not a good fit for this as it has neither a reference to the tracked person/item, nor a timestamp (altough: it has lastUpdated...!)</p>\n<p>So... would an extension on Location named \"tracking\" with Reference to any potentially trackable Resource (Patient, RelatedPerson, Practitioner, Device... what else...?) be helpful? </p>\n<p>Or do we need a new Resource altogether...? <br>\nDo we need additional information about the method/precision/frequency of the tracking...?</p>",
        "id": 153851048,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1475068370
    },
    {
        "content": "<p>Why do you think that would be 'way too many updates'? This seems exactly what would be done.</p>",
        "id": 153851066,
        "sender_full_name": "John Moehrke",
        "timestamp": 1475071459
    },
    {
        "content": "<p>IDK feels weird to update an otherwise relatively static resource like Patient or Device every other second just to update the location,  especially with all the potential for write conflict... I mean: any client who tries to update the Patient address would subsequently hit a write conflict because the tracker updated the Resource at least twice during the time you need to type a street name.</p>",
        "id": 153851069,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1475071846
    },
    {
        "content": "<p>I see my confusion. For your usecase, I thought that Patient had a location element, and you would be updating the Location resource which does have GPS coordinates. Might be a good CP to write up. I am not clear how 'current patient location' is intended to be handled. In the Location resource they hint about \"Patient's Home\", but don't even show that (I think that use-case is not in scope anymore). </p>",
        "id": 153851071,
        "sender_full_name": "John Moehrke",
        "timestamp": 1475072368
    },
    {
        "content": "<p>Actually, this isn't really my usecase, it just popped up when a reader commented on my blog about V2 location mapping <br>\n<a href=\"https://fhirblog.com/2016/09/20/fhir-and-version-2-the-location/\" target=\"_blank\" title=\"https://fhirblog.com/2016/09/20/fhir-and-version-2-the-location/\">https://fhirblog.com/2016/09/20/fhir-and-version-2-the-location/</a><br>\nI wonder if there's anyone here who actually has this use case and can give us more input, rather than me just making up stuff :D</p>",
        "id": 153851090,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1475079577
    },
    {
        "content": "<p>In general, patient locations are only tracked when they're admitted, so the patient's location is handled using Encounter, not Patient</p>",
        "id": 153851382,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1475189695
    },
    {
        "content": "<p>I reckon, the information that the patient's encounter is assigned to a Bed/Ward and the Information that the Patient is currently halfway between his Bed and the Radiology Department are two different kinds of \"Location\".</p>\n<p>Also, I believe that Patient tracking is more relevant in homecare scenarios, where wearable devices are used to detect seizures or collapses and report the incident. In these cases, there is no Encounter context.</p>",
        "id": 153851384,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1475193040
    },
    {
        "content": "<p>This is potentially quite different in residential aged care. Where the resident actually has a Bond on the room itself, or independant living unit.</p>",
        "id": 153851412,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1475210598
    }
]