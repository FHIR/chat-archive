[
    {
        "content": "<p>I need some help getting the IG publisher to recognize a new slice in a derived profile added to an existing slice defined in a base profile. </p>\n<p>My base profile looks like this:</p>\n<div class=\"codehilite\"><pre><span></span>&lt;element id=&quot;Composition.section&quot;&gt;\n  &lt;path value=&quot;Composition.section&quot;/&gt;\n  &lt;slicing&gt;\n    &lt;discriminator&gt;\n      &lt;type value=&quot;value&quot;/&gt;\n      &lt;path value=&quot;code&quot;/&gt;\n    &lt;/discriminator&gt;\n    &lt;rules value=&quot;open&quot;/&gt;\n  &lt;/slicing&gt;\n&lt;/element&gt;\n&lt;element id=&quot;Composition.section:health_concerns_section_slice&quot;&gt;\n  &lt;extension\n    url=&quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-explicit-type-name&quot;&gt;\n    &lt;valueString value=&quot;Section&quot;/&gt;\n  &lt;/extension&gt;\n  &lt;path value=&quot;Composition.section&quot;/&gt;\n  &lt;sliceName value=&quot;health_concerns_section_slice&quot;/&gt;\n  &lt;short value=&quot;Health Concerns Section&quot;/&gt;\n  &lt;min value=&quot;1&quot;/&gt;\n  &lt;max value=&quot;1&quot;/&gt;\n&lt;/element&gt;\n&lt;element id=&quot;Composition.section:health_concerns_section_slice.code&quot;&gt;\n  &lt;path value=&quot;Composition.section.code&quot;/&gt;\n  &lt;short value=&quot;Health concerns section code&quot;/&gt;\n  &lt;min value=&quot;1&quot;/&gt;\n  &lt;patternCodeableConcept&gt;\n    &lt;coding&gt;\n      &lt;system value=&quot;http://loinc.org&quot;/&gt;\n      &lt;code value=&quot;75310-3&quot;/&gt;\n    &lt;/coding&gt;\n  &lt;/patternCodeableConcept&gt;\n&lt;/element&gt;\n... other slices follow\n</pre></div>\n\n\n<p>In my derived profile I am trying to add a new slice for a \"Payers\" section. I tried doing the following:</p>\n<div class=\"codehilite\"><pre><span></span>&lt;element id=&quot;Composition.section:payer_section_slice&quot;&gt;\n  &lt;path value=&quot;Composition.section&quot; /&gt;\n  &lt;sliceName value=&quot;payer_section_slice&quot; /&gt;\n  &lt;short value=&quot;Payers Section&quot; /&gt;\n  &lt;max value=&quot;1&quot; /&gt;\n&lt;/element&gt;\n&lt;element id=&quot;Composition.section:payer_section_slice.code&quot;&gt;\n  &lt;path value=&quot;Composition.section.code&quot;/&gt;\n  &lt;short value=&quot;Payers section code&quot;/&gt;\n  &lt;min value=&quot;1&quot;/&gt;\n  &lt;patternCodeableConcept&gt;\n    &lt;coding&gt;\n      &lt;system value=&quot;http://loinc.org&quot;/&gt;\n      &lt;code value=&quot;48768-6&quot;/&gt;\n    &lt;/coding&gt;\n  &lt;/patternCodeableConcept&gt;\n&lt;/element&gt;\n</pre></div>\n\n\n<p>... but no luck. I also tried repeating the slicing declaration in the derived profile, but that didn't work either. </p>\n<div class=\"codehilite\"><pre><span></span>&lt;element id=&quot;Composition.section&quot;&gt;\n  &lt;path value=&quot;Composition.section&quot;/&gt;\n  &lt;slicing&gt;\n    &lt;discriminator&gt;\n      &lt;type value=&quot;value&quot;/&gt;\n      &lt;path value=&quot;code&quot;/&gt;\n    &lt;/discriminator&gt;\n    &lt;rules value=&quot;open&quot;/&gt;\n  &lt;/slicing&gt;\n&lt;/element&gt;\n&lt;element id=&quot;Composition.section:payer_section_slice&quot;&gt;\n  &lt;path value=&quot;Composition.section&quot; /&gt;\n  &lt;sliceName value=&quot;payer_section_slice&quot; /&gt;\n  &lt;short value=&quot;Payers Section&quot; /&gt;\n  &lt;max value=&quot;1&quot; /&gt;\n&lt;/element&gt;\n&lt;element id=&quot;Composition.section:payer_section_slice.code&quot;&gt;\n  &lt;path value=&quot;Composition.section.code&quot;/&gt;\n  &lt;short value=&quot;Payers section code&quot;/&gt;\n  &lt;min value=&quot;1&quot;/&gt;\n  &lt;patternCodeableConcept&gt;\n    &lt;coding&gt;\n      &lt;system value=&quot;http://loinc.org&quot;/&gt;\n      &lt;code value=&quot;48768-6&quot;/&gt;\n    &lt;/coding&gt;\n  &lt;/patternCodeableConcept&gt;\n&lt;/element&gt;\n</pre></div>\n\n\n<p>The IG builds fine, but the new Payer section doesn't show up in the differential or snapshot rendering in the derived profile. </p>\n<p>Any ideas?</p>",
        "id": 153897503,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1500578020
    },
    {
        "content": "<blockquote>\n<p>I need some help getting the IG publisher to recognize a new slice in a derived profile added to an existing slice defined in a base profile. </p>\n<p>My base profile looks like this:</p>\n<div class=\"codehilite\"><pre><span></span>&lt;element id=&quot;Composition.section&quot;&gt;\n  &lt;path value=&quot;Composition.section&quot;/&gt;\n  &lt;slicing&gt;\n    &lt;discriminator&gt;\n      &lt;type value=&quot;value&quot;/&gt;\n      &lt;path value=&quot;code&quot;/&gt;\n    &lt;/discriminator&gt;\n    &lt;rules value=&quot;open&quot;/&gt;\n  &lt;/slicing&gt;\n&lt;/element&gt;\n&lt;element id=&quot;Composition.section:health_concerns_section_slice&quot;&gt;\n  &lt;extension\n    url=&quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-explicit-type-name&quot;&gt;\n    &lt;valueString value=&quot;Section&quot;/&gt;\n  &lt;/extension&gt;\n  &lt;path value=&quot;Composition.section&quot;/&gt;\n  &lt;sliceName value=&quot;health_concerns_section_slice&quot;/&gt;\n  &lt;short value=&quot;Health Concerns Section&quot;/&gt;\n  &lt;min value=&quot;1&quot;/&gt;\n  &lt;max value=&quot;1&quot;/&gt;\n&lt;/element&gt;\n&lt;element id=&quot;Composition.section:health_concerns_section_slice.code&quot;&gt;\n  &lt;path value=&quot;Composition.section.code&quot;/&gt;\n  &lt;short value=&quot;Health concerns section code&quot;/&gt;\n  &lt;min value=&quot;1&quot;/&gt;\n  &lt;patternCodeableConcept&gt;\n    &lt;coding&gt;\n      &lt;system value=&quot;http://loinc.org&quot;/&gt;\n      &lt;code value=&quot;75310-3&quot;/&gt;\n    &lt;/coding&gt;\n  &lt;/patternCodeableConcept&gt;\n&lt;/element&gt;\n... other slices follow\n</pre></div>\n\n\n<p>In my derived profile I am trying to add a new slice for a \"Payers\" section. I tried doing the following:</p>\n<div class=\"codehilite\"><pre><span></span>&lt;element id=&quot;Composition.section:payer_section_slice&quot;&gt;\n  &lt;path value=&quot;Composition.section&quot; /&gt;\n  &lt;sliceName value=&quot;payer_section_slice&quot; /&gt;\n  &lt;short value=&quot;Payers Section&quot; /&gt;\n  &lt;max value=&quot;1&quot; /&gt;\n&lt;/element&gt;\n&lt;element id=&quot;Composition.section:payer_section_slice.code&quot;&gt;\n  &lt;path value=&quot;Composition.section.code&quot;/&gt;\n  &lt;short value=&quot;Payers section code&quot;/&gt;\n  &lt;min value=&quot;1&quot;/&gt;\n  &lt;patternCodeableConcept&gt;\n    &lt;coding&gt;\n      &lt;system value=&quot;http://loinc.org&quot;/&gt;\n      &lt;code value=&quot;48768-6&quot;/&gt;\n    &lt;/coding&gt;\n  &lt;/patternCodeableConcept&gt;\n&lt;/element&gt;\n</pre></div>\n\n\n<p>... but no luck. I also tried repeating the slicing declaration in the derived profile, but that didn't work either. </p>\n<div class=\"codehilite\"><pre><span></span>&lt;element id=&quot;Composition.section&quot;&gt;\n  &lt;path value=&quot;Composition.section&quot;/&gt;\n  &lt;slicing&gt;\n    &lt;discriminator&gt;\n      &lt;type value=&quot;value&quot;/&gt;\n      &lt;path value=&quot;code&quot;/&gt;\n    &lt;/discriminator&gt;\n    &lt;rules value=&quot;open&quot;/&gt;\n  &lt;/slicing&gt;\n&lt;/element&gt;\n&lt;element id=&quot;Composition.section:payer_section_slice&quot;&gt;\n  &lt;path value=&quot;Composition.section&quot; /&gt;\n  &lt;sliceName value=&quot;payer_section_slice&quot; /&gt;\n  &lt;short value=&quot;Payers Section&quot; /&gt;\n  &lt;max value=&quot;1&quot; /&gt;\n&lt;/element&gt;\n&lt;element id=&quot;Composition.section:payer_section_slice.code&quot;&gt;\n  &lt;path value=&quot;Composition.section.code&quot;/&gt;\n  &lt;short value=&quot;Payers section code&quot;/&gt;\n  &lt;min value=&quot;1&quot;/&gt;\n  &lt;patternCodeableConcept&gt;\n    &lt;coding&gt;\n      &lt;system value=&quot;http://loinc.org&quot;/&gt;\n      &lt;code value=&quot;48768-6&quot;/&gt;\n    &lt;/coding&gt;\n  &lt;/patternCodeableConcept&gt;\n&lt;/element&gt;\n</pre></div>\n\n\n<p>The IG builds fine, but the new Payer section doesn't show up in the differential or snapshot rendering in the derived profile. </p>\n<p>Any ideas?</p>\n</blockquote>\n<p>What I do is  hand edit  the slicing after the ig pub generates it and the use this sd instead</p>",
        "id": 153897563,
        "sender_full_name": "Eric Haas",
        "timestamp": 1500595832
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> You you hand edit what? The generated HTML? Or do you take the generated StructureDefinition and hand edit that (differential and snapshot) then feed it back to the IG publisher again? If so, do the Differential and Snapshot tabs render correctly?</p>",
        "id": 153897572,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1500597983
    },
    {
        "content": "<p>For now I may just ditch adding slices, reslicing, etc. and instead copy the base profile and modify it directly. This is for a comment-only ballot, so I will mention in the IG description that we will try to get the inheritance working properly before going back for STU.</p>",
        "id": 153897682,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1500644500
    },
    {
        "content": "<blockquote>\n<p><span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> You you hand edit what? The generated HTML? Or do you take the generated StructureDefinition and hand edit that (differential and snapshot) then feed it back to the IG publisher again? If so, do the Differential and Snapshot tabs render correctly?</p>\n</blockquote>\n<p>I hand edit the SD  - delete text, snapshot and edit the diff</p>",
        "id": 153898472,
        "sender_full_name": "Eric Haas",
        "timestamp": 1501101258
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span>, the derived profile should repeat the slice entry. Then you can add constraints on existing named slices and introduce new named slices. Forge supports this BTW.</p>",
        "id": 153898714,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1501141652
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191336\">@Michel Rutten</span> Yes, it worked fine for me in Forge, but the IG publisher would not recognize the new slice when it generated the snapshot and differential diagrams.</p>",
        "id": 153898837,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1501183128
    },
    {
        "content": "<p>adding a new slice to another profile ( using the same discriminator worked for me in IG pub.  I get slice1 in profile1 and add slice2 in profile2 based on profile 1.</p>\n<div class=\"codehilite\"><pre><span></span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;StructureDefinition xmlns=&quot;http://hl7.org/fhir&quot;&gt;\n    &lt;id value=&quot;template-basic2&quot;/&gt;\n    &lt;url value=&quot;http://www.fhir.org/guides/test/StructureDefinition/template-basic2&quot;/&gt;\n&lt;!-- snip ... --&gt;\n    &lt;baseDefinition value=&quot;http://www.fhir.org/guides/test/StructureDefinition/template-basic&quot;/&gt;\n    &lt;derivation value=&quot;constraint&quot;/&gt;\n    &lt;differential&gt;\n    &lt;element id=&quot;Basic&quot;&gt;\n        &lt;path value=&quot;Basic&quot;/&gt;\n        &lt;definition value=&quot;This is a simple example Template.&quot;/&gt;\n        &lt;mustSupport value=&quot;false&quot;/&gt;\n        &lt;isModifier value=&quot;false&quot;/&gt;\n    &lt;/element&gt;\n&lt;!--  ****** the discriminator is defined in the profile upon which this profile is based *********\n    &lt;element id=&quot;Basic.identifier&quot;&gt;\n      &lt;path value=&quot;Basic.identifier&quot;/&gt;\n      &lt;slicing&gt;\n    &lt;discriminator&gt;\n      &lt;type value=&quot;value&quot;/&gt;\n      &lt;path value=&quot;system&quot;/&gt;\n    &lt;/discriminator&gt;\n    &lt;rules value=&quot;open&quot;/&gt;\n      &lt;/slicing&gt;\n      &lt;min value=&quot;1&quot;/&gt;\n      &lt;max value=&quot;*&quot;/&gt;\n      &lt;type&gt;\n    &lt;code value=&quot;Identifier&quot;/&gt;\n      &lt;/type&gt;\n      &lt;mustSupport value=&quot;true&quot;/&gt;\n      &lt;isModifier value=&quot;false&quot;/&gt;\n    &lt;/element&gt;\n--&gt;\n&lt;!--add a slice in the new profile --&gt;\n    &lt;element id=&quot;Basic.identifier:slice2&quot;&gt;\n        &lt;path value=&quot;Basic.identifier&quot;/&gt;\n        &lt;sliceName value=&quot;slice2&quot;/&gt;\n        &lt;min value=&quot;1&quot;/&gt;\n        &lt;max value=&quot;1&quot;/&gt;\n        &lt;type&gt;\n          &lt;code value=&quot;Identifier&quot;/&gt;\n        &lt;/type&gt;\n        &lt;mustSupport value=&quot;true&quot;/&gt;\n        &lt;isModifier value=&quot;false&quot;/&gt;\n    &lt;/element&gt;\n    &lt;element id=&quot;Basic.identifier:slice2.system&quot;&gt;\n        &lt;path value=&quot;Basic.identifier.system&quot;/&gt;\n        &lt;min value=&quot;1&quot;/&gt;\n        &lt;max value=&quot;1&quot;/&gt;\n        &lt;type&gt;\n            &lt;code value=&quot;uri&quot;/&gt;\n        &lt;/type&gt;\n        &lt;fixedUri value=&quot;http://acme.org/identifiers2&quot;/&gt;\n        &lt;mustSupport value=&quot;true&quot;/&gt;\n        &lt;isModifier value=&quot;false&quot;/&gt;\n    &lt;/element&gt;\n    &lt;/differential&gt;\n&lt;/StructureDefinition&gt;\n</pre></div>",
        "id": 153898838,
        "sender_full_name": "Eric Haas",
        "timestamp": 1501184533
    },
    {
        "content": "<p>tried to add a discriminator in profile2 and that did not work for me</p>",
        "id": 153898840,
        "sender_full_name": "Eric Haas",
        "timestamp": 1501184618
    }
]