[
    {
        "content": "<p>Hi All,<br>\nI am new with HL7-FHIR data transmission standards, but I have been reading the documents and posts over the last few weeks on the FHIR website.  Our project team is using FHIR standards to ingest healthcare data into our system.   My interest is to understand at a high-level the data architecture that FHIR supports so that we may have an accurate depiction for storage.  From Kevin Mayfield post, he provided a link to a FHIR (STU3) model at <a href=\"https://www.openhealthhub.org/t/exploring-fhir-model-database/1987\" target=\"_blank\" title=\"https://www.openhealthhub.org/t/exploring-fhir-model-database/1987\">https://www.openhealthhub.org/t/exploring-fhir-model-database/1987</a>  with a relational database model using HAPI RESTful server.  Working with a system engineer, we run the server in RedHat 7 Operating System and when we try to compose the yml file we were getting those errors, as indicated below.  We need the yml file, which executes.  <br>\nThe file continues to throw errors; ERROR: yaml.parser.ParserError: while parsing a block mapping<br>\nin \"./docker-compose.yml\", line 10, column 4<br>\nexpected &lt;block end&gt;, but found '&lt;block mapping start&gt;'<br>\nin \"./docker-compose.yml\", line 16, column 5<br>\nYour help is much appreciated.<br>\nRegards, <br>\nMarian</p>",
        "id": 164991611,
        "sender_full_name": "Marian Berda",
        "timestamp": 1557156741
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"194909\">@Kevin Mayfield</span> ?  Also, you might raise the question on the <a class=\"stream\" data-stream-id=\"179289\" href=\"/#narrow/stream/179289-storage-for-FHIR\">#storage for FHIR</a> stream</p>",
        "id": 165007009,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1557167837
    },
    {
        "content": "<p>Did you use the docker-compose.min.yml? </p>\n<p>I can't see anything obviously wrong with the yml file. It sounds like it's missing some spaces in the file.</p>",
        "id": 165008312,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1557168740
    },
    {
        "content": "<p>p.s. that is an interpretation of the FHIR model in RDBMS form. Not all of the resources were implemented and some optimisations were implemented (e.g. some one to many CodeableConcepts were turned to 1..1 as we were only expecting to support SNOMED) but it does give the gist of the model.</p>",
        "id": 165008784,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1557169080
    },
    {
        "content": "<p>p.s. the model isn't 100% accurate, some optimisations were done and some resources haven't been implemented (it was expected to evolve alongside the UK model)</p>",
        "id": 165008903,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1557169156
    },
    {
        "content": "<p>Thanks so much, Kevin..   We double checked again and confirmed nothing is missing.   We also used another yml file, compose it and it works.  Is it possible to send along your yml file directly.   <a href=\"http://10.97.21.204:8000/wp-admin/install.php\" target=\"_blank\" title=\"http://10.97.21.204:8000/wp-admin/install.php\">http://10.97.21.204:8000/wp-admin/install.php</a><br>\nversion: '3'<br>\nservices:<br>\n   db:<br>\n     image: mysql:5.7<br>\n     volumes:<br>\n       - db_data:/var/lib/mysql<br>\n     restart: always<br>\n     environment:<br>\n       MYSQL_ROOT_PASSWORD: somewordpress<br>\n       MYSQL_DATABASE: wordpress<br>\n       MYSQL_USER: wordpress<br>\n       MYSQL_PASSWORD: wordpress</p>\n<p>wordpress:<br>\n     depends_on:<br>\n       - db<br>\n     image: wordpress:latest<br>\n     ports:<br>\n       - \"8000:80\"<br>\n     restart: always<br>\n     environment:<br>\n       WORDPRESS_DB_HOST: db:3306<br>\n       WORDPRESS_DB_USER: wordpress<br>\n       WORDPRESS_DB_PASSWORD: wordpress<br>\nvolumes:<br>\n    db_data: <br>\n We are so close.   Since I have limited knowledge of the structure, your data model, although not 100%, will give us a jump start to understand the structure.   Much appreciate your help.   Marian</p>",
        "id": 165011774,
        "sender_full_name": "Marian Berda",
        "timestamp": 1557171298
    },
    {
        "content": "<p>Getting closer...   This is the error now received with yml file now.  Any thoughts on how to resolve?</p>\n<p>WARNING: The IMAGE_TAG variable is not set. Defaulting to a blank string.<br>\nWARNING: The MYSQL_DB_USER variable is not set. Defaulting to a blank string.<br>\nWARNING: The MYSQL_DB_PASSWORD variable is not set. Defaulting to a blank string.<br>\nWARNING: The FHIR_SERVER_BASE_HOST variable is not set. Defaulting to a blank string.<br>\nccrisql is up-to-date<br>\nCreating ccriserver ... error</p>",
        "id": 165077852,
        "sender_full_name": "Marian Berda",
        "timestamp": 1557240604
    },
    {
        "content": "<p>BTW:  We are running docker on Linux - Redhat 7</p>",
        "id": 165080833,
        "sender_full_name": "Marian Berda",
        "timestamp": 1557242372
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191687\">@Kevin Mayfield</span> <span class=\"user-mention\" data-user-id=\"191318\">@nicola (RIO/SS)</span> <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>   We are so close to view the FHIR (STU3) relational model.   Using Linux Redhat 7 server with docker installed.    If can have a session or guidiance to resolve this issue, much appreciate.   So close...<br>\n This is what i did just now... <br>\nversion: '3'<br>\nservices:<br>\n   db:<br>\n     image: mysql:5.7<br>\n     volumes:<br>\n       - db_data:/var/lib/mysql<br>\n     restart: always<br>\n     environment:<br>\n       MYSQL_ROOT_PASSWORD: somewordpress<br>\n       MYSQL_DATABASE: wordpress<br>\n       MYSQL_USER: wordpress<br>\n       MYSQL_PASSWORD: wordpress<br>\n<br>\n   wordpress:<br>\n     depends_on:<br>\n       - db<br>\n     image: wordpress:latest<br>\n     ports:<br>\n       - \"8000:80\"<br>\n     restart: always<br>\n     environment:<br>\n       WORDPRESS_DB_HOST: db:3306<br>\n       WORDPRESS_DB_USER: wordpress<br>\n       WORDPRESS_DB_PASSWORD: wordpress<br>\nvolumes:<br>\n    db_data:</p>",
        "id": 165272331,
        "sender_full_name": "Marian Berda",
        "timestamp": 1557422865
    },
    {
        "content": "<p>Ok - and what problems are you running into?</p>",
        "id": 165275224,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1557425210
    },
    {
        "content": "<p>The link to the docker-compose is this <a href=\"https://github.com/nhsconnect/careconnect-reference-implementation/blob/master/docker-compose.min.yml\" target=\"_blank\" title=\"https://github.com/nhsconnect/careconnect-reference-implementation/blob/master/docker-compose.min.yml\">https://github.com/nhsconnect/careconnect-reference-implementation/blob/master/docker-compose.min.yml</a></p>\n<p>if you're not setting the environment variables you will need to change the variables ${MYSQL_DB_USER} with real values. <br>\nThis is a link to default values we used <a href=\"https://github.com/nhsconnect/careconnect-reference-implementation/blob/master/.env\" target=\"_blank\" title=\"https://github.com/nhsconnect/careconnect-reference-implementation/blob/master/.env\">https://github.com/nhsconnect/careconnect-reference-implementation/blob/master/.env</a></p>\n<p>so the entry in the docker-compose like this:</p>\n<p>environment:<br>\n     - POSTGRES_DB=careconnect<br>\n     - POSTGRES_USER=${MYSQL_DB_USER}<br>\n     - POSTGRES_PASSWORD=${MYSQL_DB_PASSWORD}</p>\n<p>would become </p>\n<p>environment:<br>\n     - POSTGRES_DB=careconnect<br>\n     - POSTGRES_USER=fhirjpa<br>\n     - POSTGRES_PASSWORD=fhirjpa</p>",
        "id": 165279608,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1557428208
    },
    {
        "content": "<p>Thank you for your response and guidance through the errors.  It still returns an error that may stem from IP address error.  <br>\nBelow is the error.</p>\n<p>WARNING: The IMAGE_TAG variable is not set. Defaulting to a blank string.<br>\nWARNING: The MYSQL_DB_USER variable is not set. Defaulting to a blank string.<br>\nWARNING: The MYSQL_DB_PASSWORD variable is not set. Defaulting to a blank string.<br>\nWARNING: The FHIR_SERVER_BASE_HOST variable is not set. Defaulting to a blank string.<br>\nccrisql is up-to-date<br>\nCreating ccriserver ... error</p>\n<p>ERROR: for ccriserver  Cannot create container for service ccriserver: bad format for add-host: \":127.0.0.1\"</p>\n<p>ERROR: for ccriserver  Cannot create container for service ccriserver: bad format for add-host: \":127.0.0.1\"<br>\nERROR: Encountered errors while bringing up the project.</p>",
        "id": 165284735,
        "sender_full_name": "Marian Berda",
        "timestamp": 1557432505
    },
    {
        "content": "<p>@Kevin Mayfield| @niciola  @Lloyd McKenzie   We have experienced some many issues just to view the FHIR (STU3) relational model.   Although I realize that it is not with your file per se, but the attempt to use docker to access the file.   Note:  <a href=\"https://forums.docker.com/t/docker-for-windows-image-operating-system-linux-cannot-be-used-on-this-platform/28936\" target=\"_blank\" title=\"https://forums.docker.com/t/docker-for-windows-image-operating-system-linux-cannot-be-used-on-this-platform/28936\">https://forums.docker.com/t/docker-for-windows-image-operating-system-linux-cannot-be-used-on-this-platform/28936</a>, the latest...   Is there another way to get to view the diagram?</p>",
        "id": 165551310,
        "sender_full_name": "Marian Berda",
        "timestamp": 1557769714
    },
    {
        "content": "<p>Someone successfully ran a diagram 1.5 to 2 years ago - I think on STU 2.  I did a brief search here but wasn't able to find the post.  In any event, it was pretty much unreadable because so many resources point to each other.  Every Reference(Any) and every place you can have an extension will point to all other resources.  Even if you eliminate those, pretty much everything points to Patient, Encounter, Practitioner, PractitionerRole, Device and Organization and lots that point to many other things.  The result is that a diagram showing all of FHIR doesn't really buy you much beyond confirming \"yup, that's a lot of relationships...\".  FHIR is not designed to be a persistence model so diagramability of the whole structure is not much of a consideration.  It can certainly be used for persistence - see <a class=\"stream\" data-stream-id=\"179289\" href=\"/#narrow/stream/179289-storage-for-FHIR\">#storage for FHIR</a>, but useful diagrams are going to be hard to come by.</p>",
        "id": 165555583,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1557772409
    },
    {
        "content": "<p>I did used to maintain a diagram back in the early days - 0.01 kid of early - but it rapidly turned into spaghetti. The only useful way is a visual browser. There's one in clinfhir</p>",
        "id": 165560682,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1557775474
    },
    {
        "content": "<p>Simplifier shows you diagrams on demand (if you're a beta tester) - works with any resources, so core / profiles / extensions etc</p>\n<p><a href=\"/user_uploads/10155/Y1vju9VHDFvkvp1VnpnoSQr-/Selection_002.png\" target=\"_blank\" title=\"Selection_002.png\">Selection_002.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/Y1vju9VHDFvkvp1VnpnoSQr-/Selection_002.png\" target=\"_blank\" title=\"Selection_002.png\"><img src=\"/user_uploads/10155/Y1vju9VHDFvkvp1VnpnoSQr-/Selection_002.png\"></a></div>",
        "id": 165605825,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1557825323
    },
    {
        "content": "<p>Diagrams for core resources are kind of huge</p>",
        "id": 165605837,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1557825338
    }
]