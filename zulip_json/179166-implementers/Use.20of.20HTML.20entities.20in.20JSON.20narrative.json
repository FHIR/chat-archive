[
    {
        "content": "<p>Hi, I have a question regarding the use of HTML entities in the narrative when using JSON as representation format. The STU3 specs mention the following about this (<a href=\"http://www.hl7.org/fhir/STU3/narrative.html\" target=\"_blank\" title=\"http://www.hl7.org/fhir/STU3/narrative.html\">http://www.hl7.org/fhir/STU3/narrative.html</a>): <br>\n\"Note that the XHTML is contained in general XML so there is no support for HTML entities like &amp;nbsp; or &amp;copy; etc. Unicode characters SHALL be used instead. Unicode &amp;#160; substitutes for &amp;nbsp;.\"<br>\nThis phrase refers to a narrative in XML format, but it is unclear if the same applies to narratives in JSON. Could someone clarify this? Thanks!</p>",
        "id": 161247204,
        "sender_full_name": "Ruben Pape",
        "timestamp": 1553088900
    },
    {
        "content": "<p>It applies to JSON too.</p>",
        "id": 161248978,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1553090094
    },
    {
        "content": "<p>Ok clear, thanks! What's the reason to apply this constraint on JSON too, if I may ask?</p>",
        "id": 161249426,
        "sender_full_name": "Ruben Pape",
        "timestamp": 1553090362
    },
    {
        "content": "<p>The data needs to be portable between the JSON, XML and RDF</p>",
        "id": 161256726,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1553094945
    },
    {
        "content": "<p>Right, that makes sense. Thanks!</p>",
        "id": 161257625,
        "sender_full_name": "Ruben Pape",
        "timestamp": 1553095499
    },
    {
        "content": "<p>Then hapi-fhir outputs invalid JSON. When using XML, HTML entities in narratives are converted to their unicode characters, but not when using JSON. I made a bug report on GitHub a while ago: <a href=\"https://github.com/jamesagnew/hapi-fhir/issues/1160\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/issues/1160\">https://github.com/jamesagnew/hapi-fhir/issues/1160</a></p>",
        "id": 161750152,
        "sender_full_name": "Gijsbert van den Brink",
        "timestamp": 1553597806
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span></p>",
        "id": 161768952,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1553611850
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> Can you please confirm that this is a bug in hapi-fhir? And if it is, any idea when this can be fixed?</p>",
        "id": 162898488,
        "sender_full_name": "Gijsbert van den Brink",
        "timestamp": 1554806593
    }
]