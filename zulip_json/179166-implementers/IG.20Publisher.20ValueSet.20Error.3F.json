[
    {
        "content": "<p>I'm getting this odd error from the IG publisher when I include a ValueSet in the resources directory (didn't even reference it in the ImplementationGuide or control file):</p>",
        "id": 153850303,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474500962
    },
    {
        "content": "<p>Exception in thread \"main\" java.lang.Error: fetching org.hl7.fhir.dstu3.model.ValueSet not done yet for URI urn:oid:2.16.840.1.113883.1.11.1<br>\n        at org.hl7.fhir.dstu3.utils.SimpleWorkerContext.fetchResource(SimpleWorkerContext.java:343)<br>\n        at org.hl7.fhir.igtools.publisher.IGKnowledgeProvider.resolveBinding(IGKnowledgeProvider.java:331)<br>\n        at org.hl7.fhir.dstu3.utils.ProfileUtilities.generateDescription(ProfileUtilities.java:1869)<br>\n        at org.hl7.fhir.dstu3.utils.ProfileUtilities.generateDescription(ProfileUtilities.java:1804)<br>\n        at org.hl7.fhir.dstu3.utils.ProfileUtilities.genElement(ProfileUtilities.java:1676)<br>\n        at org.hl7.fhir.dstu3.utils.ProfileUtilities.genElement(ProfileUtilities.java:1702)<br>\n        at org.hl7.fhir.dstu3.utils.ProfileUtilities.generateTable(ProfileUtilities.java:1566)<br>\n        at org.hl7.fhir.igtools.renderers.StructureDefinitionRenderer.diff(StructureDefinitionRenderer.java:314)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.generateOutputsStructureDefinition(Publisher.java:2064)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.generateOutputs(Publisher.java:1799)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.generate(Publisher.java:1254)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:236)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:2194)</p>",
        "id": 153850304,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474500964
    },
    {
        "content": "<p>Has anyone seen this before?</p>",
        "id": 153850305,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474500970
    },
    {
        "content": "<p>I just confirmed... the ValueSet is valid against both schema and schematron</p>",
        "id": 153850306,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474501069
    },
    {
        "content": "<p>Seems to be something related to the binding of the value set in a structure definition</p>",
        "id": 153850307,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474501740
    },
    {
        "content": "<p>Anyone know the inner-workings of the ig publisher when it comes to value sets?</p>",
        "id": 153850308,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474501752
    },
    {
        "content": "<p>I see that it connects to grahame's terminology server as one of the starting processes of the publisher</p>",
        "id": 153850309,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474501790
    },
    {
        "content": "<p>is it trying to retrieve the value set from grahame's server even though I already have it defined (and expanded) in the ig?</p>",
        "id": 153850310,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474501815
    },
    {
        "content": "<p>Nope.. that can't be it, I just posted the value set to the server no prob... ig publisher still complains</p>",
        "id": 153850311,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474502029
    },
    {
        "content": "<p>Also, is there a way to change which fhir server the ig publisher uses to resolve value sets?</p>",
        "id": 153850312,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474502179
    },
    {
        "content": "<p>that error - which I really should fix - means that you're referring to a value set that doesn't exist in your binding statement</p>",
        "id": 153850323,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1474536071
    },
    {
        "content": "<p>what do you mean by \"doesn't exist\"?</p>",
        "id": 153850409,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474559871
    },
    {
        "content": "<p>I included it in the ImplementationGuide that I'm publishing, and there is a file that is in the resources directory</p>",
        "id": 153850410,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474559892
    },
    {
        "content": "<p>is there something more that should be done?</p>",
        "id": 153850411,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474559901
    },
    {
        "content": "<p>Is it used by any of your models?</p>",
        "id": 153850412,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1474559978
    },
    {
        "content": "<p>yes.. one of my StructureDefinition's elements does use it</p>",
        "id": 153850414,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474560511
    },
    {
        "content": "<p>I think Grahame was indicating that the binding in the element of my StructureDefinition is what's causing the problem... says the value set doesn't actually exist. but I'm not sure how to resolve it</p>",
        "id": 153850415,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474560545
    },
    {
        "content": "<p>Make sure your id and your fullUrl align in the ValueSet.  Make sure the value set filename is \"valueset-\" + id + \".xml\" and make sure the binding uses the fullUrl.  If that's all right, I'm not sure what the issue might be</p>",
        "id": 153850417,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1474560967
    },
    {
        "content": "<p>ok. I'll give those a shot</p>",
        "id": 153850418,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474560996
    },
    {
        "content": "<p>only thing I think I haven't done yet is the valueset-ID.xml format</p>",
        "id": 153850419,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474561018
    },
    {
        "content": "<p>I think mine right now is valueset/ID.xml</p>",
        "id": 153850420,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474561025
    },
    {
        "content": "<p>so I will try valueset/valueset-ID.xml</p>",
        "id": 153850421,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474561033
    },
    {
        "content": "<p>I'll try and find time to get to this this afternoon - really hard to get to things while at the HL7 meeting. soryr</p>",
        "id": 153850425,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1474564589
    },
    {
        "content": "<p>but urn:oid:2.16.840.1.113883.1.11.1 is what's in the binding. So you must have a ValueSet with a url of urn:oid:2.16.840.1.113883.1.11.1, and the value set must be registered in the ig.xml</p>",
        "id": 153850426,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1474564679
    },
    {
        "content": "<p>ok</p>",
        "id": 153850440,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474567618
    },
    {
        "content": "<p>I'll double check that I'm doing that right</p>",
        "id": 153850441,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474567623
    },
    {
        "content": "<p>if it's not working still after, I will send an example zip and see if either of you can help me figure out what's wrong</p>",
        "id": 153850442,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474567646
    },
    {
        "content": "<p>ok... so, this is what I have:</p>",
        "id": 153850458,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474571170
    },
    {
        "content": "<p>binding.valueSetReference = urn:oid.2.16.840.1.113883.1.11.1</p>",
        "id": 153850459,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474571189
    },
    {
        "content": "<p>ImplementationGuide has a resource with sourceReference.reference = ValueSet/2.16.840.1.113883.1.11.1</p>",
        "id": 153850460,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474571217
    },
    {
        "content": "<p>And I have a ValueSet XML file in resources/valueset/2.16.840.1.113883.1.11.1.xml that has a url of \"urn:oid:2.16.840.1.113883.1.11.1\"</p>",
        "id": 153850461,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474571261
    },
    {
        "content": "<p>still getting the same error</p>",
        "id": 153850462,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474571265
    },
    {
        "content": "<p>Exception in thread \"main\" java.lang.Error: fetching org.hl7.fhir.dstu3.model.ValueSet not done yet for URI urn:oid:2.16.840.1.113883.1.11.1</p>",
        "id": 153850463,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474571291
    },
    {
        "content": "<p>Found the .java file that this error is produced from.</p>",
        "id": 153850464,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474571475
    },
    {
        "content": "<p>as far as I can tell, fetchResource() does not seem to support uri's</p>",
        "id": 153850465,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474571485
    },
    {
        "content": "<p>it only seems to support http://</p>",
        "id": 153850466,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474571491
    },
    {
        "content": "<p>also, doesn't appear to support https://</p>",
        "id": 153850467,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474571504
    },
    {
        "content": "<p>...not much of a java guy, though. so maybe I'm missing something</p>",
        "id": 153850468,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474571587
    },
    {
        "content": "<p>ok. figured stuff out a bit</p>",
        "id": 153850469,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474571941
    },
    {
        "content": "<p>I should have figured this out sooner... <span class=\"user-mention\" data-user-id=\"191407\">@Rick Geimer</span> mentioned this to me last week</p>",
        "id": 153850470,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474571968
    },
    {
        "content": "<p>but, basically, the ig publisher doesn't currently support non-http value set urls</p>",
        "id": 153850471,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474571993
    },
    {
        "content": "<p>once I changed the binding's \"valueSetReference\" to \"<a href=\"http://test.com/2.16\" target=\"_blank\" title=\"http://test.com/2.16\">http://test.com/2.16</a>....\" and changed the ValueSet resource's url to \"<a href=\"http://test.com/2.16\" target=\"_blank\" title=\"http://test.com/2.16\">http://test.com/2.16</a>...\" the publish worked</p>",
        "id": 153850472,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474572032
    },
    {
        "content": "<p>does anyone know if there is a gforge tracker issue already submitted for this?</p>",
        "id": 153850473,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474572062
    },
    {
        "content": "<p>I don't think there is. but it sounds trivial to fix, actually. In fact, I feel bad that I didn't think of that</p>",
        "id": 153850476,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1474574001
    },
    {
        "content": "<p>np</p>",
        "id": 153850486,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474576154
    },
    {
        "content": "<p>I wouldn't complain about a quick fix :)</p>",
        "id": 153850487,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474576172
    },
    {
        "content": "<p>version 9871 should fix it </p>",
        "id": 153850488,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1474576228
    },
    {
        "content": "<p>holy cow</p>",
        "id": 153850496,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474579006
    },
    {
        "content": "<p>that was less than a minute!</p>",
        "id": 153850497,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474579009
    },
    {
        "content": "<p>lol</p>",
        "id": 153850498,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474579013
    },
    {
        "content": "<p>Is am I correct in thinking that <a href=\"http://hl7-fhir.github.io/org.hl7.fhir.igpublisher.jar\" target=\"_blank\" title=\"http://hl7-fhir.github.io/org.hl7.fhir.igpublisher.jar\">http://hl7-fhir.github.io/org.hl7.fhir.igpublisher.jar</a> is up-to-date with the latest build (including the fix you made)?</p>",
        "id": 153850502,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474580368
    },
    {
        "content": "<p>looked at travis ci's build logs, and it seems to publish to <a href=\"http://hl7-fhir.github.io\" target=\"_blank\" title=\"http://hl7-fhir.github.io\">hl7-fhir.github.io</a>...</p>",
        "id": 153850503,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474580383
    },
    {
        "content": "<p>yes that's the one. You need to hang out until that one hits #9871</p>",
        "id": 153850504,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1474580420
    },
    {
        "content": "<p>I think it did... <a href=\"https://travis-ci.org/hl7-fhir/fhir-svn\" target=\"_blank\" title=\"https://travis-ci.org/hl7-fhir/fhir-svn\">https://travis-ci.org/hl7-fhir/fhir-svn</a> shows git-svn-id: <a href=\"http://gforge.hl7.org/svn/fhir/trunk/build@9871\" target=\"_blank\" title=\"http://gforge.hl7.org/svn/fhir/trunk/build@9871\">http://gforge.hl7.org/svn/fhir/trunk/build@9871</a></p>",
        "id": 153850505,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474580803
    },
    {
        "content": "<p>and it shows completed</p>",
        "id": 153850506,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474580817
    },
    {
        "content": "<p>yeah but it takes a little time to post to the current build</p>",
        "id": 153850507,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1474581044
    },
    {
        "content": "<p>oh ok</p>",
        "id": 153850508,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474581051
    },
    {
        "content": "<p>any way to know when it's done?</p>",
        "id": 153850509,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474581056
    },
    {
        "content": "<p>wait till the build number at the foot of the downloads page updates</p>",
        "id": 153850510,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1474581077
    },
    {
        "content": "<p>oh heh yah! duh! thanks</p>",
        "id": 153850511,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474581094
    },
    {
        "content": "<p>hey grahame... so, not sure that the fix solved the problem. now I get this:</p>",
        "id": 153850632,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474675938
    },
    {
        "content": "<p>java.lang.NullPointerException<br>\n        at org.hl7.fhir.dstu3.context.SimpleWorkerContext.fetchResource(SimpleWorkerContext.java:361)<br>\n        at org.hl7.fhir.igtools.publisher.ValidationServices.fetch(ValidationServices.java:38)<br>\n        at org.hl7.fhir.dstu3.validation.InstanceValidator.resolve(InstanceValidator.java:1739)<br>\n        at org.hl7.fhir.dstu3.validation.InstanceValidator.checkReference(InstanceValidator.java:1148)<br>\n        at org.hl7.fhir.dstu3.validation.InstanceValidator.validateElement(InstanceValidator.java:2752)</p>",
        "id": 153850633,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474675946
    },
    {
        "content": "<p>prior to updating the ig publisher to the latest version you were mentioning, I was getting the error about not having retrieved the value set yet</p>",
        "id": 153850634,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474675974
    },
    {
        "content": "<p>I'll send an example of the package I'm building with the ig publisher in a PM</p>",
        "id": 153850635,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474676140
    },
    {
        "content": "<p>any ideas?</p>",
        "id": 153850796,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1474911139
    },
    {
        "content": "<p>any update?</p>",
        "id": 153851077,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1475077470
    },
    {
        "content": "<p>Yes, I got that.  It relates to external resolution that wasn't previously happening and it's not handling resource references that are by URI - where the type can't be extracted.  I've got a candidate fix for that, but I'm running into other issues that I want to figure out before I can commit.</p>",
        "id": 153851114,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1475094792
    },
    {
        "content": "<p>ok. great, thanks <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> If you don't mind, please let me know when that fix is committed. I am anxious to get the fix and see it work. Thanks</p>",
        "id": 153851121,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1475096298
    },
    {
        "content": "<p>how do I reproduce this? </p>",
        "id": 153851181,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1475119614
    },
    {
        "content": "<p>I sent a zip package to you that demonstrates this issue.</p>",
        "id": 153851340,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1475183498
    },
    {
        "content": "<p>It is in a private message</p>",
        "id": 153851341,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1475183537
    }
]