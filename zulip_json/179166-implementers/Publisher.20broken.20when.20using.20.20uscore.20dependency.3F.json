[
    {
        "content": "<p>I am trying to publish an IG (based on FHIR 3.0.1) that declares a dependency on uscore in the ig.json:</p>\n<div class=\"codehilite\"><pre><span></span>&quot;dependencyList&quot;: [\n    {\n      &quot;name&quot;: &quot;uscore&quot;,\n      &quot;location&quot;: &quot;http://hl7.org/fhir/us/core/1.0.1&quot;\n    }\n  ],\n</pre></div>\n\n\n<p>Using the 3.0.1 publisher jar, it works fine.  If I use the current build publisher jar, however, it crashes:</p>\n<div class=\"codehilite\"><pre><span></span>Load uscore (http://hl7.org/fhir/us/core/1.0.1) from http://hl7.org/fhir/us/core/1.0.1 (11.0686sec)\nVersion mismatch. This IG is version 3.2.0, while the IG &#39;uscore&#39; is from version 3.1.0. Will try to run anyway) (12.0035sec)\nException in thread &quot;main&quot; java.lang.Error: Not the right type for ElementDefinition.binding.valueSet[x]: Reference\n    at org.hl7.fhir.r4.model.ElementDefinition$ElementDefinitionBindingComponent.setValueSet(ElementDefinition.java:3466)\n    at org.hl7.fhir.r4.formats.JsonParser.parseElementDefinitionElementDefinitionBindingComponentProperties(JsonParser.java:1739)\n    at org.hl7.fhir.r4.formats.JsonParser.parseElementDefinitionElementDefinitionBindingComponent(JsonParser.java:1723)\n    at org.hl7.fhir.r4.formats.JsonParser.parseElementDefinitionProperties(JsonParser.java:1526)\n    at org.hl7.fhir.r4.formats.JsonParser.parseElementDefinition(JsonParser.java:1363)\n    at org.hl7.fhir.r4.formats.JsonParser.parseStructureDefinitionStructureDefinitionSnapshotComponentProperties(JsonParser.java:20735)\n    at org.hl7.fhir.r4.formats.JsonParser.parseStructureDefinitionStructureDefinitionSnapshotComponent(JsonParser.java:20726)\n    at org.hl7.fhir.r4.formats.JsonParser.parseStructureDefinitionProperties(JsonParser.java:20675)\n    at org.hl7.fhir.r4.formats.JsonParser.parseStructureDefinition(JsonParser.java:20543)\n    at org.hl7.fhir.r4.formats.JsonParser.parseResource(JsonParser.java:24564)\n    at org.hl7.fhir.r4.formats.JsonParserBase.parse(JsonParserBase.java:90)\n    at org.hl7.fhir.igtools.publisher.Publisher.loadIg(Publisher.java:1151)\n    at org.hl7.fhir.igtools.publisher.Publisher.initialize(Publisher.java:869)\n    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:352)\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:4125)\n</pre></div>\n\n\n<p>I've tried also adding a \"source\" parameter to the dependency object, but that doesn't seem to fix it.</p>\n<p>If I remove the uscore dependency, however, the publisher jar doesn't crash and I get my published IG.  Any tips or is this a flat-out bug?</p>",
        "id": 153945450,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1521221504
    },
    {
        "content": "<p>To make a long story short - here is a good definitions.json.zip.  I had to update US-Core to run on latest ig-pub.but not ready to be added to CI build since refactored the folders and still in the middle of ballot changes.</p>\n<p><a href=\"/user_uploads/10155/avaVIgtUE54PcgAQygoY_mwv/definitions.json.zip\" target=\"_blank\" title=\"definitions.json.zip\">definitions.json.zip</a></p>",
        "id": 153945466,
        "sender_full_name": "Eric Haas",
        "timestamp": 1521223793
    },
    {
        "content": "<p>Thanks, <span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> -- that seems to have done the trick!</p>",
        "id": 153945608,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1521258683
    },
    {
        "content": "<p>So the publisher only runs cleanly  when dependencyList in the ig.json file is empty.<br>\nIs there another work-around?</p>",
        "id": 153947050,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1521683414
    },
    {
        "content": "<p>Cross posted to implementers: <a href=\"https://chat.fhir.org/#narrow/stream/IG.20creation/topic/Problem.20with.20dependencyList\" target=\"_blank\" title=\"https://chat.fhir.org/#narrow/stream/IG.20creation/topic/Problem.20with.20dependencyList\">https://chat.fhir.org/#narrow/stream/IG.20creation/topic/Problem.20with.20dependencyList</a></p>",
        "id": 153947058,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1521693932
    },
    {
        "content": "<p>Previously I fixed it like this:</p>",
        "id": 153947072,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1521697363
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span>&quot;dependencyList&quot;: [\n    {\n      &quot;name&quot;: &quot;USCore&quot;,\n      &quot;location&quot;: &quot;http://hl7.org/fhir/us/core/1.0.1&quot;,\n      &quot;source&quot;: &quot;uscore&quot;\n    }\n  ],\n</pre></div>\n\n\n<p>And having a <code>uscore</code> folder in the root of my IG source project, containing the <code>definitions.json.zip</code> that Eric posted earlier in this thread.</p>",
        "id": 153947075,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1521697443
    },
    {
        "content": "<p>That worked the last few days, but apparently does not anymore.  See: <a href=\"https://chat.fhir.org/#narrow/stream/committers/subject/IG.20Publisher.20Error/near/136483\" target=\"_blank\" title=\"https://chat.fhir.org/#narrow/stream/committers/subject/IG.20Publisher.20Error/near/136483\">https://chat.fhir.org/#narrow/stream/committers/subject/IG.20Publisher.20Error/near/136483</a></p>",
        "id": 153947078,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1521697577
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191682\">@Richard Townley-O'Neill</span> -- see the end of the thread linked above for the solution.</p>",
        "id": 153947172,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1521725753
    },
    {
        "content": "<p>Thanks</p>",
        "id": 153947436,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1521762126
    }
]