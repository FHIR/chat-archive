[
    {
        "content": "<p>Hi folks! First time posting. </p>\n<p>I am new to accessing data via FHIR API, just wondering if I could get some insight on using \"_revinclude\" to quickly attain a Patient resource <strong>AND all resources which reference this specific Patient</strong></p>\n<p>The only example for _revinclude I see on the FHIR search documentation (link here <a href=\"https://www.hl7.org/fhir/search.html#revinclude\" target=\"_blank\" title=\"https://www.hl7.org/fhir/search.html#revinclude\">https://www.hl7.org/fhir/search.html#revinclude</a>) is the following: </p>\n<p>GET [base]/MedicationRequest?_revinclude=Provenance:target</p>\n<p>This is just for the example case of finding all Provenance resources that point to this MedicationRequest resource. </p>\n<p>How can I send a request for a Patient resource and use _revinclude to find any and all Resources that point to this Patient? (NOTE: Instead of specifying the Resource type to reverse-include, like in that example above)</p>\n<p>I appreciate any feedback I can get on this! Please let me know any thoughts... I am learning as fast as I can.</p>",
        "id": 172533722,
        "sender_full_name": "Mike C.",
        "timestamp": 1565035601
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"233880\">@Mike C.</span> -- welcome!  It sounds to me like you might actually want the Patient <code>$everything</code> operator: <a href=\"http://hl7.org/fhir/R4/patient-operation-everything.html\" target=\"_blank\" title=\"http://hl7.org/fhir/R4/patient-operation-everything.html\">http://hl7.org/fhir/R4/patient-operation-everything.html</a></p>",
        "id": 172534181,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1565035942
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span> ! Thanks, and yeah! That seems like exactly what I need. </p>\n<p>So, would it be fair to say that the _revinclude would be the best practice for finding all Resources <em>of a certain type</em> that relate to one specific Resource? </p>\n<p>At any rate, thanks for the tip!</p>",
        "id": 172534347,
        "sender_full_name": "Mike C.",
        "timestamp": 1565036048
    },
    {
        "content": "<blockquote>\n<p>So, would it be fair to say that the _revinclude would be the best practice for finding all Resources of a certain type that relate to one specific Resource?</p>\n</blockquote>\n<p><code>_revinclude</code> is very flexible in that you can define the target resource type and the specific search parameter on that target resource (to match the id on).  This gives it utility outside of just <code>Patient</code> and lets you match on fields that might mean something other than \"subject of record\".</p>\n<p>That said, FHIR also has a notion of <code>compartment</code>s which can also be used to look for resources related to another resource (most often a <code>Patient</code>).  This is more limited in what resources it works with, but is probably easier to use than <code>_revinclude</code>. See: <a href=\"https://www.hl7.org/fhir/compartmentdefinition.html\" target=\"_blank\" title=\"https://www.hl7.org/fhir/compartmentdefinition.html\">https://www.hl7.org/fhir/compartmentdefinition.html</a></p>\n<p>All that said, servers aren't <em>required</em> to support any of those things, so when you choose an approach, you also need to consider your target environment and which of those features its FHIR server supports.  If you want to be really thorough, you can write code that knows how to do it all and query the <code>CapabilityStatement</code> at run-time to determine which approach is supported (if any).</p>",
        "id": 172534424,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1565036120
    },
    {
        "content": "<p>I have a feeling that my FHIR repo's capability statement does not include this $everything command...</p>\n<p>I tried to pass the \"/$everything\" operation on a patient which I confirmed exists with the following url</p>\n<p>https://[base URL]/Patient/[patient id##]/$everything</p>\n<p>and was met with: </p>\n<p>{<br>\n    \"resourceType\": \"OperationOutcome\",<br>\n    \"id\": \"165#############7e7dab\",<br>\n    \"issue\": [<br>\n        {<br>\n            \"severity\": \"error\",<br>\n            \"code\": \"not-found\",<br>\n            \"diagnostics\": \"The requested route was not found.\"<br>\n        }<br>\n    ]<br>\n}</p>\n<p>Should I contact the repo's admin to add this to our capability statement, or is there a possibility that I did something wrong in that process? My command seems to match the specifications in that page you linked</p>",
        "id": 172535386,
        "sender_full_name": "Mike C.",
        "timestamp": 1565036895
    },
    {
        "content": "<p>Most production servers do not implement $everything (or _revinclude ... ) - you have to check the capabilities of the server(s) you are interested in</p>",
        "id": 172535594,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1565037056
    },
    {
        "content": "<p>What is your preferred method of quickly gathering all resources related to one specific Patient (or one specific resource in general, if not patient), when $everything Operation or _revinclude are not implemented?</p>",
        "id": 172536316,
        "sender_full_name": "Mike C.",
        "timestamp": 1565037644
    },
    {
        "content": "<p>I'm not sure if there is any \"quickly\" about it -- if neither <code>$everything</code> nor <code>_revinclude</code> are supported, and if using <code>compartment</code>s is not feasible/supported, then you probably need to construct a separate query for each related resource type.  Even then, servers aren't required to support every resource and query parameter either -- so at the end of the day, nothing is guaranteed.</p>",
        "id": 172537086,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1565038229
    },
    {
        "content": "<p>If the server supports it, you might be able to put all of these queries into a single <code>batch</code> request (<a href=\"http://hl7.org/fhir/R4/http.html#transaction\" target=\"_blank\" title=\"http://hl7.org/fhir/R4/http.html#transaction\">http://hl7.org/fhir/R4/http.html#transaction</a>), but I'm not sure how many servers support that either.</p>",
        "id": 172537212,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1565038337
    },
    {
        "content": "<p>EDIT: nevermind, found it!</p>",
        "id": 172537607,
        "sender_full_name": "Mike C.",
        "timestamp": 1565038671
    }
]