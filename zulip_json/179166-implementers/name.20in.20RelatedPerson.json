[
    {
        "content": "<p>According to FHIR STU3, \"name\" in the search parameters of RelatedPerson is defined as: \"A server defined search that may match any of the string fields in the HumanName, including family, give, prefix, suffix, suffix, and/or text\". I am wondering what the correct syntax is if we are going to query the RelatedPerson with a name \"Allen Smith Park\". Should it be:</p>\n<p><a href=\"http://myFHIRServer/RelatedPerson?name=allen%20smith%20park\" target=\"_blank\" title=\"http://myFHIRServer/RelatedPerson?name=allen%20smith%20park\">http://myFHIRServer/RelatedPerson?name=allen%20smith%20park</a> (Allen Smith Park)</p>\n<p>or</p>\n<p><a href=\"http://myFHIRServer/RelatedPerson?name=allen%2Csmith%2Cpark\" target=\"_blank\" title=\"http://myFHIRServer/RelatedPerson?name=allen%2Csmith%2Cpark\">http://myFHIRServer/RelatedPerson?name=allen%2Csmith%2Cpark</a> (name separated by a comma, i.e., Allen,Smith,Park)</p>\n<p>Thanks.</p>",
        "id": 153918467,
        "sender_full_name": "redixint",
        "timestamp": 1510231827
    },
    {
        "content": "<p>There's no comma-separation</p>",
        "id": 153918473,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1510233473
    },
    {
        "content": "<p>We also thought that there should be no comma between the names. However, it does not work on a number of FHIR servers, e.g., HAPI, Furore, sqlonfhir, etc.</p>",
        "id": 153918481,
        "sender_full_name": "redixint",
        "timestamp": 1510235416
    },
    {
        "content": "<p>Did you try <a href=\"http://myFHIRServer/RelatedPerson?name=allen&amp;name=smith&amp;name=park\" target=\"_blank\" title=\"http://myFHIRServer/RelatedPerson?name=allen&amp;name=smith&amp;name=park\">http://myFHIRServer/RelatedPerson?name=allen&amp;name=smith&amp;name=park</a>   ?</p>",
        "id": 153918484,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1510238066
    },
    {
        "content": "<blockquote>\n<p>Did you try <a href=\"http://myFHIRServer/RelatedPerson?name=allen&amp;name=smith&amp;name=park\" target=\"_blank\" title=\"http://myFHIRServer/RelatedPerson?name=allen&amp;name=smith&amp;name=park\">http://myFHIRServer/RelatedPerson?name=allen&amp;name=smith&amp;name=park</a>   ?</p>\n</blockquote>\n<p>I tried and this will return all of the RelatedPersons with a name (first/given/middle) in \"Allen\", \"Smith\" and \"Park\".  This is not what we want. We would hope to have an unique search on a name with family=Park&amp;first=Allen.</p>",
        "id": 153918486,
        "sender_full_name": "redixint",
        "timestamp": 1510238718
    },
    {
        "content": "<p>make a gforge to add family and given search params for RelatedPerson.  Meanwhile you can create your own.</p>",
        "id": 153918519,
        "sender_full_name": "Eric Haas",
        "timestamp": 1510246814
    },
    {
        "content": "<p>It really comes down to whether a server should \"infer\" the value of name.text if one isn't set - and handle search against that.  If they did, then the \"Allen Smith Park\" search would have worked.  Perhaps a change request for us to clarify?</p>",
        "id": 153918527,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1510248039
    },
    {
        "content": "<p>assuming the space is merely a separator, but that is not clear.</p>",
        "id": 153918531,
        "sender_full_name": "Eric Haas",
        "timestamp": 1510248304
    },
    {
        "content": "<p>and you still would get Allen Park Smith or Park Allen Smith etc...</p>",
        "id": 153918532,
        "sender_full_name": "Eric Haas",
        "timestamp": 1510248349
    },
    {
        "content": "<p>Would that inference be an exact match? Otherwise, you're starting to get into some fun formatting and \"what is the proper order of a name\" logic with that type of search</p>",
        "id": 153918577,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1510255700
    },
    {
        "content": "<p>usually the default is \"starts with\" so, if we use that and searched on Allen Smith Park, then it would only match if name.text is formatted the same way (vs Park, Allen Smith, MD ...)</p>",
        "id": 153918578,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1510255771
    },
    {
        "content": "<p>And it wouldn't match both Allen Park Smith or Park Allen Smith, but the app would also need to understand how the underlying name is formatted for display</p>",
        "id": 153918579,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1510255827
    },
    {
        "content": "<p>... it seems easier to just specify the separate fields, especially once you start exploring names like \"Jane Mary Doe de Smith\"</p>",
        "id": 153918580,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1510255919
    },
    {
        "content": "<p>separate fields has the consquence that you are searching for matches to either the family or the given. if you want to search both the family and the given, you need the _filter parameter, but hardly any servers support that</p>",
        "id": 153918652,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1510265245
    },
    {
        "content": "<p>So, to sanity check my understanding: family=Smith&amp;given=John should match \"John Smith\" but not John Doe - right? Because &amp; is intersection and , is \"or\" - and anything more complicated is supposed to be filter?</p>",
        "id": 153918659,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1510266462
    },
    {
        "content": "<p>And family=Smith&amp;family=Doe would be nothing, based on the intersection there being an empty set?</p>",
        "id": 153918660,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1510266503
    },
    {
        "content": "<p>oh yes. sorry, what I wrote above was wrong</p>",
        "id": 153918662,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1510266638
    },
    {
        "content": "<p>phew.</p>",
        "id": 153918663,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1510266715
    },
    {
        "content": "<p>I would have had a lot of code to fix :)</p>",
        "id": 153918664,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1510266755
    },
    {
        "content": "<p>so would I</p>",
        "id": 153918665,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1510266783
    },
    {
        "content": "<p>Unless you're in DSTU2, where HumanName.family is 0-*, so a person could have the two family names 'Smith' and 'Doe' and match your search :-)<br>\nIn both HAPI (I think) and Vonk you can add custom searchparameters, also composite ones - that would allow you to specify the proposed search exactly.</p>",
        "id": 153921071,
        "sender_full_name": "Christiaan Knaap",
        "timestamp": 1511374938
    }
]