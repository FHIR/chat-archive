[
    {
        "content": "<p>The definition of MessageHeader.response.identifier is \"The <a href=\"http://MessageHeader.id\" target=\"_blank\" title=\"http://MessageHeader.id\">MessageHeader.id</a> of the message to which this message is a response. Note, this is a business identifier, not a resource identifier\"</p>\n<p>However, I do not see <a href=\"http://MessageHeader.id\" target=\"_blank\" title=\"http://MessageHeader.id\">MessageHeader.id</a> defined as an element of the MessageHeader. Am I missing something?</p>",
        "id": 159950414,
        "sender_full_name": "AbdulMalik Shakir",
        "timestamp": 1551733365
    },
    {
        "content": "<p>yes it got moved to Bundle.identifier</p>",
        "id": 159951020,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1551733825
    },
    {
        "content": "<p>\"yes it got moved to Bundle.identifier</p>\n<p>Thanks.</p>",
        "id": 159952138,
        "sender_full_name": "AbdulMalik Shakir",
        "timestamp": 1551734670
    },
    {
        "content": "<p>AMS, can you submit a change request for us to correct the wording on MessageHeader.response.identifier?</p>",
        "id": 159952273,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1551734765
    },
    {
        "content": "<blockquote>\n<p>AMS, can you submit a change request for us to correct the wording on MessageHeader.response.identifier?</p>\n</blockquote>\n<p>Lloyd, I would be happy to submit a change request. Do you have a minute or two to show me how that is done?</p>",
        "id": 159957430,
        "sender_full_name": "AbdulMalik Shakir",
        "timestamp": 1551738693
    },
    {
        "content": "<p>At the bottom of the resource definition page is a link to Propose a change. Follow the link to gforge, and use the New Tracker Item button.</p>",
        "id": 159958753,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1551739900
    },
    {
        "content": "<p>For clarification,  should MessageHeader.response.identifier be typed as identifier instead of id? The description of the field as a \"business identifier\" instead of a \"resource identifier\" makes me think it should be the identifier type.</p>",
        "id": 167897146,
        "sender_full_name": "Ken Sinn",
        "timestamp": 1560292949
    },
    {
        "content": "<p>The 'system' for the MessageHeader identifier is known.  It <em>must</em> have a value.  There doesn't seem to be a good reason to move from 'id'.</p>",
        "id": 167897315,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1560293131
    },
    {
        "content": "<p>Is the correct wording for \"MessageHeader.response.identifier\" supposed to be \"The <strong>Bundle.identifier</strong> of the message to which this message is a response. Note, this is a business identifier, not a resource identifier\"? Or is MessageHeader.response.identifier supposed to be some other value?</p>",
        "id": 167978670,
        "sender_full_name": "Ken Sinn",
        "timestamp": 1560367168
    },
    {
        "content": "<p>It seems that it should be <a href=\"http://Bundle.id\" target=\"_blank\" title=\"http://Bundle.id\">Bundle.id</a>, though that makes the \"this is a business identifier, not a resource identifier\" assertion questionable.  If we were to point to bundle.identifier, that would make the MessageHeader.response.identifier data type wrong.  <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> ?</p>",
        "id": 167979059,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1560367450
    },
    {
        "content": "<p>Is there a \"business identifier\" for the MessageHeader somewhere? Or is it considered redundant by the Bundle.identifier value?</p>",
        "id": 167980135,
        "sender_full_name": "Ken Sinn",
        "timestamp": 1560368216
    },
    {
        "content": "<p>We dropped it (in STU3 I think) on the grounds that it was redundant with Bundle.identifier which got added in the same release.</p>",
        "id": 167988705,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1560373981
    },
    {
        "content": "<p>the definition and the type are consistent, and refer to the bundle id, not the Bundle.Identifier. This assumes that the <a href=\"http://bundle.id\" target=\"_blank\" title=\"http://bundle.id\">bundle.id</a> is unique in the context. If we were to change it to Bundle.identifier (which didn't exist earlier) then we'd have to change the type too</p>",
        "id": 168100932,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560478074
    },
    {
        "content": "<p>The usage note on MessageHeader.response.identifier says <code>This is a business identifier, not a resource identifier</code>.  That seems to be in conflict with it pointing to <a href=\"http://Bundle.id\" target=\"_blank\" title=\"http://Bundle.id\">Bundle.id</a>.  (I'm totally fine with it pointing to <a href=\"http://Bundle.id\" target=\"_blank\" title=\"http://Bundle.id\">Bundle.id</a>, we should just be clear.)</p>",
        "id": 168102922,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1560481290
    },
    {
        "content": "<p>We have a use case for having a MessageHeader.response.identifier be a business identifier, when you want to relate a series of Messages together using the same reference identifier (even if it's based on Bundle.identifier), rather than just the immediately previous <a href=\"http://MessageHeader.id\" target=\"_blank\" title=\"http://MessageHeader.id\">MessageHeader.id</a>. Based on Bundle.identifier definition, Bundle.identifier does not seem to be the right place to store a business identifier that would be the same across a series of Messages.<br>\nWe're okay with creating an extension on MessageHeader if necessary, but seems like there was already some thought put into using MessgeHeader.response.identifier for this purpose, based on the definition (though not on the element type).</p>",
        "id": 169236556,
        "sender_full_name": "Ken Sinn",
        "timestamp": 1561737178
    },
    {
        "content": "<p>we have not created an element on MessageHeader for an identifier that links a series of messages. If we did, I would ave called it \"MessageHeader.conversationId\". So that would be an extension (for now at least)</p>",
        "id": 169609626,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1562196370
    },
    {
        "content": "<p>Thank you for the feedback, Grahame. We'll be implementing this as an extension, and look forward to supporting this as an element in the future, if others also find use for this element.</p>",
        "id": 169659979,
        "sender_full_name": "Ken Sinn",
        "timestamp": 1562258511
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192143\">@Ken Sinn</span> , We've found a few use cases in the Canadian eReferral space where we think a larger transaction identifier, or broker 'conversation identifier' would be helpful.  <br>\nI've used an extension at this point.<br>\nI'd love to know/support if you push for inclusion.</p>",
        "id": 172062223,
        "sender_full_name": "Geoff Ramsay",
        "timestamp": 1564510390
    },
    {
        "content": "<p>The \"conversation\" would presumably resolve around task.  If the referral was part of a broader set of requests, then the requisition element would be appropriate.</p>",
        "id": 172063661,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1564511409
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"202753\">@Geoff Ramsay</span> , we will take a look at Lloyd's suggestion to use ServiceRequest.requisition, and see if the Message Bundles always include a ServiceRequest resource or not.</p>",
        "id": 172064959,
        "sender_full_name": "Ken Sinn",
        "timestamp": 1564512282
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>  It looks like <a href=\"http://build.fhir.org/messaging.html#3.4.1.4\">http://build.fhir.org/messaging.html#3.4.1.4</a> should also be changed, if messageheader.response.identifier is supposed to point to <a href=\"http://bundle.id\">bundle.id</a>?<br>\n\"The response message also quotes the request <a href=\"http://MessageHeader.id\">MessageHeader.id</a> in MessageHeader.response.identifier so that the source system can relate the response to its request.\"</p>",
        "id": 215587319,
        "sender_full_name": "Ken Sinn",
        "timestamp": 1604499989
    },
    {
        "content": "<p>See also <a href=\"#narrow/stream/179166-implementers/topic/FHIR.20Message.20identifiers\">https://chat.fhir.org/#narrow/stream/179166-implementers/topic/FHIR.20Message.20identifiers</a></p>",
        "id": 215588712,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1604500565
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192143\">@Ken Sinn</span>  did you implement a conversationID extension? <br>\nWe (in the UK) have the same requirement</p>",
        "id": 215589003,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1604500702
    },
    {
        "content": "<p>Thanks Kevin. The implementation stalled, so we did not have to implement the extension for now. Thanks for posting the other thread. I'll poke around in the fhir message stream, didn't know about that stream.</p>",
        "id": 215589920,
        "sender_full_name": "Ken Sinn",
        "timestamp": 1604501113
    },
    {
        "content": "<p>MessageHeader.response.identifier should point to Bundle.identifier.  <a href=\"http://Bundle.id\">Bundle.id</a> could change in transit, Bundle.identifier won't.</p>",
        "id": 215607846,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1604508146
    },
    {
        "content": "<blockquote>\n<p>MessageHeader.response.identifier should point to Bundle.identifier</p>\n</blockquote>\n<p>That is a big change.</p>",
        "id": 215608590,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1604508439
    },
    {
        "content": "<p>I don't know there's a choice.  The guidance is that if you touch the message in any way when routing, it's a new <a href=\"http://Bundle.id\">Bundle.id</a>.  And when the originator receives the response, it needs to be to an id they have, not that was created by routing jump #3.</p>",
        "id": 215639622,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1604523069
    },
    {
        "content": "<p>But the current reference is to <a href=\"http://MessageHeader.id\">MessageHeader.id</a>, not <a href=\"http://Bundle.id\">Bundle.id</a></p>",
        "id": 215659052,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1604536489
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> Do you recall where we landed here?  (In general, having identifier point to id is a bit odd)</p>",
        "id": 215666332,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1604544768
    },
    {
        "content": "<p>no I don't remember</p>",
        "id": 216450588,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1605176890
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192685\">@Vassil Peytchev</span> Can you raise a tracker item so we can get this landed?</p>",
        "id": 216472594,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1605190286
    },
    {
        "content": "<p>How quickly do you think this will get sorted, <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> ? We're currently designing based on the as-written documentation of using ids and not identifiers for the response reference.</p>",
        "id": 216480314,
        "sender_full_name": "Ken Sinn",
        "timestamp": 1605193705
    },
    {
        "content": "<p>Hopefully this year, but that's not a given.</p>",
        "id": 216481733,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1605194302
    },
    {
        "content": "<p>Suggestions on best way to handle the design to be future-proof? Is pointing MessageHeader.response.identifier to Bundle.identifer pretty much the only solution? (which means Bundle.identifier becomes a required element for Message Bundles? Or something that's only required for implementations expecting a Message response?</p>",
        "id": 216482378,
        "sender_full_name": "Ken Sinn",
        "timestamp": 1605194598
    },
    {
        "content": "<p>Pointing to <a href=\"http://Bundle.id\">Bundle.id</a> is definitely not safe - the <a href=\"http://Bundle.id\">Bundle.id</a> will change has the message propagates from server to server.  Pointing to <a href=\"http://MessageHeader.id\">MessageHeader.id</a> <em>could</em> be safe, but it's a bit messy because <a href=\"http://MessageHeader.id\">MessageHeader.id</a> is only unique within the context of a particular originating server.  While typically these would be UUIDs, I don't think that's a requirement.  If the MessageHeader instances flowing through a given system originate from different places, duplicate ids are possible (though presumably the fullUrl for the MessageHeader entry would still be unique).  MessageHeader.identifier got moved to Bundle.identifier, so it certainly seems logical that the acknowledgement would point to that element.  However, the decision isn't mine and I can't guarantee that InM will land the same place I do.</p>",
        "id": 216484321,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1605195453
    },
    {
        "content": "<p>IMHO It'd need to be an identifier, and not an id.  Bundle.identifier seems appropriate.</p>",
        "id": 216487682,
        "sender_full_name": "Ren√© Spronk",
        "timestamp": 1605196780
    },
    {
        "content": "<p>Presume we'd need an identifier extension?</p>",
        "id": 216530357,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1605216115
    },
    {
        "content": "<p>Why an extension?</p>",
        "id": 216538727,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1605220277
    },
    {
        "content": "<p><a href=\"http://jira.hl7.org/browse/FHIR-29690\">FHIR#29690</a> created</p>",
        "id": 216618951,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1605278117
    },
    {
        "content": "<p>You are using identifiers to reference each other?</p>",
        "id": 216627609,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1605281823
    },
    {
        "content": "<p>Unfortunately, since MessageHeader.response.identifier is typed as \"id\" at the moment, our implementation will be referencing the <a href=\"http://MessageHeader.id\">MessageHeader.id</a> of the originating message bundle -- until the next release with the data type updated.</p>",
        "id": 217310351,
        "sender_full_name": "Ken Sinn",
        "timestamp": 1605810272
    }
]