[
    {
        "content": "<p>Dear all,</p>\n<p>In FHIR 4.0.0, <code>Element.id</code> is defined by the following <code>ElementDefinition</code>:</p>\n<div class=\"codehilite\"><pre><span></span>        {\n          &quot;id&quot; : &quot;Element.id&quot;,\n          &quot;path&quot; : &quot;Element.id&quot;,\n          &quot;representation&quot; : [&quot;xmlAttr&quot;],\n          &quot;short&quot; : &quot;Unique id for inter-element referencing&quot;,\n          &quot;definition&quot; : &quot;Unique id for the element within a resource (for internal references). This may be any string value that does\n          &quot;min&quot; : 0,\n          &quot;max&quot; : &quot;1&quot;,\n          &quot;base&quot; : {\n            &quot;path&quot; : &quot;Element.id&quot;,\n            &quot;min&quot; : 0,\n            &quot;max&quot; : &quot;1&quot;\n          },\n          &quot;type&quot; : [{\n            &quot;_code&quot; : {\n              &quot;extension&quot; : [{\n                &quot;url&quot; : &quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-json-type&quot;,\n                &quot;valueString&quot; : &quot;string&quot;\n              },\n              {\n                &quot;url&quot; : &quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-xml-type&quot;,\n                &quot;valueString&quot; : &quot;xsd:string&quot;\n              },\n              {\n                &quot;url&quot; : &quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-rdf-type&quot;,\n                &quot;valueString&quot; : &quot;xsd:string&quot;\n              }]\n            }\n          }],\n          &quot;isModifier&quot; : false,\n          &quot;isSummary&quot; : false,\n          &quot;mapping&quot; : [{\n            &quot;identity&quot; : &quot;rim&quot;,\n            &quot;map&quot; : &quot;n/a&quot;\n          }]\n        },\n</pre></div>\n\n\n<p>However, when looking into subtypes of <code>Element</code>, one can find the <code>StructureDefinition</code>s have the following shape:</p>\n<div class=\"codehilite\"><pre><span></span>  {\n    &quot;fullUrl&quot; : &quot;http://hl7.org/fhir/StructureDefinition/BackboneElement&quot;,\n    &quot;resource&quot; : {\n      &quot;resourceType&quot; : &quot;StructureDefinition&quot;,\n      &quot;id&quot; : &quot;BackboneElement&quot;,\n      // ...\n      &quot;fhirVersion&quot; : &quot;4.0.0&quot;,\n      // ...\n      &quot;kind&quot; : &quot;complex-type&quot;,\n      &quot;abstract&quot; : true,\n      &quot;type&quot; : &quot;BackboneElement&quot;,\n      &quot;baseDefinition&quot; : &quot;http://hl7.org/fhir/StructureDefinition/Element&quot;,\n      &quot;derivation&quot; : &quot;specialization&quot;,\n      &quot;snapshot&quot; : {\n        &quot;element&quot; : [{\n          &quot;id&quot; : &quot;BackboneElement&quot;,\n          // ...\n        },\n        {\n          &quot;id&quot; : &quot;BackboneElement.id&quot;,\n          &quot;path&quot; : &quot;BackboneElement.id&quot;,\n          &quot;representation&quot; : [&quot;xmlAttr&quot;],\n          &quot;short&quot; : &quot;Unique id for inter-element referencing&quot;,\n          &quot;definition&quot; : &quot;Unique id for the element within a resource (for internal references). This may be any string value that does\n          &quot;min&quot; : 0,\n          &quot;max&quot; : &quot;1&quot;,\n          &quot;base&quot; : {\n            &quot;path&quot; : &quot;Element.id&quot;,\n            &quot;min&quot; : 0,\n            &quot;max&quot; : &quot;1&quot;\n          },\n          &quot;type&quot; : [{\n            &quot;code&quot; : &quot;string&quot;\n          }],\n          &quot;isModifier&quot; : false,\n          &quot;isSummary&quot; : false,\n          &quot;mapping&quot; : [{\n            &quot;identity&quot; : &quot;rim&quot;,\n            &quot;map&quot; : &quot;n/a&quot;\n          }]\n        },\n        {\n          &quot;id&quot; : &quot;BackboneElement.extension&quot;,\n          // ...\n        },\n        {\n          &quot;id&quot; : &quot;BackboneElement.modifierExtension&quot;,\n          // ...\n        }]\n      },\n      &quot;differential&quot; : {\n        &quot;element&quot; : [{\n          &quot;id&quot; : &quot;BackboneElement&quot;,\n          // ...\n        },\n        {\n          &quot;id&quot; : &quot;BackboneElement.modifierExtension&quot;,\n          // ...\n        }]\n      }\n</pre></div>\n\n\n<p>...that is:<br>\n- <code>differential</code> does not pose any changes to the <code>id</code> field; and<br>\n- <code>snapshot</code> shows an <code>id</code> field whose <code>type</code> is completely different from the definition of the base <code>Element.id</code>.</p>\n<p>It also happens with other Elements, like <code>http://hl7.org/fhir/StructureDefinition/string</code>, <code>http://hl7.org/fhir/StructureDefinition/boolean</code> etc.</p>\n<p>What is the correct version: the one described by <code>differential</code>, or the one described by <code>snapshot</code>?</p>",
        "id": 159163921,
        "sender_full_name": "Gabriel Bezerra",
        "timestamp": 1550849156
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> -- you usually answer my questions in this regard, maybe you would be interested in this one ^</p>",
        "id": 159322658,
        "sender_full_name": "Gabriel Bezerra",
        "timestamp": 1551085725
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"196538\">@Gabriel Bezerra</span>, looks like you found an error in the official snapshots.<br>\nFor comparison, here's a fragment from an Observation snapshot, generated by the (R4) FHIR .NET API:</p>\n<div class=\"codehilite\"><pre><span></span>&lt;element id=&quot;Observation.referenceRange.id&quot;&gt;\n    &lt;path value=&quot;Observation.referenceRange.id&quot; /&gt;\n    &lt;representation value=&quot;xmlAttr&quot; /&gt;\n    &lt;short value=&quot;Unique id for inter-element referencing&quot; /&gt;\n    &lt;definition value=&quot;Unique id for the element within a resource (for internal references). This may be any string value that does not contain spaces.&quot; /&gt;\n    &lt;min value=&quot;0&quot; /&gt;\n    &lt;max value=&quot;1&quot; /&gt;\n    &lt;base&gt;\n        &lt;path value=&quot;Element.id&quot; /&gt;\n        &lt;min value=&quot;0&quot; /&gt;\n        &lt;max value=&quot;1&quot; /&gt;\n    &lt;/base&gt;\n    &lt;type&gt;\n        &lt;code&gt;\n            &lt;extension url=&quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-json-type&quot;&gt;\n                &lt;valueString value=&quot;string&quot; /&gt;\n            &lt;/extension&gt;\n            &lt;extension url=&quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-xml-type&quot;&gt;\n                &lt;valueString value=&quot;xsd:string&quot; /&gt;\n            &lt;/extension&gt;\n            &lt;extension url=&quot;http://hl7.org/fhir/StructureDefinition/structuredefinition-rdf-type&quot;&gt;\n                &lt;valueString value=&quot;xsd:string&quot; /&gt;\n            &lt;/extension&gt;\n        &lt;/code&gt;\n    &lt;/type&gt;\n    &lt;mapping&gt;\n        &lt;identity value=&quot;rim&quot; /&gt;\n        &lt;map value=&quot;n/a&quot; /&gt;\n    &lt;/mapping&gt;\n&lt;/element&gt;\n</pre></div>\n\n\n<p>In this example, you can see that the particular <code>id</code> child element inherits all the constraints (incl. special \"compiler magic\" extensions) from the <code>Element.id' ElementDefinition node in the core </code>Element` StructureDefinition.</p>",
        "id": 159332214,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1551096591
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191336\">@Michel Rutten</span> , yes. In that case, when they disagree, which one wins?</p>",
        "id": 159332744,
        "sender_full_name": "Gabriel Bezerra",
        "timestamp": 1551097152
    },
    {
        "content": "<p>Malformed data is ambiguous, per definition. FHIR core resource &amp; type definitions should be completely valid. I suggest that you submit a GForge ticket to correct this.</p>",
        "id": 159332956,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1551097357
    },
    {
        "content": "<p>In general, a derived profile is only allowed to further constrain the base profile; it is certainly not valid to replace an element type with another, incompatible type.</p>",
        "id": 159332993,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1551097428
    },
    {
        "content": "<p>Ticket submitted in GForge: <a href=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=20465\" target=\"_blank\" title=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=20465\">https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=20465</a></p>",
        "id": 159336028,
        "sender_full_name": "Gabriel Bezerra",
        "timestamp": 1551100607
    },
    {
        "content": "<p>I'll add it to my list</p>",
        "id": 159382056,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1551137009
    }
]