[
    {
        "content": "<p>Vonk seems to canonicalise relative references in incoming resources by prepending the server base url.  Is this behaviour specified anywhere or just at the discretion of the implementer?  (similar to the behaviour for relative urls here, but applies to non-bundled resources: <a href=\"http://hl7.org/fhir/bundle.html#references\" target=\"_blank\" title=\"http://hl7.org/fhir/bundle.html#references\">http://hl7.org/fhir/bundle.html#references</a>)</p>",
        "id": 153916572,
        "sender_full_name": "Ben Spencer",
        "timestamp": 1509174866
    },
    {
        "content": "<p>not specified anywhere as far as I remember</p>",
        "id": 153916583,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1509181847
    },
    {
        "content": "<p>To be precise: we prepend the server base url at request time, on the way out to the client. This way:<br>\n- you can directly follow the links, because they are absolute<br>\n- it works for different clients addressing Vonk through different urls (e.g. through <a href=\"http://vonk.intranet.hospital.org\" target=\"_blank\" title=\"http://vonk.intranet.hospital.org\">vonk.intranet.hospital.org</a> from within the firewall and through <a href=\"http://vonk.hospital.org\" target=\"_blank\" title=\"http://vonk.hospital.org\">vonk.hospital.org</a> from outside).</p>",
        "id": 153916725,
        "sender_full_name": "Christiaan Knaap",
        "timestamp": 1509353385
    },
    {
        "content": "<p>We did it like that all the way back from Spark I think....</p>",
        "id": 153916765,
        "sender_full_name": "Ewout Kramer",
        "timestamp": 1509369640
    },
    {
        "content": "<p>Not exactly: <br>\n- returning absolute links: yes, Spark did that already<br>\n- adjust to the viewpoint of the client: Spark had a serverwide setting for it's FHIR endpoint, it could not be adjusted per-request.</p>",
        "id": 153916768,
        "sender_full_name": "Christiaan Knaap",
        "timestamp": 1509369765
    },
    {
        "content": "<p>I did a port of that in Spark, and I do what you've described in our current server <span class=\"user-mention\" data-user-id=\"191757\">@Christiaan Knaap</span> , however I think this approach has issues if you have a reverse proxy in place.<br>\nSo where I can, I use relative references (which avoid the problem)</p>",
        "id": 153918808,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1510302117
    }
]