[
    {
        "content": "<p>In our very closed trading partner environment I am suggesting the clients do not generate any narrative. To this end - I am suggesting they use an 'empty' narrative type. I however, can't get any emtpy narratives to validate (HAPI 3) without actually putting in content - which seems to defeat the purpose. This could be a specific hapi validation issue, but I thought I'd ask first here - is there a established div content for the 'empty' narrative?</p>",
        "id": 153922200,
        "sender_full_name": "Andrew Patterson",
        "timestamp": 1512009887
    },
    {
        "content": "<p>&lt;div&gt;&lt;/div&gt; doesn't work<br>\nempty string doesn't work</p>",
        "id": 153922201,
        "sender_full_name": "Andrew Patterson",
        "timestamp": 1512009912
    },
    {
        "content": "<p>&lt;div&gt; &lt;/div&gt; doesn't work (div content with one space)<br>\n&lt;div xmlns=\"http://www.w3.org/1999/xhtml\"&gt;&lt;/div&gt; doesn't<br>\n&lt;div/&gt; doesn't</p>",
        "id": 153922202,
        "sender_full_name": "Andrew Patterson",
        "timestamp": 1512010008
    },
    {
        "content": "<p>A single space crashes the validator</p>",
        "id": 153922203,
        "sender_full_name": "Andrew Patterson",
        "timestamp": 1512010064
    },
    {
        "content": "<p>actually to follow up my own question - looks like the full HAPI profile validator works with what I would expect to be correct<br>\n&lt;div xmlns=\"http://www.w3.org/1999/xhtml\"&gt;&lt;/div&gt;<br>\nIt is just the basic schema (?) validator in HAPI that is failing with those<br>\nIssue 1: ERROR -<br>\n         cvc-complex-type.2.4.b: The content of element 'text' is not complete.<br>\n         One of '{\"http://www.w3.org/1999/xhtml\":div}' is expected.</p>",
        "id": 153922205,
        "sender_full_name": "Andrew Patterson",
        "timestamp": 1512010864
    },
    {
        "content": "<p>why not just skip the text element?  In FHIR empty elements raise an error and &lt;div&gt; is a fhir element.</p>\n<p>\"Note that when present, elements cannot be empty - they SHALL have a value attribute, child elements, or extensions. This means that setting an element to a minimum cardinality of 1 does not ensure that valid data will be present; specific FHIRPath constraints are required to ensure that the required data will be present.\"</p>",
        "id": 153922212,
        "sender_full_name": "Eric Haas",
        "timestamp": 1512017571
    },
    {
        "content": "<p>I thought indicating it was empty was being very explicit that we deliberately weren't filling it in - as opposed to missing text (which is what I would do with a contained resource)</p>",
        "id": 153922213,
        "sender_full_name": "Andrew Patterson",
        "timestamp": 1512017729
    },
    {
        "content": "<p>If there is an enumeration of narrative type that includes 'empty' then we should be clear what the empty div content would then be.. or remove 'empty' as a narrative type (which I would also be happy with)</p>",
        "id": 153922214,
        "sender_full_name": "Andrew Patterson",
        "timestamp": 1512017809
    },
    {
        "content": "<p>I think that to make it explicitly empty you will have to add an extension to <code>text</code> with a value that means \"deliberately empty\".</p>",
        "id": 153922215,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1512017853
    },
    {
        "content": "<p>But there is literally a core narrative type of 'empty'.. surely we then don't need an extension to text in order to use it</p>",
        "id": 153922217,
        "sender_full_name": "Andrew Patterson",
        "timestamp": 1512017912
    },
    {
        "content": "<p>oops. I forgot that.</p>",
        "id": 153922222,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1512017982
    },
    {
        "content": "<p>However<br>\nempty | Empty | The contents of the narrative are some equivalent of \"No human-readable text provided in this case\"</p>",
        "id": 153922223,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1512018076
    },
    {
        "content": "<p>from <a href=\"http://build.fhir.org/valueset-narrative-status.html\" target=\"_blank\" title=\"http://build.fhir.org/valueset-narrative-status.html\">http://build.fhir.org/valueset-narrative-status.html</a></p>",
        "id": 153922224,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1512018119
    },
    {
        "content": "<p>So &lt;div xmlns=\"http://www.w3.org/1999/xhtml\"&gt;No human readable text provided&lt;/div&gt;?</p>",
        "id": 153922225,
        "sender_full_name": "Andrew Patterson",
        "timestamp": 1512018151
    },
    {
        "content": "<p>Guess so.</p>",
        "id": 153922226,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1512018185
    },
    {
        "content": "<p>just omit the div element. Or put 'no text provided'... or provide some text (still your best option long term.  I don't believe in very closed trading environments when year + 1 rolls around)</p>",
        "id": 153922257,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1512045797
    },
    {
        "content": "<p>but div is 1..1 cardinality<br>\n(I take your point about trading environments, and we will probably auto generate narratives on submission, but it would be good if 'empty' is an option - that it is clear what is meant to accompany it)</p>",
        "id": 153922425,
        "sender_full_name": "Andrew Patterson",
        "timestamp": 1512077687
    },
    {
        "content": "<p>ah yes. I meant, omit the text element</p>",
        "id": 153922426,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1512077720
    },
    {
        "content": "<p>ok thanks</p>",
        "id": 153922427,
        "sender_full_name": "Andrew Patterson",
        "timestamp": 1512077758
    },
    {
        "content": "<p>does make it an interesting question what it means to say that the narrative is empty when it can't be</p>",
        "id": 153922428,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1512077759
    },
    {
        "content": "<p>The HAPI full validator does allow &lt;div xmlns=\"http://www.w3.org/1999/xhtml\"&gt;&lt;/div&gt;. Which I think it the correct value for an empty narrative - meeting all the other narrative rules and yet not forcing the use of a sentence which text saying something like \"No text here\" (which in my opinion is not really actually empty)</p>",
        "id": 153922430,
        "sender_full_name": "Andrew Patterson",
        "timestamp": 1512077853
    },
    {
        "content": "<p>It turns out it is only the schematron validator that disallows that empty div. So maybe it is just a particular validator issue.</p>",
        "id": 153922431,
        "sender_full_name": "Andrew Patterson",
        "timestamp": 1512077893
    },
    {
        "content": "<p>no it's what the spec says: no empty elements</p>",
        "id": 153922433,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1512078089
    }
]