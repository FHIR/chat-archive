[
    {
        "content": "<p>I'm assuming that Encounters are a hierarchy such that one might have an encounter with a health system that represents an Episode of Care, which might have a child encounter with a facility that represents an Admission, which might have a child encounter with a department, which might have a child encounter with a particular care provider.</p>\n<p>Is that correct and if so, <br>\n- how do you know which level an encounter you are inspecting is at?<br>\n- how do you query for encounters at a particular level? e.g. departmental encounters, or admission encounters</p>",
        "id": 159195017,
        "sender_full_name": "Kevin O'Donnell",
        "timestamp": 1550872878
    },
    {
        "content": "<p>Tyipically you use EpisodeOfCare for an episode.  Encounter is limited to when there's direct engagement between the participants (though it can be remote).  In terms of differentiating, you could query by chaining through the location type.  Not sure if there's another mechanism.  <span class=\"user-mention\" data-user-id=\"191367\">@Brian Postlethwaite</span> ?</p>",
        "id": 159196450,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1550874018
    },
    {
        "content": "<p>Encounter class of virtual for remote sessions.</p>",
        "id": 159197831,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1550875209
    },
    {
        "content": "<p>The usual use of the nesting of encounter is for an admission encounter, then child ones for encounters within (and depends on your tracking needs)<br>\nNot really about the level within a location hierarchy.<br>\nThe episode of care is used for tracking across related encounters for a specific purpose, often related to a diagnosis. Eg. A maternity episode, or a diabetes episode.</p>",
        "id": 159198289,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1550875680
    },
    {
        "content": "<p>So if I want to find an encounters with Dermatology today that are part of an admission encounter with Admission ID 4321, what would that look like?</p>",
        "id": 159199778,
        "sender_full_name": "Kevin O'Donnell",
        "timestamp": 1550877206
    },
    {
        "content": "<p>Encounter?part-of=Enounter/4321&amp;location.code=dermatology&amp;date=ge2019-02-22</p>",
        "id": 159201162,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1550878706
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> , that only works if the derm Encounter is directly part of the admission Encounter, or do we expect that child encounters include their full ancestry in part-of? Also, I think <span class=\"user-mention\" data-user-id=\"202389\">@Kevin O'Donnell</span> meant Encounter.identifier, not <a href=\"http://Encounter.id\" target=\"_blank\" title=\"http://Encounter.id\">Encounter.id</a>.</p>",
        "id": 159201454,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1550879072
    },
    {
        "content": "<p>OK, so the instance number of an Encounter resource is required to be the Admission ID if the encounter is an encounter with a facility?</p>",
        "id": 159201457,
        "sender_full_name": "Kevin O'Donnell",
        "timestamp": 1550879076
    },
    {
        "content": "<p>Not the key - I assumed that's what 4321 was, but should probably have done part-of.identifier=4321.  \"admission id\" is a term I'm not terribly familiar with.  Typically I've just heard people refer to \"encounter id\"</p>",
        "id": 159202026,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1550879590
    },
    {
        "content": "<blockquote>\n<p>that only works if the derm Encounter is directly part of the admission Encounter</p>\n</blockquote>\n<p>if people don't track the relatedness, you won't be able to depend on the relatedness</p>",
        "id": 159202120,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1550879657
    },
    {
        "content": "<p>To make it concrete, one of our use cases starts by scanning the wristband attached to the patient when they were admitted which often conveys a PV1-19-Visit Number value.  We'd like to send that number and perhaps the fact that we're in the dermatology clinic and get back the patient name/id/DOB, hospital name, admission date/time,  reason for admission, and (because the server is clever) a list of dermatology imaging procedures appropriate to the reason for admission.<br>\nAnd I think  <span class=\"user-mention\" data-user-id=\"191380\">@Elliot Silver</span>  was maybe considering the case where the dermatology encounter was not a directly child of the admission, but a grandchild with a parent that is, say, an ICU encounter or something.  I'm not sure if part-of is direct parent only or if it searches upwards til if finds a hit?</p>",
        "id": 159205094,
        "sender_full_name": "Kevin O'Donnell",
        "timestamp": 1550883093
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> , consider the case where Encounter A is part of Encounter B, and B  is part of Encounter C. So Encounter B has partOf(C). But there are two options for A. It either has partOf(B) or it has partOf(B,C).</p>\n<p>(Kevin, exactly my thought.)</p>",
        "id": 159205170,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1550883148
    },
    {
        "content": "<p>Similarly, for location -- a bed is in a ward in a hospital. How do I find all beds in a particular hospital? Do we expect partOf to be filled in with both the ward and the hospital?</p>",
        "id": 159205472,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1550883527
    },
    {
        "content": "<p>In theory, we could revise \"part-of\" to be recursive up the tree - but that would require implementers to agree that was reasonable.  Alternatively we could have a modifier that recurses</p>",
        "id": 159208493,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1550887842
    },
    {
        "content": "<p>A modifier seems reasonable, and we could use :below and :above as a starting point. This is probably useful for any \"recursive\" relationship -- locations part of other locations, observations that have member other observations, organizational hierarchies, etc. </p>\n<p>I wonder if it makes sense to be able to switch to other resources? (all observations derived from, directly or indirectly  a particular DocumentReference).</p>",
        "id": 159217372,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1550904879
    },
    {
        "content": "<p>Hmm, how does Encounter.partOf differ from the <a href=\"http://hl7.org/fhir/StructureDefinition/encounter-associatedEncounter\" target=\"_blank\" title=\"http://hl7.org/fhir/StructureDefinition/encounter-associatedEncounter\">http://hl7.org/fhir/StructureDefinition/encounter-associatedEncounter</a> extension?</p>",
        "id": 159217877,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1550905838
    },
    {
        "content": "<p>the modifier is already defined</p>",
        "id": 159227541,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1550924871
    },
    {
        "content": "<p>What is it?</p>",
        "id": 159233692,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1550936119
    },
    {
        "content": "<p>I thought it existed to, but I couldn't see it when I looked</p>",
        "id": 159233697,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1550936134
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"202389\">@Kevin O'Donnell</span> I'd use Encounter.class to distinguish the level (in the hierarchical encounter structure). <a href=\"http://wiki.hl7.org/index.php?title=Requirements_for_an_Universal_Encounter_model\" target=\"_blank\" title=\"http://wiki.hl7.org/index.php?title=Requirements_for_an_Universal_Encounter_model\">http://wiki.hl7.org/index.php?title=Requirements_for_an_Universal_Encounter_model</a> describes the requirements for such a hierarchy from an international perspective. Location is not  a reliable indicator of the encounter being at a particular hierarchical level IMHO.</p>",
        "id": 159268747,
        "sender_full_name": "René Spronk",
        "timestamp": 1551000150
    },
    {
        "content": "<p>see <a href=\"http://hl7.org/fhir/references.html#circular\" target=\"_blank\" title=\"http://hl7.org/fhir/references.html#circular\">http://hl7.org/fhir/references.html#circular</a></p>",
        "id": 159305609,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1551057710
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191372\">@René Spronk</span> I like your wiki link for teasing apart the fact that a term like \"department\" is often used loosely (as I did) without properly recognizing that we might be referring to a physical Location, or a part of an Organization, or a Service, which are distinct modeled concepts and it behooves us to think carefully about what we mean (and encourage our customers to avoid ambiguity too).</p>",
        "id": 159551420,
        "sender_full_name": "Kevin O'Donnell",
        "timestamp": 1551300913
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> Thanks for the link! It seems like :above and :below are likely partOf the solution (sorry, couldn't resist <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span> )</p>",
        "id": 159551551,
        "sender_full_name": "Kevin O'Donnell",
        "timestamp": 1551301019
    },
    {
        "content": "<p>Thanks for this.    We are planning to use EpisodeOfCare in a maternity context.</p>\n<p>Do you know if there has been any discussion of defining an \"$everything\" operation for EpisodeOfCare, as I gather there now is on Encounter <a href=\"https://www.hl7.org/fhir/operation-encounter-everything.html\" target=\"_blank\" title=\"https://www.hl7.org/fhir/operation-encounter-everything.html\">https://www.hl7.org/fhir/operation-encounter-everything.html</a> ?</p>\n<p>Thanks :)</p>",
        "id": 166152340,
        "sender_full_name": "Martin Morrey",
        "timestamp": 1558427275
    },
    {
        "content": "<p>Not yet, but it's a reasonable thing to submit a change request for</p>",
        "id": 166152896,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1558427855
    }
]