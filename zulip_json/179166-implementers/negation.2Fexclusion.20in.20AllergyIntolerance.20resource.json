[
    {
        "content": "<p>I've worked out a strategy/proposal for handling negated/excluded statements in the AllergyIntolerance resource.  It includes both renamed and additional elements to separate and handle the semantics involved - it's different from, but is along the lines of and should largely (or even completely) satisfy the concerns about mixed semantics that have been raised in recent negation discussions.  I do expect that the proposed solution will be somewhat (or significantly) controversial, or it will at least generate significant discussion and questions.  I've gone ahead and implemented this proposed strategy (including the elements, bindings, value sets, invariant, etc.) in my local build, as I think it is considerably easier to visualize and to be able to explore that way.  I've checked it out with and have gotten some initial feedback from one of the Patient Care co-chairs so far.  Long term, I think that a similar approach will likely be able to be used with the other FHIR clinical resources (Condition, Observation, etc.) - but there is not likely to be a \"one size fits all\" solution, as there are some uniquenesses across the clinical domains (especially, I think, with allergy/intolerance).</p>\n<p>So, I'm wondering when is best to commit the changes?  Should I go ahead and do that now?  That would be easy for me to do, and would likely be the easiest way for others to review.  Or do I need to further vet it first, prior to committing (and how much vetting does it need)?</p>",
        "id": 153829015,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1463889028
    },
    {
        "content": "<p>procedurally, I think PC co-chairs need to be ok with you committing so we can look at it. (That's at your discretion whether to check very time or just generally in advance)</p>",
        "id": 153829016,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1463889232
    },
    {
        "content": "<p>since we're not close to a freeze, I have no issue with you committing something speculative for people to look at. If it's big enough, we've sometimes created a second resource so people can compare, but in this case, they can compare with DSTU2, right?</p>",
        "id": 153829017,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1463889300
    },
    {
        "content": "<p>yes - that would be the comparison - or with the STU 3 candidate</p>",
        "id": 153829018,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1463889363
    },
    {
        "content": "<p>anythoughts of moving from svn to git?</p>",
        "id": 153829019,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463889542
    },
    {
        "content": "<p>I dragged one of my teams (almost) over and everyone is very happy... we actually retain svn but its use now limited to the final deployment phase</p>",
        "id": 153829020,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463889626
    },
    {
        "content": "<p>in the meantime, if anyone wants to take an initial look, you can do that at:</p>\n<p><a href=\"http://rhausam.no-ip.org/fhir/allergyintolerance.html\" target=\"_blank\" title=\"http://rhausam.no-ip.org/fhir/allergyintolerance.html\">http://rhausam.no-ip.org/fhir/allergyintolerance.html</a></p>\n<p>I'm thinking about adding some profiles, but haven't done that yet<br>\nmy only request is that, if you really hate it, ask further questions before you blast it too hard :) </p>",
        "id": 153829021,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1463889659
    },
    {
        "content": "<p>svn + git hasn't actually been painful at all just need to tell them both to ignore each other</p>",
        "id": 153829022,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463889682
    },
    {
        "content": "<p>Erich, sounds like that could be useful</p>",
        "id": 153829023,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1463889742
    },
    {
        "content": "<p>the git branch and pull-request workflow is just awesome</p>",
        "id": 153829024,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463889786
    },
    {
        "content": "<p>git vs svn is a subject for the committers stream. And it's been discussed before. often</p>",
        "id": 153829025,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1463890079
    },
    {
        "content": "<p>we were a bit afraid when we started but just took it gently - tbh we're still not using the full git feature set (eg submodules)</p>",
        "id": 153829026,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463890134
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> heh - i'm not surprised - speaking from experience I'd say \"come on in, the water's fine\" - just do it gradually and keep svn as the source of truth till everyone's comfortable</p>",
        "id": 153829027,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463890232
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> I followed that link and clicked \"diff with DTSU2\" and got no highligting</p>",
        "id": 153829028,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463890277
    },
    {
        "content": "<p>is it a new resource?</p>",
        "id": 153829029,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463890285
    },
    {
        "content": "<p>the diff with dstu2 link will only work on the official versions - I have to massage it to be correct when I publish. </p>",
        "id": 153829030,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1463890322
    },
    {
        "content": "<p>but you can manually fix the URLs if you want</p>",
        "id": 153829031,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1463890344
    },
    {
        "content": "<p>no, it isn't, but I'm only working from the current build on my server - and what Grahame said</p>",
        "id": 153829032,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1463890345
    },
    {
        "content": "<p>erm... <code>http://services.w3.org/htmldiff?doc1=http%3A%2F%2Fhl7.org%2Ffhir%2FDSTU2%2Fallergyintolerance.html&amp;doc2=http%3A%2F%2Fhl7.org%2Ffhir%2FDSTU2%2Fallergyintolerance.html</code></p>",
        "id": 153829033,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463890476
    },
    {
        "content": "<p>that's what it came up with</p>",
        "id": 153829034,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463890484
    },
    {
        "content": "<p>yes, you have to replace one of those links with Rob's link. The build tooling doesn't know where the content is going to be published, so can't get it right in advance</p>",
        "id": 153829035,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1463890576
    },
    {
        "content": "<p>mmm... cant do url encoding in my head!</p>",
        "id": 153829036,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463890616
    },
    {
        "content": "<p><code>http://services.w3.org/htmldiff?doc1=http%3A%2F%2Frhausam.no-ip.org/%2Ffhir%2FDSTU2%2Fallergyintolerance.html&amp;doc2=http%3A%2F%2Fhl7.org%2Ffhir%2FDSTU2%2Fallergyintolerance.html</code></p>",
        "id": 153829037,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463890619
    },
    {
        "content": "<p>that's first go (not working)</p>",
        "id": 153829038,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463890629
    },
    {
        "content": "<p>ah</p>",
        "id": 153829039,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463890645
    },
    {
        "content": "<p>bingo</p>",
        "id": 153829040,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463890678
    },
    {
        "content": "<p><a href=\"http://services.w3.org/htmldiff?doc1=http%3A%2F%2Frhausam.no-ip.org/%2Ffhir%2Fallergyintolerance.html&amp;doc2=http%3A%2F%2Fhl7.org%2Ffhir%2FDSTU2%2Fallergyintolerance.html\" target=\"_blank\" title=\"http://services.w3.org/htmldiff?doc1=http%3A%2F%2Frhausam.no-ip.org/%2Ffhir%2Fallergyintolerance.html&amp;doc2=http%3A%2F%2Fhl7.org%2Ffhir%2FDSTU2%2Fallergyintolerance.html\">http://services.w3.org/htmldiff?doc1=http%3A%2F%2Frhausam.no-ip.org/%2Ffhir%2Fallergyintolerance.html&amp;doc2=http%3A%2F%2Fhl7.org%2Ffhir%2FDSTU2%2Fallergyintolerance.html</a></p>",
        "id": 153829041,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463890680
    },
    {
        "content": "<p>hmm - doesn't seem to be rendering too well for me<br>\nhaven't tried to do this before</p>",
        "id": 153829042,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1463890795
    },
    {
        "content": "<p>urg - yes rendering dizzying</p>",
        "id": 153829043,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463890826
    },
    {
        "content": "<p>did you reorder?</p>",
        "id": 153829044,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463890832
    },
    {
        "content": "<p>reordering is evil for diffs</p>",
        "id": 153829045,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463890844
    },
    {
        "content": "<p>no, I didn't<br>\nbut I do note that my changes are showing up as strikeout text - the comparison appears to be reversed</p>",
        "id": 153829046,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1463890888
    },
    {
        "content": "<p>oh i got them backwards :-)</p>",
        "id": 153829047,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463890920
    },
    {
        "content": "<p>'try that:</p>",
        "id": 153829048,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463890955
    },
    {
        "content": "<p><a href=\"http://services.w3.org/htmldiff?doc2=http%3A%2F%2Frhausam.no-ip.org/%2Ffhir%2Fallergyintolerance.html&amp;doc1=http%3A%2F%2Fhl7.org%2Ffhir%2FDSTU2%2Fallergyintolerance.html\" target=\"_blank\" title=\"http://services.w3.org/htmldiff?doc2=http%3A%2F%2Frhausam.no-ip.org/%2Ffhir%2Fallergyintolerance.html&amp;doc1=http%3A%2F%2Fhl7.org%2Ffhir%2FDSTU2%2Fallergyintolerance.html\">http://services.w3.org/htmldiff?doc2=http%3A%2F%2Frhausam.no-ip.org/%2Ffhir%2Fallergyintolerance.html&amp;doc1=http%3A%2F%2Fhl7.org%2Ffhir%2FDSTU2%2Fallergyintolerance.html</a></p>",
        "id": 153829049,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463890956
    },
    {
        "content": "<p>there's been some significant reodering somewhere...</p>",
        "id": 153829050,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463891024
    },
    {
        "content": "<p>my immediate comment is that code/excludedCode are not differentiated from causativeAgent/excludedAgent, and I cannot imagine how they would be used usefully. </p>",
        "id": 153829051,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1463891045
    },
    {
        "content": "<p>nor is it obvious to me how you would deal with this if you have a text / uncoded allergy</p>",
        "id": 153829052,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1463891095
    },
    {
        "content": "<p>or a coding system that wasn't marked up with metadata for whether a code was an excluded or not</p>",
        "id": 153829053,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1463891121
    },
    {
        "content": "<p>wow - yes - I didn't change it that much<br>\ncould have added the new elements at the end, instead - that probably would be better for diff</p>\n<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> I think it does need more and better explanation for a lot of it<br>\nI think they actually are differentiated, and semantically there may be good reason to do so<br>\nbut I'm also happy to be convinced that this is going at least a step too far - it's a proposal, and certainly subject to further input</p>",
        "id": 153829054,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1463891243
    },
    {
        "content": "<p>you'd be better of comparing to the STU3 candidate then. It got re-ordered before that</p>",
        "id": 153829055,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1463891564
    },
    {
        "content": "<p>Rob, well, up to you to explain it first then</p>",
        "id": 153829056,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1463891583
    },
    {
        "content": "<p>I think text/uncoded goes in the CodeableConcept.text - for whichever element is appropriate for the case<br>\nand I added a code-all search parameter (don't know if that's a good name) that will let you search for a code value in any of the four elements - so you wouldn't need to know in advance which one was used (that doesn't help with text, of course)</p>\n<p>substances (excluded or not) have a very different semantic from conditions and situations (in SNOMED terms)<br>\nI did try to explain the relationship with SNOMED CT modeling in the element comments (SNOMED isn't the only terminology option, but is the most important one to consider) </p>\n<p>I think the comparison to STU3 candidate should work better</p>",
        "id": 153829057,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1463891834
    },
    {
        "content": "<p>comparison is still fairly busy, but overall is much better against STU3</p>\n<p><a href=\"http://services.w3.org/htmldiff?doc2=http%3A%2F%2Frhausam.no-ip.org/%2Ffhir%2Fallergyintolerance.html&amp;doc1=http%3A%2F%2Fhl7.org%2Ffhir%2F2016May%2Fallergyintolerance.html\" target=\"_blank\" title=\"http://services.w3.org/htmldiff?doc2=http%3A%2F%2Frhausam.no-ip.org/%2Ffhir%2Fallergyintolerance.html&amp;doc1=http%3A%2F%2Fhl7.org%2Ffhir%2F2016May%2Fallergyintolerance.html\">http://services.w3.org/htmldiff?doc2=http%3A%2F%2Frhausam.no-ip.org/%2Ffhir%2Fallergyintolerance.html&amp;doc1=http%3A%2F%2Fhl7.org%2Ffhir%2F2016May%2Fallergyintolerance.html</a></p>",
        "id": 153829058,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1463892118
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> wow much better!</p>",
        "id": 153829059,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463892228
    },
    {
        "content": "<p>but the issue is - to echo <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> - is that there are now tow ways of saying exclude ie via <code>status</code> = <code>refuted</code></p>",
        "id": 153829060,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463892304
    },
    {
        "content": "<p>if the goal is to be able to say \"No Know Drug Allergies\" (NKDA) - then isn't the simple thing to find the root classification code for \"Medication\"</p>",
        "id": 153829061,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463892364
    },
    {
        "content": "<p>then a single record that <code>{status: \"refuted\", substance: &lt;&lt;medication root&gt;&gt;}</code> ???</p>",
        "id": 153829062,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463892416
    },
    {
        "content": "<p>in our discussions I think we've generally agreed that refuted isn't the same as \"excluded\" - although I grant that there can be some considerable overlap<br>\n\"refuted\" is intended to say that an allergy or intolerance condition that was previously asserted has now been shown to be false </p>",
        "id": 153829063,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1463892477
    },
    {
        "content": "<p>I suspect that sorting out the <code>status</code> values maybe the key</p>",
        "id": 153829064,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463892554
    },
    {
        "content": "<p>I can get the value of <code>refuted</code></p>",
        "id": 153829065,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463892567
    },
    {
        "content": "<p>but if there were some other negative flavours that would capture the world</p>",
        "id": 153829066,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463892666
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192001\">@Erich Schulz</span> yes - that's certainly a possible/reasonable way to do it - but should we declare that it's the only way?<br>\nthere is an existing pre-coordinated SNOMED CT code for NKDA - and if we do use that, should we not semantically differentiate that from the case of the 'Medication' code?<br>\nthat's true for \"positive\" allergies/intolerances, too </p>",
        "id": 153829067,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1463892678
    },
    {
        "content": "<p>well seems to me cleaner to clarify  status than add new fields</p>",
        "id": 153829068,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463892813
    },
    {
        "content": "<p>i have no clue what exactly an \"inactive allergy\" is tho</p>",
        "id": 153829069,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463892839
    },
    {
        "content": "<p>or an active one really</p>",
        "id": 153829070,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463892856
    },
    {
        "content": "<p>to say \"No known allergies\", we could use the pre-coordinated SNOMED CT code for that - or use the top level hierarchy code for 'Substance' as the “excludedAgent\"<br>\n<span class=\"user-mention\" data-user-id=\"192001\">@Erich Schulz</span> - happy to entertain how we can use status to do all that we need<br>\nas I said, I expected to generate significant discussion - and I'm happy to be persuaded to make it simpler, if there is evidence to support that</p>",
        "id": 153829071,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1463892933
    },
    {
        "content": "<p>ha - i think \"eveidence\" will be hard to come by - this seems like more an issue of style and preference rather than there being a single right way</p>",
        "id": 153829072,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463893075
    },
    {
        "content": "<p>originally I was entertaining the idea of sticking with a single coded element (renaming it to 'code') :)<br>\nagree that's likely about evidence, really</p>",
        "id": 153829073,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1463893144
    },
    {
        "content": "<p>some of the things I'd like to be able to express are \"not allergic to cephalosporins (as far as we can tell)\" and \"didn't react to cephalosporins last time, so should be fine this time too\"</p>",
        "id": 153829074,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463893180
    },
    {
        "content": "<p>I can see (maybe) some merit in the snomed codes you identified here <span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> <a href=\"http://rhausam.no-ip.org/fhir/valueset-allergyintolerance-excluded-code.html\" target=\"_blank\" title=\"http://rhausam.no-ip.org/fhir/valueset-allergyintolerance-excluded-code.html\">http://rhausam.no-ip.org/fhir/valueset-allergyintolerance-excluded-code.html</a> but I think that they dont really belong in the allergyintolerance resource</p>",
        "id": 153829076,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463893376
    },
    {
        "content": "<p>these feel more like \"condition\" or \"observation\" codes to me</p>",
        "id": 153829077,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463893395
    },
    {
        "content": "<p>yes, I agree that we should be able to do that<br>\nand in this proposal we would probably do that with the code for the \"cephalosporins\" substance/medication class as the 'excludedAgent'<br>\nyou could request a new pre-coordinated SNOMED CT code for it (likely in an extension) or use a post-coordinated expression, but that seems a lot less likely</p>",
        "id": 153829078,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1463893413
    },
    {
        "content": "<p>that's part of the debate - should those codes be used, and, if so, where and how?<br>\none thing we've heard clearly in the prior discussions is that many of us want to be able to get all of the information about allergies/intolerances in one place - and be able to use a straightforward query (e.g., of a single resource type) to get it</p>",
        "id": 153829079,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1463893614
    },
    {
        "content": "<p>well my 2cw would be to delete <code>inactive</code> and <code>active</code> as  meaningless and add negative codes in the form of <code>has-previously-tolerated</code> and <code>not-previously-exposed</code>, and I would leave <code>substance</code> as the single field to describe the agent(s) in question...</p>",
        "id": 153829080,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463893811
    },
    {
        "content": "<p>and to put things all in one place I would deprecate those snomed codes and instead use the root concepts in the hierarchy</p>",
        "id": 153829081,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463893869
    },
    {
        "content": "<p>&lt;/m2c&gt; :-)</p>",
        "id": 153829082,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463893886
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192001\">@Erich Schulz</span> - do you think of \"not allergic to cephalosporins (as far as we can tell)\" and \"didn't react to cephalosporins last time, so should be fine this time too\" as significantly different?<br>\nmy take is that the latter would be some level of evidence for the former</p>",
        "id": 153829083,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1463893913
    },
    {
        "content": "<p>if someone is allergic to a related drug - eg penicillin then this makes a difference in if they get a drug or not</p>",
        "id": 153829084,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463894009
    },
    {
        "content": "<p>so it can make a real difference</p>",
        "id": 153829085,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463894027
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192001\">@Erich Schulz</span>, my take on what openEHR is doing is not like using negative codes in the form of has-previously-tolerated and not-previously-exposed<br>\nthe \"excluded\" archetypes are more or less analogous to my \"excludedCode\" and \"excludedAgent\" elements<br>\nand I've also thought about creating an AllergyIntoleranceExcluded resource, which would be even more aligned with that - but would require querying two resource types to get all of the information</p>",
        "id": 153829086,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1463894249
    },
    {
        "content": "<p>it's good to hear yoor thoughts - and I'm hoping (and expecting) to hear others</p>",
        "id": 153829087,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1463894397
    },
    {
        "content": "<p>i can see merit of a second resource (although it just adds more noise)</p>",
        "id": 153829088,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463894425
    },
    {
        "content": "<p>ha - too many ways to skin a cat! I can see all these approaches being workable</p>",
        "id": 153829089,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463894461
    },
    {
        "content": "<p>but that status value list does give me hives</p>",
        "id": 153829090,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463894475
    },
    {
        "content": "<p>yes - agree<br>\nmaybe it would be worth mocking up the \"AllergyIntoleranceExcluded\" resource, as well?<br>\nand maybe we could (temporarilly) include all of them in the build to make comparison easier<br>\nwe can/should look again at the statuses</p>\n<p>with the hives, maybe you're allergic to AllergyIntolerance? :)</p>",
        "id": 153829091,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1463894830
    },
    {
        "content": "<p>heh</p>",
        "id": 153829092,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463894865
    },
    {
        "content": "<p>my real issue is that (as with all things) </p>",
        "id": 153829093,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463894960
    },
    {
        "content": "<p>is that \"allergy\" is just another risk</p>",
        "id": 153829094,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463894975
    },
    {
        "content": "<p>we maybe 100% sure the patient is allergic</p>",
        "id": 153829095,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463894989
    },
    {
        "content": "<p>or 70% (most commonly)</p>",
        "id": 153829096,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463895002
    },
    {
        "content": "<p>or maybe even 1%</p>",
        "id": 153829097,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463895008
    },
    {
        "content": "<p>right</p>",
        "id": 153829098,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1463895021
    },
    {
        "content": "<p>or 99.999% sure there is no allergy</p>",
        "id": 153829099,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463895025
    },
    {
        "content": "<p>the vast majority of stated allergies are just made up</p>",
        "id": 153829100,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463895066
    },
    {
        "content": "<p>\"I got a virus as a kid, then then mum made the gp give me penicillin, which is when i got a rash and some diarrhoea\" </p>",
        "id": 153829101,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463895102
    },
    {
        "content": "<p>so splitting \"known\" and \"refuted\" allergies into 2 streams is always a bit problematic...</p>",
        "id": 153829102,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1463895201
    },
    {
        "content": "<p>yeah, it is - but combining them, or using a \"modifier element\" to distinguish them, seems to be, too</p>",
        "id": 153829103,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1463895614
    },
    {
        "content": "<p>Hi all-</p>",
        "id": 153829321,
        "sender_full_name": "DLBrown",
        "timestamp": 1464027694
    },
    {
        "content": "<p>Hi All - First time I've commented here, though I've been following FHIR for quite a while.</p>",
        "id": 153829322,
        "sender_full_name": "DLBrown",
        "timestamp": 1464027725
    },
    {
        "content": "<p>I wanted to chime in to support Erich Schulz comment on Allergies and Risks, and probability.</p>",
        "id": 153829323,
        "sender_full_name": "DLBrown",
        "timestamp": 1464027758
    },
    {
        "content": "<p>It would be great to examine a way to represent things like Allergy and Impression as accurately as possible. Making use of a coded value presents the same flexibility that we find useful for things like observations.</p>",
        "id": 153829325,
        "sender_full_name": "DLBrown",
        "timestamp": 1464027833
    },
    {
        "content": "<p>And, certainly for Allergies (AllergyIntolerance) this is quite germane. Representing Allergies in the problem list as real/true/canonical/verified is a very real problem, and source of mistrust for providers using the medical record.</p>",
        "id": 153829327,
        "sender_full_name": "DLBrown",
        "timestamp": 1464027903
    },
    {
        "content": "<p>There's a pretty good literature on the accuracy of patient-reported allergies, and it's grim.</p>",
        "id": 153829329,
        "sender_full_name": "DLBrown",
        "timestamp": 1464027922
    },
    {
        "content": "<p>thanks <span class=\"user-mention\" data-user-id=\"192073\">@DLBrown</span> I think there is a similare issue with expressing uncertainty with timeperiod - still haven't see a way of expressing ideas like \"while pregnant\", \"in childhood\", \"at night time\", \"years ago\", \"roughly 2004\" - these are all clinicians may have have for many clinical statement found in many resources</p>",
        "id": 153829389,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464049173
    },
    {
        "content": "<p>We used an extension for this - http:/fhir.hl7.org.nz/dstu2/StructureDefinition/al-TimeOfLife</p>",
        "id": 153829416,
        "sender_full_name": "David Hay",
        "timestamp": 1464053971
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191321\">@David Hay</span> that url doesn't say much!</p>",
        "id": 153829425,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464055486
    },
    {
        "content": "<p>seems like a core notion required as an option anywhere period is used...</p>",
        "id": 153829426,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464055537
    },
    {
        "content": "<p>analogous to <code>codeableConcept</code></p>",
        "id": 153829427,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464055564
    },
    {
        "content": "<p>not that much to say <img alt=\":smile:\" class=\"emoji\" src=\"static/third/gemoji/images/emoji/smile.png\" title=\":smile:\"> </p>",
        "id": 153829428,
        "sender_full_name": "David Hay",
        "timestamp": 1464055833
    },
    {
        "content": "<p>erm more than <code>The time of life when this allergy occurred (or was noted to occur)</code> tho surely?</p>",
        "id": 153829429,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464055880
    },
    {
        "content": "<p>that's all i'm getting...</p>",
        "id": 153829430,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464055890
    },
    {
        "content": "<p>Allergy/Intolerance is an important test case for FHIR, and has received a great deal of attention. It's an interesting case because everyone has to track allergy/intolerance statements, but there is a wide variation in how people actually do it, and litle prospect of getting people to see eye to eye on this. </p>",
        "id": 153829437,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464056580
    },
    {
        "content": "<p>a certain set of researchers and specialists think that we should be quite proscriptive in the resource and make people be specific about their estimates</p>",
        "id": 153829438,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464056619
    },
    {
        "content": "<p>well that aint happening...</p>",
        "id": 153829439,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464056640
    },
    {
        "content": "<p>but clinicians - and maintainers of existing records - generally go out of their way to avoid such things, and want to keep things very vague</p>",
        "id": 153829440,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464056664
    },
    {
        "content": "<p>there must be the option to record vague facts</p>",
        "id": 153829441,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464056690
    },
    {
        "content": "<p>Cerner posted some analysis of 48million allergy statements in their client systems to the PC list a few months back - it was very interesting </p>",
        "id": 153829442,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464056701
    },
    {
        "content": "<p>they exist and often impossible to clarify</p>",
        "id": 153829443,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464056704
    },
    {
        "content": "<p>(vague facts that is)</p>",
        "id": 153829444,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464056718
    },
    {
        "content": "<p>in fact, only yesterday I got to be asked the question by a registration nurse...</p>",
        "id": 153829445,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464056722
    },
    {
        "content": "<p>more to the point the cost of clarifying often exceeds the benefits</p>",
        "id": 153829446,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464056792
    },
    {
        "content": "<p>it's almost like we need to separate allergy statement from allergy assessment - and in fact, I wonder if we could do a profile on RiskAssessment for a formal work up of a n allergy statement, on the grounds that the existing AllergyIntolerance represents an patient statement, possibly with supporting evidence</p>",
        "id": 153829447,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464056797
    },
    {
        "content": "<p>and if you really cared - an inpatient allergist preparing a patient for treatment of something they believe they have an allergy to, for instance, then that's a totally different thing</p>",
        "id": 153829448,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464056843
    },
    {
        "content": "<p>there is an entire class of statements that have the same properties: period, probability and evedence....</p>",
        "id": 153829449,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464056859
    },
    {
        "content": "<p>in any situation certain vague facts will need clariying before proceeding - but many just remain asides</p>",
        "id": 153829450,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464056913
    },
    {
        "content": "<p>allergies and conditions both</p>",
        "id": 153829451,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464056925
    },
    {
        "content": "<p>back to the topic - I'm extremely doubtful that Rob's proposed refactoring of the resource is viable in the real world. It's trying to be partly formal risk assessment, but the inputs are too vague to allow reasoning. </p>",
        "id": 153829452,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464056926
    },
    {
        "content": "<p>is \"clinical impression\" the way forward?</p>",
        "id": 153829453,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464056959
    },
    {
        "content": "<p>well, I think that for formal assessmnent, yes, a combination of clinical impression and risk assessment. AllergyIntolerance is just the basic statement as kept by everybody as part of their risk management</p>",
        "id": 153829455,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464057025
    },
    {
        "content": "<p>might need to be clearer about the scope, perhaps</p>",
        "id": 153829456,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464057036
    },
    {
        "content": "<p>it seems to me that expression of ambiguity (poth <code>p</code> and <code>interval</code>) are systemic weaknesses in FHIR as it stands </p>",
        "id": 153829457,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464057060
    },
    {
        "content": "<p>we can't get agreement to that. And that's a sign that there's no data to populate it consistently. </p>",
        "id": 153829458,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464057114
    },
    {
        "content": "<p>let alone ambiguous ambiguity ;-)</p>",
        "id": 153829459,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464057117
    },
    {
        "content": "<p>mmm</p>",
        "id": 153829460,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464057123
    },
    {
        "content": "<p>it seems like FHIR is very close tho</p>",
        "id": 153829461,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464057154
    },
    {
        "content": "<p>and <code>CodeableConcept</code> seems like it provides an analogous type</p>",
        "id": 153829462,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464057237
    },
    {
        "content": "<p>i'm not imagining anything much more complex than that</p>",
        "id": 153829463,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464057258
    },
    {
        "content": "<p>this creates a nightmare for automated reasoning of course...</p>",
        "id": 153829464,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464057286
    },
    {
        "content": "<p>but that is the world....</p>",
        "id": 153829465,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464057296
    },
    {
        "content": "<p><code>observation.value</code> is a precedent </p>",
        "id": 153829466,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464057446
    },
    {
        "content": "<p>ie need to allow expression of both precise numbers <code>p=1</code> or <code>p=0</code> or codeable fuzzy real work statements....</p>",
        "id": 153829467,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464057530
    },
    {
        "content": "<p><code>possible</code>, <code>unlikely</code>, <code>probable</code>, </p>",
        "id": 153829468,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464057563
    },
    {
        "content": "<p>or sometime a range is possible <code>p between 0.1 and 0.3</code> (based on some quantifyiable scoring)</p>",
        "id": 153829469,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464057634
    },
    {
        "content": "<p>if FHIR cant capture these ideas then clinicians are forced to record as narrative and there is zero chance of any automated processing...</p>",
        "id": 153829470,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464057694
    },
    {
        "content": "<p>the same with time periods - sometime an accurate to the microsecond time stamp is there, sometimes (often) its vaguer</p>",
        "id": 153829471,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464057757
    },
    {
        "content": "<p>well, I think have time periods fine</p>",
        "id": 153829472,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464057943
    },
    {
        "content": "<p>but I'm far from convined that clinicians would be willing to be more precise. I'm not one, I just get to to listen to them often</p>",
        "id": 153829473,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464057978
    },
    {
        "content": "<p>ie just using the \"example\" type coded values as alternative to quantative values anywhere there is a clinical statement that is negatable would be a tremendous step forward for expressivity</p>",
        "id": 153829474,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464058048
    },
    {
        "content": "<p>and - after all - they are often recording what the patient has told them, and they may not have that degree of precision either...</p>",
        "id": 153829475,
        "sender_full_name": "David Hay",
        "timestamp": 1464058076
    },
    {
        "content": "<p>I'm not sure what you have in mind there Erich</p>",
        "id": 153829476,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464058111
    },
    {
        "content": "<p>the cost is complexity of reasoning - but any reasoning based on an incomplete dataset (because so much lost to narrative fields) wont be worth much</p>",
        "id": 153829477,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464058123
    },
    {
        "content": "<p>so in the context of this conversation...</p>",
        "id": 153829478,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464058138
    },
    {
        "content": "<p>allergy is nearly always not know with certainty</p>",
        "id": 153829479,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464058160
    },
    {
        "content": "<p>(very few folk get skin testing - and even that isn't 100% specific)</p>",
        "id": 153829480,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464058179
    },
    {
        "content": "<p>so every statement of allergy has an implied probability</p>",
        "id": 153829481,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464058204
    },
    {
        "content": "<p>simililarly \"not allergic\" is never actually 100%</p>",
        "id": 153829482,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464058237
    },
    {
        "content": "<p>but what is that probability? Asking clinicians to be specific about that is problematic. I've listened to the discusison about that</p>",
        "id": 153829483,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464058241
    },
    {
        "content": "<p>sure</p>",
        "id": 153829484,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464058250
    },
    {
        "content": "<p>that is what I'm saying</p>",
        "id": 153829485,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464058254
    },
    {
        "content": "<p>btw, my daughter is anaphylactic to cashew nuts. There is 100% certainty about that </p>",
        "id": 153829486,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464058265
    },
    {
        "content": "<p>have to allow clinicians to express what they know</p>",
        "id": 153829487,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464058267
    },
    {
        "content": "<p>and that connects me with a community of people who are both utterly sure, and have had extensive skin testing...</p>",
        "id": 153829488,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464058288
    },
    {
        "content": "<p>cool</p>",
        "id": 153829489,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464058304
    },
    {
        "content": "<p>so when that is know that is worth saying</p>",
        "id": 153829490,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464058314
    },
    {
        "content": "<p>p=1</p>",
        "id": 153829491,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464058320
    },
    {
        "content": "<p>but mostly what allergy means \"is patient says they are allergic to X so I am just going to pop that in this list\"</p>",
        "id": 153829492,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464058358
    },
    {
        "content": "<p>status confirmed, severity = high</p>",
        "id": 153829493,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464058372
    },
    {
        "content": "<p>you could could express that as <code>probably</code></p>",
        "id": 153829494,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464058390
    },
    {
        "content": "<p>as opposed to status = unconfirmed, which would be normal </p>",
        "id": 153829495,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464058397
    },
    {
        "content": "<p>but say you have an allergy to penicillin...</p>",
        "id": 153829496,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464058441
    },
    {
        "content": "<p>I could. But then the problem is dose response. There's 100% certainty that my daughter is analphylactic to cashew nuts. but there's a rather low % chance that she'll actually have anaphylaxis, because it's strongly dose dependent</p>",
        "id": 153829497,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464058447
    },
    {
        "content": "<p>there is a degree of cross reactivity between penicillin and cefalosporins...</p>",
        "id": 153829498,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464058480
    },
    {
        "content": "<p>(from memory around 4%)</p>",
        "id": 153829499,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464058496
    },
    {
        "content": "<p>just jumping into today's discussion - still need to catch up</p>",
        "id": 153829500,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464058512
    },
    {
        "content": "<p>this is what exists currently...</p>",
        "id": 153829501,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464058574
    },
    {
        "content": "<p><a href=\"http://www.clipular.com/c/5493992529068032.png?k=Gg2difzMUxt2FLTYQhqjQuOBdP4\" target=\"_blank\" title=\"http://www.clipular.com/c/5493992529068032.png?k=Gg2difzMUxt2FLTYQhqjQuOBdP4\">http://www.clipular.com/c/5493992529068032.png?k=Gg2difzMUxt2FLTYQhqjQuOBdP4</a></p>\n<div class=\"message_inline_image\"><a href=\"http://www.clipular.com/c/5493992529068032.png?k=Gg2difzMUxt2FLTYQhqjQuOBdP4\" target=\"_blank\" title=\"http://www.clipular.com/c/5493992529068032.png?k=Gg2difzMUxt2FLTYQhqjQuOBdP4\"><img src=\"http://www.clipular.com/c/5493992529068032.png?k=Gg2difzMUxt2FLTYQhqjQuOBdP4\"></a></div>",
        "id": 153829502,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464058580
    },
    {
        "content": "<p>i have no idea what the heck inactive means</p>",
        "id": 153829503,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464058611
    },
    {
        "content": "<p>looking at that value set it has the same systemic problem I see in condition</p>",
        "id": 153829504,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464058655
    },
    {
        "content": "<p>you can say p=1 and p=0 and very little inbetween</p>",
        "id": 153829505,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464058678
    },
    {
        "content": "<p>unconfirmed is in between.</p>",
        "id": 153829506,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464058738
    },
    {
        "content": "<p>sometimes we can put a number on things</p>",
        "id": 153829507,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464058744
    },
    {
        "content": "<p>much of the real work for this was done in association with openEHR. In that process, we considered a large number of models, that included various statements of probability. </p>",
        "id": 153829508,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464058772
    },
    {
        "content": "<p>and even subjective assessments have real world consequences</p>",
        "id": 153829509,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464058779
    },
    {
        "content": "<p>we were unable to find any consensus about their meanings, and there was a significant percentage of stakeholders with real clinical experience passionately opposed to adding them. </p>",
        "id": 153829510,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464058813
    },
    {
        "content": "<p>what the heck is active and inactive btw?</p>",
        "id": 153829511,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464058891
    },
    {
        "content": "<p>so we said to make them extensions. People can make extensions, gain experience using them, and we'll see how it plays out. note that no interest in this comes from the argonaut participants, who represent a large % of records for US EHRs. An openEHR is well connected in Europe and South America. And I know what the state of play here is in Australia - so we felt well informed</p>",
        "id": 153829512,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464058903
    },
    {
        "content": "<p>inactive nearly didn't make the cut</p>",
        "id": 153829513,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464058918
    },
    {
        "content": "<p>and in fact I'm not sure</p>",
        "id": 153829514,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464058945
    },
    {
        "content": "<p>the definition isn't very useful</p>",
        "id": 153829516,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464058949
    },
    {
        "content": "<p>same with active - does that mean your covered in hives??</p>",
        "id": 153829517,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464058956
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>, you said that \"I'm extremely doubtful that Rob's proposed refactoring of the resource is viable in the real world\" - I don't necessarily disagree<br>\nbut we need to figure out what is really better<br>\ndo you/we think that the openEHR approach seems better?<br>\nI'm happy to try to model this like that using two separate resources<br>\nI'm also willing to go back to a single resource and single coded element (mostly likely renamed to 'code' instead of 'substance') </p>",
        "id": 153829518,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464058998
    },
    {
        "content": "<p>interesting. we've diverged  from the openEHR model. I think both have changed, but their's would probably make you happier:</p>",
        "id": 153829520,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464059070
    },
    {
        "content": "<p>Coded Text<br>\nSuspected [A low level of clinical certainty about the propensity of a reaction to the identified 'Substance'.]<br>\nLikely [A reasonable level of certainty about the propensity for a reaction to the identified 'Substance'.]<br>\nConfirmed [A high level of certainty about the propensity for a reaction to the identified 'Substance', which may include clinical evidence by testing or re-challenge.]<br>\nResolved [The previously known reaction to the identified 'Substance' has been clinically reassessed and considered no longer to be an active risk.]<br>\nRefuted [The propensity for a reaction to the identified 'Substance' has been clinically reassessed or has been disproved with a high level of clinical certainty by re-exposure or deliberate challenge.]</p>",
        "id": 153829521,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464059072
    },
    {
        "content": "<p>or model all of them and get further opinions, from TermInfo, Patient Care and others<br>\nwhich I actually was thinking of doing tonight (after I write FHIR terminology questions!)</p>",
        "id": 153829522,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464059084
    },
    {
        "content": "<p>Rob, I'm not sure how you think that our approach is different to the openEHR approach. </p>",
        "id": 153829523,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464059108
    },
    {
        "content": "<p>other than the status codes, where I think we should have the same status codes + entered in error </p>",
        "id": 153829524,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464059136
    },
    {
        "content": "<p>primarily because there are two separate archetypes - one for \"positive\" allergies/intolerances, and the other for \"excluded\" statements</p>",
        "id": 153829525,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464059174
    },
    {
        "content": "<p>ah ok. but that won't fly in fhir either - the problem is that you have to look somewhere else - somewhere unexpected - to find the exclusions. That was strongly identifed as a safety risk by the EHR providers, and I found that pretty persausive </p>",
        "id": 153829526,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464059229
    },
    {
        "content": "<p>I'm not sure that it flys in openEHR either - I suspect that separation is not being used in practice; in Australia, we tried that model for the national program, and had to back away from it </p>",
        "id": 153829527,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464059281
    },
    {
        "content": "<p>exactly! - hence why I (and others) have been looking for an alternative</p>",
        "id": 153829528,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464059288
    },
    {
        "content": "<p>and that was just in CDA </p>",
        "id": 153829529,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464059295
    },
    {
        "content": "<p>mmm - thank <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> - i think the extension approach is workable - i'm think as decision support systems come online that quantifiable risks will be more common - as both inputs and outputs </p>",
        "id": 153829530,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464059356
    },
    {
        "content": "<p>then if that starts to grow consensus, we can improve the models. but we won't add speculative stuff that people 'should' do, because we've seen how that turns out</p>",
        "id": 153829531,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464059404
    },
    {
        "content": "<p>do we feel that a single 'code' element, with a value set binding that is broad enough to encompass substances, drug products and negated/excluded terms is adequate and \"safe\" enough?<br>\nthat's where I started, and actually I would be rather happy to go back to it if we can get a reasonable degree of consensus</p>",
        "id": 153829532,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464059447
    },
    {
        "content": "<p><a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=10067\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=10067\">GF#10067</a> for the status codes. </p>",
        "id": 153829534,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464059515
    },
    {
        "content": "<p>and I did propose the second \"negated/excluded\" element as an standard extension - with some expectation on my part that it wouldn't actually get picked up in practice - but it would be available if people really do want to use it and find it preferable</p>",
        "id": 153829535,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464059540
    },
    {
        "content": "<p>well, the problem with that was negation in the terminology vs negation in the model, right? and the interplay between status, substance, and the definition of substance</p>",
        "id": 153829536,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464059574
    },
    {
        "content": "<p>and the fact that terminology scope varies widely and peple are also comonly using text</p>",
        "id": 153829537,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464059592
    },
    {
        "content": "<p>+1 for 10067 :-)</p>",
        "id": 153829538,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464059621
    },
    {
        "content": "<p>yes - that's the issue with the \"one element\" approach - which we have now<br>\nbut I'm not sure how big a problem the negation in terminology issue is - especially with SNOMED CT now having some additional resolve to actually solve their handling of negation issue</p>\n<p>I have no problem with adjusting the status codes - just hadn't really gotten to that yet</p>",
        "id": 153829539,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464059708
    },
    {
        "content": "<p>also +1 for 10067</p>",
        "id": 153829540,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464059783
    },
    {
        "content": "<p>well,  I've been thinking about code vs agent and I don't see how this can do anything but muddy the waters</p>",
        "id": 153829541,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464059854
    },
    {
        "content": "<p>the idea of introducing excludedCode is fine, but we haev to say eplicitly that if you have just text, the text might be an exclusion, though not processible</p>",
        "id": 153829542,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464059901
    },
    {
        "content": "<p>so either there's an assertion: code.text.exists() implies exludedCode.empty() and excluded.text.empty()</p>",
        "id": 153829543,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464059950
    },
    {
        "content": "<p>or else, there's an explicit statement in the resource concerning the record keeping status:<br>\n- I don't use terminologies, so I don't know what the text is <br>\n- I track exclusions separately , and text isn't exclusion <br>\n- I track everything precisely, and use codes properly </p>",
        "id": 153829544,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464060000
    },
    {
        "content": "<p>I prefer the first approach, if we can get away with it. </p>",
        "id": 153829545,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464060039
    },
    {
        "content": "<p>this allows everyone to populate the records, to interpret them safetly, and to use decision support safely where the source information handles exclusions well enough </p>",
        "id": 153829546,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464060076
    },
    {
        "content": "<p>but I don't like the split between code and agent. when are they not the same thing? </p>",
        "id": 153829547,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464060094
    },
    {
        "content": "<p>possibly so - the reason I tried it was that the semantics of it, compared to the condition (\"allergy to x\") and negated/excluded situation (\"no known allergy ...\" or \"no allergy to x\") SNOMED codes are significantly different - but if we can exclude the use of the condition codes, or if systems can handle them showing up in the same field, and if they can handle the negated/excluded codes also in that same field, then I'm happy to go back to it<br>\nwith adequate decision support logic that certainly can be done, and, if done adequately (which I expect is likely), that should be perfectly safe</p>",
        "id": 153829548,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464060168
    },
    {
        "content": "<p>\"the idea of introducing excludedCode is fine, but we haev to say eplicitly that if you have just text, the text might be an exclusion, though not processible\" - I agree with that</p>",
        "id": 153829549,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464060193
    },
    {
        "content": "<p>I think it's not less safe than the source data. but it might not be perfectly safe. </p>",
        "id": 153829550,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464060263
    },
    {
        "content": "<p>\"so either there's an assertion: code.text.exists() implies exludedCode.empty() and excluded.text.empty()\" - we certainly might be able to do that (or something close to it)</p>",
        "id": 153829551,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464060266
    },
    {
        "content": "<p>and way safer than forcing people to figure out whether it's a code or an agent and getting it wrong</p>",
        "id": 153829552,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464060290
    },
    {
        "content": "<p>\"perfectly safe\" is undoubtedly a stretch :)</p>",
        "id": 153829553,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464060305
    },
    {
        "content": "<p>so if you remove the agent part, and add the constraint above, and document the assumption it's based on in the scope, then I'm happy</p>",
        "id": 153829554,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464060315
    },
    {
        "content": "<p>ok - I'm willing to give that a go<br>\nas I said, it's basically where I was before (without the extra constraint that you - reasonably - suggested)</p>",
        "id": 153829555,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464060446
    },
    {
        "content": "<p>so, if we do that, do you think excludedCode should be an extension? - because 80% of systems certainly do not do that now (and likely may not want to, even if it is offered)<br>\nor should we go ahead and \"waive\" the 80% rule in this case and make it core?</p>",
        "id": 153829556,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464060562
    },
    {
        "content": "<p>this is how I think about this: <br>\n- handling 'not allergic to a class' is a core requirement<br>\n- splitting into a separate field for information processing reasons doesn't make it non-core<br>\n- the problem is how to deal with varying granularities</p>",
        "id": 153829557,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464060815
    },
    {
        "content": "<p>so I don't think of this as an exception to the core rule</p>",
        "id": 153829558,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464060843
    },
    {
        "content": "<p>let me push back just a bit, if you don't mind<br>\nwe actually have a rather low use (as we've seen in the collected data) for even positive statements of an allergy to a class - along with some expert opinion which states that doing that is almost always either erroneous or useless, even though there are a very few cases where it actually does make some sense<br>\nunless I'm really overlooking something, I believe there is even less evidence that there is a real need to be able to state \"not allergic to a class\" (even though it sounds like it should be the \"right” thing to do)<br>\nso are you sure that it really is a core requirement?</p>",
        "id": 153829560,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464061117
    },
    {
        "content": "<p>well, what I see is core:<br>\n- NKA, NKDA, Not allergic to Latex </p>",
        "id": 153829561,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464061156
    },
    {
        "content": "<p>+ no adverse reactions to anaesthetics <br>\n+ no adverse reaction to contrast media</p>",
        "id": 153829562,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464061232
    },
    {
        "content": "<p>ok - if by class you mean only the unique cases of \"substance\" (the surrogate for NKA), \"drug\",\"food\", \"environment\", then I agree<br>\nlatex, of course, isn't a class<br>\nthose cases are all easily handled in the terminology</p>",
        "id": 153829563,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464061297
    },
    {
        "content": "<p>didn't see the last two</p>",
        "id": 153829564,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464061308
    },
    {
        "content": "<p>annd sometimes , penicillin or sulphonamies etc </p>",
        "id": 153829565,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464061313
    },
    {
        "content": "<p>well, those are the functional things I see as core. I don't feel strongly that exclusion of a class generically is core </p>",
        "id": 153829566,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464061357
    },
    {
        "content": "<p>the last ones - especially the last two - are very soft<br>\nand none of those probably ever need to show up on the allergy list</p>",
        "id": 153829567,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464061380
    },
    {
        "content": "<p>they may need to be documented in some cases, but could be notes (or even observations, possibly)</p>",
        "id": 153829568,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464061431
    },
    {
        "content": "<p>my last statements are only referring to the \"not allergic to ...\" case - just to be clear</p>",
        "id": 153829569,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464061487
    },
    {
        "content": "<p>well, that's easy to say, but at least some times orgnizational policy is that they should be up on the allergy list. I don't know how common that is</p>",
        "id": 153829570,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464061490
    },
    {
        "content": "<p>why don't we look through the negation requirments data that we've compiled (from the VA, Cerner, etc.) and see if they show up, and how often?<br>\nI'm happy to follow what the data suggests (even though obviously not \"complete\" and totally representative, it's a pretty extensive and useful compilation)</p>",
        "id": 153829571,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464061680
    },
    {
        "content": "<p>that's a good idea. I'll see if I can acquire any extra data</p>",
        "id": 153829572,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464061727
    },
    {
        "content": "<p>that's great</p>",
        "id": 153829573,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464061739
    },
    {
        "content": "<p>I'll refactor my proposal according to what we've arrived at above<br>\n(I'll keep my other one around locally, at least for now)</p>",
        "id": 153829574,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464061998
    },
    {
        "content": "<p>k great and we'll see how it goes</p>",
        "id": 153829575,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464062011
    },
    {
        "content": "<p>sure</p>",
        "id": 153829576,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464062023
    },
    {
        "content": "<p>for those who haven't seen it, earlier US analysis on this:</p>",
        "id": 153829577,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464062556
    },
    {
        "content": "<p>Disclaimer:  I did a review of nearly 23 million negated allergy records, which originated from 60 distinct sources (US-based) across approximately 10 different EHRs.  I had to use some systematic means to identify these negated allergy records, which risks a certain bias in my findings. </p>\n<ul>\n<li>\n<p>nearly 13M negated records (56%) had standard codes (almost exclusively SNOMED, likely driven from MU requirements, except rare cases where I see a presumably fake -1 RxNorm code for NKDA), such that this small finite list would be easily identifiable from other allergen codes.  Examples include:<br>\n160244002      No known allergies<br>\n249683010      No known allergies<br>\n2579110013    NKA - No known allergies<br>\n409137002      No known drug allergies<br>\n2470950010    No known drug allergies<br>\n2579608012    NKDA - No known drug allergies<br>\n2791858012    No known history of drug allergy<br>\n2791859016    No known medicine allergy<br>\n2696018013    No known food allergy<br>\n428607008      No Known Environmental Allergies</p>\n</li>\n<li>\n<p>nearly 10M negated records (44%) I would categorize as “consistent freetext” or “proprietary codes” within a single source system, such that it seems reasonable for the vendor to identify these negation records provided all sources for the vendor are consistent.  Stated another way, there is variance *across* different sources, but there is consistency *within* a given source system.  Examples include:<br>\nSource 1 using Vendor A’s EHR:<br>\n            NKA<br>\nNKDA<br>\nNKEA<br>\nNKFA<br>\nSource 2 using Vendor B’s EHR:<br>\n            No Known Drug Allergy<br>\nSource 3 using Vendor C’s EHR:<br>\n            N.K.D.A.<br>\nNKDA<br>\nNONE</p>\n</li>\n<li>\n<p>less than 1M records (&lt;1%) I would classify as “inconsistent freetext” such that it would be difficult to identify due to all the permutations of misspellings, punctuation, spacing, abbreviations, verbose statements etc.  Examples include:</p>\n</li>\n</ul>\n<p>Abbreviations:<br>\nno known<br>\n            no known meds</p>\n<p>Punctuation examples:<br>\n*No Known Allergies<br>\n            no known allergies.<br>\n            no known allergies!!!!!!<br>\n            'No known allergies'</p>\n<p>Misspelled words:<br>\nNO KNOWN ALELRGIES<br>\nNO KNOWN DRUG ALLEGIES<br>\nNo Known Allegies<br>\nno known alllergy<br>\nno known alllergies<br>\nno known allergery<br>\nNO KNOWN ALLERGIEW<br>\n            no known allergy's</p>\n<p>Spacing:<br>\nNO KNOWN  ALLERGIES</p>\n<p>Verbose:<br>\n            Denies, No known allergies<br>\nDenies, No Known Allergies.<br>\nmom sts no known medication allergies<br>\nmother sts no known medication allergies<br>\npt sts no known medication allergies<br>\nNO KNOWN ALLERGIES TO DRUGS OR ANTIBIOTICS<br>\nNO known drug allergies, environmental allergies<br>\n            Denies, Mom allergy pcn, No known allergies<br>\nno known allergies (food or drug)  </p>",
        "id": 153829578,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464062563
    },
    {
        "content": "<p>yes - very helpful analysis from Michelle Miller</p>",
        "id": 153829579,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464062945
    },
    {
        "content": "<p>Just to confirm my understanding of the proposed changes:</p>\n<ul>\n<li>rename substance to code</li>\n<li>code is now optional</li>\n<li>code value set still includes exemplar negation codes, such as NKA and NKDA</li>\n<li>using the excludedCode extension is an optional/alternative way of making a negative assertion </li>\n<li>invariant to have only one of code or excludedCode</li>\n</ul>\n<p>The ability to convey \"No Latex Allergy\" could be done 3 different ways (assuming #2 isn't treated as a double negative)<br>\n1) AllergyIntolerance.code =  No Latex Allergy (e.g. SNOMED 409175002)<br>\n2) AllergyIntolerance.excludedCode (extension) = No Latex Allergy (e.g. SNOMED 409175002) <br>\n3) AllergyIntolerance.excludedCode (extension) = Latex (e.g. SNOMED 111088007)</p>",
        "id": 153829699,
        "sender_full_name": "Michelle (Moseman) Miller",
        "timestamp": 1464132835
    },
    {
        "content": "<p>eww?</p>",
        "id": 153829700,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464132907
    },
    {
        "content": "<p>how strong is the desire to support all the SNOMED composite \"no known allergy to blah codes\"</p>",
        "id": 153829701,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464133132
    },
    {
        "content": "<p>mixing them in with a structure that supports combination of \"status\" and \"substance\" seems a bit, erm, untidy</p>",
        "id": 153829702,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464133280
    },
    {
        "content": "<p>whereas using high-level substance codes together with some kind of negated \"status\" codes would allow the coding system hierarchy to cope with all possibilities by editing it's substance hierarchy and doing logic based on that</p>",
        "id": 153829703,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464133391
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191403\">@Michelle (Moseman) Miller</span> - yes, what you said is correct</p>",
        "id": 153829704,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464136392
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192001\">@Erich Schulz</span> - your concern is what earlier led me to consider separating out the casusative agents (substances/products) in separate elements<br>\nbut I'll look further at the last part of your comment</p>",
        "id": 153829705,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464136490
    },
    {
        "content": "<p>Regarding:</p>\n<blockquote>\n<p>1) AllergyIntolerance.code = No Latex Allergy (e.g. SNOMED 409175002)<br>\n2) AllergyIntolerance.excludedCode (extension) = No Latex Allergy (e.g. SNOMED 409175002) <br>\n3) AllergyIntolerance.excludedCode (extension) = Latex (e.g. SNOMED 111088007)</p>\n</blockquote>\n<p>I'm not sure what good it's doing to have #1 <strong>and</strong> #3. Meanwhile, #2 is scary — if I'm <strong>excluding</strong> the concept of \"<strong>no</strong> latex allergy\"... ick. All this structure is just making the picture more confusing unless you can impose rules on how it's used.</p>",
        "id": 153829817,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1464206409
    },
    {
        "content": "<p>I think we're going to impose rules like that yes</p>",
        "id": 153829844,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464212131
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> and <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> - we need to decide which particular rules we really want to impose<br>\nand it's not really quite as simple as it seems on the surface (in my opinion and experience - and not mine only)<br>\n#1 and #3 don't seem to make sense for \"latex\" - but that's just one case<br>\npart of the question is, for what range of 'xx' do you need to be able to say \"no xx allergy\", and in what contexts?<br>\nfor the allergy list - probably almost nothing beyond the 7 pre-coordinated \"no known allergy\" or \"no x allergy\" SNOMED CT codes - so #1 is an obvious solution<br>\nfor clinical documentation in notes, on the other hand, you may like to have a whole lot more (e.g., \"no allergy to cephalexin\") - so #3 would be the obvious solution there, unless you just want to rely on text for that use case (as normally it wouldn't be involved in decision support - it's primarily or exclusively for legal documentation)<br>\n#2 is ugly, but will certainly happen, unless we tighten the bindings significantly - it can be dealt with (more or less) by stating that the interpretation of redundant negation is additive or reinforcing - not resulting in a positive statement<br>\nthe obvious way to simplify it is to stay with a single element solution (renamed from 'substance' to 'code', as agreed by PC, at least) and allow likely any of the above codes to be used - in that approach, the way to do \"no allergy to xx\", beyond the 7 existing SNOMED CT codes  (I'm talking only SNOMED here at the moment) would be either to request a new pre-coordinated code for whatever you want to say (cumbersome and relatively slow, in most cases, unless you manage your own extension), or use a post-coordinated expression (which most seem definitely to not want to do), or use text</p>\n<p>I'm happy to stay with the single element approach - if we can get enough agreement on that<br>\nor listen to any coherent and practical approaches if there is something that we haven't adequately considered yet!</p>",
        "id": 153829849,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464216621
    },
    {
        "content": "<p>have read comments by <span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> and <span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> - I really think these legacy composite codes are making this very simple set of observations into a minefield. This is just a series of simple statements: [patient X]-[has Y relationship]-[with substance (class) Z].</p>",
        "id": 153829851,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464217519
    },
    {
        "content": "<p><strong>everything</strong> can be expressed in that format</p>",
        "id": 153829852,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464217531
    },
    {
        "content": "<p>and best of all this structure allows delegation of substance classification trees to the 3rd party publishers (like SNOMED etc)</p>",
        "id": 153829853,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464217593
    },
    {
        "content": "<p>sure. let's just abandon legacy data and systems. no one will mind</p>",
        "id": 153829854,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464217640
    },
    {
        "content": "<p>heh</p>",
        "id": 153829855,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464217645
    },
    {
        "content": "<p>i dont think this is at all abandoning anyone</p>",
        "id": 153829856,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464217680
    },
    {
        "content": "<p>all the composite codes map neatly into the Y-Z format above</p>",
        "id": 153829857,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464217711
    },
    {
        "content": "<p>where <code>Y = \"not known to be allergic too\"</code> and <code>Z</code> is whatever</p>",
        "id": 153829858,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464217743
    },
    {
        "content": "<p>not if they're not codes. And not if you can't decompose the codes. Which is the case for almost all implementations. Even if they use decomposible codes from SCT</p>",
        "id": 153829859,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464217837
    },
    {
        "content": "<p>but Erich offers an interesting possibility: just have code, which is loose, and can be just text. And then allow Erich's formal statement for anyone who can either populate it correctly in the first place, and/or retrospectively populate it from an expert system. Then the difference between legacy looseness and proper semantics is pretty clear </p>",
        "id": 153829860,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464217922
    },
    {
        "content": "<p>we were discussing today that the US ISA (Interoperability Standards Advisory) specifies the use of SNOMED CT \"allergy to xx\" codes<br>\nnot everyone has to do what the US does - but it's an example of how it's not going to be especially simple to move away from these \"legacy composite codes\" (I believe they're used fairly extensively in the UK, too, if I recall correctly)<br>\nand, actually, these codes are generally reasonably well modeled within SNOMED CT - so I'm not sure whether it makes the most sense to move away from them, or make reasonable provision for being able to utilize them</p>",
        "id": 153829861,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464218041
    },
    {
        "content": "<p>that's not really the terminfo negation agenda playing out, but it sounds like a promising approach to me</p>",
        "id": 153829862,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464218075
    },
    {
        "content": "<p>isn't my take on Erich's proposal doing that - use the SCT codes in the code, and decompose them into SCT relationships in Erich's triples?</p>",
        "id": 153829863,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464218180
    },
    {
        "content": "<p>the key point being <span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> that there is a one to one mapping from these codes to the <code>Y-Z</code>format</p>",
        "id": 153829864,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464218255
    },
    {
        "content": "<p>I presume by \"modeled in SNOMED\" that this means that for each code that somehow Y &amp; Z are already contained in the snomed somehow</p>",
        "id": 153829865,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464218323
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> well, it certainly might be - I wasn't completely sure that I followed it<br>\n<span class=\"user-mention\" data-user-id=\"192001\">@Erich Schulz</span> yes, that's exactly what I meant by \"modeled in SNOMED\" - the Y &amp; Z are already there</p>",
        "id": 153829866,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464218441
    },
    {
        "content": "<p>(this probably puts me a bit out on a limb - but I would also assert that the ability to perform <br>\nhierarchical logic is a core requirement of any decent application handling any clinical information for CDS or even list reconciliation)</p>",
        "id": 153829867,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464218443
    },
    {
        "content": "<p>with the additional caveats that the substance codes are only the Z, whereas the product codes are the Z along with part, but not all of the Y</p>",
        "id": 153829868,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464218580
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> I guess the path of least resistance (sensing the writing on the wall) is that if these negated codes are to be allowed then the set should be limited to those that have a standard modelling to a \"Y-Z\" pair</p>",
        "id": 153829869,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464218628
    },
    {
        "content": "<p>I'm looking at the way polymorphic observation values are handled</p>",
        "id": 153829870,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464218685
    },
    {
        "content": "<p>which are a more complex case of <code>X-Y-Z</code></p>",
        "id": 153829871,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464218709
    },
    {
        "content": "<p>actually sorry scratch that</p>",
        "id": 153829872,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464218729
    },
    {
        "content": "<p>this is different</p>",
        "id": 153829873,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464218735
    },
    {
        "content": "<p>so this comes down to allowing either explicit assertion of <code>Y-Z</code> or use of a code that by itself expresses <code>Y-Z</code>...</p>",
        "id": 153829874,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464218801
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192001\">@Erich Schulz</span> that limit should be fine - all of the SNOMED CT codes (including primitive ones) should meet the \"have a standard modelling to a \"Y-Z\" pair\" criterion</p>",
        "id": 153829875,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464218803
    },
    {
        "content": "<p>where \"Y\" should be a very small list??</p>",
        "id": 153829876,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464218832
    },
    {
        "content": "<p>yes - I think so<br>\nit's \"Causative agent\" for the allergic conditions<br>\nand it's that plus a \"Known absent\" context wrapper for the negated ones<br>\nthat probably covers everything (unless I've missed some or all of your point)</p>",
        "id": 153829877,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464218955
    },
    {
        "content": "<p>and it should be possible to always maps to an equivilant FHIR <code>status</code> &amp; <code>substance</code> represention ??</p>",
        "id": 153829878,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464219009
    },
    {
        "content": "<p>hows that <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> - no legacy left behind ;-)</p>",
        "id": 153829879,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464219057
    },
    {
        "content": "<p>well, maybe not quite<br>\ndo we still need an 'excludedCode' element that carries that semantic - or are you proposing to do the 'excluded' notion in status? - if the latter, that might be overloading status a bit too much?</p>",
        "id": 153829880,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464219200
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> i would have thougth status was the place</p>",
        "id": 153829881,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464219276
    },
    {
        "content": "<p>it being a fuzzy representation of probability?</p>",
        "id": 153829882,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464219360
    },
    {
        "content": "<p>we can discuss that, for sure - status doesn't do that now, though</p>",
        "id": 153829883,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464219388
    },
    {
        "content": "<p>noted</p>",
        "id": 153829884,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464219396
    },
    {
        "content": "<p>with the current list of codes</p>",
        "id": 153829885,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464219400
    },
    {
        "content": "<p>also worth noting that personally I would see it as a step forward for humanity to \"deprecate\" the use of negated codes... but doen't sound like that will fly</p>",
        "id": 153829886,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464219672
    },
    {
        "content": "<p>I probably wouldn't disagree - as long as we have a well understood and equally good (and hopefully better) way to do it in the information model<br>\nwe didn't have that in V3 - even though it seemed to be \"elegant\"<br>\nI agree it will ultimately be better if we can do it in one place </p>",
        "id": 153829887,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464219931
    },
    {
        "content": "<p>if looking at adding values to <code>status</code> - its worth seperating \"not known to be allergic to\" and \"has been previously exposed to without reaction\"</p>",
        "id": 153829888,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464220095
    },
    {
        "content": "<p>i'm not sure it is every really practical to say \"not allergic to\" - as this can change from one does to another</p>",
        "id": 153829889,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464220158
    },
    {
        "content": "<p>tramadol is an interesting drug -because about 1/3 of people get a single dose then say they dont want any more...</p>",
        "id": 153829890,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464220252
    },
    {
        "content": "<p>I agree - that's why we always say (and the codes reflect) \"no known allergy to ..\"</p>",
        "id": 153829891,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464220263
    },
    {
        "content": "<p>the other 2/3s find it fine</p>",
        "id": 153829892,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464220269
    },
    {
        "content": "<p>so if you know they have previous exposure without issues it makes it more likely to use it up front (because it has a few benefits)</p>",
        "id": 153829893,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464220298
    },
    {
        "content": "<p>history of cephalosporin exposure with a known penicillin allergy is another example where the distinction can be important</p>",
        "id": 153829894,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464220362
    },
    {
        "content": "<p>yes - true of some other drugs, as well - but I haven't actually seen that high a prevalence of intolerance to tramadol in patients I've prescribed it to</p>",
        "id": 153829895,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464220391
    },
    {
        "content": "<p>you must give it more gently ;-)</p>",
        "id": 153829896,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464220435
    },
    {
        "content": "<p>yes, it CAN be important - but practically it often isn't - however it's hard, and may be risky,  to determine which is which<br>\ncross-allergy is becoming less and less recognized as a real issue - as I've seen and as I hear from the allergists</p>",
        "id": 153829897,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464220585
    },
    {
        "content": "<p>have to go for a bit - we should probably try to summarize where we think we've landed with this - at least in regard to what we want to do in the resource model itself (no matter what we may do in regard to transformations on the back end)?</p>",
        "id": 153829898,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464220725
    },
    {
        "content": "<p>i guess the point is that \"previous exposure without reaction\" is sufficiently different to \"not known to be allergic to\" to alter clinical practice</p>",
        "id": 153829899,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464220741
    },
    {
        "content": "<p>yes it is - gives a significantly higher degree of confidence in otherwise potentially questionable cases</p>",
        "id": 153829900,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464220848
    },
    {
        "content": "<p>i'm wondering if chucking in \"no previous exposure to\" is a bridge too far?</p>",
        "id": 153829901,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464220892
    },
    {
        "content": "<p>so both \"previous exposure without reaction\" and \"no previous exposure to\" would be refinements of the more commonly recorded  \"not known to be allergic to\" ...</p>",
        "id": 153829902,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464220979
    },
    {
        "content": "<p>used to be important with streptokinase (showing my age)</p>",
        "id": 153829903,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464221024
    },
    {
        "content": "<p>(because you only gave it once because the incidence of becoming allergic was so high)</p>",
        "id": 153829904,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464221084
    },
    {
        "content": "<p>I'm from the streptokinase era, too :)<br>\nagree</p>",
        "id": 153829906,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464221126
    },
    {
        "content": "<p>summary: <a href=\"https://docs.google.com/document/d/1hytCtPIDp1NgvsRN90Nt-YXYNNCGIedvNyKxbxI9VG8/edit?usp=sharing\" target=\"_blank\" title=\"https://docs.google.com/document/d/1hytCtPIDp1NgvsRN90Nt-YXYNNCGIedvNyKxbxI9VG8/edit?usp=sharing\">https://docs.google.com/document/d/1hytCtPIDp1NgvsRN90Nt-YXYNNCGIedvNyKxbxI9VG8/edit?usp=sharing</a></p>",
        "id": 153829907,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464221644
    },
    {
        "content": "<p>not entirely sure that the pairs need to be 0..* - it feels like it sits on the edge of core</p>",
        "id": 153829909,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464225477
    },
    {
        "content": "<p>make it a code not coding then (with mappings to SCT)</p>",
        "id": 153829910,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464225477
    },
    {
        "content": "<p>well, Rob, are you interested in trying it? Go back to the existing allergyIntolerance model, change substance to code, make the definition horribly loose, and then add a new element with cardinality 0..*, and the 2 sub elements - relationship and substance, with example value sts from SCT. </p>",
        "id": 153829911,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464225477
    },
    {
        "content": "<p>then we could write up a set of methods for populating the logic structures given common legacy inputs</p>",
        "id": 153829912,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464225477
    },
    {
        "content": "<p>probably not, given how messy records are</p>",
        "id": 153829913,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464225477
    },
    {
        "content": "<p>but hopefully often possible</p>",
        "id": 153829914,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464225477
    },
    {
        "content": "<p>e.g. a refuted excluded means that we're no longer claiming that there isn't an exclusion.</p>",
        "id": 153829915,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464225477
    },
    {
        "content": "<p>I don't think we need an excluded code. it would just go in the code. and then if you wanted semantics, you'd use the pair</p>",
        "id": 153829916,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464225477
    },
    {
        "content": "<p>and not proposing to do excluded in the status. the status is the status of the assertion, not the status of the allergy</p>",
        "id": 153829917,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464225477
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> if you are saying status is of the observation then shouldn't its allowed values be the same as status.observation?</p>",
        "id": 153829919,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464225877
    },
    {
        "content": "<p>ie <code>registered | preliminary | final | amended +</code></p>",
        "id": 153829920,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464225890
    },
    {
        "content": "<p>?</p>",
        "id": 153829921,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464225891
    },
    {
        "content": "<p>~~or looking at condition.status... <code>provisional | differential | confirmed | refuted | entered-in-error | unknown</code>~~ (edit - actually that one is just as bad -see other thread)</p>",
        "id": 153829922,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464225953
    },
    {
        "content": "<p>/</p>",
        "id": 153829923,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464225986
    },
    {
        "content": "<p>oops. sorry? </p>",
        "id": 153829924,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464225994
    },
    {
        "content": "<p>wrt you comment \"and not proposing to do excluded in the status. the status is the status of the assertion, not the status of the allergy\"</p>",
        "id": 153829925,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464226109
    },
    {
        "content": "<p>i can see case for seperating notion of \"certainty\" from the notion of \"status of this note\"... maybe...</p>",
        "id": 153829926,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464226253
    },
    {
        "content": "<p>ie (\"draft/preliminary/final/in-error\") being a different dimension to (\"certain\"/\"possible\"/\"unlikely\"/\"denied\")</p>",
        "id": 153829927,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464226393
    },
    {
        "content": "<p>the ability to express (un)certainty is something required for all clinical statements as is the need to record the \"status of the statement\"</p>",
        "id": 153829928,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464226722
    },
    {
        "content": "<p>urg</p>",
        "id": 153829929,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464226725
    },
    {
        "content": "<p>and if the \"status of the assertion\" is to be seperated from the \"the status of the allergy\" it would make sense to differentiate codes that make a complete statement ie \"Y-Z\", from partial staments ie just \"Y\" (eg \"not known to be allergic too\")</p>",
        "id": 153829930,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464227558
    },
    {
        "content": "<p>and in this case the current <code>AllergyIntolerance.status</code>value set would want further pruning?</p>",
        "id": 153829931,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464227617
    },
    {
        "content": "<p>the reason I'm going urg is I just realised the \"entered-in-error\" seems to often sit in a list of hetergenous qualifier statements...</p>",
        "id": 153829932,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464228219
    },
    {
        "content": "<p>hence the \"status of attribute\" vs \"the status of the statement of the attribute\" are often conflated</p>",
        "id": 153829933,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464228294
    },
    {
        "content": "<p>so would seem to me they either need to be seperated, or the conflation is accepted...</p>",
        "id": 153829935,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464228941
    },
    {
        "content": "<p>again, we haven't been able to get agreement about uncertainty so it is an extension for now </p>",
        "id": 153829941,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464230170
    },
    {
        "content": "<p>I don't know. I presume, Rob, you're going to build another straw man for us? let's what till we see that</p>",
        "id": 153829942,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464230170
    },
    {
        "content": "<p>just got back home<br>\nI'll go back and read through everything I missed while I was out - and see if I can make sense of it all :)<br>\nbut yes, I'll do another straw man</p>",
        "id": 153829946,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464235530
    },
    {
        "content": "<p>I've not made it all the way through the comments but some of the SNOMED modeling statements here are far enough from the actual truth to cause incorrect assumptions. Specifically the \"No latex allergy\" modeling in SCT does not exactly align with <span class=\"user-mention\" data-user-id=\"192001\">@Erich Schulz</span> x-y-z model. All the \"no allergy\" concepts are \"context\" concepts which means the SCT model requires at least two \"steps\" away from the root concept to find the substance concept. My point here is that using the existing SCT model would not place a substance into the \"Z\" slot. For \"No Latex Allergy\" (409175002) the \"Z\" slot would have \"Latext Allergy\" - from which you can find the substance.</p>",
        "id": 153830212,
        "sender_full_name": "Robert McClure",
        "timestamp": 1464362221
    },
    {
        "content": "<p>Ok - I have another issue with all this. First, I understand that every concrete approach we come up with have vocal, powerful, knowledgable detractors - I don't think there is a solution that will make everyone happy. I suspect the big dividing line is when push comes to shove is the solution you are arguing for more for reasoning or more for human intrepretation. I sense that those weighted on the former don't like to mix semantic types into one slot, those on the latter are less concerned about mixing semantics in a slot and are more focused on seeing common things together. So I'd like to better understand if this analysis is correct - i.e.: do we need to choose among those two (in real practical systems)? If so - can we come to an agreement on which we will currently prefer?</p>",
        "id": 153830216,
        "sender_full_name": "Robert McClure",
        "timestamp": 1464362758
    },
    {
        "content": "<p>Yes, it's definitely more complex than a simple x-y-z, as you say.  I hadn't included that so far in this thread, but I did put a lot of that specifically into the earlier version of my proposal in the actual FHIR build (in my local build so far).  I showed the actual SNOMED CT expressions for the concepts, and where the \"Causative agent\" (substance or product ) is represented (and with a product, the substance(s) are one level deeper).  With the reworking of the proposal that is still in progress, I haven't yet migrated that to the current version, but I will - before further discussion in Patient Care next week.  </p>",
        "id": 153830217,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464362769
    },
    {
        "content": "<p>You're probably on the right track generally in regard to the division, Rob. I don't know about answering your two questions.  I think that's what we've been trying to do - in this thread, as well as in other discussions.</p>",
        "id": 153830219,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464363102
    },
    {
        "content": "<p>Mmm.. I am missing something. \"no latex allergy\" maybe modelled differently in snomed to the y-z catch all that I suggested. But I think that is a variation (joy of language) </p>",
        "id": 153830304,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464388041
    },
    {
        "content": "<p>Importantly \"no latex allergy\" can be expressed equally as Y-Z</p>",
        "id": 153830305,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464388173
    },
    {
        "content": "<p>(where Z is a substance and Y is a statement about a patient's allergy /intolerance to given substance) </p>",
        "id": 153830306,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464388323
    },
    {
        "content": "<p>well, I think the fundamental tension is between people who really focus on what the information 'should be' vs those who are constrained by what already is in place. I'm looking fora solution that enables what should be but allows a graceful path forward. </p>",
        "id": 153830316,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464389920
    },
    {
        "content": "<p>I didn't check that snomed ct model for these codes myself, but I agree with Erich: you should be able to do the transform. just difficult if SCT doesn't help (and sadly, typical for SCT - it's structure doesn't empower me to do what I want very often)</p>",
        "id": 153830317,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464389965
    },
    {
        "content": "<p>one of the many things on my radar is to ponder ways of developing 'sharable knowledge resources' - to seperate the role of ontology from knowledge representation (with SNOMEDs modeling being an simple case of knowledge representation)... but is another story...</p>",
        "id": 153830319,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464390141
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> i would be surprised if a combination of <code>(status+substance) OR compound-code</code>didnt meet all needs</p>",
        "id": 153830321,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464390232
    },
    {
        "content": "<p>and at least allow debate to move down a level into what the allowable values in the 3 fields are</p>",
        "id": 153830322,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464390286
    },
    {
        "content": "<p>Probably tangential to this, but the modeling of the SCT concept \"Latex allergy\"  doesn't look correct. Both substances latex and rubber are siblings with a direct parent biopolymer, but latex allergy is modeled as a Rubber allergy, hence ends up having two role groups with causative agents rubber and latex. Strange.</p>",
        "id": 153830334,
        "sender_full_name": "Michael Osborne",
        "timestamp": 1464396178
    },
    {
        "content": "<p>plenty of strange like that</p>",
        "id": 153830336,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464396231
    },
    {
        "content": "<p>hello <span class=\"user-mention\" data-user-id=\"192047\">@Michael Osborne</span> ! &lt;off-topic&gt;yes all the more reason for seperating knowledge representation task from ontology publishing and having diverse ecosystem of knowledge maintainers &lt;/off-topic&gt;</p>",
        "id": 153830351,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464397662
    },
    {
        "content": "<p>but I think SCT is probably right here - \"latex allergy\" is strictly a \"rubber allergy\" - although strictly not all \"latexes\" are biopolymers... so thanks to ambiguity of common-use language we'll never a 100% clean statements :-/ - but this is a tar-pit that FHIR cant fix </p>",
        "id": 153830352,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464398153
    },
    {
        "content": "<p>Sorry - Just catching up on these posts....That's a scary number of EHR's using SNOMED CT descriptions instead of concepts...That is really disturbing.</p>",
        "id": 153830354,
        "sender_full_name": "Michael Osborne",
        "timestamp": 1464399415
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192047\">@Michael Osborne</span> - it's a journey isn't it? main game is to give everyone a nice destination to get to (and maybe some way-points along the way) - free text is definitely better than a scanned pdf even if it isn't as a good as structured, tightly defined JSON...</p>",
        "id": 153830355,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464400991
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192001\">@Erich Schulz</span>  Those people are really on the wrong train.</p>",
        "id": 153830356,
        "sender_full_name": "Michael Osborne",
        "timestamp": 1464401125
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> - agree with \"looking for a solution that enables what should be but allows a graceful path forward\" - that's what I'm trying to get to (along with enough agreement to actually do it)</p>",
        "id": 153830358,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464402239
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192047\">@Michael Osborne</span> I also noticed the strangeness in the \"Latex allergy\" modeling - hadn't pursued the issue yet, but we probably should raise it</p>",
        "id": 153830359,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464402478
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> I think the root cause of \"the latex problem\" is simply imprecise common use language (hence its a tar-pit) - \"latex allergy\" really means rubber allergy if you use the precise meaning for latex (I dont think it would be possible to have an allergy to all synthetic latexes\")</p>",
        "id": 153830366,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464412754
    },
    {
        "content": "<p>We discussed this further on the TermInfo call just now.  There is definitely more work to do on status, and how it interacts with the decisions that we make regarding the elements.  I'm getting back to making the further updates to my build for discussion - possibly some today on the PC Allergy/Intolerance call, and tomorrow on the PC FHIR call.  </p>",
        "id": 153830959,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464790467
    },
    {
        "content": "<p>Hi All, we had discussions in TermInfo over the past weeks-months. Applying the \"TermInfo methodology\" we identified thw following potential overlaps between the AllergyIntolerance attributes and any reasonably complex terminology (with a slight focus on SNOMED CT):</p>",
        "id": 153831180,
        "sender_full_name": "Daniel Karlsson",
        "timestamp": 1464850568
    },
    {
        "content": "<ul>\n<li>category (i.e. food | medication | environment | other ) has a potential overlap with substance and/or code. Of course, some terminologies like SNOMED CT reject \"other\"</li>\n<li>status - the status value set overlaps with the proposed substance/code value set, e.g. status = refuted (debatably) overlaps with substance = No know [Food|Drug|...] allergies (this we already discussed)</li>\n<li>type - a substance/code/whatever attribute value of No known allergies would imply that type = allergy.</li>\n</ul>",
        "id": 153831181,
        "sender_full_name": "Daniel Karlsson",
        "timestamp": 1464850824
    },
    {
        "content": "<p>in the design, we've always know that category is redundent if the substance/code comes from a good terminology. But evn when it does, some systems still categorise it.  hence the implementation note on it: \"This data can be derived from the Substance where coding systems are used, and is effectively redundant in that situation\"</p>",
        "id": 153831182,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464851016
    },
    {
        "content": "<p>(I keep pressing ENTER when I know I shouldn't)</p>\n<ul>\n<li>with the work Bruce Goldberg did on allergies/allergic reactions in SNOMED CT, there is know a (reasonably) clear distinction between SNOMED CT concepts, but there is no room for a \"reaction code\"</li>\n</ul>",
        "id": 153831183,
        "sender_full_name": "Daniel Karlsson",
        "timestamp": 1464851104
    },
    {
        "content": "<p>with regard to status: I think it does not make sense to say that a 'no known allergies to something is refuted - so we should document that explicitly in the definitions of both elements, and in the narrative (and one day we might figure out how to make that an enforceable invariant - but we can make it partially enforceable if we go with the scheme that Erich and I outlined the other day that Rob is going to draft)</p>",
        "id": 153831184,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464851127
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> it goes the other way around: if it's refuted the allergy cannot be known</p>",
        "id": 153831185,
        "sender_full_name": "Daniel Karlsson",
        "timestamp": 1464851180
    },
    {
        "content": "<p>it's true that with a good terminology, you might be able to infer type, but even then, I think the allergists would challenge whether the terminologies can be correct on that - the real world situation is more obtuse than the terminologies describe</p>",
        "id": 153831186,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464851182
    },
    {
        "content": "<p>and I don't agree. It makes perfect sense to say that the notion that the patient is allergic to contrast media as been refuted. That's a clear clinical case: when the patient refuses to accept  what is evident to the clinical team</p>",
        "id": 153831187,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464851233
    },
    {
        "content": "<p>my mother in law is a clear case ;-)</p>",
        "id": 153831188,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464851239
    },
    {
        "content": "<p>and I don't understand the meaning of the Goldberg note</p>",
        "id": 153831189,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464851276
    },
    {
        "content": "<p>Concerning the  \"Goldberg variations\" it is increasingly so that SNOMED CT distinguished between having an allergy and having an allergic reaction. That used to be an issue.</p>",
        "id": 153831190,
        "sender_full_name": "Daniel Karlsson",
        "timestamp": 1464851404
    },
    {
        "content": "<p>ah ok</p>",
        "id": 153831191,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464851420
    },
    {
        "content": "<p>Definition of refuted: \"A propensity for a reaction to the identified Substance has been disproven with a high level of clinical certainty, which may include testing or rechallenge, and is refuted.\"</p>",
        "id": 153831192,
        "sender_full_name": "Daniel Karlsson",
        "timestamp": 1464851445
    },
    {
        "content": "<p>That's not you mother in law, is it?</p>",
        "id": 153831193,
        "sender_full_name": "Daniel Karlsson",
        "timestamp": 1464851469
    },
    {
        "content": "<p>right. so you'd need to nominate a substance in that case</p>",
        "id": 153831194,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464851479
    },
    {
        "content": "<p>yep that's my mother in law. she claims she's allergic to something, and her team just smile and give it to her anyway</p>",
        "id": 153831195,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464851506
    },
    {
        "content": "<p>Is that even legal?</p>",
        "id": 153831196,
        "sender_full_name": "Daniel Karlsson",
        "timestamp": 1464851532
    },
    {
        "content": "<p>why would it not be? </p>",
        "id": 153831197,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464851608
    },
    {
        "content": "<p>All in all, in TermInfo we have discussed the possibility of doing some implementation guide/profile/both/whatever it takes/etc. which is more strict and would make any such distinctions between model and terminology (more) clear(er).</p>",
        "id": 153831198,
        "sender_full_name": "Daniel Karlsson",
        "timestamp": 1464851632
    },
    {
        "content": "<p>I guess I don't know your mother in law</p>",
        "id": 153831199,
        "sender_full_name": "Daniel Karlsson",
        "timestamp": 1464851658
    },
    {
        "content": "<p>and compulsory care (it that's the English term) is allowed only in select cases</p>",
        "id": 153831200,
        "sender_full_name": "Daniel Karlsson",
        "timestamp": 1464851738
    },
    {
        "content": "<p>if she just fronted at a hospital, made the claim, then you'd have to accept it at face value, and giving her the agent would be malpractice unless you had no choice. But when you have the same team year in year out and you won't accept that you're wrong, but the clinical notes are clear...</p>",
        "id": 153831201,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464851741
    },
    {
        "content": "<p>ok, I get the picture</p>",
        "id": 153831202,
        "sender_full_name": "Daniel Karlsson",
        "timestamp": 1464851776
    },
    {
        "content": "<p>anyway, that's where refuted comes to the party</p>",
        "id": 153831203,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464851792
    },
    {
        "content": "<p>Still, even in this case \"refuted\" implies (at a minimum) \"not known\"</p>",
        "id": 153831204,
        "sender_full_name": "Daniel Karlsson",
        "timestamp": 1464851879
    },
    {
        "content": "<p>does it? the intent is that int conveys \"known not\"</p>",
        "id": 153831205,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464851906
    },
    {
        "content": "<p>Unless you consider the patient as the bearer of this piece of knowledge</p>",
        "id": 153831206,
        "sender_full_name": "Daniel Karlsson",
        "timestamp": 1464851921
    },
    {
        "content": "<p>Just logic: if it's \"known not\" it cannot be \"known\"</p>",
        "id": 153831207,
        "sender_full_name": "Daniel Karlsson",
        "timestamp": 1464851972
    },
    {
        "content": "<p>ok fair enough</p>",
        "id": 153831208,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464852023
    },
    {
        "content": "<p>Anyhow, in order to avoid such discussion having a loose and a strict level might be a solution</p>",
        "id": 153831209,
        "sender_full_name": "Daniel Karlsson",
        "timestamp": 1464852032
    },
    {
        "content": "<p>E.g. having the loose level as <span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span>'s proposal and then add a TermInfo profile/IG/whatever (sorry, I'm struggling a bit with the terminology, I'm fairly new to FHIR) which constrains the existing (combination of) attributes</p>",
        "id": 153831210,
        "sender_full_name": "Daniel Karlsson",
        "timestamp": 1464852283
    },
    {
        "content": "<p>i dont think Grahame's mother-in-law is in the 80%...</p>",
        "id": 153831213,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464854936
    },
    {
        "content": "<p>very common for a doctor to give a medication that a nurse (or the intern) has described as an allergy </p>",
        "id": 153831214,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464855002
    },
    {
        "content": "<p>morphine is notorious for having patients (and doctors) misdiagnose allergy where none exists</p>",
        "id": 153831215,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464855050
    },
    {
        "content": "<p>I'm not sure that the way \"refuted\" statements is really optimal...</p>",
        "id": 153831216,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464855161
    },
    {
        "content": "<p>it seems to me that a \"refutation\" (?new word?) belongs as a type of <code>annotation</code> that maybe applied to any statement</p>",
        "id": 153831217,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464855229
    },
    {
        "content": "<p>have a statement (A) that B is allergic to C. D then says \"A is untrue because of E\"</p>",
        "id": 153831218,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464855298
    },
    {
        "content": "<p>it is then an interesting question about should \"the system\" then describe B as allergic to C?</p>",
        "id": 153831219,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464855337
    },
    {
        "content": "<p>when you have 2 parties making contradicting statements it is reasonable for a 3rd agent to make an adjudication.</p>",
        "id": 153831220,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464855388
    },
    {
        "content": "<p>but this transcends allergy lists and applies to both medication and problem lists (and possibly observations)</p>",
        "id": 153831221,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464855442
    },
    {
        "content": "<p>I glanced through the discussion paper on reconcilliation but I probably skimmed it to quickly to really digest its implications</p>",
        "id": 153831223,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464856611
    },
    {
        "content": "<p>but issue is that at the point of care what is needed is a \"best guess\" set of statements about allergies - ie the set of conclusions (in terms of a \"in conclusion the risk B is allergic C is X% (or 1 in Y)\"</p>",
        "id": 153831224,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464856753
    },
    {
        "content": "<p>the set of statements along the lines of \"GP says she's allergic\" \"admitting nurse says she's allergic\" \"intern refutes she's allergic\" at some point needs to be collapsed into a single line</p>",
        "id": 153831225,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464857043
    },
    {
        "content": "<p>and interesting the commonest way I refute an allergy (by giving the medication in question) isn't currently recordable in the reaction history...</p>",
        "id": 153831226,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464857158
    },
    {
        "content": "<p>because in the \"nurse says, GP says, intern says\" scenario it is a record of past administration that  commonly provides the evidence of no allergy...</p>",
        "id": 153831227,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464857233
    },
    {
        "content": "<p>i guess it could go in the medication record but is it possible to say \"i gave kefzol and nothing happened\"?</p>",
        "id": 153831228,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464857269
    },
    {
        "content": "<p>I guess the point of my ramble is that reconcilling different statements is complicated and I'm not sure how the \"refuted\" code value adds value to the reconcilliation process</p>",
        "id": 153831229,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464857355
    },
    {
        "content": "<p>typically the \"refutation\" (because not everyone is as brave/silly as anaesthetists) is that the nature of the reaction is documented: (\"penicillin -&gt; nausea\") </p>",
        "id": 153831230,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464857452
    },
    {
        "content": "<p>which mean \"patient not allergic to penicillin but has experienced a common benign side-effect\"...</p>",
        "id": 153831231,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464857504
    },
    {
        "content": "<p>... as opposed to \"penicillin -&gt; severe wheeze and welts\"</p>",
        "id": 153831232,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464857554
    },
    {
        "content": "<p>And I take <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>'s point that systems are not currently quantifying probability but if CDSS is going to add and parse clinical information then in the future quantifification of risk will be how that manifests... (or that is how it seems to me at least)</p>",
        "id": 153831233,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464858015
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192129\">@Daniel Karlsson</span> fyi a patient stating \"I am allergic to X\" is different to saying \"I dont want to receive X\" - patients generally trust their doctors and if they are told that despite a possible previous reaction to X that X is still a good choice for them then vast majority will accept that. </p>",
        "id": 153831235,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464861656
    },
    {
        "content": "<p>but its a conversation you'd want to have before giving X to someone</p>",
        "id": 153831236,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464861686
    },
    {
        "content": "<p>If they still say \"i dont want you to give me X\" and a doctor gives it anyway that is called \"assault\" (by Australian law at least)</p>",
        "id": 153831237,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464861759
    },
    {
        "content": "<p>sorry another ramble - hopefully something vaguely helpful in there</p>",
        "id": 153831238,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464863462
    },
    {
        "content": "<p>look what happens when you take a little time to sleep :)<br>\ngood discussion - any particular conclusions we think we can draw from it at this point?<br>\nI'll be trying to work on my proposal further today, prior to the PC FHIR call at 5:00 PM Eastern<br>\nparticular we need to decide what to conclude and what to adjust with the status codes and how they interact with code<br>\nand we had further discussion yesterday on the PC Allergy call about whether we should keep the cardinality of code (formerly substance) at 1..1 (rather than 0..1 as I have it now) and not add the excludedCode extension - essentially to avoid giving extra optionality and opportunity for confusion, if not absolutely needed</p>",
        "id": 153831272,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464871088
    },
    {
        "content": "<p>never sleep ;-)</p>",
        "id": 153831273,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464871170
    },
    {
        "content": "<p>never REST ;p</p>",
        "id": 153831274,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1464871255
    },
    {
        "content": "<p>are you saying it is on the cards to drop support for the \"not allergic to latex\" preconstructed codes? (that would make sense to me but I thought it was a non-starter because of history)</p>",
        "id": 153831275,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464871257
    },
    {
        "content": "<p>no, I wasn't saying that<br>\nI must not have written what I did say clearly enough - too early in the morning? :)<br>\nafter discussing that possibility with the IHTSDO Terminology Editor's group yesterday, I think there is support from that point of view, at least, to definitely keep those codes is - IHTSDO plans to continue to support and add them, for one thing</p>",
        "id": 153831282,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464871408
    },
    {
        "content": "<p>drat</p>",
        "id": 153831285,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464871594
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> You know I will +1 your suggestion :)  <br>\n\"keep the cardinality of code (formerly substance) at 1..1 (rather than 0..1 as I have it now) and not add the excludedCode extension\"<br>\nBy doing so, code will still allow positive assertions (when the code doesn't include any negation) as well as negative assertions (No Known Allergy - holistically, No Known Drug Allergy - by category, No Latex Allergy - by substance/code).  Since it isn't common practice to document all possible No &lt;substance&gt; Allergy, I think the value set is small enough that we can manage the pre-coordination for the few substances (like Latex) that will get recorded as No &lt;substance&gt; Allergy. </p>",
        "id": 153831291,
        "sender_full_name": "Michelle (Moseman) Miller",
        "timestamp": 1464872582
    },
    {
        "content": "<p>very unconvinced that allowing 20 semirandom \"no X allergy\" codes and requiring any other assertion of absent allergy to be said in another way is a great step forward for humanity</p>",
        "id": 153831292,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464872911
    },
    {
        "content": "<p><strong>every</strong> time I give something \"no allergy to X, check\" goes through my mind as it should every practitioner...</p>",
        "id": 153831293,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464872960
    },
    {
        "content": "<p>the IHTSDO thought was that the primary use for the \"allergy to x\" codes might be the problem list, rather than the allergy list (the item would need to be on the allergy list, too!) - that will probably open up another discussion front :)</p>",
        "id": 153831294,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464873184
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192001\">@Erich Schulz</span>  When PC discussed the prior proposal (to add an excludedCode extension), we questioned whether it would be a modifier extension.  As such, we discussed whether it was safe to NOT know that a patient was NOT allergic to X (i.e. whether it was safe for implementations to ignore the extension).  What do you think?  That influences my opinion about how problematic it might be to represent negation (that doesn't have a pre-coordinated code available) as freetext (AllergyIntolerance.code.text).  Additionally, do you think these negated assertions (no allergy to X) need to be computable?  How are they used in decision support systems?  Most decision support rules (e.g. drug/allergy or food/allergy interaction checking) I am aware of tend to look for the positive assertions.</p>",
        "id": 153831299,
        "sender_full_name": "Michelle (Moseman) Miller",
        "timestamp": 1464875351
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192001\">@Erich Schulz</span> - I totally agree with \"every time I give something 'no allergy to X, check' goes through my mind as it should every practitioner\"<br>\nso, where and how do you document that? and does it need to be computable, and, if so, how?<br>\nI think it goes in an encounter note of some type, where I record that I did ask the patient<br>\nbut it doesn't go on the allergy list, and isn't involved in clinical decision support around prescribing or other substances to avoid (e.g., food, latex, etc.)<br>\nif so, the bottom line of that might be that for the AllergyIntolerance resource itself what we need to be able to document  regarding \"no X allergy\" can be done with the existing codes (and possibly a few additional ones that we may want to add in the future)?</p>",
        "id": 153831301,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464876142
    },
    {
        "content": "<p>or we can also always use text, if there isn't an appropriate code (yet)</p>",
        "id": 153831302,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464876211
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> sometimes a postive statement of absent allergy makes the difference between giving a first-choice and second choice drug - this is most common when there is a higher risk - eg cross-reactivity with a known allergen (penicillin &lt;-&gt; cephalosporins), or a high baseline risk of intolerance (eg tramadol). And there is always a reason a secondline agent is second line (expense, efficacy, side-effects) - so a decision support system that understands negative allergy statements will make better choices and be able to choose first-line agents more often. </p>",
        "id": 153831347,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464910099
    },
    {
        "content": "<p>As I indicated above - the thing I'm struggling with is that the required information is actually repsresentable very simply.</p>",
        "id": 153831348,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464910144
    },
    {
        "content": "<p>All the information can be represented by a pair of codes - one for \"allergy status\" and another that points into some point of a substance classification.</p>",
        "id": 153831349,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464910212
    },
    {
        "content": "<p>that's what Rob's going to draft...</p>",
        "id": 153831351,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464910234
    },
    {
        "content": "<p>oh I must have misunderstood his statement about the role of role of the composite \"no known allergy\" codes</p>",
        "id": 153831352,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464910349
    },
    {
        "content": "<p>the reason I think these are evil is they utterly fail to scale up to representent subtle but important differences in the known status of an allergy</p>",
        "id": 153831353,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464910406
    },
    {
        "content": "<p>eg the \"not known to be allergic to\", \"previously exposed without reaction\", \"not previously exposed to\" subtleties</p>",
        "id": 153831354,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464910458
    },
    {
        "content": "<p>well, What Rob is drafting - if I've kept up corrrectly - is to keep the existing loose substance, but rename it to code, and making it looser, and retaining the use of those codes in that loose field. And adding a more tightly controlled pair of codes for systems to populate, where these pairs have tightly controlled meaning, and are computable. Systems that know how can populate them. Those that don't, won't</p>",
        "id": 153831355,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464910475
    },
    {
        "content": "<p>There are a lot of factors here.  <span class=\"user-mention\" data-user-id=\"192001\">@Erich Schulz</span> it would have been good to have you join us on the Patient Care FHIR call that ended about an hour ago - we spent an hour and a half talking further about this and what we are proposing to put into the build - including the issues of interaction with status and the notion of alignment with openEHR.</p>\n<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> that was the plan.  There's been some further pushback on the \"adding a more tightly controlled pair of codes\" part, though.  Erich's rationale is good, especially in theory and as an aspiration - I don't think I've ever seen anyone come remotely close to implementing it, though (so far).  I'm working on it more tonight.</p>",
        "id": 153831356,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464910776
    },
    {
        "content": "<p>let me guess. <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>  pushed back? I'd like to add it so people can see what it looks like anyway - and so we can ascertain: is there resistance to the idea because there's a better way to make it computable, or because there's no agreement that systems would do that?</p>",
        "id": 153831357,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464910905
    },
    {
        "content": "<p>in terms of \"not coming close to implementing it\" <span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> - that is interesting - I'm really curious as to why - it is an extraordinary simple model - and far more tractable than there various hybrid options. </p>",
        "id": 153831358,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464911311
    },
    {
        "content": "<p>Erich, have you seen this? </p>",
        "id": 153831359,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464911335
    },
    {
        "content": "<p>are there options for indicating deprecation of fields included for historical reasons?</p>",
        "id": 153831360,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464911364
    },
    {
        "content": "<p><a href=\"http://www.healthintersections.com.au/?p=2267\" target=\"_blank\" title=\"http://www.healthintersections.com.au/?p=2267\">http://www.healthintersections.com.au/?p=2267</a></p>",
        "id": 153831361,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464911372
    },
    {
        "content": "<p>if you look through these, you'll see the gap Rob is referring to. You're welcome to contribue counter examples. I had more examples than that but I couldn't publish them - but they were all consistent with those</p>",
        "id": 153831362,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464911438
    },
    {
        "content": "<p>sorry <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> - i'm not getting what the gap is</p>",
        "id": 153831366,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464913424
    },
    {
        "content": "<p>had to step out for a bit</p>",
        "id": 153831367,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464913465
    },
    {
        "content": "<p>for all of those programs, populating the pair of codes would depend on the terminology they use having the knowledge, and them having access to it. Most allow text or local codes, or use some random code list with no knowledge, and those that do use a tx with the knowledge, usually don't have any access to it's knowledge. I'm working a new operation for the terminology service that will surface the knowledge. Perhaps this would be a useful test case, <span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> </p>",
        "id": 153831368,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464913618
    },
    {
        "content": "<p>sure I understand the need to cope with legacy noise</p>",
        "id": 153831369,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464913721
    },
    {
        "content": "<p>and the FHIR resouce seems 99% of the way there to addressing most issues</p>",
        "id": 153831370,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464913760
    },
    {
        "content": "<p>the issue is when defining as sharable structure how much noise does one allow and encourage moving forward</p>",
        "id": 153831371,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464913792
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> a new one beyond $subsumes and $infer?</p>",
        "id": 153831372,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464913884
    },
    {
        "content": "<p>no that would be $infer, I think </p>",
        "id": 153831373,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464913896
    },
    {
        "content": "<p>that's what I thought you might have meant</p>",
        "id": 153831374,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464913911
    },
    {
        "content": "<p>I'm not sure how exactly that's going to go, with the discussions you've had with Davide (and others) as an example<br>\nI'm gathering that it will (at least initially) be \"simple decomposition\", rather than any attempt at leveraging DL reasoning (etc.)</p>",
        "id": 153831375,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464914247
    },
    {
        "content": "<p>I haven't got back to those discussions yet</p>",
        "id": 153831376,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1464914306
    },
    {
        "content": "<p>sure - there's plenty to do :)</p>",
        "id": 153831377,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464914456
    },
    {
        "content": "<p>are you guys on the right thread?</p>",
        "id": 153831385,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464915788
    },
    {
        "content": "<p>or is this terminology services as applied to hierarchical substance reasoning?</p>",
        "id": 153831386,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464915808
    },
    {
        "content": "<p>The other thing worth noting <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> is that using a one of ~20 precordinated \"no allergy to X\" codes is that this does not remove the need for hierarchical reasoning. Any automated processing <strong>will</strong> require hierarchical reasoning - the only difference is the with the precordinated codes this is a 2 step process but but with a pair of codes there is always a single direct link into a susbstance classification within the terminology</p>",
        "id": 153831387,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464916119
    },
    {
        "content": "<p>actually it isn't Lloyd that has pushed back, <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> - he's actually been pretty quiet for the most part on all of this :)</p>",
        "id": 153831407,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464920101
    },
    {
        "content": "<p>I wasn't even on the call :)  Too snowed under with other things.  Hope to surface next week.  But I have no issues with Rob's proposal.</p>",
        "id": 153831408,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1464920288
    },
    {
        "content": "<p>well, hopefully that's still the case when I get it done :) - I'm trying to take into account all of the various discussions and opinions - not a particularly easy task</p>",
        "id": 153831409,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1464920558
    },
    {
        "content": "<p>We're grateful for your services :)</p>",
        "id": 153831410,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1464920816
    },
    {
        "content": "<p>go <span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> !!</p>",
        "id": 153831413,
        "sender_full_name": "Erich Schulz",
        "timestamp": 1464939214
    },
    {
        "content": "<p>hi, Yong</p>",
        "id": 153832013,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1465391578
    }
]