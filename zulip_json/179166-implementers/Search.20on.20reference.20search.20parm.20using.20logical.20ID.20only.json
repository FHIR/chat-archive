[
    {
        "content": "<p>Question on reference searches using only logical ID, relating to this passage in the spec at <a href=\"https://www.hl7.org/fhir/search.html#reference\">https://www.hl7.org/fhir/search.html#reference</a>:</p>\n<p>\"Some references may point to more than one type of resource; e.g. subject: Reference(Patient|Group|Device|..). In these cases, multiple resources may have the same logical identifier. Servers SHOULD reject a search where the logical id refers to more than one matching resource across different types. In order to allow the client to perform a search in these situations the type is specified explicitly...\"</p>\n<p>Given a search query of 'Observation?subject=123', should the request:<br>\n   a) be rejected before even attempting the search, given that subject has multiple target types<br>\n   b) be executed, and an error returned only if Observations are returned containing references to multiple resource types (i.e. 'Patient/123', 'Group/123', etc)<br>\n   c) be executed and Observation results returned successfully regardless of resource type matched on</p>",
        "id": 225623547,
        "sender_full_name": "Mike Schroeder",
        "timestamp": 1612825934
    },
    {
        "content": "<p>Our server does (a)</p>",
        "id": 225623823,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1612826133
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"312298\">@Mike Schroeder</span> and I spent a long time yesterday trying to understand what that particular text was saying (and more importantly why).  Any other thoughts/interpretations on this one?</p>",
        "id": 225731353,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1612893880
    },
    {
        "content": "<p>My interpretation was b) but I didn't feel that it was clear. I think our implementation still does c) and we haven't fixed it yet.</p>\n<p>As a meta point I don't see the value of allowing this search syntax (subject=123) at all. It implies that there are resources of different types with the same ID (probably not the best practice), the client somehow only knows the ID of what they're looking for, and the client can't be bothered to write subject=Patient/123,Group/123. This seems like it would be better served with an identifier reference and searching subject:identifier=123.</p>",
        "id": 225733511,
        "sender_full_name": "Paul Church",
        "timestamp": 1612894822
    },
    {
        "content": "<p>thanks Paul, i think I share that sentiment.  our implementation also does (c) currently and we were debating whether to make it do (a) or (b) instead.  (a) seems the simplest for servers to implement, but to us the language used there seems to imply (b) was what the spec authors had in mind.  but since those spec authors are on this channel, I suggested we ask here to find out...</p>",
        "id": 225745265,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1612899554
    }
]