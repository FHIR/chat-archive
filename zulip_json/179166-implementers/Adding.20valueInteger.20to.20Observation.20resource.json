[
    {
        "content": "<p>I am trying to add a new type to the Observation.value[x] and am faced with the following error when I try to build:<br>\n illegal constrained type integer from Quantity, CodeableConcept, string, Range, Ratio, SampledData, Attachment, time, dateTime, Period</p>\n<p>I don't understand what constraint is being broken? Is it a constraint placed on value[x]? How can identify the constraint? It is especially confusing for me, because value[x] for extensions can have integers as a type.</p>\n<p>Thanks for any help that you can provide.</p>",
        "id": 153864790,
        "sender_full_name": "Sadiq Saleh",
        "timestamp": 1482424871
    },
    {
        "content": "<p>What type are you trying to add?</p>",
        "id": 153864791,
        "sender_full_name": "Richard Kavanagh",
        "timestamp": 1482426084
    },
    {
        "content": "<p>valueInteger is not a choice for Value[x].  you can a) use ValueQuantity or b) create an extension.   What is your use case?</p>",
        "id": 153864792,
        "sender_full_name": "Eric Haas",
        "timestamp": 1482435611
    },
    {
        "content": "<p>I am trying to add a count type value, but find that the the current extension (using valueQuantity with unit=1) may be a bit confusing for our end users. I will try to create an extension. </p>\n<p>Just for my understanding, why is valueInteger not a choice for value[x]?</p>",
        "id": 153864794,
        "sender_full_name": "Sadiq Saleh",
        "timestamp": 1482436796
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191362\">@Richard Kavanagh</span>  I am trying to add type Integer to value. I just tried this with an extension under value but this has the same error. Are the types that value[x] support fixed, and if not, how do I add to the types?</p>",
        "id": 153864797,
        "sender_full_name": "Sadiq Saleh",
        "timestamp": 1482437336
    },
    {
        "content": "<p>yes the types that are allowed in Observation.value[x] are fixed in the definition of the Observation resource, to Quantity|CodeableConcept|string|Range|Ratio|SampledData|Attachment|time|dateTime|Period</p>",
        "id": 153864800,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1482437685
    },
    {
        "content": "<p>They are restricted to this because each type that is added is new work for everyone who deals with Observation</p>",
        "id": 153864801,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1482437737
    },
    {
        "content": "<p>what do you think is confusing?</p>",
        "id": 153864802,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1482437760
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> Thanks for the clarification. I hadn't understood that the definition of value[x] was fixed and could not be extended.</p>\n<p>So I would have to create an extension at the main level of Observation if I want to add a count attribute?</p>",
        "id": 153864805,
        "sender_full_name": "Sadiq Saleh",
        "timestamp": 1482437847
    },
    {
        "content": "<p>you mean, if the Observation value is a count? </p>",
        "id": 153864807,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1482437921
    },
    {
        "content": "<p>Yes, sorry that is what I meant</p>",
        "id": 153864808,
        "sender_full_name": "Sadiq Saleh",
        "timestamp": 1482437947
    },
    {
        "content": "<p>then you should use quantity in Observation.value, not an extension</p>",
        "id": 153864810,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1482438164
    },
    {
        "content": "<p>I should clarify, as I did not earlier. I am trying to create a profile to extend Observation, so there should not be additional work for people not using my profile.</p>\n<p>As far as I understood, using quantity requires both a value and a unit, which does not apply to counts which do not have units.</p>",
        "id": 153864813,
        "sender_full_name": "Sadiq Saleh",
        "timestamp": 1482438387
    },
    {
        "content": "<p>unit is not required, but the UCUM unit for count = 1</p>",
        "id": 153864815,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1482438500
    },
    {
        "content": "<p>so counts do have a unit</p>",
        "id": 153864816,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1482438515
    },
    {
        "content": "<p>and if you do it any other way than that, there'll be additional work for anyone not using your profile</p>",
        "id": 153864817,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1482438553
    },
    {
        "content": "<p>I prefer using the UCUM pseudounits '{count}' since this allows for better display.   What we mean by an extension here is you could create  valueInteger extension on observation, but that is lot of work when valueQuantity will do.  And if you look <a href=\"http://build.fhir.org/observation-definitions.html#Observation.value_x_\" target=\"_blank\" title=\"http://build.fhir.org/observation-definitions.html#Observation.value_x_\">here</a> you will see the allowed types for value[x] and a link to a general discussion on the '[x]' elements.  I would recommend reviewing that a bit.</p>",
        "id": 153864821,
        "sender_full_name": "Eric Haas",
        "timestamp": 1482438836
    },
    {
        "content": "<p>Thanks for your input <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> and <span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> <br>\nI had reviewed the link you attached Eric, but I had not understood that the types were fixed and that I could not add additional types.</p>",
        "id": 153864825,
        "sender_full_name": "Sadiq Saleh",
        "timestamp": 1482439005
    },
    {
        "content": "<p>[x] types are enumerated in the definition.  if they say '*' then any type is fair game.  :-)</p>",
        "id": 153864827,
        "sender_full_name": "Eric Haas",
        "timestamp": 1482439148
    },
    {
        "content": "<p>Thanks for taking the time to respond to my post.</p>",
        "id": 153864828,
        "sender_full_name": "Sadiq Saleh",
        "timestamp": 1482439602
    }
]