[
    {
        "content": "<p>first timer, I am new to HAPI/FHIR and to this forum. hope some one will be kind to answer a simple How-To question:<br>\nI am trying to generate the following Java Rest response:</p>\n<blockquote>\n<p><a href=\"http://hapi.fhir.org/baseDstu3/MAMA?given=Ruth&amp;_pretty=true\" target=\"_blank\" title=\"http://hapi.fhir.org/baseDstu3/MAMA?given=Ruth&amp;_pretty=true\">http://hapi.fhir.org/baseDstu3/MAMA?given=Ruth&amp;_pretty=true</a></p>\n</blockquote>\n<div class=\"codehilite\"><pre><span></span>***Unknown resource type MAMA\n        {\n          &quot;resourceType&quot;: &quot;OperationOutcome&quot;,\n          &quot;text&quot;: {\n            &quot;status&quot;: &quot;generated&quot;,\n            &quot;div&quot;: &quot;&lt;div xmlns=\\&quot;http://www.w3.org/1999/xhtml\\&quot;&gt;&lt;h1&gt;Operation Outcome&lt;/h1&gt;&lt;table border=\\&quot;0\\&quot;&gt;&lt;tr&gt;&lt;td style=\\&quot;font-weight: bold;\\&quot;&gt;ERROR&lt;/td&gt;&lt;td&gt;[]&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Unknown resource type &#39;MAMA&#39; - Server knows how to handle: [Appointment, Account,...]&lt;/pre&gt;&lt;/td&gt;\\n\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\n\\t\\t\\t&lt;/tr&gt;\\n\\t\\t&lt;/table&gt;\\n\\t&lt;/div&gt;&quot;\n          },\n          &quot;issue&quot;: [\n            {\n              &quot;severity&quot;: &quot;error&quot;,\n              &quot;code&quot;: &quot;processing&quot;,\n              &quot;diagnostics&quot;: &quot;Unknown resource type &#39;MAMA&#39; - Server knows how to handle: [Appointment, Account, ...&quot;\n            }\n          ]\n        }\n</pre></div>\n\n\n<p>*** I was unable to generate 'OperationOutcome.issue.code'.</p>\n<p>the following is the sample code I used:<br>\nOperationOutcome outcome = new OperationOutcome();</p>\n<div class=\"codehilite\"><pre><span></span>        outcome.getText().setStatusAsString(&quot;generated&quot;);\n        outcome.getText().setDivAsString(&quot;&lt;div&gt;Unknown resource type &#39;MAMA&#39; - Server knows how to handle: [Appointment, Account,...]&lt;/div&gt;&quot;);\n\n        outcome.addIssue()\n                .setSeverity(OperationOutcome.IssueSeverity.ERROR)\n                .setDiagnostics(&quot;Unknown resource type &#39;MAMA&#39; - Server knows how to handle: [Appointment, Account, ...]&quot;);\n\n        FhirContext ctx = config.getCtx();          \n        String outFhirString = &quot;&quot;; \n        outFhirString = ctx.newJsonParser().setPrettyPrint(true).encodeResourceToString(outcome);   \n        return outFhirString;\n</pre></div>\n\n\n<p>I couldn't find a way to do the following 'outcome.addIssue().setCode(\"xyz..\");'</p>\n<p>this may be a basic question but I couldn't find a way to implement it. any help would be appreciated.<br>\nthanx<br>\nZak <a href=\"mailto:zguler@utah.gov\" title=\"mailto:zguler@utah.gov\">zguler@utah.gov</a></p>",
        "id": 153988520,
        "sender_full_name": "Zak Guler",
        "timestamp": 1534534943
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> ?</p>",
        "id": 153988531,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1534535313
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 153988532,
        "sender_full_name": "Zak Guler",
        "timestamp": 1534535334
    },
    {
        "content": "<p>you are better to use the enumeration</p>",
        "id": 153988545,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1534537562
    },
    {
        "content": "<p>.addIssue().setCode(<a href=\"http://IssueType.xxx\" target=\"_blank\" title=\"http://IssueType.xxx\">IssueType.xxx</a>)</p>",
        "id": 153988546,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1534537576
    },
    {
        "content": "<p>if you really want to use a string: <br>\n.addIssue().getCodeAsElement().setValueAsString(\"....\")- but you still must use one of the valid enumeration strings</p>",
        "id": 153988548,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1534537664
    },
    {
        "content": "<p>but, there is no .addIssue().addCode() in the api that I am using. that is why I was unable to set the code. I wonder if I need to use different jars?</p>\n<p>the jar files I am using is for STU3:<br>\n        &lt;dependency&gt;<br>\n            &lt;groupId&gt;ca.uhn.hapi.fhir&lt;/groupId&gt;<br>\n            &lt;artifactId&gt;hapi-fhir-base&lt;/artifactId&gt;<br>\n            &lt;version&gt;3.3.0&lt;/version&gt;<br>\n        &lt;/dependency&gt;<br>\n        &lt;!-- <a href=\"https://mvnrepository.com/artifact/ca.uhn.hapi.fhir/hapi-fhir-structures-dstu3\" target=\"_blank\" title=\"https://mvnrepository.com/artifact/ca.uhn.hapi.fhir/hapi-fhir-structures-dstu3\">https://mvnrepository.com/artifact/ca.uhn.hapi.fhir/hapi-fhir-structures-dstu3</a> --&gt;<br>\n        &lt;dependency&gt;<br>\n            &lt;groupId&gt;ca.uhn.hapi.fhir&lt;/groupId&gt;<br>\n            &lt;artifactId&gt;hapi-fhir-structures-dstu3&lt;/artifactId&gt;<br>\n            &lt;version&gt;3.3.0&lt;/version&gt;<br>\n        &lt;/dependency&gt;<br>\n        &lt;!-- <a href=\"https://mvnrepository.com/artifact/ca.uhn.hapi.fhir/hapi-fhir-client\" target=\"_blank\" title=\"https://mvnrepository.com/artifact/ca.uhn.hapi.fhir/hapi-fhir-client\">https://mvnrepository.com/artifact/ca.uhn.hapi.fhir/hapi-fhir-client</a> --&gt;<br>\n        &lt;dependency&gt;<br>\n            &lt;groupId&gt;ca.uhn.hapi.fhir&lt;/groupId&gt;<br>\n            &lt;artifactId&gt;hapi-fhir-client&lt;/artifactId&gt;<br>\n            &lt;version&gt;3.3.0&lt;/version&gt;<br>\n        &lt;/dependency&gt;</p>",
        "id": 153989562,
        "sender_full_name": "Zak Guler",
        "timestamp": 1534779141
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span></p>",
        "id": 153989563,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1534780426
    },
    {
        "content": "<p>Up until HAPI FHIR 3.4.0, the response error for trying to access an unknown resource was pretty much hardcoded into HAPI.</p>\n<p>By coincidence, this just changed a few weeks ago. If you are ok with using the current pre-release version (3.5.0-SNAPSHOT) you can override <code>throwUnknownResourceTypeException(String)</code> on RestfulServer. In your method, you throw ResourceNotFoundException, and you can pass in an OperationOutcome if you want.</p>",
        "id": 153989585,
        "sender_full_name": "James Agnew",
        "timestamp": 1534787922
    },
    {
        "content": "<p>in my case, I am not using a RestfulServer. I am getting the Patient data from our server and use \"ctx = FhirContext.forDstu3()\" to build a client response. the challenge now is the api I am using OperationOutcome does not have a method called .addCode() in it. so how can I add the Code to the Issue element like:<br>\noperationOutcome .addIssue().addCode(<a href=\"http://IssueType.xxx\" target=\"_blank\" title=\"http://IssueType.xxx\">IssueType.xxx</a>); ???<br>\nAm I using the wrong jar file? or am I using the wrong version 3.0.0??? this is the kind of help that I need. where can I find method \"addIssue().addCode()\"???<br>\nthank you for your help.</p>",
        "id": 153989600,
        "sender_full_name": "Zak Guler",
        "timestamp": 1534790052
    },
    {
        "content": "<p>Or getIssue().SetCode()!!!</p>",
        "id": 153989601,
        "sender_full_name": "Zak Guler",
        "timestamp": 1534790137
    },
    {
        "content": "<p>ooh, so Sorry, silly me.<br>\n I was looking for addCode() and when I looked more closely to Grahame Grieve's response it was setCode() and not addCode() like the others.</p>",
        "id": 153989618,
        "sender_full_name": "Zak Guler",
        "timestamp": 1534795433
    },
    {
        "content": "<p>Yup, it's <code>setCode</code>. If you're curious, the reason for that is that we use <code>addFoo</code> for repeating things, but not for 1..1 things.</p>",
        "id": 153989667,
        "sender_full_name": "James Agnew",
        "timestamp": 1534800894
    },
    {
        "content": "<p>thank you for clarifying some things for me. I am new to FHIR and I am trying to learn it as soon as I can. so much to explore but it is getting easier as I go.</p>",
        "id": 153989679,
        "sender_full_name": "Zak Guler",
        "timestamp": 1534803520
    }
]