[
    {
        "content": "<p>Hello!<br>\nI am quite new with FHIR and I need to complete the task to transfer the user data of a mobile app to the hl7 fhir format and create an export in the fhir format.</p>\n<p>As far as I've dived into the topic, the way to go will be to first check for existing profiles, datatypes and extensions. The most suitable way is to use the patient profile, add the patient's data to the profile, generate the format accordingly either in XML or JSON and use this for an interoperable export.<br>\nNevertheless, I have checked the existing extensions, which do not suit my data. Therefore I need to write my own extension. I have a few questions here:</p>\n<ul>\n<li>Can I specify my own DataTypes? The data I want to transfer is more complex than a single value and does not match the existing datatypes.</li>\n<li>Is there any suitable tooling or libraries in any programming languages (preferrably javascript or golang) to help me transfer my data to the fhir format and generate export files?</li>\n<li>Have I understood correctly that extensions need to be created either in XML or JSON and publicated as either the XML/JSON file on a website?</li>\n</ul>\n<p>I would appreciate any help.</p>",
        "id": 212811415,
        "sender_full_name": "Sandra Mattes",
        "timestamp": 1602242210
    },
    {
        "content": "<p>It's quite likely you'll need to use resources other than Patient.  Patient only covers a limited set of demographic information.  Insurance information would go in Coverage, past pregnancy information would go in Observation, etc.  The next step after reviewing all of the potentially relevant resources and extensions is to raise detailed questions here explaining the meaning and purpose of your remaining elements to see if there are 'standard' ways to represent them that you might have missed or whether you truly need to create your own extensions.</p>\n<p>You cannot define your own data types, however, if necessary, you can define complex extensions.</p>\n<p>There is a Javascript reference implementation that will handle the serialization - look on the <a href=\"http://hl7.org/fhir/downloads.html\">http://hl7.org/fhir/downloads.html</a> page</p>\n<p>If you are going to share data that contains an extension, the definition of the extension needs to be available to all of your recipients.  The simplest way to do that is to place the StructureDefinition that defines the extension into a public registry.  Note that there are tools like Forge and Trifolia that can help you with this process.</p>",
        "id": 212817547,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1602246201
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> Thanks a lot for your explanation! I will certainly research more of the ressources (I've already checked some), nevertheless I think it is quite unlikely that I will find exactly the structures that I will need to implement. Among this data is activity data, diary entries in form of questions and answer, a patient's (achieved) therapeutic objectives, and therapy/medical appointments of the patient. For some of my health data, I've already found existing extensions to use.</p>\n<p>I have looked into complex extensions, (e.g. the complex example of <a href=\"https://www.hl7.org/fhir/extensibility-examples.html\">https://www.hl7.org/fhir/extensibility-examples.html</a>) but if I've got that right, those can still only be build of (url, value) pairs in a tree-like structure and not contain multiple values like two strings and a date? Feels kinda complicated to build this way. As far as I've understood I use the \"slicing\" keyword\" for adding multiple different extensions to a parent-extension, therefore write an extension \"Parent\" which contains a slicing with \"Child1\", \"Child2\", \"Child3\". Child 1 is for example a date-value, Child 2 and Child 3 have a string-value. If I now set the Cardinality of Parent to 0..*, the context Ressource can have as many instances of my parent as it gets (like my Parent is actually an appointment and I can add the 20 appointments that the patient has entered). Is this right?</p>\n<p>I have already looked into the downloads page (examples, libraries). Is there any ressource you would recommend to understand the structure that I need to set up? I do not need to work with the fhir in any way except to parse my data into the format and publish my extensions. I do not quite get if I need to set up a fhir-server for that. I've looked into the fhir documentation and some youtube tutorials, but haven't actually got my answers.</p>\n<p>I am sorry for the probably stupid questions <span aria-label=\"sweat\" class=\"emoji emoji-1f613\" role=\"img\" title=\"sweat\">:sweat:</span> </p>\n<p>Would you say Forge for usage in a commercial environment, but small startup, is worth the money?</p>",
        "id": 213008831,
        "sender_full_name": "Sandra Mattes",
        "timestamp": 1602490169
    },
    {
        "content": "<p>Activity data could be Procedure, Observation or QuestionnaireResponse.  DIary entries would be QuestionnaireResponse.  objectives would be Goal.  Appointments would be Appointment.  Every one of these things will be separate resource instances.  If the patient has 20 appointments, that means 20 separate instances of the Appointment resource.  If you need to convey all of this information together, you should look at the possibility of using a 'transaction' Bundle</p>",
        "id": 213033740,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1602507201
    },
    {
        "content": "<p>Oh so this means I do not assign such ressources to a patient/user but instead treat the data as own ressources. Thanks for the insights! I will take a look at the transaction bundle as I need to convey it as one data package. </p>\n<p>Is there also already a ressource to transfer the Big Five personality traits? (<a href=\"https://en.wikipedia.org/wiki/Big_Five_personality_traits\">https://en.wikipedia.org/wiki/Big_Five_personality_traits</a>) Otherwise I think I would also treat this as an Observation Ressource.</p>\n<p>Also the Goal would need a milestone (string). This would be a simple one-value extension for the Goal ressource.</p>\n<p>I feel like I begin to understand how to use this. <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 213035861,
        "sender_full_name": "Sandra Mattes",
        "timestamp": 1602508390
    },
    {
        "content": "<p>Each of the resources would link to the Patient via the 'subject' element.  The big 5 would either be a single Observation or a collection of Observations, depending on whether the individual traits might reasonably be captured, shared or used independently.  Milestone might be appropriate as an extension on Goal, but I'd suggest posting details about its definition and purpose here and seeing what the community thinks about it.  They may recommend another solution or suggest submitting a change request to define a standard element or extension.</p>",
        "id": 213037450,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1602509125
    },
    {
        "content": "<p>Ok so the way to go is to create a Patient ressource, which is the subject to all my other Ressources (Account, Observations, Appointments, Goals...), which is delivered in a bundle.</p>\n<p>The individual traits cannot be used independantly, as they define the personality of a person only in combination. Therefore logically it would be a single Observation.</p>\n<p>Would you recommend another way to save the milestone (e.g. add it to the note, as it is actually only a string without further data like a due-date)? We are under a lot of time pressure right now to implement this feature and therefore a longer feedback loop to establish extensions with the community will probably be difficult. I did not know that extensions need to be added centrally, instead I thought you just define them, post them to your website and link the extension url in the data to the definition.</p>",
        "id": 213039094,
        "sender_full_name": "Sandra Mattes",
        "timestamp": 1602509916
    },
    {
        "content": "<p>You can define anything you want locally, especially if you're in a hurry. It's kind of a best practice to see what others have done, or to harmonize your efforts with those of others, but it's not a requirement.</p>",
        "id": 213039733,
        "sender_full_name": "René Spronk",
        "timestamp": 1602510219
    },
    {
        "content": "<p>.. as long as you publish the definition of your extension, that is.</p>",
        "id": 213039772,
        "sender_full_name": "René Spronk",
        "timestamp": 1602510241
    },
    {
        "content": "<p>Ok thanks :) If I want to post my efforts to the community for a discussion, would I rather post it in <a href=\"http://community.fhir.org/\">http://community.fhir.org/</a> or here?</p>",
        "id": 213040340,
        "sender_full_name": "Sandra Mattes",
        "timestamp": 1602510524
    },
    {
        "content": "<p>That's up to you, this chat forum tends to attract most of the community though. I must admit to never reading the <a href=\"http://community.fhir.org\">community.fhir.org</a> forum, questions on that forum are however monitored by some FHIR community members.</p>",
        "id": 213041442,
        "sender_full_name": "René Spronk",
        "timestamp": 1602511048
    },
    {
        "content": "<p>If you're using FHIR, presumably your objective is interoperability.  That means expressing information consistently with how other systems do so.</p>\n<p>To provide guidance on how to represent 'milestone', we'd need a better notion of what it is and what it's for.  Just knowing the name of the element isn't necessarily sufficient to know what it is :)</p>",
        "id": 213042699,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1602511621
    },
    {
        "content": "<p>Yes, this is our goal :) The challenge is to maximize the possible interoperability and keep our deadlines <span aria-label=\"wink\" class=\"emoji emoji-1f609\" role=\"img\" title=\"wink\">:wink:</span></p>\n<p>For further information: If you have a goal, you can set yourself a milestone. The milestone is a step on the way to the goal. Currently we have just the option of adding one milestone, which is only represented by its description. I need to discuss internally tomorrow if this is going to be further enhanced in the future (e.g. with a due date for the milestone or the possibility to add multiple milestones, and to save if the milestone was actually achieved). I guess this should be kept in mind when defining a possible format for the milestone.</p>",
        "id": 213044099,
        "sender_full_name": "Sandra Mattes",
        "timestamp": 1602512334
    },
    {
        "content": "<p>It sounds like a milestone is a sub-goal that leads to an overall goal?  E.g. if my overall goal is to get to a healthy weight, I might have a sub-goal of losing 10 lbs over the next 2 months?</p>",
        "id": 213046887,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1602513634
    },
    {
        "content": "<p>Yes, that's also a way to view it. Could I implement a sub-goal by choosing the main goal as its subject?</p>\n<p>Edit: nope just looked up the documentation, subject can only be Patient, Group or Organization)</p>",
        "id": 213047093,
        "sender_full_name": "Sandra Mattes",
        "timestamp": 1602513725
    },
    {
        "content": "<p>But it could probably be linked by the \"addresses\" field, as a sub goal adresses the main goal... edit: but goals still cannot be used there... thought i'd read that, my concentration is decreasing <span aria-label=\"sweat\" class=\"emoji emoji-1f613\" role=\"img\" title=\"sweat\">:sweat:</span></p>",
        "id": 213047535,
        "sender_full_name": "Sandra Mattes",
        "timestamp": 1602513953
    },
    {
        "content": "<p>There's a standard extension for <a href=\"http://build.fhir.org/extension-goal-relationship.html\">relationships between goals</a>, though it looks like we haven't defined a recommended value set for relationship types.  My recommendation would be to use that and also submit a change request to define a few standard codes.  (In the meantime, your project can proceed with a local code.)</p>",
        "id": 213048706,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1602514526
    },
    {
        "content": "<p>Ah great that looks suitable. Thanks a lot! I will post a change request for the types in a few days :)</p>",
        "id": 213049657,
        "sender_full_name": "Sandra Mattes",
        "timestamp": 1602514934
    },
    {
        "content": "<p>Thanks for taking the important first step and asking your questions here :)</p>",
        "id": 213049802,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1602515012
    },
    {
        "content": "<p>One more question... for finding the mandatory code for an Observation in the Loinc codes, is there another way except for downloading their .csv with 90k codes and searching for one that might fit my health data or activity data? And are the Loinc codes the only valid value set?</p>",
        "id": 213141967,
        "sender_full_name": "Sandra Mattes",
        "timestamp": 1602589525
    },
    {
        "content": "<p>You can Google LOINC codes</p>",
        "id": 213147708,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1602592978
    },
    {
        "content": "<p>LOINC is not the only possible code system, but in the U.S. (and many other places) it's the preferred code system for observation types because it's free, pretty comprehensive and well maintained.</p>",
        "id": 213156618,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1602597067
    },
    {
        "content": "<p>Ah thanks for the insight. I've finally found matching codes and ressources for all of my data except for the big five personality traits :) There is actually a Loinc Code for the big five (<a href=\"https://loinc.org/LP241982-0/\">https://loinc.org/LP241982-0/</a>), but only for the languages Chinese and italian? I am not quite sure if this is valid to use... also, there is no code for any of the five traits as single observations and the Observation components can only have 0 or 1 value. :(</p>",
        "id": 213165339,
        "sender_full_name": "Sandra Mattes",
        "timestamp": 1602600237
    },
    {
        "content": "<p>LP241982-0 is a LOINC Part Number for the Method Type \"Big Five Inventory (BFI)\" rather than an LOINC Observation code.  Generally, LP Number are not intended to be used to encoding your data.</p>",
        "id": 213177348,
        "sender_full_name": "Lin Zhang",
        "timestamp": 1602604673
    },
    {
        "content": "<p>The LOINC Search results for BFI (44 hits)are as follows:</p>\n<p><a href=\"https://search.loinc.org/searchLOINC/search.zul?query=method%3ABFI\">https://search.loinc.org/searchLOINC/search.zul?query=method%3ABFI</a></p>",
        "id": 213177977,
        "sender_full_name": "Lin Zhang",
        "timestamp": 1602604898
    },
    {
        "content": "<p>All these codes have Chinese and Italian translations in addition to their official English names (including question text in the Component field).</p>",
        "id": 213179011,
        "sender_full_name": "Lin Zhang",
        "timestamp": 1602605293
    },
    {
        "content": "<p>These codes are members of a quite larger LOINC Panel: 62710-9 PhenX domain - Psychiatric.</p>",
        "id": 213181747,
        "sender_full_name": "Lin Zhang",
        "timestamp": 1602606381
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"352744\">@Sandra Mattes</span>  You might need an Organizer to collect those BFI codes and the data values together.  For now, there is no LOINC Code for such a panel yet.  Given your tight timeline, maybe you could submit a new LOINC Term proposal for such a panel to the LOINC Committee later.  And before this, you may want to create a local panel code for this purpose.</p>",
        "id": 213182508,
        "sender_full_name": "Lin Zhang",
        "timestamp": 1602606742
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192103\">@Lin Zhang</span> so if I understand this correctly, I cannot use an LP number as a code but instead would have to use one of the codes in the PhenX domain. But those are only statements and no actual assignment of the big five traits. That's why I need to create local panel codes. A local panel code would be a code for the observation which I define, right? What is the best practice to do this? Would I publish the definition of those codes on my website and post the link in the \"system\" field of the coding to ensure interoperability until a new LOINC term is submitted?</p>",
        "id": 213253278,
        "sender_full_name": "Sandra Mattes",
        "timestamp": 1602659563
    },
    {
        "content": "<p>What codes do you need?  Result value codes (answers) or Observation codes (questions)?</p>",
        "id": 213255549,
        "sender_full_name": "Lin Zhang",
        "timestamp": 1602661400
    },
    {
        "content": "<p>What do mean by \"actual assignments\"?</p>",
        "id": 213255577,
        "sender_full_name": "Lin Zhang",
        "timestamp": 1602661439
    },
    {
        "content": "<p>My data consists of a set of traits, e.g. extraversion and agreeableness which are assigned to a user after answering a questionnaire. The actual answers are not saved, only the result. This result is what I need to transfer to fhir ressources. My attempt here was to export the result (not answers) of the questionnaire as an Observation.</p>",
        "id": 213256619,
        "sender_full_name": "Sandra Mattes",
        "timestamp": 1602662287
    },
    {
        "content": "<p>LOINC Part Numbers are more like internal codes and they should not be for free uses (See LOINC license terms).</p>",
        "id": 213256634,
        "sender_full_name": "Lin Zhang",
        "timestamp": 1602662308
    },
    {
        "content": "<p>My understanding is you are trying to export the conclusion of the questionnaire, right?</p>",
        "id": 213256789,
        "sender_full_name": "Lin Zhang",
        "timestamp": 1602662408
    },
    {
        "content": "<p>If yes, maybe you need a QuestionnaireResponse (I'm not sure) and an Observation to wrap it.  <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 213256909,
        "sender_full_name": "Lin Zhang",
        "timestamp": 1602662508
    },
    {
        "content": "<p>I am not quite sure what I am allowed to do with those codes. So they aren't the standard way to use for data representation in fhir? I am quite confused which codes to use, as I also have other data which is represented as Observations, and the code is mandatory. I've been reading the license terms, which says \"LOINC codes and other information from the LOINC Table (and LOINC Table Core) may be used in electronic records and electronic messages in conjunction with laboratory test results and clinical observations without the need to include this Copyright Notice and License or a reference thereto in the message\". But also \"To prevent the dilution of LOINC’s purpose to provide a definitive standard for identifying clinical information in electronic reports, neither the Licensed Materials, nor any portion thereof, may be used for the purpose of developing or promulgating a different standard for identifying patient observations\", therefore defining own codes next to using those codes is illegal? <span aria-label=\"dizzy\" class=\"emoji emoji-1f635\" role=\"img\" title=\"dizzy\">:dizzy:</span></p>\n<p>I am just trying to understand how to define the codes of my Observations in the right way and according to the value set restrictions of the standard.</p>\n<p>Yes, I am trying to export the conclusion of a questionnaire. By wrapping the QuestionnaireResponse you mean I reference the QuestionnaireResponse for example in the derivedFrom field of the observation?</p>",
        "id": 213258010,
        "sender_full_name": "Sandra Mattes",
        "timestamp": 1602663254
    },
    {
        "content": "<p>About LP Numbers (From the license)</p>\n<p>The LOINC parts and LOINC part hierarchies shall not be used in any manner except as they are presented in the Licensed Materials (and/or in other formats of distribution approved by Regenstrief Institute, Inc.) to organize, categorize, and be constituents of LOINC terms, and provide links to external terminologies. The LOINC parts and LOINC part hierarchies are subject to change, addition, modification, or deletion, without notice, and are not strictly managed under the same policies as LOINC terms.</p>",
        "id": 213258663,
        "sender_full_name": "Lin Zhang",
        "timestamp": 1602663775
    },
    {
        "content": "<p>Ah so you meant that the license defines to use them only in the way they are defined and intended. I misunderstood that \"they should not be for free uses\" means they need to be paid for.</p>",
        "id": 213259119,
        "sender_full_name": "Sandra Mattes",
        "timestamp": 1602664123
    },
    {
        "content": "<p>Such codes would be unsafe to use in terms of persistency.  And there is no specific LOINC code for the BFI conclusion yet.</p>",
        "id": 213261173,
        "sender_full_name": "Lin Zhang",
        "timestamp": 1602665611
    },
    {
        "content": "<p>Yeah I totally understand. I am now asking myself if it makes sense at all to use LOINC codes or if there is any other coding system I can use for my data. Is there a definition which sorts of other codes are valid (like SNOMED CT)? Only LOINC is mentioned in the documentation (<a href=\"https://www.hl7.org/fhir/observation.html\">https://www.hl7.org/fhir/observation.html</a>), as it is preferred.</p>",
        "id": 213264738,
        "sender_full_name": "Sandra Mattes",
        "timestamp": 1602667898
    },
    {
        "content": "<p>This is an example form based on LOINC Panel 91629-6 General Well-Being Schedule:<br>\n<a href=\"https://forms.loinc.org/91629-6\">https://forms.loinc.org/91629-6</a></p>\n<p>Maybe it's more intuitive and helpful to undertand your need.</p>\n<p>Within the panel, the last code is for the total score.</p>\n<p>And for your conclusion observation, you may need a nominal code like:</p>\n<p>LOINC 94026-2  Bipolar disorder type<br>\n<a href=\"https://loinc.org/94026-2/\">https://loinc.org/94026-2/</a></p>",
        "id": 213265723,
        "sender_full_name": "Lin Zhang",
        "timestamp": 1602668536
    },
    {
        "content": "<p>Ah I see. Thanks for the example</p>",
        "id": 213267674,
        "sender_full_name": "Sandra Mattes",
        "timestamp": 1602669777
    },
    {
        "content": "<p>And I guess you can only use the conclusion code 94026-2 if this is the conclusion of exactly this panel?</p>",
        "id": 213267798,
        "sender_full_name": "Sandra Mattes",
        "timestamp": 1602669865
    },
    {
        "content": "<p>Just an example code to show how-to but its meaning is irrelevant to your need.</p>",
        "id": 213268550,
        "sender_full_name": "Lin Zhang",
        "timestamp": 1602670407
    }
]