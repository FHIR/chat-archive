[
    {
        "content": "<p>An implementer asked us a question about operation in CS which I think it worth some discussion here. Let's say an IG says that server SHALL support $validate operation on Patient in its \"requirements\" CS</p>\n<div class=\"codehilite\"><pre><span></span><code>{\n          &quot;type&quot; : &quot;Patient&quot;,\n          &quot;operation&quot; : [\n            {\n              &quot;extension&quot; : [\n                {\n                  &quot;url&quot; : &quot;http://hl7.org/fhir/StructureDefinition/capabilitystatement-expectation&quot;,\n                  &quot;valueCode&quot; : &quot;SHALL&quot;\n                }\n              ],\n              &quot;name&quot; : &quot;validate&quot;,\n              &quot;definition&quot; : &quot;http://hl7.org/fhir/OperationDefinition/Resource-validate&quot;\n            }\n          ]\n        },\n</code></pre></div>\n<p>The <code>validate</code> operation has three optional input parameter. One of them is <code>profile</code><br>\nA server implementation, (Server A), decides that it does not support <code>profile</code> input parameter.<br>\nQuestions</p>\n<ol>\n<li>If ServerA adds base validate operation in its instance kind CS </li>\n</ol>\n<div class=\"codehilite\"><pre><span></span><code>              &quot;name&quot; : &quot;validate&quot;,\n              &quot;definition&quot; : &quot;http://hl7.org/fhir/OperationDefinition/Resource-validate&quot;\n</code></pre></div>\n<p>Does that mean ServerA support all three input parameters? Or ServerA MAY ignore any optional parameter it does support?<br>\nThe problem for \"ignore any optional parameter\" is that client may expect server validating resource using profile uri provided while server actually does something different.</p>\n<ol start=\"2\">\n<li>If ServerA create a constrained definition based on base validate operation with profile parameter as [0..0], </li>\n</ol>\n<div class=\"codehilite\"><pre><span></span><code>              &quot;name&quot; : &quot;validate&quot;,\n              &quot;definition&quot; : &quot;http://my-server/OperationDefinition/Resource-my-validate&quot;\n</code></pre></div>\n<p>Should this be ok considering the requirement CS in IG has different name/definition pair</p>\n<ol start=\"3\">\n<li>Based on #2, in CS, implementer can specify a resource with multiple <code>targetProfile</code> but cannot specify an operation with multiple definitions. Should we consider add <code>CS.rest.resource.operation.targetDefinition [0..*] </code> to address this?</li>\n</ol>",
        "id": 274735409,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1646852353
    },
    {
        "content": "<p>Servers are allowed to invoke business rules on any operation.  Ignoring parameters should only be done if it's safe to do so.  Yelling is better.  Also, it might be best to define a refined OperationDefinition that reflects exactly what the system does support that's derived from the original OperationDefinition</p>",
        "id": 274735794,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1646852477
    },
    {
        "content": "<p>Thanks Lloyd, how about question 2 and 3?</p>",
        "id": 274742109,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1646855171
    },
    {
        "content": "<p>The rules around multiple combinations of allowed parameters for an Operation are handled in the input profile with invariants.  No need for multiple OperationDefinitions.  It's definitely possible for a derived profile to constrain cardinality.</p>",
        "id": 274749378,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1646858473
    }
]