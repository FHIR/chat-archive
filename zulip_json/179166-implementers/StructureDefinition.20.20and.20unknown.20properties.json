[
    {
        "content": "<p>Is it possible to validate the resource with StructureDefinition specifying ONLY the fields I want to validate and don't care about non-specified properties? Ex: I want only to validate Patient.identifier &gt; 0. <br>\nUsing my custom definition without BaseDefinition leads to errors like \"Encountered unknown child elements 'id','meta','extension','name','telecom','gender','birthDate','address','maritalStatus','communication' for definition 'Patient' (at Patient)\". I want to avoid such errors and do just partial profile validation. Please advice.</p>",
        "id": 230610460,
        "sender_full_name": "Pash",
        "timestamp": 1615937650
    },
    {
        "content": "<p>I'm confused.<br>\nThe definition of Patient imports all of DomainResource. But all of those elements are optional. A Patient whose only element is Patient.identifier is valid.</p>",
        "id": 230614778,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1615941035
    },
    {
        "content": "<p>&lt;Patient xmlns=\"<a href=\"http://hl7.org/fhir\">http://hl7.org/fhir</a>\"&gt;<br>\n    &lt;identifier&gt;<br>\n        &lt;system value=\"http://ns.electronichealth.net.au/id/hi/ihi/1.0\"/&gt;<br>\n        &lt;value value=\"8003608833357361\"/&gt;<br>\n    &lt;/identifier&gt;<br>\n&lt;/Patient&gt;</p>",
        "id": 230614786,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1615941041
    },
    {
        "content": "<p>A minimal StructureDefinition to validate this is<br>\n&lt;StructureDefinition xmlns=\"<a href=\"http://hl7.org/fhir\">http://hl7.org/fhir</a>\"&gt;<br>\n    &lt;url value=\"http://example.org/fhir/StructureDefinition/MyPatient\"/&gt;<br>\n    &lt;name value=\"MyPatient\"/&gt;<br>\n    &lt;status value=\"draft\"/&gt;<br>\n    &lt;fhirVersion value=\"4.0.1\"/&gt;<br>\n    &lt;kind value=\"resource\"/&gt;<br>\n    &lt;abstract value=\"false\"/&gt;<br>\n    &lt;type value=\"Patient\"/&gt;<br>\n    &lt;baseDefinition value=\"http://hl7.org/fhir/StructureDefinition/Patient\"/&gt;<br>\n    &lt;derivation value=\"constraint\"/&gt;<br>\n    &lt;differential&gt;<br>\n        &lt;element id=\"Patient.identifier\"&gt;<br>\n            &lt;path value=\"Patient.identifier\"/&gt;<br>\n            &lt;min value=\"1\"/&gt;<br>\n        &lt;/element&gt;<br>\n    &lt;/differential&gt;<br>\n&lt;/StructureDefinition&gt;</p>",
        "id": 230615450,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1615941590
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191682\">@Richard Townley-O'Neill</span>  yes, but I am not using core profiles, only my \"partial\" profile. Where the only Differential Element is Identifier, the same if you delete \"baseDefinition\" from your example. So when I am validating full Patient resource there are errors about unknown fields. Don't want to validate using full core profiles because of performance and uselessness in my case.</p>",
        "id": 230659924,
        "sender_full_name": "Pash",
        "timestamp": 1615972823
    },
    {
        "content": "<p>First, you should always check modifier elements (e.g. Patient.active, Patient.deceased[x], modifierExtension, etc.) because those could cause the meaning of your instance to be non-computable.  Second, right now, the Java validator doesn't have an option to only validate certain elements.  You could submit a Git issue against it asking for that enhancement.  I believe the .NET validator is in the same boat.  Third, skipping elements is only one way of boosting performance.  I'd recommend profiling your validation experience and see where most of the time is.  Cutting down on calls to the terminology server (e.g. by ensuring all of your terminologies are pre-expanded and having a terminology service of n/a) is a big one.</p>",
        "id": 230699173,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1615991374
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>  I am using .Net lib, and even without requests to the external terminology servers it takes up to 1 second to validate my big bundle with the official core profiles (cold start is even worse), and also it is some fast internal \"Attribute\" validation which is not profile validation but at least something. Here I am asking - is it even valid to check only fields I want by the FHIR specification. Probably I am missing something in my profile, and it is possible to use the Patient profile above with some tweaks.</p>",
        "id": 230702891,
        "sender_full_name": "Pash",
        "timestamp": 1615992775
    },
    {
        "content": "<p>There's no requirement to validate at all.  The only FHIR requirement is that all data you <em>expose</em> must be completely valid.  Typically, the easiest way to ensure that what you expose is valid is to ensure that everything you take in is valid.  It's completely legitimate to only validate those elements your system is going to pay attention to (though you should always pay attention to modifier elements).  But I don't believe the .NET validator has a capability to perform that sort of filtering as of yet.</p>",
        "id": 230715415,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1615996822
    },
    {
        "content": "<p>Hello all, </p>\n<p>Can anyone please share structure definition examples with minValue and maxValue ?<br>\nThese fields are choice of datatype, so could not find the exact key name for this fields .</p>",
        "id": 233629791,
        "sender_full_name": "Radha Rajendran",
        "timestamp": 1617876660
    },
    {
        "content": "<p>Can we create our own profiles based on our functionality ?</p>",
        "id": 233630212,
        "sender_full_name": "Radha Rajendran",
        "timestamp": 1617876930
    },
    {
        "content": "<p>Don't have any examples near to hand, but the instances would look like this:<br>\n<code>&lt;minValueDate value=\"2021-04-08\"/&gt;</code><br>\nor<br>\n<code>\"minValueDate\": \"2021-04-08\",</code></p>\n<p>You're certainly free to (and encouraged to) define your own profiles to document your own functionality in a standardized way.</p>",
        "id": 233673524,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1617895331
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>  Thank you very much for your reply</p>",
        "id": 233770298,
        "sender_full_name": "Radha Rajendran",
        "timestamp": 1617946180
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> </p>\n<p>How to declare default value and validate data type(Codeableconcept) elements in structure definition .? <br>\nThis example is created by me . may be its not the real case but Like this  i may get the data for other data types.</p>\n<p>Example: Patient.communication[0].language.coding[0].code they given \"-\" in resource request. <br>\nI want to update default value \"en-us\" for this field .<br>\n Shall i give  direct path (Eg: Patient..communication[0].language.coding[0].code) in structure definition ?</p>",
        "id": 233774751,
        "sender_full_name": "Radha Rajendran",
        "timestamp": 1617950402
    },
    {
        "content": "<p>Can anyone please guide me how to implement meaningWhenMissing and defaultValue ?</p>\n<p>In FHIR  document they mentioned like below<br>\ndefault value and meaningWhenMissing are mutually exclusive defaultValue.empty() or meaningWhenMissing.empty()</p>\n<p>Whether i can allow empty value for field and then apply default value (But fhir schema not allowing null or empty values in resource data) . How defaultValue and meaningWhenMissing  mutually exclusive ?</p>\n<p>meaningWhenMissing is markdown datatype how i validate based on this ?</p>",
        "id": 233830811,
        "sender_full_name": "Radha Rajendran",
        "timestamp": 1617978728
    },
    {
        "content": "<p>FHIR doesn't have default values.  I.e. there's no \"value\" you can infer when an element is missing.  Where meaningIfMissing is specified, that tells how to interpret instances where the element is omitted.  It's prohibited to define meaningIfMissing in a profile - because profiles can't ever inject meaning into an instance.</p>",
        "id": 233852048,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1617985548
    },
    {
        "content": "<p>Hello all,</p>\n<p>I am using <a href=\"http://hl7.org/fhir/validation.html#jar\">http://hl7.org/fhir/validation.html#jar</a> JAR validator for stucture definition validation.<br>\nIf i add any additional validation property in Elements such as minValueDate,  minValueInteger , The validator not validating the resource data .</p>\n<p>Can any one please help - Is my key is correct or am i missing something ?</p>",
        "id": 236318507,
        "sender_full_name": "Radha Rajendran",
        "timestamp": 1619522206
    },
    {
        "content": "<p>What is the usecase of \"<strong>pattern</strong>\" in structure definition ?</p>",
        "id": 236318733,
        "sender_full_name": "Radha Rajendran",
        "timestamp": 1619522325
    },
    {
        "content": "<p>Pattern is primarily used for slicing - it allows you to specify a limited amount of information to match on while still leaving other elements unconstrained.  Can you provide an example of a profile declaring mins that isn't working?</p>",
        "id": 236341863,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1619532132
    },
    {
        "content": "<p>{<br>\n        \"id\": \"Patient.birthDate\",<br>\n        \"path\": \"Patient.birthDate\",<br>\n        \"short\": \"The date of birth for the individual\",<br>\n        \"definition\": \"The date of birth for the individual.\",<br>\n        \"comment\": \"At least an estimated year should be provided as a guess if the real DOB is unknown  There is a standard extension \\\"patient-birthTime\\\" available that should be used where Time is required (such as in maternity/infant care systems).\",<br>\n        \"requirements\": \"Age of the individual drives many clinical processes.\",<br>\n        \"min\": 0,<br>\n        \"max\": \"1\",<br>\n        \"minValueDate\": \"1900-01-01\",<br>\n        \"base\": {<br>\n          \"path\": \"Patient.birthDate\",<br>\n          \"min\": 0,<br>\n          \"max\": \"1\"<br>\n        },<br>\n        \"type\": [<br>\n          {<br>\n            \"code\": \"date\"<br>\n          }<br>\n        ],<br>\n        \"constraint\": [<br>\n          {<br>\n            \"key\": \"ele-1\",<br>\n            \"severity\": \"error\",<br>\n            \"human\": \"All FHIR elements must have a @value or children\",<br>\n            \"expression\": \"exists() or (children().count() &gt; id.count())\",<br>\n            \"xpath\": \"@value|f:*|h:div\",<br>\n            \"source\": \"<a href=\"http://hl7.org/fhir/StructureDefinition/Element\">http://hl7.org/fhir/StructureDefinition/Element</a>\"<br>\n          }<br>\n        ],<br>\n        \"mustSupport\": true,<br>\n        \"isModifier\": false,<br>\n        \"isSummary\": true,<br>\n        \"mapping\": [<br>\n          {<br>\n            \"identity\": \"v2\",<br>\n            \"map\": \"PID-7\"<br>\n          },<br>\n          {<br>\n            \"identity\": \"rim\",<br>\n            \"map\": \"player[classCode=PSN|ANM and determinerCode=INSTANCE]/birthTime\"<br>\n          },<br>\n          {<br>\n            \"identity\": \"cda\",<br>\n            \"map\": \".patient.birthTime\"<br>\n          },<br>\n          {<br>\n            \"identity\": \"loinc\",<br>\n            \"map\": \"21112-8\"<br>\n          },<br>\n          {<br>\n            \"identity\": \"argonaut-dq-dstu2\",<br>\n            \"map\": \"Patient.birthDate\"<br>\n          }<br>\n        ]<br>\n      },</p>",
        "id": 236347267,
        "sender_full_name": "Radha Rajendran",
        "timestamp": 1619533949
    },
    {
        "content": "<p>I have tested using above element <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span></p>",
        "id": 236347325,
        "sender_full_name": "Radha Rajendran",
        "timestamp": 1619533970
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span> <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 236366996,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1619540310
    },
    {
        "content": "<p>it turns out I've overlooked that. can you provide a profile and test instance?</p>",
        "id": 236410397,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1619557945
    }
]