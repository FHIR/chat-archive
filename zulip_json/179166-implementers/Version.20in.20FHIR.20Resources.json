[
    {
        "content": "<p>We have 6-7 ballot comments about the need for including version in a resource. We have not done for this a number of reasons, but a small - well coordinated - portion of the community doesn't buy this.</p>",
        "id": 153958848,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1526158178
    },
    {
        "content": "<p>We will be discussing this subject this week in committee somewhere. If you're interested, or you're a party to the comments (I'll @ reference you later if you are), please let me know so we can schedule a discussion at as suitable time as we can for everyone.</p>",
        "id": 153958850,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1526158323
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> I'd like to understand this better as well, it's come up a few times in discussions around the versioned API.  Please include me.</p>",
        "id": 153958851,
        "sender_full_name": "Kevin Olbrich",
        "timestamp": 1526158375
    },
    {
        "content": "<p>in the meantime, <span class=\"user-mention\" data-user-id=\"191351\">@Chris Grenz</span> points out that we don't need to - and shouldn't - add anything for this. You can already indicate what version a resource has if you want:</p>\n<div class=\"codehilite\"><pre><span></span>&lt;Patient xmlns=&quot;http://hl7.org/fhir&quot;&gt;\n  &lt;meta&gt;\n    &lt;profile value=&quot;http://hl7.org/fhir/DSTU2/StructureDefinition/Patient&quot;/&gt;\n  &lt;/meta&gt;\n&lt;/Patient&gt;\n</pre></div>",
        "id": 153958852,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1526158420
    },
    {
        "content": "<p>This is a statement that this patient resource conforms to the DSTU2 definition of a resource. That's exactly what's asked for, and exactly how it should be done, and has the advantage of not requiring any new element, and working just fine for DSTU 2-4, all versions.</p>",
        "id": 153958853,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1526158475
    },
    {
        "content": "<p>I'd like to join the discussion if possible.</p>",
        "id": 153959091,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1526161954
    },
    {
        "content": "<p>I'm interested in this as well</p>",
        "id": 153959787,
        "sender_full_name": "Christiaan Knaap",
        "timestamp": 1526224322
    },
    {
        "content": "<p>I'm interested. I'd first like to understand what we try to solve though. Could you point to the tracker items here, so we read into the comments before the discussion?</p>",
        "id": 153959797,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1526224744
    },
    {
        "content": "<p>current: <a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=16165\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=16165\">GF#16165</a>, <a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=16127\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=16127\">GF#16127</a>, <a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17002\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17002\">GF#17002</a>, <a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17001\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17001\">GF#17001</a></p>",
        "id": 153959798,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1526225089
    },
    {
        "content": "<p>there is much history here. My brief summary:</p>",
        "id": 153959799,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1526225102
    },
    {
        "content": "<p>it's always been our intent that once stable, resources would not need versioning. And we have strong input from implementers that having versions in v2 messsages is strongly associated with barriers to integration.</p>",
        "id": 153959800,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1526225155
    },
    {
        "content": "<p>while FHIR was in trial use, we said we weren't going to solve this problem.</p>",
        "id": 153959801,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1526225179
    },
    {
        "content": "<p>but it's become clear that FHIR won't go to normative as a single spec.</p>",
        "id": 153959802,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1526225190
    },
    {
        "content": "<p>and we've ended up with the version in the metadata, rather than the data itself.</p>",
        "id": 153959803,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1526225253
    },
    {
        "content": "<p>e.g. the capability statement for an exchange (there is always one on rest) specifies the version, and there's no point to have a version in the instance.</p>",
        "id": 153959804,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1526225312
    },
    {
        "content": "<p>and- this is important - on the rest interface, the <em>exchange</em> is versioned, not the <em>resource</em> itself</p>",
        "id": 153959805,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1526225338
    },
    {
        "content": "<p>that's why the capability statement has the version</p>",
        "id": 153959806,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1526225353
    },
    {
        "content": "<p>outside the rest interface, though, life is different. And it's here - in storage related use cases etc, that people get really interested in the version in the instance. But we say: it's stupid to have the version of the thing you are reading inside the thing you are reading.</p>",
        "id": 153959807,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1526225444
    },
    {
        "content": "<p>so, continuing with that, we have defined that you can put the version alongside the resource - e.g. in your database, or in the mimetype for the content of the thing that carries the FHIR resource. e.g application/fhir+xml; fhir-version=3.0. Almost everywhere, you have a mime type (e.g. hl7 v2 message, SMTP header, MIME package of some kind, etc. So knowing the version ahead of time makes it much easier than looking inside the content</p>",
        "id": 153959808,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1526225574
    },
    {
        "content": "<p>but still there's a few places where having something along side is problematic. Naked resources stored in files on disks, for instance. And these things happen in a few places. And in other cases, people have built resources where they expect the version inside the thing they are reading, and they just don't want to change</p>",
        "id": 153959809,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1526225634
    },
    {
        "content": "<p>after all, HL7 has always done it this way... (whether we have or not)</p>",
        "id": 153959810,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1526225657
    },
    {
        "content": "<p>so there's several possible solutions:<br>\n- say that versioning in the mime type and the capability statement is fine<br>\n-- particularly given Chris's note above about Resource.meta.profile (and it's legacy support)<br>\n- add Resource.meta.version<br>\n- add a special version representation attribute/property for xml, json, and turtle that's at the root, not further in</p>",
        "id": 153959811,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1526225781
    }
]