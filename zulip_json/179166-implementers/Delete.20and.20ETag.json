[
    {
        "content": "<p>Hi All,</p>\n<p>Have some questions about DELETE interaction and ETag</p>\n<ol>\n<li>\n<p><a href=\"http://build.fhir.org/http.html#history\" target=\"_blank\" title=\"http://build.fhir.org/http.html#history\">http://build.fhir.org/http.html#history</a> defines the format of the DELETE history entry.. For FHIR server that supports versioning, <a href=\"http://build.fhir.org/http.html#delete\" target=\"_blank\" title=\"http://build.fhir.org/http.html#delete\">http://build.fhir.org/http.html#delete</a> states that the DELETE operation may return an ETag header. I suppose for such FHIR servers that return an ETag header on DELETE operation SHOULD also populate entry.response.etag in the history response?</p>\n</li>\n<li>\n<p>For the <a href=\"http://build.fhir.org/http.html#delete\" target=\"_blank\" title=\"http://build.fhir.org/http.html#delete\">http://build.fhir.org/http.html#delete</a> interaction, what's the response payload going to look like for a server that returns 200 OK instead of 204 No Content when deleting a single record?</p>\n</li>\n<li>\n<p>When doing a conditional DELETE, should a FHIR server return an ETag for the \"one match\" scenario?</p>\n</li>\n<li>\n<p>What's the response payload going to look like for a server returning 200 OK when performing a conditional delete and it matched multiple resources?</p>\n</li>\n</ol>",
        "id": 189183730,
        "sender_full_name": "Michael Calderero",
        "timestamp": 1582773490
    },
    {
        "content": "<ol>\n<li>probably</li>\n<li>has to be empty</li>\n<li>I think so</li>\n<li>empty?</li>\n</ol>",
        "id": 189189770,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1582784015
    },
    {
        "content": "<p>Thanks Grahame for the replies.</p>\n<p>For #2, is empty == \"no response payload\"? If yes then I fail to see much use for 200 OK when you already have 204 No Content as a response, or what to tell a FHIR server to make it return 200 OK.</p>\n<p>For #4, does empty == \"no response payload\", a bundle with 0 entries, or a bundle with entries like below? The entries are taken from the output of a history interaction with deleted versions</p>\n<div class=\"codehilite\"><pre><span></span>{\n  &quot;resourceType&quot;: &quot;Bundle&quot;,\n  &quot;id&quot;: &quot;abcdefg&quot;,\n  &quot;meta&quot;: {\n    &quot;lastUpdated&quot;: &quot;2014-08-18T01:43:30Z&quot;\n  },\n  &quot;total&quot;: 3,\n  &quot;entry&quot;: [\n    {\n      &quot;request&quot;: {\n        &quot;method&quot;: &quot;DELETE&quot;,\n        &quot;url&quot;: &quot;Patient/pat1&quot;\n      },\n      &quot;response&quot;: {\n        &quot;lastModified&quot;: &quot;2014-08-18T01:43:30Z&quot;,\n        &quot;etag&quot;: &quot;W/\\&quot;1234\\&quot;&quot;\n      }\n    },\n    {\n      &quot;request&quot;: {\n        &quot;method&quot;: &quot;DELETE&quot;,\n        &quot;url&quot;: &quot;Patient/pat2&quot;\n      },\n      &quot;response&quot;: {\n        &quot;lastModified&quot;: &quot;2014-08-18T01:43:30Z&quot;,\n        &quot;etag&quot;: &quot;W/\\&quot;1234\\&quot;&quot;\n      }\n    },\n    {\n      &quot;request&quot;: {\n        &quot;method&quot;: &quot;DELETE&quot;,\n        &quot;url&quot;: &quot;Patient/pat3&quot;\n      },\n      &quot;response&quot;: {\n        &quot;lastModified&quot;: &quot;2014-08-18T01:43:30Z&quot;,\n        &quot;etag&quot;: &quot;W/\\&quot;1234\\&quot;&quot;\n      }\n    }\n  ]\n}\n</pre></div>",
        "id": 189191285,
        "sender_full_name": "Michael Calderero",
        "timestamp": 1582786620
    },
    {
        "content": "<p>for #4 I meant no payload</p>",
        "id": 189279525,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1582858465
    },
    {
        "content": "<p>I don't think 200 is much use but I think there are servers that are hard coded to 200ok?</p>",
        "id": 189279533,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1582858484
    }
]