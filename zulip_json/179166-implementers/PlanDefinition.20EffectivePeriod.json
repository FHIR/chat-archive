[
    {
        "content": "<p>When the $apply operation is run on a PlanDefinition, they can generate Requests far off in the future. Further, in a PlanDefinition, there can be a dependency on which actions are taken depending on the outcome of a previous action. This means that we could be running the $apply operation on the PlanDefinition multiple times, spread out over long periods of time.</p>\n<p>On the PlanDefinition, the effectivePeriod element has the following definition</p>\n<blockquote>\n<p>The period during which the plan definition content was or is planned to be in active use.</p>\n</blockquote>\n<ol>\n<li>I am interpreting the effectivePeriod as the time period in which the PlanDefinition is in the active state and when I can run the $apply operation. Is this correct?</li>\n<li>When I am sunsetting a PlanDefinition, I might want to say, if a Patient has Requests generated for them from the PlanDefinition already, for continuity of care, keep using the same PlanDefinition. However, do not apply the PlanDefinition to anyone new. Assuming my interpretation in 1 is correct, I'm thinking I'll need to introduce an extension to capture this, but wanted to check with the community that I am understanding things correctly.</li>\n</ol>\n<p>Thanks!</p>",
        "id": 277423611,
        "sender_full_name": "Kyle Thompson",
        "timestamp": 1648822147
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span></p>",
        "id": 277423923,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1648822297
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"401577\">@Kyle Thompson</span> , that is the intent of the <code>effectivePeriod</code> element, yes. However, whether a given system uses that to actually determine what version of a PlanDefinition is run is more of a governance/policy issue, not something the specification is prescriptive about (i.e. there's nothing in the spec that says you can't run a PlanDefinition/$apply outside of the specified <code>effectivePeriod</code>.</p>",
        "id": 277435338,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1648826953
    },
    {
        "content": "<p>Similarly, whether a system wants to continue running the version of the PlanDefinition that was originally applied for a patient is a governance/policy issue and not something the specification is prescriptive about. It's reasonable to say that the same version should continue to be applied, however, there may be cases where you would want the new version to be applied, even if a previous version had been used already. I can see cases for both approaches.</p>",
        "id": 277435567,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1648827062
    }
]