[
    {
        "content": "<p>I have install Hapi FHIR JPA version. I am trying to understand how can I read the valueset defined out of the box by FHIR. For example, <a href=\"https://www.hl7.org/fhir/v3/EducationLevel/cs.html\">https://www.hl7.org/fhir/v3/EducationLevel/cs.html</a>. The code/system/display is defined as follows:</p>\n<p>Level   Code    Display Definition<br>\n1   ASSOC   Associate's or technical degree complete    Associate's or technical degree complete<br>\n1   BD  College or baccalaureate degree complete    College or baccalaureate degree complete<br>\n1   ELEM    Elementary School   Elementary School<br>\n1   GD  Graduate or professional Degree complete    Graduate or professional Degree complete<br>\n1   HS  High School or secondary school degree complete High School or secondary school degree complete<br>\n1   PB  Some post-baccalaureate education   Some post-baccalaureate education<br>\n1   POSTG   Doctoral or post graduate education Doctoral or post graduate education<br>\n1   SCOL    Some College education  Some College education<br>\n1   SEC Some secondary or high school education Some secondary or high school education</p>\n<hr>\n<p>Questions:<br>\n1.How can I read these values in my java program?. </p>\n<ol start=\"2\">\n<li>Do I need to load any extra valuseset terminology data to get these ?. </li>\n</ol>\n<p>I am fairly at loss. I tried this on my instance <a href=\"http://localhost:8090/fhir/ValueSet\">http://localhost:8090/fhir/ValueSet</a><br>\nI get back <br>\n{<br>\n  \"resourceType\": \"Bundle\",<br>\n  \"id\": \"da85d7a9-8f24-494e-b21e-5a26ddfee326\",<br>\n  \"meta\": {<br>\n    \"lastUpdated\": \"2020-06-04T17:21:17.801-07:00\"<br>\n  },<br>\n  \"type\": \"searchset\",<br>\n  \"total\": 0,<br>\n  \"link\": [<br>\n    {<br>\n      \"relation\": \"self\",<br>\n      \"url\": \"/fhir/*/ValueSet\"<br>\n    }<br>\n  ]<br>\n}<br>\nCan someone help me understand this?. </p>\n<p>thanks a lot</p>",
        "id": 199825676,
        "sender_full_name": "Nath",
        "timestamp": 1591317457
    },
    {
        "content": "<p>Your search response is saying that there are currently no ValueSet instances stored in your repository</p>",
        "id": 199831336,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1591325222
    },
    {
        "content": "<p>Also, if you're defining your own codes, you'll need both a CodeSystem (where the codes are defined) and a ValueSet (which indicates which subset of codes you want - though there's a simple way to say \"all of them\" if that's your requirement).</p>",
        "id": 199831358,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1591325273
    },
    {
        "content": "<p>thanks <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> . I would like to get all the values defined in FHIR. i.e. <a href=\"https://www.hl7.org/fhir/terminologies-valuesets.html\">https://www.hl7.org/fhir/terminologies-valuesets.html</a>  <br>\nHow can I load these into my repository?. Can you please give me pointer how can I load them?. </p>\n<p>thanks for your help.</p>",
        "id": 199877839,
        "sender_full_name": "Nath",
        "timestamp": 1591364742
    },
    {
        "content": "<p><a href=\"http://hl7.org/fhir/valuesets.xml\">http://hl7.org/fhir/valuesets.xml</a> or <a href=\"http://hl7.org/fhir/valuesets.json\">http://hl7.org/fhir/valuesets.json</a></p>",
        "id": 199882457,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1591366599
    },
    {
        "content": "<p>Note that not all value sets necessarily have expansions in-line.  For some value sets (e.g. those that draw on SNOMED), the set of codes is dynamic and changes as the underlying code systems change.  You can get current expansions by hitting <a href=\"http://tx.fhir.org\">http://tx.fhir.org</a></p>",
        "id": 199882685,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1591366685
    },
    {
        "content": "<p>thanks <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> . So, could you please kindly tell me what command would I use to load this valuesets.json to my fhir repo?. </p>\n<p>Btw,  this link in <a href=\"http://tx.fhir.org\">tx.fhir.org</a>, <a href=\"http://tx.fhir.org/r4\">http://tx.fhir.org/r4</a> throws exception.</p>",
        "id": 199887516,
        "sender_full_name": "Nath",
        "timestamp": 1591368742
    },
    {
        "content": "<p>That would depend on the nature of your FHIR repository.  In theory, you could POST each value set in turn to create it.  <br>\n<span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> - <a href=\"http://tx.fhir.org\">tx.fhir.org</a> needs a restart.</p>",
        "id": 199903461,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1591375250
    },
    {
        "content": "<p>thanks <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>  I will try this. thanks for your help.</p>",
        "id": 199918698,
        "sender_full_name": "Nath",
        "timestamp": 1591382682
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> . I tried this sample valueset from here <a href=\"http://hl7.org/fhir/R4/valueset-relatedperson-relationshiptype.json\">http://hl7.org/fhir/R4/valueset-relatedperson-relationshiptype.json</a>. I tried to post to my hapi jpa server.<br>\ncurl --location --request POST '<a href=\"http://localhost:8080/fhir/ValueSet\">http://localhost:8080/fhir/ValueSet</a>' \\<br>\n--header 'Content-Type: application/fhir+json' \\<br>\n--header 'Cookie: JSESSIONID=45A8B8827CD707FD9A0CF7D25B5D0B41' \\<br>\n--data-raw '{<br>\n  \"resourceType\" : \"ValueSet\",<br>\n  \"id\" : \"relatedperson-relationshiptype\",<br>\n  \"meta\" : {<br>\n    \"lastUpdated\" : \"2019-11-01T09:29:23.356+11:00\",<br>\n    \"profile\" : [\"http://hl7.org/fhir/StructureDefinition/shareablevalueset\"]<br>\n  },<br>\n  \"text\" : {<br>\n    \"status\" : \"generated\",<br>\n    \"div\" : \"&lt;div xmlns=\\\"http://www.w3.org/1999/xhtml\\\"&gt;&lt;h2&gt;Patient relationship type&lt;/h2&gt;&lt;div&gt;&lt;p&gt;A set of codes that can be used to indicate the relationship between a Patient and a Related Person.&lt;/p&gt;\\n&lt;/div&gt;&lt;p&gt;This value set includes codes from the following code systems:&lt;/p&gt;&lt;ul&gt;&lt;li&gt;Include all codes defined in &lt;a href=\\\"v2/0131/index.html\\\"&gt;&lt;code&gt;http://terminology.hl7.org/CodeSystem/v2-0131&lt;/code&gt;&lt;/a&gt;&lt;/li&gt;&lt;li&gt;Include codes from &lt;a href=\\\"v3/RoleCode/cs.html\\\"&gt;&lt;code&gt;http://terminology.hl7.org/CodeSystem/v3-RoleCode&lt;/code&gt;&lt;/a&gt; where concept  is-a  &lt;a href=\\\"v3/RoleCode/cs.html#v3-RoleCode-_PersonalRelationshipRoleType\\\"&gt;_PersonalRelationshipRoleType&lt;/a&gt;&lt;/li&gt;&lt;/ul&gt;&lt;/div&gt;\"<br>\n  },<br>\n  \"extension\" : [{<br>\n    \"url\" : \"<a href=\"http://hl7.org/fhir/StructureDefinition/structuredefinition-wg\">http://hl7.org/fhir/StructureDefinition/structuredefinition-wg</a>\",<br>\n    \"valueCode\" : \"pa\"<br>\n  }],<br>\n  \"url\" : \"<a href=\"http://hl7.org/fhir/ValueSet/relatedperson-relationshiptype\">http://hl7.org/fhir/ValueSet/relatedperson-relationshiptype</a>\",<br>\n  \"identifier\" : [{<br>\n    \"system\" : \"urn:ietf:rfc:3986\",<br>\n    \"value\" : \"urn:oid:2.16.840.1.113883.4.642.3.449\"<br>\n  }],<br>\n  \"version\" : \"4.0.1\",<br>\n  \"name\" : \"PatientRelationshipType\",<br>\n  \"title\" : \"Patient relationship type\",<br>\n  \"status\" : \"draft\",<br>\n  \"experimental\" : false,<br>\n  \"date\" : \"2019-11-01T09:29:23+11:00\",<br>\n  \"publisher\" : \"FHIR Project team\",<br>\n  \"contact\" : [{<br>\n    \"telecom\" : [{<br>\n      \"system\" : \"url\",<br>\n      \"value\" : \"<a href=\"http://hl7.org/fhir\">http://hl7.org/fhir</a>\"<br>\n    }]<br>\n  }],<br>\n  \"description\" : \"A set of codes that can be used to indicate the relationship between a Patient and a Related Person.\",<br>\n  \"compose\" : {<br>\n    \"include\" : [{<br>\n      \"system\" : \"<a href=\"http://terminology.hl7.org/CodeSystem/v2-0131\">http://terminology.hl7.org/CodeSystem/v2-0131</a>\"<br>\n    },<br>\n    {<br>\n      \"system\" : \"<a href=\"http://terminology.hl7.org/CodeSystem/v3-RoleCode\">http://terminology.hl7.org/CodeSystem/v3-RoleCode</a>\",<br>\n      \"filter\" : [{<br>\n        \"property\" : \"concept\",<br>\n        \"op\" : \"is-a\",<br>\n        \"value\" : \"_PersonalRelationshipRoleType\"<br>\n      }]<br>\n    }]<br>\n  }<br>\n}'</p>\n<p>but I got back this error <br>\n{<br>\n  \"resourceType\": \"OperationOutcome\",<br>\n  \"issue\": [<br>\n    {<br>\n      \"severity\": \"error\",<br>\n      \"code\": \"processing\",<br>\n      \"diagnostics\": \"Failed to call access method: org.springframework.dao.InvalidDataAccessApiUsageException: No EntityManager with actual transaction available for current thread - cannot reliably process 'persist' call; nested exception is javax.persistence.TransactionRequiredException: No EntityManager with actual transaction available for current thread - cannot reliably process 'persist' call\"<br>\n    }<br>\n  ]<br>\n}</p>\n<p>Can you please kindly help me ?. thanks for your help.</p>",
        "id": 200311941,
        "sender_full_name": "Nath",
        "timestamp": 1591753497
    },
    {
        "content": "<p>When you POST, you shouldn't have an 'id' in the resource.  (Some servers may tolerate it, but it shouldn't be there and it'll get ignored by those who do tolerate it.)  However, that's unlikely to be your problem - and if it is, the error message sucks :)  Suggest raising the issue on the <a class=\"stream\" data-stream-id=\"179167\" href=\"/#narrow/stream/179167-hapi\">#hapi</a>  stream.</p>",
        "id": 200316537,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1591759750
    },
    {
        "content": "<p>thanks <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> . I tried removing the id also, same error. I will post it in hapi forum. thanks for your help. appreciate it.</p>",
        "id": 200319293,
        "sender_full_name": "Nath",
        "timestamp": 1591764702
    }
]