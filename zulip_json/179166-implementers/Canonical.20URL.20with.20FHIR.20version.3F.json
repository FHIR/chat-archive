[
    {
        "content": "<p>Perhaps this is already been discussed a couple of times, but I am still wondering about the pro's and con's of adding a FHIR version inside the canonical URL, for example, <a href=\"https://example.org/R4/StructureDefinition/myPatient\">https://example.org/R4/StructureDefinition/myPatient</a> or <a href=\"https://example.org/4.0/StructureDefinition/myPatient\">https://example.org/4.0/StructureDefinition/myPatient</a>.</p>\n<p>My take on it: the FHIR spec doesn't do it. Neither a lot of other big projects such as us-core. However, there are also examples of projects or organization who do add it. <br>\nIt may be helpful for a human to see in the instance if a meta.profile is used to which FHIR version it conforms. On the other hand, implementers need to update the meta.profile tags and the profile author may have more maintenance as it will introduce another version element to the already existing places for version e.g. the npm package / SD.version / SD.fhirVersion. <br>\nI am I missing things? What do you think?</p>",
        "id": 223902328,
        "sender_full_name": "Ardon Toonstra",
        "timestamp": 1611584237
    },
    {
        "content": "<p>What are the examples where canonical urls like these are including the version?<br>\nI would think that poor form because FHIR explicitly includes a datatype for combining the \"canonical url\" and \"version\" into a single field:  <a href=\"https://www.hl7.org/fhir/datatypes.html#canonical\">https://www.hl7.org/fhir/datatypes.html#canonical</a></p>",
        "id": 223905230,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1611585492
    },
    {
        "content": "<p>you'd use a url like <code>https://example.org/StructureDefinition/myPatient</code> and instances can claim they conform to version 4.0 of that by including the following profile value:  <code>https://example.org/StructureDefinition/myPatient|4.0</code></p>",
        "id": 223905354,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1611585559
    },
    {
        "content": "<p>I believe the version behind the |  is about the SD business version and not the FHIR version.</p>",
        "id": 223907745,
        "sender_full_name": "Ardon Toonstra",
        "timestamp": 1611586619
    },
    {
        "content": "<p>oh, i see, i thought you were referring to the SD version.  my bad</p>",
        "id": 223908136,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1611586764
    },
    {
        "content": "<p>Traditionally, a version number in your base meant that that endpoint was the one that served up that particular version.  As we move to using http content negotiation for that, that's less necessary.  Also, you might want to retrieve STU3 or DSTU2 structure definitions from an R4 endpoint, so having a version in the endpoint name is going to be somewhat confusing.</p>",
        "id": 223914607,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1611589359
    },
    {
        "content": "<p>FHIR doesn't include the version in instances to make them more interoperable - by including it in the profile of the instance you'd be defeating that point, so I'd say no, don't include - unless you intend to support 2 versions of FHIR at the same time.</p>",
        "id": 223916171,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1611590020
    },
    {
        "content": "<p>That said would be interested to know what is people's experience working with US core, which like you say has exactly the same canonicals yet different profiles for STU3 and R4, see &lt;<a href=\"http://hl7.org/fhir/us/core/StructureDefinition-us-core-allergyintolerance.html\">http://hl7.org/fhir/us/core/StructureDefinition-us-core-allergyintolerance.html</a>&gt; and &lt;<a href=\"http://hl7.org/fhir/us/core/STU2/StructureDefinition-us-core-allergyintolerance.html\">http://hl7.org/fhir/us/core/STU2/StructureDefinition-us-core-allergyintolerance.html</a>&gt;</p>",
        "id": 223916371,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1611590096
    },
    {
        "content": "<p>There's an important distinction between FHIR version and business version of the resource.  To continue with the example, if you need to change <code>myPatient|4.0</code>, you also need to increment the version (e.g., <code>4.1</code>, <code>4.0.1</code>, etc.).  This is not related to the FHIR version.  Conversely, technical corrections change the FHIR version number (e.g., <code>4.0.0</code> to <code>4.0.1</code>), and those do not generate a new version of anything defined in IGs.</p>\n<p>So, if you want to use a FHIR version in the URL, I'd recommend using the name (e.g., <code>R4</code>) over the version number, since those ARE going to change over time (and I assume you don't intend to publish a new version for every technical correction).  It also helps a bit with confusion, so you don't have urls like <code>http://example.org/4.0/StructureDefinition/myPatient|3.2</code>.</p>",
        "id": 223947698,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1611602997
    }
]