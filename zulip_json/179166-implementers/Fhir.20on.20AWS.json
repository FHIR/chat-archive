[
    {
        "content": "<p>Has anyone looked at how best to run Fhir on AWS? i.e. lambda vs container, how dumb/bright the api gateway, what db in the background (e.g. dynamodb vs aurora/sql, use of elasticsearch etc.etc). </p>\n<p>Early days trying to work out how best to put something together which will be reasonably easy to roll forward as fhir versions come &amp; go. i.e. I would like to build something that can steadily roll forward vs some sort of right right now system.</p>\n<p>thanks</p>",
        "id": 166147222,
        "sender_full_name": "Adam Flinton",
        "timestamp": 1558421842
    },
    {
        "content": "<p>we don't usually talk about it as an AWS thing... you choose how you want to build your server , and deploy whatever you choose on AWS...</p>",
        "id": 166147804,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1558422531
    },
    {
        "content": "<p>I sort of agree.... the sort of coming from the fairly specific capabilities aws has and how best to use them. I have been looking at how the MS on azure system is set up &amp; the degree to which capabilities map to pipelines of compute, events &amp; persistence etc. vs the \"a server\" approach.</p>",
        "id": 166147997,
        "sender_full_name": "Adam Flinton",
        "timestamp": 1558422812
    },
    {
        "content": "<p>k. I don't recall a discussion that specific before</p>",
        "id": 166148080,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1558422961
    },
    {
        "content": "<p>quick example, fhir doc could come in sync via http (&amp; expect sync response) or async via mesh (in amongst a bunch of non fhir messages) &amp; thus output might need writing out to a mesh mail box but the underlying logic &amp; thus pipeline will be the same. This pipeline might be specific for a given version of fhir thus when the next version (of fhir) comes along, we can create a new pipeline based off the old (probably) but with one stage changed to handle the new version while leaving the original in place to handle any of the old which might still be coming in from others who are not yet at the new spec.</p>",
        "id": 166148425,
        "sender_full_name": "Adam Flinton",
        "timestamp": 1558423387
    },
    {
        "content": "<p>Only vague example I have spotted is: <a href=\"https://www.slideshare.net/AmazonWebServices/aws-serverless-interface-building-and-cerners-fhir-experience-hlc401-aws-reinvent-2018\" target=\"_blank\" title=\"https://www.slideshare.net/AmazonWebServices/aws-serverless-interface-building-and-cerners-fhir-experience-hlc401-aws-reinvent-2018\">https://www.slideshare.net/AmazonWebServices/aws-serverless-interface-building-and-cerners-fhir-experience-hlc401-aws-reinvent-2018</a></p>",
        "id": 166148766,
        "sender_full_name": "Adam Flinton",
        "timestamp": 1558423787
    },
    {
        "content": "<p>We are using AWS, but I tend to agree with Graham here. The infrastructure really depends on use cases and any cloud provider has more than enough tools or customization available to support all of these things. We personally decided on containers and to be specific kubernetes (which is supported by all three major cloud providers). We also use terraform so if we need to modify infrastructure it is really simple, and can be ported to other providers. DB also is entirely up to the customer, it's pretty easy to setup a cluster in RDS where you can choose whatever engine you want.</p>",
        "id": 166168188,
        "sender_full_name": "Robert Winterbottom",
        "timestamp": 1558442503
    },
    {
        "content": "<p>My Terminology Server is on AWS.</p>",
        "id": 166181456,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1558451504
    },
    {
        "content": "<p>Amazon's Chris McCurdy gave a presentation at FHIRDevDays Amsterdam 2018 on Deploying FHIR Data in AWS, which gave at least some suggestions.</p>",
        "id": 166883245,
        "sender_full_name": "Mikael Rinnetmäki",
        "timestamp": 1559195976
    },
    {
        "content": "<p>We deploy aidbox and postgresql in AWS kubernetes without any problems. Kubernetes is a good abstraction layer - if you will use it - you will be able to deploy to most of the clouds with small changes.</p>",
        "id": 166889159,
        "sender_full_name": "nicola (RIO/SS)",
        "timestamp": 1559204065
    },
    {
        "content": "<blockquote>\n<p>Amazon's Chris McCurdy gave a presentation at FHIRDevDays Amsterdam 2018 on Deploying FHIR Data in AWS, which gave at least some suggestions.</p>\n</blockquote>\n<p>Do you happen to have a URL for this one, I can't seem to find it?</p>",
        "id": 167002896,
        "sender_full_name": "Ahmed Mohamed",
        "timestamp": 1559313894
    },
    {
        "content": "<p>We are trying to stick to AWS services etc wherever possible (&amp; the global ones at that i.e. avoiding vpc joy i.e. dynamodb instead or aurora &amp; sns/sqs/lambda/api gateway etc.) i.e. trying to stay as far away from EC2 as possible (right through to fargate if docker etc).  Serverless if possible and event driven.</p>",
        "id": 167295303,
        "sender_full_name": "Adam Flinton",
        "timestamp": 1559656265
    },
    {
        "content": "<p>The API Gateway is pretty good. Actually it is one of the most spec-compliant out there. There are some limitations around the formatting of scopes but all and all - can’t say a bad word about it. We have a fhir server instance running on top of RDS (Postgres) and it is also not bad. If you like MySQL better - they have a performance optimized option that was kinda hidden in the drop down so it is easy to miss but it seems like it performed better. As far as Analytics - it is a much longer story. (I’m hoping we do a talk on the next dev days)</p>",
        "id": 167862846,
        "sender_full_name": "Veliyan Georgiev",
        "timestamp": 1560268224
    },
    {
        "content": "<p>If doing a talk let me know so I could possibly hook in  to listen (if they are shared to voip or afterwards to a recording). Been looking a fair amount at this e.g. the various aws hadoopy things (lakeformation/athena etc, etc.)</p>",
        "id": 168038468,
        "sender_full_name": "Adam Flinton",
        "timestamp": 1560427791
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"215438\">@Ahmed Mohamed</span> I know this is most likely not what you ask for, but you can find the program for FHIR DevDays Amsterdam 2018 at <a href=\"https://www.devdays.com/wp-content/uploads/2019/02/FHIR-DEVDAYS-_PROGRAM_GUIDE_AMS_2018.pdf\" target=\"_blank\" title=\"https://www.devdays.com/wp-content/uploads/2019/02/FHIR-DEVDAYS-_PROGRAM_GUIDE_AMS_2018.pdf\">https://www.devdays.com/wp-content/uploads/2019/02/FHIR-DEVDAYS-_PROGRAM_GUIDE_AMS_2018.pdf</a>, and see Chris's presentation slot at 15.35 on Wednesday.<br>\nWhat you're probably looking for is the presentation materials (only available to attendees AFAIK) or the recording of the presentation. I've heard rumours that the recorded videos from the event will be published at <a href=\"https://www.devdays.com/videos/\" target=\"_blank\" title=\"https://www.devdays.com/videos/\">https://www.devdays.com/videos/</a> any day now.</p>",
        "id": 169239837,
        "sender_full_name": "Mikael Rinnetmäki",
        "timestamp": 1561739132
    },
    {
        "content": "<p>Thanks. I'm sure it will be useful when it is posted. Useful site in general.</p>",
        "id": 169371455,
        "sender_full_name": "Adam Flinton",
        "timestamp": 1561962498
    },
    {
        "content": "<p>Been looking at something similar, but over multiple cloud providers. The Google healthcare offering looks interesting. We're looking at building functionality on top of this using microservices orchestrated in Kubernetes. Has anyone else used other cloud services for this (other than noted above)?</p>",
        "id": 169425543,
        "sender_full_name": "Jag Gunawardana",
        "timestamp": 1562010643
    },
    {
        "content": "<p>We’ve not gone into depth on AWS but so far our approach has been to use a series of ‘micro’ FHIR servers. </p>\n<p>These servers are a mix bag, mostly security and transforming interceptors. Some turn fhir apis into fhir servers.<br>\nThese services are for UI clients and expect to reuse them in a messaging layer (another set of fhir servers - actually clients to your endpoint use case)<br>\nWe’re also looking at federating authentication - using health and gov openid  at the servers would be complex. Ditto authorisation which maybe a combination of identity management and api gateway.</p>",
        "id": 169454803,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1562046244
    },
    {
        "content": "<p>We’ve also gone for containers, managed by rancher.</p>",
        "id": 169454832,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1562046354
    },
    {
        "content": "<p>Servers are all built using HAPI at the mo with some HAPI JPA servers</p>",
        "id": 169454875,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1562046384
    },
    {
        "content": "<p>It feels a bit like authorisation is left as more of an afterthought in FHIR. I don't mind 'rolling your own', but the mechanism seems very open (maybe that's a good thing). I've experimented on AWS, but ended up using Open Policy Agent to get find grained attribute based authorisation. Are there any implementations (on AWS or otherwise) that have pluggable authorisation?</p>",
        "id": 169475452,
        "sender_full_name": "Jag Gunawardana",
        "timestamp": 1562070050
    },
    {
        "content": "<p>Authorization is a hard problem. Authn is easy Authz is hard. We have a policy of using aws services &amp; as such cognito + our own auth system using RBAC's mandated by the (English) NHS (also applicable to other parts of the union) with a declared aim of patient consent etc.etc. i.e. who owns the record etc. We have found have found a number of 95% solutions but then the final 5% is fatal and that solution is not viable. OPA is very good &amp; is part of a (the?) solution.  I have to say this is not new and is a massive hole in health it in general e.g. I was involved in the failed NHS Legitimate Relationship Service (LRS) which foundered on the question of who owns the data &amp; thus who can given the perms in the 1st place.  So the quick answer to your question is no but it is not hard to build one (e.g. using cloud directory, cognito &amp; possible dynamodb) but that is just the start i.e. the pluggable part is fairly easy. The set of assertions given A, B &amp; C is more fun. e.g. \"If org A has a sharing agreement with org B then Clinician from Org A can see patient data from Org B\" where org to org rels are in an separate orgs system.</p>",
        "id": 169697546,
        "sender_full_name": "Adam Flinton",
        "timestamp": 1562320733
    },
    {
        "content": "<blockquote>\n<p>authorisation is left as more of an afterthought in FHIR</p>\n</blockquote>\n<p>Yes but we strongly recommend Smart App Launch (<a href=\"http://hl7.org/fhir/smart-app-launch\" target=\"_blank\" title=\"http://hl7.org/fhir/smart-app-launch\">http://hl7.org/fhir/smart-app-launch</a>)</p>",
        "id": 169698981,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1562322449
    },
    {
        "content": "<p>Dear All, This is my first post and apologies if I am deviating from the Topics that you are already discussing. I am a newbie to this FHIR world and trying to help a Hospital in setting up our own EHR Servers + Custom build the client (Web/Mobile) application connecting to the FHIR server. </p>\n<p>Read about FHIR on AWS - I followed the below documentation and was able to test the solution with postman. </p>\n<p><a href=\"https://docs.aws.amazon.com/solutions/latest/fhir-works-on-aws/welcome.html\">https://docs.aws.amazon.com/solutions/latest/fhir-works-on-aws/welcome.html</a></p>\n<p>Now I am exploring for a Mobile and web library/SDK  so that I can connect the AWS FHIR service which I created using the above documentation. </p>\n<p>I have explored <a href=\"https://github.com/SMARTMarkers/smartmarkers-ios\">https://github.com/SMARTMarkers/smartmarkers-ios</a> for iOS Application, But struck with authentication using OATH 2.0, I guess I will have to spend more time exploring. </p>\n<p>Just curious if someone have consumed the AWS solution in mobile/web application and may have any advices.  Also Am I going in the right direction. Appreciate your kind advice and suggestions ! Thanks a Bunch in advance.</p>",
        "id": 232972064,
        "sender_full_name": "K Nag",
        "timestamp": 1617415175
    },
    {
        "content": "<p>Generally speaking, OAuth2 on mobile is more tricky than on the browser, as you have to deal with routing the redirect URL into your app. An implementation of that for iOS and Android is AppAuth <a href=\"https://appauth.io\">https://appauth.io</a>. Depending on your preference (native vs hybrid) there are also wrappers available, such as flutter_appauth (<a href=\"https://pub.dev/packages/flutter_appauth\">https://pub.dev/packages/flutter_appauth</a>). If you feel that this is not enough wrapping already, there is also fhir_auth by <span class=\"user-mention\" data-user-id=\"235060\">@Grey Faulkenberry</span> which ties it in with a family of FHIR libraries for Flutter. You might also find ResearchPackage (<a href=\"https://github.com/cph-cachet/research.package\">https://github.com/cph-cachet/research.package</a>) or Faiadashu FHIRDash (<a href=\"https://pub.dev/packages/faiadashu\">https://pub.dev/packages/faiadashu</a>) helpful.</p>",
        "id": 232997930,
        "sender_full_name": "Tilo Christ",
        "timestamp": 1617446867
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192169\">@Tilo Christ</span>  Thank you for the valuable information. The fihr_auth doesn't seem to support AWS cognito yet. And I am looking for Native solution. <br>\n<span class=\"user-mention\" data-user-id=\"235060\">@Grey Faulkenberry</span> Do you have any suggestions in my use case. Appreciate your kind response.</p>",
        "id": 233005147,
        "sender_full_name": "K Nag",
        "timestamp": 1617455118
    },
    {
        "content": "<p>For native solution you would probably go with AppAuth. <span class=\"user-mention\" data-user-id=\"235060\">@Grey Faulkenberry</span>  has AWS support for fhir_auth in his plans, but not there yet. But since you want to go native that would not be an option for you.</p>",
        "id": 233005365,
        "sender_full_name": "Tilo Christ",
        "timestamp": 1617455304
    },
    {
        "content": "<p>Aws just released their amplify for flutter packages a couple of weeks ago, so I haven't implemented them for cognito login.</p>",
        "id": 233005729,
        "sender_full_name": "Grey Faulkenberry",
        "timestamp": 1617455698
    },
    {
        "content": "<p>Also, not sure if you've looked at aws health lake. I think that's where they're going.</p>",
        "id": 233005874,
        "sender_full_name": "Grey Faulkenberry",
        "timestamp": 1617455866
    },
    {
        "content": "<p>It's only in preview right now, not production, and I think that is what they're going to use for fhir, not fhir works.</p>",
        "id": 233005955,
        "sender_full_name": "Grey Faulkenberry",
        "timestamp": 1617455932
    },
    {
        "content": "<p>I've been told it's not that difficult to implement amplify, but I haven't had the chance yet.</p>",
        "id": 233006077,
        "sender_full_name": "Grey Faulkenberry",
        "timestamp": 1617456067
    },
    {
        "content": "<p>Also, can I ask what you mean by native? Flutter compiles to native code, but I'm not sure everyone would consider it native.</p>",
        "id": 233006216,
        "sender_full_name": "Grey Faulkenberry",
        "timestamp": 1617456219
    },
    {
        "content": "<p>native = more bare metal, fewer layers of wrapping :-D <a href=\"https://www.youtube.com/watch?v=evUWersr7pc\">https://www.youtube.com/watch?v=evUWersr7pc</a></p>\n<div class=\"youtube-video message_inline_image\"><a data-id=\"evUWersr7pc\" href=\"https://www.youtube.com/watch?v=evUWersr7pc\"><img src=\"https://i.ytimg.com/vi/evUWersr7pc/default.jpg\"></a></div>",
        "id": 233006798,
        "sender_full_name": "Tilo Christ",
        "timestamp": 1617456791
    },
    {
        "content": "<p>Yes. I was able to authenticate from iOS (Native) application to aws incognito using Amplify, so now I should be able to connect to the service layer \"FIHR works on aws\". And for trying various FIHR modules -  SWIFT ON FIHR is probably the library which I can integrate on iOS Native application.</p>",
        "id": 233357215,
        "sender_full_name": "K Nag",
        "timestamp": 1617729637
    },
    {
        "content": "<p>I cloned this project <a href=\"https://github.com/SMARTMarkers/easipro-patient-ios\">https://github.com/SMARTMarkers/easipro-patient-ios</a> and tried to connect to my FIHR on AWS. I am really clueless what is going wrong with Authentication.</p>",
        "id": 233954684,
        "sender_full_name": "K Nag",
        "timestamp": 1618060744
    }
]