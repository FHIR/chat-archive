[
    {
        "content": "<p>Please can anyone advise on how to link a profile to a datatype. The example I have is a locally customised human name profile which I plan to link using the profile uri field for <a href=\"http://Patient.name\" target=\"_blank\" title=\"http://Patient.name\">Patient.name</a> (Human name datatype) in Forge. I realise this could be done using an extension, but I wanted to examine how it can be done using a profile. Does anyone have any examples of this being done as I can't find any at this point in time.</p>",
        "id": 153863172,
        "sender_full_name": "Katie Wheatley",
        "timestamp": 1481582949
    },
    {
        "content": "<p>Are you wanting to declare the profile on the element in the instance (not possible) or declare that your extension is only allowed to be used in the context of <a href=\"http://Patient.name\" target=\"_blank\" title=\"http://Patient.name\">Patient.name</a> (or any HumanName)?</p>",
        "id": 153863173,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1481583081
    },
    {
        "content": "<p>I think I am attempting the former. I did wonder if what I was trying to do was impossible. The xml below for the Patient profile (<a href=\"http://Patient.name\" target=\"_blank\" title=\"http://Patient.name\">Patient.name</a> element) is what I got when adding the human name profile I have created to the <a href=\"http://Patient.name\" target=\"_blank\" title=\"http://Patient.name\">Patient.name</a> element. Can you please confirm if what I am attempting is impossible. If the answer is yes to that, then you have fully answered my initial question and I won't work on this any longer.<br>\n&lt;/element&gt;<br>\n    &lt;element&gt;<br>\n      &lt;path value=\"<a href=\"http://Patient.name\" target=\"_blank\" title=\"http://Patient.name\">Patient.name</a>\" /&gt;<br>\n      &lt;name value=\"Patient name\" /&gt;<br>\n      &lt;short value=\"A name associated with the patient.\" /&gt;<br>\n      &lt;definition value=\"The name provides names associated with the person who is the patient.\" /&gt;<br>\n      &lt;comments value=\"A patient may have multiple names with different uses or applicable periods. For animals, the name is a &amp;quot;HumanName&amp;quot; in the sense that is assigned and used by humans and has the same patterns.\" /&gt;<br>\n      &lt;requirements value=\"Need to be able to track the patient by multiple names. Examples are your official name and a partner name.\" /&gt;<br>\n      &lt;min value=\"1\" /&gt;<br>\n      &lt;max value=\"1\" /&gt;<br>\n      &lt;base&gt;<br>\n        &lt;path value=\"<a href=\"http://Patient.name\" target=\"_blank\" title=\"http://Patient.name\">Patient.name</a>\" /&gt;<br>\n        &lt;min value=\"0\" /&gt;<br>\n        &lt;max value=\"*\" /&gt;<br>\n      &lt;/base&gt;<br>\n      &lt;type&gt;<br>\n        &lt;code value=\"HumanName\" /&gt;<br>\n        &lt;profile value=\"<a href=\"http://fhir.nhs.net/StructureDefinition/adw-human-name-1-0\" target=\"_blank\" title=\"http://fhir.nhs.net/StructureDefinition/adw-human-name-1-0\">http://fhir.nhs.net/StructureDefinition/adw-human-name-1-0</a>\" /&gt;<br>\n      &lt;/type&gt;<br>\n      &lt;mustSupport value=\"true\" /&gt;<br>\n      &lt;isSummary value=\"true\" /&gt;<br>\n      &lt;mapping&gt;<br>\n        &lt;identity value=\"v2\" /&gt;<br>\n        &lt;map value=\"PID-5, PID-9\" /&gt;<br>\n      &lt;/mapping&gt;<br>\n      &lt;mapping&gt;<br>\n        &lt;identity value=\"rim\" /&gt;<br>\n        &lt;map value=\"name\" /&gt;<br>\n      &lt;/mapping&gt;<br>\n      &lt;mapping&gt;<br>\n        &lt;identity value=\"cda\" /&gt;<br>\n        &lt;map value=\".patient.name\" /&gt;<br>\n      &lt;/mapping&gt;<br>\n    &lt;/element&gt;</p>",
        "id": 153863194,
        "sender_full_name": "Katie Wheatley",
        "timestamp": 1481618146
    },
    {
        "content": "<p>So essentially you'd like to see in the instance \"this particular name repetition conforms to profile X\"?  I can't say it's totally impossible - few things are impossible when you have extensions all over the place.  However, there's no \"standard\" way to do it and, as a rule, we haven't had use-cases presented for doing so.  Can you share what your use-case is?</p>",
        "id": 153863195,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1481618985
    },
    {
        "content": "<p>@Katie FHIR allows you to define constraints on an element type. So e.g. <a href=\"http://Patient.name\" target=\"_blank\" title=\"http://Patient.name\">Patient.name</a> by default has type HumanName. You can override the element type profile with a custom profile on HumanName. In Forge, navigate to Element type and type in the profile uri. If you want your profile to support multiple different datatype profiles, then you can slice the <a href=\"http://Patient.name\" target=\"_blank\" title=\"http://Patient.name\">Patient.name</a> element and individually constrain the type of each slice, e.g. with different custom type profiles.</p>",
        "id": 153863204,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1481631968
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/hqliS3D_bs5j9vj6YWEC5B2J/human_name.png\" target=\"_blank\" title=\"human_name.png\">human_name.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/hqliS3D_bs5j9vj6YWEC5B2J/human_name.png\" target=\"_blank\" title=\"human_name.png\"><img src=\"/user_uploads/10155/hqliS3D_bs5j9vj6YWEC5B2J/human_name.png\"></a></div>",
        "id": 153863208,
        "sender_full_name": "Katie Wheatley",
        "timestamp": 1481636675
    },
    {
        "content": "<p>@Michel Is this the correct way of doing this? Thanks very much for your reply.</p>",
        "id": 153863209,
        "sender_full_name": "Katie Wheatley",
        "timestamp": 1481636713
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191594\">@Katie Wheatley</span> Correct!</p>",
        "id": 153863211,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1481637704
    },
    {
        "content": "<p>Note: by default, the type profile uri is empty. Actually this implies that the element conforms to the FHIR core datatype or resource profile identified by the type.code value.</p>",
        "id": 153863212,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1481638002
    },
    {
        "content": "<p>Cheers Michel. However, how do I express this new link in an xml example for this patient e.g. within the name element?</p>",
        "id": 153863222,
        "sender_full_name": "Katie Wheatley",
        "timestamp": 1481645445
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191594\">@Katie Wheatley</span> you don't. Element types are defined in the StructureDefinition, not in concrete instances. So you need to consult the associated profile to determine the type of an instance element.</p>",
        "id": 153863226,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1481648043
    }
]