[
    {
        "content": "<p>Hi all! <br>\nDoes anyone know if the java validator works for validating bundles in DSTU2? (And if so, how I could get it to work?) When I validate individual DSTU2 resources it works correctly. However, once I try to run a DSTU2 bundle it seems to validate against a different profile.</p>\n<p>As seen below, I specify -version 1.0.2 but then it loads hl7.fhir.r5.core. In the error message, it says that practitionerRole is not allowed by the Practitioner profile when it actually is in DSTU2. Same for patient in the Condition profile. </p>\n<p>Any thoughts/advice would be greatly appreciated. Thanks so much!</p>\n<div class=\"codehilite\"><pre><span></span><code>abigailhuang-macbookpro2:downloads abigailhuang$ java -jar validator_cli1.jar testbundle.json -version 1.0.2\nFHIR Validation tool Version 5.4.2 (Git# 552ef55adaf0). Built 2021-05-21T18:15:07.271Z (12 days old)\n  Java:   16.0.1 from /Library/Java/JavaVirtualMachines/jdk-16.0.1.jdk/Contents/Home on x86_64 (64bit). 8192MB available\n  Paths:  Current = /Users/abigailhuang/Downloads, Package Cache = /Users/abigailhuang/.fhir/packages\n  Params: testbundle.json -version 1.0.2\nLoading\n  Load FHIR v1.0 from hl7.fhir.r2.core#1.0.2 - 3378 resources (00:05.0253)\n  Load hl7.terminology#2.1.0 - 3767 resources (00:00.0943)\n  Terminology server http://tx.fhir.org - Version 1.9.372 (00:01.0597)\n  Get set...  go (00:00.0824)\nValidating\n  Validate testbundle.json  Load hl7.fhir.r5.core#current - 1990 resources (00:01.0070)\n 00:08.0170\nDone. Times: Loading: 00:08.0983, validation: 00:09.0241. Memory = 548Mb\n\n*FAILURE*: 14 errors, 2 warnings, 3 notes\n  Error @ Bundle.entry[1].resource.ofType(Practitioner).practitionerRole[0] (line 191, col18) : This element is not allowed by the profile http://hl7.org/fhir/StructureDefinition/Practitioner\n  Error @ Bundle.entry[1].resource.ofType(Practitioner).practitionerRole[1] (line 205, col18) : This element is not allowed by the profile http://hl7.org/fhir/StructureDefinition/Practitioner\n  Error @ Bundle.entry[2].resource.ofType(Practitioner).practitionerRole[0] (line 270, col18) : This element is not allowed by the profile http://hl7.org/fhir/StructureDefinition/Practitioner\n  Error @ Bundle.entry[2].resource.ofType(Practitioner).practitionerRole[1] (line 284, col18) : This element is not allowed by the profile http://hl7.org/fhir/StructureDefinition/Practitioner\n  Error @ Bundle.entry[3].resource.ofType(Condition).patient (line 310, col15) : This element is not allowed by the profile http://hl7.org/fhir/StructureDefinition/Condition\n</code></pre></div>",
        "id": 241167644,
        "sender_full_name": "Abigail Huang",
        "timestamp": 1622648485
    },
    {
        "content": "<p>Can you attach your test.json file?</p>",
        "id": 241182117,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1622655075
    },
    {
        "content": "<p>Also <span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span></p>",
        "id": 241182123,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1622655079
    },
    {
        "content": "<p>hi hello</p>",
        "id": 241182232,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1622655122
    },
    {
        "content": "<p>yeah once you attach the test.json I'll give it a go</p>",
        "id": 241182345,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1622655173
    },
    {
        "content": "<p>thanks Lloyd</p>",
        "id": 241182352,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1622655175
    },
    {
        "content": "<p>please tag me in Zulip when you upload so I get a notification</p>",
        "id": 241182383,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1622655188
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> <span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span> <br>\nThanks so much for testing this out! Most greatly appreciated. I have uploaded both a DSTU2 bundle as well as a single Practitioner resource from the bundle so you can compare the error messages and behavior. The single resource seems to work.</p>\n<p><a href=\"/user_uploads/10155/j_XgpttHdnxiaUrquwMOe6dS/testbundle.json\">testbundle.json</a> <a href=\"/user_uploads/10155/Rl-LLPJwTvr8MKC-JFHHnKHW/testresource.json\">testresource.json</a></p>",
        "id": 241327199,
        "sender_full_name": "Abigail Huang",
        "timestamp": 1622672324
    },
    {
        "content": "<p>this is what I get:</p>\n<div class=\"codehilite\"><pre><span></span><code>FHIR Validation tool Version 5.3.12-SNAPSHOT (Git# 9a82457b36c6). Built 2021-05-12T06:58:07.350+10:00 (22 days old)\n  Java:   11.0.9 from C:\\Program Files\\Java\\jdk-11.0.9 on amd64 (64bit). 16344MB available\n  Paths:  Current = C:\\temp\\validator, Package Cache = C:\\Users\\graha\\.fhir\\packages\n  Params: C:\\temp\\validator\\testbundle.json -version 1.0.2\nLoading\n  Load FHIR v1.0 from hl7.fhir.r2.core#1.0.2 - 3378 resources (00:03.0256)\n  Load hl7.terminology#2.1.0 - 3767 resources (00:00.0765)\n  Terminology server http://tx.fhir.org - Version 1.9.372 (00:02.0466)\n  Get set...  go (00:00.0760)\nValidating\n  Validate C:\\temp\\validator\\testbundle.json  Load hl7.fhir.r2.core#1.0.2 - 0 resources (00:01.0159)\n 00:01.0748\nDone. Times: Loading: 00:07.0513, validation: 00:02.0907. Memory = 236Mb\n\n*FAILURE*: 2 errors, 2 warnings, 6 notes\n  Error @ Bundle.entry[2].resource.ofType(Practitioner).identifier[0] (line 230, col18) : Identifier.system must be an absolute reference, not a local reference\n  Error @ Bundle.entry[0].resource.ofType(Patient).extension[3].url (line 42, col86) : URL value &#39;http://hl7.org/fhir/StructureDefinition/us-core-birth-sex&#39; does not resolve\n  Information @ Bundle.entry[0].resource.ofType(Patient).extension[3] (line 41, col18) : Unknown extension http://hl7.org/fhir/StructureDefinition/us-core-birth-sex\n  Information @ Bundle.entry[3].resource.ofType(Condition).patient (line 310, col15) : Details for urn:uuid:cc7e7170-5f3b-4f71-9960-20c189faq001 matching against Profilehttp://hl7.org/fhir/StructureDefinition/Patient\n  Information @ Bundle.entry[1].resource.ofType(Practitioner).practitionerRole[0].specialty[0].coding[0] (line 195, col30) : Code System URI &#39;urn:oid:1.2.345.6789.1011.1234567.81&#39; is unknown so the code cannot be validated\n  Information @ Bundle.entry[1].resource.ofType(Practitioner).practitionerRole[1].role.coding[0] (line 208, col27) : Code System URI &#39;urn:oid:1.2.345.6789.1011.1234567.81&#39; is unknown so the code cannot be validated\n  Information @ Bundle.entry[2].resource.ofType(Practitioner).practitionerRole[0].specialty[0].coding[0] (line 274, col30) : Code System URI &#39;urn:oid:1.2.345.6789.1011.1234567.81&#39; is unknown so the code cannot be validated\n  Information @ Bundle.entry[2].resource.ofType(Practitioner).practitionerRole[1].role.coding[0] (line 287, col27) : Code System URI &#39;urn:oid:1.2.345.6789.1011.1234567.81&#39; is unknown so the code cannot be validated\n  Warning @ Bundle.entry[0].resource.ofType(Patient).communication[0].language (line 109, col33) : ValueSet http://tools.ietf.org/html/bcp47 not found by validator\n  Warning @ Bundle.entry[3].resource.ofType(Condition).code.coding[0] (line 318, col21) : The display &quot;Hypertension&quot; is not a valid display for the code {http://snomed.info/sct}59621000 - should be one of [&quot;Essential hypertension&quot;,&quot;Idiopathic hypertension&quot;,&quot;Systemic primary arterial hypertension&quot;,&quot;Primary hypertension&quot;,&quot;Essential hypertension (disorder)&quot;] (from http://tx.fhir.org/r2) for &#39;http://snomed.info/sct#59621000&#39;\n</code></pre></div>",
        "id": 241336568,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1622680219
    },
    {
        "content": "<p>that looks right to me</p>",
        "id": 241336572,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1622680223
    },
    {
        "content": "<p>Thanks for trying the bundle out <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> ! You're right. That seems correct. I wonder why when I run the same command it says \"Validate testbundle.json Load hl7.fhir.r5.core#current\" while yours correctly loads hl7.fhir.r2.core#1.0.2. Did you separately download the validation schema for DSTU2? Thanks so much!</p>",
        "id": 241343164,
        "sender_full_name": "Abigail Huang",
        "timestamp": 1622688266
    },
    {
        "content": "<p>it shouldn't matter, but I didn't download anything and it shouldn't matter, really. I can't imagine why that's appearing.</p>",
        "id": 241346761,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1622693636
    },
    {
        "content": "<p>Hmm. the only difference I see is the fhir validation tool version based on the output. Is there any place where we can download the older version 5.3.12? <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> Do you by chance still have a copy of the older version you are using? I wonder if that would help.</p>",
        "id": 241434248,
        "sender_full_name": "Abigail Huang",
        "timestamp": 1622745633
    },
    {
        "content": "<p>All github releases are at  <a href=\"https://github.com/hapifhir/org.hl7.fhir.core/releases/\">https://github.com/hapifhir/org.hl7.fhir.core/releases/</a></p>",
        "id": 241442643,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1622749550
    },
    {
        "content": "<p>Thanks so much <span class=\"user-mention\" data-user-id=\"192685\">@Vassil Peytchev</span> for pointing me to the repository of old releases. Unfortunately, I tried v5.3.12 but bizarrely it still seems to load hl7.fhir.r5.core. Hmmm. I guess the problem is not the version then. </p>\n<p>Either way, I really appreciate everyone's help/thoughts!</p>\n<div class=\"codehilite\"><pre><span></span><code>abigailhuang-macbookpro2:downloads abigailhuang$ java -jar validator_cliold.jar testbundle.json -version 1.0.2\nFHIR Validation tool Version 5.3.12 (Git# a20d84bf2b87). Built 2021-05-13T19:12:53.818Z (21 days old)\n  Java:   16.0.1 from /Library/Java/JavaVirtualMachines/jdk-16.0.1.jdk/Contents/Home on x86_64 (64bit). 8192MB available\n  Paths:  Current = /Users/abigailhuang/Downloads, Package Cache = /Users/abigailhuang/.fhir/packages\n  Params: testbundle.json -version 1.0.2\nLoading\n  Load FHIR v1.0 from hl7.fhir.r2.core#1.0.2 - 3378 resources (00:05.0211)\n  Load hl7.terminology#2.1.0 - 3767 resources (00:01.0371)\n  Terminology server http://tx.fhir.org - Version 1.9.372 (00:02.0300)\n  Get set...  go (00:00.0815)\nValidating\n  Validate testbundle.json  Load hl7.fhir.r5.core#current - 1990 resources (00:01.0286)\n 00:08.0933\nDone. Times: Loading: 00:10.0080, validation: 00:10.0220. Memory = 448Mb\n\n*FAILURE*: 14 errors, 2 warnings, 3 notes\n  Error @ Bundle.entry[1].resource.ofType(Practitioner).practitionerRole[0] (line 191, col18) : This element is not allowed by the profile http://hl7.org/fhir/StructureDefinition/Practitioner\n  Error @ Bundle.entry[1].resource.ofType(Practitioner).practitionerRole[1] (line 205, col18) : This element is not allowed by the profile http://hl7.org/fhir/StructureDefinition/Practitioner\n  Error @ Bundle.entry[2].resource.ofType(Practitioner).practitionerRole[0] (line 270, col18) : This element is not allowed by the profile http://hl7.org/fhir/StructureDefinition/Practitioner\n  Error @ Bundle.entry[2].resource.ofType(Practitioner).practitionerRole[1] (line 284, col18) : This element is not allowed by the profile http://hl7.org/fhir/StructureDefinition/Practitioner\n  Error @ Bundle.entry[3].resource.ofType(Condition).patient (line 310, col15) : This element is not allowed by the profile http://hl7.org/fhir/StructureDefinition/Condition\n  Error @ Bundle.entry[3].resource.ofType(Condition).dateRecorded (line 315, col42) : This element is not allowed by the profile http://hl7.org/fhir/StructureDefinition/Condition\n</code></pre></div>",
        "id": 241460396,
        "sender_full_name": "Abigail Huang",
        "timestamp": 1622756893
    },
    {
        "content": "<p>In comparison, when I test a single resource using the same command it doesn't load r5.core </p>\n<div class=\"codehilite\"><pre><span></span><code>abigailhuang-macbookpro2:downloads abigailhuang$ java -jar validator_cliold.jar testresource.json -version 1.0.2\nFHIR Validation tool Version 5.3.12 (Git# a20d84bf2b87). Built 2021-05-13T19:12:53.818Z (21 days old)\n  Java:   16.0.1 from /Library/Java/JavaVirtualMachines/jdk-16.0.1.jdk/Contents/Home on x86_64 (64bit). 8192MB available\n  Paths:  Current = /Users/abigailhuang/Downloads, Package Cache = /Users/abigailhuang/.fhir/packages\n  Params: testresource.json -version 1.0.2\nLoading\n  Load FHIR v1.0 from hl7.fhir.r2.core#1.0.2 - 3378 resources (00:04.0479)\n  Load hl7.terminology#2.1.0 - 3767 resources (00:01.0149)\n  Terminology server http://tx.fhir.org - Version 1.9.372 (00:01.0962)\n  Get set...  go (00:00.0847)\nValidating\n  Validate testresource.json 00:00.0480\nDone. Times: Loading: 00:08.0706, validation: 00:00.0481. Memory = 190Mb\n\nSuccess: 0 errors, 0 warnings, 2 notes\n  Information @ Practitioner.practitionerRole[0].specialty[0].coding[0] (line 68, col21) : Code System URI &#39;urn:oid:1.2.345.6789.1011.1234567.81&#39; is unknown so the code cannot be validated\n  Information @ Practitioner.practitionerRole[1].role.coding[0] (line 81, col18) : Code System URI &#39;urn:oid:1.2.345.6789.1011.1234567.81&#39; is unknown so the code cannot be validated\nabigailhuang-macbookpro2:downloads abigailhuang$\n</code></pre></div>",
        "id": 241461436,
        "sender_full_name": "Abigail Huang",
        "timestamp": 1622757401
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span> I cannot reproduce this. can you?</p>",
        "id": 241462662,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1622758129
    },
    {
        "content": "<p>Hmm. Since no one else can reproduce this, it's probably just on my local machine. I did find some old hl7.fhir.r5.core.tgz files on my computer so I wonder if the issue is that I had previously installed something that is causing the validator to use r5 over r2. I'll do more digging on my end. Thanks so much all! Greatly appreciate your help.</p>",
        "id": 241473916,
        "sender_full_name": "Abigail Huang",
        "timestamp": 1622767382
    },
    {
        "content": "<p>well, I don't know, it's not going to randomly load r5 because you have it. It's loading it for a reason. Tell you what, can you clear out your package cache, which is /Users/abigailhuang/.fhir/packages, and also /Users/abigailhuang/.fhir/package-client, and try again?</p>",
        "id": 241488464,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1622778855
    },
    {
        "content": "<p>Trying now. Sorry was caught up fixing something yesterday</p>",
        "id": 241533383,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1622812808
    },
    {
        "content": "<p>When I run the latest validator 5.4.2</p>",
        "id": 241533981,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1622813085
    },
    {
        "content": "<p>For the <code>testbundle.json</code> I get this:</p>",
        "id": 241534069,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1622813124
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>mark@egghead:~/Downloads/temp$ java -jar validator_cli.jar testbundle.json -version 1.0.2\nFHIR Validation tool Version 5.4.2 (Git# 552ef55adaf0). Built 2021-05-21T18:15:07.271Z (13 days old)\n  Java:   11.0.9.1 from /home/mark/.sdkman/candidates/java/11.0.9.open-adpt on amd64 (64bit). 8028MB available\n  Paths:  Current = /home/mark/Downloads/temp, Package Cache = /home/mark/.fhir/packages\n  Params: testbundle.json -version 1.0.2\nLoading\n  Load FHIR v1.0 from hl7.fhir.r2.core#1.0.2 - 3378 resources (00:06.0998)\nInstalling hl7.terminology#2.1.0 to the package cache\n  Fetching:............................................................................\n  Installing: ............................................................................ done.\n  Load hl7.terminology#2.1.0 - 3767 resources (00:04.0457)\n  Terminology server http://tx.fhir.org - Version 1.9.372 (00:06.0345)\n  Get set...  go (00:00.0490)\nValidating\n  Validate testbundle.json  Load hl7.fhir.r3.core#3.0.2 - 4017 resources (00:01.0126)\n 00:02.0603\nDone. Times: Loading: 00:18.0901, validation: 00:03.0729. Memory = 427Mb\n\n*FAILURE*: 12 errors, 2 warnings, 2 notes\n  Error @ Bundle.entry[1].resource.ofType(Practitioner).practitionerRole[0] (line 191, col18) : This element is not allowed by the profile http://hl7.org/fhir/StructureDefinition/Practitioner\n  Error @ Bundle.entry[1].resource.ofType(Practitioner).practitionerRole[1] (line 205, col18) : This element is not allowed by the profile http://hl7.org/fhir/StructureDefinition/Practitioner\n  Error @ Bundle.entry[2].resource.ofType(Practitioner).practitionerRole[0] (line 270, col18) : This element is not allowed by the profile http://hl7.org/fhir/StructureDefinition/Practitioner\n  Error @ Bundle.entry[2].resource.ofType(Practitioner).practitionerRole[1] (line 284, col18) : This element is not allowed by the profile http://hl7.org/fhir/StructureDefinition/Practitioner\n  Error @ Bundle.entry[3].resource.ofType(Condition).patient (line 310, col15) : This element is not allowed by the profile http://hl7.org/fhir/StructureDefinition/Condition\n  Error @ Bundle.entry[3].resource.ofType(Condition).dateRecorded (line 315, col42) : This element is not allowed by the profile http://hl7.org/fhir/StructureDefinition/Condition\n  Error @ Bundle.entry[2].resource.ofType(Practitioner).identifier[0] (line 230, col18) : Identifier.system must be an absolute reference, not a local reference\n  Error @ Bundle.entry[3].resource.ofType(Condition).category.coding[0] (line 328, col21) : Unknown Code http://hl7.org/fhir/condition-category#diagnosis in http://hl7.org/fhir/condition-category for &#39;http://hl7.org/fhir/condition-category#diagnosis&#39;\n  Error @ Bundle.entry[0].resource.ofType(Patient).extension[3].url (line 42, col86) : URL value &#39;http://hl7.org/fhir/StructureDefinition/us-core-birth-sex&#39; does not resolve\n  Error @ Bundle.entry[3].resource.ofType(Condition).category (line 327, col27) : As specified by profile http://hl7.org/fhir/StructureDefinition/Condition, Element &#39;category&#39; is out of order\n  Error @ Bundle.entry[3].resource.ofType(Condition).clinicalStatus (line 334, col40) : As specified by profile http://hl7.org/fhir/StructureDefinition/Condition, Element &#39;clinicalStatus&#39; is out of order\n  Error @ Bundle.entry[3].resource.ofType(Condition) (line 326, col26) : Condition.subject: minimum required = 1, but only found 0 (from http://hl7.org/fhir/StructureDefinition/Condition)\n  Information @ Bundle.entry[0].resource.ofType(Patient).extension[3] (line 41, col18) : Unknown extension http://hl7.org/fhir/StructureDefinition/us-core-birth-sex\n  Information @ Bundle.entry[3].resource.ofType(Condition).asserter (line 312, col48) : Details for urn:uuid:cc7e7170-5f3b-4f71-9960-20c189faq002 matching against Profilehttp://hl7.org/fhir/StructureDefinition/Practitioner\n  Warning @ Bundle.entry[0].resource.ofType(Patient).communication[0].language (line 109, col33) : ValueSet http://tools.ietf.org/html/bcp47 not found by validator\n  Warning @ Bundle.entry[3].resource.ofType(Condition).code.coding[0] (line 318, col21) : The display &quot;Hypertension&quot; is not a valid display for the code {http://snomed.info/sct}59621000 - should be one of [&quot;Essential hypertension&quot;,&quot;Idiopathic hypertension&quot;,&quot;Systemic primary arterial hypertension&quot;,&quot;Primary hypertension&quot;,&quot;Essential hypertension (disorder)&quot;] (from http://tx.fhir.org/r2) for &#39;http://snomed.info/sct#59621000&#39;\n</code></pre></div>",
        "id": 241534097,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1622813138
    },
    {
        "content": "<p>why on earth does Load hl7.fhir.r3.core#3.0.2 appear? can you debug that? It totally shouldn't happen, and doesn't for me</p>",
        "id": 241534203,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1622813170
    },
    {
        "content": "<p>yeah looking into it</p>",
        "id": 241534223,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1622813183
    },
    {
        "content": "<p>just for level setting purposes, when I run the testresource on it's own I get:</p>",
        "id": 241534276,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1622813208
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>mark@egghead:~/Downloads/temp$ java -jar validator_cli.jar testresource.json -version 1.0.2\nFHIR Validation tool Version 5.4.2 (Git# 552ef55adaf0). Built 2021-05-21T18:15:07.271Z (13 days old)\n  Java:   11.0.9.1 from /home/mark/.sdkman/candidates/java/11.0.9.open-adpt on amd64 (64bit). 8028MB available\n  Paths:  Current = /home/mark/Downloads/temp, Package Cache = /home/mark/.fhir/packages\n  Params: testresource.json -version 1.0.2\nLoading\n  Load FHIR v1.0 from hl7.fhir.r2.core#1.0.2 - 3378 resources (00:02.0583)\n  Load hl7.terminology#2.1.0 - 3767 resources (00:00.0736)\n  Terminology server http://tx.fhir.org - Version 1.9.372 (00:03.0105)\n  Get set...  go (00:00.0497)\nValidating\n  Validate testresource.json 00:00.0332\nDone. Times: Loading: 00:07.0140, validation: 00:00.0332. Memory = 248Mb\n\nSuccess: 0 errors, 0 warnings, 2 notes\n  Information @ Practitioner.practitionerRole[0].specialty[0].coding[0] (line 68, col21) : Code System URI &#39;urn:oid:1.2.345.6789.1011.1234567.81&#39; is unknown so the code cannot be validated\n  Information @ Practitioner.practitionerRole[1].role.coding[0] (line 81, col18) : Code System URI &#39;urn:oid:1.2.345.6789.1011.1234567.81&#39; is unknown so the code cannot be validated\n</code></pre></div>",
        "id": 241534333,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1622813223
    },
    {
        "content": "<p>So no errors there.</p>",
        "id": 241534349,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1622813229
    },
    {
        "content": "<p>This is my priority this morning</p>",
        "id": 241534421,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1622813263
    },
    {
        "content": "<p>..ah master branch is pooched</p>",
        "id": 241535064,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1622813573
    },
    {
        "content": "<p>won't build</p>",
        "id": 241535069,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1622813576
    },
    {
        "content": "<p>I need to figure out how that happened first</p>",
        "id": 241535093,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1622813585
    },
    {
        "content": "<p>this PR here is making so master won't build?</p>",
        "id": 241535592,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1622813816
    },
    {
        "content": "<p><a href=\"https://github.com/hapifhir/org.hl7.fhir.core/pull/530\">https://github.com/hapifhir/org.hl7.fhir.core/pull/530</a></p>",
        "id": 241535595,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1622813816
    },
    {
        "content": "<p>I lied, it's this one here: <a href=\"https://github.com/hapifhir/org.hl7.fhir.core/pull/528\">https://github.com/hapifhir/org.hl7.fhir.core/pull/528</a></p>",
        "id": 241536616,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1622814294
    },
    {
        "content": "<p>new pr is fixing it</p>",
        "id": 241537213,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1622814577
    },
    {
        "content": "<p>ok</p>",
        "id": 241538393,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1622815035
    },
    {
        "content": "<p>the pr fixed that problem, but there is a test failure</p>",
        "id": 241538564,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1622815106
    },
    {
        "content": "<p>[ERROR]   Run 68: Test dr-example-org: Expected 0 errors, but found 1. expected:&lt;0&gt; but was:&lt;1&gt;</p>",
        "id": 241538566,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1622815107
    },
    {
        "content": "<p>whoops I forgot to commit to test-cases</p>",
        "id": 241540035,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1622815660
    },
    {
        "content": "<p>done</p>",
        "id": 241540141,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1622815690
    },
    {
        "content": "<p>We're getting a FHIRPath test failure now?</p>",
        "id": 241542169,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1622816432
    },
    {
        "content": "<p>[ERROR]   Run 339: FHIRPathTests.test:209 Unexpected exception executing '???'.matches('?+'): Dangling meta character '?' near index 4<br>\n(?s)?+<br>\n    ^ ==&gt; expected: &lt;true&gt; but was: &lt;false&gt;</p>",
        "id": 241542170,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1622816433
    },
    {
        "content": "<p>I'm looking at it</p>",
        "id": 241542726,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1622816662
    },
    {
        "content": "<p>it doesn't fail for me in eclipse</p>",
        "id": 241543822,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1622817104
    },
    {
        "content": "<p>Are there any changes not committed to the test cases library</p>",
        "id": 241544156,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1622817210
    },
    {
        "content": "<p>no. i</p>",
        "id": 241544222,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1622817240
    },
    {
        "content": "<p>You load all three repos as one continuous dependency in Eclipse, so it won't run the same as when the pipeline or I run it. This looks like there might be an uncommitted change somewhere</p>",
        "id": 241544293,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1622817252
    },
    {
        "content": "<p>When you run it on the command line, can you replicate the same fail that the pipeline gets?</p>",
        "id": 241544389,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1622817300
    },
    {
        "content": "<p>or does it pass locally?</p>",
        "id": 241544405,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1622817306
    },
    {
        "content": "<p>it fails the same way in maven.</p>",
        "id": 241544436,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1622817321
    },
    {
        "content": "<p>okay, so, there's a delta somewhere we need to find</p>",
        "id": 241544479,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1622817340
    },
    {
        "content": "<p>did the snapshot for test cases fail to deploy?</p>",
        "id": 241544536,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1622817362
    },
    {
        "content": "<p>looking at that right now</p>",
        "id": 241544599,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1622817372
    },
    {
        "content": "<p>because that's the big difference between running in maven and running in eclipse</p>",
        "id": 241544640,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1622817389
    },
    {
        "content": "<p>and I don't know how to investigate because '338' fails. What test is that? How is anyone supposed to understand maven?</p>",
        "id": 241544920,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1622817496
    },
    {
        "content": "<p>339</p>",
        "id": 241544932,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1622817502
    },
    {
        "content": "<p>Fhir test cases published successfully at 10:09am this morning for me. <a href=\"https://dev.azure.com/fhir-pipelines/fhir-test-cases/_build/results?buildId=3528&amp;view=results\">https://dev.azure.com/fhir-pipelines/fhir-test-cases/_build/results?buildId=3528&amp;view=results</a>. So the test case upload seems to be there.</p>",
        "id": 241545011,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1622817537
    },
    {
        "content": "<p>oh. no. That's a character set issue</p>",
        "id": 241545020,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1622817541
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>    &lt;test name=&quot;testMatchesUnicodeCharacters&quot;&gt;&lt;expression&gt;&#39;ðŸ”¥ðŸ”¥ðŸ”¥&#39;.matches(&#39;ðŸ”¥+&#39;)&lt;/expression&gt;&lt;output type=&quot;boolean&quot;&gt;true&lt;/output&gt;&lt;/test&gt;\n</code></pre></div>",
        "id": 241545075,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1622817573
    },
    {
        "content": "<p>Is this related the the file format changes for the properties files for localization</p>",
        "id": 241545079,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1622817576
    },
    {
        "content": "<p>it runs fine in eclipse, but check the error message:</p>",
        "id": 241545102,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1622817587
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>Unexpected exception executing &#39;???&#39;.matches(&#39;?+&#39;): Dangling meta character &#39;?&#39; near index 4\n(?s)?+\n    ^ ==&gt; expected: &lt;true&gt; but was: &lt;false&gt;\n</code></pre></div>",
        "id": 241545150,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1622817603
    },
    {
        "content": "<p>that's going to be a maven / java / deefault charset issue</p>",
        "id": 241545200,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1622817616
    },
    {
        "content": "<p>and no, not related to them</p>",
        "id": 241545214,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1622817622
    },
    {
        "content": "<p>I say we disable that test for now</p>",
        "id": 241545315,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1622817680
    },
    {
        "content": "<p>Is this a new test case?</p>",
        "id": 241545321,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1622817683
    },
    {
        "content": "<p>I'm fine with that</p>",
        "id": 241545329,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1622817688
    },
    {
        "content": "<p>Are you going to push the PR?</p>",
        "id": 241545351,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1622817699
    },
    {
        "content": "<p>yes <a href=\"https://github.com/FHIR/fhir-test-cases/pull/89\">https://github.com/FHIR/fhir-test-cases/pull/89</a></p>",
        "id": 241545375,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1622817712
    },
    {
        "content": "<p>I'll push it, and we'll come back to it</p>",
        "id": 241545397,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1622817720
    },
    {
        "content": "<p>ok pushed</p>",
        "id": 241545532,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1622817773
    },
    {
        "content": "<p>kk I'll make a coffee and re-run the PR branch for core once the test cases publish</p>",
        "id": 241545543,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1622817780
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"248736\">@Mark Iantorno</span> <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> Just wanted to followup and say that I downloaded the newest version of the validator. The same issue with using r5 for validation occurred initially on my mac (I didn't see this issue on my Windows). I then cleared the package cache on Mac and since then have not had any problems. I've been able to validate my DSTU2 bundles now. Thank you so much for all your help with this!! It is most appreciated.</p>",
        "id": 242042811,
        "sender_full_name": "Abigail Huang",
        "timestamp": 1623233731
    }
]