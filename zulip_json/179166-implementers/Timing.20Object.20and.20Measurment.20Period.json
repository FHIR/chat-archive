[
    {
        "content": "<p>Hi Folks. Iam quite new but also glad to be part of the community here.</p>\n<p>I stumbled upon a requirement for an implementation of <code>scheduledTiming</code> in <code>activity</code> in <code>careplan</code>. The requirment is very basic. The practitioner can determine a Measurement period for a given activity. So far so good.</p>\n<p>My requirement tells me explicitly to give the user possibility to set Measurement Period.</p>\n<p>It would look like this on the screen:<br>\n<a href=\"/user_uploads/10155/8ALXg3RzT7PiBCWZqGZ6YiKj/measurement_period.PNG\">measurement_period.PNG</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/8ALXg3RzT7PiBCWZqGZ6YiKj/measurement_period.PNG\" title=\"measurement_period.PNG\"><img src=\"/user_uploads/10155/8ALXg3RzT7PiBCWZqGZ6YiKj/measurement_period.PNG\"></a></div><hr>\n<p>Now when iam looking at my datamodel <a href=\"http://hl7.org/fhir/datatypes.html#Timing\">here</a>, i can not say<br>\nhow to implement it.</p>\n<p>Let's say the activity is to </p>\n<ul>\n<li>messaure body weight using LOINC</li>\n<li>in the given calendar year from 1.1 to 31.12</li>\n<li>every day execpt sunday</li>\n<li>between 9:00 - 10:00</li>\n</ul>\n<p>my shortened curl looks like this, </p>\n<div class=\"codehilite\"><pre><span></span><code>POST {{url}} HTTP/1.1\nContent-Type: {{content}}\n{\n  &quot;resourceType&quot; : &quot;CarePlan&quot;,\n  &quot;activity&quot; : [\n    {\n      &quot;detail&quot; : {\n        &quot;status&quot; : &quot;not-started&quot;,\n        &quot;doNotPerform&quot; : false,\n        &quot;code&quot;: {\n          &quot;coding&quot; : [\n            {\n              &quot;system&quot;: &quot;http://loinc.org&quot;,\n              &quot;code&quot;: &quot;3141-9&quot;,\n              &quot;display&quot;: &quot;Body weight measure&quot;\n            }\n          ],\n        },\n        &quot;reasonCode&quot; : [//],\n       &quot;scheduledTiming&quot;: {\n          &quot;repeat&quot;: {\n            &quot;boundsPeriod&quot;: {\n              &quot;start&quot;: &quot;2021-01-01T00:00:00&quot;,\n              &quot;end&quot;: &quot;2021-12-31T23:59:59&quot;\n            },\n            &quot;frequency&quot; : 3,\n            &quot;period&quot; : 1,\n            &quot;periodUnit&quot; : &quot;d&quot;,\n            &quot;dayOfWeek&quot; : [ &quot;mon&quot;, &quot;tue&quot;, &quot;wed&quot;, &quot;thu&quot;, &quot;fri&quot;, &quot;sat&quot;],\n            &quot;timeOfDay&quot; : [&quot;09:00&quot;],\n            &quot;offset&quot;:60\n          },\n        },\n      }\n    },\n  ]\n}\n</code></pre></div>\n<p>With this i would be able to determine a Measurement period, by taking the <code>timeofDay</code> and calculating with te offset.</p>\n<p>But i am also aware of this would bring me in trouble at later stages.</p>\n<p>Imagine a requirement like this for the messaurement Period:</p>\n<ul>\n<li>every day </li>\n<li>3 times a day</li>\n<li>\n<ol>\n<li>between 10:00-11:00</li>\n</ol>\n</li>\n<li>\n<ol start=\"2\">\n<li>between 12:00-12:30</li>\n</ol>\n</li>\n<li>\n<ol start=\"3\">\n<li>between 15:00:17:00</li>\n</ol>\n</li>\n</ul>\n<p>Since <code>offset</code> is only one field that would need to correspond to the elements in the <code>timeOfDay</code> array, it would be impossible to narrow it down using <code>offset</code>.</p>\n<p>i -kinda naivly -thought another way. Simple using the <code>timeOfDay</code> as array and fixate that every uneven element determines start and every even element determines end of Measurement period, consider:</p>\n<p>\"timeOfDay\" : [\"10:00\", \"11:00\", \"12:00\", \"12:30\", \"15:00\", \"17:00\"], but this would lead to a lot of codesmell. i would be enforced to derive businesslogic from the number of given elements.</p>\n<p>ideally i want something like :<br>\n<code>\"timeOfDay\" : [[\"10:00\", \"11:00\"], [\"12:00\", \"12:30\"], [\"15:00\", \"17:00\"]]</code> or<br>\n<code>\"timeOfDay\" : [{ from: \"10:00\", to: \"11:00\"}]</code></p>\n<p>very curios about your answers. </p>\n<p>sorry for the long writeup :-)<br>\n :vulcan:</p>",
        "id": 245174142,
        "sender_full_name": "jan paul",
        "timestamp": 1625662430
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span></p>",
        "id": 245205652,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1625674697
    },
    {
        "content": "<p>i decided to implement in a different way to overcome my troubles here. Each repeition of an activity will be it's own activity. </p>\n<p>consider : <a href=\"/user_uploads/10155/BNJFQqInH80bJWRJ7gKelBDQ/multiple_row_activity.PNG\">multiple_row_activity.PNG</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/BNJFQqInH80bJWRJ7gKelBDQ/multiple_row_activity.PNG\" title=\"multiple_row_activity.PNG\"><img src=\"/user_uploads/10155/BNJFQqInH80bJWRJ7gKelBDQ/multiple_row_activity.PNG\"></a></div><p>in each row which is <code>careplan.activity</code> i will set a timing object with <code>duration</code> attribute and will only apply one element into <code>timesOfDay</code></p>\n<p>ty for reading and rubberducking. I find this solution viable for my requirement and want to move on. ch33rs</p>",
        "id": 245299699,
        "sender_full_name": "jan paul",
        "timestamp": 1625743449
    },
    {
        "content": "<p>FYi. uysing <code>offset</code> like i did is wrong, since <code>offset</code> need to go with <code>when</code>. And since there is the rule either <code>timeOfDay</code> OR <code>when</code>, using <code>offset</code> here is wrong. I changed it to use with <code>duration</code>. But iam still thinkg about using simply <code>timeOfDay</code> as array where each uneven is a start and each even number in the list is the endTime. like <code>timeOfDay: [\"7:00\", \"10:00\"]</code></p>",
        "id": 245650387,
        "sender_full_name": "jan paul",
        "timestamp": 1626072362
    }
]