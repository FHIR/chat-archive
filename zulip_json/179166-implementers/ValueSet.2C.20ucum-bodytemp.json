[
    {
        "content": "<p>Hi,<br>\nI am trying to create a profile with a value set reference. I am experiencing some issues with the validation of a code attribute. This is the error messeage I get: \"The value provided (\\\"Cel\\\") is not in the value set <a href=\"http://hl7.org/fhir/ValueSet/ucum-bodytemp|4.0.0\">http://hl7.org/fhir/ValueSet/ucum-bodytemp|4.0.0</a> (<a href=\"http://hl7.org/fhir/ValueSet/ucum-bodytemp\">http://hl7.org/fhir/ValueSet/ucum-bodytemp</a>), and a code is required from this value set) (error message = Validation failed)\"</p>\n<p>In my request I have added \"Cel\" as the code and while looking att the value set I am using (<a href=\"http://hl7.org/fhir/ValueSet/ucum-bodytemp|4.0.0\">http://hl7.org/fhir/ValueSet/ucum-bodytemp|4.0.0</a>) it seems that \"Cel\" should be an ok value to send.</p>\n<p>Does anyone know what the issue might be?</p>",
        "id": 202422523,
        "sender_full_name": "Isak Siverland",
        "timestamp": 1593516561
    },
    {
        "content": "<p>Can you include the instance that's got the issue?  Did you declare the code system?</p>",
        "id": 202440255,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1593526130
    },
    {
        "content": "<p>This is what I included:</p>\n<div class=\"codehilite\"><pre><span></span><code>     {\n        &quot;resourceType&quot;: &quot;Observation&quot;,\n        &quot;meta&quot;: {\n            &quot;profile&quot;: [\n                &quot;https://fhir.cambio.se/StructureDefinition/ObservationBodyTemperaturePrehospital/v1&quot;\n            ],\n            &quot;versionId&quot;: &quot;1234&quot;\n        },\n        &quot;id&quot;: &quot;body-temperature-observation&quot;,\n        &quot;status&quot;: &quot;final&quot;,\n        &quot;category&quot;: [\n            {\n                &quot;coding&quot;: [\n                    {\n                        &quot;system&quot;: &quot;http://terminology.hl7.org/CodeSystem/observation-category&quot;,\n                        &quot;code&quot;: &quot;vital-signs&quot;\n                    }\n                ]\n            }\n        ],\n        &quot;code&quot;: {\n            &quot;coding&quot;: [\n                {\n                    &quot;system&quot;: &quot;http://loinc.org&quot;,\n                    &quot;code&quot;: &quot;8310-5&quot;\n                },\n                {\n                    &quot;system&quot;: &quot;http://snomed.info/sct&quot;,\n                    &quot;code&quot;: &quot;276885007&quot;\n                }\n            ]\n        },\n        &quot;subject&quot;: {\n            &quot;identifier&quot;: {\n                &quot;use&quot;: &quot;official&quot;,\n                &quot;value&quot;: &quot;19930514-2383&quot;,\n                &quot;system&quot;: &quot;urn:oid:1.2.752.129.2.1.3.1&quot;\n            }\n        },\n        &quot;effectiveDateTime&quot;: &quot;2020-06-30T09:50:55.300Z&quot;,\n        &quot;valueQuantity&quot;: {\n            &quot;value&quot;: &quot;36.0&quot;,\n            &quot;unit&quot;: &quot;Cel&quot;,\n            &quot;system&quot;: &quot;http://unitsofmeasure.org&quot;,\n            &quot;code&quot;: &quot;Cel&quot;\n        }\n    }\n</code></pre></div>\n\n\n<p>And to answer the second question, I do include the fixed system value (<a href=\"http://unitsofmeasure.org\">http://unitsofmeasure.org</a>)</p>",
        "id": 202467160,
        "sender_full_name": "Isak Siverland",
        "timestamp": 1593537299
    },
    {
        "content": "<p>That looks right.  How are you validating?</p>",
        "id": 202473721,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1593540476
    },
    {
        "content": "<p>I validate with the built in validator in HAPI FHIR.</p>",
        "id": 202546865,
        "sender_full_name": "Isak Siverland",
        "timestamp": 1593595023
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> <span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> -thoughts on how to further diagnose?</p>",
        "id": 202577625,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1593614889
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"316974\">@Isak Siverland</span> Support for UCUM has a few bugs in the current release (5.0.0) that have been fixed in the latest snapshot builds. Can you try this against our public <a href=\"http://hapi.fhir.org\">hapi.fhir.org</a> server and see if you see the same issue?</p>",
        "id": 202669114,
        "sender_full_name": "James Agnew",
        "timestamp": 1593684032
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> It seems to be as you say that these bugs causes issues for us. I believe we have found a workaround for this. Thank you for the help.</p>",
        "id": 202782553,
        "sender_full_name": "Isak Siverland",
        "timestamp": 1593767302
    },
    {
        "content": "<p>I've been continuing to investigate this issue and realised that I was wrong in saying that I only experience these issue while using release 5.0.0 as I've noticed that the issues remain while trying to use the 4.0.0 release. Is it possible that the bugs can occur in that release as well or do you think i experience these issues due to any other reason?</p>",
        "id": 202986119,
        "sender_full_name": "Isak Siverland",
        "timestamp": 1594041010
    },
    {
        "content": "<p>The UCUM fixes occurred post-5.0.0 - You'd have to use current 5.1.0-SNAPSHOT builds unfortunately. We'll be releasing 5.1.0 in August</p>",
        "id": 203018381,
        "sender_full_name": "James Agnew",
        "timestamp": 1594056868
    }
]