[
    {
        "content": "<p>Hi,<br>\nI want to save few FHIR resource objects reference in Composition Section entries.<br>\nI want to save entry with version also?<br>\nIs there any way to that?</p>",
        "id": 153911462,
        "sender_full_name": "Karimulla",
        "timestamp": 1506680887
    },
    {
        "content": "<p>I'm not totally clear on your question.  Can you give an example of what you're trying to do?</p>",
        "id": 153911483,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1506697805
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> Sorry For Late reply.<br>\nI need to Composition Resource object need to save entries with Observations.<br>\nBasically Entry supports reference id of Resource object. But I need to keep version of Resource object.<br>\nExample:<br>\nEntry [Observation/1234,Observation/1235,Observation/1236]<br>\nI want to keep version of Observation resource objectEntry [Observation/1234/_history/1,Observation/1235_history/3,Observation/1236/_history/6]</p>",
        "id": 153912042,
        "sender_full_name": "Karimulla",
        "timestamp": 1507030888
    },
    {
        "content": "<p>that would be in resource.meta.version, no?</p>",
        "id": 153912046,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1507031345
    },
    {
        "content": "<p>Can we store version info in Reference?</p>",
        "id": 153912239,
        "sender_full_name": "Karimulla",
        "timestamp": 1507113019
    },
    {
        "content": "<p>The URL of your reference can be version-specific.</p>",
        "id": 153912264,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1507124926
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> , since version numbering is server implementation specific, is there a way you can post a transaction bundle with several new resources that reference each other in a version specific manner?</p>",
        "id": 153912377,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1507146474
    },
    {
        "content": "<p>Within the Bundle, you indicate the versions in the URL and in resource.meta.  Doing this only really makes sense in a query response though.  It wouldn't accomplish much in a batch or transaction Bundle.</p>",
        "id": 153912382,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1507146806
    },
    {
        "content": "<p>Well, lets say I'm creating two resources in one post transaction. I want one to point to the specific, just created, version of the other. I don't care what  the ids of the newly created resources are. New resource would get an UUID url in the bundle, but I can't use {UUID}/1 to refer to the just created version. (Can't use because (1) I don't think that's valid syntax, and (2) we don't know that the server is going to use 1 for the first version.)</p>",
        "id": 153912406,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1507149389
    },
    {
        "content": "<p>you just refer to the resources by their local id in the bundle - that is version specific. It doesn't matter what the server will assign to them</p>",
        "id": 153912408,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1507149807
    },
    {
        "content": "<p>I'm missing something. What does a version specific reference to a new resource look like in a bundle? How does it differ from a version independent reference?</p>",
        "id": 153912411,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1507150138
    },
    {
        "content": "<p><code>[baseurl]/Condition/[id]/_version/[version]</code> as opposed to <code>[baseurl]/Condition/[id]</code></p>",
        "id": 153912413,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1507151381
    },
    {
        "content": "<p>so in MHD we use a CREATE Transaction of a Bundle (DocumentManifest that points at one or more DocumentReference which point at zero or more List, and where DocumentReference(s) point at equal Binary). Where all are to be created new. And All references would be to the non-version specific identity...   Is this working as explained? Or are these version-specific? Is there a way to have a transaction that does do this version specific or not-version specific?</p>",
        "id": 153912414,
        "sender_full_name": "John Moehrke",
        "timestamp": 1507151400
    },
    {
        "content": "<p>I think that's the bit that's missing; all references within a transaction bundle are version specific, but there's no language to tell a server whether to make them version specific when processing the transaction or not</p>",
        "id": 153912421,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1507152197
    },
    {
        "content": "<p>partly that is because servers get to decide for themselves whether things are or aren't version specific - consistent with that, then, I would expect this to be resolved out of band - e.g. in an IHE profile</p>",
        "id": 153912422,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1507152248
    },
    {
        "content": "<p>Right. so this should be made more clear... And thus if someone wants the non-supported behavior they need to go to multiple transactions.. right? Or do you see a way to have bundle specific behavior, or even reference specific?</p>",
        "id": 153912425,
        "sender_full_name": "John Moehrke",
        "timestamp": 1507152621
    },
    {
        "content": "<p>well, there's always extensions.</p>",
        "id": 153912446,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1507152956
    },
    {
        "content": "<p>but IHE should be ok with just fixing it in the profile?</p>",
        "id": 153912449,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1507152976
    },
    {
        "content": "<p>so, within IHE we are okay defining that it is to be not version specific. I think that is what we want in MHD... should be fun discusion</p>",
        "id": 153912457,
        "sender_full_name": "John Moehrke",
        "timestamp": 1507153107
    },
    {
        "content": "<p>binary references can always be non-version specific. When would you want version specific references?</p>",
        "id": 153912476,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1507153723
    },
    {
        "content": "<p>but this does make me realise that I should disable updates for binary resources... maybe</p>",
        "id": 153912477,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1507153738
    },
    {
        "content": "<blockquote>\n<p>all references within a transaction bundle are version specific</p>\n</blockquote>\n<p>Where is that documented?<br>\nI found (<a href=\"http://build.fhir.org/http.html#transaction\" target=\"_blank\" title=\"http://build.fhir.org/http.html#transaction\">http://build.fhir.org/http.html#transaction</a>)</p>\n<blockquote>\n<p>Version-specific references should remain as version-specific references after the references have been updated. </p>\n</blockquote>\n<p>But I'm not sure what a version specific-reference to a new resource would look like before the update.</p>",
        "id": 153912491,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1507155317
    },
    {
        "content": "<p>I don't know</p>",
        "id": 153912510,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1507155913
    },
    {
        "content": "<p>This is actually wider than I thought -- it doesn't just apply to references to new resource, it could also apply to a bundle containing a resource with reference to another resource being updated in the transaction.</p>",
        "id": 153912512,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1507156159
    },
    {
        "content": "<p>that's where we know the answer about the difference in the references</p>",
        "id": 153912513,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1507156401
    },
    {
        "content": "<p><a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=14005\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=14005\">GF#14005</a>.</p>",
        "id": 153912516,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1507158247
    },
    {
        "content": "<p>This seems only needing clarity when the reference is to another resource being created in the same bundle. right?</p>",
        "id": 153912517,
        "sender_full_name": "John Moehrke",
        "timestamp": 1507158370
    },
    {
        "content": "<p>Is there another case? I think the issue is when we don't know the id and/or version id of the object being created/updated. If it wasn't in the same bundle, we'd know it.</p>",
        "id": 153912518,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1507158456
    }
]