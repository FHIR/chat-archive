[
    {
        "content": "<p>This is the <a href=\"http://wiki.hl7.org/index.php?title=201701_Resource_Subscription_Track\" target=\"_blank\" title=\"http://wiki.hl7.org/index.php?title=201701_Resource_Subscription_Track\">January 2017 Connectathon Resource Subscription Track</a> stream for discussion.</p>",
        "id": 153854608,
        "sender_full_name": "Corey Spears",
        "timestamp": 1477671756
    },
    {
        "content": "<p>We are looking for additional potential participants for this track. We have a couple of  candidates, but more are certainly encouraged. All suggestions to enhance and improving the track are welcome!</p>",
        "id": 153854609,
        "sender_full_name": "Corey Spears",
        "timestamp": 1477672671
    },
    {
        "content": "<p>sign me up - my server should support the full functionality </p>",
        "id": 153854627,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1477687283
    },
    {
        "content": "<p>Great to hear. I have you listed as a participant.</p>",
        "id": 153855443,
        "sender_full_name": "Corey Spears",
        "timestamp": 1478231134
    },
    {
        "content": "<p>BTW, The scope of the track has increased a little bit to include not only the Subscription resource as a mechanism to get updates, but also the history interaction using polling. This experience will hopefully inform us in a way that we may be able to introduce some guidance on the two methods and what to consider when choosing between the two.</p>",
        "id": 153855444,
        "sender_full_name": "Corey Spears",
        "timestamp": 1478231241
    },
    {
        "content": "<p>I might be available to work on this.  The Meteor on FHIR stack has a rock-solid pub/sub architecture, which we've been running FHIR resources on for the past year to our client webapps.  There's a <code>Collection.observeChanges()</code> function that can be used to trigger external REST calls for push notifications.  And I've got funding to work on FHIR this upcoming quarter, and will be in the Healthcare Interoperability class in grad program next quarter.  So... time, funding, knowledge, technology stack....  </p>",
        "id": 153862583,
        "sender_full_name": "Abbie Watson",
        "timestamp": 1481250055
    },
    {
        "content": "<p>Hi Corey / everyone.  Bill Harty from Premier Inc here.  I'm sending some people down to participate in the CDS-Hooks track, but I also have an interest in the subscription resource and might come down myself (if I can get approval).  This is pretty much last minute, so I could probably only jump in as a simple client and help test.  However, I'm wondering about the overall participation.  I see that Grahame's server will be available - do you know if anyone else on the server side will be participating?  like HSPC?  HAPI?    The server tabs on the spreadsheets are empty - just want to make sure that there is decent participation to make the trip worthwhile.  Thanks for any info/feedback</p>",
        "id": 153865009,
        "sender_full_name": "Bill Harty",
        "timestamp": 1482953027
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"192646\">@Bill Harty</span> - HAPI will definitely be participating in this track.</p>",
        "id": 153865023,
        "sender_full_name": "James Agnew",
        "timestamp": 1482967053
    },
    {
        "content": "<p>Yes, both Grahame's and HAPI's server will be there supporting this. I think HAPI only supports the web socket channel. Grahame's server supports an additional number of others. We have reached out the HSPC about participation, but I have not heard anything. We have a number of people interested in playing the client as well. Note that there are two parts to this track. There is the subscription Resource and the history polling method. Hope to see you there.</p>",
        "id": 153865227,
        "sender_full_name": "Corey Spears",
        "timestamp": 1483405367
    },
    {
        "content": "<p>I'm planning to be there playing the client role for this track. Managed to miss the deadline on registration (I'm tacking this on to adjoining meetings in SA), so I guess I'll be registering onsite Saturday morning. We've been spiking out a Subscription implementation and have run into some challenges coordinating the pub/sub architecture with servers implemented on legacy datastores, so looking forward to testing and discussion.</p>",
        "id": 153865279,
        "sender_full_name": "John Calvin Young",
        "timestamp": 1483462276
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span>  As a Part of this Track I am working on enriching the returned Resources, so they can be translated into V2 messages. Do you plan to implement the _include interaction for the Connectathon?</p>",
        "id": 153865285,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1483469151
    },
    {
        "content": "<p>Looking forward to seeing you there John.</p>",
        "id": 153865905,
        "sender_full_name": "Corey Spears",
        "timestamp": 1483722151
    },
    {
        "content": "<p>Hi all, looks like I will not be able to attend this time around.  However, I'd love to contribute/participate in any future work/sprints/connectathons relating to the Subscription resource so definitely let me know.  Thanks</p>",
        "id": 153866304,
        "sender_full_name": "Bill Harty",
        "timestamp": 1484060468
    },
    {
        "content": "<p>Websocket URLs for the HAPI server:<br>\n<a href=\"http://fhirtest.uhn.ca/websocket/dstu2\" target=\"_blank\" title=\"http://fhirtest.uhn.ca/websocket/dstu2\">http://fhirtest.uhn.ca/websocket/dstu2</a><br>\n<a href=\"http://fhirtest.uhn.ca/websocket/dstu3\" target=\"_blank\" title=\"http://fhirtest.uhn.ca/websocket/dstu3\">http://fhirtest.uhn.ca/websocket/dstu3</a></p>",
        "id": 153866662,
        "sender_full_name": "James Agnew",
        "timestamp": 1484410581
    },
    {
        "content": "<p>ok, found a problem in the spec: it's inconsistent about the value of Subscription.criteria</p>",
        "id": 153867151,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484443304
    },
    {
        "content": "<p>all the examples have <br>\n\"criteria\" : \"{resource}?{params}\"</p>",
        "id": 153867152,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484443329
    },
    {
        "content": "<p>but the narrative has </p>",
        "id": 153867153,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484443333
    },
    {
        "content": "<p>\"criteria\" : \"/{resource}?{params}\"</p>",
        "id": 153867154,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484443348
    },
    {
        "content": "<p>the first is correct, and my server now enforces that. </p>",
        "id": 153867155,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484443676
    },
    {
        "content": "<p>spec will be updated accordingly. </p>",
        "id": 153867156,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484443685
    },
    {
        "content": "<p>question: should I implement 'twitter' as an extension for Subscription.channel.type?</p>",
        "id": 153867157,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484443760
    },
    {
        "content": "<p>Do we have a quarter with FHIR-I to discuss the issues we encountered  with subscripion during the connectathon?</p>",
        "id": 153867161,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1484447794
    },
    {
        "content": "<p>what issues did we discover?</p>",
        "id": 153867162,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484449820
    },
    {
        "content": "<p>We were thinking about whether it makes sense to be able do differentiate between trigger and expected payload in the rest hook.<br>\nWith the WEB hook, there's the question of what subsequent query needs to be run to discover deleted resources.<br>\nAnd I think there's been a few more minor questions discussed at the table. Will sum it up later today.</p>",
        "id": 153867169,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1484475521
    },
    {
        "content": "<p>...and yes. I have a jet lag :D</p>",
        "id": 153867170,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1484475557
    },
    {
        "content": "<p>payload? is this veering into cds-hooks area?</p>",
        "id": 153867172,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484478280
    },
    {
        "content": "<p>deleted resources are a problem...</p>",
        "id": 153867173,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484478294
    },
    {
        "content": "<p>We were talking about allowing _include to define what additional information the client needs, e.g. Subscribe to changes for Observation but if triggered, return the Order along with it...</p>\n<p>Also we had a discussion on how to subscribe to changes of a CarePlan, and receive a notification if any of the resources referenced by this CarePlan changes. Specifically: Would a subscription like /CarePlan?_include=CarePlan:*&amp;... be allowed and would it be triggered on changes of any of the included resource or only on the focal resource?<br>\nIn the first case, the include would determine the content of the dataset posted to the rest hook, in the second case it would include additional resources to the subscription.</p>",
        "id": 153867182,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1484491282
    },
    {
        "content": "<p>Also: Bilateral synchronizytion - how to prevent echos (Provenance...?)</p>",
        "id": 153867306,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1484497842
    },
    {
        "content": "<p>Just adding for completeness: should Subscription Rest hook point at Endpoint resource?</p>",
        "id": 153867317,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1484498263
    },
    {
        "content": "<p>all of the servers treat includes the same: they are not part of the search set, they are thrown in as you send the content. In fact, that's inevitable given how they work. So we could not trigger based on _include. </p>",
        "id": 153867347,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484499911
    },
    {
        "content": "<p>I'm not sure how far that packaging desire would go....</p>",
        "id": 153867348,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484499944
    },
    {
        "content": "<p>don't follow the bilateral issue</p>",
        "id": 153867349,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484499960
    },
    {
        "content": "<p>and... why EndPoint?</p>",
        "id": 153867350,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484499968
    },
    {
        "content": "<p>because <span class=\"user-mention\" data-user-id=\"191367\">@Brian Postlethwaite</span> brought it up :)</p>",
        "id": 153867356,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1484500072
    },
    {
        "content": "<p>quelle surprise. We've not seen the benefit of the extra stuff it has, and it would only work for rest hook, so it wouldn't remove anything</p>",
        "id": 153867357,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484500167
    },
    {
        "content": "<p>About bilateral synchronization: if server A subscribes to changes on Observations on server B but also adds Observations to Server B, these changes (echos) need to be excluded. I think this is technically possible with something like .../Observation?_has=Provenance:target:author and somehow a negation mixed in...</p>",
        "id": 153867359,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1484500444
    },
    {
        "content": "<p>it should be the business of server A to figure out it's echos, surely</p>",
        "id": 153867361,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484500563
    },
    {
        "content": "<p>Agree with the echos, should be able to know that it was your content...</p>",
        "id": 153867403,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1484502996
    },
    {
        "content": "<p>The other Item that isn't published as changes over the subscritption is the Meta operation changes.</p>",
        "id": 153867458,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1484504479
    },
    {
        "content": "<p>yes. that's deliberate</p>",
        "id": 153867460,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484504549
    },
    {
        "content": "<p>Adding/removing security tags or confidentiality was the issue I potentially had (even though should have that correct when you first create them)</p>",
        "id": 153867463,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1484504644
    },
    {
        "content": "<p>so you can just edit the resource. The server allowing the $meta result is specifically special </p>",
        "id": 153867468,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484504731
    },
    {
        "content": "<p>The FHIR Connectathon 14 Resource Subscription Track Report has been uploaded and can be found here: <a href=\"http://wiki.hl7.org/images/4/43/201701_FHIRConnecathon-ResourceSubscription_Report.pptx\" target=\"_blank\" title=\"http://wiki.hl7.org/images/4/43/201701_FHIRConnecathon-ResourceSubscription_Report.pptx\">http://wiki.hl7.org/images/4/43/201701_FHIRConnecathon-ResourceSubscription_Report.pptx</a> </p>",
        "id": 153867479,
        "sender_full_name": "Corey Spears",
        "timestamp": 1484509526
    },
    {
        "content": "<p>This is a good conversation. Please continue. There were a number of things that were brought up during the course of our testing that may or may not be a good idea (e.g. there may have been deliberate reasons why something was not included or there may a better way to address the need). I will work on pulling the use cases and reasoning together (in part garnered from this stream) to help further the discussion. <span class=\"user-mention\" data-user-id=\"192776\">@John Calvin Young</span>  has already provided a good start with one of the requests.</p>",
        "id": 153867480,
        "sender_full_name": "Corey Spears",
        "timestamp": 1484510064
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191450\">@Simone Heckmann</span> I've been worried about bilateral synchronization too. Will be interested to see what others come up with--no brilliant ideas on my part either today.</p>",
        "id": 153867483,
        "sender_full_name": "John Calvin Young",
        "timestamp": 1484514203
    },
    {
        "content": "<p>The reason why I initially preferred the history interaction over the subscription was robustness: With the subscription, there's no way we can make sure, that we didn't miss a ping or a post due to network issues. I think it was stated at some time, that the server is not expected to queue the subscription results. Is that true for the rest hook as well? </p>",
        "id": 153867485,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1484515119
    },
    {
        "content": "<p>yes</p>",
        "id": 153867487,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484515958
    },
    {
        "content": "<p>at least for now </p>",
        "id": 153867488,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484515964
    },
    {
        "content": "<p>one of the things in Corey's summary was about filtered history. We deliberately do not support that because of the things falling out of the history when values change</p>",
        "id": 153867489,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484515997
    },
    {
        "content": "<p>so you can only filter on immutable things</p>",
        "id": 153867490,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484516009
    },
    {
        "content": "<p>So, at this point, the only *reliable* way to sync is: get the \"history of everything\" (~~Our whole universe was in a hot dense state.... ~~ ) and then post-process on the client side.</p>",
        "id": 153867495,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1484519091
    },
    {
        "content": "<p>yes, get teh whole history for a type</p>",
        "id": 153867497,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484520038
    },
    {
        "content": "<p>typs is immutable and cannot change</p>",
        "id": 153867498,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484520052
    },
    {
        "content": "<p>Hi,<br>\nI am looking for Subscription resource we are looking for Rest-hook option..<br>\nAlso I created Subscription resource on HAPI FHIR server with specified criteria after that I created the resource with subscription criteria details but not received any notification is there any configuration required do on FHIR server for notification part.<br>\nOn HAPI server how I can register for Rest-hook option..<br>\nAlso I am working on .net code.<br>\nhelp is greatly appreciated...</p>",
        "id": 153926640,
        "sender_full_name": "shivnath shelake",
        "timestamp": 1513849710
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> ?</p>",
        "id": 153926668,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1513872081
    },
    {
        "content": "<p>Please see <a href=\"https://groups.google.com/d/msgid/hapi-fhir/eccef130-5592-4352-894d-d7f7107c8373%40googlegroups.com?utm_medium=email&amp;utm_source=footer\" target=\"_blank\" title=\"https://groups.google.com/d/msgid/hapi-fhir/eccef130-5592-4352-894d-d7f7107c8373%40googlegroups.com?utm_medium=email&amp;utm_source=footer\">https://groups.google.com/d/msgid/hapi-fhir/eccef130-5592-4352-894d-d7f7107c8373%40googlegroups.com?utm_medium=email&amp;utm_source=footer</a></p>",
        "id": 153926672,
        "sender_full_name": "James Agnew",
        "timestamp": 1513873144
    }
]