[
    {
        "content": "<p>I want to raise again the question about extensions representation (at least in JSON).  <br>\nIt is really convenient to represent extensions in JSON as object not array:</p>\n<ul>\n<li>Semantically extensions more key-value (dictionary, hash-map), then list - we want to access race like gender</li>\n<li>Easy to write profile's restrictions</li>\n<li>From UI perspective (binding attributes/elements to widgets) - no conversions from list to object and back</li>\n<li>From databases perspectives (access specific extensions by key, not by filter): resource.extension.race vs resource.extensions.filter(url: 'race')</li>\n</ul>\n<p>Examples:</p>\n<div class=\"codehilite\"><pre>[\n{&quot;url&quot;:&quot;http://hl7.org/fhir/ValueSet/v3-LivingArrangement&quot;,&quot;valueCodeableConcept&quot;:{....}},\n{&quot;url&quot;:&quot;http://hl7.org/fhir/StructureDefinition/us-core-race&quot;,&quot;valueCodeableConcept&quot;:{...},\n{&quot;url&quot;:&quot;http://hl7.org/fhir/StructureDefinition/us-core-ethnicity&quot;,&quot;valueCodeableConcept&quot;:{...}},{&quot;url&quot;:&quot;http://hl7.org/fhir/v3/EducationLevel&quot;,&quot;valueCodeableConcept&quot;:{...}},\n{&quot;url&quot;:&quot;http://hl7.org/fhir/StructureDefinition/patient-adoptionInfo&quot;,&quot;valueString&quot;:&quot;no&quot;},\n{&quot;url&quot;:&quot;http://narus.com/when-adopted&quot;,&quot;valueDate&quot;:&quot;2010-09-03&quot;},\n{&quot;url&quot;:&quot;http://hl7.org/fhir/ValueSet/anzsco-occupations&quot;,&quot;valueString&quot;:&quot;Telecommunications Engineer&quot;},\n{&quot;url&quot;:&quot;http://narus.com/fhir/date-married&quot;,&quot;valueDate&quot;:&quot;1988-12-23&quot;},\n{&quot;url&quot;:&quot;http://narus.com/fhir/supportive-employer&quot;,&quot;valueString&quot;:&quot;true&quot;}\n]\n</pre></div>\n\n\n<p>vs </p>\n<div class=\"codehilite\"><pre>{                                                                                                                                               \n  &quot;http://hl7.org/fhir/ValueSet/v3-LivingArrangement&quot;:  { valueCodeableConcept&quot;:{ ... }},                                                       \n  &quot;http://hl7.org/fhir/StructureDefinition/us-core-race&quot;: { valueCdeableConcept:  { ... }},                                                     \n  &quot;http://hl7.org/fhir/StructureDefinition/patient-adoptionInfo&quot;: {&quot;valueString&quot;:&quot;no&quot;},                                                         \n  &quot;http://narus.com/when-adopted&quot;: {&quot;valueDate&quot;:&quot;2010-09-03&quot;},                                                                                  \n  &quot;http://hl7.org/fhir/ValueSet/anzsco-occupations&quot;: {&quot;valueString&quot;:&quot;Telecommunications Engineer&quot;},                                             \n  &quot;http://narus.com/fhir/date-married&quot;: {&quot;valueDate&quot;:&quot;1988-12-23&quot;},                                                                             \n  &quot;http://narus.com/fhir/supportive-employer&quot;: {&quot;valueBoolean&quot;: true}                                                                           \n}                                                                                                                                               \n</pre></div>\n\n\n<p>Or with separation of schema and data:                                                                                                                                 </p>\n<div class=\"codehilite\"><pre>{                                                                                                                                               \n  $schema: {                                                                                                                                   \n    livingArrangement: {url: &quot;http://hl7.org/fhir/ValueSet/v3-LivingArrangement&quot;, type: &#39;CodeableConcept&#39;}                                      \n    race: {url: &quot;http://hl7.org/fhir/StructureDefinition/us-core-race&quot;, type: &#39;CodeableConcept&#39;},                                               \n    adoption: {url:&quot;http://hl7.org/fhir/StructureDefinition/patient-adoptionInfo&quot;, type:  &#39;string&#39;},                                            \n    whenAdopted: {url:&quot;http://narus.com/when-adopted&quot;, type: &#39;date&#39;},                                                                           \n    occupation: {url:&quot;http://hl7.org/fhir/ValueSet/anzsco-occupations&quot;, type: &#39;string&#39;}                                                         \n    marriedDate: {url:&quot;http://narus.com/fhir/date-married&quot;, type: &#39;date&#39;},                                                                      \n    employer: {url:&quot;http://narus.com/fhir/supportive-employer&quot;, type: &#39;boolean&#39;}                                                                \n  },                                                                                                                                            \n\n  livingArrangement: {coding: ...},                                                                                                             \n  race: {coding: ....},                                                                                                                         \n  adoption: &quot;no&quot;,                                                                                                                               \n  whenAdopted: &quot;1980&quot;                                                                                                                           \n  occupation: &quot;Telecommunications Engineer&quot;,                                                                                                    \n  marriedDate: &quot;2001&quot;                                                                                                                           \n  employer:  true                                                                                                                               \n}                                                                                                                                               \n</pre></div>",
        "id": 153852678,
        "sender_full_name": "nicola (RIO/SS)",
        "timestamp": 1476264639
    },
    {
        "content": "<p>Nicola, I very much like the latter, separated. representation.  </p>",
        "id": 153852694,
        "sender_full_name": "Clark C. Evans",
        "timestamp": 1476276449
    },
    {
        "content": "<p>we balloted a variation on the 2nd for DSTU2. It was soundly defeated at ballot. </p>",
        "id": 153852714,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1476301138
    },
    {
        "content": "<p>Not a dictionary either, as keys can be duplicated, and also need to extend extensions.</p>",
        "id": 153852738,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1476308524
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191367\">@Brian Postlethwaite</span> In 80% of cases it is key/values, in case of collections it could be done like:</p>\n<div class=\"codehilite\"><pre><span></span>extension: {\n    someExt: [ &#39;value&#39;,  &#39;value&#39;]\n}\n</pre></div>\n\n\n<p>Nested extensions are good example how bad current representation is  :) I would like to see something like:</p>\n<div class=\"codehilite\"><pre><span></span>extension: {\n     complexExtension: {\n          key1: &#39;...&#39;,\n          key2:  {\n              subkey: &#39;....&#39;\n         }\n     }\n}\n</pre></div>\n\n\n<p>And the question is only how to represent schema for this situation.</p>",
        "id": 153852768,
        "sender_full_name": "nicola (RIO/SS)",
        "timestamp": 1476348574
    },
    {
        "content": "<p>Remember when we used to have:</p>\n<div class=\"codehilite\"><pre>{\n  &quot;resourceType&quot;: &quot;Patient&quot;,\n  &quot;id&quot;: &quot;123&quot;,\n  &quot;http://mydomain/some-extension&quot;: [{\n       :-)\n  }]\n}\n</pre></div>\n\n\n<p>I think I'm the only person who liked it ;-)</p>",
        "id": 153852822,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1476408538
    },
    {
        "content": "<p>you weren't the only one, but it was surprisingly less popular than I expected</p>",
        "id": 153852852,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1476472306
    },
    {
        "content": "<p>None of the code generators would have ever liked that property name ;)</p>",
        "id": 153852896,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1476494435
    }
]