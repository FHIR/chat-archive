[
    {
        "content": "<p>One scenario that is really needed in our system is to \"request all patients who have at least one QuestionnaireResponse.item.answer = 'MyAnswer' AND the corresponding question (i.e., Questionnaire.item.text) = 'TheQuestionText'\".</p>\n<p>Is the following query correct?</p>\n<p>Patients?_has:QuestionnaireResponse:patient:item.answer=MyAnswer&amp;questionnaire.item.text=TheQuestionText</p>",
        "id": 269390848,
        "sender_full_name": "Mohsen Jafari",
        "timestamp": 1643194137
    },
    {
        "content": "<p>the &amp; denotes a new parameter, not nested within _has, but at the topmost parameter level (i.e. the first parameter is _has, the second is questionnaire.item.text). It's probably best to test your queries against a FHIR test server, and look at the 'self' link in the response. That'll quickly give you an idea if some query string will work or not..</p>",
        "id": 269391375,
        "sender_full_name": "René Spronk",
        "timestamp": 1643194418
    },
    {
        "content": "<p>The search (not query) syntax was defined to easily cover the common/easy use cases. For more complex stuff you may need a stored query on the server, invoked by means of _query, or an entire different means of querying (e.g. GraphQL, should your server support this).</p>",
        "id": 269391561,
        "sender_full_name": "René Spronk",
        "timestamp": 1643194532
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191372\">René Spronk</span> <a href=\"#narrow/stream/179166-implementers/topic/Retrieve.20patients.20with.20their.20questionnaire.20responses/near/269391375\">said</a>:</p>\n<blockquote>\n<p>the &amp; denotes a new parameter, not nested within _has, but at the topmost parameter level (i.e. the first parameter is _has, the second is questionnaire.item.text). It's probably best to test your queries against a FHIR test server, and look at the 'self' link in the response. That'll quickly give you an idea if some query string will work or not..</p>\n</blockquote>\n<p>What is the major role of 'self' link in such situations? I read the Bundle resource but have not yet understood its purpose.</p>",
        "id": 269401557,
        "sender_full_name": "Mohsen Jafari",
        "timestamp": 1643199532
    },
    {
        "content": "<p>It servers multiple purposes, but it contains 'the search query as executed by the server', as opposed to 'the search query as sent to the server'. As such it's very useful for debugging purposes.</p>",
        "id": 269406593,
        "sender_full_name": "René Spronk",
        "timestamp": 1643202246
    },
    {
        "content": "<p>E.g. if one has a typo in the query, or uses functionality that's not supported by the server, the 'self' link will help you detect such issues.</p>",
        "id": 269406734,
        "sender_full_name": "René Spronk",
        "timestamp": 1643202326
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191372\">René Spronk</span> <a href=\"#narrow/stream/179166-implementers/topic/Retrieve.20patients.20with.20their.20questionnaire.20responses/near/269406593\">said</a>:</p>\n<blockquote>\n<p>It servers multiple purposes, but it contains 'the search query as executed by the server', as opposed to 'the search query as sent to the server'. As such it's very useful for debugging purposes.</p>\n</blockquote>\n<p>Great. Thank you so much.</p>",
        "id": 269407066,
        "sender_full_name": "Mohsen Jafari",
        "timestamp": 1643202470
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"410473\">Mohsen Jafari</span> has marked this topic as resolved.</p>",
        "id": 269407085,
        "sender_full_name": "Notification Bot",
        "timestamp": 1643202480
    },
    {
        "content": "<p>You <em>cannot</em> search QuestionnaireResponse based on answers.  There's a conscious decision to prohibit this.  It's not safe and, doing it properly would essentially require a super-complex query language because the meaning of answers can be dependent on other answers.  If you want to search based on the information in a QuestionnaireResponse, you first need to extract it into other resources (e.g. Observation).  (<span class=\"user-mention\" data-user-id=\"410473\">@Mohsen Jafari</span>)</p>",
        "id": 269447054,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1643217263
    }
]