[
    {
        "content": "<p>Hello <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> ,</p>\n<p>I posted the attached <em>DAF-Diagnostic-Order-Example.xml</em> to <a href=\"http://fhir3.healthintersections.com.au/open\" target=\"_blank\" title=\"http://fhir3.healthintersections.com.au/open\">http://fhir3.healthintersections.com.au/open</a>, and receive the errors below.  </p>\n<p>I was able to successfully post this sample a couple of weeks ago.</p>\n<p>Please advise on how to proceed.</p>\n<hr>\n<p>&lt;issue&gt;<br>\n        &lt;severity value=\"information\"/&gt;<br>\n        &lt;code value=\"structure\"/&gt;<br>\n        &lt;details&gt;<br>\n            &lt;text value=\"Unable to determine type of target resource\"/&gt;<br>\n        &lt;/details&gt;<br>\n        &lt;expression value=\"DiagnosticOrder.supportingInformation // line 0 col 0)\"/&gt;<br>\n    &lt;/issue&gt;<br>\n    &lt;issue&gt;<br>\n        &lt;severity value=\"error\"/&gt;<br>\n        &lt;code value=\"invariant\"/&gt;<br>\n        &lt;details&gt;<br>\n            &lt;text value=\"SHALL have a local reference if the resource is provided inline (url: fasting; ids: ) () reference.startsWith('#').not() or (reference.substring(1).trace('url') in %resource.contained.id.trace('ids'))\"/&gt;<br>\n        &lt;/details&gt;<br>\n        &lt;expression value=\"DiagnosticOrder.supportingInformation\"/&gt;<br>\n    &lt;/issue&gt;<br>\n    &lt;issue&gt;<br>\n        &lt;severity value=\"information\"/&gt;<br>\n        &lt;code value=\"code-invalid\"/&gt;<br>\n        &lt;details&gt;<br>\n            &lt;text value=\"None of the codes provided are in the value set <a href=\"http://hl7.org/fhir/ValueSet/diagnostic-requests\" target=\"_blank\" title=\"http://hl7.org/fhir/ValueSet/diagnostic-requests\">http://hl7.org/fhir/ValueSet/diagnostic-requests</a> (<a href=\"http://hl7.org/fhir/ValueSet/diagnostic-requests\" target=\"_blank\" title=\"http://hl7.org/fhir/ValueSet/diagnostic-requests\">http://hl7.org/fhir/ValueSet/diagnostic-requests</a>, and a code is recommended to come from this value set\"/&gt;<br>\n        &lt;/details&gt;<br>\n        &lt;expression value=\"DiagnosticOrder.item.code // line 0 col 0)\"/&gt;<br>\n    &lt;/issue&gt;</p>\n<hr>\n<p>Thank you</p>",
        "id": 153824899,
        "sender_full_name": "Max Nakamura",
        "timestamp": 1462577747
    },
    {
        "content": "<p>I don't see an attachment.  Can you just post the \"supportingInformation\" element from your instance?</p>",
        "id": 153824900,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1462578588
    },
    {
        "content": "<p>Hi Lloyd,</p>\n<p>Sure thing.</p>\n<p>&lt;DiagnosticOrder xmlns=\"<a href=\"http://hl7.org/fhir\" target=\"_blank\" title=\"http://hl7.org/fhir\">http://hl7.org/fhir</a>\"&gt;<br>\n    &lt;identifier&gt;<br>\n        &lt;type&gt;<br>\n            &lt;coding&gt;<br>\n                &lt;system value=\"http://hl7.org/fhir/identifier-type\"/&gt;<br>\n                &lt;code value=\"PLAC\"/&gt;<br>\n            &lt;/coding&gt;<br>\n            &lt;text value=\"Placer\"/&gt;<br>\n        &lt;/type&gt;<br>\n        &lt;system value=\"http://hl7.org/fhir/StructureDefinition/daf-diagnosticOrder\"/&gt;<br>\n        &lt;value value=\"1\"/&gt;<br>\n    &lt;/identifier&gt;<br>\n    &lt;status value=\"received\"/&gt;<br>\n    &lt;priority value=\"routine\"/&gt;<br>\n    &lt;subject&gt;<br>\n        &lt;reference value=\"http://fhir3.healthintersections.com.au/open/Patient/f8780165-de9a-4363-bf84-745731379b/_history/1\"/&gt;<br>\n        &lt;display value=\"Henry Jones\"/&gt;<br>\n    &lt;/subject&gt;<br>\n    &lt;encounter&gt;<br>\n        &lt;reference value=\"Encounter/example\"/&gt;<br>\n    &lt;/encounter&gt;<br>\n    &lt;orderer&gt;<br>\n        &lt;reference value=\"http://fhir3.healthintersections.com.au/open/Practitioner/f013f46b-a18c-4271-98f3-a6b58deafc/_history/1\"/&gt;<br>\n        &lt;display value=\"Adam Everyman, MD\"/&gt;<br>\n    &lt;/orderer&gt;<br>\n    &lt;reason&gt;<br>\n        &lt;coding&gt;<br>\n            &lt;system value=\"http://hl7.org/fhir/sid/icd-9\"/&gt;<br>\n            &lt;code value=\"V173\"/&gt;<br>\n            &lt;display value=\"Fam hx-ischem heart dis\"/&gt;<br>\n        &lt;/coding&gt;<br>\n    &lt;/reason&gt;<br>\n    &lt;supportingInformation&gt;<br>\n        &lt;reference value=\"#fasting\"/&gt;<br>\n    &lt;/supportingInformation&gt;<br>\n    &lt;event&gt;<br>\n        &lt;status value=\"requested\"/&gt;<br>\n        &lt;dateTime value=\"2016-05-02T16:16:00-07:00\"/&gt;<br>\n        &lt;actor&gt;<br>\n            &lt;reference value=\"http://fhir3.healthintersections.com.au/open/Practitioner/f013f46b-a18c-4271-98f3-a6b58deafc/_history/1\"/&gt;<br>\n            &lt;display value=\"Adam Everyman, MD\"/&gt;<br>\n        &lt;/actor&gt;<br>\n    &lt;/event&gt;<br>\n    &lt;item&gt;<br>\n        &lt;code&gt;<br>\n            &lt;coding&gt;<br>\n                &lt;system value=\"http://acme.org/tests\"/&gt;<br>\n                &lt;code value=\"LIPID\"/&gt;<br>\n            &lt;/coding&gt;<br>\n            &lt;text value=\"Lipid Panel\"/&gt;<br>\n        &lt;/code&gt;<br>\n        &lt;specimen&gt;<br>\n            &lt;reference value=\"Specimen/101\"/&gt;<br>\n        &lt;/specimen&gt;<br>\n    &lt;/item&gt;<br>\n    &lt;note&gt;<br>\n        &lt;text value=\"patient is afraid of needles\"/&gt;<br>\n    &lt;/note&gt;<br>\n&lt;/DiagnosticOrder&gt;</p>\n<p>I have also now attached the sample xml.</p>\n<p><a href=\"/user_uploads/10155/9P1esTEpAxUnwDjwAXM4ivED/daf-diagnostic-order-example.xml\" target=\"_blank\" title=\"/user_uploads/10155/9P1esTEpAxUnwDjwAXM4ivED/daf-diagnostic-order-example.xml\">daf-diagnostic-order-example.xml</a> </p>",
        "id": 153824901,
        "sender_full_name": "Max Nakamura",
        "timestamp": 1462579613
    },
    {
        "content": "<p>Ok.  So your reference refers to a contained resource with an id of \"fasting\", but no such contained resource is present</p>",
        "id": 153824902,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1462580552
    },
    {
        "content": "<p>Thus the warning saying the reference can't be resolved and the error saying you've got a local reference, but the thing being referenced doesn't exist.</p>",
        "id": 153824903,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1462580633
    },
    {
        "content": "<p>Thank you Lloyd,</p>\n<p>I will try to comment out that resource and repost.</p>",
        "id": 153824906,
        "sender_full_name": "Max Nakamura",
        "timestamp": 1462584978
    },
    {
        "content": "<p>You'll need to either comment out the \"supportingInformation\" element or you'll need to add a contained resource that it points to or you'll need to change the reference to not be to a contained resource.</p>",
        "id": 153824907,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1462585714
    },
    {
        "content": "<p>Hello <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> </p>\n<p>Yes, thank you - that's exactly what I did - comment out the \"supportingInformation\" element, and the diagnostic order posted to the FHIR server without error.   </p>",
        "id": 153824957,
        "sender_full_name": "Max Nakamura",
        "timestamp": 1462624283
    }
]