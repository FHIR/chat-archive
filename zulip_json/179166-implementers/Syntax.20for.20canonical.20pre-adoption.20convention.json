[
    {
        "content": "<p>I'm looking at <a href=\"https://www.hl7.org/fhir/versions.html#extensions\" target=\"_blank\" title=\"https://www.hl7.org/fhir/versions.html#extensions\">https://www.hl7.org/fhir/versions.html#extensions</a> to progress  some STU3 diagnostic profiles with R4 pre-adopt elements including:<br>\n-   ProcedureRequest.patientInstruction with proposed URL of <a href=\"http://hl7.org/fhir/4.0/StructureDefinition/extension-ServiceRequest.patientInstruction\" target=\"_blank\" title=\"http://hl7.org/fhir/4.0/StructureDefinition/extension-ServiceRequest.patientInstruction\">http://hl7.org/fhir/4.0/StructureDefinition/extension-ServiceRequest.patientInstruction</a><br>\nThe following code is used in the structuredefinition file:</p>\n<div class=\"codehilite\"><pre><span></span>    &lt;element id=&quot;ProcedureRequest.extension:patientInstruction&quot;&gt;\n      &lt;path value=&quot;ProcedureRequest.extension&quot; /&gt;\n      &lt;sliceName value=&quot;patientInstruction&quot; /&gt;\n      &lt;short value=&quot;Patient or consumer-oriented instructions&quot; /&gt;\n      &lt;definition value=&quot;Instructions in terms that are understood by the patient or consumer.&quot; /&gt;\n      &lt;min value=&quot;0&quot; /&gt;\n      &lt;max value=&quot;1&quot; /&gt;\n      &lt;type&gt;\n        &lt;code value=&quot;Extension&quot; /&gt;\n        &lt;profile value=&quot;http://hl7.org/fhir/4.0/StructureDefinition/extension-ServiceRequest.patientInstruction&quot; /&gt;\n      &lt;/type&gt;\n    &lt;/element&gt;\n</pre></div>\n\n\n<p>and I'm getting the output of:<br>\n<a href=\"/user_uploads/10155/7IoiK1-OPmdOzSZA1zhFhJWK/R4-preadopt-extension-20190521.JPG\" target=\"_blank\" title=\"R4-preadopt-extension-20190521.JPG\">R4-preadopt-extension-20190521.JPG</a> <br>\nand this in the qa.html:<br>\n<a href=\"/user_uploads/10155/otWQJYeiLpI6nP9Xz7TQzmOd/R4-preadopt-qa-20190521.JPG\" target=\"_blank\" title=\"R4-preadopt-qa-20190521.JPG\">R4-preadopt-qa-20190521.JPG</a> <br>\nAny guidance on the correct syntax/code is appreciated.</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/7IoiK1-OPmdOzSZA1zhFhJWK/R4-preadopt-extension-20190521.JPG\" target=\"_blank\" title=\"R4-preadopt-extension-20190521.JPG\"><img src=\"/user_uploads/10155/7IoiK1-OPmdOzSZA1zhFhJWK/R4-preadopt-extension-20190521.JPG\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/10155/otWQJYeiLpI6nP9Xz7TQzmOd/R4-preadopt-qa-20190521.JPG\" target=\"_blank\" title=\"R4-preadopt-qa-20190521.JPG\"><img src=\"/user_uploads/10155/otWQJYeiLpI6nP9Xz7TQzmOd/R4-preadopt-qa-20190521.JPG\"></a></div>",
        "id": 166142901,
        "sender_full_name": "David McKillop",
        "timestamp": 1558415429
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> , <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> , <span class=\"user-mention\" data-user-id=\"191368\">@Brett Esler</span>  - any suggestions on how to pre-adopt an R4 element in a STU3 profile given the above attempt didn't quite achieve it?</p>",
        "id": 166333483,
        "sender_full_name": "David McKillop",
        "timestamp": 1558588831
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192323\">@David McKillop</span> Hey David - have a look at this: <a href=\"http://hl7.org/fhir/versions.html#extensions\" target=\"_blank\" title=\"http://hl7.org/fhir/versions.html#extensions\">http://hl7.org/fhir/versions.html#extensions</a></p>",
        "id": 166339041,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1558596744
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191363\">@Vadim Peretokin</span>  - yeah - that's what I was looking at, but the code above with the content:</p>\n<div class=\"codehilite\"><pre><span></span>  &lt;profile value=&quot;http://hl7.org/fhir/4.0/StructureDefinition/extension-ServiceRequest.patientInstruction&quot; /&gt;\n</pre></div>\n\n\n<p>isn't giving the output that I was expecting - refer above.  Hence seeking further advice on what I've done to get the output to work.  Cheers</p>",
        "id": 166405512,
        "sender_full_name": "David McKillop",
        "timestamp": 1558650130
    },
    {
        "content": "<p>FYI - tried with the latest IG Publisher and the output is the same as above with the same error in the qa.html.</p>",
        "id": 166406921,
        "sender_full_name": "David McKillop",
        "timestamp": 1558651556
    },
    {
        "content": "<p>FYI - recent discussion with <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> - support for this has not yet been implemented.</p>",
        "id": 174836790,
        "sender_full_name": "Rob Eastwood",
        "timestamp": 1567550989
    },
    {
        "content": "<p>My assumption is that this applies to bringing into extension from the R5 current build. ( even though R5 not published yet )  <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> ?  ccing <span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> <span class=\"user-mention\" data-user-id=\"191689\">@Hans Buitendijk</span> <span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span></p>",
        "id": 193483393,
        "sender_full_name": "Eric Haas",
        "timestamp": 1586453532
    },
    {
        "content": "<p>I understand this works with a published later version, but thought for not yet published, only in build states.</p>",
        "id": 193489077,
        "sender_full_name": "Hans Buitendijk",
        "timestamp": 1586456222
    },
    {
        "content": "<blockquote>\n<p>how to pre-adopt an R4 element in a STU3 profile</p>\n</blockquote>\n<p>I thought that this was fully working now</p>",
        "id": 193504866,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1586464045
    },
    {
        "content": "<p>oh. in a profile.. hmm... I don't think I investigated that</p>",
        "id": 193504919,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1586464078
    },
    {
        "content": "<p>I guess this is about the snapshot generator, not the validator</p>",
        "id": 193504977,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1586464089
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  So we need a separate extension then for now until R5 is published to enable an R4 implementation to use it?</p>",
        "id": 194309911,
        "sender_full_name": "Hans Buitendijk",
        "timestamp": 1587046311
    },
    {
        "content": "<p>no, you need a separate extension because I haven't enabled using the cross version extensions in profiles.</p>",
        "id": 194365001,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587069936
    },
    {
        "content": "<p>It's on my todo list</p>",
        "id": 194365007,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587069940
    },
    {
        "content": "<p>this will work on the next release (I think)</p>",
        "id": 194431375,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587126296
    },
    {
        "content": "<p>Just to clarify:  does this cover freshly minted standard extensions in R5 extension for R4 IGs  or just for R5 elements?</p>",
        "id": 195123794,
        "sender_full_name": "Eric Haas",
        "timestamp": 1587678621
    },
    {
        "content": "<p>no not extensions at this point. Discussion on that subject at the next FHIR-I call</p>",
        "id": 195129884,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1587682866
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  could you say something about the status of enabling cross version extensions in profiles? I added an extension to my STU3 ProcedureRequest profile with the following URL: <a href=\"http://hl7.org/fhir/4.0/StructureDefinition/extension-ServiceRequest.orderDetail\">http://hl7.org/fhir/4.0/StructureDefinition/extension-ServiceRequest.orderDetail</a> but Simplifier complains that the canonical can't be resolved. I also tried adding the following package in the dependencies: hl7.fhir.xver.r4</p>",
        "id": 219088143,
        "sender_full_name": "Lilian Minne",
        "timestamp": 1607352400
    },
    {
        "content": "<p>well, it's supported nby the java validator, but I can't say anything about whether other platforms support it. I think you'll have to ask firely (<span class=\"user-mention\" data-user-id=\"203235\">@Ward Weistra</span> ?)</p>",
        "id": 219115769,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1607364554
    },
    {
        "content": "<p>Wouldn't it be a good idea to generate all these extensions and publish them in a package?</p>",
        "id": 219191617,
        "sender_full_name": "Ardon Toonstra",
        "timestamp": 1607423575
    },
    {
        "content": "<p>there is a package, but it uses a compressed form in order to keep the size down:</p>",
        "id": 219256346,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1607458478
    },
    {
        "content": "<p>hl7.fhir.xver-extensions</p>",
        "id": 219256388,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1607458502
    },
    {
        "content": "<p>oh yes - also, there was the question of which version it would be in, and whether I'd have to publish the permutational explosion of version of extension vs version applicable</p>",
        "id": 219258478,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1607459458
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> This was one of those packages with a non-existing FHIR Version (<code>4.0</code>), which likely explains why it is not processed correctly: <a href=\"https://simplifier.net/packages/hl7.fhir.xver-extensions/0.0.5/files/293627\">https://simplifier.net/packages/hl7.fhir.xver-extensions/0.0.5/files/293627</a>. A new package version with the correct FHIR version should fix it, I assume.</p>",
        "id": 219321425,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1607511493
    },
    {
        "content": "<p>oh. Didn't I already correct it?</p>",
        "id": 219321562,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1607511565
    },
    {
        "content": "<p>no I did not. Will post an updated one shortly</p>",
        "id": 219328512,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1607516388
    }
]