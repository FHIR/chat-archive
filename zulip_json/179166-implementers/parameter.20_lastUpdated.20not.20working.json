[
    {
        "content": "<p>Hi All, <br>\nWe are using a query to search Organizations role=OUTPHARM&amp;telecom-fax%3Aexact=4859414204&amp;_lastUpdated=gt2021-04-30T00:12:23. We are facing a strange Issue where the search doesnt work if its midnight. I am attaching the logs as well. </p>\n<p>2021-05-03 18:17:46.883 +0000 ERROR          [         http-nio-8010-exec-10] [f.r.s.interceptor.ExceptionHandlingInterceptor:140]  Failure during REST processing { req.uuid=1234567890 } <br>\nca.uhn.fhir.rest.server.exceptions.InternalErrorException: Failed to call access method: java.lang.IllegalArgumentException: can't parse argument number: _lastUpdated</p>\n<p><a href=\"/user_uploads/10155/eb6L5ZJP-bdSCYqjSmDPd6M9/ErrorLogs.txt\">ErrorLogs.txt</a> </p>\n<p>Do we have a fix for this  and Is this  a known Issue ?</p>\n<p>Thanks</p>",
        "id": 237217131,
        "sender_full_name": "Ramandeep",
        "timestamp": 1620070876
    },
    {
        "content": "<p>Is this a question for a specific server developer? Your logs suggest you're working with <a href=\"https://www.telus.com/en/partner/our-solutions/digital-health/health-exchange-international\">https://www.telus.com/en/partner/our-solutions/digital-health/health-exchange-international</a> -- so this would be a question for them</p>",
        "id": 237217661,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1620071129
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span>  can you please help me in this regard</p>",
        "id": 237218022,
        "sender_full_name": "Ramandeep",
        "timestamp": 1620071276
    },
    {
        "content": "<p>The public HAPI server does not have a problem with your date: <br>\n<a href=\"http://hapi.fhir.org/baseR4/Patient?_lastUpdated=gt2030-04-30T00:12:23\">http://hapi.fhir.org/baseR4/Patient?_lastUpdated=gt2030-04-30T00:12:23</a><br>\n(note: I changed the year so people would not hammer the server with large results). <br>\nThis  error message :<br>\nCaused by: java.lang.NumberFormatException: For input string: \"_lastUpdated\" <br>\nsuggests the server is trying to interpret the word \"_lastUpdated\" as a number. <br>\nI would try desconstructing your query piece by piece. Try it first just against lastUpdated, then add the other params. I suspect you have some bad syntax or there is a URL-escaping problem somewhere.</p>\n<p>edit to add: I notice you are escaping the colon before :exact, but not the colons in the date - could be something else to look at.</p>",
        "id": 237222883,
        "sender_full_name": "Craig McClendon",
        "timestamp": 1620073406
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"193261\">@craig mcclendon</span> : I will  try to fix it as per your suggestion, I will update how it goes.</p>",
        "id": 237228961,
        "sender_full_name": "Ramandeep",
        "timestamp": 1620075786
    },
    {
        "content": "<p>FWIW, I'd say this is the relevant bit of your stack trace:</p>\n<div class=\"codehilite\"><pre><span></span><code>Caused by: java.lang.IllegalArgumentException: can&#39;t parse argument number: _lastUpdated\n    at java.text.MessageFormat.makeFormat(MessageFormat.java:1429)\n    at java.text.MessageFormat.applyPattern(MessageFormat.java:479)\n    at java.text.MessageFormat.&lt;init&gt;(MessageFormat.java:380)\n    at org.springframework.context.support.MessageSourceSupport.createMessageFormat(MessageSourceSupport.java:159)\n    at org.springframework.context.support.ReloadableResourceBundleMessageSource$PropertiesHolder.getMessageFormat(ReloadableResourceBundleMessageSource.java:616)\n    at org.springframework.context.support.ReloadableResourceBundleMessageSource.resolveCode(ReloadableResourceBundleMessageSource.java:206)\n    at org.springframework.context.support.AbstractMessageSource.getMessageInternal(AbstractMessageSource.java:221)\n    at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:136)\n    at com.telushealth.exchange.cs.common.spring.messages.Messages.getMessage(Messages.java:115)\n    at com.telushealth.exchange.cs.common.hapi.OperationOutcomeBuilder.getMessageDefaultEmpty(OperationOutcomeBuilder.java:262)\n    at com.telushealth.exchange.cs.common.hapi.OperationOutcomeBuilder.createOperationOutcome(OperationOutcomeBuilder.java:129)\n    at com.telushealth.exchange.cs.tprcacheservice.handler.FhirOperationOutcomeBuilder.createOperationOutcome(FhirOperationOutcomeBuilder.java:45)\n    at com.telushealth.exchange.cs.tprcacheservice.controller.OrganizationController.searchOrganizationsForBulkSyncWithFaxNumber(OrganizationController.java:287)\n</code></pre></div>\n<p>For what it's worth, my own approach to debugging this would be to put a breakpoint at <code>MessageFormat.java : 1429</code> and then walk down the stack when you hit it. That message looks like a malformed message format object or something like that. It doesn't appear to be coming from HAPI though.</p>",
        "id": 237234153,
        "sender_full_name": "James Agnew",
        "timestamp": 1620077109
    }
]