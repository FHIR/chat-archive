[
    {
        "content": "<p>If I want to return a bundle with a list of patients along with their labs and meds  based on some search criteria in one request , How do I go about doing this in one request.<br>\nif I use [base]/Patient/_search{?[parameters]} I would get a list of patients, but would not be able to include observation and Med data.<br>\nWill a Group or List resource help?</p>",
        "id": 153899320,
        "sender_full_name": "Kalyani Yerra",
        "timestamp": 1501273350
    },
    {
        "content": "<p>Look at the _revinclude search parameter.  Note that you won't be able to filter the labs and meds that way.  Another possibility is to submit a batch where you query on Patient, MedicationStatement (and maybe MedicationRequest) and Observation separately, but use chained parameters to specify the same filters on patient for each.</p>",
        "id": 153899321,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1501273534
    },
    {
        "content": "<p>Thank you <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> . If I use _revInclude  for example on Medication request how do I get the Observation resources also?<br>\n GET [base]/MedicationRequest?_revinclude=??????&amp;criteria...</p>",
        "id": 153899322,
        "sender_full_name": "Kalyani Yerra",
        "timestamp": 1501273978
    },
    {
        "content": "<p>You'd query on Patient and then do a _revinclude on both MedicationStatement and on Observation</p>",
        "id": 153899323,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1501274176
    },
    {
        "content": "<p>But the only filter criteria you could provide would be on Patient.</p>",
        "id": 153899324,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1501274192
    },
    {
        "content": "<p>Thank you. Can I combine reverse chaining and  _revinclude ?</p>",
        "id": 153899325,
        "sender_full_name": "Kalyani Yerra",
        "timestamp": 1501274309
    },
    {
        "content": "<p>You can, but that still filters Patient, not the included resources.  For example, if you search on Patient and use _has to filter for Observations that are hemoglobins, and then _revinclude Observation, you'll get a list of all patients that have hemoglobin Observations, as well as all Observations (of any type) that exist for that Patient.</p>",
        "id": 153899326,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1501274499
    },
    {
        "content": "<p>So the Batch mechanism is probably your better bet.  All Observations for a patient can easily get into the 10k+ range. :)</p>",
        "id": 153899327,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1501274548
    },
    {
        "content": "<p>Thank you. <br>\n<a href=\"https://www.hl7.org/fhir/http.html#transaction\" target=\"_blank\" title=\"https://www.hl7.org/fhir/http.html#transaction\">https://www.hl7.org/fhir/http.html#transaction</a>  is this what you are referring to for the batch  mechanism.</p>\n<p>Since I would get a list of patients based on some criteria and need lab and med data for each of these patients, I would need to put this batch mechanism in a loop ?</p>",
        "id": 153899328,
        "sender_full_name": "Kalyani Yerra",
        "timestamp": 1501275021
    },
    {
        "content": "<p>You would send a batch containing 3 queries.  One would search for patient with a particular set of criteria.  The second would search for observations whose patients met particular criteria (using chaining).  The third would search for MedicationStatements whose patients met particular criteria (also using chaining)</p>",
        "id": 153899519,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1501355205
    }
]