[
    {
        "content": "<p><a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=20912\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=20912\">GF#20912</a> notes that we currently say that it's an error to have an interaction that supports multiple versions - i.e. the Content-Type and Accept headers aren't for the same version.  However, we have a $convert operation that does exactly that.  We're wondering whether we should just carve out an exception for that one operation or whether it's appropriate to loosen the rule to allow version mixing in other situations.  If we loosen the rule, we'd also need to define how we wanted to enforce constraints so version mixing only occurs in appropriate circumstances and in appropriate ways</p>",
        "id": 179266867,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1572291182
    },
    {
        "content": "<p>yes</p>",
        "id": 179282178,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1572301378
    },
    {
        "content": "<p>That's an interesting answer to an either/or question <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  :)</p>",
        "id": 179297068,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1572319291
    },
    {
        "content": "<p>yep</p>",
        "id": 179297148,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1572319398
    },
    {
        "content": "<p>I can also imagine $transform uses with different fhirVersions (use this R4 StructureMap to map the input to an R3 Resource).<br>\nFor all the normal http interactions I don't really see a use for it, nor for any of the other operations defined in the spec.<br>\nSo I would suggest that all http interactions and predefined operations SHOULD have the same fhirVersion on Content-Type and Accept, except for $convert and $transform. Besided that, custom operations MAY accept different fhirVersions on Content-Type and Accept.<br>\nBut that leaves the question on how an operation can define that it accepts different versions.</p>",
        "id": 179312704,
        "sender_full_name": "Christiaan Knaap",
        "timestamp": 1572341739
    },
    {
        "content": "<p>In my limited opinion, you should be loosening the rule in either case.  You either loosen it so that only $convert can function (and any that follow it's strict interaction rules) or further if there are other operations that might benefit it.  I don't think starting a potential list of exemptions would be a good way forward</p>",
        "id": 179322982,
        "sender_full_name": "David Pyke",
        "timestamp": 1572351295
    },
    {
        "content": "<p>The core specification should not speak about deployment issues. It is a core spec. An implementation guide certainly can speak of deployment issues. Thus the core spec should not state that it is an error to have an interaction with multiple versions. It should have a well-defined error to indicate this condition, but it should not mandate any specific condition. It could use an example that is the one we describe today.</p>",
        "id": 179324159,
        "sender_full_name": "John Moehrke",
        "timestamp": 1572352558
    },
    {
        "content": "<p>I don't see that this is a deployment issue. It's a fundamental issue of definition of the API - when can you mix versions on a call</p>",
        "id": 179365418,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1572377469
    }
]