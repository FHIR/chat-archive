[
    {
        "content": "<p>Not sure if this is the right stream for this question? Please guide me elsewhere if it's not. Does anyone have experience about Microsoft Azure cloud? Any pros and cons? If someone has experience of corresponding alternative in mind I would be interested hearing? Is there any restrictions or does it support everything in FHIR. I might be testing this service soon but wanted to ask first if there is something is should know before? Thanks in advance.</p>",
        "id": 165314144,
        "sender_full_name": "Lauri Karppinen",
        "timestamp": 1557471109
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"196057\">@Lauri Karppinen</span> i have some experience with Azure FHIR API. The metadata tells what it supports. Did you have any specific question?</p>",
        "id": 165370915,
        "sender_full_name": "Elkhan Yusubov",
        "timestamp": 1557522292
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"196057\">@Lauri Karppinen</span>  -- I believe Azure FHIR API was discussed at the Microsoft Build conference this week -- here's an article about it:  <br>\n<a href=\"https://msdynamicsworld.com/story/latest-azure-news-outage-powershell-azure-functions-azure-machine-learning-api-fhir-channel\" target=\"_blank\" title=\"https://msdynamicsworld.com/story/latest-azure-news-outage-powershell-azure-functions-azure-machine-learning-api-fhir-channel\">https://msdynamicsworld.com/story/latest-azure-news-outage-powershell-azure-functions-azure-machine-learning-api-fhir-channel</a></p>\n<p>and a pointer to the Azure FHIR API:  <a href=\"https://azure.microsoft.com/en-us/blog/deploy-a-fhir-sandbox-in-azure/\" target=\"_blank\" title=\"https://azure.microsoft.com/en-us/blog/deploy-a-fhir-sandbox-in-azure/\">https://azure.microsoft.com/en-us/blog/deploy-a-fhir-sandbox-in-azure/</a></p>",
        "id": 165374253,
        "sender_full_name": "John Silva",
        "timestamp": 1557525290
    },
    {
        "content": "<p>(Also from  the team that makes the server: <span class=\"user-mention\" data-user-id=\"195775\">@Michael Hansen</span> and others are subscribed here.)</p>",
        "id": 165380005,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1557531217
    },
    {
        "content": "<p>I am happy to take any specific questions.</p>",
        "id": 165385734,
        "sender_full_name": "Michael Hansen",
        "timestamp": 1557538760
    },
    {
        "content": "<p>We are in the process of starting up development on a large and critical medication information system. We have decided to implement FHIR, and are looking at different options re implementing this. We would really like to move forward with Azure FHIR API, but we are dependent upon R4 support, as our focus is medication information (we are not really interested in the other stuff). The information on this page (<a href=\"https://github.com/microsoft/fhir-server/blob/master/docs/Roadmap.md\" target=\"_blank\" title=\"https://github.com/microsoft/fhir-server/blob/master/docs/Roadmap.md\">https://github.com/microsoft/fhir-server/blob/master/docs/Roadmap.md</a>) is not sufficient for us. So I will ask my questions here instead:</p>\n<ul>\n<li>When does MS plan to release a version of Azure FHIR API with R4 support? </li>\n<li>When does MS plan to support profiles?</li>\n<li>When does MS plan to support preloading?</li>\n</ul>\n<p>Thank you for any help in this.</p>",
        "id": 169706872,
        "sender_full_name": "Bjørn Erik Nordal",
        "timestamp": 1562331765
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"195775\">@Michael Hansen</span></p>",
        "id": 169711816,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1562336045
    },
    {
        "content": "<p>Support for SQL Server and FHIR R4 announced here... <a href=\"https://azure.microsoft.com/en-gb/blog/microsoft-fhir-server-for-azure-extends-to-sql/\" target=\"_blank\" title=\"https://azure.microsoft.com/en-gb/blog/microsoft-fhir-server-for-azure-extends-to-sql/\">https://azure.microsoft.com/en-gb/blog/microsoft-fhir-server-for-azure-extends-to-sql/</a>.  Microsoft NZ are holding a WebCast next week to encourage local uptake.</p>",
        "id": 169733804,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1562358180
    },
    {
        "content": "<p>Yes R4 is in our OSS codebase now and work is underway to offer it in PaaS this quarter.</p>",
        "id": 169740074,
        "sender_full_name": "Michael Hansen",
        "timestamp": 1562367167
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"195775\">@Michael Hansen</span> many thanks for today's excellent Webinar on the FHIR API for MS Azure!  Good numbers and participation - certainly by Kiwi standards.</p>",
        "id": 170415477,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1562634542
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191364\">@Peter Jordan</span> it was a pleasure. Great to see all the interest in FHIR in NZ. I hope we can make a visit out there at some point.</p>",
        "id": 170489246,
        "sender_full_name": "Michael Hansen",
        "timestamp": 1562705250
    },
    {
        "content": "<p>Thank you for responding so promptly. R4 in PaaS this quarter is good news. Does anyone have more information re profiling support?</p>",
        "id": 170524008,
        "sender_full_name": "Bjørn Erik Nordal",
        "timestamp": 1562749245
    },
    {
        "content": "<p><em>Bump</em> Does anyone (<span class=\"user-mention\" data-user-id=\"195775\">@Michael Hansen</span> perhaps?) have information about when profiling support will be implemented in the API? Thank you for any help. Besides that: Currently it seems the API is not available in Northern Europe Region. Are there plans to make the API available also there?</p>",
        "id": 172659973,
        "sender_full_name": "Bjørn Erik Nordal",
        "timestamp": 1565167283
    },
    {
        "content": "<p>What would count as 'profiling support'? Validating against a profile?</p>",
        "id": 172671391,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1565179573
    },
    {
        "content": "<p>We will support $validate (and ancillary \"stuff\") later this year. Northern Europe will be end of summer, early fall. R4 is very close in PaaS.</p>",
        "id": 172686239,
        "sender_full_name": "Michael Hansen",
        "timestamp": 1565190691
    },
    {
        "content": "<p>the other thing that profiling support might mean is being able to choose a base profile that the server requires conformance to when resources are posted/put</p>",
        "id": 172718691,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565214190
    },
    {
        "content": "<p>With \"support\" I mean the following: 1.Validating against a profile ($validate), 2.automatic conformance checking, and 3.indexing of extension fields for query operations. $validate is supported later this year I see. Good. My hope is that \"ancillary stuff\" includes points 2 and 3. Thank you.</p>",
        "id": 173280026,
        "sender_full_name": "Bjørn Erik Nordal",
        "timestamp": 1565865511
    },
    {
        "content": "<blockquote>\n<p>I am happy to take any specific questions.</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"195775\">@Michael Hansen</span> Took a long time but I ended up testing Azure FHIR. I am able to get the metadata for the server. And even the token but when I try to POST patient to the server for furher testing. I keep getting error: <br>\n<code>{\n    \"resourceType\": \"OperationOutcome\",\n    \"id\": \"b506c05db27645479d76f50dd2a19d00\",\n    \"issue\": [\n        {\n            \"severity\": \"error\",\n            \"code\": \"login\",\n            \"diagnostics\": \"Authentication failed.\"\n        }\n    ]\n}</code><br>\nFirst I tried with following this tutoria: <a href=\"https://docs.microsoft.com/en-us/azure/healthcare-apis/access-fhir-postman-tutorial\" target=\"_blank\" title=\"https://docs.microsoft.com/en-us/azure/healthcare-apis/access-fhir-postman-tutorial\">https://docs.microsoft.com/en-us/azure/healthcare-apis/access-fhir-postman-tutorial</a><br>\nand then with some youtube tutorials for the same purpose. Now I have environment saved in Postman with: tenantid, clientid, clientsecret, subscriptionid and bearerToken. Token is in header as Authorizarion : Bearer{{bearerToken}} and other values in Params. Every Key has a value. Now I should be able to POST some demo patient to the server? Or is there something obvious I'm missing?</p>\n<p>EDIT: Here is snip from Postman. Token should be ok that way? <br>\n<a href=\"user_uploads/10155/Y-eicRSZ44oegKSGXhTOmbLA/pasted_image.png\" target=\"_blank\" title=\"user_uploads/10155/Y-eicRSZ44oegKSGXhTOmbLA/pasted_image.png\">pasted image</a></p>\n<div class=\"message_inline_image\"><a href=\"user_uploads/10155/Y-eicRSZ44oegKSGXhTOmbLA/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"user_uploads/10155/Y-eicRSZ44oegKSGXhTOmbLA/pasted_image.png\"></a></div>",
        "id": 175888993,
        "sender_full_name": "Lauri Karppinen",
        "timestamp": 1568711977
    },
    {
        "content": "<p>Some extra questions that came in mind while trying to figure this out. While deploying the Azure API for FHIR there was some additional settings I would like to confirm. Authority: <a href=\"https://login.microsoftonline.com/xxx\" target=\"_blank\" title=\"https://login.microsoftonline.com/xxx\">https://login.microsoftonline.com/xxx</a> where xxx is tenant-id? Audience: <a href=\"https://azurehealthcareapis.com\" target=\"_blank\" title=\"https://azurehealthcareapis.com\">https://azurehealthcareapis.com</a> or should it be <a href=\"https://xxxxxxx.azurehealthcareapis.com\" target=\"_blank\" title=\"https://xxxxxxx.azurehealthcareapis.com\">https://xxxxxxx.azurehealthcareapis.com</a>? Allowed object id's: here i have tenantid as well. This could be my problem? I tried to use this: <a href=\"https://docs.microsoft.com/en-us/azure/healthcare-apis/find-identity-object-ids\" target=\"_blank\" title=\"https://docs.microsoft.com/en-us/azure/healthcare-apis/find-identity-object-ids\">https://docs.microsoft.com/en-us/azure/healthcare-apis/find-identity-object-ids</a> to find object id's with no luck. Could not get anything with either powershell or CLI.</p>",
        "id": 175899269,
        "sender_full_name": "Lauri Karppinen",
        "timestamp": 1568722182
    },
    {
        "content": "<p>When I go to the header of the response there seems to be something wrong with my token: Bearer error=\"invalid_token\", error_description=\"The audience is invalid\". This led me to this tutorial where I should be able to get those object id's which I was guessing to be the problem earlier: <a href=\"https://docs.microsoft.com/en-us/azure/healthcare-apis/find-identity-object-ids#code-try-0\" target=\"_blank\" title=\"https://docs.microsoft.com/en-us/azure/healthcare-apis/find-identity-object-ids#code-try-0\">https://docs.microsoft.com/en-us/azure/healthcare-apis/find-identity-object-ids#code-try-0</a> . There is a command which should give me the object id's but I'm not been able to get them. I should just replace the e-mail in the '<a href=\"http://myuserconsoso.com\" target=\"_blank\" title=\"http://myuserconsoso.com\">myuserconsoso.com</a>' with my microsoft account e-mail? This is what I get as answer:  Resource '<a href=\"mailto:xxxxxx@outlook.com\" title=\"mailto:xxxxxx@outlook.com\">xxxxxx@outlook.com</a>' does not exist or one of its queried reference-property objects are not present.</p>",
        "id": 175901591,
        "sender_full_name": "Lauri Karppinen",
        "timestamp": 1568724140
    },
    {
        "content": "<p>Finally I was able to get the Object id with $(Get-AzureADServicePrincipal -Filter \"AppId eq 'XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX'\").ObjectId command. And I updated returned id value to the field for Allowed object IDs in Authentication. I still get the same error to header: Bearer error=\"invalid_token\", error_description=\"The audience is invalid\".</p>",
        "id": 175905645,
        "sender_full_name": "Lauri Karppinen",
        "timestamp": 1568726938
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"196057\">@Lauri Karppinen</span> can you take a look at the return headers, they should give you some indication as to what is wrong. I see you are getting a 401, so I would guess that your audience (aud) claim in the token invalid. Please inspect your token with something like <a href=\"https://jwt.ms\" target=\"_blank\" title=\"https://jwt.ms\">https://jwt.ms</a> and see what the aud claim is. Then verify your authentication settings for the Azure API for FHIR instance....it could be something small like you have a slash at the end of one of them and not the other.</p>",
        "id": 175917421,
        "sender_full_name": "Michael Hansen",
        "timestamp": 1568734054
    },
    {
        "content": "<p>Sorry, I didn't see your additional message. Please check what the audience is set to for the instance and what you have in the token.</p>",
        "id": 175917603,
        "sender_full_name": "Michael Hansen",
        "timestamp": 1568734155
    },
    {
        "content": "<p>Thanks for the help so far <span class=\"user-mention\" data-user-id=\"195775\">@Michael Hansen</span> !! I got the help from the link you sended. I actually had wrong value in the audience of my token. It helped that I got the token decoded. Thanks!</p>",
        "id": 175973540,
        "sender_full_name": "Lauri Karppinen",
        "timestamp": 1568786905
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"195775\">@Michael Hansen</span> Is there something limiting POSTing transaction bundle? I'm not been able to POST bundle containing several transactions with requests. Here is simple example I'm able to POST to <a href=\"http://hapi.fhir.org/baseDstu3\" target=\"_blank\" title=\"http://hapi.fhir.org/baseDstu3\">http://hapi.fhir.org/baseDstu3</a> but not to <a href=\"https://xxxxxxx.azurehealthcareapis.com/\" target=\"_blank\" title=\"https://xxxxxxx.azurehealthcareapis.com/\">https://xxxxxxx.azurehealthcareapis.com/</a>. Is it something to do with R4? Any ideas? Here is my example:<br>\n`<br>\n{<br>\n    \"entry\": [<br>\n        {<br>\n            \"resource\":         <br>\n            {<br>\n                \"birthDate\": \"2005-01-02\",<br>\n                \"gender\": \"female\",<br>\n                \"id\": \"93a14fea-0c87-1000-b132-4d4c00001111\",<br>\n                \"name\": [<br>\n                    {<br>\n                        \"family\": \"BundleTest\",<br>\n                        \"given\": [<br>\n                            \"BundleDude\",<br>\n                            \"Seppo\"<br>\n                        ]<br>\n                    }<br>\n                ],<br>\n                \"resourceType\": \"Patient\"</p>\n<div class=\"codehilite\"><pre><span></span>        },  \n            &quot;request&quot;: {\n                &quot;method&quot;: &quot;PUT&quot;,\n                &quot;url&quot;: &quot;Patient/93a14fea-0c87-1000-b132-4d4c00001111&quot;\n                }\n\n    },\n    {\n        &quot;resource&quot;: {\n            &quot;id&quot;: &quot;c04d8694-0c17-435c-ab0c-28dce1c94444&quot;,\n            &quot;name&quot;: [\n                {\n                    &quot;family&quot;: &quot;Testinen&quot;,\n                    &quot;given&quot;: [\n                        &quot;Hoitaja&quot;,\n                        &quot;Hanna&quot;\n                    ]\n                }\n            ],\n            &quot;resourceType&quot;: &quot;Practitioner&quot;\n\n        },\n                        &quot;request&quot;: {\n                &quot;method&quot;: &quot;PUT&quot;,\n                &quot;url&quot;: &quot;Practitioner/c04d8694-0c17-435c-ab0c-28dce1c94444&quot;\n                }\n    },\n    {\n        &quot;resource&quot;: {\n            &quot;category&quot;: [\n                {\n                    &quot;coding&quot;: [\n                        {\n                            &quot;code&quot;: &quot;vital-signs&quot;,\n                            &quot;system&quot;: &quot;http://hl7.org/fhir/observation-category&quot;\n                        }\n                    ]\n                }\n            ],\n            &quot;code&quot;: {\n                &quot;coding&quot;: [\n                    {\n                        &quot;code&quot;: &quot;8302-2&quot;,\n                        &quot;display&quot;: &quot;Body height&quot;,\n                        &quot;system&quot;: &quot;http://loinc.org&quot;\n                    }\n                ]\n            },\n            &quot;effectiveDateTime&quot;: &quot;2019-05-06T12:02:34Z&quot;,\n            &quot;id&quot;: &quot;93a1e2ae-0c87-1000-b3a6-db1200002222&quot;,\n            &quot;issued&quot;: &quot;2019-05-06T12:02:58Z&quot;,\n            &quot;language&quot;: &quot;en&quot;,\n            &quot;meta&quot;: {\n                &quot;profile&quot;: [\n                    &quot;http://phr.kanta.fi/StructureDefinition/fiphr-bodyheight-stu3&quot;\n                ]\n            },\n            &quot;performer&quot;: [\n                {\n                    &quot;reference&quot;: &quot;Practitioner/c04d8694-0c17-435c-ab0c-28dce1c94444&quot;\n                }\n            ],\n            &quot;resourceType&quot;: &quot;Observation&quot;,\n            &quot;status&quot;: &quot;final&quot;,\n            &quot;subject&quot;: {\n                &quot;reference&quot;: &quot;Patient/93a14fea-0c87-1000-b132-4d4c00001111&quot;\n            },\n            &quot;valueQuantity&quot;: {\n                &quot;code&quot;: &quot;cm&quot;,\n                &quot;system&quot;: &quot;http://unitsofmeasure.org&quot;,\n                &quot;unit&quot;: &quot;cm&quot;,\n                &quot;value&quot;: 155\n            }\n\n        },\n        &quot;request&quot;: {\n                &quot;method&quot;: &quot;PUT&quot;,\n                &quot;url&quot;: &quot;Observation/93a1e2ae-0c87-1000-b3a6-db1200002222&quot;\n                }\n    }\n\n],\n&quot;id&quot;: &quot;93a1e2ba-0c87-1000-b622-915900003333&quot;,\n&quot;resourceType&quot;: &quot;Bundle&quot;,\n&quot;type&quot;: &quot;transaction&quot;\n</pre></div>\n\n\n<p>}<br>\n`</p>",
        "id": 177127859,
        "sender_full_name": "Lauri Karppinen",
        "timestamp": 1570001632
    },
    {
        "content": "<p>Not every server necessarily supports transaction.  What message are you getting back?</p>",
        "id": 177153555,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1570025576
    },
    {
        "content": "<p>The Azure API for FHIR does not (yet) support transaction bundles. The work is in progress as part of the SQL server based persistence provider we are working on, but it is not quite there yet.</p>",
        "id": 177157866,
        "sender_full_name": "Michael Hansen",
        "timestamp": 1570028168
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"195775\">@Michael Hansen</span> . Do You have any update on SQL Server/transaction bundles? Is there any estimates how long it will take it to work?</p>",
        "id": 181008105,
        "sender_full_name": "Lauri Karppinen",
        "timestamp": 1574077306
    },
    {
        "content": "<p>The work is going in right now. Should be completed by end of year.</p>",
        "id": 181022980,
        "sender_full_name": "Michael Hansen",
        "timestamp": 1574089469
    },
    {
        "content": "<p>Great to hear <span class=\"user-mention\" data-user-id=\"195775\">@Michael Hansen</span> . That sounds promising. If I have understood correctly FHIR is at the moment based on cosmos database in Azure. I'm able to send and recieve resources to azure through Postman. I have not been able to find any view or solution to see data in actual database. I would like to see the structured data in database itself. Is there any demo or presentation how that works with cosmos database?</p>",
        "id": 181105994,
        "sender_full_name": "Lauri Karppinen",
        "timestamp": 1574166232
    },
    {
        "content": "<p>In the managed service (the Azure API for FHIR), you do not have direct access to the database. It is an implementation detail. If you would like to interact with the database directly (Cosmos or SQL), you can run the OSS version of the server, which you can find deployment instruction for here (<a href=\"https://docs.microsoft.com/en-us/azure/healthcare-apis/fhir-oss-portal-quickstart\" target=\"_blank\" title=\"https://docs.microsoft.com/en-us/azure/healthcare-apis/fhir-oss-portal-quickstart\">https://docs.microsoft.com/en-us/azure/healthcare-apis/fhir-oss-portal-quickstart</a>). And in the context of your question before, the transaction stuff will be available in the OSS server first and then later next years in the managed service.</p>",
        "id": 181112735,
        "sender_full_name": "Michael Hansen",
        "timestamp": 1574171901
    },
    {
        "content": "<p>Export: Trying to export data from FHIR API. Getting \"The supplied value for \\\"_destinationType\\\" paramter is invalid.\" Value provided is \"azure-block-blob\". Any hints?</p>",
        "id": 183244364,
        "sender_full_name": "Bjørn Erik Nordal",
        "timestamp": 1576144636
    },
    {
        "content": "<p>Does Azure API for FHIR support any extended operations?  Particularly $everything, $submit.</p>",
        "id": 207630396,
        "sender_full_name": "Douglas DeShazo",
        "timestamp": 1598014519
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"195075\">@Brendan Kowitz</span></p>",
        "id": 207650258,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1598024957
    },
    {
        "content": "<p>We don't have these operations yet. We have mostly prioritized features based on customer feedback, I'd suggest creating some issues at <a href=\"https://github.com/microsoft/fhir-server/issues\">https://github.com/microsoft/fhir-server/issues</a>, I look at these regularly. $everything is on my radar, I don't have any etas on this yet though. I was also going to suggest visiting <a href=\"https://docs.microsoft.com/en-us/azure/healthcare-apis/fhir-features-supported\">https://docs.microsoft.com/en-us/azure/healthcare-apis/fhir-features-supported</a> but it looks like it doesn't list the extended operations (e.g. $export), I'll look into getting this updated too</p>",
        "id": 207658900,
        "sender_full_name": "Brendan Kowitz",
        "timestamp": 1598029584
    },
    {
        "content": "<p>I have my own database and if I use Azure API for FHIR, can we have Azure API point/use and connect with our external database server outside Azure?</p>",
        "id": 220788552,
        "sender_full_name": "Vidhi Shah",
        "timestamp": 1608730295
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"195775\">@Michael Hansen</span></p>",
        "id": 220795002,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1608735031
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"241501\">@Caitlin Voegele</span> probably has a better answer, but I think the answer is: you'd need to write your own \"persistence provider\" for the open source FHIR Server for Azure, capable of translating FHIR interactions into your schema. If you want to use the managed service, you need to use one of the persistence providers that come out of the box (where the managed service hosts your server and your db).</p>",
        "id": 220795885,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1608735630
    },
    {
        "content": "<p>Adding <span class=\"user-mention\" data-user-id=\"195075\">@Brendan Kowitz</span> for eyes as well.</p>",
        "id": 220803138,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1608740664
    },
    {
        "content": "<p>Correct, the Azure API for FHIR managed service contains the database as an implementation detail, there is no way to expose this or have the app layer point to another datasource.</p>\n<p>If you use the open source code, although its technically possible to write your own data provider implementation (<a href=\"https://github.com/microsoft/fhir-server/blob/master/src/Microsoft.Health.Fhir.Core/Features/Persistence/IFhirDataStore.cs\">https://github.com/microsoft/fhir-server/blob/master/src/Microsoft.Health.Fhir.Core/Features/Persistence/IFhirDataStore.cs</a>), most of the complexity is translating search requirements (<a href=\"https://github.com/microsoft/fhir-server/blob/master/src/Microsoft.Health.Fhir.Core/Features/Search/SearchService.cs\">https://github.com/microsoft/fhir-server/blob/master/src/Microsoft.Health.Fhir.Core/Features/Search/SearchService.cs</a>).</p>",
        "id": 220826468,
        "sender_full_name": "Brendan Kowitz",
        "timestamp": 1608756847
    },
    {
        "content": "<p>Thank you very much <span class=\"user-mention\" data-user-id=\"195075\">@Brendan Kowitz</span>  and <span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> . This was very helpful.</p>",
        "id": 221195814,
        "sender_full_name": "Vidhi Shah",
        "timestamp": 1609313761
    },
    {
        "content": "<p>And if you're doing a facade to your own storage, you might also consider Vonk's facade layer, or the one that I wrote which is on nuget too.<br>\nSource is at <a href=\"http://github.com/brianpos/fhir-net-web-api\">http://github.com/brianpos/fhir-net-web-api</a></p>",
        "id": 222250603,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1610325646
    },
    {
        "content": "<p>In the Azure API for FHIR when I try to send a condition bundle it throws an error saying Condition.subject is must to have. But the standards of FHIR r4 does not mandate it. Isn't it a flaw in the implementation of Azure API for FHIR?</p>",
        "id": 269994025,
        "sender_full_name": "Vibin_chander",
        "timestamp": 1643617333
    },
    {
        "content": "<p>There shouldn't be a requirement to populate fields with a minimum cardinality of zero. Can you share an example of what you mean by \"send a condition bundle\"?</p>",
        "id": 270038374,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1643638961
    },
    {
        "content": "<p>this is likely a use-case like HL7, DICOM, and IHE have had for decades.. We know that some systems don't have this data, but for those that do have this data it must be sent... aka, R2 or RE.  (This is what IHE uses Must-Support to convey).</p>",
        "id": 270038790,
        "sender_full_name": "John Moehrke",
        "timestamp": 1643639157
    },
    {
        "content": "<p>In R4 Condition.subject is 1..1  So, it is required.</p>",
        "id": 270039958,
        "sender_full_name": "David Pyke",
        "timestamp": 1643639590
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span> your comment may be misplaced</p>",
        "id": 270040129,
        "sender_full_name": "David Pyke",
        "timestamp": 1643639645
    },
    {
        "content": "<p>well, I simply didn't look that it was 1..1... oops</p>",
        "id": 270040834,
        "sender_full_name": "John Moehrke",
        "timestamp": 1643639916
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192587\">@David Pyke</span>  I really dont understand. I've  physician related data. I have details on the conditions a physician treated &amp; procedures a physician attended. Both are related to physician not a patient(subject). In this case why do we need to refer subject?</p>",
        "id": 271258016,
        "sender_full_name": "Vibin_chander",
        "timestamp": 1644403373
    },
    {
        "content": "<p>Also if R4 is used  then Doesn't HAPI and AZURE API for FHIR behave in the same way? The condition bundle without referring the subject in the HAPI works fine. But it does not work in the Azure API for FHIR</p>",
        "id": 271258364,
        "sender_full_name": "Vibin_chander",
        "timestamp": 1644403553
    },
    {
        "content": "<p>so probably someone (a certification body) needs to validate the server functionalities</p>",
        "id": 271258447,
        "sender_full_name": "Vibin_chander",
        "timestamp": 1644403591
    },
    {
        "content": "<p>Every server may set its own 'rules' above and beyond what may be required by a jurisdiction. So you'll have to talk to the offending system vendor in question, of use a workaround. Only very few jurisdictions do certification of FHIR servers.</p>",
        "id": 271259301,
        "sender_full_name": "René Spronk",
        "timestamp": 1644404112
    },
    {
        "content": "<p>1...1 does it mean is it mandatory?</p>",
        "id": 271260714,
        "sender_full_name": "Vibin_chander",
        "timestamp": 1644404805
    },
    {
        "content": "<p>just trying to understand</p>",
        "id": 271260724,
        "sender_full_name": "Vibin_chander",
        "timestamp": 1644404811
    },
    {
        "content": "<p>R4 setting subject 1...1 in a procedure resource is obfuscating</p>",
        "id": 271261313,
        "sender_full_name": "Vibin_chander",
        "timestamp": 1644405135
    },
    {
        "content": "<p>Going back to the docs: Condition.subject is 1..1 in R5, and 1..1 in R4. as such a server SHOULD create an error if one posts a condition without that reference.</p>",
        "id": 271270321,
        "sender_full_name": "René Spronk",
        "timestamp": 1644410507
    },
    {
        "content": "<p>so HAPI is unreliable</p>",
        "id": 271272215,
        "sender_full_name": "Vibin_chander",
        "timestamp": 1644411523
    },
    {
        "content": "<p>Is HAPI unreliable or is it lenient enough to allow you to do what you want? I'm sure there is either an option or an overload that will force valid resources for your instance of HAPI. (Guessing).</p>",
        "id": 271273039,
        "sender_full_name": "Daniel Venton",
        "timestamp": 1644411943
    },
    {
        "content": "<p>all FHIR servers should be lenient enough to allow us to what we want</p>",
        "id": 271273591,
        "sender_full_name": "Vibin_chander",
        "timestamp": 1644412209
    },
    {
        "content": "<p>No, that is exactly what a standard is designed to prevent.  If everyone does what they want, then we don't have interoperability</p>",
        "id": 271274338,
        "sender_full_name": "David Pyke",
        "timestamp": 1644412569
    },
    {
        "content": "<p>If you feel there's a valid use-case for sharing patient-specific conditions that don't actually identify the patient, you can submit a change request asking for the cardinality to be loosened.  However, if you want to know what conditions a physician treated, those are absolutely tied to a patient - a patient had the condition.  If you're wanting a summary - E.g.. \"this physician has treated 5 hernias and 7 abdominal rashes\", then the Condition resource isn't appropriate - you'd need to use Observation to capture the point-in-time statistics.</p>",
        "id": 271291090,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1644419096
    },
    {
        "content": "<p>If it's a situation where you want to capture the details of everything the physician has done, but have the data anonymized, then the solution is to anonymize the record to point to an anonymized Patient - where the only details might be gender and birth-year or something like that.</p>",
        "id": 271291211,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1644419157
    },
    {
        "content": "<p>(You can even technically satisfy this requirement with a <code>contained</code> patient that has <em>no</em> demographic data at all.)</p>",
        "id": 271292305,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1644419596
    },
    {
        "content": "<p>Or a data absent reason extension in the subject.</p>",
        "id": 271519406,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1644542866
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192587\">@David Pyke</span>  In this case when I send an Condition / Procedure resource with a subject reference that does not exist (an dummy GUID), the Azure API for FHIR does not validate it. I was expecting it to throw an error saying that \"there is no patient reference mentioned exists\".  An FHIR server is suppose to validate if the patient actually exist or not right?</p>",
        "id": 271531488,
        "sender_full_name": "Vibin_chander",
        "timestamp": 1644554826
    },
    {
        "content": "<p>Checking RI would be up to the server. It might be fine in some cases.</p>",
        "id": 271667451,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1644638153
    }
]