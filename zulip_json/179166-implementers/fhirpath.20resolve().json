[
    {
        "content": "<p>I'm looking at the FHIRpath function <code>resolve()</code>see <a href=\"http://build.fhir.org/profiling.html#discriminator\" target=\"_blank\" title=\"http://build.fhir.org/profiling.html#discriminator\">http://build.fhir.org/profiling.html#discriminator</a> and <a href=\"http://hl7.org/fhirpath/#additional-functions\" target=\"_blank\" title=\"http://hl7.org/fhirpath/#additional-functions\">http://hl7.org/fhirpath/#additional-functions</a><br>\nIs <code>resolve()</code> safe to use when slicing a reference?<br>\nI want to slice <code>Consent.except</code> on <code>data.reference.resolve(BodySite.code)</code><br>\nIs that syntax even right?</p>",
        "id": 153918422,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1510208764
    },
    {
        "content": "<p>no resolve() doesn't take a parameter. What are you trying to do?</p>",
        "id": 153918649,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1510264881
    },
    {
        "content": "<p>but in principle, yes, you can slice this way</p>",
        "id": 153918650,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1510264891
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> <br>\nI want to record two types of information in an organ donor Consent resource: 1-whether the patient consents to any donations at all, and 2-for each of a list of organs, whether the patient consents to donation of that particular organ. (Depending upon the business owner, we might be able to get rid of case 1 as it is derivable from case 2, but maybe not.)<br>\nI'm exploring using slices of <code>Consent.except</code> for this. Options include:<br>\nslicing on <code>Consent.except.data.reference.reference</code> and using two profiles of BodySite.<br>\nslicing on <code>Consent.except.data.reference.reference---BodySite.code.coding</code>and using different invariants for each of the two slices.</p>\n<p>Where can I find guidance on or an example of using resolve()? - to get the syntax right.</p>",
        "id": 153918683,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1510271778
    },
    {
        "content": "<p>shouldn't you just use code for the body part?</p>",
        "id": 153918763,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1510293691
    },
    {
        "content": "<p>data.reference.resolve().code otherwise</p>",
        "id": 153918764,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1510293715
    },
    {
        "content": "<p>Thanks.<br>\nI'd like to use <code>code</code>, but its definition makes it seem different to codes used in other resources.</p>\n<p>Its definition of \"If this code is found in an instance, then the exception applies.\" makes me think that code is a tag used to identify data of interest. I can't see how that is relevant to consent to donate an organ.</p>\n<p>I must create an issue on that to see whether it can be changed in STU4.</p>\n<p>I could use an extension. That might be the best option.</p>",
        "id": 153918766,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1510294582
    },
    {
        "content": "<p>well, you're working against the instantiated scope of the resource. I'd use code... if the code is found in the instance of the body site, then the exception applies</p>",
        "id": 153918767,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1510294647
    },
    {
        "content": "<p>so it comes to the same thing</p>",
        "id": 153918768,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1510294656
    },
    {
        "content": "<p>Please explain more.</p>",
        "id": 153918769,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1510294694
    },
    {
        "content": "<p>what you're saying: use a body site with a code, and then slicing on it.... that's the same as putting code on the exception itself, since it's just referring to the code in the data (the body site) anyway</p>",
        "id": 153918770,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1510294778
    },
    {
        "content": "<p>the real wrongness is that you're not consenting to share the body site resource, you're consenting to share the body part itself. So I don't see how code is more wrong than a body site resource</p>",
        "id": 153918771,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1510294814
    },
    {
        "content": "<p>Is your suggestion to record the organ in <code>except.data(asBodySite).code</code> but slice on <code>except.code</code>?</p>",
        "id": 153918773,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1510295056
    },
    {
        "content": "<p>I agree that I seem to have gone down a rabbit hole.</p>",
        "id": 153918774,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1510295083
    },
    {
        "content": "<p>I think I might need to add an extension to except to hold what the consent is actually about.</p>",
        "id": 153918775,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1510295144
    }
]