[
    {
        "content": "<p>I'm not certain if here or conformance or implementers is the best place to post these issues.  I assume the IG validator is the same as the core validator so I will start here.</p>",
        "id": 171452984,
        "sender_full_name": "Eric Haas",
        "timestamp": 1563818513
    },
    {
        "content": "<p>1) AllergyIntolerance The clinical status can be absent if verification status is 'entered in error'. based on this invariant:</p>\n<blockquote>\n<p>ait-1  Rule    AllergyIntolerance.clinicalStatus SHALL be present if verificationStatus is not entered-in-error.   verificationStatus='entered-in-error' or clinicalStatus.exists()<br>\nait-2  Rule    AllergyIntolerance.clinicalStatus SHALL NOT be present if verification Status is entered-in-error   verificationStatus!='entered-in-error' or clinicalStatus.empty()</p>\n</blockquote>",
        "id": 171453117,
        "sender_full_name": "Eric Haas",
        "timestamp": 1563818610
    },
    {
        "content": "<p>in this example the validator raises an error:... <a href=\"https://healthedata1.github.io/USCoreR4Validator/AllergyIntolerance-6267833.json.html\" target=\"_blank\" title=\"https://healthedata1.github.io/USCoreR4Validator/AllergyIntolerance-6267833.json.html\">https://healthedata1.github.io/USCoreR4Validator/AllergyIntolerance-6267833.json.html</a></p>",
        "id": 171453279,
        "sender_full_name": "Eric Haas",
        "timestamp": 1563818741
    },
    {
        "content": "<p>where the verification status is 'entered in error' and clnical status is empty.</p>",
        "id": 171453344,
        "sender_full_name": "Eric Haas",
        "timestamp": 1563818769
    },
    {
        "content": "<p>I think in the expression <code>verificationStatus='entered-in-error'...</code>  should be  <code>verificationStatus.code='entered-in-erro'r...</code></p>",
        "id": 171453393,
        "sender_full_name": "Eric Haas",
        "timestamp": 1563818832
    },
    {
        "content": "<p>also when this error appears...</p>\n<div class=\"codehilite\"><pre><span></span>[Unsupported system https://fhir.blah.blah.blah system is not specified or implicit]\n</pre></div>",
        "id": 171454127,
        "sender_full_name": "Eric Haas",
        "timestamp": 1563819390
    },
    {
        "content": "<p>Does that only mean that GG's terminology server doesn't recognize the system?</p>",
        "id": 171454162,
        "sender_full_name": "Eric Haas",
        "timestamp": 1563819424
    },
    {
        "content": "<blockquote>\n<p>I think in the expression <code>verificationStatus='entered-in-error'...</code>  should be  <code>verificationStatus.code='entered-in-erro'r...</code></p>\n</blockquote>\n<p>Actually, I think you need something more like this:</p>\n<div class=\"codehilite\"><pre><span></span>verificationStatus.coding.exists(code = &#39;entered-in-error&#39;) or clinicalStatus.exists()\n</pre></div>\n\n\n<p>It also accounts for the (likely rare?) case of <code>verificationStatus</code> having multiple <code>coding</code>s defined.</p>",
        "id": 171464873,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1563827248
    },
    {
        "content": "<p><a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=22985\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=22985\">GF#22985</a>, and <a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=22986\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=22986\">GF#22986</a>  (for Condition)  <span class=\"user-mention\" data-user-id=\"191403\">@Michelle (Moseman) Miller</span>  These are R4 Technical Corrections and should be voted and FHIR-I and GG alerted.</p>",
        "id": 171479303,
        "sender_full_name": "Eric Haas",
        "timestamp": 1563840677
    },
    {
        "content": "<p>I've added to Patient Care's agenda on Thursday</p>",
        "id": 171521919,
        "sender_full_name": "Michelle (Moseman) Miller",
        "timestamp": 1563891009
    },
    {
        "content": "<p>how would I know, from these tasks, that they are R4 tasks? <span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> I would not find them. <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> how should committees flag them?</p>",
        "id": 171598880,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1563968907
    },
    {
        "content": "<p>Target release of r4 (or stu3? Weren't sure if we're patching that too)</p>",
        "id": 171599174,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1563969190
    },
    {
        "content": "<p>we'll be a doing an R3 patch too, though only fixing broken invariants, I think</p>",
        "id": 171764913,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1564138953
    },
    {
        "content": "<p>Hi All,</p>\n<p>I'm trying to validate a Patient resource downloaded from FHIR site and getting below mentioned error</p>\n<p>FHIR Validator Build ??<br>\nArguments: C:\\Users\\dpoply\\patient-example.json<br>\n  .. connect to tx server @ <a href=\"http://tx.fhir.org\" target=\"_blank\" title=\"http://tx.fhir.org\">http://tx.fhir.org</a><br>\n  .. definitions from hl7.fhir.core#4.0.1<br>\nInstalling hl7.fhir.core#4.0.1 to the package cache<br>\n  Fetching:|<br>\n  Analysing done.<br>\n    (v4.0.1-null)<br>\n  .. validate [C:\\Users\\dpoply\\patient-example.json]<br>\n<em>FAILURE</em> validating C:\\Users\\dpoply\\patient-example.json:  error:1 warn:0 info:0<br>\n  Fatal @ Patient (line 1, col2) : This does not appear to be a FHIR resource (unknown name 'Patient')</p>\n<p>Please help.</p>\n<p>Regards,<br>\nPoply</p>",
        "id": 180140069,
        "sender_full_name": "Deepak Poply",
        "timestamp": 1573138917
    },
    {
        "content": "<p>Can you attach the instance from your machine?</p>",
        "id": 180144387,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1573141423
    },
    {
        "content": "<p>that's an old validator</p>",
        "id": 180170078,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1573157101
    },
    {
        "content": "<p>update to the latest</p>",
        "id": 180170124,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1573157128
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> Do we know why the R4 FHIR spec continues to point to the old validator?</p>",
        "id": 180177916,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1573162158
    },
    {
        "content": "<p>it should not. If it does, it's because I haven't found the reference</p>",
        "id": 180178267,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1573162377
    },
    {
        "content": "<p>Downloads page validator link</p>",
        "id": 180178713,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1573162674
    },
    {
        "content": "<p>where exactly?</p>",
        "id": 180178736,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1573162684
    },
    {
        "content": "<p>The one that says \"official fhir validtor\" points to something on <a href=\"http://hl7.org/fhir\" target=\"_blank\" title=\"http://hl7.org/fhir\">hl7.org/fhir</a> rather than the <a href=\"http://build.fhir.org\" target=\"_blank\" title=\"http://build.fhir.org\">build.fhir.org</a> version</p>",
        "id": 180178852,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1573162740
    },
    {
        "content": "<p>hmm that reverted during the technical correction</p>",
        "id": 180179021,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1573162838
    },
    {
        "content": "<p>Wasn't sure if I should create a new topic for this, but I'm seeing what I think is an issue with the validator.</p>\n<p>Running: <code>java -jar org.hl7.fhir.validator.jar allergy.json -ig hl7.fhir.us.core -version 4.0</code></p>\n<p>Against this example resource: <a href=\"/user_uploads/10155/MRAZJuPfaLb3BmIqQ4tBQEeF/allergy.json\" target=\"_blank\" title=\"allergy.json\">allergy.json</a> </p>\n<p>I get</p>\n<div class=\"codehilite\"><pre><span></span>java -jar org.hl7.fhir.validator.jar allergy.json -ig hl7.fhir.us.core -version <span class=\"m\">4</span>.0\nFHIR Validation tool Version <span class=\"m\">4</span>.1.41-SNAPSHOT <span class=\"o\">(</span>Git# bdab9a78b39a<span class=\"o\">)</span>. Built <span class=\"m\">2019</span>-12-31T14:32:35.701+11:00 <span class=\"o\">(</span><span class=\"m\">7</span> days old<span class=\"o\">)</span>\nDetected Java version: <span class=\"m\">1</span>.8.0_222 from /Library/Java/JavaVirtualMachines/adoptopenjdk-8.jdk/Contents/Home/jre on x86_64 <span class=\"o\">(</span>64bit<span class=\"o\">)</span>. 3641MB available\nArguments: allergy.json -ig hl7.fhir.us.core -version <span class=\"m\">4</span>.0\nDirectories: <span class=\"nv\">Current</span> <span class=\"o\">=</span> /Users/radamson/Desktop, Package <span class=\"nv\">Cache</span> <span class=\"o\">=</span> /Users/radamson/.fhir/packages\n  .. FHIR Version <span class=\"m\">4</span>.0, definitions from hl7.fhir.r4.core#4.0.1\n  .. connect to tx server @ http://tx.fhir.org\n    <span class=\"o\">(</span>v4.0.1<span class=\"o\">)</span>\n+  .. load IG from hl7.fhir.us.core\n   ... Using version <span class=\"m\">3</span>.1.0\n  .. validate <span class=\"o\">[</span>allergy.json<span class=\"o\">]</span>\nTerminology server: Check <span class=\"k\">for</span> supported code systems <span class=\"k\">for</span> http://fhir.whatever.com/codes/AllergyClinicalStatus\n*FAILURE* validating allergy.json:  error:1 warn:0 info:0\n  Error @ AllergyIntolerance.clinicalStatus <span class=\"o\">(</span>line <span class=\"m\">8</span>, col16<span class=\"o\">)</span> : None of the codes provided are in the value <span class=\"nb\">set</span> http://hl7.org/fhir/ValueSet/allergyintolerance-clinical<span class=\"p\">|</span><span class=\"m\">4</span>.0.1 <span class=\"o\">(</span>http://hl7.org/fhir/ValueSet/allergyintolerance-clinical, and a code from this value <span class=\"nb\">set</span> is required<span class=\"o\">)</span> <span class=\"o\">(</span><span class=\"nv\">codes</span> <span class=\"o\">=</span> http://fhir.whatever.com/codes/AllergyClinicalStatus#active, http://terminology.hl7.org/CodeSystem/allergyintolerance-clinical#active<span class=\"o\">)</span>\n</pre></div>\n\n\n<p>If I remove one of Codings from the clinicalStatus CodeableConcept, leaving only one Coding it passes.  This is the second resource for convenience <a href=\"/user_uploads/10155/CLEXdiieZ4tMkRzozHHBF0b9/allergy2.json\" target=\"_blank\" title=\"allergy2.json\">allergy2.json</a>.</p>\n<p>I would expect <code>allergy.json</code> to pass even with the extra Codings in the CodeableConcept as the <a href=\"http://hl7.org/fhir/R4/terminologies.html#required\" target=\"_blank\" title=\"http://hl7.org/fhir/R4/terminologies.html#required\">required binding only requires that one of the Coding values SHALL be from the specified value set</a>.</p>\n<p>Am I doing or thinking about something wrong here?  Happy to provide more information or test further.</p>",
        "id": 185028596,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1578415542
    },
    {
        "content": "<p>Yes, that seems like an error in the validator.  Can you submit a change request?</p>",
        "id": 185028864,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1578415657
    },
    {
        "content": "<p><a href=\"https://jira.hl7.org/browse/FHIR-25424\" target=\"_blank\" title=\"https://jira.hl7.org/browse/FHIR-25424\">FHIR-25424 created to track this</a></p>",
        "id": 185050221,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1578428204
    },
    {
        "content": "<p>ok thanks. fixed next release</p>",
        "id": 185282907,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1578632885
    }
]