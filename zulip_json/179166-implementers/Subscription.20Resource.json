[
    {
        "content": "<p>Hey guys, working on a rest-hook subscription on a few test servers but getting no luck with it succeeding to reach my endpoint (my endpoint takes the resource and passes it to a staging area in my DB). I have been putting 2 subscription resources into these test servers, the rest-hook, and email channels so I know if i get an email but no data in my staging area that something is wrong with the endpoint but no luck on either. Can anyone help?</p>",
        "id": 153978342,
        "sender_full_name": "Justin",
        "timestamp": 1532611651
    },
    {
        "content": "<p>Try retrieving the subscription resource you've put up and see if what is it's status - should be <code>active</code>, hopefully not <code>error</code></p>",
        "id": 153978343,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1532612510
    },
    {
        "content": "<p>for the 2 in my own <a href=\"http://hspconsortium.org\" target=\"_blank\" title=\"http://hspconsortium.org\">hspconsortium.org</a> test instance they are listed as <code>active</code> and for the 2 I have in the <a href=\"https://api-stu3.hspconsortium.org/STU301withSynthea/open\" target=\"_blank\" title=\"https://api-stu3.hspconsortium.org/STU301withSynthea/open\">https://api-stu3.hspconsortium.org/STU301withSynthea/open</a> they are listed as <code>requested</code></p>\n<p>This is my Resource for the email channel:</p>\n<div class=\"codehilite\"><pre><span></span>{\n  &quot;resourceType&quot;: &quot;Subscription&quot;,\n  &quot;status&quot;: &quot;requested&quot;,\n  &quot;contact&quot;: [\n    {\n      &quot;system&quot;: &quot;phone&quot;,\n      &quot;value&quot;: &quot;7#######00&quot;\n    }\n  ],\n  &quot;end&quot;: &quot;2021-01-01T00:00:00Z&quot;,\n  &quot;reason&quot;: &quot;Monitor New and Updated Encounters&quot;,\n  &quot;criteria&quot;: &quot;Encounter?status=arrived&amp;_format=json&quot;,\n  &quot;channel&quot;: {\n    &quot;type&quot;: &quot;email&quot;,\n    &quot;endpoint&quot;: &quot;mailto:justin.loverme@email.com&quot;,\n    &quot;header&quot;: &quot;New Encounter Arrived.&quot;\n  },\n  &quot;tag&quot;: [\n    {\n      &quot;system&quot;: &quot;https://test.azurewebsites.net&quot;,\n      &quot;code&quot;: &quot;Test&quot;\n    }\n  ]\n}\n</pre></div>",
        "id": 153978346,
        "sender_full_name": "Justin",
        "timestamp": 1532613195
    },
    {
        "content": "<p>and for the rest-hook:</p>\n<div class=\"codehilite\"><pre><span></span>{\n  &quot;resourceType&quot;: &quot;Subscription&quot;,\n  &quot;status&quot;: &quot;requested&quot;,\n  &quot;contact&quot;: [\n    {\n      &quot;system&quot;: &quot;phone&quot;,\n      &quot;value&quot;: &quot;7#######00&quot;\n    }\n  ],\n  &quot;end&quot;: &quot;2021-01-01T00:00:00Z&quot;,\n  &quot;reason&quot;: &quot;Monitor New and Updated Encounters&quot;,\n  &quot;criteria&quot;: &quot;Encounter?status=arrived&amp;_format=json&quot;,\n  &quot;channel&quot;: {\n    &quot;type&quot;: &quot;rest-hook&quot;,\n    &quot;endpoint&quot;: &quot;https://test.azurewebsites.net/Fhir/FhirController&quot;,\n    &quot;payload&quot;: &quot;application/fhir+json&quot;\n  },\n  &quot;tag&quot;: [\n    {\n      &quot;system&quot;: &quot;https://test.azurewebsites.net&quot;,\n      &quot;code&quot;: &quot;Test&quot;\n    }\n  ]\n}\n</pre></div>",
        "id": 153978354,
        "sender_full_name": "Justin",
        "timestamp": 1532614176
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"196470\">@Justin</span> posting it to <code>https://vonk.fire.ly/administration/Subscription</code> reveals:</p>\n<div class=\"codehilite\"><pre><span></span>    <span class=\"s2\">&quot;issue&quot;</span><span class=\"err\">:</span> <span class=\"p\">[</span>\n        <span class=\"p\">{</span>\n            <span class=\"nt\">&quot;severity&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;error&quot;</span><span class=\"p\">,</span>\n            <span class=\"nt\">&quot;code&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;invalid&quot;</span><span class=\"p\">,</span>\n            <span class=\"nt\">&quot;details&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n                <span class=\"nt\">&quot;coding&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n                    <span class=\"p\">{</span>\n                        <span class=\"nt\">&quot;system&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;http://hl7.org/fhir/dotnet-api-operation-outcome&quot;</span><span class=\"p\">,</span>\n                        <span class=\"nt\">&quot;code&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;5002&quot;</span>\n                    <span class=\"p\">}</span>\n                <span class=\"p\">],</span>\n                <span class=\"nt\">&quot;text&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Criteria is not a valid in this subscription&quot;</span>\n            <span class=\"p\">}</span>\n        <span class=\"p\">}</span>\n    <span class=\"p\">]</span>\n</pre></div>\n\n\n<p>Better use <code>\"Encounter?status=arrived\"</code> as remember <code>_format=json</code> isn't part of search. Fixing that up, your subscription works!</p>",
        "id": 153978620,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1532672405
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191363\">@Vadim Peretokin</span> ! And how do I get a Subscription to go from requested status to active?</p>",
        "id": 153978656,
        "sender_full_name": "Justin",
        "timestamp": 1532695286
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"196470\">@Justin</span> the server automatically does it - try posting your example above to Vonk and <code>GET</code> it straight after</p>",
        "id": 153978657,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1532695339
    },
    {
        "content": "<p>Yes I see that now! Thank you!</p>",
        "id": 153978658,
        "sender_full_name": "Justin",
        "timestamp": 1532695362
    }
]