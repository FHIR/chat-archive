[
    {
        "content": "<p>Hi - Using sushi 2.2.3, FHIR v4.0.1. <br>\nAdded invariant rule on Claim profile as expression \"careTeam.sequence = item.careTeamSequence\".  <br>\nExample instance includes (code snippet):</p>\n<div class=\"codehilite\"><pre><span></span><code>* careTeam.sequence  = 1\n* careTeam.provider  = Reference(DrKelly)\n      .....\n\n* item.sequence                     = 1\n</code></pre></div>\n\n<p>* item.careTeamSequence = 1<br>\n     .....<br>\nQA error is:<br>\n<a href=\"/user_uploads/10155/KM9Pf9OqVpKFVe0gyAPVDjBP/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/KM9Pf9OqVpKFVe0gyAPVDjBP/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/KM9Pf9OqVpKFVe0gyAPVDjBP/image.png\"></a></div><p>Any ideas why the QA warning occurs?</p>",
        "id": 267630598,
        "sender_full_name": "Debra Mangum",
        "timestamp": 1641928259
    },
    {
        "content": "<p>Presuming that you're declaring this at the base of Claim, what you'll get is two collections = the full set of careTeam.sequences and the full set of item.careTeamSequence values.  If the two collections aren't identical, the warning will fire.</p>",
        "id": 267646738,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1641936081
    },
    {
        "content": "<p>What are you trying to actually enforce?  That the item.careTeamSequence is one of the defined careTeam.sequence values?</p>",
        "id": 267646775,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1641936108
    },
    {
        "content": "<p>If so, then your context should be in item.careTeamSequence and it should be <code>%resource.careTeam[sequence=$this].exists()</code> - I think :)</p>",
        "id": 267646890,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1641936172
    }
]