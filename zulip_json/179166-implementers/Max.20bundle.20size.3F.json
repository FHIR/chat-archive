[
    {
        "content": "<p>Is there a maximum number of entries in a bundle?  I don't see a limit in the Bundle resource specification, but I get this message from a Vonk server:</p>\n<p>Response Body: {<br>\n  \"resourceType\": \"OperationOutcome\",<br>\n  \"id\": \"4837048c-7915-4d68-a4dc-db6dd4c3ab3e\",<br>\n  \"meta\": {<br>\n    \"versionId\": \"c7a228fb-1b41-4610-86fd-472c807baaf3\",<br>\n    \"lastUpdated\": \"2020-09-18T10:15:43.351+00:00\"<br>\n  },<br>\n  \"issue\": [<br>\n    {<br>\n      \"severity\": \"error\",<br>\n      \"code\": \"exception\",<br>\n      \"details\": {<br>\n        \"coding\": [<br>\n          {<br>\n            \"system\": \"<a href=\"http://hl7.org/fhir/dotnet-api-operation-outcome\">http://hl7.org/fhir/dotnet-api-operation-outcome</a>\",<br>\n            \"code\": \"5006\"<br>\n          }<br>\n        ],<br>\n        \"text\": \"Too many entries in bundle. Max supported number of entries is 500\"<br>\n      }<br>\n    }<br>\n  ]<br>\n}</p>\n<p>The HAPI server I'm testing with doesn't complain about this.</p>\n<p>Anyone else run into this?</p>\n<p>Thanks!</p>",
        "id": 210502398,
        "sender_full_name": "Dave Hill",
        "timestamp": 1600426032
    },
    {
        "content": "<p>there's no theortical limit to the size of a bundle, but servers are allowed - and pretty much have to - put some limit on to protect themselve s</p>",
        "id": 210504162,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1600427174
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> , </p>\n<p>In post-acute care, some of the assessments are quite large, which results in a lengthy SDCQuestionnaireResponse.  When I convert that SDCQuestionnaireResponse into Observations for querying and storage, it results in over 500 observations.  There is another Observation-based resource that references these individual observations, so I am writing the whole thing as a transaction so that referential integrity is preserved in the destination system.</p>\n<p>If there is a better approach, that would be great.  I agree that servers may have to have a limit - is 500 a suitable limit?</p>\n<p>Thanks!</p>",
        "id": 210542731,
        "sender_full_name": "Dave Hill",
        "timestamp": 1600445991
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"222957\">@Dave Hill</span> Have you checked whether you can configure that limit?</p>",
        "id": 210544457,
        "sender_full_name": "Alexander Kiel",
        "timestamp": 1600446808
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"197470\">@Alexander Kiel</span> Thanks, I will check with the owner of the server.  I don't have direct access to that aspect of the server.  Anyone know if the Vonk server has that option?</p>",
        "id": 210544976,
        "sender_full_name": "Dave Hill",
        "timestamp": 1600447061
    },
    {
        "content": "<p>Looks like there is a setting in Vonk to do set the maximum size of an incoming bundle - <a href=\"http://docs.simplifier.net/vonk/configuration/appsettings.html#protect-against-large-input\">http://docs.simplifier.net/vonk/configuration/appsettings.html#protect-against-large-input</a></p>",
        "id": 210545775,
        "sender_full_name": "Dave Hill",
        "timestamp": 1600447467
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"222957\">@Dave Hill</span> Looks good.</p>",
        "id": 210546666,
        "sender_full_name": "Alexander Kiel",
        "timestamp": 1600447954
    },
    {
        "content": "<p>Might be a useful value to put in the capability statement? There are different dimensions along which the limits can be set, similar to the Vonk config. The Google server is configured with a 50MiB bundle limit, 4500 entries in a transaction, no limit in a batch (whatever you can fit into 50MiB and doesn't take so long that it hits the API timeout).</p>",
        "id": 210547784,
        "sender_full_name": "Paul Church",
        "timestamp": 1600448481
    },
    {
        "content": "<p>I am more interested in where the codesystem \"<a href=\"http://hl7.org/fhir/dotnet-api-operation-outcome\">http://hl7.org/fhir/dotnet-api-operation-outcome</a>\" is defined.  <span class=\"user-mention\" data-user-id=\"203235\">@Ward Weistra</span></p>",
        "id": 210624394,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1600534590
    },
    {
        "content": "<p>Great question <span class=\"user-mention\" data-user-id=\"191506\">@Yunwei Wang</span>, no hits: <a href=\"http://registry.fhir.org/results?query=%22http%3A%2F%2Fhl7.org%2Ffhir%2Fdotnet-api-operation-outcome%22&amp;latestFilter=true\">http://registry.fhir.org/results?query=%22http%3A%2F%2Fhl7.org%2Ffhir%2Fdotnet-api-operation-outcome%22&amp;latestFilter=true</a> <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>\n<p>Btw, I suspect it's a performance based choice to not allow bundles to get too large.</p>\n<p><span class=\"user-mention\" data-user-id=\"191757\">@Christiaan Knaap</span> <span class=\"user-mention\" data-user-id=\"191347\">@Mirjam Baltus</span> Is this max bundle size configurable? And should <a href=\"http://hl7.org/fhir/dotnet-api-operation-outcome\">http://hl7.org/fhir/dotnet-api-operation-outcome</a> have a definition somewhere?</p>",
        "id": 210625410,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1600536096
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"203235\">@Ward Weistra</span> Correct, it's just a protection for the server. It's configurable by setting the SizeLimit option MaxBatchEntries. See <a href=\"http://docs.simplifier.net/vonk/configuration/appsettings.html#protect-against-large-input\">http://docs.simplifier.net/vonk/configuration/appsettings.html#protect-against-large-input</a></p>\n<p>I agree that it's a bit too low by default, especially if you are dealing with Observation resources as described.<br>\nAdditionally, the is a limit for the max. size (in MB).</p>",
        "id": 210788470,
        "sender_full_name": "Alexander Zautke",
        "timestamp": 1600716469
    },
    {
        "content": "<p>Most of the codes from <a href=\"http://hl7.org/fhir/dotnet-api-operation-outcome\">http://hl7.org/fhir/dotnet-api-operation-outcome</a> can be found here <a href=\"https://github.com/FirelyTeam/fhir-net-api/blob/add8073b8d096f66cde13f54c940048ba4363e0a/src/Hl7.Fhir.Specification/Support/Issue.cs\">https://github.com/FirelyTeam/fhir-net-api/blob/add8073b8d096f66cde13f54c940048ba4363e0a/src/Hl7.Fhir.Specification/Support/Issue.cs</a></p>",
        "id": 210788860,
        "sender_full_name": "Alexander Zautke",
        "timestamp": 1600716683
    },
    {
        "content": "<p>A bit more human readable documentation for those codes is here: <a href=\"https://simplifier.net/docs/fhir-net-api/home\">https://simplifier.net/docs/fhir-net-api/home</a></p>",
        "id": 210795953,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1600720341
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"222957\">@Dave Hill</span> <span aria-label=\"wait one second\" class=\"emoji emoji-261d\" role=\"img\" title=\"wait one second\">:wait_one_second:</span>Ô∏è</p>",
        "id": 210796086,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1600720403
    }
]