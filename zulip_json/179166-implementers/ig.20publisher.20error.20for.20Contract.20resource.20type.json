[
    {
        "content": "<p><a href=\"/user_uploads/10155/RhbjfZBvBXSjK8PErMFUVse4/CCDA-on-FHIR-Consent.xml\" target=\"_blank\" title=\"CCDA-on-FHIR-Consent.xml\">CCDA-on-FHIR-Consent.xml</a> <br>\nI have this StructureDefinition that seems OK to me... but, the IG Publisher is failing with the following error:<br>\nSnapshot for <a href=\"http://hl7.org/fhir/ccda/StructureDefinition/CCDA-on-FHIR-Consent\" target=\"_blank\" title=\"http://hl7.org/fhir/ccda/StructureDefinition/CCDA-on-FHIR-Consent\">http://hl7.org/fhir/ccda/StructureDefinition/CCDA-on-FHIR-Consent</a> does not contain differential element with id: Contract.type.coding.code<br>\nI have checked the spec, and Contract.type IS a \"CodeableConcept\" data-type, so \"Contract.type.coding.code\" should exist. <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>  do you think this is a bug?</p>",
        "id": 153891676,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1496170819
    },
    {
        "content": "<p>it's probably a bug. can you add it to build\\tests\\resources\\snapshot-generation-tests.xml and then we can look at it?</p>",
        "id": 153891680,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1496170937
    },
    {
        "content": "<p>Sure I'll give that a go. I haven't done anything with build/test/resources/snapshot-generation-tests.xml<br>\nbut, i'll add one by example of others</p>",
        "id": 153891694,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1496173195
    },
    {
        "content": "<p>I'm trying to move this part of the infrastructure (snapshot generation/ validation) to a TDD basis </p>",
        "id": 153891695,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1496173330
    },
    {
        "content": "<p>Ok. Committed change #12057<br>\nHopefully I did it right...</p>",
        "id": 153891700,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1496174045
    },
    {
        "content": "<p>Any update on this?</p>",
        "id": 153892551,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1496777628
    },
    {
        "content": "<p>We're playing with snapshot generation &amp; validation today.</p>",
        "id": 153892580,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1496797913
    },
    {
        "content": "<p>you did. I fixed a bug in the code, but there were bugs in your test as well:<br>\n- the FHIRPath statements were wrong - for pattern[x], you don't use patternCode, you use just pattern<br>\n- in the differential, you have to either get the order correct, or ask for the diff to be sorted <em>and not use a sparse differential</em></p>",
        "id": 153892585,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1496798433
    },
    {
        "content": "<p>sorting is not supported for sparse differentials</p>",
        "id": 153892586,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1496798447
    },
    {
        "content": "<p>nm</p>",
        "id": 153892608,
        "sender_full_name": "Eric Haas",
        "timestamp": 1496802251
    }
]