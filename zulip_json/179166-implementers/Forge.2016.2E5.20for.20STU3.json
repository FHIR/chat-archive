[
    {
        "content": "<p>Forge 16.5 for STU3 is now available for download from <a href=\"https://simplifier.net/forge\" target=\"_blank\" title=\"https://simplifier.net/forge\">https://simplifier.net/forge</a>.</p>\n<p>This new release fixes some issues reported by the community and also introduces a couple of usability improvements. All users are encouraged to update to the current version.</p>\n<p>FHIR API Improvements:</p>\n<ul>\n<li>Update the FHIR .NET API library to 0.93.5-beta6</li>\n<li>Stability improvements for DirectorySource</li>\n<li>Handle bug in SimpleQuantity core datatype definition</li>\n</ul>\n<p>Features:</p>\n<ul>\n<li>NEW! Automatically initialize default slicing discriminator for type slices</li>\n<li>NEW! FHIR Path expression validation</li>\n</ul>\n<p>Bug fixes:</p>\n<ul>\n<li>EXPERIMENTAL! Improved matching of base element types</li>\n<li>Serialize constraints on meta.security.* and meta.tag.* elements to differential in proper order</li>\n<li>eld-16 sliceName validation</li>\n<li>Explicitly remove old child constraints after updating element type</li>\n<li>Import resources from FHIR server and/or Simplifier</li>\n<li>Fix broken hyperlink to Furore news page on Simplifier</li>\n</ul>\n<p>Detailed release notes: <a href=\"https://simplifier.net/ui/OrganizationNews/Show?id=34\" target=\"_blank\" title=\"https://simplifier.net/ui/OrganizationNews/Show?id=34\">https://simplifier.net/ui/OrganizationNews/Show?id=34</a></p>\n<p>If you discover any issues or want to submit a feature request, please contact us.</p>\n<p>Happy profiling!</p>\n<p>Michel Rutten</p>",
        "id": 153902772,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1503069215
    },
    {
        "content": "<blockquote>\n<p>Forge 16.5 for STU3 is now available for download from <a href=\"https://simplifier.net/forge\" target=\"_blank\" title=\"https://simplifier.net/forge\">https://simplifier.net/forge</a>.</p>\n<p>This new release fixes some issues reported by the community and also introduces a couple of usability improvements. All users are encouraged to update to the current version.</p>\n<p>FHIR API Improvements:</p>\n<ul>\n<li>Update the FHIR .NET API library to 0.93.5-beta6</li>\n<li>Stability improvements for DirectorySource</li>\n<li>Handle bug in SimpleQuantity core datatype definition</li>\n</ul>\n<p>Features:</p>\n<ul>\n<li>NEW! Automatically initialize default slicing discriminator for type slices</li>\n<li>NEW! FHIR Path expression validation</li>\n</ul>\n<p>Bug fixes:</p>\n<ul>\n<li>EXPERIMENTAL! Improved matching of base element types</li>\n<li>Serialize constraints on meta.security.* and meta.tag.* elements to differential in proper order</li>\n<li>eld-16 sliceName validation</li>\n<li>Explicitly remove old child constraints after updating element type</li>\n<li>Import resources from FHIR server and/or Simplifier</li>\n<li>Fix broken hyperlink to Furore news page on Simplifier</li>\n</ul>\n<p>Detailed release notes: <a href=\"https://simplifier.net/ui/OrganizationNews/Show?id=34\" target=\"_blank\" title=\"https://simplifier.net/ui/OrganizationNews/Show?id=34\">https://simplifier.net/ui/OrganizationNews/Show?id=34</a></p>\n<p>If you discover any issues or want to submit a feature request, please contact us.</p>\n<p>Happy profiling!</p>\n<p>Michel Rutten</p>\n</blockquote>\n<p>I've just created an extension in forge and run it through the validator and I get an warning</p>\n<p>Overall result: SUCCESS</p>\n<p>[WARNING] Evaluation of FhirPath for constraint 'eld-16' failed: Invocation of 'binary.or' failed: Invocation of 'matches' failed: parsing \"^[a-zA-Z0-9\\-\\_]+$\" - Unrecognized escape sequence \\_. (at StructureDefinition.differential[0].element[1])</p>\n<p>Validation run took 53 miliseconds</p>\n<p>&lt;differential&gt;<br>\n &lt;element id=\"Extension.url\"&gt;<br>\n&lt;path value=\"Extension.url\"/&gt;<br>\n&lt;fixedUri value=\"http://www.eldbdev.org/StructureDefinition/MyExtension\"/&gt;<br>\n&lt;/element&gt;<br>\n &lt;element id=\"Extension.value[x]:valueString\"&gt;<br>\n&lt;path value=\"Extension.valueString\"/&gt;<br>\n&lt;sliceName value=\"valueString\"/&gt;<br>\n &lt;type&gt;<br>\n&lt;code value=\"string\"/&gt;<br>\n&lt;/type&gt;<br>\n&lt;/element&gt;<br>\n&lt;/differential&gt;</p>\n<p>Is this an error in the underlying validator rather than the extension? An incorrectly copied regular expression?</p>",
        "id": 153903381,
        "sender_full_name": "Chris Munro",
        "timestamp": 1503486537
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"193298\">@Chris Munro</span>, apparently the current regex on element id rejects the \"[\" and \"]\" brackets.<br>\nPer convention, the standard element id for polymorphic elements is always generated from the original element name, e.g. \"value[x]\". We agreed on this format during the Madrid WGM.<br>\nSo I guess the element id regex should be updated to also accept \"[]\" characters.<br>\nMaybe you can submit an issue to GForge?</p>",
        "id": 153903382,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1503487830
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191336\">@Michel Rutten</span> for the reply- I know that the warning is safe to ignore now.</p>",
        "id": 153903386,
        "sender_full_name": "Chris Munro",
        "timestamp": 1503492539
    },
    {
        "content": "<p>Did you already submit a GForge issue, or shall I take care of it?</p>",
        "id": 153903387,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1503492772
    },
    {
        "content": "<blockquote>\n<p>Did you already submit a GForge issue, or shall I take care of it?</p>\n</blockquote>\n<p>No, I haven't used GForge before so if you could do that it would be great, thanks</p>",
        "id": 153903388,
        "sender_full_name": "Chris Munro",
        "timestamp": 1503492891
    },
    {
        "content": "<p>Done: #13769<br>\n<a href=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13769\" target=\"_blank\" title=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13769\">https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13769</a></p>",
        "id": 153903396,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1503494494
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191336\">@Michel Rutten</span> </p>\n<p>I've noticed that even with &lt;sliceName value=\"Test\"/&gt;</p>\n<p>I still get a warning of <br>\n[WARNING] Evaluation of FhirPath for constraint 'eld-16' failed: Invocation of 'binary.or' failed: Invocation of 'matches' failed: parsing \"^[a-zA-Z0-9\\-\\_]+$\" - Unrecognized escape sequence \\_. (at StructureDefinition.differential[0].element[6])</p>\n<p>This looks to be because in the spec there are escape characters (<a href=\"https://www.hl7.org/fhir/elementdefinition-definitions.html\" target=\"_blank\" title=\"https://www.hl7.org/fhir/elementdefinition-definitions.html\">https://www.hl7.org/fhir/elementdefinition-definitions.html</a>) :</p>\n<p>eld-16: sliceName must be composed of proper tokens separated by \"/\" (expression : sliceName.empty() or sliceName.matches('^[a-zA-Z0-9\\\\/\\\\-\\\\_]+$'), xpath: not(exists(f:sliceName/@value)) or matches(f:sliceName/@value, '^[a-zA-Z0-9\\\\/\\\\-\\\\_]+$'))</p>\n<p>and the way java/c# process the escaped character in the regular expression?</p>",
        "id": 153903404,
        "sender_full_name": "Chris Munro",
        "timestamp": 1503495170
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"193298\">@Chris Munro</span>, this has been fixed in release 16.5. I recommend you update to the latest version.<br>\nOriginally, I literally copied the regex from the spec to C# code. But as you discovered, character escaping rules are different. The current release should fix that.</p>",
        "id": 153903407,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1503496000
    },
    {
        "content": "<p>BTW Are you referring to the .NET Validator or the Java validator?</p>",
        "id": 153903410,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1503497352
    },
    {
        "content": "<p>Yes it's fine in forge, but in simplifier there is still an error showing once you load in the profile from forge and the same for the C# API validator I'm not sure about the java one though</p>",
        "id": 153903411,
        "sender_full_name": "Chris Munro",
        "timestamp": 1503497437
    },
    {
        "content": "<p>OK thanks for the feedback. We'll have to fix this in the API.</p>",
        "id": 153903413,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1503498329
    },
    {
        "content": "<p><a href=\"https://github.com/ewoutkramer/fhir-net-api/issues/413\" target=\"_blank\" title=\"https://github.com/ewoutkramer/fhir-net-api/issues/413\">https://github.com/ewoutkramer/fhir-net-api/issues/413</a></p>",
        "id": 153903414,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1503498484
    },
    {
        "content": "<p>Funny this shows up here and now - it means our unit-test that checks all fhirpath statements must have missed this.</p>",
        "id": 153903416,
        "sender_full_name": "Ewout Kramer",
        "timestamp": 1503498869
    },
    {
        "content": "<p>It seems that on its way from the FHIRPath expression in the StructureDefinition for ElementDefinition to the FHIRPath validator, the double backslashes get unescaped.  <span class=\"user-mention\" data-user-id=\"193298\">@Chris Munro</span>, did the message on your screen really have  <code>\\_</code> in the pattern or had it <code>\\\\_</code> ?  Just to make sure Zulip did not mess things up ;-)</p>",
        "id": 153903418,
        "sender_full_name": "Ewout Kramer",
        "timestamp": 1503500426
    },
    {
        "content": "<p>(BTW in Zulip you can click a message and \"view source\" to see how it was initially entered.)</p>",
        "id": 153903419,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1503500494
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/mOCVxUnwNu0xRRUFBAvThAms/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/mOCVxUnwNu0xRRUFBAvThAms/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/mOCVxUnwNu0xRRUFBAvThAms/pasted_image.png\"></a></div>",
        "id": 153903420,
        "sender_full_name": "Chris Munro",
        "timestamp": 1503500515
    },
    {
        "content": "<p>And from the <a href=\"https://www.hl7.org/fhir/elementdefinition-definitions.html\" target=\"_blank\" title=\"https://www.hl7.org/fhir/elementdefinition-definitions.html\">FHIR spec</a>:</p>\n<p><a href=\"/user_uploads/10155/FpezRlXgVrtAnFU_7MX0FfL8/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/FpezRlXgVrtAnFU_7MX0FfL8/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/FpezRlXgVrtAnFU_7MX0FfL8/pasted_image.png\"></a></div>",
        "id": 153903421,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1503500582
    },
    {
        "content": "<p>Ok, so I think I found the culprit. I was assuming my FHIRPath parser complained about the unrecognized escape sequence, but in fact it is the .NET regex evaluator that is called in the end. It will not accept <code>\\_</code> as an escape sequence, and from what I find (superficially) in Google, it's right not to accept it. <code>\\/</code> and <code>\\-</code> are fine, but <code>\\_</code> is not....</p>",
        "id": 153903500,
        "sender_full_name": "Ewout Kramer",
        "timestamp": 1503572530
    },
    {
        "content": "<blockquote>\n<p>For PCRE, and most other so-called Perl-compatible flavors, escape these outside character classes:<br>\n.^$*+?()[{\\|<br>\nand these inside character classes:<br>\n^-]\\<br>\nFor POSIX extended regexes (ERE), escape these outside character classes (same as PCRE):<br>\n.^$*+?()[{\\|<br>\nEscaping any other characters is an error with POSIX ERE.</p>\n</blockquote>",
        "id": 153903501,
        "sender_full_name": "Ewout Kramer",
        "timestamp": 1503572612
    },
    {
        "content": "<p>(note that last sentence, it's from <a href=\"https://stackoverflow.com/questions/399078/what-special-characters-must-be-escaped-in-regular-expressions\" target=\"_blank\" title=\"https://stackoverflow.com/questions/399078/what-special-characters-must-be-escaped-in-regular-expressions\">https://stackoverflow.com/questions/399078/what-special-characters-must-be-escaped-in-regular-expressions</a>)</p>",
        "id": 153903503,
        "sender_full_name": "Ewout Kramer",
        "timestamp": 1503572636
    },
    {
        "content": "<p>Created a tracker item: <a href=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13771\" target=\"_blank\" title=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13771\">https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=13771</a></p>",
        "id": 153903523,
        "sender_full_name": "Ewout Kramer",
        "timestamp": 1503573475
    }
]