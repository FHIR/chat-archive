[
    {
        "content": "<p>Can a MessageDefinition be used to define contents of a FHIR Document i.e. it consists of </p>\n<p>Composition (1..1)<br>\nEncounter (1..1)<br>\nPatient (1..1)</p>",
        "id": 159053995,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1550743007
    },
    {
        "content": "<p>etc. </p>\n<p>It's not exactly a message but I may also have a very Encounter message bundle which looks like</p>\n<p>MessageHeader (1..1)<br>\nComposition (0..1)<br>\nEncounter (1..1)<br>\nPatient (1..1)<br>\netc</p>",
        "id": 159054041,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1550743078
    },
    {
        "content": "<p>It looks possible. What I'm trying to do is show developers what the XYZ FHIR Document should look like (I can show an example bundle but need a simple reference which shows which resources and profiles it consists of)</p>",
        "id": 159054230,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1550743298
    },
    {
        "content": "<p>Sounds like GraphDefinition to me..</p>",
        "id": 159056205,
        "sender_full_name": "René Spronk",
        "timestamp": 1550745045
    },
    {
        "content": "<p>I'll look into that but I think that's at a layer down from where I'm looking (I want to understand what the Bundle contents should be)</p>",
        "id": 159056763,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1550745523
    },
    {
        "content": "<p>I think my answer is MessageDefinition, I've been misled by some local examples of MessageDefinition.</p>",
        "id": 159069758,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1550758001
    },
    {
        "content": "<p>MessageDefinition is not intended to define documents.  MessageDefinition requires an event - which is not relevant for document.  It also requires a focus for the event, which again is generally not relevant.  GraphDefinition should be all that's required to define a document.</p>",
        "id": 159077185,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1550763413
    },
    {
        "content": "<p>Are their examples of a MessageDefinition and resulting message.</p>\n<p>Bits I’m not clear on:</p>\n<p>I’m presuming MessageDefinition implies a bundle (is it implied this is a message Bundle?)</p>\n<p>In that bundle it is implied the first resource is MeassageHeader (or should that be a focus in MD)</p>\n<p>If the MessageDefintion refers to a fhir document. Does it have a focus of Bundle or Composition.<br>\n(The example I’ve seen uses bundle - which is a fhir document). If it is Bundle, how do I define the second ‘payload’ bundle, another messagedefintion with graph? </p>\n<p>I think the example I’ve been looking at is wrong.</p>",
        "id": 159135565,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1550818032
    },
    {
        "content": "<p>If the message's sole purpose is to transmit a FHIR document, the MessageHeader.focus would be a Bundle.  The graph definition could have a profile that described the document, but there's not (yet) a way for a GraphDefinition to point to a GraphDefinition for a child bundle.  (Messaging isn't super common in FHIR and messages passing around documents is even less common, so there hasn't been a lot of focus on such requirements.)</p>",
        "id": 159135701,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1550818244
    },
    {
        "content": "<p>For reuse (the fhir document could rest), it seems I should do a graph for the fhir document. </p>\n<p>The graph for the MessageDefinition could refer to this.</p>\n<p>Also seems I should link this document graph to the focus element. (I think that’s what the extensions in this example is trying to do <a href=\"https://fhir.nhs.uk/STU3/MessageDefinition/ITK-MH-eDischarge-MessageDefinition-Instance-1\" target=\"_blank\" title=\"https://fhir.nhs.uk/STU3/MessageDefinition/ITK-MH-eDischarge-MessageDefinition-Instance-1\">https://fhir.nhs.uk/STU3/MessageDefinition/ITK-MH-eDischarge-MessageDefinition-Instance-1</a>)</p>",
        "id": 159137708,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1550821314
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191687\">@Kevin Mayfield</span> The NHS uses the Composition resource as the focal resource in a message, where the Composition is NOT a document, but just acting as a grouper. See <a href=\"https://vimeo.com/243295695\" target=\"_blank\" title=\"https://vimeo.com/243295695\">https://vimeo.com/243295695</a> , at 27:30</p>",
        "id": 159138479,
        "sender_full_name": "René Spronk",
        "timestamp": 1550822438
    },
    {
        "content": "<p>That confuses me a little, the NHS examples of FHIR Documents do seem to be FHIR documents. Where does the grouper comment come from (I'm including messaging in this comment)</p>",
        "id": 159138651,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1550822612
    },
    {
        "content": "<p>e.g. This is a rendered FHIR Document. <a href=\"https://data.developer.nhs.uk/ccri/ed/patient/1172/document/4\" target=\"_blank\" title=\"https://data.developer.nhs.uk/ccri/ed/patient/1172/document/4\">https://data.developer.nhs.uk/ccri/ed/patient/1172/document/4</a><br>\nactual resource <a href=\"https://data.developer.nhs.uk/ccri-fhir/STU3/Binary/5ba6087037cac60001366b3f\" target=\"_blank\" title=\"https://data.developer.nhs.uk/ccri-fhir/STU3/Binary/5ba6087037cac60001366b3f\">https://data.developer.nhs.uk/ccri-fhir/STU3/Binary/5ba6087037cac60001366b3f</a> </p>\n<p>This is an example of what would be referred to in a MessageDefinition.</p>",
        "id": 159138817,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1550822818
    },
    {
        "content": "<p>Back to MD, I think I would use a Graph to show how this FHIR document would be built. Is that a correct use of Graph?</p>",
        "id": 159138971,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1550823023
    },
    {
        "content": "<p>If the message tigger event were to be 'new discharge summary' the focal class would be a Bundle (of type Document).</p>",
        "id": 159139764,
        "sender_full_name": "René Spronk",
        "timestamp": 1550824307
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191372\">@René Spronk</span> I think I get what you mean. In the wider context NHSD ITK Message it's what you call a grouper and what I was calling payload. For FHIR Documents it does seem to follow standard FHIR messaging (I need to check other event types though)</p>",
        "id": 159141485,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1550826707
    },
    {
        "content": "<p>Have been looking at GraphDefintion, done some basic rendering work and it does seem to fit well.<br>\nCheers. Now just need to convince a few people it’s the correct approach</p>",
        "id": 159168707,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1550852564
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191687\">@Kevin Mayfield</span> be aware though that there are currently no validators (AFAIK) which allow one to validate GraphDefinition. May now that CMS is pushing ADT FHIR messages in the US we'll see some of validators being willing to implement this, this is effectively a necessity for the roll-out of FHIR messaging.</p>",
        "id": 159268959,
        "sender_full_name": "René Spronk",
        "timestamp": 1551000520
    },
    {
        "content": "<p>I</p>",
        "id": 159305469,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1551057370
    },
    {
        "content": "<p>I'll add it to my to do list for May connectathon</p>",
        "id": 159305472,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1551057378
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191372\">@René Spronk</span> <br>\nI’m presuming defining and explaining fhir documents was the main driver for graphdefintion?</p>",
        "id": 159367887,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1551125358
    },
    {
        "content": "<p>It was one, but not necessarily primary.  It's also useful for defining queries, for defining  collections of data to be exchanged, for defining content to grant access privileges to,  and obviously for defining message structures.</p>",
        "id": 159376531,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1551132073
    }
]