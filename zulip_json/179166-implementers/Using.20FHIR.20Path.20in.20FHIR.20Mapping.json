[
    {
        "content": "<p>FHIR Mapping (StructureMap) allows executing FHIR Paths against values.</p>\n<p>I have few questions:<br>\n1. Is it allowed for FHIR Path to return a complex object? For example, what if I have mapping like \"for src.XYZ as xyz make <a href=\"http://tgt.name\" target=\"_blank\" title=\"http://tgt.name\">tgt.name</a> = ($xyz.name)\", can \"$xyz.name\" return the whole HumanName? It feels weird because the result is extracted from the \"source\" universe and is directly assigned to the \"target\" universe (which could be separate universes: like STU3 vs DSTU2).<br>\n2. What if it is just assigned to a variable? Would that be ok? Like \"for src.XYZ as xyz make ($xyz.name) as tmpname then { for tmpname make <a href=\"http://tgt.name\" target=\"_blank\" title=\"http://tgt.name\">tgt.name</a> }\"<br>\n3. Or maybe FHIR Path in this case should only be limited to returning \"primitive\" values?</p>",
        "id": 153997448,
        "sender_full_name": "Ivan Dubrov",
        "timestamp": 1537214651
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> ?</p>",
        "id": 153997458,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1537219785
    },
    {
        "content": "<p>I do not know. I think that the type must match. I guess it could be subject to implicit type based conversion, but I don't think I've implemented that or that we describe it</p>",
        "id": 153997473,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1537227223
    },
    {
        "content": "<p>2 could be a variable? I'm not sure</p>",
        "id": 153997474,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1537227230
    },
    {
        "content": "<p>From EpisodeOfCare.map:</p>\n<blockquote>\n<p>\"EpisodeOfCare-careTeam\" : for src.team as vs where reference.resolve().exists() make (src.team.reference.resolve()) as ct then epiCareTeam(ct, tgt)</p>\n</blockquote>\n<p>So it seems like at least there are cases (taken from FHIR SVN repository) where it is assigned to a variable...</p>",
        "id": 153997486,
        "sender_full_name": "Ivan Dubrov",
        "timestamp": 1537228751
    },
    {
        "content": "<p>indeed. that must work then as well. Is it documented?</p>",
        "id": 153997487,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1537228811
    }
]