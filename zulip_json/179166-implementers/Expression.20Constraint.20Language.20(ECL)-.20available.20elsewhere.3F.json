[
    {
        "content": "<p>HI,<br>\nAm I right in thinking that ECL is currently confined to SNOMED, and not available to say restrict a patient search query by encounter attributes, eg encounter.status or encounter.location or encounter.serviceProvider ? thanks!</p>",
        "id": 215591719,
        "sender_full_name": "Jeremy R",
        "timestamp": 1604501962
    },
    {
        "content": "<p>ECL is just a member of the SCT language family.</p>",
        "id": 215605784,
        "sender_full_name": "Lin Zhang",
        "timestamp": 1604507322
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"192103\">Lin Zhang</span> <a href=\"#narrow/stream/179166-implementers/topic/Expression.20Constraint.20Language.20(ECL)-.20available.20elsewhere.3F/near/215605784\">said</a>:</p>\n<blockquote>\n<p>ECL is just a member of the SCT language family.</p>\n</blockquote>\n<p>Thanks Lin</p>",
        "id": 215691312,
        "sender_full_name": "Jeremy R",
        "timestamp": 1604570723
    },
    {
        "content": "<p>Hello all.  We are experimenting with the inclusion of SNOMED expressions in Condition examples in an IG.  We have tried several variations of the following in a Condition example:  </p>\n<p>&lt;code&gt;<br>\n&lt;coding&gt;<br>\n&lt;system value=\"http://snomed.info/sct\"/&gt;<br>\n&lt;code value=\"284196006|:363698007=770850006|\"/&gt;<br>\n&lt;/coding&gt;<br>\n&lt;text value=\"Burn of skin of left index finger\"/&gt;<br>\n&lt;/code&gt;</p>\n<p>Each time we are getting the following error message when we try to run it through the publisher:</p>\n<p>Term \":363698007=770850006\" doesn't match a defined term at 1 (valid terms would be from this list: \"\"Burn of skin\",\"Burn of skin (disorder)\"\") (from <a href=\"http://tx.fhir.org/r4\">http://tx.fhir.org/r4</a>) for '<a href=\"http://snomed.info/sct#284196006|:363698007=770850006|\">http://snomed.info/sct#284196006|:363698007=770850006|</a></p>\n<p>We have done it with a display  value, no display value, text, and no text.</p>\n<p>Any ideas?</p>",
        "id": 230402249,
        "sender_full_name": "Corey Smith",
        "timestamp": 1615835716
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 230416564,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1615841634
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span></p>",
        "id": 230416578,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1615841642
    },
    {
        "content": "<p>The <code>|</code> symbols are the problem -- they are used to surround the display text of a code and anything inside them is ignored.  Thus <code>284196006|:363698007=770850006|</code> is syntactically equivalent to <code>284196006</code>.  The validation is then attempting to check that the display you've provided is a valid synonym of that concept, which it clearly is not.<br>\nThe correct syntax would be <code>284196006:363698007=770850006</code>.</p>",
        "id": 230421552,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1615843720
    },
    {
        "content": "<p>Excellent.  We will give this a shot and will report back...   It was the example in the SNOMED documentation that led us down this path:  <a href=\"https://confluence.ihtsdotools.org/display/DOCGLOSS/expression\">https://confluence.ihtsdotools.org/display/DOCGLOSS/expression</a>     Thanks for the quick response.</p>",
        "id": 230424376,
        "sender_full_name": "Corey Smith",
        "timestamp": 1615845154
    },
    {
        "content": "<p>Maybe let the SNOMED folks know?  Suspect they originally had the display text included and stripped it out, but missed a couple of the delimiters.</p>",
        "id": 230428148,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1615846296
    },
    {
        "content": "<p>I suppose that could be what happened.  It seems a little odd that would have slipped through - but I don't have another good explanation for it.  We can let them know.</p>",
        "id": 230464963,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1615875880
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191343\">@Michael Lawley</span>  Your solution worked.  Thank you.  It did however raise some other questions about what validation logic is being used for the display value associated with expressions.    We were surprised that the validation process was attempting to validate the display term for for the expression.  The process was nice enough to tell us what display it wanted.  In our case it told us to use - \"Burn of skin where Finding site = Skin structure of left index finger\"  Is this validation logic documented somewhere? <span class=\"user-mention\" data-user-id=\"240027\">@Monique van Berkum</span></p>",
        "id": 230530048,
        "sender_full_name": "Corey Smith",
        "timestamp": 1615907658
    },
    {
        "content": "<p>That string is arbitrary -- neither FHIR nor SNOMED provide definitive guidelines on how to construct display text for an expression.  SNOMED does indicate that one option is just to replace each code with its preferred term.  In this case you'd get <code>Burn of skin : Finding site = Skin structure of left index finger</code></p>",
        "id": 230632574,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1615951887
    },
    {
        "content": "<p>The HL7 terminology server has an algorithm that determines display name based on the syntax and the display names of the components.  The objective is to allow IG authors to check that they haven't messed up their codes (or their display names).  You're free to publish with an alternate display name - you just have to suppress the warning.  (And you'd only suppress the warning after you'd manually looked up the codes and confirmed that the codes are right and the display name accurately represents the code you're conveying and that there's a legitimate need to vary the display name from the default.)</p>",
        "id": 230698300,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1615991038
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> <a href=\"#narrow/stream/179166-implementers/topic/Expression.20Constraint.20Language.20.28ECL.29-.20available.20elsewhere.3F/near/230698300\">said</a>:</p>\n<blockquote>\n<p>The HL7 terminology server has an algorithm that determines display name based on the syntax and the display names of the components.  ...  you'd only suppress the warning ...</p>\n</blockquote>\n<p>Can I suppress this warning somehow via a tag/pragma in the FHIR Resource, to guide the hl7validator/TX to suppress that particular instance of a warning, after ensuring I want to override the default display string?</p>\n<p>Also, will this help in suppressing warnings when using designations (synonym), instead of the default display?</p>",
        "id": 248348941,
        "sender_full_name": "David Simons",
        "timestamp": 1628083469
    },
    {
        "content": "<p>I know there was a TODO to be able to pass in an 'ignore warnings' file to the validator similar to what we use with the IGPublisher, but I don't know if it happened or not.  In the past, a project that had a similar issue simply built their own wrapper around the validator that suppressed messages they didn't care about.</p>",
        "id": 248415782,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1628115228
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> <a href=\"#narrow/stream/179166-implementers/topic/Expression.20Constraint.20Language.20.28ECL.29-.20available.20elsewhere.3F/near/248415782\">said</a>:</p>\n<blockquote>\n<p>I know there was a TODO to be able to pass in an 'ignore warnings' file to the validator similar to what we use with the IGPublisher, but I don't know if it happened or not.  In the past, a project that had a similar issue simply built their own wrapper around the validator that suppressed messages they didn't care about.</p>\n</blockquote>\n<p>Indeed I only found <code>https://confluence.hl7.org/pages/viewpage.action?pageId=35718580#UsingtheFHIRValidator-Extensiblebindingwarnings</code>.<br>\nStill would be nice to review/track and suppress these warnings individually, via some kind of tags/pragma in the FHIR artifact source itself, rather than wrappers or out-of-band lists.<br>\n(I do not know how this is done in the IG Publisher, yet, btw)</p>\n<p>for example add a <code>&lt;!-- hl7validator:warning:suppress rationale goes here --&gt;</code>annotation on the line that triggers a warning</p>\n<p>Submitted as an Issue: <a href=\"https://github.com/hapifhir/org.hl7.fhir.core/issues/605\">https://github.com/hapifhir/org.hl7.fhir.core/issues/605</a></p>",
        "id": 253087858,
        "sender_full_name": "David Simons",
        "timestamp": 1631539281
    },
    {
        "content": "<p>at present, this functionality is only supported when the validator is hosted in HAPI. I guess the place to start is to create an issue, and then we'd have to figure out how to pass whatever is provided on the command line into the existing framework inside the validator</p>",
        "id": 253151893,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1631563694
    },
    {
        "content": "<p>I'm just looking at this issue now in the repo. I'm confused on exactly what the desired behaviour is? You want to be able to pass in arguments when you run the validator CLI, such that some warnings are filtered out?</p>",
        "id": 254717450,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1632495381
    },
    {
        "content": "<p>Are you mimicking an existing behaviour in HAPI-FHIR? If so, how does that behave?</p>",
        "id": 254717496,
        "sender_full_name": "Mark Iantorno",
        "timestamp": 1632495411
    },
    {
        "content": "<p>see line 166, org.hl7.fhir.validation.BaseValidator</p>",
        "id": 254734016,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1632501643
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"248736\">Mark Iantorno</span> <a href=\"#narrow/stream/179166-implementers/topic/Expression.20Constraint.20Language.20.28ECL.29-.20available.20elsewhere.3F/near/254717450\">said</a>:</p>\n<blockquote>\n<p>I'm just looking at this issue now in the repo. I'm confused on exactly what the desired behaviour is? You want to be able to pass in arguments when you run the validator CLI, such that some warnings are filtered out?</p>\n</blockquote>\n<p>Indeed desire is to suppress warnings/errors selectively, to not have the entire build fail.</p>\n<p>Do not prefer to supply separately, but would like these to be annotated somehow in the source FHIR artifacts - in context - and as such loaded into the hl7validator along with the FHIR artifacts, such as a .structuredefinition.xml or .valueset.xml .</p>",
        "id": 255252245,
        "sender_full_name": "David Simons",
        "timestamp": 1632848683
    },
    {
        "content": "<p>Filtering out errors is pretty much a non-starter.  If you want to ignore errors in production, you'd have to wrap the validator and have the wrapper code suppress things.  We do allow filtering out warnings in the publication process.  I suppose we could embed that 'ignore' file in the publication package and have the validator take advantage of it.  In practice, it should only include the locationless messages - things like \"unable to find code system xyz\" which we expect all the time.  Warnings such as \"non-matching slice\" are context-specific and wouldn't generally be safe to suppress across the board.</p>",
        "id": 255268580,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1632852000
    },
    {
        "content": "<p>yes, I can accept focussing on warnings only, not errors.</p>\n<p>In our case, the remaining warnings are on example resources, not so much SD, VS, CS, actually, now that I revisited our logs.<br>\nMostly related to non-matches of valudset bindings, codesystem display strings and indeed non-matching (additional, alternately coded) slices.</p>\n<p>I understand the valid point about context - we would not include such annotations in the NPM packaged versions - only in the source repo.</p>\n<p>For now I have accepted that we will not be able to resolve all warnings across our profiles. <br>\nHence focussing on resolving all errors, and most warnings.</p>\n<p>If only there was a way to not have to revisit known warnings each and every time, when looking for newly introduced ones... That is really the key driver here.</p>\n<p>Thank you all!</p>",
        "id": 255276038,
        "sender_full_name": "David Simons",
        "timestamp": 1632854543
    },
    {
        "content": "<p>With the publisher, you can use the ignoreWarnings.txt to suppress both warning and information messages.</p>",
        "id": 255278964,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1632855559
    },
    {
        "content": "<p>but not in the validator, which is the ask here. The underlying code exists, but it is not surfaced as an option on the command line</p>",
        "id": 255347287,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1632895829
    }
]