[
    {
        "content": "<p>Hello.</p>\n<p>I'm working on an HL7 v2.x translation to FHIR STU3/R4.</p>\n<p><strong>Question 1:</strong></p>\n<p>Can someone elaborate on the difference between <code>http://hl7.org/fhir/medication-request-intent|order</code> and <code>http://hl7.org/fhir/medication-request-intent|instance-order</code>? An example or use-case would be appreciated.</p>\n<p><strong>Question 2:</strong></p>\n<p>When processing RDE (Pharmacy/treatment encoded order message), I populate the resulting <code>MedicationRequest.intent</code> with <code>http://hl7.org/fhir/medication-request-intent|order</code>.</p>\n<p>When processing RAS (Pharmacy/treatment administration message), the message includes an RXE segment that refers to the order. Presently, I use a conditional create for MedicationRequest resources resulting from such RAS processing. In the case where an RAS message results in a new MedicationRequest, should I populate <code>MedicationRequest.intent</code> with <code>http://hl7.org/fhir/medication-request-intent|instance-order</code>?</p>\n<p>When an RDE message for such an order is processed later, the MedicationRequest would be updated with <code>http://hl7.org/fhir/medication-request-intent|order</code>. (Due to the source systems, mutli-threading, etc.,  RDE messages may be processed before associated RAS messages.</p>\n<p>Thanks!</p>\n<p>References:</p>\n<ul>\n<li><a href=\"https://www.hl7.org/fhir/STU3/medicationrequest-definitions.html#MedicationRequest.intent\" target=\"_blank\" title=\"https://www.hl7.org/fhir/STU3/medicationrequest-definitions.html#MedicationRequest.intent\">https://www.hl7.org/fhir/STU3/medicationrequest-definitions.html#MedicationRequest.intent</a></li>\n<li><a href=\"https://www.hl7.org/fhir/STU3/valueset-medication-request-intent.html\" target=\"_blank\" title=\"https://www.hl7.org/fhir/STU3/valueset-medication-request-intent.html\">https://www.hl7.org/fhir/STU3/valueset-medication-request-intent.html</a></li>\n<li><a href=\"https://www.hl7.org/fhir/medicationrequest-definitions.html#MedicationRequest.intent\" target=\"_blank\" title=\"https://www.hl7.org/fhir/medicationrequest-definitions.html#MedicationRequest.intent\">https://www.hl7.org/fhir/medicationrequest-definitions.html#MedicationRequest.intent</a></li>\n<li><a href=\"https://www.hl7.org/fhir/valueset-medicationrequest-intent.html\" target=\"_blank\" title=\"https://www.hl7.org/fhir/valueset-medicationrequest-intent.html\">https://www.hl7.org/fhir/valueset-medicationrequest-intent.html</a></li>\n</ul>\n<p><strong>Edit:</strong> Accidentally identified the value sets instead of the code systems (fixed). Note that these are the STU3 code systems, not R4.</p>",
        "id": 161651698,
        "sender_full_name": "Diederik Muylwyk",
        "timestamp": 1553525955
    },
    {
        "content": "<p>1. instance-order is similar to a MAR entry - a separate order for every single planned administration.    <br>\n2. RXE would ideally use filler-order, as it represents the pharmacy's encoding of the order.</p>",
        "id": 161652275,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1553526258
    },
    {
        "content": "<p>Hi, <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>. Thanks for the quick reply.</p>\n<p>1. Understood. Seems like I don't need to use <code>instance-order</code> at all.<br>\n2. For STU3, I'll have to use <code>http://hl7.org/fhir/medication-request-intent|order</code>. For R4+, I should use <code>http://hl7.org/fhir/CodeSystem/medicationrequest-intent|filler-order</code>. Is that correct?<br>\n(I accidentally identified the value sets instead of the code systems in my original question.)</p>",
        "id": 161653157,
        "sender_full_name": "Diederik Muylwyk",
        "timestamp": 1553526776
    },
    {
        "content": "<p>Whoops, that took a moment to sink in so actually...</p>\n<p>I think <code>http://hl7.org/fhir/medication-request-intent|instance-order</code> <em>would</em> be appropriate for a MedicationRequest conditionally created from an RAS message. If/when an RDE associated with that RAS is processed, the intent would be updated to <code>http://hl7.org/fhir/medication-request-intent|order</code> (or <code>http://hl7.org/fhir/CodeSystem/medicationrequest-intent|filler-order</code> in R4).</p>\n<p>If an associated RDE is never received, an intent of <code>http://hl7.org/fhir/medication-request-intent|instance-order</code> is correct and appropriate.</p>\n<p>Thanks again, <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>.</p>",
        "id": 161654032,
        "sender_full_name": "Diederik Muylwyk",
        "timestamp": 1553527325
    },
    {
        "content": "<p>Agree that instance-order is appropriate for RAS.</p>",
        "id": 161657451,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1553529376
    },
    {
        "content": "<p>Am I expected to close a topic somehow once it has been answered/resolved?</p>",
        "id": 161667349,
        "sender_full_name": "Diederik Muylwyk",
        "timestamp": 1553535323
    },
    {
        "content": "<p>nope</p>",
        "id": 161667792,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1553535567
    },
    {
        "content": "<p>Okidoke. Thanks!</p>",
        "id": 161668309,
        "sender_full_name": "Diederik Muylwyk",
        "timestamp": 1553535841
    },
    {
        "content": "<p>In HL7 V2 RDE (Pharm Encoded Order) I don't see each planned admin as a 'separate order' but rather fulfillments of the order.   For example, if the order is Acetaminophen TID for 2 days, that's the 1 order with 6 planned Med admins.   Of course each of the admins would be a separate RAS (Pharm Admin) but admins are not orders.   Then there's also the V2 RGV^O15 where you could give 'give-id/sub-id identifiers' to each of the planned admins from the order, but again, those are not 'new orders' or 'instance orders' they are just unique pre-assigned identifiers for the planned admins that can then later be associated back when the RAS (actual admins) are performed.   I think the use case for this workflow is when the MAR needs to track each planned med and associate it with a specific med identifer, e.g. a barcode label. </p>\n<p>That said, I'm not sure how you would map all of this workflow into FHIR MedicationRequest and MedicaitonAdmins.</p>",
        "id": 161672760,
        "sender_full_name": "John Silva",
        "timestamp": 1553538389
    },
    {
        "content": "<p>RXO = original order;  RXE = filler order; RXG = instance order</p>",
        "id": 161684906,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1553546149
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>  that's not what I've seen them called.   RXO/RXE/RXG are the segment names that are part of specific messages.  RXO is part of an OMP^R09 Pharmacy Order message (usually 'unencoded' like what comes from the ordering dr.), the RXE is part of the RDE^O11 Pharmacy Encoded Order message (but this could go to Pharmacy or to CPOE or to other 'listeners' not necessarily 'fillers' of the order) and the RXG is part of RGV^O15 Pharmacy Give message; this is NOT an order but a way to communicate planned adminstration 'give-ids' and 'sub-ids' so they can be linked back together with the actual RAS messages (admins) that get sent later after clinician actually administers the drug (or not -- there is a not given field).   I've never heard of RXG as an 'instance order'</p>",
        "id": 161690941,
        "sender_full_name": "John Silva",
        "timestamp": 1553550397
    },
    {
        "content": "<p>It doesn't matter what they're typically called, that's what they map to in terms of FHIR intents.  RXO is the original order from the prescriber.  RXE is the pharmacy-encoded order and covers the same timing period as the RXO (and thus corresponds to filler-order).  RXG represents the instruction to administer a single dose - and thus corresponds to 'instance-order'.</p>",
        "id": 161692620,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1553551684
    },
    {
        "content": "<p>OK, that makes sense but the names DO matter -- since folks coming from the V2 world will know the V2 names and that is our reference point.   It would be nice to see some mapping of the V2 'medication workflow model' into FHIR resources; is work being done along these lines?    I know I had asked before and at the time you had told me that FHIR Med-resources are not really 'equipped' to effectively handle the Med workflow model.  I think you mentioned that the Task resource should be used.   It would be great if there was a 'reference model' for how Med workflow can be described in FHIR for those coming from the V2 event-driven (workflow) Med paradigm.    (In the 'mean time' I've been using properties of the Med resources to 'hack' this.  Similarly for the ADT workflow.   It's good to know the IHE folks are working on mapping the ADT workflow to FHIR, that will be very helpful.)</p>",
        "id": 161747763,
        "sender_full_name": "John Silva",
        "timestamp": 1553595588
    },
    {
        "content": "<p>The <a class=\"stream\" data-stream-id=\"179188\" href=\"/#narrow/stream/179188-v2-to-FHIR\">#v2 to FHIR</a> track is working on mappings, though I think it'll take them a bit before they get to meds.</p>\n<p>The names are intended to maximize recognition/understanding with both new to HL7 implementers  as well as existing HL7 implementers (whether v2, v3, CDA or something else).  They also need to be independent of domain, so the terms can't generally be pharmacy-specific  or lab-specific,  etc.</p>",
        "id": 161768817,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1553611781
    },
    {
        "content": "<p>The v2-to-FHIR project hasn't started medication mappings, but if someone wants to send me the mappings they've developed, I'm happy to document them for future discussion. This will advance things more quickly.</p>",
        "id": 161772039,
        "sender_full_name": "Craig Newman",
        "timestamp": 1553613672
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192758\">@Craig Newman</span>  -- I can probably send you some of the V2 mappings I have.   Also, I have created GForge tracker items for Pharmacy about adding the V2 'suggested mappings' for the Dosage datatype, which they've done (though there are typos and inconsistencies in it) <a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17354\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17354\">GF#17354</a>, another about how to represent Therapeutic categories (GF# 17411) and that was closed since it's done in MedicationKnowledge (which is only maturity level 0, I had asked for this in MedicationRequests since we need to know about Therapeutic category at ordering time since a particular order might have an order-specific therapeutic use that isn't the same as the generalized category for the drug) and today one about adding the V2 0335 'C' value to the Timing Abbreviations ValueSet GF# 20609.</p>",
        "id": 161785039,
        "sender_full_name": "John Silva",
        "timestamp": 1553621731
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192758\">@Craig Newman</span>  -- btw, I think the Rhapsody interface engine (not to advertise specific products but just as an example) comes with a set of 'pre-wired' V2 to FHIR mappings for med resources but I'm not positive about that.</p>",
        "id": 161785160,
        "sender_full_name": "John Silva",
        "timestamp": 1553621797
    },
    {
        "content": "<p>MedicationRequest has 'category' which can differentiate therapeutic category at the time of ordering (you can have multiple categories, so you can differentiate along whatever axis you like)</p>",
        "id": 161787346,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1553623167
    },
    {
        "content": "<p>There are some V2 mappings in the pharmacy resources already.  We'd be happy to add additional ones.</p>",
        "id": 161788255,
        "sender_full_name": "Melva Peters",
        "timestamp": 1553623692
    },
    {
        "content": "<p>Yes, category cardinality was changed to 0..* in R4, when I posted the GF item this wasn't the case.  (I think it was a result of me asking the question that it was changed --- or at least I'd like to think so :-) )</p>\n<p><span class=\"user-mention\" data-user-id=\"191759\">@Melva Peters</span>  I had posted a follow-up comment on GF 17354 about some typos and additional clarifications.   For other V2 mappings, I'd have to get back to you; that GF item was only for Dosage datatype.</p>",
        "id": 161789334,
        "sender_full_name": "John Silva",
        "timestamp": 1553624434
    },
    {
        "content": "<blockquote>\n<p>It would be nice to see some mapping of the V2 'medication workflow model' into FHIR resources; is work being done along these lines?    I know I had asked before and at the time you had told me that FHIR Med-resources are not really 'equipped' to effectively handle the Med workflow model.  I think you mentioned that the Task resource should be used.   It would be great if there was a 'reference model' for how Med workflow can be described in FHIR for those coming from the V2 event-driven (workflow) Med paradigm.    </p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"194183\">@John Silva</span> Yes, work is being done</p>",
        "id": 161800873,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1553632913
    },
    {
        "content": "<p>the same model used in IHE HMW will be mapped (with a few extras) to FHIR.</p>",
        "id": 161800988,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1553633011
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span>  -- I think you pointed me to this  IHE HMW before; I wasn't sure that the work has started on this; that's great!</p>",
        "id": 161801356,
        "sender_full_name": "John Silva",
        "timestamp": 1553633300
    },
    {
        "content": "<p>the IHE HMW model is this</p>",
        "id": 161805148,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1553636048
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/mSAUfgS4uNGAFutGiSJKZhW-/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/mSAUfgS4uNGAFutGiSJKZhW-/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/mSAUfgS4uNGAFutGiSJKZhW-/pasted_image.png\"></a></div>",
        "id": 161805151,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1553636054
    },
    {
        "content": "<p>[FHIR resources in brackets]</p>",
        "id": 161805176,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1553636094
    },
    {
        "content": "<p>the diagram is based on the messaging paradigm that was \"requested\" at the time, but we observed a long time ago that we needed not point-to-point, but a broadcast approach</p>",
        "id": 161805288,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1553636187
    },
    {
        "content": "<p>enter FHIR</p>",
        "id": 161805302,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1553636203
    },
    {
        "content": "<p>Yes, there are many 'participants' (systems) in the Med Workflow; a pub/sub mechanism seems more appropriate than a event/point-to-point approach</p>",
        "id": 161806536,
        "sender_full_name": "John Silva",
        "timestamp": 1553637332
    },
    {
        "content": "<p>Hiya. My initial questions here were answered (thanks). I have new questions about mapping RDE_O11 to MedicationRequest and Medication resource over in <a class=\"stream\" data-stream-id=\"179188\" href=\"/#narrow/stream/179188-v2-to-FHIR\">#v2 to FHIR</a> right <a href=\"#narrow/stream/179188-v2-to.20FHIR/topic/RDE_O11.20to.20MedicationRequest.20and.20Medication/near/162455908\" title=\"#narrow/stream/179188-v2-to.20FHIR/topic/RDE_O11.20to.20MedicationRequest.20and.20Medication/near/162455908\">here</a>. Any input there would be greatly appreciated.</p>",
        "id": 162457591,
        "sender_full_name": "Diederik Muylwyk",
        "timestamp": 1554317597
    },
    {
        "content": "<p>-- moved to Reply to prior comment</p>",
        "id": 170746445,
        "sender_full_name": "sean zitello",
        "timestamp": 1562957546
    },
    {
        "content": "<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"192758\">Craig Newman</span>  -- btw, I think the Rhapsody interface engine (not to advertise specific products but just as an example) comes with a set of 'pre-wired' V2 to FHIR mappings for med resources but I'm not positive about that.</p>\n</blockquote>\n<p>I am sorry to say (I work for Rhapsody) that it does not currently come with any pre-wired V2 to FHIR mappings.  However, it's not a very big lift to get there with say JavaScript or FreeMarker or Mapper (XML only) \"filters\" that are part of the application.  I personally prefer the JavaScript JSON approach but I've seen all three used effectively.</p>",
        "id": 170746698,
        "sender_full_name": "sean zitello",
        "timestamp": 1562957744
    },
    {
        "content": "<p>And it'll be interesting to see if there is a demand for transformations using the mapping language...</p>",
        "id": 170749938,
        "sender_full_name": "David Hay",
        "timestamp": 1562960511
    }
]