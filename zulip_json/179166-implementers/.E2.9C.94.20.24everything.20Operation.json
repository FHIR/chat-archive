[
    {
        "content": "<p>I ran the <a href=\"https://hapi.fhir.org/baseR4/Patient/$everything\">https://hapi.fhir.org/baseR4/Patient/$everything</a> request against the public test server. I expected to receive patients along with their related resources, but the public test server only gave me patients' data and not any related resources. Am I wrong with something or did I misunderstand the functionality of the $everything operation?</p>",
        "id": 270361727,
        "sender_full_name": "Mohsen Jafari",
        "timestamp": 1643797252
    },
    {
        "content": "<p>What _type values did you specify if any?</p>",
        "id": 270379147,
        "sender_full_name": "Daniel Venton",
        "timestamp": 1643806708
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"335936\">Daniel Venton</span> <a href=\"#narrow/stream/179166-implementers/topic/.24everything.20Operation/near/270379147\">said</a>:</p>\n<blockquote>\n<p>What _type values did you specify if any?</p>\n</blockquote>\n<p>Just the abovementioned query and nothing else. You can click on the link and you will see that it will only return the patients data and nothing about the related resources to the patients. I'm not sure what I should do in this regard.</p>",
        "id": 270381734,
        "sender_full_name": "Mohsen Jafari",
        "timestamp": 1643807973
    },
    {
        "content": "<p>The spec for this seems to allow for the FHIR server to \"do what it wants\":</p>\n<p>\"the server is responsible for determining what resources to return as included resources (rather than the client specifying which ones).\"</p>\n<p><a href=\"https://www.hl7.org/fhir/patient-operation-everything.html\">https://www.hl7.org/fhir/patient-operation-everything.html</a></p>",
        "id": 270386535,
        "sender_full_name": "John Silva",
        "timestamp": 1643810029
    },
    {
        "content": "<p>Once I jumped up to page 1000, I started seeing resources other than Patient.<br>\n<a href=\"https://hapi.fhir.org/baseR4?_getpages=1b2b6134-35db-4ece-b5ee-0777dad75128&amp;_getpagesoffset=20000&amp;_count=20&amp;_pretty=true&amp;_bundletype=searchset\">https://hapi.fhir.org/baseR4?_getpages=1b2b6134-35db-4ece-b5ee-0777dad75128&amp;_getpagesoffset=20000&amp;_count=20&amp;_pretty=true&amp;_bundletype=searchset</a></p>",
        "id": 270390007,
        "sender_full_name": "Daniel Venton",
        "timestamp": 1643811397
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"335936\">Daniel Venton</span> <a href=\"#narrow/stream/179166-implementers/topic/.24everything.20Operation/near/270390007\">said</a>:</p>\n<blockquote>\n<p>Once I jumped up to page 1000, I started seeing resources other than Patient.<br>\n<a href=\"https://hapi.fhir.org/baseR4?_getpages=1b2b6134-35db-4ece-b5ee-0777dad75128&amp;_getpagesoffset=20000&amp;_count=20&amp;_pretty=true&amp;_bundletype=searchset\">https://hapi.fhir.org/baseR4?_getpages=1b2b6134-35db-4ece-b5ee-0777dad75128&amp;_getpagesoffset=20000&amp;_count=20&amp;_pretty=true&amp;_bundletype=searchset</a></p>\n</blockquote>\n<p>I'm completely confused of the mechanism of the $evertything operation. Could someone explain a bit more.</p>",
        "id": 270390591,
        "sender_full_name": "Mohsen Jafari",
        "timestamp": 1643811656
    },
    {
        "content": "<p>The FHIR spec for Patient $everything explains the basics of how it is intended to operate.  However, any particular FHIR server implementation may have its own variances, while still meeting the spec.   Since the example being used is for the HAPI server, it would be best to look at their implementation specs or ask for more information about the HAPI implementation in the <a class=\"stream\" data-stream-id=\"179167\" href=\"/#narrow/stream/179167-hapi\">#hapi</a> channel.</p>",
        "id": 270391231,
        "sender_full_name": "John Silva",
        "timestamp": 1643811900
    },
    {
        "content": "<ol>\n<li>Fetch all the patient resources the user is allowed to access.</li>\n<li>Fetch all the clinical resources that reference the patients in step 1.</li>\n<li>Optionally - Fetch all the referenced resources (Organization, Practitioner, ...) from all the items gathered in steps 1 and 2.</li>\n<li>Pack all the resources from 1, 2 and 3 into a bundle and return (paged or unpaged).</li>\n</ol>",
        "id": 270393611,
        "sender_full_name": "Daniel Venton",
        "timestamp": 1643812796
    },
    {
        "content": "<p>Normally you would run patient $everything against a single patient resource, with a URL like /baseR4/Patient/[id]/$everything. The output of that should be a lot more manageable.</p>",
        "id": 270394058,
        "sender_full_name": "Paul Church",
        "timestamp": 1643812941
    },
    {
        "content": "<p>This definition of the \"patient compartment\" might also help.    <a href=\"https://www.hl7.org/fhir/compartmentdefinition-patient.html\">https://www.hl7.org/fhir/compartmentdefinition-patient.html</a></p>\n<p>From spec page:<br>\n\"The server SHOULD return at least all resources that it has that are in the <strong>patient compartment</strong> for the identified patient(s)\"</p>",
        "id": 270417562,
        "sender_full_name": "John Silva",
        "timestamp": 1643820775
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"298707\">John Silva</span> <a href=\"#narrow/stream/179166-implementers/topic/.24everything.20Operation/near/270417562\">said</a>:</p>\n<blockquote>\n<p>This definition of the \"patient compartment\" might also help.    <a href=\"https://www.hl7.org/fhir/compartmentdefinition-patient.html\">https://www.hl7.org/fhir/compartmentdefinition-patient.html</a></p>\n<p>From spec page:<br>\n\"The server SHOULD return at least all resources that it has that are in the <strong>patient compartment</strong> for the identified patient(s)\"</p>\n</blockquote>\n<p>But I don't think the HAPI public server does such a thing.</p>",
        "id": 270522561,
        "sender_full_name": "Mohsen Jafari",
        "timestamp": 1643881694
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"410473\">Mohsen Jafari</span> has marked this topic as resolved.</p>",
        "id": 270540659,
        "sender_full_name": "Notification Bot",
        "timestamp": 1643891542
    }
]