[
    {
        "content": "<p>In the <code>Timing</code> datatype, the  <code>repeat.frequency</code> element is defined with explicit reference to the period (\"Event occurs frequency times per period\"). However, there is no  constraint to prevent using <code>repeat.frequency</code>  without filling <code>repeat.period</code>, i.e. this would be a valid <code>Timing</code>:</p>\n<div class=\"codehilite\" data-code-language=\"JSON\"><pre><span></span><code><span class=\"p\">{</span>\n     <span class=\"nt\">\"repeat\"</span><span class=\"p\">:</span> <span class=\"p\">{</span> <span class=\"nt\">\"frequency\"</span><span class=\"p\">:</span>  <span class=\"mi\">5</span> <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<p>For the opposite case (period but no frequency), the spec says an absent frequency is equivalent to \"1\". However, there is no \"Meaning if Missing\" for <code>repeat.period</code>. So what would smt. like the above example mean? Or it simply one of the \"nonsensical timing specifications\" that the documentation explicitly acknowledges is possible?</p>",
        "id": 230901639,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1616087028
    },
    {
        "content": "<p>Yes, I think it falls under the nonsensical timing specifications.  It seems that a \"light hand\" was taken when creating the constraints on this datatype.</p>",
        "id": 230902171,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1616087203
    },
    {
        "content": "<p>it could be interpreted \"do 5 times at any time over the effective date range of the enclosing timing data element\"</p>",
        "id": 230902318,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1616087263
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"192166\">@Jean Duteau</span>, makes sense.</p>",
        "id": 230902622,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1616087372
    },
    {
        "content": "<p>If you'd like to make a change request for us to officially clarify that interpretation, that'd be a good thing <span class=\"user-mention\" data-user-id=\"194703\">@Morten Ernebjerg</span></p>",
        "id": 230902751,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1616087407
    },
    {
        "content": "<p>Sort of :). That conflicts with repeat.count which be a more correct way of expressing \"take 5 times at any time\".</p>",
        "id": 230902831,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1616087435
    },
    {
        "content": "<p>Right, I was rather going with the \"that would be a nonsesical timing\" comment.</p>",
        "id": 230902917,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1616087464
    },
    {
        "content": "<p>I went looking at timeOfDay because I thought maybe you could say \"take 2 times on Saturday, Tuesday, and Thursday\" but the timeOfDay comments say that isn't allowed: \"The elements frequency and period cannot be used as well as dayOfWeek\"</p>",
        "id": 230903124,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1616087537
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"192166\">Jean Duteau</span> <a href=\"#narrow/stream/179166-implementers/topic/Timing.20with.20frequency.20but.20no.20period/near/230903124\">said</a>:</p>\n<blockquote>\n<p>I went looking at timeOfDay because I thought maybe you could say \"take 2 times on Saturday, Tuesday, and Thursday\" but the timeOfDay comments say that isn't allowed: \"The elements frequency and period cannot be used as well as dayOfWeek\"</p>\n</blockquote>\n<p>This has been corrected in <a href=\"http://build.fhir.org/datatypes-definitions.html#Timing.repeat.timeOfDay\">the current build</a>, following issues <a href=\"http://jira.hl7.org/browse/FHIR-25289\">FHIR-25289</a> and <a href=\"http://jira.hl7.org/browse/FHIR-23710\">FHIR-23710</a>.</p>\n<p>However it now reads:</p>\n<blockquote>\n<p>When time of day is specified, it is inferred that the action happens every day (as filtered by dayofWeek) on the specified times. If there's a timeOfDay, there cannot be a when, or vice versa.</p>\n</blockquote>\n<p>I believe that the 'as filtered by dayofweek' is not complete, since you may also say: \"Take 10:00 AM every other day\", in which case it is not everyday either and frequency actually changes the repeat interval. Should we raise (another) issue to correct that?</p>\n<p>Futhermore I believe it would be really helpful to implementers to expand the <a href=\"http://build.fhir.org/datatypes-examples.html#Timing\">current example section</a> and the Table with most common use cases with at least the examples mentioned here and ideally some more.</p>",
        "id": 238168231,
        "sender_full_name": "Arianne van de Wetering",
        "timestamp": 1620662953
    },
    {
        "content": "<p>An example instance for the use case described by Arianne that does not seem to fit with the comment in the build version: </p>\n<div class=\"codehilite\" data-code-language=\"XML\"><pre><span></span><code>      <span class=\"nt\">&lt;timing&gt;</span>\n         <span class=\"nt\">&lt;repeat&gt;</span>\n            <span class=\"nt\">&lt;frequency</span> <span class=\"na\">value=</span><span class=\"s\">\"1\"</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;period</span> <span class=\"na\">value=</span><span class=\"s\">\"2\"</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;periodUnit</span> <span class=\"na\">value=</span><span class=\"s\">\"d\"</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;timeOfDay</span> <span class=\"na\">value=</span><span class=\"s\">\"10:00\"</span><span class=\"nt\">/&gt;</span>\n         <span class=\"nt\">&lt;/repeat&gt;</span>\n      <span class=\"nt\">&lt;/timing&gt;</span>\n</code></pre></div>\n<p>This timing instance should not be interpreted as \"take every day at 10:00\". Do we need to fill another ticket to improve the comment? Or are we missing something?</p>",
        "id": 239118103,
        "sender_full_name": "Ardon Toonstra",
        "timestamp": 1621268197
    }
]