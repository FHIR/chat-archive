[
    {
        "content": "<p>Is there a way to search for deleted resources? For example, to return a list of all StructureDefinition resources that have been deleted?</p>",
        "id": 163070711,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1554959278
    },
    {
        "content": "<p>No</p>",
        "id": 163071909,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1554961147
    },
    {
        "content": "<p>if there is an audit log, then one could find the delete events. - AuditEvent</p>",
        "id": 163094019,
        "sender_full_name": "John Moehrke",
        "timestamp": 1554985514
    },
    {
        "content": "<p>if there is a Provenance following the recommendation for Provenance-of-Delete, then one could find them -- <a href=\"http://build.fhir.org/provenance.html#removal\" target=\"_blank\" title=\"http://build.fhir.org/provenance.html#removal\">http://build.fhir.org/provenance.html#removal</a></p>",
        "id": 163094093,
        "sender_full_name": "John Moehrke",
        "timestamp": 1554985565
    },
    {
        "content": "<p>so the answer depends on the policy of the server in question</p>",
        "id": 163094115,
        "sender_full_name": "John Moehrke",
        "timestamp": 1554985584
    },
    {
        "content": "<p>In aidbox we keep all deleted resources in history table</p>",
        "id": 163794301,
        "sender_full_name": "nicola (RIO/SS)",
        "timestamp": 1555749958
    },
    {
        "content": "<p>Is it possible to search for all deleted resources? I know I can see the history of a deleted resource using /fhir/&lt;resourceType&gt;/&lt;id&gt;/_history, but is it possible to see a list of resources that have been deleted? i.e. <code>/fhir/&lt;resourceType&gt;?_deleted=true</code> or <code>/fhir?_deleted=true</code></p>",
        "id": 252852718,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1631309037
    },
    {
        "content": "<p>I don't believe such an option exists. It would be defined here if it did: <a href=\"http://hl7.org/fhir/search.html\">http://hl7.org/fhir/search.html</a></p>",
        "id": 252855410,
        "sender_full_name": "Craig McClendon",
        "timestamp": 1631310569
    },
    {
        "content": "<p>Yah I have no doubt _deleted isn't a real thing.. But, wondering if there is <em>something</em> to search for deleted resources that <em>is</em> a real thing :)</p>",
        "id": 253091899,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1631540868
    },
    {
        "content": "<p>From my experience, nothing is ever deleted. In the case of clinical resources the status would be marked with \"entered-in-error\" or perhaps corrected.</p>",
        "id": 253093678,
        "sender_full_name": "Daniel Venton",
        "timestamp": 1631541526
    },
    {
        "content": "<p>soft deleted though</p>",
        "id": 253095082,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1631541979
    },
    {
        "content": "<p>In my dictionary \"entered-in-error\" status == soft deleted. Everything real should ignore it, unless you are specifically looking for it.</p>",
        "id": 253096286,
        "sender_full_name": "Daniel Venton",
        "timestamp": 1631542407
    },
    {
        "content": "<p>in my case, soft deletes are things that have been DELETE'd... you can see the history of that deleted item with /fhir/&lt;type&gt;/&lt;id&gt;/_history, but I need a way of seeing all of the resources that <em>have</em> been DELETE'd</p>",
        "id": 253097651,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1631542889
    },
    {
        "content": "<p>I don't think things in the history are considered deleted, they are old versions. Under that definition of deleted, that would mean you could do a _history search on every item and every version that wasn't the current, is your deleted list.</p>",
        "id": 253098133,
        "sender_full_name": "Daniel Venton",
        "timestamp": 1631543056
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191505\">Sean McIlvenna</span> has marked this topic as resolved.</p>",
        "id": 253101278,
        "sender_full_name": "Notification Bot",
        "timestamp": 1631544201
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191505\">Sean McIlvenna</span> has marked this topic as unresolved.</p>",
        "id": 253101295,
        "sender_full_name": "Notification Bot",
        "timestamp": 1631544208
    },
    {
        "content": "<p>ooops... didn't mean to click \"resolved\"</p>",
        "id": 253101342,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1631544229
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"335936\">@Daniel Venton</span>, bottom line for me, is FHIR servers commonly allow for a resource to be deleted (not show up in searches) using the DELETE REST method, and I need a way of getting a list of resources that have been deleted</p>",
        "id": 253101485,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1631544278
    },
    {
        "content": "<p>regardless of business logic on soft deletes</p>",
        "id": 253101622,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1631544337
    },
    {
        "content": "<p>Right now, there's no mechanism for searching history.  Searching deleted resources is essentially searching history.</p>",
        "id": 253123280,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1631552093
    },
    {
        "content": "<p>I suppose the 'backend' (DB or otherwise) knows about this but there isn't a FHIR standard way of asking for it.   Not sure but it seems like HAPI has a way of dealing with these DELETE'd resources to \"fully expunge' them; not sure if they also have a way of \"seeing \"these DELETE'd resources.   Aren't there certain countries (in EU) that have patient privacy requirements that require knowing about and \"fully deleting\" patient records if the patient requests it?   How would this be accomplished?  (of course right now it would probably have to be done in a proprietary way.)</p>",
        "id": 253184619,
        "sender_full_name": "John Silva",
        "timestamp": 1631582417
    },
    {
        "content": "<p>HAPI has a 'purge' operation for full deletion to satisfy EU needs to make something totally go away.  It's regular 'delete' mechanism still preserves history.</p>",
        "id": 253195596,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1631592950
    },
    {
        "content": "<p>yes we explicitly decided to not support searching deleted resources, or historical versions</p>",
        "id": 253201564,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1631598667
    },
    {
        "content": "<p>so, any plans do this in the future? seems pretty important to me...</p>",
        "id": 253263252,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1631630652
    },
    {
        "content": "<p>R5?</p>",
        "id": 253263263,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1631630656
    },
    {
        "content": "<p>no plans, no. Why is it important? Deleted data is no longer current</p>",
        "id": 253286672,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1631639311
    },
    {
        "content": "<p>Deleting effectively says \"Don't allow search for this anymore\"...</p>",
        "id": 253332056,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1631657580
    },
    {
        "content": "<p>It's important for a use-case I'm dealing with... Maybe not a common use-case. Surprised this hasn't come up more, though.</p>",
        "id": 253422072,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1631715674
    },
    {
        "content": "<p>I'll plan to modify a fork of HAPI to use AuditEvent to track deletions and search the audit events</p>",
        "id": 253422211,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1631715723
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191505\">Sean McIlvenna</span> <a href=\"#narrow/stream/179166-implementers/topic/Search.20for.20deleted.20resources/near/253422211\">said</a>:</p>\n<blockquote>\n<p>I'll plan to modify a fork of HAPI to use AuditEvent to track deletions and search the audit events</p>\n</blockquote>\n<p>presuming there are AuditEvents being recorded... would love to hear that there are.</p>",
        "id": 253485342,
        "sender_full_name": "John Moehrke",
        "timestamp": 1631738953
    },
    {
        "content": "<p>I would be even happier to know the AuditEvents conform to the IG I am working on, and if not to help me improve my IG. --  <a href=\"http://build.fhir.org/ig/JohnMoehrke/BasicAudit/branches/main/index.html\">http://build.fhir.org/ig/JohnMoehrke/BasicAudit/branches/main/index.html</a></p>",
        "id": 253485555,
        "sender_full_name": "John Moehrke",
        "timestamp": 1631739022
    },
    {
        "content": "<p>but I have generally been ignored by all the platforms when I ask (except for Grahame)</p>",
        "id": 253485594,
        "sender_full_name": "John Moehrke",
        "timestamp": 1631739043
    },
    {
        "content": "<p>I do have firely audit spec, but it is very different.</p>",
        "id": 253485887,
        "sender_full_name": "John Moehrke",
        "timestamp": 1631739168
    },
    {
        "content": "<p>Theory is that a Provenance of the delete could be recorded too.. but I have never actually made one of those.</p>",
        "id": 253486807,
        "sender_full_name": "John Moehrke",
        "timestamp": 1631739567
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span> , there aren't currently. But I'm planning to create an interceptor on CREATE/UPDATE/DELETE that automatically creates AuditEvent records for non-AuditEvent CUD requests.</p>",
        "id": 253493815,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1631742782
    },
    {
        "content": "<p>Taking a look at your IG wrt AuditEvent creation, the biggest problem I see is the requirement of a Patient being involved. In my case, it's organization management... nothing to do with a patient</p>",
        "id": 253494133,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1631742963
    },
    {
        "content": "<p>if there is no patient involved, then there is no patient</p>",
        "id": 253499063,
        "sender_full_name": "John Moehrke",
        "timestamp": 1631745629
    },
    {
        "content": "<p>I said that in the narrative that the IG only covers cases where patient is involved.</p>",
        "id": 253499103,
        "sender_full_name": "John Moehrke",
        "timestamp": 1631745647
    },
    {
        "content": "<p>but the profiles could be easy to adjust to remove the patient and use.. let me know how well it goes. Glad to adjust my spec.. also glad to point at an open-source implementation.</p>",
        "id": 253499170,
        "sender_full_name": "John Moehrke",
        "timestamp": 1631745690
    }
]