[
    {
        "content": "<p>Whats the syntax for searching for a patient that has a 'logical reference' link where the search criteria would be the logical link. Is that possible?</p>",
        "id": 154024402,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1544534784
    },
    {
        "content": "<p><a href=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=14103\" target=\"_blank\" title=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=14103\">https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=14103</a></p>",
        "id": 154024409,
        "sender_full_name": "Ewout Kramer",
        "timestamp": 1544536053
    },
    {
        "content": "<p>\"Will clearly define that chaining, reverse chaining and include are only defined to work for references using canonical or Reference.reference. \"</p>",
        "id": 154024411,
        "sender_full_name": "Ewout Kramer",
        "timestamp": 1544536132
    },
    {
        "content": "<p>\"Will add a \":identifier\" modifier for reference searches that allows specifying the value to match on in Reference.identifier.\"</p>",
        "id": 154024412,
        "sender_full_name": "Ewout Kramer",
        "timestamp": 1544536161
    },
    {
        "content": "<p>Now, we just have to find out where that text ended up in the spec...</p>",
        "id": 154024413,
        "sender_full_name": "Ewout Kramer",
        "timestamp": 1544536174
    },
    {
        "content": "<p><a href=\"http://build.fhir.org/search.html#reference\" target=\"_blank\" title=\"http://build.fhir.org/search.html#reference\">http://build.fhir.org/search.html#reference</a>, search for \"References are also allowed to have an identifier\"</p>",
        "id": 154024414,
        "sender_full_name": "Ewout Kramer",
        "timestamp": 1544536196
    },
    {
        "content": "<p>So if my resource looks like:</p>\n<div class=\"codehilite\"><pre><span></span>{\n    &quot;resourceType&quot;: &quot;Patient&quot;,\n    &quot;id&quot;: &quot;1&quot;,\n    &quot;identifier&quot;: [\n        {\n            &quot;system&quot;: &quot;a&quot;,\n            &quot;value&quot;: &quot;b&quot;\n        }\n    ],\n    &quot;link&quot;: [\n        {\n            &quot;other&quot;: {\n                &quot;identifier&quot;: {\n                    &quot;system&quot;: &quot;a&quot;,\n                    &quot;value&quot;: &quot;c&quot;\n                }\n            },\n            &quot;type&quot;: &quot;replaced-by&quot;\n        }\n    ]\n}\n</pre></div>\n\n\n<p>... it should be possible to find it using '/Patient?link:identifier=a|c'   ?</p>",
        "id": 154024430,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1544541528
    },
    {
        "content": "<p>I think that's correct.</p>",
        "id": 154024449,
        "sender_full_name": "Ewout Kramer",
        "timestamp": 1544544399
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> is that supposed to work out of the box in HAPI JPA? Because it doesn't ... :(</p>",
        "id": 154024756,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1544614001
    },
    {
        "content": "<p>the identifier qualifier is pretty new, so probably not widely supported yet.</p>",
        "id": 154024803,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1544627274
    },
    {
        "content": "<p>it never hurts to ask ;)</p>",
        "id": 154024804,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1544627302
    },
    {
        "content": "<p>With version 3.6.0 I have verified that you can simply post a SearchParameter with the expression Patient.link.other.identifier and voila!</p>",
        "id": 157666260,
        "sender_full_name": "Flemming Jørgensen",
        "timestamp": 1549430476
    },
    {
        "content": "<blockquote>\n<p>With version 3.6.0 I have verified that you can simply post a SearchParameter with the expression Patient.link.other.identifier and voila!</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"193540\">@Flemming Jørgensen</span>: Am trying to construct such a search against the <a href=\"http://hapi.fhir.org/baseR4\" target=\"_blank\" title=\"http://hapi.fhir.org/baseR4\">hapi.fhir.org/baseR4</a> server, but am not succeeding. How exactly should your search url look to make this work?</p>",
        "id": 161136364,
        "sender_full_name": "Michael Christensen",
        "timestamp": 1552990159
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191427\">@Jens Villadsen</span>, did you ever find a way for doing such searches?</p>",
        "id": 161137175,
        "sender_full_name": "Michael Christensen",
        "timestamp": 1552990913
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191521\">@Michael Christensen</span> Given a SearchParameter named patientLink the search would be like this: <code>baseUrl/Patient?patientLink=&lt;system&gt;|&lt;value&gt;</code> We are currently on hapi version 3.7.0 but only using STU3</p>",
        "id": 161137437,
        "sender_full_name": "Flemming Jørgensen",
        "timestamp": 1552991138
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"193540\">@Flemming Jørgensen</span>: Thanks, but I can't seem to make this work in our case. For instance we have a PractitionerRole (at <a href=\"http://hapi.fhir.org/baseR4/PractitionerRole/12512\" target=\"_blank\" title=\"http://hapi.fhir.org/baseR4/PractitionerRole/12512\">http://hapi.fhir.org/baseR4/PractitionerRole/12512</a>):</p>\n<div class=\"codehilite\"><pre><span></span>{\n  &quot;resourceType&quot;: &quot;PractitionerRole&quot;,\n  &quot;id&quot;: &quot;12512&quot;,\n  &quot;meta&quot;: {\n    &quot;versionId&quot;: &quot;1&quot;,\n    &quot;lastUpdated&quot;: &quot;2019-03-19T09:57:41.936+00:00&quot;\n  },\n  &quot;identifier&quot;: [\n    {\n      &quot;system&quot;: &quot;urn:ietf:rfc:3986&quot;,\n      &quot;value&quot;: &quot;79bd3605-e5f7-49ff-b813-06befb9c036b&quot;\n    }\n  ],\n  &quot;active&quot;: true,\n  &quot;period&quot;: {\n    &quot;start&quot;: &quot;2017-02-01&quot;\n  },\n  &quot;practitioner&quot;: {\n    &quot;type&quot;: &quot;Practitioner&quot;,\n    &quot;identifier&quot;: {\n      &quot;system&quot;: &quot;https://stps.dk/da/sundhedsprofessionelle-og-myndigheder/autorisationsregister/autorisationsid/&quot;,\n      &quot;value&quot;: &quot;55GT7&quot;\n    }\n  },\n  &quot;organization&quot;: {\n    &quot;type&quot;: &quot;Organization&quot;,\n    &quot;identifier&quot;: {\n      &quot;system&quot;: &quot;urn:oid:1.2.208.176.1.1&quot;,\n      &quot;value&quot;: &quot;453191000016003&quot;\n    }\n  }\n}\n</pre></div>\n\n\n<p>And I try to search for <a href=\"http://hapi.fhir.org/baseR4/PractitionerRole?organization=urn:oid:1.2.208.176.1.1|453191000016003\" target=\"_blank\" title=\"http://hapi.fhir.org/baseR4/PractitionerRole?organization=urn:oid:1.2.208.176.1.1|453191000016003\">http://hapi.fhir.org/baseR4/PractitionerRole?organization=urn:oid:1.2.208.176.1.1|453191000016003</a>, but the resulting Bundle is empty. Have also tried <a href=\"http://hapi.fhir.org/baseR4/PractitionerRole?organization.identifier=urn:oid:1.2.208.176.1.1|453191000016003\" target=\"_blank\" title=\"http://hapi.fhir.org/baseR4/PractitionerRole?organization.identifier=urn:oid:1.2.208.176.1.1|453191000016003\">http://hapi.fhir.org/baseR4/PractitionerRole?organization.identifier=urn:oid:1.2.208.176.1.1|453191000016003</a> with the same result. I am probably missing something obvious here, but I just can't get my head around it.</p>\n<p>By the way, we're on FHIR R4.</p>",
        "id": 161141668,
        "sender_full_name": "Michael Christensen",
        "timestamp": 1552995162
    },
    {
        "content": "<p>I would say that the correct search would be:  <a href=\"http://hapi.fhir.org/baseR4/PractitionerRole?organization:identifier=urn:oid:1.2.208.176.1.1|453191000016003\" target=\"_blank\" title=\"http://hapi.fhir.org/baseR4/PractitionerRole?organization:identifier=urn:oid:1.2.208.176.1.1|453191000016003\">http://hapi.fhir.org/baseR4/PractitionerRole?organization:identifier=urn:oid:1.2.208.176.1.1|453191000016003</a> with a \":\" instead of \".\". However it doesn't work. I have created a custom SearchParameter :</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"p\">{</span>\n  <span class=\"nt\">&quot;resourceType&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;SearchParameter&quot;</span><span class=\"p\">,</span>\n  <span class=\"nt\">&quot;url&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;http://test.dk/SearchParameter/PractitionerRole&quot;</span><span class=\"p\">,</span>\n  <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;PractitionerRole organization identifier&quot;</span><span class=\"p\">,</span>\n  <span class=\"nt\">&quot;status&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;active&quot;</span><span class=\"p\">,</span>\n  <span class=\"nt\">&quot;code&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;organizationLink&quot;</span><span class=\"p\">,</span>\n  <span class=\"nt\">&quot;base&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n    <span class=\"s2\">&quot;PractitionerRole&quot;</span>\n  <span class=\"p\">],</span>\n  <span class=\"nt\">&quot;type&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;token&quot;</span><span class=\"p\">,</span>\n  <span class=\"nt\">&quot;description&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Search parameter that basically fixes organization:identifier search param not working&quot;</span><span class=\"p\">,</span>\n  <span class=\"nt\">&quot;expression&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;PractitionerRole.organization.identifier&quot;</span><span class=\"p\">,</span>\n  <span class=\"nt\">&quot;xpathUsage&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;normal&quot;</span>\n<span class=\"p\">}</span>\n</pre></div>\n\n\n<p>and now you can find it like this: <a href=\"http://hapi.fhir.org/baseR4/PractitionerRole?organizationLink=urn:oid:1.2.208.176.1.1|453191000016003\" target=\"_blank\" title=\"http://hapi.fhir.org/baseR4/PractitionerRole?organizationLink=urn:oid:1.2.208.176.1.1|453191000016003\">http://hapi.fhir.org/baseR4/PractitionerRole?organizationLink=urn:oid:1.2.208.176.1.1|453191000016003</a></p>\n<p>This is a workaround I know</p>",
        "id": 161142773,
        "sender_full_name": "Flemming Jørgensen",
        "timestamp": 1552996397
    },
    {
        "content": "<p>Yeah, I also did try previously with the \"organization:identifier\" search with no luck. However, your solution with the custom SearchParameter is very clever. I will try to use that until the \":identifier\" stuff gets implemented in HAPI. </p>\n<p>Thanks!</p>",
        "id": 161143644,
        "sender_full_name": "Michael Christensen",
        "timestamp": 1552997111
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191521\">@Michael Christensen</span>  SearchParameters are indeed very powerful</p>",
        "id": 161145541,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1552998883
    }
]