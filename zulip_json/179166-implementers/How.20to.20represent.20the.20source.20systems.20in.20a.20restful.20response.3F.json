[
    {
        "content": "<p>We (Sweden) has an architecture that depends on the ability for a query endpoint (query existing data) to report the source system origin of each clinical data/record of the response. Each connected EHR system has a nationally provisioned identifier. The data of an EHR may be (locally, regionally) replicated into a regional data hub that acts as the server to which the national intermediary forwards requests to get the requested responses. Each record of the response should contain the identifier of the originating system (EHR) instance. We struggle on how to map that to FHIR. Any ideas are appreciated! Our current case is a restful GET on the Observation resource.</p>",
        "id": 153945960,
        "sender_full_name": "Johan Eltes",
        "timestamp": 1521392886
    },
    {
        "content": "<p>In R4, we're introducing Resource.source, however it's a string.  This may be a situation where a country-specific extension would be appropriate.  (The alternative is to use Provenance.)</p>",
        "id": 153945972,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1521395005
    },
    {
        "content": "<p>tehcnically, it's a uri, and it's very much in scope for using it like this</p>",
        "id": 153946057,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1521404189
    },
    {
        "content": "<p>Thanks! I would prefer an II type but a string/URI would do. We could synthesize a \"protocol\" to represent the coding system.  Regarding Provenance - to my understanding- there is no reference from Observation to Provenance? Maybe indirectly via basedOn. But there is - in our case - no necessity that the source system of the basedOn resource is the same as the source system of the Observation.</p>",
        "id": 153946120,
        "sender_full_name": "Johan Eltes",
        "timestamp": 1521443595
    },
    {
        "content": "<p>I had a chat with <span class=\"user-mention\" data-user-id=\"191375\">@Alexander Henket</span> (Nictiz) the other day to synchronize our requirements. Sweden (national reference architecture/HIE) and Netherlands (Spine) share the same architecture for aggregating responses at a national API end point, sourced from multiple local end-points. In order to evaulate the quality of an aggregated response (query existing EHR data), the ultimate client will need a kind of \"aggregation report\" that - for each consulted source system (as known by the record locator)  - states wether data retrieval was successful or not. In our current architecture of SOAP-based end points, Sweden uses a custom response soap header (\"aggregation report\") that is injected by the aggregating node. Are there any thoughts on introducing concepts related to the use of (aggregating) intermediaries into FHIR?</p>",
        "id": 153946121,
        "sender_full_name": "Johan Eltes",
        "timestamp": 1521444213
    },
    {
        "content": "<p>There is indeed no reference from Observation to Provenance. The reference goes the other way.<br>\nAny reference to Provenance from Observation would need to be an extension.</p>",
        "id": 153946125,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1521447339
    },
    {
        "content": "<p>see this: <a href=\"https://chat.fhir.org/#narrow/stream/implementers/subject/Facade.20for.20multiple.20backends\" target=\"_blank\" title=\"https://chat.fhir.org/#narrow/stream/implementers/subject/Facade.20for.20multiple.20backends\">https://chat.fhir.org/#narrow/stream/implementers/subject/Facade.20for.20multiple.20backends</a></p>",
        "id": 153946126,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1521447623
    },
    {
        "content": "<p>Thanks. Not sure though how Provenance-&gt;Observation (target) reference could be used to resolve the source system of the Observation contained in a system that is loosely coupled to the client? The client would do Observation/GET to retrieve a list of observation from an aggregating node/forwarding intermediary. The client does not by then know the origin of the observations. The only source of an observations Provenance would be the source system of the Observation. Without knowing the source system of an observation, the client client system will not be able to query the Provenance of the Observation? I guess the only option is to retrieve the provenance as part of the original request for observations?</p>\n<blockquote>\n<p>There is indeed no reference from Observation to Provenance. The reference goes the other way.<br>\nAny reference to Provenance from Observation would need to be an extension.</p>\n</blockquote>",
        "id": 153946135,
        "sender_full_name": "Johan Eltes",
        "timestamp": 1521450994
    }
]