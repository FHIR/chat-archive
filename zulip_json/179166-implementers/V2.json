[
    {
        "content": "<p>HAPI V2 Default validator question. Hi <span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span>  Any help would be great. thanks. <br>\none quick question regarding capability of HAPI V2 Default validator.  In below code, there are many errors in message but default validator is not picking up anyone of them. <br>\nWhat all we can validate with default validator?<br>\nThe below code is picked up from- <a href=\"https://hapifhir.github.io/hapi-hl7v2/xref/ca/uhn/hl7v2/examples/MessageValidation.html\" title=\"https://hapifhir.github.io/hapi-hl7v2/xref/ca/uhn/hl7v2/examples/MessageValidation.html\">https://hapifhir.github.io/hapi-hl7v2/xref/ca/uhn/hl7v2/examples/MessageValidation.html</a><br>\njust added my own message.</p>\n<p>import ca.uhn.hl7v2.DefaultHapiContext;<br>\nimport ca.uhn.hl7v2.HL7Exception;<br>\nimport ca.uhn.hl7v2.HapiContext;<br>\nimport ca.uhn.hl7v2.parser.PipeParser;<br>\nimport ca.uhn.hl7v2.validation.impl.ValidationContextFactory;</p>\n<p>public class MessageValidation {</p>\n<div class=\"codehilite\"><pre><span></span>/**\n * @param args\n * @throws HL7Exception\n * @throws              ca.uhn.hl7v2.parser.EncodingNotSupportedException\n */\npublic static void main(String[] args) throws HL7Exception {\n\n\n    HapiContext context = new DefaultHapiContext();\n\n    /*\n     * The default validation includes a number of sensible defaults including maximum lengths\n     * on string types, formats for telephone numbers and timestamps, etc.\n     */\n    context.setValidationContext(ValidationContextFactory.defaultValidation());\n\n    PipeParser parser = context.getPipeParser();\n\n    /*\n     * Errors in below invalidMessage1:\n     * a. PID-3 is required but missing\n     * b. ORC-1 field must have max two characters code and that too coming from HL7 table 0119. it must not have any components\n     * c. OBR-4 is required but missing\n     * d. OBX-2 having NM^ST as value. The data type of this field is ID and not allow to have components\n     * With all above issues, validator is still parsing the message successfully.\n     */\n\n    String invalidMessage= &quot;MSH|^~\\\\&amp;|Echosens.GateWay||||202002061359||ORU^R01|1234|D|2.3\\r\\n&quot;\n    +&quot;PID|1|CPHC0011||789987|Deo^Sachin||20150319|male||\\r\\n&quot;\n    +&quot;ORC|XYZ^abc|||||||||||||||||||\\r\\n&quot;\n    +&quot;OBR|||||||202002061359|||||||||||||||202002061359|||||\\r\\n&quot;\n    +&quot;OBX||NM^ST|81894-8^CAP||180|dB/m|100-260|||N|F|||20200206185936|BN\\r\\n&quot;\n    +&quot;OBX||NM|77615-3^E||5.4|kPa|||||F|||20200206185936|BN\\r\\n&quot;;\n\n    // Let&#39;s try parsing the invalid message:\n    try {\n        parser.parse(invalidMessage);\n        System.out.println(&quot;Successfully parsed valid message&quot;);\n    } catch (HL7Exception e) {\n        // This time, we are expecting an exception, because the message\n        // should fail validation.\n        System.out.println(&quot;As expected, the message did not validate: &quot; + e.getMessage());\n\n    }\n}\n</pre></div>\n\n\n<p>}</p>",
        "id": 193046864,
        "sender_full_name": "Aditya Joshi",
        "timestamp": 1586182188
    },
    {
        "content": "<p>HAPI HL7v2's validator only handles syntactic validation (i.e. are values conformant with their datatypes and that kind of thing).</p>\n<p>For more robust validation you'd need to use conformance profiles, whch TBH I haven't looked at in years...</p>",
        "id": 193058810,
        "sender_full_name": "James Agnew",
        "timestamp": 1586186956
    }
]