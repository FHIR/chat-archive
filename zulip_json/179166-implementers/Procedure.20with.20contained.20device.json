[
    {
        "content": "<p>I'm implementing a write operation for Device now, but the Device alone seems insufficient for the use case. I would require fields like performed date and coding. I asked earlier on another topic and I thought of using Procedure, but I cannot see how to pass a device as focalDevice? Is this supposed to be data I can pass to the server? I found no examples on the hapi fhir test client so I started questioning this.</p>\n<p>How do you consider using the DomainResource contained for this purpose? I could then register a Procedure that has most of the data generally needed to register when, what, hows and put a Device in Contained.</p>",
        "id": 153964648,
        "sender_full_name": "Thomas Johansen",
        "timestamp": 1527186509
    },
    {
        "content": "<p><a href=\"http://build.fhir.org/procedure-example-implant.xml.html\" target=\"_blank\" title=\"http://build.fhir.org/procedure-example-implant.xml.html\">http://build.fhir.org/procedure-example-implant.xml.html</a></p>",
        "id": 153964650,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1527186626
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span> Thanks, it is however as I wrote that I cannot pass an actual Device, only a reference. So if a doctor is to register critical information on a patient, it would not be so simple. He would need to record when the patient got the implant, either by procedure date or patient age, and the device itself. What kind of coding does the device have etc.</p>",
        "id": 153964665,
        "sender_full_name": "Thomas Johansen",
        "timestamp": 1527187604
    },
    {
        "content": "<p>i don't understand.</p>",
        "id": 153964678,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1527189996
    },
    {
        "content": "<p>the example has   &lt;performedDateTime value=\"2015-04-05\"/&gt;</p>",
        "id": 153964680,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1527190024
    },
    {
        "content": "<p>and in this case the device is referenced as implanted</p>",
        "id": 153964681,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1527190090
    },
    {
        "content": "<p>but you can also have a device used. Thus:</p>",
        "id": 153964682,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1527190099
    },
    {
        "content": "<p>instead of </p>\n<div class=\"codehilite\"><pre><span></span>  &lt;focalDevice&gt;\n    &lt;action&gt;\n      &lt;coding&gt;\n        &lt;system value=&quot;http://hl7.org/fhir/device-action&quot;/&gt;\n        &lt;code value=&quot;implanted&quot;/&gt;\n      &lt;/coding&gt;\n    &lt;/action&gt;\n    &lt;manipulated&gt;\n      &lt;reference value=&quot;Device/pacemaker_MDT_Azure_W1DR01&quot;/&gt;\n    &lt;/manipulated&gt;\n  &lt;/focalDevice&gt;\n</pre></div>",
        "id": 153964685,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1527190187
    },
    {
        "content": "<p>you would have </p>\n<div class=\"codehilite\"><pre><span></span>    &lt;usedReference&gt;\n      &lt;reference value=&quot;Device/pacemaker_MDT_Azure_W1DR01&quot;/&gt;\n    &lt;/usedReference&gt;\n</pre></div>",
        "id": 153964686,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1527190261
    },
    {
        "content": "<p>if you want to describe the characteristics of the device Device/pacemaker_MDT_Azure_W1DR01, that is another resource which can be contained</p>",
        "id": 153964687,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1527190401
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span> Mkey, I think I'm ending up with the Device being contained. Well, what I tried to explain was that I cannot refer to an existing Device. For our case a Device would need to be defined <em>through</em> a procedure. So you are correct in the assessment of me requiring a Procedure with the fields you gave example on. So the question was basically, would you use Procedure.contained to fit my need. Thanks :)</p>",
        "id": 153964791,
        "sender_full_name": "Thomas Johansen",
        "timestamp": 1527225167
    },
    {
        "content": "<p>Kewl. If you you cannot point to an existing device resource, you can create one on the spot. <br>\nYou will notice that the attributes in Device are all optional, so you don't have to add anything you don't want.<br>\nAdding procedure data to a device would not be good.</p>",
        "id": 153964793,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1527226162
    },
    {
        "content": "<p>Okey, cause what I aim for is to register an implant on a patient. We don't have, nor register the data that belongs to the device; like manufacturer etc. We define type of implant through a code system, and then other \"regular\" data like date. I would require an extension to register when the patient got the Device and I feel the semantics are wrong doing it like this. It is the concept a Patient god a device vs a Patient had a procedure <em>where</em> he got the device. Thoughts?</p>",
        "id": 153964794,
        "sender_full_name": "Thomas Johansen",
        "timestamp": 1527226801
    },
    {
        "content": "<p>on using a code, that might make sense. This is actually supported - see Procedure.usedCode.</p>",
        "id": 153964795,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1527226932
    },
    {
        "content": "<p>on the modeling question - you say that you just want to inform the patient has a device. So what you are modeling is not a characteristic of the patient, nor a characteristic of the device, but an association between a patient and a device.</p>",
        "id": 153964798,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1527227115
    },
    {
        "content": "<p><strong>keeping in mind that we will likely alter the device resource  and there might be some changes</strong> there are 2 options:<br>\nyou use procedure to define when that association patient-device was created (which gives you the information you need like data and device type),<br>\nOR you use a device and can express the patient using device.patient (the exact position of this element will likely change).</p>",
        "id": 153964800,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1527227291
    },
    {
        "content": "<p>You are correct of course. The only thing I can register to a Device is:</p>\n<p>{<br>\n  \"resourceType\": \"Device\",<br>\n  \"type\": {<br>\n     \"system\": \"1234\",<br>\n      \"code\": \"1\"<br>\n    }<br>\n}</p>\n<p>So maybe Procedure.usedCode is just what I should use here. I define category in the Procedure to point to Implant category from our terminology server. Should be sufficient?</p>",
        "id": 153964801,
        "sender_full_name": "Thomas Johansen",
        "timestamp": 1527227321
    },
    {
        "content": "<p>Using only a device and device.Patient would still lack the date of implant. Do using procedure seems more correct. Also this seems (arguably) better for interoperability. Many issues in interoperability are not about the data being there, and definitely not about the quantity of data, but a common understanding what that data means. If you express a procedure and a device, it is semantically sound, i think</p>",
        "id": 153964802,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1527227331
    },
    {
        "content": "<blockquote>\n<p>So maybe Procedure.usedCode is just what I should use here. I define category in the Procedure to point to Implant category from our terminology server. Should be sufficient?</p>\n</blockquote>\n<p>I think so, yes</p>",
        "id": 153964803,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1527227469
    },
    {
        "content": "<p>I agree, and is self documented through profiling so should be safe to assume a common understanding of how to use the resource. Thanks a lot for the discussion Jose :)</p>",
        "id": 153964804,
        "sender_full_name": "Thomas Johansen",
        "timestamp": 1527227543
    }
]