[
    {
        "content": "<p>I'm trying to build a very basic IG using Sushi. I'm using FHIR R4 and I would like to use AU version of R4. I'm getting the following error while trying to do so : \"error: Failed to add hl7.fhir.au.base:2.0.0 to ImplementationGuide instance.  Could not determine its canonical URL from the FHIR cache.\" Any suggestion what needs to be done? <br>\nThis is what I've provided as dependency <br>\n\"dependencies\": {<br>\n    \"hl7.fhir.r4.core\": \"4.0.1\",<br>\n    \"hl7.fhir.au.base\": \"2.0.0\"<br>\n },</p>\n<p><span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span> , any suggestion?</p>",
        "id": 188072270,
        "sender_full_name": "Shovan Roy",
        "timestamp": 1581559827
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"193760\">@Shovan Roy</span>.  What version of SUSHI are you using?  If you're not using the latest version, could you upgrade? (<code>npm install -g fsh-sushi</code> should do it).  Starting in SUSHI 0.8.0, we do some additional logging.  After running SUSHI, some of the first logs should be about loading dependencies.  Do you get a log that the AU dependency loaded successfully, or do you get an error saying it did not?</p>",
        "id": 188105223,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1581600183
    },
    {
        "content": "<p>Also, this is fine -- but you'll probably have better luck w/ future SUSHI-related questions if you ask them in the #shorthand stream.</p>",
        "id": 188105262,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1581600218
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191469\">@Chris Moesel</span> Does FSH support the creation of derived profiles?</p>",
        "id": 211860424,
        "sender_full_name": "Ronald Dendere",
        "timestamp": 1601516319
    },
    {
        "content": "<p>If by \"derived profiles\" you mean profiles based on other profiles, then yes, FSH supports that -- you just declare the base profile as the \"Parent\".  If you mean something else, please clarify and I'll try to answer!</p>",
        "id": 211900461,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1601554713
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191469\">Chris Moesel</span> <a href=\"#narrow/stream/179166-implementers/topic/Sushi/near/211900461\">said</a>:</p>\n<blockquote>\n<p>If by \"derived profiles\" you mean profiles based on other profiles, then yes, FSH supports that -- you just declare the base profile as the \"Parent\".  If you mean something else, please clarify and I'll try to answer!</p>\n</blockquote>\n<p>Yes, that's exactly what I mean. Basically, I want to create a Patient profile based on the AU Base Patient. What is the syntax for declaring the base profile as the parent? I would think that the URL of the base profile should be used, right?  i.e. Parent:         <a href=\"http://hl7.org.au/fhir/StructureDefinition/au-patient\">http://hl7.org.au/fhir/StructureDefinition/au-patient</a><br>\nbut I am getting an error: \"Parent:         <a href=\"http://hl7.org.au/fhir/StructureDefinition/au-patient\">http://hl7.org.au/fhir/StructureDefinition/au-patient</a>\" not found</p>",
        "id": 212007730,
        "sender_full_name": "Ronald Dendere",
        "timestamp": 1601618348
    },
    {
        "content": "<p>Have you declared a dependency on the AU profiles in your config?</p>",
        "id": 212010522,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1601620117
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"192166\">Jean Duteau</span> <a href=\"#narrow/stream/179166-implementers/topic/Sushi/near/212010522\">said</a>:</p>\n<blockquote>\n<p>Have you declared a dependency on the AU profiles in your config?</p>\n</blockquote>\n<p>That was the problem! Thanks Jean. All good now.</p>",
        "id": 212042549,
        "sender_full_name": "Ronald Dendere",
        "timestamp": 1601624969
    },
    {
        "content": "<p>Hi, I am doing that and I am not getting any compilation errors, but my output folder remains empty after running the IG publisher. I remove the child profile and then all works fine. Any tips on what I am doing wrong?</p>",
        "id": 213567724,
        "sender_full_name": "Diana_Ovelgoenne",
        "timestamp": 1602858717
    },
    {
        "content": "<p>Seems that this is happening when trying to add any Valueset or a Code System</p>",
        "id": 213780963,
        "sender_full_name": "Diana_Ovelgoenne",
        "timestamp": 1603112455
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"197447\">@Diana_Ovelgoenne</span> -- is your IG source code available locally?  Or can you send some example we can use to try to reproduce this problem?</p>",
        "id": 213781980,
        "sender_full_name": "Chris Moesel",
        "timestamp": 1603112938
    },
    {
        "content": "<p>Hi - can anyone point me to a  reference for sushi-config.yaml?</p>",
        "id": 272870396,
        "sender_full_name": "Patrick Ryan",
        "timestamp": 1645566016
    },
    {
        "content": "<p><a href=\"https://fshschool.org/docs/sushi/configuration/\">https://fshschool.org/docs/sushi/configuration/</a></p>",
        "id": 272870681,
        "sender_full_name": "David Pyke",
        "timestamp": 1645566219
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"474688\">@Patrick Ryan</span> - FYI: the Sushi owners/experts live on the <a class=\"stream\" data-stream-id=\"215610\" href=\"/#narrow/stream/215610-shorthand\">#shorthand</a> channel.</p>",
        "id": 272874325,
        "sender_full_name": "John Silva",
        "timestamp": 1645568265
    },
    {
        "content": "<p>Hi SUSHI experts,<br>\nI am trying to get the fsh tutorial to run, but have difficulty to have SUSHI download the dependencies.<br>\nWhen running SUSHI </p>\n<div class=\"codehilite\"><pre><span></span><code>sushi .\n</code></pre></div>\n<p>in one of the tutorials, I am getting:</p>\n<div class=\"codehilite\"><pre><span></span><code>Failed to load hl7.fhir.r4.core#4.0.1: The package hl7.fhir.r4.core#4.0.1 could not be loaded locally or from the FHIR package registry.\n</code></pre></div>\n<p>I did verify that the proxy should be working. I did set http_proxy and https_proxy correctly. When unsetting these variables, npm for example cannot find its repositories and throws an error accordingly.</p>\n<p>Any ideas? Especially: what is the package registry for SUSHI? <a href=\"http://registry.fhir.org\">registry.fhir.org</a>? And where do I find the local cache for SUSHI? Unfortunately the SUSHI docs do not mention any of these.</p>\n<p>Cheers<br>\nMarco</p>",
        "id": 274673734,
        "sender_full_name": "Marco Wedekind",
        "timestamp": 1646824885
    },
    {
        "content": "<p>Hi Marco, there is a dedicated stream about <a class=\"stream\" data-stream-id=\"215610\" href=\"/#narrow/stream/215610-shorthand\">#shorthand</a>.</p>",
        "id": 274673859,
        "sender_full_name": "Mareike Przysucha",
        "timestamp": 1646824939
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"246299\">@Marco Wedekind</span> AFAIK sushi uses <a href=\"http://registry.fhir.org\">registry.fhir.org</a> as primary package registry and it most definitely includes that one <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span><br>\nThis has where your local FHIR package cache generally lives: <a href=\"https://confluence.hl7.org/display/FHIR/FHIR+Package+Cache\">https://confluence.hl7.org/display/FHIR/FHIR+Package+Cache</a></p>",
        "id": 274688355,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1646833260
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"203235\">@Ward Weistra</span> Cool, I will try to manually download and extract the dependencies as outlined in the docs you have referenced. Let's see if that's a work-around...</p>",
        "id": 274802566,
        "sender_full_name": "Marco Wedekind",
        "timestamp": 1646900080
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"246299\">@Marco Wedekind</span> You can use Firely Terminal as an alternative to install the packages to your FHIR cache: <a href=\"https://simplifier.net/downloads/firely-terminal\">https://simplifier.net/downloads/firely-terminal</a></p>",
        "id": 274802693,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1646900177
    },
    {
        "content": "<p>Ok, I got the firely terminal installed and used it to install the packages that SUSHI could not install. Alas, firely terminal is installing the packages into a different directory:</p>\n<div class=\"codehilite\"><pre><span></span><code>~/.local/share/.fhir/packages\n</code></pre></div>\n<p>Whereas SUSHI expects the packages in</p>\n<div class=\"codehilite\"><pre><span></span><code>~/.fhir/packages\n</code></pre></div>\n<p>Copying over the package to the directory, where SUSHI is expecting the packages, works around the problem.</p>\n<p>I would much more prefer for SUSHI to be able to install dependencies itself. Or provide configuration options in case of proxies or different package folders. I got it working but it is way too awkward <span aria-label=\"grimacing\" class=\"emoji emoji-1f62c\" role=\"img\" title=\"grimacing\">:grimacing:</span> </p>\n<p>I will try to open a ticket with SUSHI.</p>",
        "id": 274822234,
        "sender_full_name": "Marco Wedekind",
        "timestamp": 1646911905
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"246299\">@Marco Wedekind</span> This issue should have been fixed in one of the last beta versions of Firely.Terminal. I would recommend using the latest available version.</p>",
        "id": 274822974,
        "sender_full_name": "Alexander Zautke",
        "timestamp": 1646912412
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"193430\">@Alexander Zautke</span> Thanks for pointing that out, Alex. Sure it would remove an unneccessary copy, but I still regard it as an unneeded work-around. SUSHI should always be able to fetch dependencies itself.</p>",
        "id": 274824082,
        "sender_full_name": "Marco Wedekind",
        "timestamp": 1646913165
    },
    {
        "content": "<p>I have opened a ticket for SUSHI here: <a href=\"https://github.com/FHIR/sushi/issues/1045\">https://github.com/FHIR/sushi/issues/1045</a></p>",
        "id": 274824103,
        "sender_full_name": "Marco Wedekind",
        "timestamp": 1646913185
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"203235\">Ward Weistra</span> <a href=\"#narrow/stream/179166-implementers/topic/Sushi/near/274688355\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"246299\">Marco Wedekind</span> AFAIK sushi uses <a href=\"http://registry.fhir.org\">registry.fhir.org</a> as primary package registry and it most definitely includes that one :)<br>\nThis has where your local FHIR package cache generally lives: <a href=\"https://confluence.hl7.org/display/FHIR/FHIR+Package+Cache\">https://confluence.hl7.org/display/FHIR/FHIR+Package+Cache</a></p>\n</blockquote>\n<p>As an interesting note, that page does not include information about:</p>\n<ul>\n<li><code>packages.ini</code> (file that core tooling uses to index)</li>\n<li>non-version number literals (e.g., <code>current</code>, <code>dev</code>)</li>\n</ul>\n<p>I could take a stab at updating the page, but it would be my (possibly incorrect) understanding of those items.</p>",
        "id": 274854854,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1646927842
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"222054\">@Gino Canessa</span> That page is only about the package cache. There's a bit more in <a href=\"https://confluence.hl7.org/display/FHIR/NPM+Package+Specification\">https://confluence.hl7.org/display/FHIR/NPM+Package+Specification</a>, and a package registry documentation at <a href=\"https://confluence.hl7.org/display/FHIR/FHIR+Package+Registry+User+Documentation\">https://confluence.hl7.org/display/FHIR/FHIR+Package+Registry+User+Documentation</a>.</p>\n<p>But <code>packages.ini</code> and currently <code>current</code> and <code>dev</code> are not (yet) part of the FHIR package spec, but more IG Publisher specific input files and conventions.</p>",
        "id": 274862053,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1646930761
    },
    {
        "content": "<p>Thanks Ward!  But I would argue that artifacts used by the current version of software should be included, even if they are not 'officially' part of the spec.</p>\n<p>The local package cache has a <code>packages.ini</code> file that at least some tooling uses to manage the local package cache.  I have not looked through the code to see how synchronization is handled in that tooling, but I have to imagine it serves a purpose  ;-).</p>\n<p>Similarly, if you look in that directory you can find directives such as <code>hl7.fhir.r4b.core#current</code>, which are not described.  If the cache is meant to be used by different developers then it needs to be consistently implementable.</p>",
        "id": 274886608,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1646941916
    },
    {
        "content": "<p>packages.ini is just a cache. If you delete it, it'll be rebuilt</p>",
        "id": 274887052,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1646942151
    },
    {
        "content": "<p>dev and current are documented elsewhere. dev will never exist, but current does. It's just the version - how does that matter to the NPM package spec?</p>",
        "id": 274887167,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1646942211
    },
    {
        "content": "<p>Yep on packages.ini - I even have implemented support for it myself.  My point is that if all devs start adding undocumented files into the cache, we soon have conflicts, etc.</p>\n<p>The confluence page of <a href=\"https://confluence.hl7.org/display/FHIR/FHIR+Package+Cache\">FHIR Package Cache</a> is the page I was referring to - I do not see anything specific about the NPM package spec, just the information about the FHIR cache directory.</p>",
        "id": 274887426,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1646942340
    },
    {
        "content": "<p>As a note on this file - the tooling defaults to 'wipe the cache' on any sort of issue (which makes sense, it's a local cache).  But, builds were wiping my cache on each run, and everything <em>looked</em> right.  So, I started digging my way through the source in two repos (Kindling and eventually .org.hl7.fhir.core).</p>\n<p>Turns out the file requires <code>\\r\\n</code> for newlines on all OSes, I my generic <code>ini</code> code was defaulting to <code>\\n</code> on Windows.  <em>sigh</em>  (noting here so that it's Zulip-searchable)</p>",
        "id": 275831580,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1647622447
    }
]