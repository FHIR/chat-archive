[
    {
        "content": "<p>patient-preferenceType is listed as part of Patient.communication.preferred, which is weird since that's a boolean. Should this be similar to patient-proficiency, in that it's part of the Patient.communication?</p>",
        "id": 255067753,
        "sender_full_name": "Brendan Keeler",
        "timestamp": 1632756449
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/G2Gq5HCIn4NfgF6B6pvGe-Ib/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/G2Gq5HCIn4NfgF6B6pvGe-Ib/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/G2Gq5HCIn4NfgF6B6pvGe-Ib/image.png\"></a></div>",
        "id": 255067791,
        "sender_full_name": "Brendan Keeler",
        "timestamp": 1632756465
    },
    {
        "content": "<p>Anyone have ideas here?</p>",
        "id": 255760158,
        "sender_full_name": "Brendan Keeler",
        "timestamp": 1633101495
    },
    {
        "content": "<p>I think the idea it that you add the extension on Patient.communication.preferred in order to qualify whether the preference relates to written or verbal communication.</p>\n<p>So in effect you could have two Patient.communication nodes both with preferred = true, but one qualified as verbal preference and one as written preference.</p>",
        "id": 255763007,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1633102639
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191450\">@Simone Heckmann</span> I am not sure that I understand.  <code>Communication</code> is a <code>BackboneElement</code> so it has an <code>extension</code> field and therefore <code>patient-proficiency</code> should be placed in <code>Patient.Communication</code> (as documentation on Brendan's screenshot says).</p>\n<div class=\"codehilite\"><pre><span></span><code>...restOfThePatient,\ncommunication: [\n    {\n      extension: [\n        {\n          extension: [\n            {\n              url: &quot;level&quot;,\n              valueCoding: {\n                system: &quot;urn:oid:2.16.840.1.113883.5.61&quot;,\n                code: &quot;G&quot;,\n                display: &quot;Good&quot;,\n              },\n            },\n            {\n              url: &quot;type&quot;,\n              valueCoding: {\n                system: &quot;urn:oid:2.16.840.1.113883.5.60&quot;,\n                code: &quot;ESP&quot;,\n                display: &quot;Expressed spoken&quot;,\n              },\n            },\n          ],\n          url: &quot;http://hl7.org/fhir/StructureDefinition/patient-proficiency&quot;,\n        },\n      ],\n      language: {\n        coding: [\n          {\n            system: &quot;http://tools.ietf.org/html/bcp47&quot;,\n            code: &quot;ita&quot;,\n          },\n        ],\n      },\n      preferred: false,\n    }\n],\n...restOfThePatient\n</code></pre></div>\n<p>But when it comes to the <code>patient-preferenceType</code> the documentation states that it should be in <code>Patient.Communication.preffered</code>, which is a <code>boolean</code> type, so it is not extensible, it does not have an <code>extension</code> field. I have an <code>Extension</code> that looks like that:</p>\n<div class=\"codehilite\"><pre><span></span><code>{\n          valueCoding: {\n            code: &quot;verbal&quot;,\n            display: &quot;verbal&quot;,\n            system: &quot;http://hl7.org/fhir/language-preference-type&quot;,\n          },\n          url: &quot;http://hl7.org/fhir/StructureDefinition/patient-preferenceType&quot;\n}\n</code></pre></div>\n<p>but I have no idea where to put it to satisfy the FHIR validator, when I put it in <code>Patient.Communication</code> I get \"Patient.communication[0]: The extension <a href=\"http://hl7.org/fhir/StructureDefinition/patient-preferenceType\">http://hl7.org/fhir/StructureDefinition/patient-preferenceType</a> is not allowed to be used at this point (allowed = e:Patient.communication.preferred; this element is [[Patient.communication, BackboneElement]) \". But as I said before <code>preferred</code> is a boolean, so I can not put extension there. Could you help me with this? I would appreciate this. Thank you in advance!</p>",
        "id": 257991615,
        "sender_full_name": "Piotr Sokoliński",
        "timestamp": 1634544474
    },
    {
        "content": "<p>All elements in FHIR are extensible, not just backbone elements</p>",
        "id": 257992121,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1634544774
    },
    {
        "content": "<p>So my <code>communication</code> for the <code>Patient</code> should look like this?</p>\n<div class=\"codehilite\"><pre><span></span><code>...restOfThePatient,\ncommunication: [\n    {\n      extension: [\n        {\n          extension: [\n            {\n              url: &quot;level&quot;,\n              valueCoding: {\n                system: &quot;urn:oid:2.16.840.1.113883.5.61&quot;,\n                code: &quot;G&quot;,\n                display: &quot;Good&quot;,\n              },\n            },\n            {\n              url: &quot;type&quot;,\n              valueCoding: {\n                system: &quot;urn:oid:2.16.840.1.113883.5.60&quot;,\n                code: &quot;ESP&quot;,\n                display: &quot;Expressed spoken&quot;,\n              },\n            },\n          ],\n          url: &quot;http://hl7.org/fhir/StructureDefinition/patient-proficiency&quot;,\n        },\n      ],\n      language: {\n        coding: [\n          {\n            system: &quot;http://tools.ietf.org/html/bcp47&quot;,\n            code: &quot;ita&quot;,\n          },\n        ],\n      },\n      preferred: {\n          valueCoding: {\n            code: &quot;verbal&quot;,\n            display: &quot;verbal&quot;,\n            system: &quot;http://hl7.org/fhir/language-preference-type&quot;,\n          },\n          url: &quot;http://hl7.org/fhir/StructureDefinition/patient-preferenceType&quot;\n     },\n    }\n],\n...restOfThePatient\n</code></pre></div>\n<p>Unfortunately, when I try to validate such a Patient I get \"Patient.communication[0].preferred: This property must be an simple value, not an object (preferred at Patient.communication[0].preferred)\" from validator.</p>",
        "id": 257992490,
        "sender_full_name": "Piotr Sokoliński",
        "timestamp": 1634544997
    },
    {
        "content": "<p>To extend preferred, you need to say this:</p>\n<div class=\"codehilite\"><pre><span></span><code>      _preferred: {\n          &quot;extension&quot;: [{\n               valueCoding: {\n                      code: &quot;verbal&quot;,\n                      display: &quot;verbal&quot;,\n                      system: &quot;http://hl7.org/fhir/language-preference-type&quot;,\n              },\n              url: &quot;http://hl7.org/fhir/StructureDefinition/patient-preferenceType&quot;\n           }]\n      },\n</code></pre></div>",
        "id": 258036722,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1634567060
    },
    {
        "content": "<p>Thank you very much! I could not find it in the documentation. It is documented somewhere?</p>",
        "id": 258058222,
        "sender_full_name": "Piotr Sokoliński",
        "timestamp": 1634574789
    },
    {
        "content": "<p>Yup :)  <a href=\"https://hl7.org/fhir/json.html#primitive\">https://hl7.org/fhir/json.html#primitive</a></p>",
        "id": 258059021,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1634575082
    },
    {
        "content": "<p>Thanks again!</p>",
        "id": 258059869,
        "sender_full_name": "Piotr Sokoliński",
        "timestamp": 1634575391
    }
]