[
    {
        "content": "<p>Are there any sites or tools you all use to validate your Json</p>",
        "id": 153957542,
        "sender_full_name": "Chris Lo",
        "timestamp": 1525958795
    },
    {
        "content": "<p>there's json schema, and then you can use any of the validating servers</p>",
        "id": 153958122,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1526065506
    },
    {
        "content": "<p>or the FHIR validator</p>",
        "id": 153958123,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1526065516
    },
    {
        "content": "<p>see <a href=\"http://hl7.org/fhir/validation.html\" target=\"_blank\" title=\"http://hl7.org/fhir/validation.html\">http://hl7.org/fhir/validation.html</a></p>",
        "id": 153958124,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1526065529
    },
    {
        "content": "<p>Hi,</p>\n<p>I am getting error while implementing some profile to Azure FHIR Server. It is showing JSON div error.</p>\n<p>Please help me to resolve the issue.<br>\nBelow are the list of profile I am getting issue in JSON.<br>\nPDEX-Clinical:<br>\nCoverage<br>\nDevice<br>\nMedicationDispense</p>\n<p>PDEX- Plannet-Provider:<br>\nPlannetLocation<br>\nPlannetNetwork</p>\n<p>I would be helpful if you provide us updated json for this profiles.</p>",
        "id": 258172056,
        "sender_full_name": "sayan samanta",
        "timestamp": 1634639308
    },
    {
        "content": "<p>Can you provide examples of your instances and the specific errors you're seeing?</p>",
        "id": 258193642,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1634649921
    },
    {
        "content": "<p>Hi,</p>\n<p>I am getting the following error when validating ServiceRequest resources using the FHIR validator (<a href=\"http://hl7.org/fhir/validation.html#jar\">http://hl7.org/fhir/validation.html#jar</a>): \"Unrecognised property '@locationReference'\"</p>\n<p>However, locationReference is a valid field according to the specification (<a href=\"https://www.hl7.org/fhir/servicerequest-definitions.html#ServiceRequest.locationReference\">https://www.hl7.org/fhir/servicerequest-definitions.html#ServiceRequest.locationReference</a>). </p>\n<p>Could the FHIR Validator be wrong? </p>\n<p>The JSON looks like this:</p>\n<div class=\"codehilite\"><pre><span></span><code>  &quot;resource&quot;: {\n    &quot;resourceType&quot;: &quot;ServiceRequest&quot;,\n    ...\n    &quot;locationReference&quot;: [\n      {\n        &quot;reference&quot;: &quot;Location/{id}&quot;\n      }\n    ],\n    ...\n  }\n</code></pre></div>\n\n<p>Thank you.</p>",
        "id": 259260005,
        "sender_full_name": "Vanya Yaneva-Cormack",
        "timestamp": 1635349555
    },
    {
        "content": "<p>If this is the literal JSON, the line  <code>\"reference\": \"Location/{id}\"</code> should contain the actual location id (e.g. <code>\"reference\": \"Location/33245\"</code>)</p>\n<p>I am not sure if that is the cause of the error, though.</p>",
        "id": 259260779,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1635349910
    },
    {
        "content": "<p>Thank you for the reply. Yes, the actual json has the correct Location id - I simply redacted it before posting.</p>",
        "id": 259261152,
        "sender_full_name": "Vanya Yaneva-Cormack",
        "timestamp": 1635350047
    },
    {
        "content": "<p>In ServiceRequest, 'location' is not a polymorphic type.  I.e. its name is not \"location[x]\" in the spec.  That means that the proper element name is just \"location\" not \"locationReference\".  We only append the type name to an element name when we're replacing a \"[x]\".</p>",
        "id": 259267667,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1635352629
    },
    {
        "content": "<p>Thank you for the reply Lloyd.</p>\n<p>I tried changing to:</p>\n<div class=\"codehilite\"><pre><span></span><code>    &quot;location&quot;: [\n      {\n        &quot;reference&quot;: &quot;Location/{id}&quot;\n      }\n    ]\n</code></pre></div>\n<p>but I am getting a new error: <code>The property reference must be an Object, not a primitive property (at Bundle.entry[0].resource.location[0].reference)</code>. Here <code>Bundle.entry[0].resource</code> points to the ServiceRequest.</p>\n<p>Could you help me make sense of it?</p>",
        "id": 259272413,
        "sender_full_name": "Vanya Yaneva-Cormack",
        "timestamp": 1635354450
    },
    {
        "content": "<p>If you're using R5, then \"location\" is a CodeableReference, which means you need location.reference.reference before you specify \"Location/{id}\".  If you're trying to do something with R4, make sure you assert the version when you invoke the validator</p>",
        "id": 259279372,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1635357270
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> <a href=\"#narrow/stream/179166-implementers/topic/Json.20Validation/near/259267667\">said</a>:</p>\n<blockquote>\n<p>In ServiceRequest, 'location' is not a polymorphic type.  I.e. its name is not \"location[x]\" in the spec.  That means that the proper element name is just \"location\" not \"locationReference\".  We only append the type name to an element name when we're replacing a \"[x]\".</p>\n</blockquote>\n<p>Hi Lloyd, thanks for this answer.  I don't think I understood this about the FHIR spec before, and I'm not clear exactly where it does and doesn't apply, apart from polymorphic types.  </p>\n<p>It doesn't seem intuitive to me, eg in the PatientResource we see nodes like managingOrganization which can only ever be an Organization, but I expected my Patient resource to carry the node managingOrganization.  Ditto for generalPractitioner - it's not an [x] although it supports multiple different resources to represent it.  </p>\n<p>Could you clarify further?  The system that is sending us the node 'locationReference' will need this to be clearly understood, I think. before they change their code.</p>",
        "id": 259375631,
        "sender_full_name": "Alan Pinder",
        "timestamp": 1635421744
    },
    {
        "content": "<p>Essentially, the name that you see in the specification is the name that must appear in the instance <em>except</em> when the name ends with <code>[x]</code>.  In those cases, you replace the <code>[x]</code> with the name of the type you're instantiating.  It's certainly possible that some names will end in the name of a resource - e.g. generalPractitioner.  However, there's no guarantee that the type name corresponds to what the element points to or contains.  For example, generalPractitioner might be a reference to an Organization.</p>\n<p>The issue with your instance was that the ServiceRequest resource defines an element called <code>location</code>.  It does <em>not</em> define an element called <code>locationReference</code>.  So if you use the latter, it's not going to validate.</p>",
        "id": 259402055,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1635433291
    },
    {
        "content": "<p>In R4, there are two elements in the ServiceRequest resource, locationCode and locationReference. In R5, they have been conflated into location as a CodeableReference.</p>",
        "id": 259403267,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1635433797
    },
    {
        "content": "<p>Ah, sorry.  I didn't look at R4.</p>",
        "id": 259406369,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1635435107
    },
    {
        "content": "<p>So if the resource being validated is from R4, the element name should be <code>locationReference</code> and the validator should be told that the resource contents are following the R4 requirements.</p>",
        "id": 259425081,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1635442662
    },
    {
        "content": "<p>Thanks all for these clarifications, got it now and thanks for the advice about asserting the version for the validator!</p>",
        "id": 259461464,
        "sender_full_name": "Alan Pinder",
        "timestamp": 1635460837
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/3RGaDahm8YH_qQksGAfOqlMR/Profile_error.png\">Profile_error.png</a>  I am getting this issue.</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/3RGaDahm8YH_qQksGAfOqlMR/Profile_error.png\" title=\"Profile_error.png\"><img src=\"/user_uploads/10155/3RGaDahm8YH_qQksGAfOqlMR/Profile_error.png\"></a></div>",
        "id": 259960457,
        "sender_full_name": "sayan samanta",
        "timestamp": 1635837703
    },
    {
        "content": "<p>Can anybody please provide me the updated JSON for PDEX MedicationDispense and ValueSet to apply in FHIR server.</p>",
        "id": 259960740,
        "sender_full_name": "sayan samanta",
        "timestamp": 1635837946
    },
    {
        "content": "<p>you can get them here: <a href=\"http://hl7.org/fhir/us/davinci-pdex/\">http://hl7.org/fhir/us/davinci-pdex/</a></p>",
        "id": 259992586,
        "sender_full_name": "David Pyke",
        "timestamp": 1635858554
    }
]