[
    {
        "content": "<p>Question about the Canonical datatype: Is it valid to put a relative URL in an element of type canonical?</p>\n<p>There are a few places in the spec where it just makes sense to have local references between resources in a place that uses a canonical, e.g. <code>PlanDefinition.definitionCanonical</code>. The relevant bit of the spec on resolving canonical references states that the server should <code> then fall back to direct resolution using the URL as a literal reference if a local version of the canonical resource cannot be found</code> which implies to me that any literal reference is ok, including a relative one.</p>",
        "id": 257761656,
        "sender_full_name": "James Agnew",
        "timestamp": 1634330304
    },
    {
        "content": "<p>No.  Canonicals must be absolute.</p>",
        "id": 257762001,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1634330453
    },
    {
        "content": "<p>(Though they don't need to resolve)</p>",
        "id": 257762035,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1634330476
    },
    {
        "content": "<p>Having an unresolvable absolute URL seems infinitely less useful to me than a resolvable local reference. Is this a good rule?</p>",
        "id": 257762284,
        "sender_full_name": "James Agnew",
        "timestamp": 1634330601
    },
    {
        "content": "<p>Yes - because canonicals need to match the \"url\" element on the thing you're referencing - and there's no \"local\" context for that.</p>",
        "id": 257762562,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1634330728
    },
    {
        "content": "<blockquote>\n<p>No. Canonicals must be absolute</p>\n</blockquote>\n<p>no</p>",
        "id": 257762905,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1634330905
    },
    {
        "content": "<p>They can be #123</p>",
        "id": 257762933,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1634330921
    },
    {
        "content": "<p>(to a contained resource)</p>",
        "id": 257762951,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1634330934
    },
    {
        "content": "<p>yes. <a href=\"https://hl7.org/fhir/references.html#canonical-fragments\">https://hl7.org/fhir/references.html#canonical-fragments</a></p>",
        "id": 257763013,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1634330967
    },
    {
        "content": "<p>But you can't have a canonical that says \"Questionnaire/123\", right?</p>",
        "id": 257763123,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1634331022
    },
    {
        "content": "<p>right</p>",
        "id": 257763141,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1634331038
    },
    {
        "content": "<p>hmm ok</p>",
        "id": 257763788,
        "sender_full_name": "James Agnew",
        "timestamp": 1634331377
    }
]