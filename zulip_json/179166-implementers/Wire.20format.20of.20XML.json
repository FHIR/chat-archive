[
    {
        "content": "<p>I know that FHIR XML must be UTF-8 encoded and that the charset parameter of the MIME-type in the Content-Type header must explicitly be UTF-8.  Does this mean that characters over 127 will be double-encoded on the wire, once when building the XML and again when building the HTTP?</p>",
        "id": 153833508,
        "sender_full_name": "Elliott Lavy",
        "timestamp": 1466176347
    },
    {
        "content": "<p>Unless I'm misunderstanding, no there shouldn't be any double encoding.</p>\n<p>I.e. if you have a FHIR Patient with a name containing a value of &lt;given value=\"Ä\"/&gt;, the Ä gets encoded using its UTF-8 encoding just as any other character would.</p>",
        "id": 153833514,
        "sender_full_name": "James Agnew",
        "timestamp": 1466178569
    },
    {
        "content": "<p>Thanks, <span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> .  But what you posted is not  valid XML with encoding=\"UTF-8\".  If the value of \"given\" is \"Ä\" (0xC4), then the value in the XML would be C3 84.  But then with charset=\"UTF-8\" in the HTTP header, it seems that would get encoded again, as C3 83 C2 84.</p>",
        "id": 153833516,
        "sender_full_name": "Elliott Lavy",
        "timestamp": 1466180303
    },
    {
        "content": "<p>hmm, is that behaviour documented as a requirement anywhere? i had always just assumed that the XML declaration just needs to match the HTTP one and that there is no double-encoding implied.... and now I'm questioning that, since I don't know why I think that :)</p>",
        "id": 153833524,
        "sender_full_name": "James Agnew",
        "timestamp": 1466187874
    },
    {
        "content": "<p>the http spec tells you what the body is. the body is text encoded in UTF-8. There's no need for double encoding</p>",
        "id": 153833532,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1466196708
    },
    {
        "content": "<p>UTF-8 is not text</p>",
        "id": 153833533,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1466196717
    },
    {
        "content": "<p>So the idea is that the XML on the wire is identical to the XML being sent/received, that \"charset\" merely describes what characters are used to construct the payload without indicating/requiring any action on the part of the sender/receiver?</p>",
        "id": 153833643,
        "sender_full_name": "Elliott Lavy",
        "timestamp": 1466219377
    },
    {
        "content": "<p>yes</p>",
        "id": 153833644,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1466221156
    },
    {
        "content": "<p>Thanks for the clarification, <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> </p>",
        "id": 153833656,
        "sender_full_name": "Elliott Lavy",
        "timestamp": 1466227479
    },
    {
        "content": "<p>Could you please explain what is the  wire format?  Because  it is hard to find a formal definition of the term, eps. for newbies.  Thx.</p>",
        "id": 153860084,
        "sender_full_name": "Lin Zhang",
        "timestamp": 1480764791
    },
    {
        "content": "<p>Could you please explain what is the  wire format?  Because  it is hard to find a formal definition of the term, eps. for newbies.  Thanks.</p>",
        "id": 153860086,
        "sender_full_name": "Lin Zhang",
        "timestamp": 1480764791
    },
    {
        "content": "<p>\"Wire format\" is not a formal (FHIR) term but rather means \"how the data goes over the wire\", i.e. the byte stream when communicating over the network, for FHIR especially in the context of http(s).</p>",
        "id": 153860089,
        "sender_full_name": "Stefan Lang",
        "timestamp": 1480767053
    },
    {
        "content": "<p>general HL7 term, but not that widely in use. Suggestions for something else?</p>",
        "id": 153860118,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1480795759
    },
    {
        "content": "<p>Sorry for duplicate posts due to the status remained \"Sending\".</p>",
        "id": 153860131,
        "sender_full_name": "Lin Zhang",
        "timestamp": 1480807622
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> Isn't \"serialization\" the correct technical term for the looser \"wire format\"? (Or maybe \"serialized object\", but that's so verbose...)</p>",
        "id": 153861177,
        "sender_full_name": "Marc de Graauw",
        "timestamp": 1481017573
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192440\">@Marc de Graauw</span> : Yes, but serialization is used as both a verb (process) and noun (result) which makes it confusing. For example, a change to the serialization (process) may or may not result in a change in the serialization (wire format) of a particular instance.</p>",
        "id": 153861180,
        "sender_full_name": "Paul Knapp",
        "timestamp": 1481018770
    },
    {
        "content": "<p>True. So we could use \"serialization process\" and \"serialized object\" when the distinction matters, and the looser \"Serialization\" when it does not. It's still better than \"wire format\", see <a href=\"https://www.google.nl/webhp?sourceid=chrome-instant&amp;ion=1&amp;espv=2&amp;ie=UTF-8#q=wire%20format\" target=\"_blank\" title=\"https://www.google.nl/webhp?sourceid=chrome-instant&amp;ion=1&amp;espv=2&amp;ie=UTF-8#q=wire%20format\">Google</a></p>",
        "id": 153861182,
        "sender_full_name": "Marc de Graauw",
        "timestamp": 1481019067
    },
    {
        "content": "<p>We could go with \"serialization format\" instead of \"wire format\"</p>",
        "id": 153861205,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1481034114
    },
    {
        "content": "<p>Yes, or \"serialized format\". Something like this, I think, would be less jargony than \"wire format\"</p>",
        "id": 153861206,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1481034309
    },
    {
        "content": "<p>More clear.  Thanks.</p>",
        "id": 153861246,
        "sender_full_name": "Lin Zhang",
        "timestamp": 1481040236
    },
    {
        "content": "<p>I like the conclusion... but recognize that serialization is a nested concept, repeated as necessary in different favors... where as wire format is the final format as it is passed to the networking stack. (yes, wire is confusing especially today where wireless is dominant).</p>",
        "id": 153861253,
        "sender_full_name": "John Moehrke",
        "timestamp": 1481042312
    },
    {
        "content": "<p>I'd be happy to see a task to replace 'wire format' with 'serialization format'</p>",
        "id": 153861267,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1481052325
    },
    {
        "content": "<p>Added item <a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12435\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12435\">GF12435</a></p>",
        "id": 153861302,
        "sender_full_name": "Marc de Graauw",
        "timestamp": 1481056910
    },
    {
        "content": "<p>thx</p>",
        "id": 153861304,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1481056986
    },
    {
        "content": "<p>why not use more common concept -- \"bit format\" , text format -&gt;encode-&gt; bit format -&gt;decode -&gt; text format</p>",
        "id": 153861397,
        "sender_full_name": "亚南 李",
        "timestamp": 1481075006
    },
    {
        "content": "<p>doesn't seen more common to google</p>",
        "id": 153861398,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1481075194
    },
    {
        "content": "<p>Great!</p>",
        "id": 153861404,
        "sender_full_name": "Lin Zhang",
        "timestamp": 1481076118
    },
    {
        "content": "<p>it will depend what you want to express, if you want to express what is actually  passed through \"wire\" you can use \"Ethernet frame\",  if you want to express what is the physical representation of the information, you should use \"bit\". text(json,xml) -&gt;utf8 encoding -&gt; bit -&gt; utf8 decoding -&gt; text(json,xml)</p>",
        "id": 153861405,
        "sender_full_name": "亚南 李",
        "timestamp": 1481076176
    },
    {
        "content": "<p>I don't think FHIR should occupy itself with anything below XML or JSON or RDF. So here \"serialziation format\" would mean just those three. If there is a need somewhere to discuss bytes, bits, UTF-8, electrical currents, one could use the appropriate terms there. No need to define those in FHIR.</p>",
        "id": 153861452,
        "sender_full_name": "Marc de Graauw",
        "timestamp": 1481097906
    },
    {
        "content": "<p>The 'wire format' or 'byte stream' is the physical representation of what is exchanged, it is the logical character stream of xml, json,rdf etc encoded in 8859-1, UCS, UTF-8, UTF-16 etc.. Given that FHIR is both an object representation and an exchange it must as some points discuss the physical representation. Serialized format is a good replacement for wire format.</p>",
        "id": 153862251,
        "sender_full_name": "Paul Knapp",
        "timestamp": 1481195473
    }
]