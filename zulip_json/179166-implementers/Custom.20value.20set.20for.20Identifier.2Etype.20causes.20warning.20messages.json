[
    {
        "content": "<p>I have a Patient profile with custom value set for Identifier.type binding that includes the value of JHN however when running the validator I still see the following warning message: </p>\n<div class=\"codehilite\"><pre><span></span>None of the codes provided are in the value set http://hl7.org/fhir/ValueSet/identifier-type (http://hl7.org/fhir/ValueSet/identifier-type, and a code should come from this value set unless it has no suitable code) (codes = http://hl7.org/fhir/v2/0203#JHN)\n</pre></div>\n\n\n<p>Here's the excerpt from my profile:</p>\n<div class=\"codehilite\"><pre><span></span>        &lt;element id=&quot;Patient.identifier&quot;&gt;\n            &lt;path value=&quot;Patient.identifier&quot;/&gt;\n            &lt;slicing&gt;\n                &lt;discriminator&gt;\n                    &lt;type value=&quot;value&quot;/&gt;\n                    &lt;path value=&quot;type.coding.system&quot;/&gt;\n                &lt;/discriminator&gt;\n                &lt;discriminator&gt;\n                    &lt;type value=&quot;value&quot;/&gt;\n                    &lt;path value=&quot;type.coding.code&quot;/&gt;\n                &lt;/discriminator&gt;\n                &lt;rules value=&quot;closed&quot;/&gt;\n            &lt;/slicing&gt;\n            &lt;min value=&quot;1&quot;/&gt;\n            &lt;max value=&quot;2&quot;/&gt;\n            &lt;mustSupport value=&quot;true&quot;/&gt;\n        &lt;/element&gt;\n        &lt;element id=&quot;Patient.identifier:hcnIdentifier&quot;&gt;\n            &lt;path value=&quot;Patient.identifier&quot;/&gt;\n            &lt;sliceName value=&quot;hcnIdentifier&quot;/&gt;\n            &lt;short value=&quot;A health card number for this patient&quot;/&gt;\n            &lt;definition value=&quot;A health card number for this patient.&quot;/&gt;\n            &lt;min value=&quot;1&quot;/&gt;\n            &lt;max value=&quot;1&quot;/&gt;\n            &lt;mustSupport value=&quot;true&quot;/&gt;\n            &lt;binding&gt;\n                &lt;strength value=&quot;required&quot;/&gt;\n                &lt;valueSetReference&gt;\n                    &lt;reference value=&quot;http://cihi.ca/fhir/irrs/ValueSet/irrs-identifier-type&quot;/&gt;\n                &lt;/valueSetReference&gt;\n            &lt;/binding&gt;\n        &lt;/element&gt;\n</pre></div>\n\n\n<p>Does anyone know how to get rid of that warning message?</p>",
        "id": 153922869,
        "sender_full_name": "Ross Shnaper",
        "timestamp": 1512443103
    },
    {
        "content": "<p>At present, the validator validates against the base resource as well as any declared profiles.  The warning is triggered when we validate against the base resource.  You could make a change request for us to add enough smarts to the validator that the warning would be suppressed (it would still show up when validating the profile).  However, it won't be an easy change to make and I have no clue when (or if) it'll get made.</p>",
        "id": 153922875,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1512443621
    },
    {
        "content": "<p>Does this warning pop up even when you have created an extended valueset?</p>",
        "id": 153922877,
        "sender_full_name": "Eric Haas",
        "timestamp": 1512443941
    },
    {
        "content": "<p>Yes</p>",
        "id": 153922879,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1512444297
    },
    {
        "content": "<p>Because it validates against the resource value set when it validates against the resource</p>",
        "id": 153922880,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1512444317
    },
    {
        "content": "<p>What about if  you validate against the profile when in meta.profile?</p>",
        "id": 153922885,
        "sender_full_name": "Eric Haas",
        "timestamp": 1512445422
    },
    {
        "content": "<p>We <em>always</em> validate against the underlying resource whether a profile is specified or not</p>",
        "id": 153922888,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1512447444
    },
    {
        "content": "<p>Just to be clear, validator will always generate an error on an extensible binding, even if a profile declares and specifies the expanded valueset? Would there be any way to drop the severity to informational, rather than warning?</p>",
        "id": 215758611,
        "sender_full_name": "Ken Sinn",
        "timestamp": 1604602848
    },
    {
        "content": "<p>It shouldn't give you an error, just  a warning</p>",
        "id": 215760913,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1604603956
    },
    {
        "content": "<p>Agreed, it's \"just a warning\", but we're aggressively error-checking and warning-checking values. If the profile binding is properly defined, it feels like this should be informational rather than a warning.</p>",
        "id": 215761759,
        "sender_full_name": "Ken Sinn",
        "timestamp": 1604604354
    },
    {
        "content": "<p>Warning says \"this is a potential error and requires human review to determine whether it's an error or not\" - which is exactly the case here.</p>",
        "id": 215762457,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1604604665
    },
    {
        "content": "<p>A human needs to look at the code and figure out whether the associated concept could possibly have been expressed (possibly at a different level of precision) using one of the codes in the bound value set.</p>",
        "id": 215762529,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1604604705
    },
    {
        "content": "<p>That makes sense from the perspective of a testing tool, but that makes the validator code impractical for run-time validation, as you're either stuck with a lot of warnings in your logs for otherwise properly-defined profiles and valuesets without the ability to suppress them.</p>",
        "id": 215773326,
        "sender_full_name": "Ken Sinn",
        "timestamp": 1604610037
    },
    {
        "content": "<p>I Agree and question why the validator can not validate against the defined value set in the profile. Why is that such an odd request?</p>",
        "id": 215773571,
        "sender_full_name": "Robert McClure",
        "timestamp": 1604610128
    },
    {
        "content": "<p>If i remember the logic it <em>does</em> validate against the binding in the profile, it just also validates against the base binding which is why it ends up throwing the warnings..</p>",
        "id": 215781173,
        "sender_full_name": "ryan moehrke",
        "timestamp": 1604614353
    },
    {
        "content": "<p>The issue is if you're using a code that's not from the value set, it's going to raise a warning - because it might be invalid.   If you want to ignore those in production you can, but they're legitimate warnings and it's entirely possible that some of the codes you're receiving are erroneous - because they could have been expressed within the value set.</p>",
        "id": 215783935,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1604616265
    },
    {
        "content": "<p>All warnings are things that require humans to check.  It's up to the implementer to decide if they care enough about them to have humans actually check them.</p>",
        "id": 215784003,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1604616310
    },
    {
        "content": "<p>Are there any ways to classify types of Warning messages, e.g. value outside of Extensible valueset, or profile not found, so that they can be easily identified/categorized? And possibly be suppressed via command-line arguments?</p>",
        "id": 216256175,
        "sender_full_name": "Ken Sinn",
        "timestamp": 1605034209
    },
    {
        "content": "<p>So far, I don't think we've assigned 'codes' to the different issue types, but I suppose it might be possible for us to do that.  You could then filter by looking at the results as an OperationOutcome.  You could submit a change request for that capability to be added to the validator.  I wouldn't count on it happening soon though as it's a pretty big undertaking...</p>",
        "id": 216261743,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1605036512
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192143\">@Ken Sinn</span> several things to say about this:</p>\n<ul>\n<li>it seems you are using an old version of the validator, because the current validator doesn't make that warning at all if there's a profile for it to validate against </li>\n<li>if you are using in the context of HAPI, you can change the level of a message. </li>\n<li>if you are running from the command line, then you can't, but I don't think you should need to if you have the current version</li>\n</ul>",
        "id": 216450126,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1605176610
    },
    {
        "content": "<p>I'll double check over the next few days using a stripped-down example profile + valueset, but I was using a validator build from last week. I'll confirm then ping.</p>",
        "id": 216454835,
        "sender_full_name": "Ken Sinn",
        "timestamp": 1605179626
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179166-implementers/topic/Custom.20value.20set.20for.20Identifier.2Etype.20causes.20warning.20messages/near/216450126\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"192143\">Ken Sinn</span> several things to say about this:</p>\n<ul>\n<li>it seems you are using an old version of the validator, because the current validator doesn't make that warning at all if there's a profile for it to validate against </li>\n<li>if you are using in the context of HAPI, you can change the level of a message. </li>\n<li>if you are running from the command line, then you can't, but I don't think you should need to if you have the current version</li>\n</ul>\n</blockquote>\n<p>Grahame, should we use \"-profile\" to explicitly specify the profile, or validator will use \"-ig\" to find the profile? In our mressages, we have meta.profile.</p>",
        "id": 217411051,
        "sender_full_name": "frank cao",
        "timestamp": 1605884372
    },
    {
        "content": "<p>-ig tells the validator what to load. <br>\n-profile tells it to test against a profile. </p>\n<p>It will automatically validate on meta.profile if it sees it there, if the profile(s) referred to have been loaded</p>",
        "id": 217593828,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1606114206
    },
    {
        "content": "<p>Much appreciated!</p>",
        "id": 217636087,
        "sender_full_name": "frank cao",
        "timestamp": 1606142902
    }
]