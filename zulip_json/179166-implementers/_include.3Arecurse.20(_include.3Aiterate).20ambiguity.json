[
    {
        "content": "<p>In the following search query,  is the parameter _include:recurse=Patient:general-practitioner refers to Patient resources resulted from the previous _include:recurse=MedicationRequest:patient or the first MedicationDispense:patient?</p>\n<p>[base]/MedicationDispense?_include=MedicationDispense:patient&amp;_include=MedicationDispense:prescription&amp;_include:recurse=MedicationRequest:patient&amp;_include:Recurse=Patient:general-practitioner</p>",
        "id": 205994407,
        "sender_full_name": "Limor Lahiani",
        "timestamp": 1596611718
    },
    {
        "content": "<p>First, 'recurse' should be lower-case.  Upper case might not work on all servers.</p>\n<p>'recurse' says \"do this on any patients in the result set\" - so it would be all patients identified - both the MedicationDispense and the MedicationRequests.</p>",
        "id": 206086630,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1596667185
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> , it was just a typo when writing the message. I use ':recurse' properly :)</p>\n<p>Thanks for the info, I've probably missed it in the spec..</p>\n<p>To follow up on this question then, does the order matter? I mean \"do this on any patients in the result set\" so far in the query, or overall? </p>\n<p>For example in these queries, should all results bee the same?</p>\n<p>MedicationDispense?_include=MedicationDispense:patient&amp;_include=MedicationDispense:prescription&amp;_include:recurse=MedicationRequest:patient&amp;<strong>_include:recurse=Patient:general-practitioner</strong></p>\n<p>MedicationDispense?_include=MedicationDispense:patient&amp;<strong>_include:recurse=Patient:general-practitioner</strong>&amp;_include=MedicationDispense:prescription&amp;_include:recurse=MedicationRequest:patient</p>\n<p>MedicationDispense?_include=MedicationDispense:patient&amp;<strong>_include:recurse=Patient:general-practitioner</strong>&amp;_include=MedicationDispense:prescription&amp;_include:recurse=MedicationRequest:patient&amp;<strong>_include:recurse=Patient:general-practitioner</strong></p>",
        "id": 206109351,
        "sender_full_name": "Limor Lahiani",
        "timestamp": 1596696204
    },
    {
        "content": "<p>The order in which parameters are listed does not matter</p>",
        "id": 206150387,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1596725010
    },
    {
        "content": "<p>? I'd expect the sequence to mater, for an initial _include (potentially :recurse) may have a n impact on a subsequent _include (:recurse). The sequence matters.</p>",
        "id": 206266948,
        "sender_full_name": "René Spronk",
        "timestamp": 1596812213
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191372\">@René Spronk</span>, <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>  - That was my thinking. That the sequence of _include and _include:recurse matters... turns out it doesn't., which is counter intuitive, especially in this example:<br>\nMedicationDispense?_include=MedicationDispense:prescription&amp;<strong>_include:recurse=MedicationRequest:patient</strong>&amp;_include:recurse=Patient:general-practitioner&amp;<strong>_include=MedicationDispense:patient</strong></p>",
        "id": 206381610,
        "sender_full_name": "Limor Lahiani",
        "timestamp": 1596954080
    },
    {
        "content": "<p>Order of parameters doesn't matter in HTTP calls in general - and some software isn't able to retain order.  If you think this needs additional clarification in the spec, please submit a pull request.</p>",
        "id": 206393824,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1596977500
    },
    {
        "content": "<p>Thanks. To follow up on this, according to <a href=\"https://www.hl7.org/fhir/references.html\">https://www.hl7.org/fhir/references.html</a>, there are transitively cyclic references.<br>\nSay we have  A --&gt; B --&gt; C --&gt; D --&gt; A. Wouldn't there be an ambiguity when using search queries with _include and _include:iterate  for those references? What is the expected behavior?</p>",
        "id": 213974829,
        "sender_full_name": "Limor Lahiani",
        "timestamp": 1603225469
    },
    {
        "content": "<p>The search spec leaves it to the server's discretion how deep to iterate. There's no guarantee of what the depth limit will be.</p>",
        "id": 213975272,
        "sender_full_name": "Paul Church",
        "timestamp": 1603225733
    }
]