[
    {
        "content": "<p>Hello, I am currently trying out Azure API for FHIR together with SMART on FHIR's JS client.</p>\n<p>I am struggling a bit with getting the right launch context back from the server after authenticating with my Microsoft Account. Does this require any special authentication setup? Do I need to play with the OpenID settings? </p>\n<p>Also, how will Azure map a user (e-mail address) to a patient (Patient/ID) in order to limit access to resources? Does the patient ID have to match the username/email or can the the Azure admin do the mapping manually when registering a new user?</p>\n<p>Your help is very appreciated.</p>",
        "id": 186388461,
        "sender_full_name": "Eduardo Ferreira",
        "timestamp": 1579786659
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"195775\">@Michael Hansen</span></p>",
        "id": 186429203,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1579809665
    },
    {
        "content": "<p>We have some limited support for the in EHR flow but we do not attempt to map token to specific FHIR resource, nor do we respect or enforce SMART scopes. If you want to play with the SMART on FHIR proxy, here are the docs: <a href=\"https://docs.microsoft.com/en-us/azure/healthcare-apis/use-smart-on-fhir-proxy\" target=\"_blank\" title=\"https://docs.microsoft.com/en-us/azure/healthcare-apis/use-smart-on-fhir-proxy\">https://docs.microsoft.com/en-us/azure/healthcare-apis/use-smart-on-fhir-proxy</a></p>\n<p>Support for SMART on FHIR in an independent FHIR server with a stand-alone identity provider is not easy in general, since the identity provider is not aware of the FHIR data.</p>",
        "id": 186455757,
        "sender_full_name": "Michael Hansen",
        "timestamp": 1579830223
    },
    {
        "content": "<blockquote>\n<p>We have some limited support for the in EHR flow but we do not attempt to map token to specific FHIR resource, nor do we respect or enforce SMART scopes. If you want to play with the SMART on FHIR proxy, here are the docs: <a href=\"https://docs.microsoft.com/en-us/azure/healthcare-apis/use-smart-on-fhir-proxy\" target=\"_blank\" title=\"https://docs.microsoft.com/en-us/azure/healthcare-apis/use-smart-on-fhir-proxy\">https://docs.microsoft.com/en-us/azure/healthcare-apis/use-smart-on-fhir-proxy</a></p>\n<p>Support for SMART on FHIR in an independent FHIR server with a stand-alone identity provider is not easy in general, since the identity provider is not aware of the FHIR data.</p>\n</blockquote>\n<p>Thanks Michael, I have the proxy setup according to the tutorials and below is the token response I get, which does not contain the \"patient\" key of course. When passing the \"launch: '...'\" key as a FHIR.oauth2.authorize argument then I get the \"patient\" key back and all works perfectly fine.</p>\n<p>If token/resource mapping is not encouraged, would the only way to identify a patient be passing the \"launch\" argument as shown in the example documented?</p>\n<p><a href=\"/user_uploads/10155/s68lU0L4UVgzZuBAEhf3J0fi/Screenshot-2020-01-24-at-12.47.35.png\" target=\"_blank\" title=\"Screenshot-2020-01-24-at-12.47.35.png\">Screenshot-2020-01-24-at-12.47.35.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/s68lU0L4UVgzZuBAEhf3J0fi/Screenshot-2020-01-24-at-12.47.35.png\" target=\"_blank\" title=\"Screenshot-2020-01-24-at-12.47.35.png\"><img src=\"/user_uploads/10155/s68lU0L4UVgzZuBAEhf3J0fi/Screenshot-2020-01-24-at-12.47.35.png\"></a></div>",
        "id": 186485246,
        "sender_full_name": "Eduardo Ferreira",
        "timestamp": 1579867601
    },
    {
        "content": "<p>Hi, <br>\nI don't know if this is related, but we're trying to implement SMART on FHIR on top of Active Directory Federation Service, and we haven't found how to implement the context parameters (eg patient). We send them in the launch parameter, but we don't know how to make AD FS interpret it and send the context back in the response.</p>",
        "id": 187106589,
        "sender_full_name": "Christophe Mattler",
        "timestamp": 1580493376
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span></p>",
        "id": 187130285,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1580510095
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"195775\">@Michael Hansen</span></p>",
        "id": 187130837,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1580510447
    },
    {
        "content": "<p>We have a (rudimentary) Azure AD  proxy for SMART:<br>\n<a href=\"https://docs.microsoft.com/en-us/azure/healthcare-apis/use-smart-on-fhir-proxy\" target=\"_blank\" title=\"https://docs.microsoft.com/en-us/azure/healthcare-apis/use-smart-on-fhir-proxy\">https://docs.microsoft.com/en-us/azure/healthcare-apis/use-smart-on-fhir-proxy</a><br>\nIt only supports in-ehr flow and coverage is limited.</p>",
        "id": 187131252,
        "sender_full_name": "Michael Hansen",
        "timestamp": 1580510765
    }
]