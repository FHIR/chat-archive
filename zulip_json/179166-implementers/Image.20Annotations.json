[
    {
        "content": "<p><a href=\"https://stackoverflow.com/questions/50727179/fhir-imagingstudy-annotation\" target=\"_blank\" title=\"https://stackoverflow.com/questions/50727179/fhir-imagingstudy-annotation\">https://stackoverflow.com/questions/50727179/fhir-imagingstudy-annotation</a> - <span class=\"user-mention\" data-user-id=\"191960\">@Brad Genereaux</span> <span class=\"user-mention\" data-user-id=\"191380\">@Elliot Silver</span></p>",
        "id": 153967595,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1528321866
    },
    {
        "content": "<p>The answer currently there is mine. Lloyd alerted me. Is there anything you want me to add?</p>",
        "id": 153967596,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1528321938
    },
    {
        "content": "<p>lol I hadn't read that far - sorry</p>",
        "id": 153967597,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1528321952
    },
    {
        "content": "<p>Np.</p>",
        "id": 153967598,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1528321964
    },
    {
        "content": "<p>Don't know whether this is something that would arise with media</p>",
        "id": 153967600,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1528322027
    },
    {
        "content": "<p>We had a short discussion at the WGM about linking Media and ImagingStudy via Provenance, and will come back to it on an upcoming call. It’s not the same use case but there’s probably some overlap. More details would help.</p>",
        "id": 153967601,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1528322224
    },
    {
        "content": "<p>Hello, ACR is interested in linking physical annotations to observations, thus providing a concrete link to the markup made on an image and the observation itself.  For example a bi-ruler on a liver noted as a lesion with the observed characteristics, could be linked with the derived from and imaging study in observation, but to list the actual annotation itself, such as in DICOM TID1500 AIM does not seem currently possible.  This is important when lesions with different characteristics are close to each other, as well as to properly annotate and report results from machines.  We are looking to post a sample for review and wondering if there is anyone else who has looked at this in the past?</p>",
        "id": 183290834,
        "sender_full_name": "Brian Bialecki",
        "timestamp": 1576177685
    },
    {
        "content": "<p>A sample of what we have been looking to post in the SIIM FHIR server is here:<br>\n<a href=\"https://github.com/ACRCode/dsi-standards-examples/blob/master/CDE%20%2B%20AIM/FHIRpneumothorax.json\" target=\"_blank\" title=\"https://github.com/ACRCode/dsi-standards-examples/blob/master/CDE%20%2B%20AIM/FHIRpneumothorax.json\">https://github.com/ACRCode/dsi-standards-examples/blob/master/CDE%20%2B%20AIM/FHIRpneumothorax.json</a></p>",
        "id": 183291369,
        "sender_full_name": "Brian Bialecki",
        "timestamp": 1576178039
    },
    {
        "content": "<p>Current Imaging Integration leadership <span class=\"user-mention\" data-user-id=\"197037\">@Jonathan Whitby</span> and Chris Lindop should be able to provide the latest details, but I would use an extension. There are plans to bring back a method to reference specific instances and frames, but I don't think that's granular enough for what you want. You're talking about an observation being \"derived from\" a specific finding in a DICOM SR. If you are using v4, I would define an extension to that lets you identify the specific SR series/instance, and finding within the instance. This extension could be applied to any ImagingStudy reference (hence, why you don't need to include the SR's study in the extension).</p>",
        "id": 183292408,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1576178680
    },
    {
        "content": "<p>that example is very non-conformant, which makes it hard to figure out which bit you are asking about</p>",
        "id": 183292587,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1576178797
    },
    {
        "content": "<p>how much sophistication do you want for identifying a region? rectangular? or full polygon?</p>",
        "id": 183292747,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1576178885
    },
    {
        "content": "<p>Thank you Elliot, not just the DICOM SR, or GSPS which I have seen in a previous string, but if 2 lines were drawn on the same image instance, a way to discern, which line was drawn for two potentially different observations, for example 2 lesions on a mammogram, where 1 was recommended for biospy as a BI-RADS 4B and one was to be followed as BI-RADS 3</p>",
        "id": 183292752,
        "sender_full_name": "Brian Bialecki",
        "timestamp": 1576178892
    },
    {
        "content": "<p>I'm not thrilled with the approach you've taken creating an ImagingStudy with only the endpoint and the single instance information, but I realize we (the working group) didn't give you much choice--I think this is was an error on our part. Please submit a Jira ticket so that the work group is sure to consider your use case. I would prefer to see an ImagingStudy resource with information about all instances, and then an extension on the reference to that resource, calling out the specific content you're interested in.</p>",
        "id": 183292797,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1576178931
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> , Brian is trying to tie a finding or annotation in a DICOM instance to an Observation created from that finding. The question is how, from FHIR, to reference something within a DICOM instance.</p>",
        "id": 183292999,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1576179063
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> I want to say that a line 5.7mm was drawn on the image because I am calling that a lesion, and then reference the 5.7mm annotation line</p>",
        "id": 183293015,
        "sender_full_name": "Brian Bialecki",
        "timestamp": 1576179071
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191380\">@Elliot Silver</span>  Sorry to ask, but I am new here and where can I input the JIRA ticket</p>",
        "id": 183293091,
        "sender_full_name": "Brian Bialecki",
        "timestamp": 1576179122
    },
    {
        "content": "<p>what's 'a line 5.7mm'? that doesn' t sound very identifying to me</p>",
        "id": 183293133,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1576179151
    },
    {
        "content": "<p>I can't recall if individual annotations within a GSPS get UIDs, but if so, you could use that. If you are talking about burned-in markings, yeech, well, I suppose some sort of coordinates would be the best you could do.</p>",
        "id": 183293251,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1576179235
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"253949\">@Brian Bialecki</span> <a href=\"https://jira.hl7.org\" target=\"_blank\" title=\"https://jira.hl7.org\">https://jira.hl7.org</a></p>",
        "id": 183293348,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1576179285
    },
    {
        "content": "<p>Thank you <span class=\"user-mention\" data-user-id=\"191380\">@Elliot Silver</span>  for the Jira link.  <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  the 5.7 mm line is an example.  Lets say I wanted to tell you in my example I found a Pneumothorax, and the one of the items I should be observing was pleural separation, so I measured that on an image and reported it as an observation.  I want to be able to tell you the exact image I derived that observation from and exactly the end points of the line I drew to determine it.The thought is that this provides a clear link when annotating a dataset and allows for the observer to be external and the radiologist to agree or disagree with the use of provanence and versioning</p>",
        "id": 183293883,
        "sender_full_name": "Brian Bialecki",
        "timestamp": 1576179674
    },
    {
        "content": "<p>You might be able to identify the line in a GSPS using its Tracking UID or Graphic Instance ID. I'd need to delve deeper.</p>",
        "id": 183294011,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1576179747
    },
    {
        "content": "<p>what's a GSPS?</p>",
        "id": 183294258,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1576179940
    },
    {
        "content": "<p>Also, take a look at Provenance. This is the general mechanism for \"where did this info come from\". The \"derived-from\" attribute in Observation has a narrower scope. Provenance won't have a way to reach into a DICOM instance--you'll still need that extension--but it will allow you to record more details about the derivation (when, where, etc.)</p>",
        "id": 183294273,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1576179951
    },
    {
        "content": "<p>I know that in both my own implementation of this, and in CDA, we defined a region of interest on the image, and then we referenced that from the narrative. The region of interest had an id, and also identified an area of the image by rectangle. I'm not sure what 'a line' is</p>",
        "id": 183294389,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1576180019
    },
    {
        "content": "<p>GSPS: Grey Scale Presentation State. A DICOM instance that has direction on how to display other instances (images) including annotations (text and graphics), brightness/contrast, zoom, etc.</p>",
        "id": 183294400,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1576180024
    },
    {
        "content": "<p>so the core question is, this time, how do you refer to an object inside a  DICOM instance as the source for an observation?</p>",
        "id": 183294457,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1576180076
    },
    {
        "content": "<p>Yes, This is true, but if I draw two arks on the same image or in the same study, they would be contained in the same GSPS and I could not link the individual mark to a specific observation</p>",
        "id": 183294548,
        "sender_full_name": "Brian Bialecki",
        "timestamp": 1576180121
    },
    {
        "content": "<p>The core is, just as AIM in DICOM was added to provide context to the mark itself, how in FHIR do I link an observation to the mark/annotation on a specific image, or ROI within a study, not just point to a GSPS, but the specific area</p>",
        "id": 183294740,
        "sender_full_name": "Brian Bialecki",
        "timestamp": 1576180240
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> -- yes. <span class=\"user-mention\" data-user-id=\"253949\">@Brian Bialecki</span> How would we do it if this was all DICOM? I think the identifiers I mention above are what's used. Whatever identifiers we use in DICOM (or AIM -- the Annotation and Image Markup standard) to identify the markings, we should be able to record those in FHIR. And, for now, solving the issue on the FHIR-side would mean creating an appropriate extension.</p>",
        "id": 183294971,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1576180384
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191960\">@Brad Genereaux</span> <span class=\"user-mention\" data-user-id=\"202389\">@Kevin O'Donnell</span> <span class=\"user-mention\" data-user-id=\"194137\">@Teri Sippel Schmidt</span> Thoughts?</p>",
        "id": 183295116,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1576180461
    },
    {
        "content": "<p>AIM is the way in DICOM and I took this information from TID1500 and discussions with Daniel Rubin.  The example, and yes, I unfortunately know it is not the best, but I was hoping to show what I was attempting to accomplish as an example to begin a discussion</p>",
        "id": 183295233,
        "sender_full_name": "Brian Bialecki",
        "timestamp": 1576180547
    },
    {
        "content": "<blockquote>\n<p>if I draw two arks on the same image or in the same study, they would be contained in the same GSPS and I could not link the individual mark to a specific observation</p>\n</blockquote>\n<p>Do they get identifiers within the GSPS?</p>",
        "id": 183295701,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1576180769
    },
    {
        "content": "<p>Is GSPS or AIM common enough now to exclude other methods (e.g., burn-ins, overlays (60xx,3000), Graphic Annotation Module, etc.)?</p>",
        "id": 183295710,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1576180773
    },
    {
        "content": "<p>AIM has recently been added to DICOM TID 1500 and this was a buzz at this year's RSNA.  This does address the example of maultiple marks in the same GSPS.  I think that currently Key Images and GSPS can be handled if they are 1-1, but this is not the case, and I am looking to get a more concrete way to link annotations and observations, which would hopefully encompass all these methods.</p>",
        "id": 183297756,
        "sender_full_name": "Brian Bialecki",
        "timestamp": 1576181996
    },
    {
        "content": "<p>That's what I get for not going this year.  That said, a 4-day Thanksgiving holiday was incredible.</p>\n<p>Catching up, TID 1500 appears to map AIM into DICOM SR (which is yet another format from what we've been discussing).  2019e-3.21 specifies the mapping is only for one direction, so presumably the idea is that PACS systems can ingest AIM documents and convert them into DICOM for use.</p>\n<p>But I feel like we've lost sight of the question (which Grahame nailed earlier)..</p>\n<p>Generically, how do you link something inside a DICOM instance to an Observation?  In particular, <code>Observation.derivedFrom</code> can goes to <code>ImagingStudy</code>, not a specific instance and not a specific tag/UID within an instance.  Is that the question (leaving aside that AIM is one of many annotation formats in use today)?</p>\n<p>Or is this a more specific request about handling image annotations (and findings per the original message in the thread) in particular?</p>",
        "id": 183301284,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1576184243
    },
    {
        "content": "<p>I am looking to link something like a ruler measurement, which is a line defined by two endpoints in DICOM on a specific image instance to the observation it was made in reference to.  So If I see a non-spiculated mass in the right breast on the CC view that is 5.8mm in diameter.  I want to link the to the line itself.</p>",
        "id": 183302734,
        "sender_full_name": "Brian Bialecki",
        "timestamp": 1576185044
    },
    {
        "content": "<p>well, <span class=\"user-mention\" data-user-id=\"191380\">@Elliot Silver</span> is right that it's going to be an extension. its not obvious, though, how you actually refer to the content, if the annotations aren't identified internally?</p>",
        "id": 183302981,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1576185197
    },
    {
        "content": "<p>From what I am reading, they have internal IDs</p>",
        "id": 183303503,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1576185553
    },
    {
        "content": "<p>and they object has an OID? so urn:oid:[oid]#id ?</p>",
        "id": 183303525,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1576185585
    },
    {
        "content": "<p>If the annotations within the instance don't have individual identifiers (I think they do, but am not sure), then you can come up with a way of identifying them yourself, for example, by their position in the graphical element sequence. It's not pretty, but since DICOM requires a new instance UID if you modify the clinical information in the instance, like reordering the elements in a sequence, you should be safe.</p>",
        "id": 183303531,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1576185593
    },
    {
        "content": "<p>Vassil, yeah, that's my reading too. I just want to confirm my understanding.<br>\nGraham, no need for the #id, I think it would just be an identifying OID for the marking. Actually, you'd probably want to use the DICOM UID identifier scheme, rather than a plain OID, and have a type that said whether it was text or graphics or a region of interest or... (I believe each are listed within a separate part of the annotation instance, so knowing where to look would be helpful.)<br>\nGino, I suspect that while GSPS isn't universal and is somewhat young still (15 years?), it is a reasonable restriction to put on a solution looking to use FHIR. I also suspect that the use case is AI related. Nothing wrong with pulling vendors kicking and screaming into the 21st century, now that we're 20 years in.</p>",
        "id": 183304165,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1576186057
    },
    {
        "content": "<blockquote>\n<p>I think it would just be an identifying OID for the marking</p>\n</blockquote>\n<p>but you have to know which object to look inside of? or is it reasonable to expect inner UIDs to be indexed?</p>",
        "id": 183304557,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1576186318
    },
    {
        "content": "<p>Yes, you'd have to communicate the DICOM SOP instance (i.e, the GSPS \"file\") UID that the marking was in. I had assumed there would be a separate element in the extension to communicate that. No, I don't think you can look up the marking UID anywhere either external to the file, or internal to it.</p>",
        "id": 183306871,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1576187724
    },
    {
        "content": "<p>Bigger-picture FHIR modeling question here: we know how to <em>write</em> a reference to an element within a resource, like <code>Questionnaire/123/#some-id</code>. But we don't actually have a way to profile the use of this (like, defining a profile with a Reference to an element within a resource (or a particular type of backbone element within a particular type of resource). Like, to say in a profile \"This slot should be a reference to an <code>Item</code> backbone element within a specific Questionnaire. Has this come up before?</p>",
        "id": 183307097,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1576187867
    },
    {
        "content": "<p>yes you can do that.</p>",
        "id": 183309129,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1576189326
    },
    {
        "content": "<p>How?</p>",
        "id": 183309843,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1576189904
    },
    {
        "content": "<p><a href=\"http://hl7.org/fhir/extension-elementdefinition-profile-element.html\" target=\"_blank\" title=\"http://hl7.org/fhir/extension-elementdefinition-profile-element.html\">http://hl7.org/fhir/extension-elementdefinition-profile-element.html</a></p>",
        "id": 183310113,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1576190108
    },
    {
        "content": "<p>Elliot, yes I think GSPS is reasonable - but GSPS isn't AIM.</p>\n<p>GSPS objects contain information about the state of the image view (e.g., window/level) and pixel data which can be used as overlays.  The pixel data is not separated into unique annotations within an instance.  They are essentially burn-ins that aren't burned in.</p>\n<p>Edit: Overlays can be graphics objects (e.g., a line, etc.), but both types are supported and I cannot speak to the prevalence of either method.  That said, they do not have UIDs that I can find (only a label in 0070,0080).</p>\n<p>Edit: GAM is in GSPS (had to look up since it was driving me crazy).  This is for things like annotating a displayed MPR - which aren't tied to a single instance.  I have no idea how that would get linked in (series level?)</p>",
        "id": 183310383,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1576190303
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> <span class=\"user-mention\" data-user-id=\"191380\">@Elliot Silver</span> I see there is a draft of ImagingReference that is posted as item 17183 in gforge, and I was wondering if I could take a look at this and try and fit it into the ACR use case</p>",
        "id": 183577091,
        "sender_full_name": "Brian Bialecki",
        "timestamp": 1576521504
    },
    {
        "content": "<p><a href=\"http://jira.hl7.org/browse/FHIR-17183\" target=\"_blank\" title=\"http://jira.hl7.org/browse/FHIR-17183\">GF#17183</a></p>",
        "id": 183583199,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1576525404
    },
    {
        "content": "<p>that doesn't seem to actually be going anywhere. you're welcome to assume that it's going to be part of R5 but it's pretty old... <span class=\"user-mention\" data-user-id=\"191380\">@Elliot Silver</span> what's the plan here?</p>",
        "id": 183583356,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1576525524
    },
    {
        "content": "<p>I was on a call with WG20 today and it pears this has some traction again</p>",
        "id": 183584104,
        "sender_full_name": "Brian Bialecki",
        "timestamp": 1576526012
    },
    {
        "content": "<p>It did stall out for a bit. When I last looked it was something they were planning to get into R5, but I'm not sure how quickly its getting there. Last I looked it needed a resource proposal. If <span class=\"user-mention\" data-user-id=\"253949\">@Brian Bialecki</span>  was on the call today, you've probably got the best info.</p>",
        "id": 183596302,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1576534056
    },
    {
        "content": "<p>Based on DICOM WG 20 ImagingReference, I created the ImagingReference resource which can be found here: <a href=\"https://github.com/ACRCode/dsi-standards-examples/tree/master/CDE%20%2B%20AIM\" target=\"_blank\" title=\"https://github.com/ACRCode/dsi-standards-examples/tree/master/CDE%20%2B%20AIM\">https://github.com/ACRCode/dsi-standards-examples/tree/master/CDE%20%2B%20AIM</a>  We are attempting to place this on the public SIIM FHIR server to get feedback on this along with examples that have been cretaed.  Although the server accepts it as a StructureDefinition and we can see it, when we try and upload resources using it we get the following error:  \"Unknown resource type 'ImagingReference' - Server knows how to handle: [Appo...\"  Is there somewhere this also needs to be referenced to be listed?</p>",
        "id": 186286526,
        "sender_full_name": "Brian Bialecki",
        "timestamp": 1579700151
    },
    {
        "content": "<p>I have been looking around, do you think I would need to add a Domain Resource definition to get ImagingReference to be available<br>\n<a href=\"http://hl7.org/fhir/domainresource.html\" target=\"_blank\" title=\"http://hl7.org/fhir/domainresource.html\">http://hl7.org/fhir/domainresource.html</a></p>",
        "id": 186296523,
        "sender_full_name": "Brian Bialecki",
        "timestamp": 1579706771
    },
    {
        "content": "<p>Imaging reference is not a FHIR resource so the server is right.</p>",
        "id": 186307572,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1579712779
    },
    {
        "content": "<p>If you want to get feedback : Do you want to publish the specification or the implementation? The specification would come first and this is for the imaging committee to approve and put in the build (you can run the build locally as you are working on it)</p>",
        "id": 186307681,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1579712876
    },
    {
        "content": "<p>Before that - what is an ImagingReference? What is the use you have for it?</p>",
        "id": 186307791,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1579712929
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span>  we realize that is is not a resource, but we are trying to add it so that we can solicit feedback to some work we are doing as we work on adding this as part of the next ballot period<br>\nImagingReference is used so that you can point to a specific image and markup(annotation) in reference to an observation</p>",
        "id": 186307982,
        "sender_full_name": "Brian Bialecki",
        "timestamp": 1579713044
    },
    {
        "content": "<p>We have defined the StructureDefinition as a resource and it is accepted but we do not know how then to get the server to use it, and thought maybe we needed the addition of domain resource to make that happen</p>",
        "id": 186308148,
        "sender_full_name": "Brian Bialecki",
        "timestamp": 1579713143
    },
    {
        "content": "<p>Some test servers will support custom resources but most don't.  You'll have to reach out to the maintainer of the server</p>",
        "id": 186308569,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1579713398
    },
    {
        "content": "<p>Just a question, if they do, which the maintainer says they do, to get it on the list of known resources, do we need to create a DomainResource definition as well as the StructureDefinition?</p>",
        "id": 186309624,
        "sender_full_name": "Brian Bialecki",
        "timestamp": 1579714133
    },
    {
        "content": "<p>DomainResource is an abstract type - you can't create an instance of it.  I'd expect servers to require a StructureDefinition defining the resource and potentially some SearchParameters</p>",
        "id": 186314120,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1579717096
    },
    {
        "content": "<p>If I'm not mistaken, the documentation for the server should include the instructions on how to add custom resources</p>",
        "id": 186314217,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1579717162
    },
    {
        "content": "<p>There is a resourceProposal but we have not yet prototyped it as a FMM 0 resource. Given this proposal, it seems that II might be ready to give me the details so that I can prototype this as an FMM 0 resource.   Right <span class=\"user-mention\" data-user-id=\"191960\">@Brad Genereaux</span> ?</p>",
        "id": 186314862,
        "sender_full_name": "John Moehrke",
        "timestamp": 1579717540
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191960\">@Brad Genereaux</span> <span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span> I have started to protype this with DICOM WG20.  Johnathan Whitby was going to use what I have on Github as a start, which is why we are looking ot post it on the SIIM server as well, which it is located here:<br>\n<a href=\"http://hackathon.siim.org/fhir-overview/fhir/StructureDefinition/ImagingReference\" target=\"_blank\" title=\"http://hackathon.siim.org/fhir-overview/fhir/StructureDefinition/ImagingReference\">http://hackathon.siim.org/fhir-overview/fhir/StructureDefinition/ImagingReference</a></p>",
        "id": 186400174,
        "sender_full_name": "Brian Bialecki",
        "timestamp": 1579793688
    },
    {
        "content": "<p>We also updated observation to add this to basedOn<br>\n        \"base\": {<br>\n          \"path\": \"Observation.basedOn\",<br>\n          \"min\": 0,<br>\n          \"max\": \"*\"<br>\n        },<br>\n        \"type\": [<br>\n          {<br>\n            \"code\": \"Reference\",<br>\n            \"targetProfile\": [<br>\n              \"<a href=\"http://hackathon.siim.org/fhir-overview/fhir/StructureDefinition/CarePlan\" target=\"_blank\" title=\"http://hackathon.siim.org/fhir-overview/fhir/StructureDefinition/CarePlan\">http://hackathon.siim.org/fhir-overview/fhir/StructureDefinition/CarePlan</a>\",<br>\n              \"<a href=\"http://hackathon.siim.org/fhir-overview/fhir/StructureDefinition/DeviceRequest\" target=\"_blank\" title=\"http://hackathon.siim.org/fhir-overview/fhir/StructureDefinition/DeviceRequest\">http://hackathon.siim.org/fhir-overview/fhir/StructureDefinition/DeviceRequest</a>\",<br>\n              \"<a href=\"http://hackathon.siim.org/fhir-overview/fhir/StructureDefinition/ImmunizationRecommendation\" target=\"_blank\" title=\"http://hackathon.siim.org/fhir-overview/fhir/StructureDefinition/ImmunizationRecommendation\">http://hackathon.siim.org/fhir-overview/fhir/StructureDefinition/ImmunizationRecommendation</a>\",<br>\n              \"<a href=\"http://hackathon.siim.org/fhir-overview/fhir/StructureDefinition/MedicationRequest\" target=\"_blank\" title=\"http://hackathon.siim.org/fhir-overview/fhir/StructureDefinition/MedicationRequest\">http://hackathon.siim.org/fhir-overview/fhir/StructureDefinition/MedicationRequest</a>\",<br>\n              \"<a href=\"http://hackathon.siim.org/fhir-overview/fhir/StructureDefinition/NutritionOrder\" target=\"_blank\" title=\"http://hackathon.siim.org/fhir-overview/fhir/StructureDefinition/NutritionOrder\">http://hackathon.siim.org/fhir-overview/fhir/StructureDefinition/NutritionOrder</a>\",<br>\n              \"<a href=\"http://hackathon.siim.org/fhir-overview/fhir/StructureDefinition/ServiceRequest\" target=\"_blank\" title=\"http://hackathon.siim.org/fhir-overview/fhir/StructureDefinition/ServiceRequest\">http://hackathon.siim.org/fhir-overview/fhir/StructureDefinition/ServiceRequest</a>\",<br>\n              \"<a href=\"http://hackathon.siim.org/fhir-overview/fhir/StructureDefinition/ImagingReference\" target=\"_blank\" title=\"http://hackathon.siim.org/fhir-overview/fhir/StructureDefinition/ImagingReference\">http://hackathon.siim.org/fhir-overview/fhir/StructureDefinition/ImagingReference</a>\"<br>\n            ]<br>\n          }<br>\n        ],</p>",
        "id": 186400569,
        "sender_full_name": "Brian Bialecki",
        "timestamp": 1579793906
    },
    {
        "content": "<p>tagging <span class=\"user-mention\" data-user-id=\"197037\">@Jonathan Whitby</span>  (should also tag Chris Lindop) - yes - this relates to the proposed resource that we batted about back in 2018 - the ImageReference. (in answer to <span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span> question)</p>",
        "id": 186698454,
        "sender_full_name": "Brad Genereaux",
        "timestamp": 1580142494
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"253949\">@Brian Bialecki</span>   I’m working on a PACS application that generates FHIR observation resources that are consumed by a DiagnosticReport resource app.   I’m interested in testing implementation of the ImagingReference resource.   If you have additional examples created, I would appreciate checking them out.</p>",
        "id": 190295687,
        "sender_full_name": "Martin Bellehumeur (Visage Imaging)",
        "timestamp": 1583941108
    },
    {
        "content": "<p>After work with II and the DICOM WGs it was decided to pursue this as an extension of DocumentReference.  I have placed the imagingContext extension on the SIIM public FHIR server and have been able to get an example resource  to properly parse.  I plan to now create the full circle of AIM/DICOM SR and FHIR Diagnostic Report to show these all together and mapped.</p>",
        "id": 190300651,
        "sender_full_name": "Brian Bialecki",
        "timestamp": 1583943437
    },
    {
        "content": "<p>Hello - sorry for reviving an old thread, but I think this topic is the closest to a question I'm thinking through. </p>\n<p>I'm thinking about annotations, and specifically, on 3D representations outside of DICOM (represented in NIFTI, think of it as a three dimensional matrix file format). I could have both a NIFTI 3D representation of an imaging study, as well as a 3D representation of a mask (0 = not an area of interest, 1 = area of interest). If I represent these as FHIR objects - presumably Media - is there any obvious way to relate them? (basedOn doesn't seem to work unless I extend Media).</p>",
        "id": 214661116,
        "sender_full_name": "Brad Genereaux",
        "timestamp": 1603773956
    },
    {
        "content": "<p>Hi Brad :)</p>",
        "id": 214664418,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1603779595
    },
    {
        "content": "<p>I think it makes sense, but I defer to colleagues more into imaging for a better answer. Just adding one possibly related topic: In some procedures we also capture other media (waveforms) and it is important not only to relate them, but also to \"synchronize\" them. For example in wavelenghts, we say that the zone of interest starts at 1'02\" in one channel but in the other channel (which was recording earlier), the same event starts at 2\"54'.</p>",
        "id": 214664543,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1603779745
    },
    {
        "content": "<p>I don't know if you need only to link the media, or to establish the common points - any offset for alignment.</p>",
        "id": 214664561,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1603779796
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191380\">@Elliot Silver</span></p>",
        "id": 214696427,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1603804275
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191960\">@Brad Genereaux</span>, are  you looking at R4 or is this a more abstract question? Media is gone from R5. </p>\n<p>In R5, my answer would be to put each representation in an Observation (specifically, Observation.valueAttachment) and link them with Observation.derivedFrom. I remember we had a way to put content in a DocumentReference, and point the Observation to that, but I can't recall the details of that right now.</p>\n<p>In R4, I don't see an obvious way to do this. (How did we miss \"derivedFrom\" in Media?) I  think there is an extension to add an attachment as an Observation value, but can't find it immediately.</p>",
        "id": 214721783,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1603814578
    }
]