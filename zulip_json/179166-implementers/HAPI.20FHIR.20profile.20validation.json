[
    {
        "content": "<p>Hi implementation team,</p>\n<p>Does anyone  know if HAPI server can validate a profile XML that has errors?</p>\n<p>We tried deploying a HAPI JDBC server and posted a StructureDefinition from the AU PD FHIR profile published by [HL7 AU](), and it gave a 201 as shown in the screenshot below. </p>\n<p>We were expecting a validation error as replicated by <a href=\"https://zulip-uploads.s3.amazonaws.com/10155/dGCQabVkQdGcgJexsflAlQoD/pasted_image.png?Signature=RT3cq17pfzyX6%2FDEa9THkodmPhI%3D&amp;Expires=1581568819&amp;AWSAccessKeyId=AKIAIEVMBCAT2WD3M5KQ\" target=\"_blank\" title=\"https://zulip-uploads.s3.amazonaws.com/10155/dGCQabVkQdGcgJexsflAlQoD/pasted_image.png?Signature=RT3cq17pfzyX6%2FDEa9THkodmPhI%3D&amp;Expires=1581568819&amp;AWSAccessKeyId=AKIAIEVMBCAT2WD3M5KQ\">Forge</a> and the rule for the elemented-definition is <a href=\"https://zulip-uploads.s3.amazonaws.com/10155/BSlWqpiD3AVXpCpIkqCttjRo/pasted_image.jpe?Signature=qJVADj5kKozi5ZIT3ZsPFnHVwMY%3D&amp;Expires=1581568800&amp;AWSAccessKeyId=AKIAIEVMBCAT2WD3M5KQ\" target=\"_blank\" title=\"https://zulip-uploads.s3.amazonaws.com/10155/BSlWqpiD3AVXpCpIkqCttjRo/pasted_image.jpe?Signature=qJVADj5kKozi5ZIT3ZsPFnHVwMY%3D&amp;Expires=1581568800&amp;AWSAccessKeyId=AKIAIEVMBCAT2WD3M5KQ\">here</a></p>\n<div class=\"message_inline_image\"><a href=\"https://zulip-uploads.s3.amazonaws.com/10155/dGCQabVkQdGcgJexsflAlQoD/pasted_image.png?Signature=RT3cq17pfzyX6%2FDEa9THkodmPhI%3D&amp;Expires=1581568819&amp;AWSAccessKeyId=AKIAIEVMBCAT2WD3M5KQ\" target=\"_blank\" title=\"Forge\"><img src=\"https://zulip-uploads.s3.amazonaws.com/10155/dGCQabVkQdGcgJexsflAlQoD/pasted_image.png?Signature=RT3cq17pfzyX6%2FDEa9THkodmPhI%3D&amp;Expires=1581568819&amp;AWSAccessKeyId=AKIAIEVMBCAT2WD3M5KQ\"></a></div><p><a href=\"/user_uploads/10155/kVPI2E0qMAqJWXrj7eXUe6fD/pasted_image.jpe\" target=\"_blank\" title=\"pasted_image.jpe\">pasted image</a><br>\nThe StructureDefinition-au-pd-healthcareservice.xml we tested can be found <a href=\"https://github.com/hl7au/au-fhir-pd/blob/pd2019Aug.2/resources/au-pd-healthcareservice.xml\" target=\"_blank\" title=\"https://github.com/hl7au/au-fhir-pd/blob/pd2019Aug.2/resources/au-pd-healthcareservice.xml\">here</a></p>\n<p>FYI <span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span></p>",
        "id": 188077472,
        "sender_full_name": "Chandan Datta",
        "timestamp": 1581569017
    },
    {
        "content": "<p>I'm not too familiar with HAPI, but the Vonk FHIR server also generally accepts posted FHIR resources without validating them first, as long as they are syntactically correct. However you can configure it to validate every incoming resource too: <a href=\"http://docs.simplifier.net/vonk/features/prevalidation.html\" target=\"_blank\" title=\"http://docs.simplifier.net/vonk/features/prevalidation.html\">http://docs.simplifier.net/vonk/features/prevalidation.html</a>.<br>\nAlso there's a <a class=\"stream\" data-stream-id=\"179167\" href=\"/#narrow/stream/179167-hapi\">#hapi</a> stream which might give you a quicker response on HAPI questions.</p>",
        "id": 188125569,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1581612746
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192525\">@Chandan Datta</span> you have to either:</p>\n<ul>\n<li>POST to [base]/StructureDefinition/$validate</li>\n<li>set: <code>validation.requests.enabled</code>to true in your hapi-fhir-jpaserver-starter/blob/master/src/main/resources/hapi.properties</li>\n</ul>",
        "id": 188129389,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1581615096
    },
    {
        "content": "<p>by default hapi doesn't validate everything (which is a good default as validation is costly)</p>",
        "id": 188129474,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1581615138
    },
    {
        "content": "<p>Thanks for the clarification <span class=\"user-mention\" data-user-id=\"191451\">@Patrick Werner</span> . enabling worked - we actually had to change the code - is that the right way or is there an externalised env config that modified should be enough? <br>\n<a href=\"/user_uploads/10155/0JVbGJZ3j-cbeoFMLMg8V56l/pasted_image.jpe\" target=\"_blank\" title=\"pasted_image.jpe\">pasted image</a> </p>\n<p>Do typical FHIR servers in production usage disable validation? Is there a best practices/tuning guide for the prod usage for HAPI that the community has created because the <a href=\"https://hapifhir.github.io/hapi-hl7v2/hapi-faq.html#production_use\" target=\"_blank\" title=\"https://hapifhir.github.io/hapi-hl7v2/hapi-faq.html#production_use\">FAQs</a> on HAPI FHIR are probably for v2 messaging. </p>\n<p>Further as <span class=\"user-mention\" data-user-id=\"203235\">@Ward Weistra</span>  mentioned about Vonk, is there any benchmarking test suite that can be run before production usage such as <a href=\"https://github.com/FirelyTeam/Wind.Tunnel\" target=\"_blank\" title=\"https://github.com/FirelyTeam/Wind.Tunnel\">WindTunnel</a>? </p>\n<p><a href=\"/user_uploads/10155/vJ20UJ6CLOGwv4Jzvpwn5CV8/pasted_image.jpe\" target=\"_blank\" title=\"pasted_image.jpe\">pasted image</a><br>\n<a href=\"/user_uploads/10155/BCrNW87ZgJF45ZmlmWGzu3BP/pasted_image.jpe\" target=\"_blank\" title=\"pasted_image.jpe\">pasted image</a><br>\n<a href=\"/user_uploads/10155/RAM1YMGZrvP0lv7otWTPDDSs/pasted_image.jpe\" target=\"_blank\" title=\"pasted_image.jpe\">pasted image</a></p>",
        "id": 188353870,
        "sender_full_name": "Chandan Datta",
        "timestamp": 1581917522
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192525\">@Chandan Datta</span> I don't think Windtunnel is specific to Vonk, but rather should work for any FHIR server.<br>\nIs that correct <span class=\"user-mention\" data-user-id=\"191363\">@Vadim Peretokin</span> ?</p>",
        "id": 188357769,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1581924722
    },
    {
        "content": "<p>That is correct!</p>",
        "id": 188361646,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1581930066
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"192525\">Chandan Datta</span> <a href=\"#narrow/stream/179166-implementers/topic/HAPI.20FHIR.20profile.20validation/near/188353870\" title=\"#narrow/stream/179166-implementers/topic/HAPI.20FHIR.20profile.20validation/near/188353870\">said</a>:</p>\n<blockquote>\n<p>Thanks for the clarification <span class=\"user-mention silent\" data-user-id=\"191451\">Patrick Werner</span> . enabling worked - we actually had to change the code - is that the right way or is there an externalised env config that modified should be enough? </p>\n</blockquote>\n<p>Did you use the recommended jpaserver-starter? If so you only have to change the parameter here: <a href=\"https://github.com/hapifhir/hapi-fhir-jpaserver-starter/blob/master/src/main/resources/hapi.properties\" target=\"_blank\" title=\"https://github.com/hapifhir/hapi-fhir-jpaserver-starter/blob/master/src/main/resources/hapi.properties\">https://github.com/hapifhir/hapi-fhir-jpaserver-starter/blob/master/src/main/resources/hapi.properties</a> no need to touch code.</p>",
        "id": 188394773,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1581960111
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"203235\">Ward Weistra</span> <a href=\"#narrow/stream/179166-implementers/topic/HAPI.20FHIR.20profile.20validation/near/188357769\" title=\"#narrow/stream/179166-implementers/topic/HAPI.20FHIR.20profile.20validation/near/188357769\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"192525\">Chandan Datta</span> I don't think Windtunnel is specific to Vonk, but rather should work for any FHIR server.<br>\nIs that correct <span class=\"user-mention silent\" data-user-id=\"191363\">Vadim Peretokin</span> ?</p>\n<p>This is why we at Firely created a performance measurement framework to see how our Vonk measures up one release after another</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"203235\">@Ward Weistra</span> and <span class=\"user-mention\" data-user-id=\"191363\">@Vadim Peretokin</span> , thanks a lot!</p>\n<ul>\n<li>do we have some docs on the goals of those perf tests in the <a href=\"https://github.com/FirelyTeam/Wind.Tunnel/tree/master/performance_testscripts\" target=\"_blank\" title=\"https://github.com/FirelyTeam/Wind.Tunnel/tree/master/performance_testscripts\">python code</a> and how new developers can add their own performance test? </li>\n<li>In terms of comparing implementations, how is the wind tunnel design team thinking of comparing test results across different FHIR server implementations(other than the differences in the hardware)? For example, if the Spark and Vonk implementations are trying to abstract the data store from the devs using their APIs, what would be the numbers for various db implementations that need to be reported? Such as someone choosing between a CosmosDB or a SQL Server.</li>\n</ul>",
        "id": 189083061,
        "sender_full_name": "Chandan Datta",
        "timestamp": 1582687302
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192525\">@Chandan Datta</span> the goals are to simulate more or less realistic scenarios that would happen in real life :) as for adding your own tests, see standard locust documentation: <a href=\"https://docs.locust.io/en/stable\" target=\"_blank\" title=\"https://docs.locust.io/en/stable\">https://docs.locust.io/en/stable</a></p>",
        "id": 189100273,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1582711534
    },
    {
        "content": "<p>I'm not sure what do you mean with the second question. Ensure you're running the test on comparable hardware, run enough tests and then compare the data.</p>",
        "id": 189100347,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1582711571
    }
]