[
    {
        "content": "<p>Hi, first question here so let me know if I am in the wrong place:<br>\nI'm implementing FHIRPath and running into an issue with the bdl-8 constraint on bundle: <a href=\"https://www.hl7.org/fhir/bundle.html\" target=\"_blank\" title=\"https://www.hl7.org/fhir/bundle.html\">https://www.hl7.org/fhir/bundle.html</a><br>\n<code>fullUrl</code> is optional, so <code>contains('/_history/')</code> may propagate the empty result, which <code>.not()</code> also propagates, so the constraint returns <code>{}</code>. <br>\nDoes <code>{}</code> mean the constraint passes? Or is the FHIRPath incorrect? or am I missing something?</p>",
        "id": 153979739,
        "sender_full_name": "George Leontiev",
        "timestamp": 1533054091
    },
    {
        "content": "<p>Yes, empty in a constraint means it passes, in the same way that null in a check constraint in SQL passes.</p>",
        "id": 153979741,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1533054479
    },
    {
        "content": "<p>OK Thanks!</p>",
        "id": 153979742,
        "sender_full_name": "George Leontiev",
        "timestamp": 1533054599
    },
    {
        "content": "<p>FYI: bdl-8 will be dropped in R4.</p>",
        "id": 153980098,
        "sender_full_name": "Christiaan Knaap",
        "timestamp": 1533112858
    },
    {
        "content": "<blockquote>\n<p>FYI: bdl-8 will be dropped in R4.</p>\n</blockquote>\n<p>At least, I thought so after the Cologne WGM. But I am confused by two related GForge items:<br>\n<a href=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17251&amp;start=0\" target=\"_blank\" title=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17251&amp;start=0\">17251</a>: Decided in Cologne to revoke the restriction all together. <br>\n<a href=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=16518&amp;start=0\" target=\"_blank\" title=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=16518&amp;start=0\">16518</a>: No defined use-case and prohibiting it simplifies implementations.  If you have a use-case, feel free to submit a separate change request describing it.  We don't feel it's appropriate to make a statement about the rationale in the spec.<br>\nAnd in the latest build, <a href=\"http://build.fhir.org/bundle.html#invs\" target=\"_blank\" title=\"http://build.fhir.org/bundle.html#invs\">bdl-8</a> is still in.</p>\n<p>So what is the verdict?</p>",
        "id": 153998027,
        "sender_full_name": "Christiaan Knaap",
        "timestamp": 1537346584
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> ?</p>",
        "id": 153998075,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1537363668
    },
    {
        "content": "<p>oh so my comment is a little misleading.. </p>\n<blockquote>\n<p>It cannot be the non-version logical id ([base]/Patient/123), because that would result in duplicate fullUrls.</p>\n</blockquote>\n<p>That's what we revoked altogether</p>",
        "id": 153998887,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1537499475
    },
    {
        "content": "<p>You mean that duplicate fullUrls are allowed? And only in a history bundle I presume?</p>",
        "id": 153998925,
        "sender_full_name": "Christiaan Knaap",
        "timestamp": 1537515282
    },
    {
        "content": "<p>no in any bundle</p>",
        "id": 153998928,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1537515679
    },
    {
        "content": "<p>it might not make sense... but it might.</p>",
        "id": 153998929,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1537515688
    },
    {
        "content": "<p>bdl-7 is also related to this issue when the Bundle is history. The problem is when the history contains entries for deleted versions of the resource. The expression will fail because the entry.resource is not present.</p>\n<div class=\"codehilite\"><pre><span></span>bdl-7 expression: entry.where(fullUrl.exists()).select(fullUrl&amp;resource.meta.versionId).isDistinct()\n</pre></div>",
        "id": 153999226,
        "sender_full_name": "Richard Ettema",
        "timestamp": 1537580097
    },
    {
        "content": "<p>can you make a task for this?</p>",
        "id": 153999624,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1537827525
    }
]