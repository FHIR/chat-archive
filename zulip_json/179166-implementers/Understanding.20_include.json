[
    {
        "content": "<p>I am attempting to form a search query to return  all appointments for a patient with a given id. I use this query and it seems to work</p>",
        "id": 153823816,
        "sender_full_name": "Richard Kavanagh",
        "timestamp": 1461946915
    },
    {
        "content": "<p><a href=\"http://fhirtest.uhn.ca/baseDstu2/Appointment?patient:Patient.identifier=TestPatient\" target=\"_blank\" title=\"http://fhirtest.uhn.ca/baseDstu2/Appointment?patient:Patient.identifier=TestPatient\">http://fhirtest.uhn.ca/baseDstu2/Appointment?patient:Patient.identifier=TestPatient</a></p>",
        "id": 153823817,
        "sender_full_name": "Richard Kavanagh",
        "timestamp": 1461946928
    },
    {
        "content": "<p>Now I want to use an _include statement to bring back the Patient resource as well as the appointment so I  use this</p>",
        "id": 153823820,
        "sender_full_name": "Richard Kavanagh",
        "timestamp": 1461946966
    },
    {
        "content": "<p><a href=\"http://fhirtest.uhn.ca/baseDstu2/Appointment?patient:Patient.identifier=TestPatient&amp;_include=Appointment:patient\" target=\"_blank\" title=\"http://fhirtest.uhn.ca/baseDstu2/Appointment?patient:Patient.identifier=TestPatient&amp;_include=Appointment:patient\">http://fhirtest.uhn.ca/baseDstu2/Appointment?patient:Patient.identifier=TestPatient&amp;_include=Appointment:patient</a></p>",
        "id": 153823821,
        "sender_full_name": "Richard Kavanagh",
        "timestamp": 1461946968
    },
    {
        "content": "<p>The resulting bundle has APPOINTMENT and PATIENT resources but also PRACTITIONER resources. What did I do wrong?</p>",
        "id": 153823822,
        "sender_full_name": "Richard Kavanagh",
        "timestamp": 1461947010
    },
    {
        "content": "<p>Try this: <code>http://fhirtest.uhn.ca/baseDstu2/Appointment?patient:Patient.identifier=TestPatient&amp;_include=Appointment:patient:Patient</code></p>",
        "id": 153823853,
        "sender_full_name": "Chris Grenz",
        "timestamp": 1461964159
    },
    {
        "content": "<p>you can limit the referenced types in the include the same way as in the other query parameter....</p>",
        "id": 153823854,
        "sender_full_name": "Chris Grenz",
        "timestamp": 1461964198
    },
    {
        "content": "<p>That looks like a bug in HAPI. That link using the patient param should be filtering down to patient already (even though this is the actor property)</p>",
        "id": 153823865,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1461973581
    },
    {
        "content": "<p>yes</p>",
        "id": 153823918,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1461978751
    },
    {
        "content": "<p>Yeah, this looks like a bug. Will put in a fix for the next server update.</p>",
        "id": 153823980,
        "sender_full_name": "James Agnew",
        "timestamp": 1462115881
    },
    {
        "content": "<p>FYI <span class=\"user-mention\" data-user-id=\"191362\">@Richard Kavanagh</span> this has been fixed. Your <a href=\"http://fhirtest.uhn.ca/baseDstu2/Appointment?patient:Patient.identifier=TestPatient&amp;_include=Appointment:patient\" target=\"_blank\" title=\"http://fhirtest.uhn.ca/baseDstu2/Appointment?patient:Patient.identifier=TestPatient&amp;_include=Appointment:patient\">previous query</a> works as expected now.</p>",
        "id": 153824356,
        "sender_full_name": "James Agnew",
        "timestamp": 1462289156
    }
]