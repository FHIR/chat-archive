[
    {
        "content": "<p>Hi! I'm trying to post R4 fhir objects to our Vonk server, and to get vonk to identify it as R4 object, I have to add ; fhirVersion=4.0 to the accept or contentType headers (<a href=\"https://www.hl7.org/fhir/http.html#version-parameter\" target=\"_blank\" title=\"https://www.hl7.org/fhir/http.html#version-parameter\">https://www.hl7.org/fhir/http.html#version-parameter</a>).</p>\n<p>I was hoping the R4 FhirClient for C# (<a href=\"https://github.com/FirelyTeam/fhir-net-api\" target=\"_blank\" title=\"https://github.com/FirelyTeam/fhir-net-api\">https://github.com/FirelyTeam/fhir-net-api</a>) would do this, but after inspection, it does not set the headers.<br>\nIs there any way of getting the FhirClient to post fhirVersion without this ugly hack:</p>\n<p><code>FhirClient.OnBeforeRequest += (sender, args) =&gt;\n{\n           args.RawRequest.Accept = args.RawRequest.Accept + \"; fhirVersion=4.0\";\n            args.RawRequest.ContentType = args.RawRequest.ContentType + \"; fhirVersion=4.0\";\n};</code></p>\n<p>Headers without hack:</p>\n<div class=\"codehilite\"><pre><span></span>{\n  &quot;content-length&quot;: &quot;450&quot;,\n  &quot;user-agent&quot;: &quot;.NET FhirClient for FHIR 4.0.0&quot;,\n  &quot;prefer&quot;: &quot;return=representation&quot;,\n  &quot;accept&quot;: &quot;application/fhir+xml; charset=utf-8&quot;,\n  &quot;content-type&quot;: &quot;application/fhir+xml; charset=utf-8&quot;\n}\n</pre></div>\n\n\n<p>Thanks!</p>",
        "id": 176637845,
        "sender_full_name": "Trond Klakken",
        "timestamp": 1569486141
    },
    {
        "content": "<p>Seems a bug in the server? Specifying the version is optional. Or is it an end point that supports multiple versions?</p>",
        "id": 176653616,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1569501319
    },
    {
        "content": "<p>Correct, Vonk R4 release supports multi-version endpoints. Requests can specify version header (default STU3). Looks like we still need to integrate this logic into the <code>FhirClient</code> class.</p>",
        "id": 176653831,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1569501516
    },
    {
        "content": "<p>Well, this works for now, just writing it a little bit prettier then above :)</p>",
        "id": 176653863,
        "sender_full_name": "Trond Klakken",
        "timestamp": 1569501554
    },
    {
        "content": "<p>Question - does the Vonk server support configuration to set the default FHIR version to R4?</p>",
        "id": 176697128,
        "sender_full_name": "Richard Ettema",
        "timestamp": 1569531868
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191370\">@Richard Ettema</span> not at this time. So you have to use multiple versions: <a href=\"http://docs.simplifier.net/vonk/features/multiversion.html\" target=\"_blank\" title=\"http://docs.simplifier.net/vonk/features/multiversion.html\">http://docs.simplifier.net/vonk/features/multiversion.html</a></p>",
        "id": 176735525,
        "sender_full_name": "Trond Klakken",
        "timestamp": 1569581338
    },
    {
        "content": "<p>In our next release we will implement version specific endpoints, so you don't need to use the fhirVersion parameter anymore.</p>",
        "id": 176736697,
        "sender_full_name": "Mirjam Baltus",
        "timestamp": 1569582709
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191347\">@Mirjam Baltus</span> nice!</p>",
        "id": 176913399,
        "sender_full_name": "Trond Klakken",
        "timestamp": 1569833336
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191347\">@Mirjam Baltus</span> Just out of curiosity, will both options (one endpoint for both versions with version header AND version specific endpoints) be there in next release? Since I saw some people already implementing the FHIR version header.</p>",
        "id": 176917283,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1569836782
    },
    {
        "content": "<p>Yes, we will keep supporting the current way of running Vonk on one endpoint and using the fhirVersion parameter too. As far as I know, both will work out of the box without having to configure your preference. We are also working on a configuration option to be able to set R4 as the default.</p>",
        "id": 176925070,
        "sender_full_name": "Mirjam Baltus",
        "timestamp": 1569844766
    }
]