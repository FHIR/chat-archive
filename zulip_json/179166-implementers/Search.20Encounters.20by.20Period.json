[
    {
        "content": "<p>Hi, we would like to implement a date Period  search on Encounters for a list of encounters that are either admitted or discharged within the date range.  After reading the specification on date filters and prefixes, we want to minimize the complexity of using prefixes.  </p>\n<p>Can someone please confirm if a system is allowed to <br>\na. omit all date search prefixes.  This means just the dates are used as such <br>\n            [baseURL]/Encounter?date=2021-01-01&amp;date=2021-12-31<br>\nThe search is expected to include any encounters that are admitted or discharged on or after 2021-01-01 and before or on 2021-12-31.</p>\n<p>b. implement a subset of prefixes.  We would pick and choose to implement a few prefixes that make sense  with our data.</p>\n<p>Thanks,</p>\n<p>Amy</p>",
        "id": 253479254,
        "sender_full_name": "Amy Li",
        "timestamp": 1631736483
    },
    {
        "content": "<p><code>[baseURL]/Encounter?date=2021-01-01</code> matches encounter with admit and discharge both on that day - and so <code>[baseURL]/Encounter?date=2021-01-01&amp;date=2021-12-31</code> won't match anything (see <a href=\"http://hl7.org/fhir/search.html#prefix\">http://hl7.org/fhir/search.html#prefix</a> ' the range of the search value fully contains the range of the target value')</p>",
        "id": 253481902,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1631737549
    },
    {
        "content": "<p>What you want is <code>[baseURL]/Encounter?date=ge2021-01-01&amp;date=le2021-12-31</code>  - that matches  encounters that are admitted or discharged on or after 2021-01-01 and before or on 2021-12-31.</p>",
        "id": 253482240,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1631737704
    },
    {
        "content": "<p>(but double-check that with the spec I linked - date searches on periods are confusing)</p>",
        "id": 253482311,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1631737748
    },
    {
        "content": "<p>Using HAPI this won't work [baseURL]/Encounter?date=2021-01-01&amp;date=2021-12-31, the default comparator with not specified is eq. Meaning that what you said was translated as [baseURL]/Encounter?date=<strong>eq</strong>2021-01-01&amp;date=<strong>eq</strong>2021-12-31</p>\n<p>If you did like  Michele showed, <code>[baseURL]/Encounter?date=ge2021-01-01&amp;date=le2021-12-31 </code> I would think that if either period.start OR period.end was in the range the Encounter would be returned.</p>",
        "id": 253487572,
        "sender_full_name": "Daniel Venton",
        "timestamp": 1631739866
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"335936\">@Daniel Venton</span> Multiple search parameter repetitions are treated as <strong>AND</strong>.</p>",
        "id": 253621743,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1631814552
    },
    {
        "content": "<p>Then you are saying that since it's a date range applied to a range that:<br>\nperiod.start has to be &gt; lower bound AND period.start has to be &lt; upper bound<br>\nAND [NOT Allowed to be OR in this position?]<br>\nperiod.start has to be &gt; lower bound AND period.start has to be &lt; upper bound.</p>",
        "id": 253632402,
        "sender_full_name": "Daniel Venton",
        "timestamp": 1631818666
    },
    {
        "content": "<p>Following that pattern. All date attributes that the search parameter applies to must be within range. In CARIN a service-date param applies to 2 ranges service date and billing date.<br>\nAll 4 dates must fall within the date range specified.<br>\nIf any one of those dates are missing, then the resource is not a match.</p>",
        "id": 253632989,
        "sender_full_name": "Daniel Venton",
        "timestamp": 1631818846
    },
    {
        "content": "<p><code>date=ge2021-01-01</code> is 'the range above the search value intersects (i.e. overlaps) with the range of the target value, or the range of the search value fully contains the range of the target value' = the encounter end must be on or after 2021-01-01<br>\n<code>date=le2021-12-31</code> is 'the range below the search value intersects (i.e. overlaps) with the range of the target value or the range of the search value fully contains the range of the target value' = the encounter start must on or before 2021-12-31<br>\nboth conditions = the encounter end must be on or after 2021-01-01 AND the encounter start must on or before 2021-12-31<br>\nthat is matched if encounter end OR encounter start are within the range</p>",
        "id": 253636744,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1631820329
    },
    {
        "content": "<p>Date comparisons are always handled as range overlap/intersection tests.  So Encounter?date isn't about start vs. end it's about the range represented by the whole period of time - based on the precision stated.</p>",
        "id": 253640741,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1631821975
    },
    {
        "content": "<p>'range overlap/intersection tests' translate into condition on the start / end of the relevant periods, that is what I did above</p>",
        "id": 253643919,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1631823330
    },
    {
        "content": "<p>Hello ! <br>\nWe are implementing CARIN's profiles for and are creating c4bb EOB resources based on this-<br>\n<a href=\"http://hl7.org/fhir/us/carin-bb/STU1/StructureDefinition-C4BB-ExplanationOfBenefit-Pharmacy.html\">http://hl7.org/fhir/us/carin-bb/STU1/StructureDefinition-C4BB-ExplanationOfBenefit-Pharmacy.html</a><br>\nBasically, we are through with it but the only thing we are failing for the is the value-set mentioned in the profile for ExplanationOfBenefit.supportingInfo:dawcode.code  which is <br>\nLink - <a href=\"http://hl7.org/fhir/us/carin-bb/STU1/ValueSet-NCPDPDispensedAsWrittenOrProductSelectionCode.html\">http://hl7.org/fhir/us/carin-bb/STU1/ValueSet-NCPDPDispensedAsWrittenOrProductSelectionCode.html</a></p>\n<p>As per this URL (<a href=\"https://build.fhir.org/ig/HL7/carin-bb/ValueSet-NCPDPDispensedAsWrittenOrProductSelectionCode.html\">https://build.fhir.org/ig/HL7/carin-bb/ValueSet-NCPDPDispensedAsWrittenOrProductSelectionCode.html</a>) FHIR doesn’t give detail on the value-set required and we don’t have licensed NCPDP codes to support this.</p>\n<p>Although we had tried passing the DAW standard code values 0-9 from this <a href=\"https://ushik.ahrq.gov/ViewItemDetails?system=mdr&amp;itemKey=60578000\">https://ushik.ahrq.gov/ViewItemDetails?system=mdr&amp;itemKey=60578000</a> </p>\n<p>But still not getting through.</p>\n<p>So, seeking help /advice on how to get through it.  Any alternative value-set and code can be used here. Any help or pointers on this is appreciated. <br>\nThank you!</p>",
        "id": 270531962,
        "sender_full_name": "guninder",
        "timestamp": 1643886460
    },
    {
        "content": "<p>You might want to ask on <a class=\"stream\" data-stream-id=\"204607\" href=\"/#narrow/stream/204607-CARIN-IG-for-Blue-Button.C2.AE\">#CARIN IG for Blue Button®</a></p>",
        "id": 270570005,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1643903339
    }
]