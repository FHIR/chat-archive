[
    {
        "content": "<p><a href=\"https://www.hl7.org/fhir/bundle-request-simplesummary.xml.html\" target=\"_blank\" title=\"https://www.hl7.org/fhir/bundle-request-simplesummary.xml.html\">https://www.hl7.org/fhir/bundle-request-simplesummary.xml.html</a></p>\n<p>In most examples there is a leading slash in every query URL. E.g.:</p>\n<div class=\"codehilite\"><pre><span></span>&lt;url value=&quot;/Condition?patient=example&quot;/&gt;\n</pre></div>\n\n\n<p>HAPI-FHIR and Vonk will happily return the same response Bundle, regardless of the presence of a leading slash. In my mind the leading slash would mean I execute the query against the server hostname and not against the FHIR endpoint I'm posting too (they might be the same, but they usually aren't)</p>\n<p>So suppose I post to <a href=\"http://test.fhir.org/r3\" target=\"_blank\" title=\"http://test.fhir.org/r3\">http://test.fhir.org/r3</a> I would expect the query above to be executed as <a href=\"http://test.fhir.org/Condition?patient=example\" target=\"_blank\" title=\"http://test.fhir.org/Condition?patient=example\">http://test.fhir.org/Condition?patient=example</a>. This is comparable to how web pages are rendered by a browser afaik. On <a href=\"http://test.fhir.org\" target=\"_blank\" title=\"http://test.fhir.org\">test.fhir.org</a> I then expect an error because there is no FHIR server serving Condition resources at that URL.</p>\n<p>1. How is it supposed to work?<br>\n2. Is it \"flexible\" or a bug that leading slashes don't influence the response?</p>\n<p>(Note: <a href=\"http://test.fhir.org\" target=\"_blank\" title=\"http://test.fhir.org\">test.fhir.org</a> doesn't respond at all to the Bundle so something else is off there)</p>\n<p><span class=\"user-mention\" data-user-id=\"191334\">@Marten Smits</span>, <span class=\"user-mention\" data-user-id=\"192301\">@Ardon Toonstra</span></p>",
        "id": 153915406,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1508766480
    },
    {
        "content": "<p>I think that looks like an error</p>",
        "id": 153915497,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1508787828
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  Which part? <a href=\"http://test.fhir.org\" target=\"_blank\" title=\"http://test.fhir.org\">test.fhir.org</a> not responding or hapi/vonk responding the same way regardless of a leading slash in the path? Or both :-) ?</p>",
        "id": 153916249,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1509002208
    },
    {
        "content": "<p>accepting the slash at the start</p>",
        "id": 153916258,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1509011715
    },
    {
        "content": "<p>Well that's likely caused by the spec saying that in all examples we could find. Ticket?</p>",
        "id": 153916393,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1509100087
    },
    {
        "content": "<p>I think so</p>",
        "id": 153916552,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1509136476
    },
    {
        "content": "<p>I've read <a href=\"https://tools.ietf.org/html/rfc1808\" target=\"_blank\" title=\"https://tools.ietf.org/html/rfc1808\">https://tools.ietf.org/html/rfc1808</a> about this and <span class=\"user-mention\" data-user-id=\"191375\">@Alexander Henket</span>s comment seems valid to me. However, the context of that rfc is mostly document retrieval, whereas this is about sending a document (Bundle in this case). In the retrieval context of the rfc it may be useful to use a relative path starting at the root, using the / at the start, since the programmer has control over what is in the tree of documents on the server.<br>\nBut in our case, does it make sense to do this at all. And as a consequence: Should we deviate from the rfc and not allow a slash at the start for any relative url in a Bundle - in order to avoid any confusion on how it might be processed?<br>\nCurrently in Vonk we simply ignore the leading slash and treat the url as relative to the endpoint the Bundle was sent to. (On the public Vonk endpoint that is equal to the host, that is a lucky coincidence).</p>",
        "id": 153917195,
        "sender_full_name": "Christiaan Knaap",
        "timestamp": 1509561769
    }
]