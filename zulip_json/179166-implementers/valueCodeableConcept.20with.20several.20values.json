[
    {
        "content": "<p>We have created an extension to present different quality problems in spirometry test. There are 4 different options for quality problems: Cough, Early termination, Lazy blow and Hesitation. Quality of breath is either normal or it has problems from 1 to 4. So my question is: is it ok to present several codes in valueCodeableConcept at the same time? In our case from 1 to 4. Example:<br>\n<code>{\n    \"url\": \"breathQuality\",\n    \"valueCodeableConcept\": {\n        \"coding\": [\n            {\n                \"code\": \"49727002\",\n                \"display\": \"Cough\",\n                \"system\": \"http://snomed.info/sct\"\n            },\n            {\n                \"code\": \"code for Early termination (not defined yet)\",\n                \"display\": \"Early termination\",\n                \"system\": \"system for Early termination (not defined yet)\"\n            }\n        ]\n    }\n}</code></p>",
        "id": 197104954,
        "sender_full_name": "Lauri Karppinen",
        "timestamp": 1589178912
    },
    {
        "content": "<p>Nope. <span aria-label=\"frown\" class=\"emoji emoji-1f641\" role=\"img\" title=\"frown\">:frown:</span><br>\nCodeableConcept's multiple codings are for translations of the one concept.</p>",
        "id": 197105044,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1589179029
    },
    {
        "content": "<p>For example one code from SNOMED CT, one from LOINC and one from a local code system.</p>",
        "id": 197105105,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1589179076
    },
    {
        "content": "<p>That was my concern that this is not the right way to do this. Do You have any suggestions how to do this? Help would be very much appriciated.  Is there any idea to repeat same extension for each of the quality problems?  Like this:<br>\n<code>{\n    \"url\": \"breathQuality\",\n    \"valueCodeableConcept\": {\n        \"coding\": [\n            {\n                \"code\": \"49727002\",\n                \"display\": \"Cough\",\n                \"system\": \"http://snomed.info/sct\"\n            }\n        ]\n    }\n},\n{\n    \"url\": \"breathQuality\",\n    \"valueCodeableConcept\": {\n        \"coding\": [\n            {\n                \"code\": \"code for Early termination (not defined yet)\",\n                \"display\": \"Early termination\",\n                \"system\": \"system for Early termination (not defined yet)\"\n            }\n        ]\n    }\n}</code></p>",
        "id": 197108874,
        "sender_full_name": "Lauri Karppinen",
        "timestamp": 1589181966
    },
    {
        "content": "<p>If \"breathQuality\" were to be a full fledged URL, then yes. An extension can be used multiple times.</p>",
        "id": 197110165,
        "sender_full_name": "René Spronk",
        "timestamp": 1589182809
    },
    {
        "content": "<p>Typically you'd use Observation.component for this - a separate component for each type, each having a code and valueQuantity</p>",
        "id": 197155459,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1589208354
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> <span class=\"user-mention\" data-user-id=\"191372\">@René Spronk</span>  This observation is used as a panel. It has hasMember relation to each breath in the study. If we have the right knowledge it should not have value or component? Not preferred at least? Current solution would have url to extension and the valueCodableConcept of extension is one of the values from valueSet. If there is no quality problems extension would have \"normal\" as value. If there is one or several quality problems (1-4) there would be code for each quality problem in separate extension with same url. Does this seem like o valid solution to You? There is some other information (breath number, breath type and quality problems/ok) in the extensions of this panel but observation has no value or component. Example:<br>\n<code>\"extension\": [\n        {\n            \"url\": \"http://example.org/fhir/StructureDefinition/FinnishPHRSpirometryBreathNumberExtension\",\n            \"valueInteger\": 2\n        },\n        {\n            \"url\": \"http://example.org/fhir/StructureDefinition/FinnishPHRSpirometryBreathTypeExtension\",\n            \"valueCodeableConcept\": {\n                \"coding\": [\n                    {\n                        \"code\": \"58322009\",\n                        \"display\": \"Expiration (observable entity)\",\n                        \"system\": \"http://snomed.info/sct\"\n                    }\n                ]\n            }\n        },\n        {\n            \"url\": \"http://example.org/fhir/StructureDefinition/FinnishPHRSpirometryBreathQualityExtension\",\n            \"valueCodeableConcept\": {\n                \"coding\": [\n                    {\n                        \"code\": \"49727002\",\n                        \"display\": \"Cough\",\n                        \"system\": \"http://snomed.info/sct\"\n                    }\n                ]\n            }\n        },\n        {\n            \"url\": \"http://example.org/fhir/StructureDefinition/FinnishPHRSpirometryBreathQualityExtension\",\n            \"valueCodeableConcept\": {\n                \"coding\": [\n                    {\n                        \"code\": \"code for Early termination (not defined yet)\",\n                        \"display\": \"Early termination\",\n                        \"system\": \"system for Early termination (not defined yet)\"\n                    }\n                ]\n            }\n        }\n    ],</code></p>",
        "id": 197241520,
        "sender_full_name": "Lauri Karppinen",
        "timestamp": 1589268940
    },
    {
        "content": "<p>Having each breath as a separate Observation with the panel pointing to each via hasMember is fine.  However, for each breath, each aspect should absolutely be captured as a component.  Using extensions is always less preferred than component if component applies, and that's what would certainly hold here.</p>",
        "id": 197327886,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1589312478
    }
]