[
    {
        "content": "<p>Search (<a href=\"https://www.hl7.org/fhir/search.html\" target=\"_blank\" title=\"https://www.hl7.org/fhir/search.html\">https://www.hl7.org/fhir/search.html</a>) doesn't seem to allow searching by version id, does it make sense to support version aware conditional update/patch?</p>",
        "id": 153979707,
        "sender_full_name": "Jie Fan",
        "timestamp": 1533047307
    },
    {
        "content": "<p>In what situations would a decision to apply an update/patch be based on a version of a resource other than the current one?</p>",
        "id": 153979708,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1533047731
    },
    {
        "content": "<p>E.g. there are multiple clients</p>",
        "id": 153979715,
        "sender_full_name": "Jie Fan",
        "timestamp": 1533049293
    },
    {
        "content": "<p>I understand how there can be colliding updates.  I don't understand why the decision on apply changes would not be driven by the most recent version of the artifact</p>",
        "id": 153979721,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1533051750
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"195841\">@Jie Fan</span>  are you referring to the version concurrency aspect: <a href=\"http://hl7.org/fhir/stu3/http.html#concurrency\" target=\"_blank\" title=\"http://hl7.org/fhir/stu3/http.html#concurrency\">http://hl7.org/fhir/stu3/http.html#concurrency</a></p>",
        "id": 153979751,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1533057181
    },
    {
        "content": "<p>If so, yes, you can use if-match on patch</p>",
        "id": 153979752,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1533057192
    },
    {
        "content": "<p>We specifically tested this during our connectathon tracks</p>",
        "id": 153979753,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1533057213
    },
    {
        "content": "<p>That is different than a Conditional Update or Conditional Patch (see <a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17256\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=17256\">GF#17256</a> for some clarification on behavior for Patch specifically)</p>",
        "id": 153979754,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1533057256
    },
    {
        "content": "<p>Though perhaps we need to call out the concurrency support for patch specifically??</p>",
        "id": 153979755,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1533057280
    },
    {
        "content": "<p>Yes, I should have clarified that :)</p>\n<p>I understand that If-Match is supported for Patch, however, should it also be supported for Conditional Patch as well (or are they considered the same operation)? My understand is that Conditional Patch would face the issues which If-Match tries to solve (e.g. race conditions), so we would need If-Match support as well.</p>",
        "id": 153979764,
        "sender_full_name": "Jie Fan",
        "timestamp": 1533057741
    },
    {
        "content": "<p>If-Match makes sense.  Why would that be on historical versions?</p>",
        "id": 153979792,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1533062821
    },
    {
        "content": "<p>Oh, I don't think that would be on historical versions. I meant if search supported version id, then a client might be able to get around by searching for current version's id for conditional update/patch.</p>",
        "id": 153979816,
        "sender_full_name": "Jie Fan",
        "timestamp": 1533066521
    },
    {
        "content": "<p>I just explicitly added a comment that if-match works on patch to the current build</p>",
        "id": 153979832,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1533068230
    },
    {
        "content": "<p>With conditional updates, you do either an ETAG match or a timestamp match.  You don't need to do a version-based search.</p>",
        "id": 153979850,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1533069859
    },
    {
        "content": "<p>How do you know the version but not the id? And if you know the id, why do a conditional update / patch and not a normal one?</p>",
        "id": 153980099,
        "sender_full_name": "Christiaan Knaap",
        "timestamp": 1533112964
    }
]