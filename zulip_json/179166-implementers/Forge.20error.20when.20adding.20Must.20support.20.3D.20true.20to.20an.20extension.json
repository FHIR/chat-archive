[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191336\">@Michel Rutten</span>  when setting \"Must support\" to be true on an extension  ie \"accuracyIndicator\" refer to:<br>\n<a href=\"/user_uploads/10155/g12nnXkXf_z02GlDZkxcW14I/CIFMM-1261-no-must-support-20180404.JPG\" target=\"_blank\" title=\"CIFMM-1261-no-must-support-20180404.JPG\">CIFMM-1261-no-must-support-20180404.JPG</a> <br>\nand then save the change, Forge gives the following error when you try to re-open the file:</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/g12nnXkXf_z02GlDZkxcW14I/CIFMM-1261-no-must-support-20180404.JPG\" target=\"_blank\" title=\"CIFMM-1261-no-must-support-20180404.JPG\"><img src=\"/user_uploads/10155/g12nnXkXf_z02GlDZkxcW14I/CIFMM-1261-no-must-support-20180404.JPG\"></a></div><p><a href=\"/user_uploads/10155/ferF86v-NiAnm2M97IkPjScN/CIFMM-1261-must-support-20180404.JPG\" target=\"_blank\" title=\"CIFMM-1261-must-support-20180404.JPG\">CIFMM-1261-must-support-20180404.JPG</a> <br>\nThe presence of the following code gives the error :</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/ferF86v-NiAnm2M97IkPjScN/CIFMM-1261-must-support-20180404.JPG\" target=\"_blank\" title=\"CIFMM-1261-must-support-20180404.JPG\"><img src=\"/user_uploads/10155/ferF86v-NiAnm2M97IkPjScN/CIFMM-1261-must-support-20180404.JPG\"></a></div><div class=\"codehilite\"><pre><span></span>    &lt;element id=&quot;Patient.deceased[x].deceased[x]:deceasedDateTime.extension:accuracyIndicator&quot;&gt;\n      &lt;path value=&quot;Patient.deceasedDateTime.extension&quot; /&gt;\n      &lt;sliceName value=&quot;accuracyIndicator&quot; /&gt;\n      &lt;mustSupport value=&quot;true&quot; /&gt;\n    &lt;/element&gt;\n</pre></div>\n\n\n<p>Any suggestions on how to resolve this or is it a bug?  Thanks for your assistance.</p>",
        "id": 153950422,
        "sender_full_name": "David McKillop",
        "timestamp": 1522808460
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191336\">@Michel Rutten</span>  further to the above - it seems that when there is a \"choice\" data element rather than an extension that is the issue - refer to the attached where birthDate.accuracyIndicator has \"Must support\" = true and doesn't cause an error; where as when deceased[x].deceasedDateTime.accuracyIndicator has \"Must support\" = true this causes an error when re-opening the file.<br>\nYour thoughts?<a href=\"/user_uploads/10155/CPT1qJDE91BiJXo2nXKSF3Sw/CIFMM-1261-choice-20180404.JPG\" target=\"_blank\" title=\"CIFMM-1261-choice-20180404.JPG\">CIFMM-1261-choice-20180404.JPG</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/CPT1qJDE91BiJXo2nXKSF3Sw/CIFMM-1261-choice-20180404.JPG\" target=\"_blank\" title=\"CIFMM-1261-choice-20180404.JPG\"><img src=\"/user_uploads/10155/CPT1qJDE91BiJXo2nXKSF3Sw/CIFMM-1261-choice-20180404.JPG\"></a></div>",
        "id": 153950486,
        "sender_full_name": "David McKillop",
        "timestamp": 1522819076
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"192323\">@David McKillop</span>, could you please send me the extension profile, so I can try to reproduce?</p>",
        "id": 153950522,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1522828930
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191336\">@Michel Rutten</span> ,  our patient profile is derived from an HL7 Australia profile (<span class=\"user-mention\" data-user-id=\"191368\">@Brett Esler</span> )  which includes the extension for date accuracy indicator which can be found at:<br>\n<a href=\"https://github.com/hl7au/au-fhir-base/blob/master/resources/structuredefinition-date-accuracy-indicator.xml\" target=\"_blank\" title=\"https://github.com/hl7au/au-fhir-base/blob/master/resources/structuredefinition-date-accuracy-indicator.xml\">https://github.com/hl7au/au-fhir-base/blob/master/resources/structuredefinition-date-accuracy-indicator.xml</a><br>\nIf you need any further information, please let me know.<br>\nThanks for your assistance with this - greatly appreciated.</p>",
        "id": 153950777,
        "sender_full_name": "David McKillop",
        "timestamp": 1522881508
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191336\">@Michel Rutten</span>  further to the previous information, when \"Must support\" is set to true on the element deceased.date-accuracy-indicator   the IG Publisher runs and produces the desired output - refer to the attached:<br>\n<a href=\"/user_uploads/10155/Iw0uvqf8WgNXIV2sI2gYebHK/CIFMM-1261-all-must-support-20180405.JPG\" target=\"_blank\" title=\"CIFMM-1261-all-must-support-20180405.JPG\">CIFMM-1261-all-must-support-20180405.JPG</a> <br>\nthe issue is that Forge gives the error when trying to re-open the file.  I hope this helps.</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/Iw0uvqf8WgNXIV2sI2gYebHK/CIFMM-1261-all-must-support-20180405.JPG\" target=\"_blank\" title=\"CIFMM-1261-all-must-support-20180405.JPG\"><img src=\"/user_uploads/10155/Iw0uvqf8WgNXIV2sI2gYebHK/CIFMM-1261-all-must-support-20180405.JPG\"></a></div>",
        "id": 153950847,
        "sender_full_name": "David McKillop",
        "timestamp": 1522908020
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"192323\">@David McKillop</span>, I created a Patient profile with type slice on deceased[x], then added accuracy extension to deceasedDateTime slice and enabled MustSupport. I cannot seem to reproduce the issue (using latest Forge release 18.2.1), Forge re-loads the profile without any warnings:<br>\n<a href=\"/user_uploads/10155/kNdsOG_HDrahsu6hNvlT0Sh5/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a> <br>\nHere's the generated profile xml:</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/kNdsOG_HDrahsu6hNvlT0Sh5/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/kNdsOG_HDrahsu6hNvlT0Sh5/pasted_image.png\"></a></div><div class=\"codehilite\"><pre><span></span>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;StructureDefinition xmlns=&quot;http://hl7.org/fhir&quot;&gt;\n  &lt;url value=&quot;http://example.org/fhir/StructureDefinition/PatientWithDeceasedExtension&quot; /&gt;\n  &lt;name value=&quot;PatientWithDeceasedExtension&quot; /&gt;\n  &lt;status value=&quot;draft&quot; /&gt;\n  &lt;fhirVersion value=&quot;3.0.1&quot; /&gt;\n  &lt;kind value=&quot;resource&quot; /&gt;\n  &lt;abstract value=&quot;false&quot; /&gt;\n  &lt;type value=&quot;Patient&quot; /&gt;\n  &lt;baseDefinition value=&quot;http://hl7.org/fhir/StructureDefinition/Patient&quot; /&gt;\n  &lt;derivation value=&quot;constraint&quot; /&gt;\n  &lt;differential&gt;\n    &lt;element id=&quot;Patient.deceased[x]&quot;&gt;\n      &lt;path value=&quot;Patient.deceased[x]&quot; /&gt;\n      &lt;slicing&gt;\n        &lt;discriminator&gt;\n          &lt;type value=&quot;type&quot; /&gt;\n          &lt;path value=&quot;$this&quot; /&gt;\n        &lt;/discriminator&gt;\n        &lt;rules value=&quot;open&quot; /&gt;\n      &lt;/slicing&gt;\n    &lt;/element&gt;\n    &lt;element id=&quot;Patient.deceased[x]:deceasedBoolean&quot;&gt;\n      &lt;path value=&quot;Patient.deceased[x]&quot; /&gt;\n      &lt;sliceName value=&quot;deceasedBoolean&quot; /&gt;\n      &lt;type&gt;\n        &lt;code value=&quot;boolean&quot; /&gt;\n      &lt;/type&gt;\n    &lt;/element&gt;\n    &lt;element id=&quot;Patient.deceased[x]:deceasedDateTime&quot;&gt;\n      &lt;path value=&quot;Patient.deceased[x]&quot; /&gt;\n      &lt;sliceName value=&quot;deceasedDateTime&quot; /&gt;\n      &lt;type&gt;\n        &lt;code value=&quot;dateTime&quot; /&gt;\n      &lt;/type&gt;\n    &lt;/element&gt;\n    &lt;element id=&quot;Patient.deceased[x]:deceasedDateTime.extension&quot;&gt;\n      &lt;path value=&quot;Patient.deceased[x].extension&quot; /&gt;\n      &lt;slicing&gt;\n        &lt;discriminator&gt;\n          &lt;type value=&quot;value&quot; /&gt;\n          &lt;path value=&quot;url&quot; /&gt;\n        &lt;/discriminator&gt;\n        &lt;rules value=&quot;open&quot; /&gt;\n      &lt;/slicing&gt;\n    &lt;/element&gt;\n    &lt;element id=&quot;Patient.deceased[x]:deceasedDateTime.extension:accuracy&quot;&gt;\n      &lt;path value=&quot;Patient.deceased[x].extension&quot; /&gt;\n      &lt;sliceName value=&quot;accuracy&quot; /&gt;\n      &lt;type&gt;\n        &lt;code value=&quot;Extension&quot; /&gt;\n        &lt;profile value=&quot;http://hl7.org.au/fhir/StructureDefinition/date-accuracy-indicator&quot; /&gt;\n      &lt;/type&gt;\n      &lt;mustSupport value=&quot;true&quot; /&gt;\n    &lt;/element&gt;\n  &lt;/differential&gt;\n&lt;/StructureDefinition&gt;\n</pre></div>\n\n\n<p>Note: in your post above, you mention an element with path \"Patient.deceased[x].deceased[x]:deceasedDateTime.extension:accuracyIndicator\", however this path is incorrect; the \"deceased[x]\" segment should not be repeating. Maybe this is causing the reported issues?</p>",
        "id": 153951428,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1523266879
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191336\">@Michel Rutten</span>  - thanks for looking into this.  In your testing above the \"Must support\" flag = true is only on \"Patient.deceased[x]:deceasedDateTime.extension:accuracy\".   I've forwarded you 2 emails of some of the troubleshooting that's been done when all of the data elements in the :deceased[x]\" group with/without Patient.deceased[x]:deceasedDateTime.extension:accuracy are flagged with Must support  =true.  I hope this helps.<br>\nCheers D. Mc</p>",
        "id": 153951590,
        "sender_full_name": "David McKillop",
        "timestamp": 1523329883
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"192323\">@David McKillop</span>, thank you for reporting this issue and providing useful feedback. I've analyzed the issue and responded via e-mail.</p>",
        "id": 153951656,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1523372711
    }
]