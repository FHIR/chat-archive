[
    {
        "content": "<p>We have a requirement to implement two count of record totals. Currently the only way which we have considered doing this is by adding two extensions to our models (although we are still in the process of considering which resource we should extend). I attach two possible design options. I would really appreciate advice on</p>\n<ol>\n<li>Which of the designs attached appears the best of the two.</li>\n<li>Are there any generic ways in FHIR which can be used to model a total or count which I may not be aware of ?<br>\nMany thanks in advance for assistance with this.<br>\n<a href=\"/user_uploads/10155/PbZ8rUw2MDzvaOyRkOzireqO/CP-IS-DesignOptions1.jpg\">CP-IS-DesignOptions1.jpg</a> <br>\n<a href=\"/user_uploads/10155/ZefRS7qnDFfTmap_tjfrbSwS/CP-IS-DesignOptions2.jpg\">CP-IS-DesignOptions2.jpg</a><div class=\"message_inline_image\"><a href=\"/user_uploads/10155/PbZ8rUw2MDzvaOyRkOzireqO/CP-IS-DesignOptions1.jpg\" title=\"CP-IS-DesignOptions1.jpg\"><img src=\"/user_uploads/10155/PbZ8rUw2MDzvaOyRkOzireqO/CP-IS-DesignOptions1.jpg\"></a></div><div class=\"message_inline_image\"><a href=\"/user_uploads/10155/ZefRS7qnDFfTmap_tjfrbSwS/CP-IS-DesignOptions2.jpg\" title=\"CP-IS-DesignOptions2.jpg\"><img src=\"/user_uploads/10155/ZefRS7qnDFfTmap_tjfrbSwS/CP-IS-DesignOptions2.jpg\"></a></div></li>\n</ol>",
        "id": 228387898,
        "sender_full_name": "Katie Wheatley",
        "timestamp": 1614681638
    },
    {
        "content": "<p>To me count is relevant 'upon disclosure' / 'upon communication', so Bundle (which already has a total data element), or perhaps AuditEvent (if you're not using a bundle) would be the best candidates for an extension.</p>",
        "id": 228414504,
        "sender_full_name": "Ren√© Spronk",
        "timestamp": 1614694032
    },
    {
        "content": "<p>Can you explain more about what the total covers?</p>",
        "id": 228421861,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1614696631
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> <a href=\"#narrow/stream/179166-implementers/topic/Implementation.20of.20.22totals.22.20or.20.22counts.22.20in.20FHIR/near/228421861\">said</a>:</p>\n<blockquote>\n<p>Can you explain more about what the total covers?</p>\n</blockquote>\n<p>The totals cover the total returned records (data aggregated from the AuditEvent(s)) and the total returned CarePlans (data aggregated from the CarePlans returned) for a given patient NHS number parameter.<br>\nThe background is that a Care professional is querying  a relevant database by Patient NHS number to determine a) who has previously queried the database for this NHS number b) how many CarePlans exist (with or without end dates) for the specified NHS number.</p>",
        "id": 228588580,
        "sender_full_name": "Katie Wheatley",
        "timestamp": 1614777298
    },
    {
        "content": "<p>If those can be expressed as searches (as they seem) you can simply use <code>_summary=count</code></p>",
        "id": 228595546,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1614780044
    },
    {
        "content": "<p>(<a href=\"https://www.hl7.org/fhir/search.html#summary-count\">https://www.hl7.org/fhir/search.html#summary-count</a>)</p>",
        "id": 228595793,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1614780128
    },
    {
        "content": "<p>Agree.  The first sounds like a search against AuditEvent - returning a count.  This wouldn't generally be a persisted value because it would be continuously changing.  The latter would be a search against CarePlan.  Those wouldn't change as often, but they'd still be dynamic.</p>",
        "id": 228603316,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1614782708
    },
    {
        "content": "<p>The focus of the search should be CarePlan, so total would be number of CarePlan's returned. We have a requirement to also return number of AuditEvents (counting them or a seperate API would be our preferred approach BUT.........)</p>",
        "id": 228610665,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1614785223
    }
]