[
    {
        "content": "<p>Hi. according to this,<br>\n<a href=\"/user_uploads/10155/6O2je1AxQZE4kXxaydHHGsp_/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/6O2je1AxQZE4kXxaydHHGsp_/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/6O2je1AxQZE4kXxaydHHGsp_/pasted_image.png\"></a></div>",
        "id": 169014073,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1561542542
    },
    {
        "content": "<p>shouldn't this be a valid payload? - one image (Attachment) and a text description (CodeableConcept)<br>\n \"payload\": [<br>\n    {<br>\n      \"contentAttachment\": {...},<br>\n    {<br>\n      \"contentCodeableConcept\": {<br>\n        \"text\": \"Keep Patient warm\"<br>\n      }<br>\n    }<br>\n  ]</p>",
        "id": 169014096,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1561542559
    },
    {
        "content": "<p>The R4 test server rejects it, not sure if it is the server or if this should not be allowed.</p>",
        "id": 169025431,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1561553278
    },
    {
        "content": "<p>You're missing a closing bracket following contentAttachment before the comma.</p>",
        "id": 169036188,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1561559708
    },
    {
        "content": "<p>aargh... correct, i did not copy-paste that here.</p>",
        "id": 169036799,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1561560044
    },
    {
        "content": "<p>my json syntax was correct in postman - i just made a mistake in copy-paste here</p>",
        "id": 169037115,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1561560110
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span>  &quot;payload&quot;: [\n    {\n      &quot;contentAttachment&quot;: {\n        &quot;contentType&quot;: &quot;image/jpeg&quot;,\n        &quot;data&quot;: &quot;/9j/.../Z&quot;,\n        &quot;title&quot;: &quot;keep warm.jpg&quot;,\n        &quot;creation&quot;: &quot;2010-02-01T11:50:23-05:00&quot;\n      }\n    },\n    {\n      &quot;contentCodeableConcept&quot;: {\n        &quot;text&quot;: &quot;Keep Patient warm&quot;\n      }\n    }\n  ]\n</pre></div>",
        "id": 169037204,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1561560139
    },
    {
        "content": "<p>this fails</p>",
        "id": 169037339,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1561560225
    },
    {
        "content": "<p>With what message?</p>",
        "id": 169038665,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1561561021
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span>{\n            &quot;severity&quot;: &quot;error&quot;,\n            &quot;code&quot;: &quot;structure&quot;,\n            &quot;details&quot;: {\n                &quot;text&quot;: &quot;Unrecognised prop \\&quot;contentCodeableConcept\\&quot; at line 49 col 8&quot;\n            },\n            &quot;location&quot;: [\n                &quot;/Communication/payload&quot;\n            ]\n        },\n</pre></div>",
        "id": 169048185,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1561567364
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span> {\n            &quot;severity&quot;: &quot;error&quot;,\n            &quot;code&quot;: &quot;invariant&quot;,\n            &quot;details&quot;: {\n                &quot;text&quot;: &quot;All FHIR elements must have a @value or children () hasValue() or (children().count() &gt; id.count())&quot;\n            },\n            &quot;location&quot;: [\n                &quot;Communication.payload[1]&quot;\n            ],\n            &quot;expression&quot;: [\n                &quot;Communication.payload[1] // line 48 col 6)&quot;\n            ]\n        },\n        {\n            &quot;severity&quot;: &quot;error&quot;,\n            &quot;code&quot;: &quot;structure&quot;,\n            &quot;details&quot;: {\n                &quot;text&quot;: &quot;Profile http://hl7.org/fhir/StructureDefinition/Communication, Element \\&quot;Communication.payload[1].content[x]\\&quot; (Communication.payload.content[x]): minimum required = 1, but only found 0&quot;\n            },\n            &quot;location&quot;: [\n                &quot;Communication.payload[1]&quot;\n            ],\n            &quot;expression&quot;: [\n                &quot;Communication.payload[1] // line 48 col 6)&quot;\n            ]\n        }\n</pre></div>",
        "id": 169048244,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1561567422
    },
    {
        "content": "<p>am i doing something wrong, or is the server ?</p>",
        "id": 169048317,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1561567473
    },
    {
        "content": "<p>CodeableConcept is new for R5.  The server is probably R4</p>",
        "id": 169049218,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1561568213
    },
    {
        "content": "<p>aaaahh. thanks</p>",
        "id": 169049531,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1561568423
    }
]