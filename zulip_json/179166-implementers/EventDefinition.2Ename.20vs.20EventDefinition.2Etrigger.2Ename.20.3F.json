[
    {
        "content": "<p><a href=\"https://www.hl7.org/fhir/eventdefinition.html\" target=\"_blank\" title=\"https://www.hl7.org/fhir/eventdefinition.html\">EventDefinition</a>'s name element is described as:</p>\n<blockquote>\n<p>Name for this event definition (computer friendly)</p>\n</blockquote>",
        "id": 164676358,
        "sender_full_name": "Isaac Vetter",
        "timestamp": 1556765934
    },
    {
        "content": "<p><a href=\"https://www.hl7.org/fhir/metadatatypes.html#TriggerDefinition\" target=\"_blank\" title=\"https://www.hl7.org/fhir/metadatatypes.html#TriggerDefinition\">EventDefinition.trigger</a>.name is described as</p>\n<blockquote>\n<p>Name or URI that identifies the event</p>\n</blockquote>",
        "id": 164676360,
        "sender_full_name": "Isaac Vetter",
        "timestamp": 1556765941
    },
    {
        "content": "<p>The <a href=\"https://www.hl7.org/fhir/eventdefinition-example.json.html\" target=\"_blank\" title=\"https://www.hl7.org/fhir/eventdefinition-example.json.html\">EventDefinition example</a> populates the <a href=\"http://EventDefinition.trigger.name\" target=\"_blank\" title=\"http://EventDefinition.trigger.name\">EventDefinition.trigger.name</a>, but not the <a href=\"http://EventDefinition.name\" target=\"_blank\" title=\"http://EventDefinition.name\">EventDefinition.name</a>.</p>",
        "id": 164676370,
        "sender_full_name": "Isaac Vetter",
        "timestamp": 1556765946
    },
    {
        "content": "<p>I'm hoping to grasp the metaphysics behind this -- when should these two names be different?</p>",
        "id": 164676371,
        "sender_full_name": "Isaac Vetter",
        "timestamp": 1556765948
    },
    {
        "content": "<p>/ <span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span> ?</p>",
        "id": 164676375,
        "sender_full_name": "Isaac Vetter",
        "timestamp": 1556765961
    },
    {
        "content": "<p>The <code>trigger</code> element of EventDefinition is a <code>TriggerDefinition</code>, which has a name because it's a self-contained definition of a triggering event. The EventDefinition is a Definition resource that reuses the TriggerDefinition data type to allow events to be referenced as resources directly, so it \"inherits\" the name element from the Definition pattern. I think in pratice, yes, they would always be the same. EventDefinition is still a draft resource.</p>",
        "id": 164681200,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1556773811
    },
    {
        "content": "<p>That would be a good tracker to submit to resolve the redundancy.</p>",
        "id": 164681213,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1556773866
    },
    {
        "content": "<p>Thinking more about this, the name element in the TriggerDefinition is used for named events, itâ€™s possible to define a data-based event or periodic event that does not have a name. When this type of trigger is used in an EventDefinition, it could be given a name for use by implementing systems.</p>",
        "id": 164683265,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1556777410
    },
    {
        "content": "<p>Can you help me understand why a TriggerDefinition isn't a resource, if it's designed to be individually identifiable (by standardized names) and re-usable across EventDefinitions <span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span> ?</p>",
        "id": 164709918,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1556805396
    },
    {
        "content": "<p>I'm especially confused given <a href=\"http://build.fhir.org/metadatatypes-definitions.html#TriggerDefinition.name\" target=\"_blank\" title=\"http://build.fhir.org/metadatatypes-definitions.html#TriggerDefinition.name\">TriggerDefinition.name</a>:</p>\n<blockquote>\n<p>A formal name for the event. This may be an absolute URI that identifies the event formally (e.g. from a trigger registry) ...</p>\n</blockquote>",
        "id": 164710416,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1556805767
    },
    {
        "content": "<p>I submitted <a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=21232\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=21232\">GF#21232</a> to start exploring some of this.</p>",
        "id": 164711836,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1556806823
    },
    {
        "content": "<p>When TriggerDefinition is used within PlanDefinition, it's referencing an event defined elsewhere. When it's used as part of EventDefinition, it's actually defining the event. Multiple PlanDefinitions, for example, might reference \"patient-view\" as a named event, where that event is defined by the CDS Hooks registry.</p>",
        "id": 164711892,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1556806874
    },
    {
        "content": "<p>Wait, TriggerDefinintion references an EventDefinition which references a list of TriggerDefinitions ??</p>",
        "id": 164711996,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1556806940
    },
    {
        "content": "<p>(I'm trying to figure out how to build up an event stream from multiple kinds of source events -- each defined in a reusable, modular way -- and then a set of filters, also defined in a reusable, modular way. My <a href=\"https://gist.github.com/jmandel/f57fda6ce92174af663abe13cbb4612e#the-rules\" target=\"_blank\" title=\"https://gist.github.com/jmandel/f57fda6ce92174af663abe13cbb4612e#the-rules\">write-up here</a> is probably revealing the way I'm struggling with the current infrastructure. Is there a better approach you'd recommend for these subscription use cases? Discussion in <a href=\"#narrow/stream/179229-subscriptions/topic/Event.20Definition\" title=\"#narrow/stream/179229-subscriptions/topic/Event.20Definition\">https://chat.fhir.org/#narrow/stream/179229-subscriptions/topic/Event.20Definition</a>)</p>",
        "id": 164712252,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1556807103
    },
    {
        "content": "<p>I think of TriggerDefinition as a structure for defining when something should happen, like \"when a lab is created\". You can use that criteria definition in both a referential and a definitional context. In PlanDefinition, it's a referential context, in EventDefinition, it's a definitional context. And yes, you can have multiple in EventDefinition so that we can support triggering off of multiple events.</p>",
        "id": 164713145,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1556807708
    },
    {
        "content": "<p>That's a great write-up, I've been following that, I think it's a good approach and it seems like the right use of the EventDefinition resource.</p>",
        "id": 164713319,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1556807815
    },
    {
        "content": "<p>...but it also assumes a new thing like EventFilter -- and it kind of pushes TriggerDefinition down into the details, so it's not a unit of reusability. This is the stuff I'm struggling with.</p>",
        "id": 164713441,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1556807885
    },
    {
        "content": "<p>TriggerDefinition should probably be called TriggerCriteria.</p>",
        "id": 164714092,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1556808312
    },
    {
        "content": "<p>But should it be a resource?</p>",
        "id": 164714423,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1556808539
    },
    {
        "content": "<p>That's what EventDefinition is</p>",
        "id": 164714471,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1556808587
    },
    {
        "content": "<p>TriggerDefinition is reusing the \"structure\" in FHIR, but not the instances.</p>",
        "id": 164714571,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1556808638
    },
    {
        "content": "<p>To reuse the instance, it has to be a resource, so that's why we created EventDefinition</p>",
        "id": 164714620,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1556808681
    },
    {
        "content": "<p>I'm struggling because TriggerDefinition has a name (critical for named-events), and the concept of a registry of TriggerDefinitions -- but that registry couldn't be an actual FHIR registry since it's not a resource.</p>",
        "id": 164714719,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1556808738
    },
    {
        "content": "<p>I might not be expressing the concern clearly...</p>",
        "id": 164714748,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1556808766
    },
    {
        "content": "<p>No, it makes sense, and there's definitely room for improvement in the documentation to help address this, but what you just said \"has a name\" and \"the concept of registry\" is already true of EventDefinition</p>",
        "id": 164714822,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1556808833
    },
    {
        "content": "<p>OK, but this doesn't feel like a documentation issue to me; it feels like an issue about \"what concepts do we have in the spec, and how are they related/reusable\".</p>",
        "id": 164714917,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1556808883
    },
    {
        "content": "<p>Anyway, maybe a good subject for discussion next week :)</p>",
        "id": 164714932,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1556808892
    },
    {
        "content": "<p>Yes, would definitely be a good topic</p>",
        "id": 164714973,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1556808929
    },
    {
        "content": "<p>Simplest problem statement: A PlanDefinition and an EventDefinition can't share the same TriggerDefinition (like \"patient-admission\") -- except by duplicating the whole definition.</p>",
        "id": 164714999,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1556808958
    },
    {
        "content": "<p>Yeah, that's true, good statement, you should capture that in the tracker</p>",
        "id": 164715457,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1556809250
    }
]