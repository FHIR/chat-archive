[
    {
        "content": "<p>We are using HAPI FHIR Server version: 5.4.1.1 and fhirVersion:4.0.1 <br>\nI am trying to implement the ‘near’ search parameter for looking up Location resources.<br>\nCurrently, when I look up the Location directly, example: [base]/ Location?near=-77.043167|38.904011|3|mi , it returns the results accurately.<br>\nBut if I try to look up the same resource as a reference within ‘HealthcareService’ it doesn’t return the result. To be clear I have posted the ‘HealthcareService’ resource where the said ‘Location’ resource is referenced in HealthcareService.location.</p>\n<p>The queries I used:<br>\n[base]/Healthcare?location.near=-77.043167|38.904011|2.5|mi<br>\n{<br>\n    \"resourceType\": \"Bundle\",<br>\n    \"id\": \"e6f11de6-5687-44a4-b60e-ec292704551b\",<br>\n    \"meta\": {<br>\n        \"lastUpdated\": \"2021-10-14T17:06:39.596-07:00\"<br>\n    },<br>\n    \"type\": \"searchset\",<br>\n    \"total\": 0,<br>\n    \"link\": [<br>\n        {<br>\n            \"relation\": \"self\",</p>\n<p>[base]/HealthcareService?location:near=-77.043167|38.904011|2.5|mi<br>\n{<br>\n    \"resourceType\": \"Bundle\",<br>\n    \"id\": \"8385e848-52f4-4ecb-81f5-3980417187f3\",<br>\n    \"meta\": {<br>\n        \"lastUpdated\": \"2021-10-14T17:12:28.276-07:00\"<br>\n    },<br>\n    \"type\": \"searchset\",<br>\n    \"total\": 0,<br>\n    \"link\": [<br>\n        {<br>\n            \"relation\": \"self\",</p>\n<p>[base]/ Location?_has:HealthcareService:location:_has:near=38.904011|-77.043167|5|mi<br>\n    \"resourceType\": \"OperationOutcome\",<br>\n    \"issue\": [<br>\n        {<br>\n            \"severity\": \"error\",<br>\n            \"code\": \"processing\",<br>\n            \"diagnostics\": \"Invalid _has parameter syntax: :near\"<br>\n        }<br>\n    ]<br>\n}</p>\n<p>So is this a case where there is no parameter available to support this query in such a scenario? Or is it a HAPI FHIR Server limitation? Or is this a case of using poor syntax?<br>\nCan you please shed light on this and suggest the right way to execute this query?<br>\n<span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> <span class=\"user-mention\" data-user-id=\"191367\">@Brian Postlethwaite</span></p>",
        "id": 257627189,
        "sender_full_name": "Tushar Nair",
        "timestamp": 1634257002
    },
    {
        "content": "<p>Sounds like a question for the HAPI folks, I'd suggest asking over in the HAPI stream. Maybe they aren't supporting near via chaining.</p>",
        "id": 257627549,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1634257316
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191367\">@Brian Postlethwaite</span>  thank you! I will post it in HAPI stream.  So fundamentally the query [base]/Healthcare?location.near=-77.043167|38.904011|2.5|mi is ok? </p>\n<div class=\"codehilite\"><pre><span></span><code>\n</code></pre></div>",
        "id": 257628060,
        "sender_full_name": "Tushar Nair",
        "timestamp": 1634257722
    },
    {
        "content": "<p>I believe so</p>",
        "id": 257628101,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1634257774
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191367\">@Brian Postlethwaite</span> thank you!!!</p>",
        "id": 257628461,
        "sender_full_name": "Tushar Nair",
        "timestamp": 1634258058
    }
]