[
    {
        "content": "<p>When making a slice on a choice element what is the correct path (for example on an effective[x] which has an effectiveDateTime or effectivePeriod)?<br>\nShould it be for the effectiveDateTime slice of effective[x]?<br>\n&lt;path value=\"Observation.effective[x]\" /&gt;<br>\nor<br>\n&lt;path value=\"Observation.effectiveDateTime\" /&gt;</p>\n<p>then<br>\n&lt;path value=\"Observation.effective[x]\" /&gt;<br>\nor<br>\n&lt;path value=\"Observation.effectivePeriod\" /&gt;</p>\n<p>Thus is this correct (the element ids are just for me to keep track of where I am and there values are not relevant):</p>\n<div class=\"codehilite\"><pre><span></span>  &lt;element id=&quot;Observation.effective[x]&quot;&gt;\n    &lt;path value=&quot;Observation.effective[x]&quot; /&gt;\n    &lt;slicing&gt;\n      &lt;discriminator&gt;\n        &lt;type value=&quot;exists&quot; /&gt;\n        &lt;path value=&quot;start&quot; /&gt;\n      &lt;/discriminator&gt;\n      &lt;rules value=&quot;open&quot; /&gt;\n    &lt;/slicing&gt;\n    &lt;definition value=&quot;The time or time-period the observed value is asserted as being true. It is a time period if a Measurement-Duration attribute is part of the metric measurement sent by the PHD. Otherwise it is the time stamp sent by the PHD or the time of reception by the PHG if the PHD sent no time stamp.&quot; /&gt;\n    &lt;min value=&quot;1&quot; /&gt;\n  &lt;/element&gt;\n  &lt;element id=&quot;Observation.effective[x]:dateTimeEffective&quot;&gt;\n    &lt;path value=&quot;Observation.effective[x]&quot; /&gt;\n   &lt;sliceName value=&quot;dateTimeEffective&quot; /&gt;\n    &lt;comment value=&quot;A date and time shall always be present.&quot; /&gt;\n    &lt;type&gt;\n      &lt;code value=&quot;dateTime&quot; /&gt;\n    &lt;/type&gt;\n  &lt;/element&gt;\n  &lt;element&gt;\n    &lt;path value=&quot;Observation.effective[x]&quot; /&gt;\n    &lt;sliceName value=&quot;periodEffective&quot; /&gt;\n    &lt;type&gt;\n      &lt;code value=&quot;Period&quot; /&gt;\n    &lt;/type&gt;\n  &lt;/element&gt;\n  &lt;element id=&quot;Observation.effective[x]:periodEffective.start&quot;&gt;\n    &lt;path value=&quot;Observation.effective[x].start&quot; /&gt;\n    &lt;min value=&quot;1&quot; /&gt;\n  &lt;/element&gt;\n  &lt;element id=&quot;Observation.effective[x]:periodEffective.end&quot;&gt;\n    &lt;path value=&quot;Observation.effective[x].end&quot; /&gt;\n    &lt;min value=&quot;1&quot; /&gt;\n  &lt;/element&gt;\n</pre></div>\n\n\n<p>or is this correct</p>\n<div class=\"codehilite\"><pre><span></span>  &lt;element id=&quot;Observation.effective[x]&quot;&gt;\n    &lt;path value=&quot;Observation.effective[x]&quot; /&gt;\n    &lt;slicing&gt;\n      &lt;discriminator&gt;\n        &lt;type value=&quot;exists&quot; /&gt;\n        &lt;path value=&quot;start&quot; /&gt;\n      &lt;/discriminator&gt;\n      &lt;rules value=&quot;open&quot; /&gt;\n    &lt;/slicing&gt;\n    &lt;definition value=&quot;The time or time-period the observed value is asserted as being true. It is a time period if a Measurement-Duration attribute is part of the metric measurement sent by the PHD. Otherwise it is the time stamp sent by the PHD or the time of reception by the PHG if the PHD sent no time stamp.&quot; /&gt;\n    &lt;min value=&quot;1&quot; /&gt;\n  &lt;/element&gt;\n  &lt;element id=&quot;Observation.effective[x]:dateTimeEffective&quot;&gt;\n    &lt;path value=&quot;Observation.effectiveDateTime&quot; /&gt;\n   &lt;sliceName value=&quot;dateTimeEffective&quot; /&gt;\n    &lt;comment value=&quot;A date and time shall always be present.&quot; /&gt;\n    &lt;type&gt;\n      &lt;code value=&quot;dateTime&quot; /&gt;\n    &lt;/type&gt;\n  &lt;/element&gt;\n  &lt;element&gt;\n    &lt;path value=&quot;Observation.effectivePeriod&quot; /&gt;\n    &lt;sliceName value=&quot;periodEffective&quot; /&gt;\n    &lt;type&gt;\n      &lt;code value=&quot;Period&quot; /&gt;\n    &lt;/type&gt;\n  &lt;/element&gt;\n  &lt;element id=&quot;Observation.effective[x]:periodEffective.start&quot;&gt;\n    &lt;path value=&quot;Observation.effectivePeriod.start&quot; /&gt;\n    &lt;min value=&quot;1&quot; /&gt;\n  &lt;/element&gt;\n  &lt;element id=&quot;Observation.effective[x]:periodEffective.end&quot;&gt;\n    &lt;path value=&quot;Observation.effectivePeriod.end&quot; /&gt;\n    &lt;min value=&quot;1&quot; /&gt;\n  &lt;/element&gt;\n</pre></div>",
        "id": 153896930,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1500030452
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"192228\">@Brian Reinhold</span>, if you constrain a choice type (such as value[x]) to a single datatype, then you should rename the element (e.g. to valueInteger) by updating the element path.</p>",
        "id": 153896935,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1500039506
    },
    {
        "content": "<p>However the element id should always refer to the original element name (ending with \"[x]\").</p>",
        "id": 153896936,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1500039521
    },
    {
        "content": "<p>So your 2nd example is correct.</p>",
        "id": 153896937,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1500039541
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191336\">@Michel Rutten</span> Many times the element has no id. Does that matter? Forge doesn't seem to care.</p>\n<div class=\"codehilite\"><pre><span></span>\n</pre></div>",
        "id": 153896958,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1500056110
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"192228\">@Brian Reinhold</span>, in FHIR STU3, element ids are mandatory on all element definitions in both differential and snapshot.<br>\nForge can open profiles with missing element ids, as the tool itself does not depend on this information. Forge will automatically generate/complete all missing element ids.</p>",
        "id": 153897035,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1500282759
    },
    {
        "content": "<blockquote>\n<p>Hi <span class=\"user-mention\" data-user-id=\"192228\">@Brian Reinhold</span>, in FHIR STU3, element ids are mandatory on all element definitions in both differential and snapshot.<br>\nForge can open profiles with missing element ids, as the tool itself does not depend on this information. Forge will automatically generate/complete all missing element ids.</p>\n</blockquote>\n<p>Actually, that was one of the bugs on saving; the element ids were deleted. I've been editing them by hand but I wasn't sure of the exact format and Forge did not seem to care on loading.</p>",
        "id": 153897045,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1500288965
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"192228\">@Brian Reinhold</span>, indeed, the current Forge release has a bug concerning the generation of element ids. This will be fixed in the next release.</p>",
        "id": 153897046,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1500289951
    },
    {
        "content": "<blockquote>\n<p>So your 2nd example is correct.</p>\n</blockquote>\n<p>Forge gives me an error on this</p>\n<div class=\"codehilite\"><pre><span></span>    &lt;element id=&quot;Observation.effective[x]:periodEffective&quot;&gt;\n      &lt;path value=&quot;Observation.effectivePeriod&quot;/&gt;\n      &lt;sliceName value=&quot;periodEffective&quot;/&gt;\n      &lt;type&gt;\n        &lt;code value=&quot;Period&quot;/&gt;\n      &lt;/type&gt;\n      &lt;definition value=&quot;The time period when there is a Measurement-Duration attribute. The difference between the end and start fields is the \nvalue of the Measurement-Duration.&quot;/&gt;\n    &lt;/element&gt;\n    &lt;element id=&quot;Observation.effective[x]:periodEffective.start&quot;&gt;\n      &lt;path value=&quot;Observation.effectivePeriod.start&quot;/&gt;\n      &lt;min value=&quot;1&quot;/&gt;\n    &lt;/element&gt;\n</pre></div>\n\n\n<p>but not on this</p>\n<div class=\"codehilite\"><pre><span></span>    &lt;element id=&quot;Observation.effective[x]:periodEffective&quot;&gt;\n      &lt;path value=&quot;Observation.effective[x]&quot; /&gt;\n      &lt;sliceName value=&quot;periodEffective&quot; /&gt;\n      &lt;type&gt;\n        &lt;code value=&quot;Period&quot;/&gt;\n      &lt;/type&gt;\n      &lt;definition value=&quot;The time period when there is a Measurement-Duration attribute. The difference between the end and start fields is the \nvalue of the Measurement-Duration.&quot;/&gt;\n    &lt;/element&gt;\n    &lt;element id=&quot;Observation.effective[x]:periodEffective.start&quot;&gt;\n      &lt;path value=&quot;Observation.effective[x].start&quot; /&gt;\n      &lt;min value=&quot;1&quot; /&gt;\n    &lt;/element&gt;\n</pre></div>\n\n\n<p>is that a bug?</p>",
        "id": 153897070,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1500297177
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"192228\">@Brian Reinhold</span>, I'm aware of the reported issues concerning type slicing, haven't had time to investigate yet. But it's high on my TODO list. I'm planning to work on this for the upcoming new release.</p>",
        "id": 153897180,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1500365831
    }
]