[
    {
        "content": "<p>How does one check if a CapabilityStatement supports sort, for example sort by date for an Observation. Looking at Observation searchParams at <a href=\"http://hapi.fhir.org/baseR4/metadata#L15904\">hapi.fhir</a> it has date as a searchParam but how can one check if sort is applicable?<br>\nSimilarly trying to use _sort=-date for Observations with another fhir server results in the following OperationOutcome even though the CapabilityStatement also had date as a searchParam for Observation.</p>\n<div class=\"codehilite\"><pre><span></span><code>  {\n    &quot;resourceType&quot;: &quot;OperationOutcome&quot;,\n    &quot;issue&quot;: [\n      {\n        &quot;severity&quot;: &quot;information&quot;,\n        &quot;code&quot;: &quot;invalid&quot;,\n        &quot;details&quot;: {\n          &quot;coding&quot;: [\n            {\n              &quot;system&quot;: &quot;urn:oid&quot;,\n              &quot;code&quot;: &quot;&quot;,\n              &quot;display&quot;: &quot;Content invalid against the specification or a profile.&quot;\n            }\n          ],\n          &quot;text&quot;: &quot;Content invalid against the specification or a profile.&quot;\n        },\n        &quot;diagnostics&quot;: &quot;Unknown parameter: _SORT. Parameter has been ignored.&quot;\n      }\n    ]\n  }\n</code></pre></div>",
        "id": 268565330,
        "sender_full_name": "Corey Wen",
        "timestamp": 1642609719
    },
    {
        "content": "<p>If supported, _sort would be listed under <code>searchParam</code></p>",
        "id": 268568316,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1642610886
    },
    {
        "content": "<p>Currently I am working with Logica sandbox, and the CapabilityStatement does not have _sort listed anywhere. However, querying Observations with _sort=date still returns a sorted list of Observations by date, and without it, the list is unsorted. Is there something else that might indicate if _sort is supported, or did Logica sandbox just not put _'sort' under searchParam for Observations?</p>",
        "id": 269134455,
        "sender_full_name": "Corey Wen",
        "timestamp": 1643043045
    },
    {
        "content": "<p>I don't see a place in the CapabilityStatement to indicate _sort support. I can tell you from experience that _sort can be difficult to implement and I would not be surprised if many systems have limited support outside of common Resource attributes such as <a href=\"http://Resource.id\">Resource.id</a> and Resource.meta.lastUpdated.</p>",
        "id": 269137330,
        "sender_full_name": "Craig McClendon",
        "timestamp": 1643044166
    },
    {
        "content": "<p><code>CapabilityStatement.rest.resource.searchParam</code></p>\n<ul>\n<li>\n<p>Element Id:   CapabilityStatement.rest.resource.searchParam</p>\n</li>\n<li>\n<p>Definition:   <br>\nSearch parameters for implementations to support and/or make use of - either references to ones defined in the specification, or additional ones defined for/by the implementation.</p>\n</li>\n<li>\n<p>Cardinality:  0..*</p>\n</li>\n<li>Summary:  false</li>\n<li>Comments:    <br>\n<strong>The search parameters should include the control search parameters such as _sort, _count, etc. that also apply to this resource (though many will be listed at CapabilityStatement.rest.searchParam)</strong>. The behavior of some search parameters may be further described by other code or extension elements, or narrative within the capability statement or linked SearchParameter definitions.</li>\n</ul>",
        "id": 269163254,
        "sender_full_name": "Eric Haas",
        "timestamp": 1643053845
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> Could you explain what you mean? It seems your post suggests that if \"name\" is listed under searchParams, then _sort should apply to that resource on the name field, but unfortunately I'm not sure I quite fully understand.</p>",
        "id": 269315571,
        "sender_full_name": "Corey Wen",
        "timestamp": 1643140945
    },
    {
        "content": "<p>This is taken directly from the FHIR specification here:  <a href=\"http://build.fhir.org/structuredefinition-definitions.html\">http://build.fhir.org/structuredefinition-definitions.html</a></p>\n<p>and what it says is put <code>_sort</code> in  CapabilityStatement.rest.resource.searchParam for each resource type that uses it.</p>\n<p>for example like so:</p>\n<div class=\"codehilite\" data-code-language=\"YAML\"><pre><span></span><code><span class=\"nt\">rresourceType</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">CapabilityStatement</span><span class=\"w\"></span>\n<span class=\"c1\">#....</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"nt\">rest</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p p-Indicator\">-</span><span class=\"w\"> </span><span class=\"nt\">mode</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">server</span><span class=\"w\"></span>\n<span class=\"w\">      </span><span class=\"nt\">resource</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">type</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">Observation</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"nt\">searchParam</span><span class=\"p\">:</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"nt\">name</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">_sort</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"nt\">definition</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p p-Indicator\">&gt;-</span><span class=\"w\"></span>\n<span class=\"w\">              </span><span class=\"no\">http://hl7.org/fhir/SearchParameter/Resource-sort</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"nt\">type</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"l l-Scalar l-Scalar-Plain\">token</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"nt\">documentation</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p p-Indicator\">&gt;-</span><span class=\"w\"></span>\n<span class=\"w\">              </span><span class=\"no\">The server **SHALL** support  `_sort` for Observation so The client can indicate which order to return the results by using this parameter which can contain a comma-separated list of sort rules in priority order.  For example `GET [base]/Observation?_sort=status,-date,category`  See http://build.fhir.org/search.html#sort</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"c1\">#....</span><span class=\"w\"></span>\n</code></pre></div>",
        "id": 269327560,
        "sender_full_name": "Eric Haas",
        "timestamp": 1643146174
    }
]