[
    {
        "content": "<p>I started playing with dstu2 models and then realized we need to be on sdtu3. I switched my Patient Resource to use <code>org.hl7.fhir.dstu3.model.Patient</code> </p>\n<p>Here is how my servlet looks: </p>\n<div class=\"codehilite\"><pre><span></span>public class FhirApplication extends RestfulServer {\n\nprivate static final long serialVersionUID = 1L;\n\n/**\n * The initialize method is automatically called when the servlet is\n * starting up, so it can be used to configure the servlet to define\n * resource providers, or set up configuration, interceptors, etc.\n */\n@Override\nprotected void initialize() throws ServletException {\n    // Create a context, set the error handler and instruct\n      // the server to use it\n      FhirContext ctx = FhirContext.forDstu3();\n      ctx.setParserErrorHandler(new StrictErrorHandler());\n      setFhirContext(ctx);\n    /*\n     * The servlet defines any number of resource providers, and configures\n     * itself to use them by calling setResourceProviders()\n     */\n\n    List&lt;IServerInterceptor&gt; interceptors = new ArrayList&lt;IServerInterceptor&gt;();\n    BasicSecurityInterceptor bsi = new BasicSecurityInterceptor();\n    interceptors.add(bsi);\n    setInterceptors(interceptors);\n    List&lt;IResourceProvider&gt; resourceProviders = new ArrayList&lt;IResourceProvider&gt;();\n    resourceProviders.add(new PatientResourceProvider());\n    setResourceProviders(resourceProviders);\n}\n\n}\n</pre></div>\n\n\n<p>My <strong><code>PatientResouceProvider.java</code></strong> implements <code>ca.uhn.fhir.rest.server.IResourceProvider</code>. <br>\nWhat confused me a bit is that [here][1] it says that base for all resources is <code>org.hl7.fhir.instance.model.api.IBaseResource</code></p>\n<p>And when I try to run the server, I get this error:</p>\n<div class=\"codehilite\"><pre><span></span> Nested in javax.servlet.ServletException: Failed to initialize FHIR Restful server:\nca.uhn.fhir.context.ConfigurationException: Field &#39;div&#39; in type &#39;org.hl7.fhir.dstu3.model.Narrative&#39; is not a valid child type: class org.hl7.fhir.utilities.xhtml.XhtmlNode\n</pre></div>\n\n\n<p>Has anyone seen this error beofre? I haven't found anything online.<br>\nThank you!</p>\n<p>[1]: <a href=\"http://hapifhir.io/doc_dstu2.html#Using_the_DSTU3_Structures_in_Your_Application\" target=\"_blank\" title=\"http://hapifhir.io/doc_dstu2.html#Using_the_DSTU3_Structures_in_Your_Application\">http://hapifhir.io/doc_dstu2.html#Using_the_DSTU3_Structures_in_Your_Application</a> \"here\"</p>",
        "id": 153921969,
        "sender_full_name": "Slava Chabanov",
        "timestamp": 1511914386
    }
]