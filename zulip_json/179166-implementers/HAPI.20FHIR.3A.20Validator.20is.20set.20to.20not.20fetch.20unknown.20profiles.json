[
    {
        "content": "<p>Hi,</p>\n<p>I am currently setting up a HAPI FHIR Server (jpaserver-starter to be clear) which uses the Repository Validating Interceptor in order to validate its resources. Whenever I specifiy a profile in the meta of the requests body for which I require a validation I am getting the following error in my outcome:</p>\n<p>&lt;issue&gt;<br>\n        &lt;severity value=\"error\"/&gt;<br>\n        &lt;code value=\"processing\"/&gt;<br>\n        &lt;diagnostics value=\"Profile reference '<a href=\"https://fhir.kbv.de/StructureDefinition/KBV_PR_EAU_Condition_ICD|1.0.2\">https://fhir.kbv.de/StructureDefinition/KBV_PR_EAU_Condition_ICD|1.0.2</a>' has not been checked because it is unknown, and the validator is set to not fetch unknown profiles\"/&gt;<br>\n        &lt;location value=\"Condition.meta.profile[0]\"/&gt;<br>\n        &lt;location value=\"Line 1, Col 40\"/&gt;<br>\n    &lt;/issue&gt;</p>\n<p>I've set the following properties in AppProperties.java in order to overcome this (but I had no success so far):</p>\n<ul>\n<li>allow_external_references = true;</li>\n<li>enable_repository_validating_interceptor = true;</li>\n<li>refuse_to_fetch_third_party_urls = false;</li>\n<li>requests_enabled = true;</li>\n<li>responses_enabled = true;</li>\n</ul>\n<p>Has anybody in this community faced the same issue or does somebody know how i can set my validator to also fetch unknown profiles?</p>\n<p>Greetings :)</p>",
        "id": 258225919,
        "sender_full_name": "Jonas Franke",
        "timestamp": 1634660659
    },
    {
        "content": "<p>Probably best to ask on <a class=\"stream\" data-stream-id=\"179167\" href=\"/#narrow/stream/179167-hapi\">#hapi</a></p>",
        "id": 258245826,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1634667170
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"392601\">@Jonas Franke</span> please show your  application.yaml file</p>",
        "id": 258246885,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1634667543
    },
    {
        "content": "<p>It sounds like you havent installed the profiles/IG's</p>",
        "id": 258246961,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1634667574
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/JS5bfdv9TFLcVTaVVHcmeD4i/application.yaml\">application.yaml</a></p>\n<div class=\"codehilite\"><pre><span></span><code>spring:\n  datasource:\n    url: &#39;jdbc:h2:file:./target/database/h2&#39;\n    #url: jdbc:h2:mem:test_mem\n    username: sa\n    password: null\n    driverClassName: org.h2.Driver\n    max-active: 15\n\n    # database connection pool size\n    hikari:\n      maximum-pool-size: 10\n  jpa:\n    properties:\n      hibernate.format_sql: false\n      hibernate.show_sql: false\n#      hibernate.dialect: org.hibernate.dialect.h2dialect\n#      hibernate.hbm2ddl.auto: update\n#      hibernate.jdbc.batch_size: 20\n#      hibernate.cache.use_query_cache: false\n#      hibernate.cache.use_second_level_cache: false\n#      hibernate.cache.use_structured_entries: false\n#      hibernate.cache.use_minimal_puts: false\n###    These settings will enable fulltext search with lucene\n#      hibernate.search.enabled: true\n#      hibernate.search.backend.type: lucene\n#      hibernate.search.backend.analysis.configurer: ca.uhn.fhir.jpa.search.HapiLuceneAnalysisConfigurer\n#      hibernate.search.backend.directory.type: local-filesystem\n#      hibernate.search.backend.directory.root: target/lucenefiles\n#      hibernate.search.backend.lucene_version: lucene_current\n  batch:\n    job:\n      enabled: false\n  main:\n#    TODO 5.6.0 -&gt; Prevent duplicate bean definitions in the Spring batch config in HAPI: see:\n    allow-bean-definition-overriding: true\nhapi:\n  fhir:\n    ### This is the FHIR version. Choose between, DSTU2, DSTU3, R4 or R5\n    fhir_version: R4\n### enable to use the ApacheProxyAddressStrategy which uses X-Forwarded-* headers\n### to determine the FHIR server address\n#   use_apache_address_strategy: false\n### forces the use of the https:// protocol for the returned server address.\n### alternatively, it may be set using the X-Forwarded-Proto header.\n#   use_apache_address_strategy_https: false\n### enable to set the Server URL\n#    server_address: http://hapi.fhir.org/baseR4\n#    defer_indexing_for_codesystems_of_size: 101\n#    install_transitive_ig_dependencies: true\n#    implementationguides:\n###    example from registry (packages.fhir.org)\n#      swiss:\n#        name: swiss.mednet.fhir\n#        version: 0.8.0\n#      example not from registry\n#      ips_1_0_0:\n#        url: https://build.fhir.org/ig/HL7/fhir-ips/package.tgz\n#        name: hl7.fhir.uv.ips\n#        version: 1.0.0\n#    supported_resource_types:\n#      - Patient\n#      - Observation\n#    allow_cascading_deletes: true\n#    allow_contains_searches: true\n    allow_external_references: true\n#    allow_multiple_delete: true\n#    allow_override_default_search_params: true\n#    auto_create_placeholder_reference_targets: false\n#    cql_enabled: true\n#    default_encoding: JSON\n#    default_pretty_print: true\n#    default_page_size: 20\n#    delete_expunge_enabled: true\n    enable_repository_validating_interceptor: true\n#    enable_index_missing_fields: false\n#    enable_index_contained_resource: false\n#    enforce_referential_integrity_on_delete: false\n#    enforce_referential_integrity_on_write: false\n#    etag_support_enabled: true\n#    expunge_enabled: true\n#    daoconfig_client_id_strategy: null\n#    client_id_strategy: ALPHANUMERIC\n#    fhirpath_interceptor_enabled: false\n#    filter_search_enabled: true\n#    graphql_enabled: true\n#    narrative_enabled: true\n#    mdm_enabled: true\n#    partitioning:\n#      allow_references_across_partitions: false\n#      partitioning_include_in_search_hashes: false\n    cors:\n      allow_Credentials: true\n      # These are allowed_origin patterns, see: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/cors/CorsConfiguration.html#setAllowedOriginPatterns-java.util.List-\n      allowed_origin:\n        - &#39;*&#39;\n\n    # Search coordinator thread pool sizes\n    search-coord-core-pool-size: 20\n    search-coord-max-pool-size: 100\n    search-coord-queue-capacity: 200\n\n#    logger:\n#      error_format: &#39;ERROR - ${requestVerb} ${requestUrl}&#39;\n#      format: &gt;-\n#        Path[${servletPath}] Source[${requestHeader.x-forwarded-for}]\n#        Operation[${operationType} ${operationName} ${idOrResourceName}]\n#        UA[${requestHeader.user-agent}] Params[${requestParameters}]\n#        ResponseEncoding[${responseEncodingNoDefault}]\n#      log_exceptions: true\n#      name: fhirtest.access\n#    max_binary_size: 104857600\n#    max_page_size: 200\n#    retain_cached_searches_mins: 60\n#    reuse_cached_search_results_millis: 60000\n    tester:\n        home:\n          name: Local Tester\n          server_address: &#39;http://localhost:8080/fhir&#39;\n          refuse_to_fetch_third_party_urls: false\n          fhir_version: R4\n        global:\n          name: Global Tester\n          server_address: &quot;http://hapi.fhir.org/baseR4&quot;\n          refuse_to_fetch_third_party_urls: false\n          fhir_version: R4\n    validation:\n      requests_enabled: true\n      responses_enabled: true\n#    binary_storage_enabled: true\n#    bulk_export_enabled: true\n#    subscription:\n#      resthook_enabled: true\n#      websocket_enabled: false\n#      email:\n#        from: some@test.com\n#        host: google.com\n#        port:\n#        username:\n#        password:\n#        auth:\n#        startTlsEnable:\n#        startTlsRequired:\n#        quitWait:\n#    lastn_enabled: true\n###  This is configuration for normalized quantity serach level default is 0\n###   0: NORMALIZED_QUANTITY_SEARCH_NOT_SUPPORTED - default\n###   1: NORMALIZED_QUANTITY_STORAGE_SUPPORTED\n###   2: NORMALIZED_QUANTITY_SEARCH_SUPPORTED\n#    normalized_quantity_search_level: 2\n#elasticsearch:\n#  debug:\n#    pretty_print_json_log: false\n#    refresh_after_write: false\n#  enabled: false\n#  password: SomePassword\n#  required_index_status: YELLOW\n#  rest_url: &#39;localhost:9200&#39;\n#  protocol: &#39;http&#39;\n#  schema_management_strategy: CREATE\n#  username: SomeUsername\n</code></pre></div>",
        "id": 258325972,
        "sender_full_name": "Jonas Franke",
        "timestamp": 1634716018
    }
]