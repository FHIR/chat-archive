[
    {
        "content": "<p>Hi All, this is regarding to validateWithResult() method. it is performance hit. tried with Patient resource and default profile.  is there any other alternative to it. suggestions will be helpful. </p>",
        "id": 153847396,
        "sender_full_name": "Venkat Reddy",
        "timestamp": 1473963428
    },
    {
        "content": "<p>You're using the reference implementation?  A good bit of the performance is in the terminology services invocations - if you can cache that, it's less of an issue.  Also, the validator hasn't really been performance tuned.  As well, there's a trade-off between validation thoroughness and performance - the more you validate, the more time it will take</p>",
        "id": 153847402,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1473966597
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> Any link / document reference  to  configure  the validation thoroughness . </p>",
        "id": 153847409,
        "sender_full_name": "Venkat Reddy",
        "timestamp": 1473967962
    },
    {
        "content": "<p>Well, there's an ability to turn off external terminology validation - just specify your terminology server as \"na\".  Beyond that, the configuration mechanism is \"wade through the code and remove/comment out what you wish\".  The focus of the validator to date has been meeting the needs of the FHIR publishing process, not run-time use, so we haven't profiled it to see where the performance issues are, nor figured out where we can tune those vs. where it makes sense to make those portions of the validation configurable.  (And realistically, this work is likely to happen as part of paid project work rather than standard volunteer effort.)</p>",
        "id": 153847413,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1473968541
    },
    {
        "content": "<p>where is validateWithResult()? what code are you referring to? </p>",
        "id": 153847446,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1474020692
    },
    {
        "content": "<p>and how long is it taking? </p>",
        "id": 153847447,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1474020696
    },
    {
        "content": "<p>Hello everyone, <br>\nI'll pin my question under current topic as it fits perfectly :)<br>\nI've been trying to build FHIR resource validator in python, basing only on StructureDefiniton.differential.element (assuming that we have basic validation of resource already in place) and I've been wondering if there is any more efficient method of validating a resource than looping through each StructureDefinition.differential.element? Just want to make sure I'm following the docs correctly, I've generated my StructureDefinition's using Forge and I see that all the information that I want to validate against are actually included in StructureDefinition.differential.element so naturally I wanted to build test cases around those, but maybe im missing somethin.<br>\nThanks!</p>",
        "id": 256461965,
        "sender_full_name": "Łukasz Kułakowski",
        "timestamp": 1633545407
    },
    {
        "content": "<p>You definitely want to perform validation using snapshot, not differential.  The algorithm for generating a snapshot from a differential is super-complex and you definitely <em>don't</em> want to take that on in addition to doing the validation piece.</p>",
        "id": 256464821,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1633546417
    },
    {
        "content": "<p>Hi,<br>\nI am using validator_cli.jar to validate the FHIR resource against my profiles/ig. I am seeing an error as below for one of the Observation.code.<br>\nAs per the understanding, this snomed code \"459231000124102\" is available in \"<a href=\"http://snomed.info/sct/900000000000207008/version/20210731\">http://snomed.info/sct/900000000000207008/version/20210731</a>\" version. However the validator is pointing to \"<a href=\"http://snomed.info/sct/900000000000207008/version/20200131\">http://snomed.info/sct/900000000000207008/version/20200131</a>\" version as seen in the error. </p>\n<p>Error @ Observation.code.coding[0] (line 23, col8) : Unable to find code 459231000124102 in <a href=\"http://snomed.info/sct\">http://snomed.info/sct</a> (version <a href=\"http://snomed.info/sct/900000000000207008/version/20200131\">http://snomed.info/sct/900000000000207008/version/20200131</a>); The code \"459231000124102\" is not valid in the system <a href=\"http://snomed.info/sct\">http://snomed.info/sct</a>; The code provided (<a href=\"http://snomed.info/sct#459231000124102\">http://snomed.info/sct#459231000124102</a>) is not valid in the value set 'All codes known to the system' (from <a href=\"http://tx.fhir.org/r4\">http://tx.fhir.org/r4</a>) for '<a href=\"http://snomed.info/sct#459231000124102\">http://snomed.info/sct#459231000124102</a>'</p>\n<p>Even though I pass the specific version in FHIR resource as below, validator is trying to refer \"20200131\" version and return the above error .</p>\n<p>\"code\": {<br>\n    \"coding\": [<br>\n      {<br>\n        \"system\": \"<a href=\"http://snomed.info/sct\">http://snomed.info/sct</a>\",<br>\n    \"version\": \"<a href=\"http://snomed.info/sct/900000000000207008/version/20210731\">http://snomed.info/sct/900000000000207008/version/20210731</a>\",<br>\n        \"code\": \"459231000124102\",<br>\n        \"display\": \"Sequential organ failure assessment score (assessment scale)\"<br>\n      }<br>\n    ]<br>\n  }</p>\n<p>Any thoughts on how to resolve this specific version issue seen in validator is appreciated.</p>",
        "id": 256545946,
        "sender_full_name": "Vivek S",
        "timestamp": 1633597905
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span></p>",
        "id": 256576104,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1633612975
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"449383\">@Vivek S</span> I'll try to take a look at this.  If you don't hear from me on it today, feel free to ping again (or PM me directly).</p>",
        "id": 256579638,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1633614375
    },
    {
        "content": "<p>this is esp. surprising, since via the web interface the concept _is_ found: <code>http://tx.fhir.org/snomed/900000000000207008-20210731/?srch=459231000124102</code>- when the version is correctly used. (the concept did not yet exist in 20200131)</p>\n<p>somehow the hl7validator+tx.fhir.org do not take the supplied version in to account, when using the FHIR-REST API ($validate)</p>\n<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  <span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> it is very well possible that the hl7validator does not pass the version along in its call - <code>20210731</code>is not found in the txLog file.... the <code>version</code> seems missing on the <code>POST http://tx.fhir.org/r4/CodeSystem/$validate-code? HTTP/1.0</code>:</p>\n<div class=\"codehilite\"><pre><span></span><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Parameters xmlns=&quot;http://hl7.org/fhir&quot;&gt;\n    &lt;parameter&gt;\n        &lt;name value=&quot;coding&quot;/&gt;\n        &lt;valueCoding&gt;\n            &lt;system value=&quot;http://snomed.info/sct&quot;/&gt;\n            &lt;code value=&quot;459231000124102&quot;/&gt;\n            &lt;display value=&quot;Sequential organ failure assessment score (assessment scale)&quot;/&gt;\n        &lt;/valueCoding&gt;\n    &lt;/parameter&gt;\n    &lt;parameter&gt;\n        &lt;name value=&quot;profile&quot;/&gt;\n        &lt;resource&gt;\n            &lt;Parameters&gt;\n                &lt;parameter&gt;\n                    &lt;name value=&quot;profile-url&quot;/&gt;\n                    &lt;valueString value=&quot;http://hl7.org/fhir/ExpansionProfile/dc8fd4bc-091a-424a-8a3b-6198ef146891&quot;/&gt;\n                &lt;/parameter&gt;\n                &lt;parameter&gt;\n                    &lt;name value=&quot;system-version&quot;/&gt;\n                    &lt;valueString value=&quot;http://snomed.info/sct|http://snomed.info/sct/900000000000207008&quot;/&gt;\n                &lt;/parameter&gt;\n            &lt;/Parameters&gt;\n        &lt;/resource&gt;\n    &lt;/parameter&gt;\n&lt;/Parameters&gt;\n</code></pre></div>\n<p>with the following response (note the tx server using its default version):</p>\n<div class=\"codehilite\"><pre><span></span><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Parameters xmlns=&quot;http://hl7.org/fhir&quot;&gt;\n    &lt;parameter&gt;\n        &lt;name value=&quot;result&quot;/&gt;\n        &lt;valueBoolean value=&quot;false&quot;/&gt;\n    &lt;/parameter&gt;\n    &lt;parameter&gt;\n        &lt;name value=&quot;message&quot;/&gt;\n        &lt;valueString value=&quot;Unable to find code 459231000124102 in http://snomed.info/sct (version http://snomed.info/sct/900000000000207008/version/20200131); The code &amp;quot;459231000124102&amp;quot; is not valid in the system http://snomed.info/sct; The code provided (http://snomed.info/sct#459231000124102) is not valid in the value set &amp;apos;All codes known to the system&amp;apos;&quot;/&gt;\n    &lt;/parameter&gt;\n    &lt;parameter&gt;\n        &lt;name value=&quot;cause&quot;/&gt;\n        &lt;valueString value=&quot;invalid&quot;/&gt;\n    &lt;/parameter&gt;\n&lt;/Parameters&gt;\n</code></pre></div>",
        "id": 257175667,
        "sender_full_name": "David Simons",
        "timestamp": 1634031834
    },
    {
        "content": "<p>When dealing with validation of resource using StructureDefinitions, how do you store information about which StructureDefinition should be used to validate which resource? E.g. I have several observation resources like heart rate, saturation etc and I'd like to validate them with different StructureDefinitions, should information about which SD to use be stored inside resource, or should i dynamically assign the proper structure basing on \"category\" or \"code\"?</p>",
        "id": 257196360,
        "sender_full_name": "Łukasz Kułakowski",
        "timestamp": 1634042810
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"434643\">Łukasz Kułakowski</span> <a href=\"#narrow/stream/179166-implementers/topic/validating.20resources.20against.20StructureDefinition/near/257196360\">said</a>:</p>\n<blockquote>\n<p>When dealing with validation of resource using StructureDefinitions, how do you store information about which StructureDefinition should be used to validate which resource? E.g. I have several observation resources like heart rate, saturation etc and I'd like to validate them with different StructureDefinitions, should information about which SD to use be stored inside resource, or should i dynamically assign the proper structure basing on \"category\" or \"code\"?</p>\n</blockquote>\n<p>ah, the original topic - we hijacked it - :) the quick answer is to claim 1..* SD/profile conformance(s) using meta.profile (<a href=\"https://www.hl7.org/fhir/resource.html#Meta\">https://www.hl7.org/fhir/resource.html#Meta</a>) in the Resource.</p>",
        "id": 257201570,
        "sender_full_name": "David Simons",
        "timestamp": 1634044983
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"194580\">@David Simons</span> !</p>",
        "id": 257208136,
        "sender_full_name": "Łukasz Kułakowski",
        "timestamp": 1634047512
    },
    {
        "content": "<p>hmm. I found and fixed a nmber of issues related to this but I couldn't actually reproduce this, so I'm not sure I fixed it. How would I reproduce this?</p>",
        "id": 257972838,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1634528946
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179166-implementers/topic/validating.20resources.20against.20StructureDefinition/near/257972838\">said</a>:</p>\n<blockquote>\n<p>hmm. I found and fixed a nmber of issues related to this but I couldn't actually reproduce this, so I'm not sure I fixed it. How would I reproduce this?</p>\n</blockquote>\n<p>Hi Grahame,<br>\nIf the observation resource has below specified code, the FHIR validator used to return a Failure/Error indicating the  the code is not valid in the system. Detailed error in my original post above. (code was valid only latest 20210731 SNOMED version, validator was referring 20200131 SNOMED version)<br>\nPost fix, we do not expect the FHIR validator to return the failure.</p>\n<p>\"code\": {<br>\n    \"coding\": [<br>\n      {<br>\n        \"system\": \"<a href=\"http://snomed.info/sct\">http://snomed.info/sct</a>\",<br>\n    \"version\": \"<a href=\"http://snomed.info/sct/900000000000207008/version/20210731\">http://snomed.info/sct/900000000000207008/version/20210731</a>\",<br>\n        \"code\": \"459231000124102\",<br>\n        \"display\": \"Sequential organ failure assessment score (assessment scale)\"<br>\n      }<br>\n    ]<br>\n  }</p>",
        "id": 258137269,
        "sender_full_name": "Vivek S",
        "timestamp": 1634615434
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179166-implementers/topic/validating.20resources.20against.20StructureDefinition/near/257972838\">said</a>:</p>\n<blockquote>\n<p>hmm. I found and fixed a nmber of issues related to this but I couldn't actually reproduce this, so I'm not sure I fixed it. How would I reproduce this?</p>\n</blockquote>\n<p>Hi Grahame, Could you please confirm if the changes are already merged to master branch for us to re-test?</p>",
        "id": 258343680,
        "sender_full_name": "Vivek S",
        "timestamp": 1634725176
    },
    {
        "content": "<p>not in master. you can look at this PR:</p>",
        "id": 258346736,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1634726882
    },
    {
        "content": "<p><a href=\"https://github.com/hapifhir/org.hl7.fhir.core/pull/624\">https://github.com/hapifhir/org.hl7.fhir.core/pull/624</a></p>",
        "id": 258346794,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1634726911
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179166-implementers/topic/validating.20resources.20against.20StructureDefinition/near/258346736\">said</a>:</p>\n<blockquote>\n<p>not in master. you can look at this PR:</p>\n</blockquote>\n<p>thanks, building this branch for <span class=\"user-mention\" data-user-id=\"449383\">@Vivek S</span>, so we can test</p>",
        "id": 258365151,
        "sender_full_name": "David Simons",
        "timestamp": 1634735887
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>, the hl7validator side seems to have been resolved with that PR #624, the version is now included in the POST</p>\n<div class=\"codehilite\"><pre><span></span><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Parameters xmlns=&quot;http://hl7.org/fhir&quot;&gt;\n    &lt;parameter&gt;\n        &lt;name value=&quot;coding&quot;/&gt;\n        &lt;valueCoding&gt;\n            &lt;system value=&quot;http://snomed.info/sct&quot;/&gt;\n            &lt;version value=&quot;http://snomed.info/sct/900000000000207008/version/20210731&quot;/&gt;\n            &lt;code value=&quot;459231000124102&quot;/&gt;\n            &lt;display value=&quot;Sequential organ failure assessment score (assessment scale)&quot;/&gt;\n        &lt;/valueCoding&gt;\n    &lt;/parameter&gt;\n</code></pre></div>",
        "id": 258380422,
        "sender_full_name": "David Simons",
        "timestamp": 1634741063
    },
    {
        "content": "<p>HOWEVER, the <a href=\"http://tx.fhir.org\">tx.fhir.org</a> server side now seems to have lost the SNOMED 20210731 International version?</p>\n<p><code>http://tx.fhir.org/snomed/900000000000207008-20210731/?srch=459231000124102</code> gives a <code>Document /snomed/900000000000207008-20210731/ not found</code>...<br>\nAlso <code>https://tx.fhir.org /snomed</code> is gone</p>\n<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 258381004,
        "sender_full_name": "David Simons",
        "timestamp": 1634741280
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"194580\">@David Simons</span> It certainly should not have lost it.   The server is running and the 20210731 International Edition appears to be loaded and is still showing as the default.  But I agree that something seems wrong with the queries that I'm trying.  I'll look at it further, but I'm occupied for the next hour.</p>",
        "id": 258383176,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1634742006
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191405\">Rob Hausam</span> <a href=\"#narrow/stream/179166-implementers/topic/validating.20resources.20against.20StructureDefinition/near/258383176\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"194580\">David Simons</span> It certainly should not have lost it.   The server is running and the 20210731 International Edition appears to be loaded and is still showing as the default.  But I agree that something seems wrong with the queries that I'm trying.  I'll look at it further, but I'm occupied for the next hour.</p>\n</blockquote>\n<p>Thank you for all your support! End-of-day here - we'll check back in tomorrow.</p>",
        "id": 258384382,
        "sender_full_name": "David Simons",
        "timestamp": 1634742405
    },
    {
        "content": "<p>this  is what we see currently, as additional input.</p>\n<p><a href=\"/user_uploads/10155/9PL6FGT-tuMu7s8jjbvbaClK/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/9PL6FGT-tuMu7s8jjbvbaClK/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/9PL6FGT-tuMu7s8jjbvbaClK/image.png\"></a></div>",
        "id": 258384627,
        "sender_full_name": "David Simons",
        "timestamp": 1634742493
    },
    {
        "content": "<p>Resolved</p>",
        "id": 258506002,
        "sender_full_name": "David Simons",
        "timestamp": 1634804603
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"194580\">David Simons</span> <a href=\"#narrow/stream/179166-implementers/topic/validating.20resources.20against.20StructureDefinition/near/258384382\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"191405\">Rob Hausam</span> <a href=\"#narrow/stream/179166-implementers/topic/validating.20resources.20against.20StructureDefinition/near/258383176\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"194580\">David Simons</span> It certainly should not have lost it.   The server is running and the 20210731 International Edition appears to be loaded and is still showing as the default.  But I agree that something seems wrong with the queries that I'm trying.  I'll look at it further, but I'm occupied for the next hour.</p>\n</blockquote>\n<p>Thank you for all your support! End-of-day here - we'll check back in tomorrow.</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> Today we could see \"<a href=\"http://tx.fhir.org/snomed/\">http://tx.fhir.org/snomed/</a>\" up with \"20210731\" SNOMED version in it.<br>\nAlso, I could re-test the validator for SNOMED code \"459231000124102\" against \"20210731\" SNOMED version on the latest changes created on PR #624, our tests now pass.</p>\n<p>Thanks for the support.</p>",
        "id": 258506626,
        "sender_full_name": "Vivek S",
        "timestamp": 1634804910
    },
    {
        "content": "<p>I am trying to validate a patient resource against the US-core profile using 5.6.2 HAPI libraries and loading the StructuredDefinition-us-core-patient.json resource from (<a href=\"http://hl7.org/fhir/us/core/STU4/full-ig.zip\">http://hl7.org/fhir/us/core/STU4/full-ig.zip</a>).  Validating with an R4 FhirContext and using setDefaultTypeForProfile(), everything loads and validates as expected.</p>\n<p>When I run my same test with a DSTU3 FhirContext I get a null pointer exception in the InstanceValidator.  I have tried both the StructuredDefinition above and using the older DSTU3 StructuredDefinition (<a href=\"http://hl7.org/fhir/us/core/STU3.1.1/full-ig.zip\">http://hl7.org/fhir/us/core/STU3.1.1/full-ig.zip</a>).  I am specifying the DSTU3 Patient class for the defaultType.</p>\n<p>Is there a trick to validing DSTU3 resources with the current InstanceValidator?  It looks like it is referencing R5 Element definitions.  Any help appreciated.</p>\n<p>Here is the stack trace:</p>\n<div class=\"codehilite\"><pre><span></span><code>java.lang.NullPointerException\n    at org.hl7.fhir.r5.model.Element.getExtensionString(Element.java:428)\n    at org.hl7.fhir.r5.model.ElementDefinition$TypeRefComponent.getWorkingCode(ElementDefinition.java:2264)\n    at org.hl7.fhir.validation.instance.InstanceValidator.checkChildByDefinition(InstanceValidator.java:4510)\n    at org.hl7.fhir.validation.instance.InstanceValidator.checkChild(InstanceValidator.java:4492)\n    at org.hl7.fhir.validation.instance.InstanceValidator.validateElement(InstanceValidator.java:4444)\n    at org.hl7.fhir.validation.instance.InstanceValidator.startInner(InstanceValidator.java:4160)\n    at org.hl7.fhir.validation.instance.InstanceValidator.start(InstanceValidator.java:4023)\n    at org.hl7.fhir.validation.instance.InstanceValidator.validateResource(InstanceValidator.java:5242)\n    at org.hl7.fhir.validation.instance.InstanceValidator.validate(InstanceValidator.java:748)\n    at org.hl7.fhir.validation.instance.InstanceValidator.validate(InstanceValidator.java:593)\n    at org.hl7.fhir.common.hapi.validation.validator.ValidatorWrapper.validate(ValidatorWrapper.java:181)\n    at org.hl7.fhir.common.hapi.validation.validator.FhirInstanceValidator.validate(FhirInstanceValidator.java:235)\n    at org.hl7.fhir.common.hapi.validation.validator.BaseValidatorBridge.doValidate(BaseValidatorBridge.java:22)\n    at org.hl7.fhir.common.hapi.validation.validator.BaseValidatorBridge.validateResource(BaseValidatorBridge.java:45)\n    at org.hl7.fhir.common.hapi.validation.validator.FhirInstanceValidator.validateResource(FhirInstanceValidator.java:25)\n    at ca.uhn.fhir.validation.FhirValidator.validateWithResult(FhirValidator.java:261)\n    at ca.uhn.fhir.validation.FhirValidator.validateWithResult(FhirValidator.java:202)\n    at com.qvera.qie.hapi.AbstractValidatorTest.testCustomProfileValidator(AbstractValidatorTest.java:101)\n</code></pre></div>",
        "id": 268587681,
        "sender_full_name": "Mike Ross",
        "timestamp": 1642618913
    },
    {
        "content": "<p>US Core 3.1.1 is based on FHIR R4,  The last published version of US Core based on FHIR STU3 is <a href=\"http://hl7.org/fhir/us/core/STU2/\">2.0.0</a></p>",
        "id": 268592403,
        "sender_full_name": "Eric Haas",
        "timestamp": 1642621036
    },
    {
        "content": "<p>Thank you.  I assumed it was the same versioning.  I didn't realize that.  I just tried the StructuredDefinition-us-core-patient.json from <a href=\"http://hl7.org/fhir/us/core/STU2/full-ig.zip\">http://hl7.org/fhir/us/core/STU2/full-ig.zip</a>, and I'm still getting the same null pointer as I try to use the validator for DSTU3 context.</p>\n<p>If I remove the use of prePopulatedSupport from the chain, it reports that us-core-patient is unknown.  When I include it in the change for DSTU3 FhirContext, it produces the null pointer exception in the InstanceValidator</p>\n<div class=\"codehilite\"><pre><span></span><code>        PrePopulatedValidationSupport prePopulatedSupport = new PrePopulatedValidationSupport(context);\n        prePopulatedSupport.addStructureDefinition(usCoreStructureDefinition);\n\n        // https://hapifhir.io/hapi-fhir/docs/validation/validation_support_modules.html\n        // Create a chain that will hold our modules\n        ValidationSupportChain supportChain = new ValidationSupportChain(\n                defaultSupport\n                ,commonCodeSystemsTerminologySupport\n                ,inMemoryTerminologySupport\n                ,prePopulatedSupport\n        );\n\n        // Wrap the chain in a cache to improve performance\n        CachingValidationSupport cache = new CachingValidationSupport(supportChain);\n\n        // Create a validator using the FhirInstanceValidator module. We can use this\n        // validator to perform validation\n        FhirInstanceValidator validatorModule = new FhirInstanceValidator(cache);\n        FhirValidator validator = context.newValidator().registerValidatorModule(validatorModule);\n\n        String patientString = createUSCorePatientString();\n        ValidationResult usCoreValidationResults = validator.validateWithResult(patientString);\n</code></pre></div>",
        "id": 268608526,
        "sender_full_name": "Mike Ross",
        "timestamp": 1642629089
    },
    {
        "content": "<p>Thank you, Eric.  It looks like it is working with the 2.0.0 IG.</p>",
        "id": 268720858,
        "sender_full_name": "Mike Ross",
        "timestamp": 1642696944
    }
]