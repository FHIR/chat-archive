[
    {
        "content": "<p><a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=6800\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=6800\">GF#6800</a> - any comments on this task?</p>",
        "id": 153855458,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1478236480
    },
    {
        "content": "<p>This is very convenient. I think, it could be used for representation not only contained but any referenced resources (for example when you do search with _include/_revinclude). In aidbox we decided to implement special parameter in operations, which makes server inline all resolvable refs in bundle/resource. </p>",
        "id": 153855459,
        "sender_full_name": "nicola (RIO/SS)",
        "timestamp": 1478239226
    },
    {
        "content": "<p>have you looked at the _history operation? that's pretty much what it is </p>",
        "id": 153855461,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1478239960
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-email=\"grahame@healthintersections.com.au\">@Grahame Grieve</span> Is this message related to transaction log?</p>",
        "id": 153855462,
        "sender_full_name": "nicola (RIO/SS)",
        "timestamp": 1478240067
    },
    {
        "content": "<p>yes oops</p>",
        "id": 153855465,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1478240456
    },
    {
        "content": "<p>I'm not a fan of inlined contained resources because you still have to handle resolution if the contained resource is referenced from multiple places.  It also makes finding where a referenced resource lives much harder if there can be multiple references.  And it would provide a reason for some to abuse containment because they like nesting.</p>",
        "id": 153855644,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1478444223
    },
    {
        "content": "<p>but references from multiple places is very definitely an edge case </p>",
        "id": 153855670,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1478471283
    },
    {
        "content": "<p>So instead of:</p>\n<p>&lt;Resource&gt;<br>\n  ...<br>\n  &lt;patient reference=\"uri\"/&gt;<br>\n  ...<br>\n&lt;/Resource&gt;</p>\n<p>we'd have </p>\n<p>&lt;Resource&gt;<br>\n  ...<br>\n  &lt;patient&gt;<br>\n     ....<br>\n     &lt;birthdate value=\"2001-04-18\"&gt;<br>\n     ....<br>\n  &lt;/patient&gt;<br>\n  ...<br>\n&lt;/Resource&gt;    </p>",
        "id": 153855735,
        "sender_full_name": "Paul Knapp",
        "timestamp": 1478519145
    },
    {
        "content": "<p>yes</p>",
        "id": 153855749,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1478520429
    },
    {
        "content": "<p>References from multiple places is certainly an edge case, but it's one that can't be ruled out and that systems will therefore need to support - which takes away much of the benefit of inlining and adds significant complexity.</p>",
        "id": 153855855,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1478573904
    },
    {
        "content": "<p>If you are doing resource inlining why wouldn't it be inlined everywhere it is referenced?</p>",
        "id": 153856287,
        "sender_full_name": "Paul Knapp",
        "timestamp": 1478764574
    },
    {
        "content": "<p>size? logical fact?</p>",
        "id": 153856365,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1478804560
    },
    {
        "content": "<p>Looping? :)</p>",
        "id": 153856386,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1478809029
    },
    {
        "content": "<p>&lt;Flag&gt;<br>\n                &lt;id value=\"7cb73a48-090d-469a-a2b2-04f1e6b11ea3\"/&gt;<br>\n                &lt;meta&gt;<br>\n                    &lt;profile value=\"http://fhir.nhs.net/StructureDefinition/spine-ris-flag-1-0\"/&gt;<br>\n                &lt;/meta&gt;<br>\n                &lt;!--contained patient resource--&gt;<br>\n                &lt;contained&gt;<br>\n                    &lt;Patient&gt;<br>\n                        &lt;id value=\"20daadee-26e1-4d6a-9e6a-7f4af9b58877\"/&gt;<br>\n                        &lt;meta&gt;<br>\n                            &lt;profile value=\"http://fhir.nhs.net/StructureDefinition/spine-ris-patient-1-0\"/&gt;<br>\n                        &lt;/meta&gt;<br>\n                        &lt;identifier&gt;<br>\n                            &lt;system value=\"http://fhir.nhs.net/Id/nhs-number\"/&gt;<br>\n                            &lt;value value=\"1234567890\"/&gt;<br>\n                        &lt;/identifier&gt;<br>\n                        &lt;!--DOB added--&gt;<br>\n                        &lt;birthDate value=\"2005-01-01\"/&gt;<br>\n                        &lt;!--GP Organization referenced.--&gt;<br>\n                        &lt;careProvider&gt;<br>\n                            &lt;reference value=\"#79600119-ebaf-4362-bb89-d473a33b1675\"/&gt;<br>\n                        &lt;/careProvider&gt;<br>\n                    &lt;/Patient&gt;<br>\n                &lt;/contained&gt;<br>\n                &lt;!--sibling contained GP Organization resource--&gt;<br>\n                &lt;contained&gt;<br>\n                    &lt;Organization&gt;<br>\n                        &lt;id value=\"79600119-ebaf-4362-bb89-d473a33b1675\"/&gt;<br>\n                        &lt;meta&gt;<br>\n                            &lt;profile value=\"http://fhir.nhs.net/StructureDefinition/gpconnect-organization-1\"/&gt;<br>\n                        &lt;/meta&gt;<br>\n                        &lt;identifier&gt;<br>\n                            &lt;system value=\"http://fhir.nhs.net/Id/ods-organization-code\"/&gt;<br>\n                            &lt;!--GP Practice Code--&gt;<br>\n                            &lt;value value=\"B86022\"/&gt;<br>\n                        &lt;/identifier&gt;<br>\n                        &lt;!--GP Practice Name--&gt;<br>\n                        &lt;name value=\"Wood Town GP practice\"/&gt;<br>\n                    &lt;/Organization&gt;<br>\n                &lt;/contained&gt;<br>\n                &lt;status value=\"active\"/&gt;<br>\n                &lt;period&gt;<br>\n                    &lt;start value=\"2015-02-04\"/&gt;<br>\n                &lt;/period&gt;<br>\n                &lt;subject&gt;<br>\n                    &lt;reference value=\"#20daadee-26e1-4d6a-9e6a-7f4af9b58877\"/&gt;<br>\n                &lt;/subject&gt;<br>\n                &lt;code&gt;<br>\n                    &lt;coding&gt;<br>\n                        &lt;system value=\"http://fhir.nhs.net/ValueSet/risk-indicator-type-1-0\"/&gt;<br>\n                        &lt;code value=\"FGM\"/&gt;<br>\n                    &lt;/coding&gt;<br>\n                &lt;/code&gt;<br>\n            &lt;/Flag&gt;</p>",
        "id": 153856518,
        "sender_full_name": "Simon Knee",
        "timestamp": 1478869121
    },
    {
        "content": "<p>Question relating to example Flag resource just posted. Can a resource contain 2 sibling resources with an internal reference from one contained sibling to the 2nd  contained sibling resource? See example. I think this is legal based on FHIR standard 'A contained resource SHALL only be included in a resource if something in that resource (potentially another contained resource) has a reference to it'. Can anyone confirm this is legal FHIR? Thanks</p>",
        "id": 153856519,
        "sender_full_name": "Simon Knee",
        "timestamp": 1478869490
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192515\">@Simon Knee</span> Yes, that's legal.  Contained resources can point to each other</p>",
        "id": 153856526,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1478872535
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192515\">@Simon Knee</span> but if you follow NRLS project that contained Patient resource isn't needed. </p>",
        "id": 153856581,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1478888978
    },
    {
        "content": "<p>&lt;Flag&gt;<br>\n&lt;Subject value=\"<a href=\"https://pds.proxy.nhs.net/Patient/1234567890\" target=\"_blank\" title=\"https://pds.proxy.nhs.net/Patient/1234567890\">https://pds.proxy.nhs.net/Patient/1234567890</a>\" /&gt;<br>\n&lt;code&gt;<br>\n&lt;coding&gt;<br>\n&lt;system value=\"http://fhir.nhs.net/ValueSet/risk-indicator-type-1-0\"/&gt;<br>\n&lt;code value=\"FGM\"/&gt;<br>\n&lt;/coding&gt;<br>\n&lt;/code&gt;<br>\n&lt;/Flag&gt;</p>",
        "id": 153856582,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1478888983
    },
    {
        "content": "<p>That isn't a valid construction, would need to be:<br>\n&lt;Flag&gt;<br>\n   &lt;status value=\"active\"/&gt;<br>\n   &lt;subject&gt;<br>\n      &lt;reference value=\"https://pds.proxy.nhs.net/Patient/1234567890\"/&gt;<br>\n   &lt;/subject&gt;<br>\n   &lt;code&gt;<br>\n      ....<br>\n   &lt;/code&gt;<br>\n&lt;/Flag&gt;</p>",
        "id": 153856594,
        "sender_full_name": "Paul Knapp",
        "timestamp": 1478893342
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> So is your view that rather than placing one instance of all contained resources in 'contained' inlined means that we place one instance in a place of use with all other places of use using a local reference? Then rather than building an internal reference table of the contained resources directly from 'contained' we would first have to preprocess the entire tree to build the table of contained resources from the supplied instance. More work and no real space or complexity saving.</p>",
        "id": 153856597,
        "sender_full_name": "Paul Knapp",
        "timestamp": 1478894077
    },
    {
        "content": "<p>inlining contained resources certainly makes reference resolution much more complicated if you're still going to allow references to contained resources. yes</p>",
        "id": 153856607,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1478896820
    },
    {
        "content": "<p>note that this was discussed on the FHIR-I call, and the task was closed. The outcome of our discussion is that inlining contained resources would create many issues, and the practical issues here are not strong. We will work on better aggregation approaches across the RESTful API to reduce the interest in containing resources that don't need to be contained (slightly different issue, but causally related)</p>",
        "id": 153856608,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1478896957
    },
    {
        "content": "<p>Thanks that would be very useful. I'm noticing a increasing number of cases where HL7v3 is being converted to FHIR verbatim and so including a lot of unnecessary information.</p>",
        "id": 153856681,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1478971966
    },
    {
        "content": "<p>that's an occupational hazard in v3 countries. In my country, you'd replace 'v3' with 'cda'</p>",
        "id": 153856709,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1479034654
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> Thanks for quick FHIR response. </p>",
        "id": 153856831,
        "sender_full_name": "Simon Knee",
        "timestamp": 1479117911
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"194909\">@Kevin Mayfield</span> the example I included was for the FGM messaging interface. I understand the e-RS project were discussing using inline contained resources - did this get agreement?</p>",
        "id": 153856832,
        "sender_full_name": "Simon Knee",
        "timestamp": 1479118015
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192515\">@Simon Knee</span>   It is at the moment. We've not officially fed back comment though. The main issue for us is it's differences from NRLS version of DocumentReference. We will probably have to convert e-RS DocumentReference to SNOMED and remove the inline resources (or convert the NRLS version). </p>",
        "id": 153856834,
        "sender_full_name": "Kevin Mayfield",
        "timestamp": 1479120975
    }
]