[
    {
        "content": "<p>The dose-number and dose-sequence Search Parameters on the ImmunizationRecommendation resource (<a href=\"http://build.fhir.org/immunizationrecommendation.html\" target=\"_blank\" title=\"http://build.fhir.org/immunizationrecommendation.html\">http://build.fhir.org/immunizationrecommendation.html</a>) are defined as “number” search types.  The FHIRPath expression for dose-number, for example, is ImmunizationRecommendation.recommendation.doseNumber which is a Type Choice of both a positiveInt and a String.</p>\n<p>The positiveInt makes sense, but the String is not a “number” as declared by the Search Parameter.  This is the only instance I have found in the spec of a type mismatch in search parameter definitions.</p>\n<p>Is a Search Parameter like this permitted? Is it valid?</p>\n<p>If it is, there are some side effects we would need to describe - for example - how should a server handle a greater than search on a doseNumberString?</p>\n<p>If it is not valid, should these two Search Parameters be modified to a FHIRPath expression like this: ImmunizationRecommendation.recommendation.doseNumber.as(positiveInt), and then a second, separate Search Parameter be defined for the String types?</p>\n<p>Thanks!</p>",
        "id": 153984321,
        "sender_full_name": "Steve Munini",
        "timestamp": 1533836057
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192758\">@Craig Newman</span> <span class=\"user-mention\" data-user-id=\"191418\">@Joginder Madra</span></p>",
        "id": 153984325,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1533836403
    },
    {
        "content": "<p>We got feedback that doseNumber and seriesDoses should allow the option to include a string to allow things like indicating a dose was booster (e.g. adult tetanus) or yearly (influenza), so we made that change. We didn't intend to disrupt the search types. The best solution is beyond my technical understanding, so if someone can confirm  Steve's proposed solution (or suggest a different solution), I'm happy to make the change.</p>",
        "id": 153984338,
        "sender_full_name": "Craig Newman",
        "timestamp": 1533837291
    },
    {
        "content": "<p>You have a choice of going with 2 search parameters or going with a single \"string\" one.  You might also consider 'token' as you'd always want exact string matches.  You need a number based search parameter if you need the ge, le and similar modifiers.</p>",
        "id": 153984375,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1533838916
    },
    {
        "content": "<p>I think I lean towards two search parameters. I don't know if there is a real pressing need for ge and le but it seems reasonable to leave open the possibility. I assume they need unique names and would the path be literally ImmunizationRecommendation.recommendation.doseNumber.as(positiveInt) (and a type of number) and ImmunizationRecommendation.recommendation.doseNumber.as(string) (and a type of string).</p>",
        "id": 153984384,
        "sender_full_name": "Craig Newman",
        "timestamp": 1533839654
    },
    {
        "content": "<p>The first, yes.  For the second, string has a base-behavior of starts-with match and case-insensitive/accent insensitive.  I suspect 'token' is more the behavior you'd want.</p>",
        "id": 153984399,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1533840969
    },
    {
        "content": "<p>sounds good. Thanks</p>",
        "id": 153984402,
        "sender_full_name": "Craig Newman",
        "timestamp": 1533841087
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>  is this OK to  try and do today, or do you want me to wait?</p>",
        "id": 153984901,
        "sender_full_name": "Craig Newman",
        "timestamp": 1533904542
    },
    {
        "content": "<p>And the addition of Immunization.recorded - is that OK to do today as well?</p>",
        "id": 153984907,
        "sender_full_name": "Craig Newman",
        "timestamp": 1533904723
    },
    {
        "content": "<p>Totally fine to do today</p>",
        "id": 153984939,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1533910555
    },
    {
        "content": "<p>I have the following in the spreadsheet:<br>\ndose-number                        number   ImmunizationRecommendation.recommendation.doseNumber.as(positiveInt)<br>\ndose-number-by-token    token       ImmunizationRecommendation.recommendation.doseNumber.as(token)<br>\ndose-sequence                  number   ImmunizationRecommendation.recommendation.seriesDose.as(positiveInt)<br>\ndose-sequence-by-token  token       ImmunizationRecommendation.recommendation.seriesDose.as(token)</p>\n<p>It builds fine locally, but the display doesn't include a path or description. Is there something wrong with the path I added?</p>\n<p>Name    Type    Description Expression  In Common<br>\ndate    date    Date recommendation(s) created  ImmunizationRecommendation.date <br>\ndose-number number          <br>\ndose-number-by-token    token           <br>\ndose-sequence   number          <br>\ndose-sequence-by-token  token           <br>\nidentifier  token   Business identifier ImmunizationRecommendation.identifier</p>",
        "id": 153984997,
        "sender_full_name": "Craig Newman",
        "timestamp": 1533922123
    }
]