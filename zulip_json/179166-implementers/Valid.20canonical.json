[
    {
        "content": "<p>What is a valid value for canonical? Does the value has to be looked like a \"<a href=\"http://xxxx\">http://xxxx</a>\"? According to data type page <a href=\"http://hl7.org/fhir/R4/datatypes.html\">http://hl7.org/fhir/R4/datatypes.html</a>, a canonical is a url, a url is a uri. uri has regex <code>\\S*</code> while canonical and url don't have their own regex. It looks like <code>\"url\": \"ValueSet/123\"</code> is a valid canonical. Do I miss something here?</p>",
        "id": 200119259,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1591631998
    },
    {
        "content": "<p>A canonical has to be a full URI - it can't be relative</p>",
        "id": 200121281,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1591632893
    },
    {
        "content": "<p>Is there a sentence in FHIR spec stating that?</p>",
        "id": 200122595,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1591633519
    },
    {
        "content": "<p>Not sure.  If you can't find one, submit a change request</p>",
        "id": 200123182,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1591633788
    },
    {
        "content": "<p>If you go from <a href=\"https://www.hl7.org/fhir/datatypes.html#canonical\">DataType Canonical</a> to <a href=\"https://www.hl7.org/fhir/references.html#canonical\">Canonical Reference</a> to <a href=\"https://www.hl7.org/fhir/resource.html#canonical\">Canonical Resource Identity</a>, you get to</p>\n<blockquote>\n<p>The canonical URL serves as a stable logical identifier for the resource, and is the preferred way to reference a conformance or knowledge resource. The canonical URL SHOULD also resolve to the location where the master copy of the artifact is found, though it is not always possible to arrange this. The canonical URL SHALL NOT refer to some other resource (though it may resolve to a different version of the same resource).</p>\n</blockquote>\n<p>Which is the closest I found.</p>\n<p>Though TIL that canonical can also be a <a href=\"https://www.hl7.org/fhir/references.html#canonical-fragments\">fragment to a contained resource</a>, so not <em>always</em> a full URL.</p>",
        "id": 200123293,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1591633831
    },
    {
        "content": "<p>The FHIR Extensibility page (<a href=\"https://www.hl7.org/fhir/extensibility.html\">https://www.hl7.org/fhir/extensibility.html</a>) also states: <code>The url SHALL be a URL, not a URN (e.g. not an OID or a UUID), and it SHALL be the canonical URL of a StructureDefinition that defines the extension. Except for child extensions defined within complex extensions, the URL SHALL be an absolute URL.</code></p>",
        "id": 200124775,
        "sender_full_name": "Michael O'Keefe",
        "timestamp": 1591634604
    },
    {
        "content": "<p>Which implies that for child extensions of complex extensions, the Canonical URL can be relative</p>",
        "id": 200124802,
        "sender_full_name": "Michael O'Keefe",
        "timestamp": 1591634622
    },
    {
        "content": "<blockquote>\n<p>Though TIL that canonical can also be a fragment to a contained resource, so not always a full URL.</p>\n</blockquote>\n<p>It's not a full url, but it can always be resolved without ambiguity.</p>",
        "id": 200126195,
        "sender_full_name": "Stephen MacVicar",
        "timestamp": 1591635323
    },
    {
        "content": "<p>It's certainly an oversight  - a surprising one to me - that we do not explicitly say that canonical URLs have to be absolute URLs if they are not fragment identifiers</p>",
        "id": 200140845,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1591642386
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191506\">@Yunwei Wang</span> please make a task to fix this</p>",
        "id": 200140864,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1591642396
    },
    {
        "content": "<p><a href=\"https://jira.hl7.org/projects/FHIR/issues/FHIR-27789\">https://jira.hl7.org/projects/FHIR/issues/FHIR-27789</a></p>",
        "id": 200143517,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1591643766
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191506\">Yunwei Wang</span> <a href=\"#narrow/stream/179166-implementers/topic/Valid.20canonical/near/200143517\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://jira.hl7.org/projects/FHIR/issues/FHIR-27789\">https://jira.hl7.org/projects/FHIR/issues/FHIR-27789</a></p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"191506\">@Yunwei Wang</span> Why was this issue retracted?</p>",
        "id": 222470786,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1610474566
    },
    {
        "content": "<p>It wasn't retracted...</p>",
        "id": 222474656,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1610476355
    },
    {
        "content": "<p>It is retracted. I cannot remember why I retracted it. <span class=\"user-mention\" data-user-id=\"195344\">@Paul Lynch</span>  If you think there is still value for this ticket, I can re-create one.</p>",
        "id": 222476295,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1610477042
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191506\">@Yunwei Wang</span> , yes I think it would be helpful.  We've been using relative URLs in QuestionnaireResponse.questionnaire (with which HAPI FHIR has no issues) and I am just learning they should have been absolute.</p>",
        "id": 222476836,
        "sender_full_name": "Paul Lynch",
        "timestamp": 1610477302
    },
    {
        "content": "<p>Weird.  Clicking on the link doesn't take me to the right place...</p>",
        "id": 222486563,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1610481743
    },
    {
        "content": "<p>How did you get that hyperlink?</p>",
        "id": 222486728,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1610481826
    },
    {
        "content": "<p><a href=\"https://jira.hl7.org/browse/FHIR-27789\">https://jira.hl7.org/browse/FHIR-27789</a>. <span class=\"user-mention\" data-user-id=\"195344\">@Paul Lynch</span> Issue reopened</p>",
        "id": 222775193,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1610654512
    }
]