[
    {
        "content": "<p>Hi,<br>\nUsing C#.Net HL 7 library, created a Condition FHIR Resource and trying to link to its Patient Resource using condition.subject property. But keep getting below error:<br>\nOperation was unsuccessful because of a client error (BadRequest). OperationOutcome: Overall result: FAILURE (1 errors and 0 warnings)</p>\n<p>[ERROR] (no details)(further diagnostics: Body parsing failed: Type checking the data: Encountered unknown element 'subject' at location 'Resource.subject[0]' while parsing).<br>\nAny idea?</p>\n<p>Thanks</p>",
        "id": 250078738,
        "sender_full_name": "Tani Thomas",
        "timestamp": 1629436034
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"203235\">@Ward Weistra</span></p>",
        "id": 250079638,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1629437275
    },
    {
        "content": "<p>What is the content of the resource you are trying up push. It sounds like it's not formatted correctly.</p>",
        "id": 250109053,
        "sender_full_name": "Daniel Venton",
        "timestamp": 1629461140
    },
    {
        "content": "<p>There are different libraries for different FHIR versions, are you using the right one? Because Condition.subject was called Condition.patient in DSTU2</p>",
        "id": 250113353,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1629464035
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"335936\">Daniel Venton</span> <a href=\"#narrow/stream/179166-implementers/topic/Encountered.20unknown.20element.20'subject'.20Error/near/250109053\">said</a>:</p>\n<blockquote>\n<p>What is the content of the resource you are trying up push. It sounds like it's not formatted correctly.</p>\n</blockquote>\n<p>var condition = new Hl7.Fhir.Model.Condition();<br>\n condition.Subject = new ResourceReference(\"Patient/\" + myPatient.Id);</p>\n<p>where myPatient is a Patient Reosurce created. </p>\n<p>The error is thrown on <br>\nvar conditions = new SearchParams();<br>\nconditions.Add(\"identifier\", \"<a href=\"http://ns.electronichealth.net.au/id/hi/ihi/1.0|\">http://ns.electronichealth.net.au/id/hi/ihi/1.0|</a>\" + pat.Admission_Id);<br>\n Hl7.Fhir.Model.Condition ReturnedCondition = client.Create&lt;Hl7.Fhir.Model.Condition&gt;(condition, conditions);</p>",
        "id": 250190032,
        "sender_full_name": "Tani Thomas",
        "timestamp": 1629510732
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191912\">Michele Mottini</span> <a href=\"#narrow/stream/179166-implementers/topic/Encountered.20unknown.20element.20'subject'.20Error/near/250113353\">said</a>:</p>\n<blockquote>\n<p>There are different libraries for different FHIR versions, are you using the right one? Because Condition.subject was called Condition.patient in DSTU2</p>\n</blockquote>\n<p>Library i am using is HL7.Fhir.R4</p>",
        "id": 250190039,
        "sender_full_name": "Tani Thomas",
        "timestamp": 1629510773
    },
    {
        "content": "<p>...and which FHIR version does the server you are POSTing to uses?</p>",
        "id": 250193468,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1629515809
    },
    {
        "content": "<p>The failure isn't on the push of the resource, it's on the query for the resource? I still want to see the resource in it's serialized form.</p>",
        "id": 250347059,
        "sender_full_name": "Daniel Venton",
        "timestamp": 1629723331
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 250878374,
        "sender_full_name": "Tani Thomas",
        "timestamp": 1630036248
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191912\">Michele Mottini</span> <a href=\"#narrow/stream/179166-implementers/topic/Encountered.20unknown.20element.20'subject'.20Error/near/250193468\">said</a>:</p>\n<blockquote>\n<p>...and which FHIR version does the server you are POSTing to uses?</p>\n</blockquote>\n<p>FHIR R4 1.0.2</p>",
        "id": 250878398,
        "sender_full_name": "Tani Thomas",
        "timestamp": 1630036281
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"335936\">Daniel Venton</span> <a href=\"#narrow/stream/179166-implementers/topic/Encountered.20unknown.20element.20'subject'.20Error/near/250347059\">said</a>:</p>\n<blockquote>\n<p>The failure isn't on the push of the resource, it's on the query for the resource? I still want to see the resource in it's serialized form.</p>\n</blockquote>\n<p>{<br>\n  \"resourceType\": \"Patient\",<br>\n  \"extension\": [<br>\n    {<br>\n      \"valueString\": \"Alfred\"<br>\n    },<br>\n    {<br>\n      \"url\": \"<a href=\"http://hl7.org/fhir/StructureDefinition/birthPlace\">http://hl7.org/fhir/StructureDefinition/birthPlace</a>\",<br>\n      \"valueAddress\": {<br>\n        \"country\": \"Australia\"<br>\n      }<br>\n    },<br>\n    {<br>\n      \"url\": \"<a href=\"http://hl7.org.au/fhir/StructureDefinition/indigenous-status\">http://hl7.org.au/fhir/StructureDefinition/indigenous-status</a>\",<br>\n      \"valueCode\": \"4\"<br>\n    },<br>\n    {<br>\n      \"url\": \"<a href=\"http://hl7.org/fhir/StructureDefinition/condition-outcome\">http://hl7.org/fhir/StructureDefinition/condition-outcome</a>\",<br>\n      \"valueString\": \"\"<br>\n    }<br>\n  ],<br>\n  \"identifier\": [<br>\n    {<br>\n      \"system\": \"<a href=\"http://ns.electronichealth.net.au/id/hi/ihi/1.0\">http://ns.electronichealth.net.au/id/hi/ihi/1.0</a>\",<br>\n      \"value\": \"19999\"<br>\n    },<br>\n    {<br>\n      \"system\": \"<a href=\"http://ns.electronichealth.net.au/id/medicare-number\">http://ns.electronichealth.net.au/id/medicare-number</a>\",<br>\n      \"value\": \"\"<br>\n    },<br>\n    {<br>\n      \"system\": \"<a href=\"http://hl7.org.au/fhir/StructureDefinition/au-dvanumber\">http://hl7.org.au/fhir/StructureDefinition/au-dvanumber</a>\",<br>\n      \"value\": \"\"<br>\n    }<br>\n  ],<br>\n  \"active\": true,<br>\n  \"name\": [<br>\n    {<br>\n      \"family\": \"test1\",<br>\n      \"given\": [<br>\n        \"test1\",<br>\n        \"\"<br>\n      ]<br>\n    }<br>\n  ],<br>\n  \"telecom\": [<br>\n    {<br>\n      \"system\": \"phone\",<br>\n      \"value\": \"04423509665\",<br>\n      \"use\": \"home\"<br>\n    },<br>\n    {<br>\n      \"system\": \"phone\",<br>\n      \"value\": \"\",<br>\n      \"use\": \"mobile\"<br>\n    },<br>\n    {<br>\n      \"system\": \"phone\",<br>\n      \"value\": \"\",<br>\n      \"use\": \"work\"<br>\n    },<br>\n    {<br>\n      \"system\": \"email\",<br>\n      \"value\": \"\"<br>\n    }<br>\n  ],<br>\n  \"gender\": \"male\",<br>\n  \"birthDate\": \"1963-08-02\",<br>\n  \"address\": [<br>\n    {<br>\n      \"type\": \"physical\",<br>\n      \"line\": [<br>\n        \"24 Pletuyty River Drive\",<br>\n        \"GREENSBOROUGH\"<br>\n      ],<br>\n      \"city\": \"\",<br>\n      \"state\": \"\",<br>\n      \"postalCode\": \"3088\",<br>\n      \"country\": \"\"<br>\n    }<br>\n  ],<br>\n  \"contact\": [<br>\n    {<br>\n      \"relationship\": [<br>\n        {<br>\n          \"coding\": [<br>\n            {<br>\n              \"system\": \"<a href=\"http://terminology.hl7.org/CodeSystem/v2-0131\">http://terminology.hl7.org/CodeSystem/v2-0131</a>\",<br>\n              \"code\": \"N\"<br>\n            }<br>\n          ]<br>\n        }<br>\n      ],<br>\n      \"name\": {<br>\n        \"given\": [<br>\n          \"\"<br>\n        ]<br>\n      },<br>\n      \"telecom\": [<br>\n        {<br>\n          \"system\": \"phone\",<br>\n          \"value\": \"\",<br>\n          \"use\": \"home\"<br>\n        },<br>\n        {<br>\n          \"system\": \"phone\",<br>\n          \"value\": \"\",<br>\n          \"use\": \"mobile\"<br>\n        },<br>\n        {<br>\n          \"system\": \"phone\",<br>\n          \"value\": \"\",<br>\n          \"use\": \"work\"<br>\n        },<br>\n        {<br>\n          \"system\": \"email\"<br>\n        }<br>\n      ],<br>\n      \"address\": {<br>\n        \"type\": \"physical\",<br>\n        \"line\": [<br>\n          \"\",<br>\n          \"\"<br>\n        ],<br>\n        \"city\": \"\",<br>\n        \"state\": \"\",<br>\n        \"postalCode\": \"\"<br>\n      }<br>\n    }<br>\n  ],<br>\n  \"communication\": [<br>\n    {<br>\n      \"language\": {<br>\n        \"coding\": [<br>\n          {<br>\n            \"system\": \"<a href=\"http://hl7.org/fhir/ValueSet/languages\">http://hl7.org/fhir/ValueSet/languages</a>\",<br>\n            \"code\": \"en\"<br>\n          }<br>\n        ]<br>\n      }<br>\n    }<br>\n  ],<br>\n  \"generalPractitioner\": [<br>\n    {<br>\n      \"reference\": \"Practitioner/647\"<br>\n    }<br>\n  ],<br>\n  \"managingOrganization\": {<br>\n    \"reference\": \"Organization/11\"<br>\n  }<br>\n}</p>",
        "id": 250878411,
        "sender_full_name": "Tani Thomas",
        "timestamp": 1630036307
    },
    {
        "content": "<p>FHIR version 1.02 is DSTU2, not R4 - that would explain the error (the server expects Condition.patient, your client is sending Condition.subject)</p>",
        "id": 250931546,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1630071018
    }
]