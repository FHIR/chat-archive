[
    {
        "content": "<p>Hello, <br>\nmy IG was compiling well with the last publisher version, but since the 1.1.44 I get the following stack trace:<br>\nStack Dump (for debugging):                                                      (01:51.0931)<br>\norg.hl7.fhir.exceptions.FHIRException: Invalid document - first entry is not a Composition<br>\n    at org.hl7.fhir.r5.renderers.BundleRenderer.render(BundleRenderer.java:66)<br>\n    at org.hl7.fhir.r5.renderers.ResourceRenderer.render(ResourceRenderer.java:84)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.getXhtml(Publisher.java:7872)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.saveDirectResourceOutputs(Publisher.java:7189)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.generateHtmlOutputs(Publisher.java:6629)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.generate(Publisher.java:4885)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:884)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:728)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:8397)</p>\n<p>And I'm sure that the Bundle example has the Composition as first entry.</p>\n<p>Any idea ?</p>\n<p>Best regards,<br>\nDavid</p>",
        "id": 218413055,
        "sender_full_name": "David Gutknecht",
        "timestamp": 1606824665
    },
    {
        "content": "<p>Have you tried with 1.1.45?</p>",
        "id": 218475852,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1606854037
    },
    {
        "content": "<p>The next release with add more debugging to help sort this out. Or you could tell me how to reproduce it</p>",
        "id": 218512000,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1606880069
    },
    {
        "content": "<p>Hello <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> , <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> ,<br>\nwith version FHIR IG Publisher Version 1.1.45 I have the same stacktrace.<br>\nGrahame I will upload the last version to github, this way you will be able to access everything.</p>",
        "id": 218521258,
        "sender_full_name": "David Gutknecht",
        "timestamp": 1606892661
    },
    {
        "content": "<p>The ig is available under <a href=\"https://github.com/DavidGutknecht/mni-ig\">https://github.com/DavidGutknecht/mni-ig</a></p>",
        "id": 218522095,
        "sender_full_name": "David Gutknecht",
        "timestamp": 1606893826
    },
    {
        "content": "<p>I have a similar error message since the last publisher update:<br>\nStack Dump (for debugging):                                                      (00:33.0828)<br>\norg.hl7.fhir.exceptions.FHIRException: Unable to connect to terminology server. Error = An error fetching the server's capability statement: Connect timed out<br>\n        at org.hl7.fhir.r5.context.SimpleWorkerContext.connectToTSServer(SimpleWorkerContext.java:303)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.initializeFromIg(Publisher.java:1867)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.initialize(Publisher.java:1452)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:722)<br>\n        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:8404)<br>\nCaused by: org.hl7.fhir.r5.utils.client.EFhirClientException: An error fetching the server's capability statement: Connect timed out<br>\n        at org.hl7.fhir.r5.utils.client.FHIRToolingClient.handleException(FHIRToolingClient.java:325)<br>\n        at org.hl7.fhir.r5.utils.client.FHIRToolingClient.getCapabilitiesStatementQuick(FHIRToolingClient.java:157)<br>\n        at org.hl7.fhir.convertors.txClient.TerminologyClientR5.getCapabilitiesStatementQuick(TerminologyClientR5.java:99)<br>\n        at org.hl7.fhir.r5.context.SimpleWorkerContext.connectToTSServer(SimpleWorkerContext.java:299)<br>\n        ... 4 more</p>\n<p>Any idea?</p>",
        "id": 218537820,
        "sender_full_name": "Kathrin Riech",
        "timestamp": 1606904628
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"224056\">@Kathrin Riech</span> . I had a similar error earlier, but my Implementation guide is building now.</p>",
        "id": 218549462,
        "sender_full_name": "Kirstine Rosenbeck Gøeg",
        "timestamp": 1606912490
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"194347\">@Kirstine Rosenbeck Gøeg</span>  did you change anythig in your code?</p>",
        "id": 218552357,
        "sender_full_name": "Kathrin Riech",
        "timestamp": 1606914289
    },
    {
        "content": "<p>No, I did not - that was what I wanted to communicate, sorry.</p>",
        "id": 218552569,
        "sender_full_name": "Kirstine Rosenbeck Gøeg",
        "timestamp": 1606914409
    },
    {
        "content": "<p>Mine is building now as well. Thank you very much <span class=\"user-mention\" data-user-id=\"194347\">@Kirstine Rosenbeck Gøeg</span> !</p>",
        "id": 218552658,
        "sender_full_name": "Kathrin Riech",
        "timestamp": 1606914470
    },
    {
        "content": "<p>Did a new Check with Version 1.1.48<br>\nI still have troubles but I have more informations in the stacktrace</p>\n<p>org.hl7.fhir.exceptions.FHIRException: Invalid document 'mni-patientOverview-bundle-example1' - first entry is not a Composition ('Composition')<br>\n    at org.hl7.fhir.r5.renderers.BundleRenderer.render(BundleRenderer.java:66)<br>\n    at org.hl7.fhir.r5.renderers.ResourceRenderer.render(ResourceRenderer.java:84)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.getXhtml(Publisher.java:7888)<br>\n    at org.hl7.fhir.igtools.publisher.Publisher.saveDirectResourceOutputs(Publisher.java:7205)</p>",
        "id": 218814953,
        "sender_full_name": "David Gutknecht",
        "timestamp": 1607077349
    },
    {
        "content": "<p>Attached the file.<br>\nI don't understand, the first entry is a Composition.<br>\n<a href=\"/user_uploads/10155/sl_ucbseRA9z3nkcAZ3klRgT/mni-patientOverview-bundle-example1.json\">mni-patientOverview-bundle-example1.json</a></p>",
        "id": 218815028,
        "sender_full_name": "David Gutknecht",
        "timestamp": 1607077424
    },
    {
        "content": "<p>Is it because the composition mni-patientOverview-composition is based on clinical-document ?</p>",
        "id": 218815631,
        "sender_full_name": "David Gutknecht",
        "timestamp": 1607077883
    },
    {
        "content": "<blockquote>\n<p>first entry is not a Composition ('Composition')</p>\n</blockquote>\n<p>It's not a Composition; it's a Composition</p>",
        "id": 218815912,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1607078045
    },
    {
        "content": "<p>I don't know how that could be any clearer</p>",
        "id": 218815917,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1607078052
    },
    {
        "content": "<p>at least, nothing could be clearer that the code itself is the problem</p>",
        "id": 218816017,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1607078119
    },
    {
        "content": "<p>in this case, missing a not on the comparison.</p>",
        "id": 218816025,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1607078124
    },
    {
        "content": "<p>Will be fixed next release</p>",
        "id": 218816031,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1607078128
    },
    {
        "content": "<p>Ok Thanks ! <span aria-label=\"dancing\" class=\"emoji emoji-1f57a\" role=\"img\" title=\"dancing\">:dancing:</span></p>",
        "id": 218817987,
        "sender_full_name": "David Gutknecht",
        "timestamp": 1607079423
    }
]