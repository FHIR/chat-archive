[
    {
        "content": "<p>Hi all! I am a little bit confused with implementation of REST API. According to RFC (<a href=\"https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1\" target=\"_blank\" title=\"https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1\">https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1</a>), Accept header can only include the media type and quality, <br>\nBut reading the FHIR implementation guides of REST I noticed the following: </p>\n<p>Requests MAY also specify this charset parameter in the Accept header and/or use the Accept-Charset header.</p>\n<p>This phrase contradicts the RFC. Is'n it?</p>\n<p>More over. Implementation of .NET API by Ewout Kramer (<a href=\"https://github.com/ewoutkramer/fhir-net-api\" target=\"_blank\" title=\"https://github.com/ewoutkramer/fhir-net-api\">https://github.com/ewoutkramer/fhir-net-api</a>) fills the accept header with value of the Content-Type header. Content-Type MAY include charset.</p>",
        "id": 153916363,
        "sender_full_name": "Valery Kirichenko",
        "timestamp": 1509091824
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"194727\">@Valery Kirichenko</span> it's not forbidden to do that though, and I've seen other APIs use it</p>",
        "id": 153916364,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1509092442
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191363\">@Vadim Peretokin</span> The problem with default implementation of Accept header parsing in the <a href=\"http://asp.net\" target=\"_blank\" title=\"http://asp.net\">asp.net</a> core mvc. According to its implemettation Accept header is parsed as \"MediaTypeSegmentWithQuality\" (<a href=\"https://github.com/aspnet/Mvc/blob/c27b07ef3f8b07dfe1d1de38a8d7bf2d6a9298f4/src/Microsoft.AspNetCore.Mvc.Core/Internal/AcceptHeaderParser.cs\" target=\"_blank\" title=\"https://github.com/aspnet/Mvc/blob/c27b07ef3f8b07dfe1d1de38a8d7bf2d6a9298f4/src/Microsoft.AspNetCore.Mvc.Core/Internal/AcceptHeaderParser.cs\">https://github.com/aspnet/Mvc/blob/c27b07ef3f8b07dfe1d1de38a8d7bf2d6a9298f4/src/Microsoft.AspNetCore.Mvc.Core/Internal/AcceptHeaderParser.cs</a>) wich can only include the Media type and Quality. Accept header with charset is invalid.</p>\n<p>So we have to write a bad-smell code <span class=\"emoji emoji-1f60a\" title=\"blush\">:blush:</span> to provide acception of charset in Accept header =)</p>",
        "id": 153916383,
        "sender_full_name": "Valery Kirichenko",
        "timestamp": 1509093437
    },
    {
        "content": "<p>I don't see where that rfc says that accept header can only include media type and qulity. Specifically, it discusses the use of a q parameter and points out that this means that media types can't define and use parameters named 'q' - that means that other parameters are ok. Suggest you file a bug against ASP...</p>",
        "id": 153916550,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1509136412
    },
    {
        "content": "<p>On a further research I find out that according to IANA, some media types are support optional parameter <code>charset</code> and the other ones not.</p>\n<p>For example, <code>application/json</code>does not support charset (<a href=\"https://www.iana.org/assignments/media-types/application/json\" target=\"_blank\" title=\"https://www.iana.org/assignments/media-types/application/json\">https://www.iana.org/assignments/media-types/application/json</a>), but <code>application/xml</code> does (<a href=\"https://www.iana.org/assignments/media-types/application/xml\" target=\"_blank\" title=\"https://www.iana.org/assignments/media-types/application/xml\">https://www.iana.org/assignments/media-types/application/xml</a>). And all <code>text/*</code> media type also support charset.</p>\n<p>So we decided to follow the FHIR implementation guides. Thank you</p>",
        "id": 153916741,
        "sender_full_name": "Valery Kirichenko",
        "timestamp": 1509364256
    }
]