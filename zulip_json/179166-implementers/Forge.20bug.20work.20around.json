[
    {
        "content": "<p>The bug:<br>\nForge corrupts the choice of valueQuantity from value[x] when you save your work<br>\nFile is unreadable by Simplifier and on reload the structure definition makes no sense<br>\nWork-a-round<br>\nAdd<br>\n**<br>\n<strong>&lt;element id=\"Observation.valueQuantity\"&gt;</strong><br>\n<strong>  &lt;path value=\"Observation.valueQuantity\" /&gt;</strong><br>\n<strong>&lt;type&gt;</strong><br>\n<strong> &lt;code value=\"Quantity\" /&gt;</strong><br>\n<strong> &lt;/type&gt;</strong><br>\n<strong> &lt;/element&gt;</strong><br>\n**<br>\njust before the valueQuantity element in the saved xml. </p>\n<p>Downside, it is re-corrupted every save and you will have to do it every time before you can reload your work or view it in Simplifier.</p>\n<p>Do not know if this applies to other choices in value[x].</p>\n<p>The latest release did not fix this bug.</p>",
        "id": 153895101,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1498235824
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192228\">@Brian Reinhold</span> Thank you for posting this work around. We're aware of issues with the choice data types and are working on solving them in the next release.</p>",
        "id": 153895196,
        "sender_full_name": "Mirjam Baltus",
        "timestamp": 1498465900
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191347\">@Mirjam Baltus</span>  I just tried to create a new implementation guide and got this error after trying to reload the created guide:</p>\n<p>2017-06-26T05:18:59<br>\nForge Forge 15.7 for HL7 FHIR STU3<br>\nMadrid 2017 Edition<br>\nVersion: Version 15.7.0.0<br>\nFHIR Version: FHIR .NET API library for 3.0.0</p>\n<hr>\n<p>ArgumentException in Forge.ViewModels:<br>\n[StorageHandler] Invalid property type 'Markdown', expecting 'FhirString'.<br>\nParameter name: propertyInfo<br>\n   at Forge.ViewModels.StorageHandler.VerifyPropertyType(PropertyInfo propertyInfo, Type type)<br>\n   at Forge.ViewModels.StringStorageHandler`1..ctor(IViewModel property, Base instance, PropertyInfo propertyInfo, Base baseInstance, Boolean isForced)<br>\n   at Forge.ViewModels.StringStorageHandler..ctor(IViewModel property, Base instance, PropertyInfo propertyInfo, Base baseInstance, Boolean isForced)<br>\n   at Forge.ViewModels.ImplementationGuideVM.set_ModelElement(Base value)<br>\n   at Forge.ViewModels.ImplementationGuideVM..ctor(ISessionItem owner, ImplementationGuide model)<br>\n   at Forge.ViewModels.SessionItemVM.CreateResourceVM(SessionItemVM owner, Resource model, String contentDirectory)<br>\n   at Forge.ViewModels.SessionItemVM..ctor(ISessionItem owner, IDocument document, Resource model)<br>\n   at Forge.ViewModels.SessionItemVM.Open(IDocument document, Boolean dontLoad, Boolean asCopy)<br>\n   at Forge.ViewModels.SessionItemVM.Open(Uri url, Boolean dontLoad, Boolean asCopy)<br>\n   at Forge.ViewModels.SessionItemVM.Open(Boolean asCopy)<br>\n   at Forge.ViewModels.SessionItemVM.Open()<br>\n   at Forge.ViewModels.SessionVM.&lt;&gt;c.&lt;onOpen&gt;b__178_0(ISessionItem item)<br>\n   at Forge.ViewModels.SessionVM.&lt;&gt;c__DisplayClass162_0.&lt;executeItemCollectionCommand&gt;b__0()<br>\n   at Forge.Common.UIServices.ExecuteOnUIThread(Action action)<br>\n   at Forge.ViewModels.SessionVM.executeCommand(Action action)</p>\n<p>I cannot see anything wrong with this very simple start:</p>\n<p>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;<br>\n&lt;ImplementationGuide xmlns=\"<a href=\"http://hl7.org/fhir\" target=\"_blank\" title=\"http://hl7.org/fhir\">http://hl7.org/fhir</a>\"&gt;<br>\n  &lt;meta&gt;<br>\n    &lt;lastUpdated value=\"2017-06-26T05:11:39.287-04:00\" /&gt;<br>\n  &lt;/meta&gt;<br>\n  &lt;url value=\"<a href=\"http://pchalliance.org/phdfhir/ImplementationGuide/PhdImplementationGuide\" target=\"_blank\" title=\"http://pchalliance.org/phdfhir/ImplementationGuide/PhdImplementationGuide\">http://pchalliance.org/phdfhir/ImplementationGuide/PhdImplementationGuide</a>\" /&gt;<br>\n  &lt;name value=\"PhdImplementationGuide\" /&gt;<br>\n  &lt;status value=\"draft\" /&gt;<br>\n  &lt;date value=\"2017-06-26T05:10:20.5702816-04:00\" /&gt;<br>\n  &lt;fhirVersion value=\"3.0.1\" /&gt;<br>\n  &lt;package&gt;<br>\n    &lt;name value=\"PhdPackage\" /&gt;<br>\n    &lt;description value=\"This guide provides the mapping of data received from 11073 20601 Personal Health Devices to FHIR resources.\" /&gt;<br>\n    &lt;resource&gt;<br>\n      &lt;example value=\"true\" /&gt;<br>\n      &lt;name value=\"PhdNumericObservation\" /&gt;<br>\n      &lt;description value=\"Base StructureDefinition for Observation Resource\" /&gt;<br>\n      &lt;sourceReference&gt;<br>\n        &lt;reference value=\"<a href=\"http://pchalliance.org/phdfhir/StructureDefinition/PhdNumericObservation\" target=\"_blank\" title=\"http://pchalliance.org/phdfhir/StructureDefinition/PhdNumericObservation\">http://pchalliance.org/phdfhir/StructureDefinition/PhdNumericObservation</a>\" /&gt;<br>\n      &lt;/sourceReference&gt;<br>\n    &lt;/resource&gt;<br>\n  &lt;/package&gt;<br>\n&lt;/ImplementationGuide&gt;</p>\n<p>I can load the PhdNumericObservation resource.<br>\nI am not having much luck. The down side here is I can't even see what Forge is complaining about in the xml to try and find another work around.</p>",
        "id": 153895200,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1498469179
    },
    {
        "content": "<p>Version 15.7 had an issue where you couldn't create a new implementation guide. That issue was resolved in release 16.1. From the error, it seems you're opening the IG in the previous version, is that correct?</p>",
        "id": 153895205,
        "sender_full_name": "Mirjam Baltus",
        "timestamp": 1498470845
    },
    {
        "content": "<p>No, this is version 16.1. Forge indicated no errors at the time of saving the file. I did note when I went to another system, downloaded the xmls from 'git' and opened the implementation guide in Forge, it loaded successfully. However, after saving and reopening, it did not. Got the same error. I made some updates to the single profile in the guide, fixed the 'type' error after the save, and then reloaded. Though I could not re-load the implementation guide, I could reload the profile (I still have to make my fixes ... keep a copy of 'winMerge' open, make a backup of the xml, save in Forge, use winMerge to fix the bug.)</p>",
        "id": 153895219,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1498485346
    },
    {
        "content": "<p>Just noted that in the component 'code' and component 'valueCodeableConcept' that the drop-down for fixed 'system' values does not exist. Its not a problem. I can get the list of values in the Observation.code fixed values and paste them in. But it is an inconsistency in the GUI.</p>",
        "id": 153895220,
        "sender_full_name": "Brian Reinhold",
        "timestamp": 1498485516
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192228\">@Brian Reinhold</span> according to the error message header, you were using the older 15.7 Forge release. This has been fixed in the 16.1 release. Using Forge 16.1,  I can open the above Phd IG xml example succesfully.</p>",
        "id": 153896592,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1499787400
    }
]