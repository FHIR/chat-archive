[
    {
        "content": "<p>Hi, I'm new to this chat so apologies if I'm asking in the wrong place.  We have some code that we create validations schemas.  Previously (dstu2, stu3) we used the dataelements.json to do this.  But the structure of this changed significantly in r4  (<a href=\"https://www.hl7.org/fhir/definitions.json.zip\" target=\"_blank\" title=\"https://www.hl7.org/fhir/definitions.json.zip\">https://www.hl7.org/fhir/definitions.json.zip</a>) AND it seems like the new structure has lost some information, specifically the cardinality for the backbone elements.  I also looked at the fhir.schema.json and it also seems not to have the cardinality.  Am I just missing something?  Thanks!</p>",
        "id": 189320391,
        "sender_full_name": "Marvin Greenberg",
        "timestamp": 1582904162
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 189320565,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1582904268
    },
    {
        "content": "<p>the json schema looks like it has the cardinality to me but it's subtle in json schema</p>",
        "id": 189340056,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1582916448
    },
    {
        "content": "<p>So there is something that says array, 1..1 for 'source' in AuditEvent and 1..* for agent in AuditEvent?</p>",
        "id": 189340443,
        "sender_full_name": "Marvin Greenberg",
        "timestamp": 1582916660
    },
    {
        "content": "<p>not in json schema, no. The type is array or not, and the element is in the required list or not</p>",
        "id": 189340651,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1582916806
    },
    {
        "content": "<p>required list...   Ahah</p>",
        "id": 189340774,
        "sender_full_name": "Marvin Greenberg",
        "timestamp": 1582916887
    },
    {
        "content": "<p>I get it.  So a required elt of type array is 1..*</p>",
        "id": 189340819,
        "sender_full_name": "Marvin Greenberg",
        "timestamp": 1582916924
    },
    {
        "content": "<p>as for the definitions file... that seems pretty screwed up on backbone elements. E.g. Account.coverage somehow magically morphs into <a href=\"http://hl7.org/fhir/StructureDefinition/de-Account.coverage.coverage\" target=\"_blank\" title=\"http://hl7.org/fhir/StructureDefinition/de-Account.coverage.coverage\">http://hl7.org/fhir/StructureDefinition/de-Account.coverage.coverage</a> and the cardinalities are wrong</p>",
        "id": 189340921,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1582916998
    },
    {
        "content": "<p>Thanks.  And I guess, the data elements StructureDefinitions don't have that info for backbone elements because they aren't intended to be a schema</p>",
        "id": 189340996,
        "sender_full_name": "Marvin Greenberg",
        "timestamp": 1582917026
    },
    {
        "content": "<p>I think they are intended to be there</p>",
        "id": 189341021,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1582917042
    },
    {
        "content": "<p>Um, that is what I guess I concluded.  OK.</p>",
        "id": 189341032,
        "sender_full_name": "Marvin Greenberg",
        "timestamp": 1582917051
    },
    {
        "content": "<p>It isn't obvious where to put them the way dataelement is currently structured.</p>",
        "id": 189341073,
        "sender_full_name": "Marvin Greenberg",
        "timestamp": 1582917082
    },
    {
        "content": "<p>Added to the list of R4 known issues: <a href=\"https://confluence.hl7.org/display/FHIR/Known+Issues+with+the+published+FHIR+Specifications\" target=\"_blank\" title=\"https://confluence.hl7.org/display/FHIR/Known+Issues+with+the+published+FHIR+Specifications\">https://confluence.hl7.org/display/FHIR/Known+Issues+with+the+published+FHIR+Specifications</a></p>",
        "id": 189341114,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1582917118
    },
    {
        "content": "<p>But thanks.  I'll see if it is worth right now for me to switch to using the schema.</p>",
        "id": 189341215,
        "sender_full_name": "Marvin Greenberg",
        "timestamp": 1582917165
    },
    {
        "content": "<p>if you're going to switch, just use the structure definitions... they are the formal authority</p>",
        "id": 189341376,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1582917251
    },
    {
        "content": "<p>I am not sure I understand.  The structure definitions in dataelements.json is what we were using - that is missing the backbone cardinality.</p>",
        "id": 189341716,
        "sender_full_name": "Marvin Greenberg",
        "timestamp": 1582917458
    },
    {
        "content": "<p>Maybe you are saying that the schema has certain elements that ARE StructureDefns?  I'm not very familiar with json schema</p>",
        "id": 189341869,
        "sender_full_name": "Marvin Greenberg",
        "timestamp": 1582917556
    },
    {
        "content": "<p>you should use the structure definitions in resources.json and types.json. Or even better, switch to the core package (hl7.fhir.r4.core), which is the same definitions, but the format we'll be maintaining going forward</p>",
        "id": 189342137,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1582917762
    },
    {
        "content": "<p>OK, thanks</p>",
        "id": 189342683,
        "sender_full_name": "Marvin Greenberg",
        "timestamp": 1582918186
    }
]