[
    {
        "content": "<p>I was testing with the validator jar against an IG on my machine that contains a Valueset (that only exists in that IG)<br>\nThe Valueset  only contains an 'include' of a codesystem (a codesystem that only exists in that IG)<br>\nIn other words: when I look at the Valueset in the visualised IG, I see the values of that codesystem nicely shown under the Expansion - so all is well.<br>\nThat IG contains a structureDefinition that uses that Valueset.</p>\n<p>Problem: when running the validator, using -ig and pointing to the locally stored IG, it works well but it gives the warning: 'The value provided (\"&lt;the system of the code&gt;\") is not in the value set &lt;the valueset&gt;\". It seems to me the validator does not take into account the codes of the codesystem that the Valueset refers to. Is this expected behaviour and/or is there a magic trick to make the validator jar aware of the codes that are supposed to be in the valueset as shown in its expansion?</p>",
        "id": 204901089,
        "sender_full_name": "Robin Bosman",
        "timestamp": 1595587174
    },
    {
        "content": "<p>Is the IG available somewhere it could be tested with?</p>",
        "id": 204905948,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1595590921
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/afNNyt1JdTJMcP5wUp_iu1Yi/package.tgz\">package.tgz</a><br>\n<a href=\"/user_uploads/10155/xwz0zFhWbF9Ulk7HmlAZuhjl/Bundle-ex01.xml\">Bundle-ex01.xml</a><br>\nIt is not available on line but I attached it here.  The example uses two 2 IG's:one is available on line. <br>\nSo what I would do is something like this: <br>\njava -jar validator_cli.jar Bundle-ex01.xml -version 4.0.1 -ig <a href=\"https://ehealthplatformstandards.github.io\">https://ehealthplatformstandards.github.io</a> -ig C:\\...\\package.tgz</p>",
        "id": 204907068,
        "sender_full_name": "Robin Bosman",
        "timestamp": 1595591973
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 204907471,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1595592325
    },
    {
        "content": "<p>the problem is something quite different to what you were looking for.</p>",
        "id": 205082858,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1595827427
    },
    {
        "content": "<blockquote>\n<p>The value provided (\"&lt;the system of the code&gt;\") is not in the value set &lt;the valueset&gt;</p>\n</blockquote>\n<p>Indeed, the <code>system</code>is not the code. The problem is here:</p>",
        "id": 205082902,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1595827450
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>  <span class=\"p\">{</span>\n        <span class=\"nt\">&quot;id&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;Claim.item.productOrService.coding.system&quot;</span><span class=\"p\">,</span>\n        <span class=\"nt\">&quot;path&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;Claim.item.productOrService.coding.system&quot;</span><span class=\"p\">,</span>\n<span class=\"err\">...</span>\n        <span class=\"nt\">&quot;binding&quot;</span> <span class=\"p\">:</span> <span class=\"p\">{</span>\n          <span class=\"nt\">&quot;strength&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;extensible&quot;</span><span class=\"p\">,</span>\n          <span class=\"nt\">&quot;valueSet&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;http://www.mycarenet.be/fhir/ValueSet/be-beproductorservice&quot;</span>\n        <span class=\"p\">}</span>\n      <span class=\"p\">}</span>\n</code></pre></div>",
        "id": 205082922,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1595827487
    },
    {
        "content": "<p>the binding should be on the coding, not on the coding.system</p>",
        "id": 205082940,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1595827530
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/_yFbGSMnMl73jNvXg4j8sED9/package.tgz\">package.tgz</a><br>\nTx, Graham - indeed that makes sense! <br>\nHowever, using the validator jar, it still warns the coding is not in the valueset just like in my original question.</p>",
        "id": 205088697,
        "sender_full_name": "Robin Bosman",
        "timestamp": 1595835534
    },
    {
        "content": "<p>what's the exact error message</p>",
        "id": 205103486,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1595847635
    },
    {
        "content": "<p>The Coding provided is not in the value set <a href=\"http://www.mycarenet.be/fhir/ValueSet/be-beproductorservice\">http://www.mycarenet.be/fhir/ValueSet/be-beproductorservice</a>, and a code should come from this value set unless it has no suitable code.  (error message = Not in value set <a href=\"http://www.mycarenet.be/fhir/ValueSet/be-beproductorservice\">http://www.mycarenet.be/fhir/ValueSet/be-beproductorservice</a>)</p>",
        "id": 205110878,
        "sender_full_name": "Robin Bosman",
        "timestamp": 1595853254
    },
    {
        "content": "<p>hmm. a new validator is due out in a few hours. Once it's released (watch <a class=\"stream\" data-stream-id=\"217600\" href=\"/#narrow/stream/217600-tooling.2Freleases\">#tooling/releases</a> ), run it again, and then paste the exact error message here</p>",
        "id": 205111508,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1595853653
    },
    {
        "content": "<p>Warning @ Bundle.entry[9].resource.ofType(Claim).item[0].productOrService.coding[0] (line 344, col21) : The Coding provided (<a href=\"http://www.mycarenet.be/fhir/CodeSystem/nihdi-physiotherapy-pathologysituationcode#fb-51\">http://www.mycarenet.be/fhir/CodeSystem/nihdi-physiotherapy-pathologysituationcode#fb-51</a>) is not in the value set <a href=\"http://www.mycarenet.be/fhir/ValueSet/be-beproductorservice\">http://www.mycarenet.be/fhir/ValueSet/be-beproductorservice</a>, and a code should come from this value set unless it has no suitable code.  (error message = Not in value set <a href=\"http://www.mycarenet.be/fhir/ValueSet/be-beproductorservice\">http://www.mycarenet.be/fhir/ValueSet/be-beproductorservice</a>)<br>\n  Warning @ Bundle.entry[9].resource.item[0].productOrService.coding[0] (line 344, col21) : The Coding provided (<a href=\"http://www.mycarenet.be/fhir/CodeSystem/nihdi-physiotherapy-pathologysituationcode#fb-51\">http://www.mycarenet.be/fhir/CodeSystem/nihdi-physiotherapy-pathologysituationcode#fb-51</a>) is not in the value set <a href=\"http://www.mycarenet.be/fhir/ValueSet/be-beproductorservice\">http://www.mycarenet.be/fhir/ValueSet/be-beproductorservice</a>, and a code should come from this value set unless it has no suitable code.  (error message = Not in value set <a href=\"http://www.mycarenet.be/fhir/ValueSet/be-beproductorservice\">http://www.mycarenet.be/fhir/ValueSet/be-beproductorservice</a>)</p>",
        "id": 205135173,
        "sender_full_name": "Robin Bosman",
        "timestamp": 1595865492
    },
    {
        "content": "<p>it was because the code system was defined as a fragment. One of the checks deep down in the validator's terminology processing forgot to allow for fragments. Fixed next release</p>",
        "id": 205160050,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1595879121
    },
    {
        "content": "<p>Great news &amp; tx for investigating!!</p>",
        "id": 205203238,
        "sender_full_name": "Robin Bosman",
        "timestamp": 1595919585
    }
]