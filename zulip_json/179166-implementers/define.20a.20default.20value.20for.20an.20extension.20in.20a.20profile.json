[
    {
        "content": "<p>I'm trying to define a default value in a profile for an extension element.    I'm defining the value as:<br>\n&lt;extension url=\"blah\"&gt;&lt;valueCode value=\"Blah\"/&gt;&lt;/extension&gt;<br>\nand it passes validation.  But I get an error when it appears to be creating the profile:<br>\n     [java]  ...Profile medicationorder-drugproduct-canadaerx                          0.194 331sec 1485MB<br>\n     [java] Exception in thread \"main\" java.lang.Error: Unhandled type<br>\n     [java]     at org.hl7.fhir.dstu3.formats.XmlParser.composeType(XmlParser.java:30236)<br>\n     [java]     at org.hl7.fhir.dstu3.formats.XmlParser.composeElementDefinition(XmlParser.java:15747)<br>\n     [java]     at org.hl7.fhir.dstu3.formats.XmlParser.composeStructureDefinitionStructureDefinitionSnapshotComponent(XmlParser.java:28083)<br>\n     [java]     at org.hl7.fhir.dstu3.formats.XmlParser.composeStructureDefinition(XmlParser.java:28027)<br>\n     [java]     at org.hl7.fhir.dstu3.formats.XmlParser.composeResource(XmlParser.java:29882)</p>\n<p>I tried looking through the source to see if anyone else had defined a fixed value but I couldn't find it (with admittedly limited grepping).</p>",
        "id": 153842468,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1470352942
    },
    {
        "content": "<p>are you talking about fixed or default value, and what do you mean 'creating the profile'?</p>",
        "id": 153842469,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1470353010
    },
    {
        "content": "<p>a) i want to create a fixed value.  I'm setting the value in the profile spreadsheet in the Value column.<br>\nb) I was assuming that the build was in the creating the profile step.  There were a bunch of \"...Profile blah\" messages when it failed.</p>",
        "id": 153842470,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1470353081
    },
    {
        "content": "<p>which build are you using? You should be using the IG publisher </p>",
        "id": 153842471,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1470353110
    },
    {
        "content": "<p>2016may-buildcorrected.  and the IG publisher wasn't ready when I started.</p>",
        "id": 153842472,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1470353135
    },
    {
        "content": "<p>oh. that fork. </p>",
        "id": 153842473,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1470353163
    },
    {
        "content": "<p>yes, that one.  do you know why I'd be getting that error?  am I not defining the fixed value for the extension properly?</p>",
        "id": 153842474,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1470353269
    },
    {
        "content": "<p>well, the first thing to go and do is fix something in that fork. THe Unhandled type<br>\nexception should say what type is not handled. That would help a lot. If you fix that in the java code and try again, you'll get more information</p>",
        "id": 153842476,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1470353581
    },
    {
        "content": "<p>Unhandled type:Extension</p>",
        "id": 153842482,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1470354248
    },
    {
        "content": "<p>which is what I expected.  in that bit of code (XMLParser.composeType) there is no block that handles extensions.</p>",
        "id": 153842483,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1470354281
    },
    {
        "content": "<p>which makes sense, since \"Extension\" is not an allowable type for default value</p>",
        "id": 153842493,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1470354946
    },
    {
        "content": "<p>hmm, why?  I've defined an extension for my MedicationOrders and I'm creating a profile where I want to fix the value of the code in the extension</p>",
        "id": 153842561,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1470368782
    },
    {
        "content": "<p>because more generally, the type list allowed for \"*\" does not - and should not - include extension</p>",
        "id": 153842562,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1470369123
    },
    {
        "content": "<p>and so you need to walk into the extension and fix the value</p>",
        "id": 153842563,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1470369146
    },
    {
        "content": "<p>ah, okay.  i'll look into doing that.  thanks.</p>",
        "id": 153842564,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1470369174
    }
]