[
    {
        "content": "<p>I am using fhir-net-api STU3. I am simply returning a CapabilityStatement object from an api action method like this </p>\n<div class=\"codehilite\"><pre>    public IActionResult MetaData()\n    {\n        CapabilityStatement capabilityStatement = new CapabilityStatement();\n        CapabilityStatement.SoftwareComponent softwareComponent = new CapabilityStatement.SoftwareComponent();\n        softwareComponent.Name = &quot;Test Fhir Server&quot;;\n        capabilityStatement.Software = softwareComponent;\n\n        return Ok(capabilityStatement);\n    }\n</pre></div>\n\n\n<p>It is fairly returning json response if I set (_format=json) in url but it gives error “406 Not Acceptable” if I set xml in url.</p>\n<p>If I use any simple object say list of strings then it is returning both xml and json.</p>\n<p>I don’t know how to resolve it.</p>\n<p>I shall be very thankful for the help</p>",
        "id": 153880238,
        "sender_full_name": "Muhammad Abubakar Ikram",
        "timestamp": 1490788025
    },
    {
        "content": "<p>There are a bunch of required elements you're missing (status, date, fhirVersion, etc.)  Why the API is happy in JSON but not in XML is a bit weird though.  <span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> ?</p>",
        "id": 153880248,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1490796833
    },
    {
        "content": "<p>I believe the question is about .Net rather than HAPI. Maybe <span class=\"user-mention\" data-user-id=\"191367\">@Brian Postlethwaite</span> can help with this question? <span class=\"user-mention\" data-user-id=\"193100\">@Muhammad Abubakar</span>, please note that there is a \"dotnet\" stream dedicated to FHIR .Net implementations.</p>",
        "id": 153880254,
        "sender_full_name": "Igor Sirkovich",
        "timestamp": 1490797647
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191393\">@Igor Sirkovich</span> I searched that but I didn'nt found that stream kindly put the link I'll post there.<br>\nThe problem is that other objects are returning response in both json and xml problem is only with fhir resources that are in fhir net api stu3</p>\n<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> I'll look into that</p>",
        "id": 153880260,
        "sender_full_name": "Muhammad Abubakar Ikram",
        "timestamp": 1490798293
    },
    {
        "content": "<p>IActionResult is from MVC right?<br>\nThe fhir-net-api is does not work with the default .net serializers, you need to use the fhir serializers provided in the library.<br>\nServers like Spark and my sqlonfhir server use WebApi instead of MVC.<br>\n<a href=\"http://stackoverflow.com/questions/40242939/custom-async-mediatypeformatter-returning-cannot-access-a-closed-stream/40838823?noredirect=1#comment69332848_40838823\" target=\"_blank\" title=\"http://stackoverflow.com/questions/40242939/custom-async-mediatypeformatter-returning-cannot-access-a-closed-stream/40838823?noredirect=1#comment69332848_40838823\">http://stackoverflow.com/questions/40242939/custom-async-mediatypeformatter-returning-cannot-access-a-closed-stream/40838823?noredirect=1#comment69332848_40838823</a><br>\nThere is also <a href=\"https://github.com/furore-fhir/spark/tree/dstu2/develop\" target=\"_blank\" title=\"https://github.com/furore-fhir/spark/tree/dstu2/develop\">https://github.com/furore-fhir/spark/tree/dstu2/develop</a> which is a DSTU2 implementation, and there is a NuGet package <a href=\"https://www.nuget.org/packages?q=Spark.Engine\" target=\"_blank\" title=\"https://www.nuget.org/packages?q=Spark.Engine\">https://www.nuget.org/packages?q=Spark.Engine</a> which has the infrastructure parts of this in it.</p>",
        "id": 153880326,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1490818340
    },
    {
        "content": "<p>Oh alright. Sqlonfhir is open source? </p>",
        "id": 153880356,
        "sender_full_name": "Muhammad Abubakar Ikram",
        "timestamp": 1490852574
    },
    {
        "content": "<p>Spark is (reference to Github project above), sqlonfhir isn't</p>",
        "id": 153880357,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1490853151
    }
]