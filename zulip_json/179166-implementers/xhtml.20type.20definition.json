[
    {
        "content": "<p>Hello all, I ran across an issue with the xhtml type and was hoping to get some information.</p>\n<p>The xhtml type (in datatypes.html) is listed under the \"Special Purpose Data types\" diagram as deriving from Element.  However, following the link points to a usage in Narrative instead of a definition.  Searching through the FHIR xml files (source/datatypes), I cannot find a definition for it.</p>\n<p>I <em>assume</em> it is safe to define as a string for type checking, but didn't know if there are any properties that should be defined, etc.  Is there a definition of the type?</p>\n<p>Thanks!</p>",
        "id": 170490852,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1562706481
    },
    {
        "content": "<p>yes there is a formal definition</p>",
        "id": 170586245,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1562798868
    },
    {
        "content": "<p>Hate to be a bother, but where could I find it?</p>\n<p>I am building TypeScript definitions from the current R4 branch (writing a tool so that language bindings can be exported from local branches to help in prototyping/testing changes).  In parsing all the xml files in source/datatypes, as well as source/[resource]/[resource]-spreadsheet.xml (excluding templates-spreadsheet), there are five referenced types I cannot resolve: xhtml, SimpleQuantity, MoneyQuantity, Logical, and Structure.</p>\n<p>I found where the documentation references some (e.g., SimpleQuantity is on the Restrictions sheet of source/datatypes/quantity.xml), but I could not find that sheet defined in the <a href=\"http://wiki.hl7.org/index.php?title=FHIR_Spreadsheet_Authoring#Element_Definition_Columns\" target=\"_blank\" title=\"http://wiki.hl7.org/index.php?title=FHIR_Spreadsheet_Authoring#Element_Definition_Columns\">Spreadsheet Authoring Guide</a> and attempting to define types from it does not work universally (chokes on other files which use Restrictions differently).</p>\n<p>Adding those five types manually allows everything to work, but I would prefer to pull the definitions from the proper locations.</p>\n<p>Thanks!</p>",
        "id": 170673247,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1562879686
    },
    {
        "content": "<p>you shouldn't parse the spreadsheets, really. Use the structure definitions.</p>",
        "id": 170674132,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1562880390
    },
    {
        "content": "<p>e.g. <a href=\"http://hl7.org/fhir/xhtml.profile.json\" target=\"_blank\" title=\"http://hl7.org/fhir/xhtml.profile.json\">http://hl7.org/fhir/xhtml.profile.json</a>. A similar files exists for all the other types you mentioned</p>",
        "id": 170674182,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1562880439
    },
    {
        "content": "<p>in fact, for all types</p>",
        "id": 170674194,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1562880446
    },
    {
        "content": "<p>so build from the output, not the input</p>",
        "id": 170674216,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1562880470
    },
    {
        "content": "<p>because the java code does stuff that you'll just have to reproduce... so don't....</p>",
        "id": 170674277,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1562880504
    },
    {
        "content": "<p>Ok.  Was trying to make a smaller loop for \"I want to work with this change\".  This is for testing updates as we work on defining them (not intended for production use).</p>\n<p>My goal was to be able to develop the changes in the spreadsheets directly instead of trying to keep multiple language bindings in sync during development and then updating the spreadsheet at the end.</p>",
        "id": 170674776,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1562880948
    },
    {
        "content": "<p>I'm not understanding that at all. what changes? what multiple languages?</p>",
        "id": 170675852,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1562881830
    },
    {
        "content": "<p>I'm working on subscriptions (Argonaut) right now, and there are items like additional fields that are being proposed.  Many of them don't have consensus, and so I am doing client/server prototyping to figure out what works and be able to present feedback.</p>\n<p>In this case, I am using C# on the server, and TypeScript on the client.</p>\n<p>I thought the most sensible workflow would be to define the change in the spreadsheet, then test out the changes in the software.  The problem is that the Java build of the branch takes quite a while to run, so isn't feasible for prototyping.</p>\n<p>The other way I have been working is to make the same changes to each set of software and check them that way, it's just that it introduces another class of possible errors and takes additional time.</p>",
        "id": 170676318,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1562882223
    },
    {
        "content": "<p>i typically hack the structure definitions in that kind of workflow.</p>",
        "id": 170676451,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1562882328
    },
    {
        "content": "<p>I'll try that route next then  <span aria-label=\"grinning\" class=\"emoji emoji-1f600\" role=\"img\" title=\"grinning\">:grinning:</span></p>",
        "id": 170676521,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1562882397
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 170676528,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1562882402
    },
    {
        "content": "<p>If you're familiar with c#, you might take a look at the code that generates the dotnet models using t4 templates.<br>\n<a href=\"https://github.com/FirelyTeam/fhir-net-api/blob/develop-r4/src/Hl7.Fhir.Core/Model/Template-Model.tt\" target=\"_blank\" title=\"https://github.com/FirelyTeam/fhir-net-api/blob/develop-r4/src/Hl7.Fhir.Core/Model/Template-Model.tt\">https://github.com/FirelyTeam/fhir-net-api/blob/develop-r4/src/Hl7.Fhir.Core/Model/Template-Model.tt</a><br>\nAnd do a variation that creates your typescript files.<br>\nIf you had samples, I'd probably be able to assist too.</p>",
        "id": 170680680,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1562886291
    },
    {
        "content": "<p>Thanks Brian! I'll pull that up when I get back to this later today.</p>",
        "id": 170718687,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1562935848
    },
    {
        "content": "<p>Or this: <a href=\"https://github.com/CareEvolution/fhir-net-api/blob/multiversions/src/Hl7.Fhir.Core/Model/Generate.csx\" target=\"_blank\" title=\"https://github.com/CareEvolution/fhir-net-api/blob/multiversions/src/Hl7.Fhir.Core/Model/Generate.csx\">https://github.com/CareEvolution/fhir-net-api/blob/multiversions/src/Hl7.Fhir.Core/Model/Generate.csx</a></p>",
        "id": 170786218,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1563017372
    }
]