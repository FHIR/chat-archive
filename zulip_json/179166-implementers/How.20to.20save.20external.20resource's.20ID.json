[
    {
        "content": "<p>Here is the use case: Hospital A send a resource (e.g. Condition to Hospital B. Hospital B create its own Condition resource with internal id. Hospital B also wants to keep track of Hospital A's id so that it can avoid creating duplicated record when Hospital A send an update of this Condition. Where, in FHIR resource, can external id be saved? I am thinking using identifier field. Is that correct?</p>",
        "id": 173885842,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1566483009
    },
    {
        "content": "<p>Maybe you can leverage the common <code>Meta.source</code> field?<br>\n<a href=\"http://hl7.org/fhir/resource-definitions.html#Meta.source\" target=\"_blank\" title=\"http://hl7.org/fhir/resource-definitions.html#Meta.source\">http://hl7.org/fhir/resource-definitions.html#Meta.source</a></p>",
        "id": 173886476,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1566483434
    },
    {
        "content": "<p>We do use Identifier for that purpose - value = remote id, system = 'synthetic' URI identifying the remote</p>",
        "id": 173887468,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1566484158
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191336\">@Michel Rutten</span> That is a good idea but I forgot to mention that I am using STU3. Meta.source was introduced in R4.</p>",
        "id": 173887739,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1566484276
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191912\">@Michele Mottini</span> Do you also populate Identifier.use and Identifier.type? If so, what the value should be?</p>",
        "id": 173887945,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1566484406
    },
    {
        "content": "<p>Requiring an identifier seems reasonable in that case.<br>\nIdeally this would be set by Hospital A, so they can do a Conditional Update using it (assuming you are using the RESTful API).</p>",
        "id": 173888017,
        "sender_full_name": "Stefan Lang",
        "timestamp": 1566484443
    },
    {
        "content": "<p>No, we do not populate use or type</p>",
        "id": 173888218,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1566484623
    },
    {
        "content": "<p>Please keep in mind that many, but not all resources define an <code>.identifier</code> field.</p>",
        "id": 173888430,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1566484775
    },
    {
        "content": "<p>Regarding the value:<br>\nYou could either have identifier.system like '<a href=\"http://hospital-a.com/fhir/identifiers/condition\" target=\"_blank\" title=\"http://hospital-a.com/fhir/identifiers/condition\">http://hospital-a.com/fhir/identifiers/condition</a>' with identifier.value simply being identical to the id of the resource in hospital A.<br>\nOr just use UUIDs</p>",
        "id": 173888445,
        "sender_full_name": "Stefan Lang",
        "timestamp": 1566484786
    },
    {
        "content": "<p>This came up in the $import discussion. In the <a href=\"https://docs.google.com/document/d/1e9YYtDxc2Yed2RWU27jPLhfyIH0d6IH5Y9ligJUBFZE/edit\" target=\"_blank\" title=\"https://docs.google.com/document/d/1e9YYtDxc2Yed2RWU27jPLhfyIH0d6IH5Y9ligJUBFZE/edit\">May 2019 connectathon doc</a> (\"Guidance for servers -- preserving Resource ids\") it is proposed to preserve them in an extension to Resource.meta. However, this is just a proposal specific to import.</p>",
        "id": 173888568,
        "sender_full_name": "Paul Church",
        "timestamp": 1566484878
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191336\">@Michel Rutten</span> true. So this might not be the global solution, but a 80% solution fulfilling 100% of the need in case of Condition ;-)</p>",
        "id": 173888595,
        "sender_full_name": "Stefan Lang",
        "timestamp": 1566484915
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"197072\">@Paul Church</span> If it's useful elsewhere, maybe it shouldn't be specific to $import ?</p>",
        "id": 173889393,
        "sender_full_name": "Stefan Lang",
        "timestamp": 1566485521
    },
    {
        "content": "<p>Yes - since $import is meant to be a core part of how bulk data is synced between such systems, it will create conventions that can be used in general. I'm just saying this specific proposal is at an early stage.</p>",
        "id": 173890066,
        "sender_full_name": "Paul Church",
        "timestamp": 1566485955
    },
    {
        "content": "<p>My recommendation has been to capture the full URL for the original identifer as Identifier.value and set the Identifier.system to urn:ietf:rfc:3986.  That way you're not creating 'fake' identifier.systems.</p>",
        "id": 173892897,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1566487970
    }
]