[
    {
        "content": "<p>Greetings FHIR Friends,</p>\n<p>I am having a bit of trouble uploading a specific Questionnaire resource to my FHIR server (from localhost to the internet - the FHIR server is online) </p>\n<p>When I try to upload my questionnaire, I am met with the '400 Bad Request' response which reads as follows: </p>\n<p>issue\": [<br>\n            {<br>\n              \"severity\": \"error\",<br>\n              \"code\": \"invalid\",<br>\n              \"diagnostics\": \"Type checking the data: Choice element 'valueExpression' is suffixed with unexpected type 'Expression'\"<br>\n            }<br>\n          ]</p>\n<p>I believe this is rooted from one (or actually maybe several) of my Extension elements, which are defined as follows: </p>\n<p>{<br>\n          \"url\" : \"<a href=\"http://hl7.org/fhir/StructureDefinition/variable\" target=\"_blank\" title=\"http://hl7.org/fhir/StructureDefinition/variable\">http://hl7.org/fhir/StructureDefinition/variable</a>\",<br>\n          \"valueExpression\" : {<br>\n            \"name\": \"scoreExt\",<br>\n            \"language\": \"text/fhirpath\",<br>\n            \"expression\": \"'<a href=\"http://hl7.org/fhir/StructureDefinition/ordinalValue\" target=\"_blank\" title=\"http://hl7.org/fhir/StructureDefinition/ordinalValue\">http://hl7.org/fhir/StructureDefinition/ordinalValue</a>'\"<br>\n          }<br>\n}</p>\n<p>Has anyone ever experienced this error before? I am not seeing a lot online about this specific error type, and I have been checking the Extensibility and Questionnaire documentation pages (<a href=\"http://hl7.org/fhir/extensibility-registry.html\" target=\"_blank\" title=\"http://hl7.org/fhir/extensibility-registry.html\">http://hl7.org/fhir/extensibility-registry.html</a>, <a href=\"https://www.hl7.org/fhir/questionnaire.html\" target=\"_blank\" title=\"https://www.hl7.org/fhir/questionnaire.html\">https://www.hl7.org/fhir/questionnaire.html</a>)</p>",
        "id": 173295319,
        "sender_full_name": "Mike C.",
        "timestamp": 1565879692
    },
    {
        "content": "<p>is this a version issue? What version is the server expecting?</p>",
        "id": 173315079,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565895638
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> Thanks for the reply. My server is running version 3.0.1 - I do not see anything in the Questionnaire resource itself referencing a version. Is there something I should look at in terms of 3.0.1 documentation?</p>",
        "id": 173317980,
        "sender_full_name": "Mike C.",
        "timestamp": 1565897773
    },
    {
        "content": "<p>Expression is a R4 data type. Generally, the whole variable support in Questionnaire is R4 based</p>",
        "id": 173318142,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565897895
    },
    {
        "content": "<blockquote>\n<p>Expression is a R4 data type. Generally, the whole variable support in Questionnaire is R4 based</p>\n</blockquote>\n<p>Ah, okay. Understood. Thank you very much for your replies!</p>",
        "id": 173318605,
        "sender_full_name": "Mike C.",
        "timestamp": 1565898296
    }
]