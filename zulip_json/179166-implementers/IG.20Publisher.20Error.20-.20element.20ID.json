[
    {
        "content": "<p>Hello,</p>\n<p>Using the latest org.hl7.fhir.igpublisher.jar downloaded from <a href=\"http://hl7.org/fhir/downloads.html\" target=\"_blank\" title=\"http://hl7.org/fhir/downloads.html\">http://hl7.org/fhir/downloads.html</a>, the below error has been appearing when running the IG Publisher.  </p>\n<p>\"All element definitions must have an id [snapshot.element.all(id.exists()) and differential.element.all(id.exists())]:\"</p>\n<p>I have attached .zip file containing the full export package from Trifolia.</p>\n<p>Any guidance you can  provide on how to resolve this error would be greatly appreciated.</p>\n<p>Thank you,</p>\n<p>Meenaxi Gosai<br>\nQA Analyst/Engineer<br>\nLantana Consulting Group<br>\nt: 360.450.0545<br>\nMaple Ridge—BC PST</p>\n<p><a href=\"/user_uploads/10155/5kkmzalxGe5mPn_r0daHhn2Z/C-CDA-on-FHIR.zip\" target=\"_blank\" title=\"C-CDA-on-FHIR.zip\">C-CDA-on-FHIR.zip</a></p>",
        "id": 153896954,
        "sender_full_name": "Max Nakamura",
        "timestamp": 1500054960
    },
    {
        "content": "<p>Is it possible that the snapshot generation (based on differential) is not adding in the element/@id? We have included element/@id in the differential that we generate, but when we run it through the ig publisher we still get this error message...</p>",
        "id": 153896955,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1500055772
    },
    {
        "content": "<p>Also note, we were not receiving this error in previous versions of the ig publisher (earlier this week) when we did NOT include element/@id</p>",
        "id": 153896956,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1500055810
    },
    {
        "content": "<p>First step is to try the most recent publisher: <a href=\"http://build.fhir.org/org.hl7.fhir.igpublisher.jar\" target=\"_blank\" title=\"http://build.fhir.org/org.hl7.fhir.igpublisher.jar\">http://build.fhir.org/org.hl7.fhir.igpublisher.jar</a></p>",
        "id": 153896964,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1500058400
    },
    {
        "content": "<p>If the problem still exists, let me know and I'll try to dig.</p>",
        "id": 153896965,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1500058413
    },
    {
        "content": "<p>Hello Lloyd,</p>\n<p>Thank you for your response.  I downloaded the most recent publisher and re-ran the IG Publisher process, but unfortunately, the element error still appears related to all structure definitions.</p>\n<p>Also, a new error is appearing related to composition extensions within the examples with the latest version of the publisher that was not there in previous versions.</p>\n<div class=\"codehilite\"><pre><span></span> &quot;Error at 1, 1: Premature ExpressionNode termination at unexpected token &quot;type&quot;.\n</pre></div>\n\n\n<p>Best Regards,</p>\n<p>Meenaxi Gosai<br>\nQA Analyst/Engineer<br>\nLantana Consulting Group<br>\nt: 360.450.0545<br>\nMaple Ridge—BC PST</p>",
        "id": 153897074,
        "sender_full_name": "Max Nakamura",
        "timestamp": 1500298336
    },
    {
        "content": "<p>I took a quick look at CCDA-on-FHIR-Authorization.xml.  You have an id attribute specified on the root element but not on any of the others and the id that is specified isn't valid as per the rules for id.  My guess is that the tool is either trying to use your id and choking or presuming all elements will have an id because you have one on the first element.  There should either be no ids or they should all be present and all be correct (using the path + slicename syntax)</p>",
        "id": 153897086,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1500304846
    },
    {
        "content": "<p>Another error here. I've got a StructureDefinition containing the following:<br>\n    &lt;element id=\"Composition.subject\"&gt;<br>\n      &lt;path value=\"Composition.subject\" /&gt;<br>\n      &lt;type&gt;<br>\n        &lt;code value=\"Reference\" /&gt;<br>\n        &lt;targetProfile value=\"<a href=\"http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient\" target=\"_blank\" title=\"http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient\">http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient</a>\" /&gt;<br>\n      &lt;/type&gt;<br>\n    &lt;/element&gt;</p>\n<p>However, when I run the IG publisher the differential (and snapshot for that matter) show the following in the generated HTML:</p>\n<p>subject  Σ 1..1 Reference(Resource)</p>\n<p>The StructureDefinition in question can be found here:<br>\n<a href=\"https://github.com/HL7/ccda-on-fhir/blob/master/resources/structuredefinition/CCDA-on-FHIR-US-Realm-Header.xml\" target=\"_blank\" title=\"https://github.com/HL7/ccda-on-fhir/blob/master/resources/structuredefinition/CCDA-on-FHIR-US-Realm-Header.xml\">https://github.com/HL7/ccda-on-fhir/blob/master/resources/structuredefinition/CCDA-on-FHIR-US-Realm-Header.xml</a></p>",
        "id": 153897087,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1500304941
    },
    {
        "content": "<p>That's very weird.  If you can send me a version of the IG that has the id issue fixed, I'll try running it through the debuggers and see if I can figure out the other issues.</p>",
        "id": 153897088,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1500305183
    },
    {
        "content": "<p>I'll remove the offending IDs and check them into github after my next call.</p>",
        "id": 153897092,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1500305530
    },
    {
        "content": "<p>how is your config file set up?</p>",
        "id": 153897094,
        "sender_full_name": "Eric Haas",
        "timestamp": 1500305698
    },
    {
        "content": "<p>i.e., ig.json</p>",
        "id": 153897095,
        "sender_full_name": "Eric Haas",
        "timestamp": 1500305717
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> I removed the offending id attributes and checked everything back into github. <br>\n<span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> All the files (including the config file) are in github here:<br>\n<a href=\"https://github.com/HL7/ccda-on-fhir\" target=\"_blank\" title=\"https://github.com/HL7/ccda-on-fhir\">https://github.com/HL7/ccda-on-fhir</a></p>\n<p>The ig.json file is called C-CDA_on_FHIR.json. Should it be renamed to ig.json? Not sure if that is important or not.</p>",
        "id": 153897099,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1500309220
    },
    {
        "content": "<p>I think that the web-hook thingy looks for ig.json.  I have never named it anything else.  <span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> ?</p>",
        "id": 153897107,
        "sender_full_name": "Eric Haas",
        "timestamp": 1500312366
    },
    {
        "content": "<p>Ok, renamed to ig.json and committed.</p>",
        "id": 153897108,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1500312574
    },
    {
        "content": "<p>Hello Lloyd,</p>\n<p>Sean updated Trifolia to remove all of the \"&lt;element id=\", and I exported a new FHIR Build Package from Trifolia (attached to this ticket) and confirmed the resources folder contained no files with \"&lt;element id=\".  </p>\n<p>Unfortunately, When I ran the IG Publisher,  the \"error All element definitions must have an id [snapshot.element.all(id.exists()) and differential.element.all(id.exists())]\" still persists.  </p>\n<p>Please advise,</p>\n<p>Thank you,</p>\n<p>Meenaxi Gosai<a href=\"/user_uploads/10155/75knxetLxigKFUuUtapUHiLn/C-CDA-on-FHIR.zip\" target=\"_blank\" title=\"C-CDA-on-FHIR.zip\">C-CDA-on-FHIR.zip</a></p>",
        "id": 153897124,
        "sender_full_name": "Max Nakamura",
        "timestamp": 1500321611
    },
    {
        "content": "<p>I can verify what Meenaxi said, but after some digging I think it is a legit error. </p>\n<p>Per <a href=\"http://hl7.org/fhir/structuredefinition.html\" target=\"_blank\" title=\"http://hl7.org/fhir/structuredefinition.html\">http://hl7.org/fhir/structuredefinition.html</a><br>\nsdf-16: All element definitions must have unique ids (snapshot) (expression : snapshot.element.id.trace('ids').isDistinct())<br>\nsdf-17: All element definitions must have unique ids (diff) (expression : differential.element.id.trace('ids').isDistinct())</p>\n<p>So I don't think it is legal to have no id attributes on ElementDefintions.</p>",
        "id": 153897127,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1500322173
    },
    {
        "content": "<p>Dang... this means I need to add them back in</p>",
        "id": 153897148,
        "sender_full_name": "Sean McIlvenna",
        "timestamp": 1500323806
    },
    {
        "content": "<p>I have IG files without it, but they're 2.0 resources, so that may be why it's not complaining.  If you add them, make sure you use the correct values for them.</p>",
        "id": 153897167,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1500345871
    },
    {
        "content": "<p>so is this sorted? I'm back on deck properly and trying to catch up</p>",
        "id": 153898027,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1500969330
    },
    {
        "content": "<p>Yes, the spec seems to require them, so for C-CDA on FHIR I opened the files in Forge and it added the IDs where they were missing. We will update Trifolia to include them from now on (and to be in the correct path:slice format).</p>",
        "id": 153898061,
        "sender_full_name": "Rick Geimer",
        "timestamp": 1500985422
    },
    {
        "content": "<p>the publisher should just auto-populate them</p>",
        "id": 153898062,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1500985452
    },
    {
        "content": "<p>on both differential and snapshot</p>",
        "id": 153898063,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1500985460
    }
]