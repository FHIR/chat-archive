[
    {
        "content": "<p>I'm trying to validate some FHIR Resources <span class=\"user-mention\" data-user-id=\"191381\">@Jason Walonoski</span>  produced with Synthea, but see some errors that I don't understand.  Attached at the end are two resources that exhibit the errors so others can attempt to reproduce.</p>\n<p>Validating the PraciticionerRole example resource returns 2 errors and 2 warnings:</p>\n<p><code>Error @ PractitionerRole.code[0].coding[0] (line 19, col10) : The code system \"http://nucc.org/provider-taxonomy\" is not known for the code \"208D00000X\"; The code provided (http://nucc.org/provider-taxonomy#208D00000X) is not  valid in the value set All codes known to the system for 'http://nucc.org/provider-taxonomy#208D00000X'</code></p>\n<p><code>Error @ PractitionerRole.specialty[0].coding[0] (line 31, col10) : The code system \"http://nucc.org/provider-taxonomy\" is not known for the code \"208D00000X\"; The code provided (http://nucc.org/provider-taxonomy#208D00000X) is not  valid in the value set All codes known to the system for 'http://nucc.org/provider-taxonomy#208D00000X'</code></p>\n<p><code>Warning @ PractitionerRole.code[0] (line 17, col6) : None of the codes provided are in the value set http://hl7.org/fhir/us/core/ValueSet/us-core-provider-role (http://hl7.org/fhir/us/core/ValueSet/us-core-provider-role, and a code should come from this value set unless it has no suitable code) (codes = http://nucc.org/provider-taxonomy#208D00000X)</code></p>\n<p><code>Warning @ PractitionerRole.specialty[0] (line 29, col6) : None of the codes provided are in the value set http://hl7.org/fhir/us/core/ValueSet/us-core-provider-specialty (http://hl7.org/fhir/us/core/ValueSet/us-core-provider-specialty, and a code should come from this value set unless it has no suitable code) (codes = http://nucc.org/provider-taxonomy#208D00000X)</code></p>\n<p>I was able to find the <a href=\"http://tx.fhir.org/r4/CodeSystem?_format=text/xhtml&amp;search-id=19f502f2-4ba5-4228-993f-b3f1080afb&amp;&amp;url=http%3A//nucc.org/provider%2Dtaxonomy&amp;_sort:asc=_content&amp;_format=json\" target=\"_blank\" title=\"http://tx.fhir.org/r4/CodeSystem?_format=text/xhtml&amp;search-id=19f502f2-4ba5-4228-993f-b3f1080afb&amp;&amp;url=http%3A//nucc.org/provider%2Dtaxonomy&amp;_sort:asc=_content&amp;_format=json\"><code>nucc-provider-taxonomy</code> CodeSystem on tx.fhir.org</a> and the code, <code>208D00000X</code>, appears in the CodeSystem resource.  The code also appears in both ValueSets in the US Core IG (<a href=\"https://www.hl7.org/fhir/us/core/ValueSet-us-core-provider-role.html\" target=\"_blank\" title=\"https://www.hl7.org/fhir/us/core/ValueSet-us-core-provider-role.html\">provider-role</a> and <a href=\"https://www.hl7.org/fhir/us/core/ValueSet-us-core-provider-specialty.html\" target=\"_blank\" title=\"https://www.hl7.org/fhir/us/core/ValueSet-us-core-provider-specialty.html\">provider-specialty</a>), but I <a href=\"http://tx.fhir.org/r4/ValueSet/_search?_content=&amp;_content%3Amissing=&amp;_filter=&amp;_filter%3Amissing=&amp;_id=&amp;_id%3Amissing=&amp;_lastUpdated=&amp;_lastUpdated%3Amissing=&amp;_lastUpdated%3Abefore=&amp;_lastUpdated%3Aafter=&amp;_profile=&amp;_profile%3Amissing=&amp;_query=&amp;_query%3Amissing=&amp;_security=&amp;_security%3Amissing=&amp;_source=&amp;_source%3Amissing=&amp;_tag=&amp;_tag%3Amissing=&amp;_text=&amp;_text%3Amissing=&amp;code=&amp;code%3Amissing=&amp;context=&amp;context%3Amissing=&amp;context-quantity=&amp;context-quantity%3Amissing=&amp;context-type=&amp;context-type%3Amissing=&amp;context-type-quantity=&amp;context-type-quantity%3Amissing=&amp;context-type-value=&amp;context-type-value%3Amissing=&amp;date=&amp;date%3Amissing=&amp;date%3Abefore=&amp;date%3Aafter=&amp;description=&amp;description%3Amissing=&amp;expansion=&amp;expansion%3Amissing=&amp;identifier=&amp;identifier%3Amissing=&amp;jurisdiction=&amp;jurisdiction%3Amissing=&amp;name=&amp;name%3Amissing=&amp;publisher=&amp;publisher%3Amissing=&amp;reference=&amp;reference%3Amissing=&amp;status=&amp;status%3Amissing=&amp;title=&amp;title%3Amissing=&amp;url=http%3A%2F%2Fhl7.org%2Ffhir%2Fus%2Fcore%2FValueSet%2Fus-core-provider-role&amp;url%3Amissing=&amp;version=&amp;version%3Amissing=&amp;_text=&amp;search-offset=&amp;_count=&amp;_sort=_content\" target=\"_blank\" title=\"http://tx.fhir.org/r4/ValueSet/_search?_content=&amp;_content%3Amissing=&amp;_filter=&amp;_filter%3Amissing=&amp;_id=&amp;_id%3Amissing=&amp;_lastUpdated=&amp;_lastUpdated%3Amissing=&amp;_lastUpdated%3Abefore=&amp;_lastUpdated%3Aafter=&amp;_profile=&amp;_profile%3Amissing=&amp;_query=&amp;_query%3Amissing=&amp;_security=&amp;_security%3Amissing=&amp;_source=&amp;_source%3Amissing=&amp;_tag=&amp;_tag%3Amissing=&amp;_text=&amp;_text%3Amissing=&amp;code=&amp;code%3Amissing=&amp;context=&amp;context%3Amissing=&amp;context-quantity=&amp;context-quantity%3Amissing=&amp;context-type=&amp;context-type%3Amissing=&amp;context-type-quantity=&amp;context-type-quantity%3Amissing=&amp;context-type-value=&amp;context-type-value%3Amissing=&amp;date=&amp;date%3Amissing=&amp;date%3Abefore=&amp;date%3Aafter=&amp;description=&amp;description%3Amissing=&amp;expansion=&amp;expansion%3Amissing=&amp;identifier=&amp;identifier%3Amissing=&amp;jurisdiction=&amp;jurisdiction%3Amissing=&amp;name=&amp;name%3Amissing=&amp;publisher=&amp;publisher%3Amissing=&amp;reference=&amp;reference%3Amissing=&amp;status=&amp;status%3Amissing=&amp;title=&amp;title%3Amissing=&amp;url=http%3A%2F%2Fhl7.org%2Ffhir%2Fus%2Fcore%2FValueSet%2Fus-core-provider-role&amp;url%3Amissing=&amp;version=&amp;version%3Amissing=&amp;_text=&amp;search-offset=&amp;_count=&amp;_sort=_content\">wasn't able to find the ValueSet on tx.fhir.org.</a>.</p>\n<p>It seems like this is a valid code and that the relevant CodeSystem exists on the terminology server.  <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  do you have any insight into why these errors are appearing or if I'm missing something?</p>\n<p>A similar result was observed with the Immunization resource:</p>\n<p><code>Error @ Immunization.vaccineCode.coding[0] (line 11, col8) : The code system \"http://hl7.org/fhir/sid/cvx\" is not known for the code \"140\"; The code provided (http://hl7.org/fhir/sid/cvx#140) is not  valid in the value set All codes known to the system for 'http://hl7.org/fhir/sid/cvx#140'</code></p>\n<p><code>Warning @ Immunization.vaccineCode (line 10, col16) : None of the codes provided are in the value set http://hl7.org/fhir/us/core/ValueSet/us-core-vaccines-cvx (http://hl7.org/fhir/us/core/ValueSet/us-core-vaccines-cvx, and a code should come from this value set unless it has no suitable code) (codes = http://hl7.org/fhir/sid/cvx#140)</code></p>\n<p>Let me know if there's anything else I can provide or try.  Initially these were validated in a Bundle, but I extracted them so it's easier to observe the errors and warnings.</p>\n<hr>\n<p>Examples and settings to reproduce:</p>\n<p>Tool Version: <code>FHIR Validation tool Version 4.1.7-SNAPSHOT - Built 2019-11-21T18:18:33.170+11:00 - Git 45df4708d77b</code></p>\n<p><a href=\"/user_uploads/10155/meM3-nJfMhdJ4_XrVmgBuwFu/practictioner-role-example.json\" target=\"_blank\" title=\"practictioner-role-example.json\">practictioner-role-example.json</a><br>\n<a href=\"/user_uploads/10155/3UTlmO7KTMkznttcMbGmA6ry/immunization-example.json\" target=\"_blank\" title=\"immunization-example.json\">immunization-example.json</a> <br>\n<a href=\"user_uploads/10155/SNgdQsW_spjw_L2QODujfB6V/resources-in-bundle.json\" target=\"_blank\" title=\"user_uploads/10155/SNgdQsW_spjw_L2QODujfB6V/resources-in-bundle.json\">resources-in-bundle.json</a></p>\n<p>References/Links<br>\n<a href=\"https://www.hl7.org/fhir/us/core/ValueSet-us-core-provider-role.html\" target=\"_blank\" title=\"https://www.hl7.org/fhir/us/core/ValueSet-us-core-provider-role.html\">US Core Provider Role ValueSet</a><br>\n<a href=\"https://www.hl7.org/fhir/us/core/ValueSet-us-core-provider-specialty.html\" target=\"_blank\" title=\"https://www.hl7.org/fhir/us/core/ValueSet-us-core-provider-specialty.html\">US Core Provider Speciality ValueSet</a></p>\n<p><a href=\"http://tx.fhir.org/r4/CodeSystem?_format=text/xhtml&amp;search-id=19f502f2-4ba5-4228-993f-b3f1080afb&amp;&amp;url=http%3A//nucc.org/provider%2Dtaxonomy&amp;_sort:asc=_content&amp;_format=json\" target=\"_blank\" title=\"http://tx.fhir.org/r4/CodeSystem?_format=text/xhtml&amp;search-id=19f502f2-4ba5-4228-993f-b3f1080afb&amp;&amp;url=http%3A//nucc.org/provider%2Dtaxonomy&amp;_sort:asc=_content&amp;_format=json\">NUCC Provider Taxonomy CodeSystem on tx.fhir.org</a><br>\n<a href=\"http://tx.fhir.org/r4/CodeSystem?_format=text/xhtml&amp;search-id=f52eecab-8d47-48de-977b-4d7c74964d&amp;&amp;url=http%3A//hl7.org/fhir/sid/cvx&amp;_sort:asc=_content&amp;_format=json\" target=\"_blank\" title=\"http://tx.fhir.org/r4/CodeSystem?_format=text/xhtml&amp;search-id=f52eecab-8d47-48de-977b-4d7c74964d&amp;&amp;url=http%3A//hl7.org/fhir/sid/cvx&amp;_sort:asc=_content&amp;_format=json\">CVX CodeSystem on tx.fhir.org</a></p>",
        "id": 181653310,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1574439926
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 181670989,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1574452106
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"197651\">@Reece Adamson</span> you found a bug in <a href=\"http://tx.fhir.org\" target=\"_blank\" title=\"http://tx.fhir.org\">tx.fhir.org</a> to do with handling code systems without versions. Fixed shortly</p>",
        "id": 181764660,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1574608566
    },
    {
        "content": "<p>Thanks for the quick fix! Just tried again and it works as expected.  Is the <a href=\"http://tx.fhir.org\" target=\"_blank\" title=\"http://tx.fhir.org\">tx.fhir.org</a> server open source and do you have a link for the fix?  I've been working with the validator more and more lately and would like to learn more about how it works.</p>",
        "id": 181829163,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1574693630
    },
    {
        "content": "<p>sure. fix here:</p>",
        "id": 181836636,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1574698315
    },
    {
        "content": "<p><a href=\"https://github.com/grahamegrieve/fhirserver/commit/d71d04db334d721de1b2ba639dd1aca6a6d80f87\" target=\"_blank\" title=\"https://github.com/grahamegrieve/fhirserver/commit/d71d04db334d721de1b2ba639dd1aca6a6d80f87\">https://github.com/grahamegrieve/fhirserver/commit/d71d04db334d721de1b2ba639dd1aca6a6d80f87</a></p>",
        "id": 181836707,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1574698358
    },
    {
        "content": "<p>I'm glad you asked. I just noticed my fix introduced a different bug....</p>",
        "id": 181837040,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1574698556
    }
]