[
    {
        "content": "<p>It's my first time using the FHIR validator and I'm having two trouble points right now:<br>\n1) I have what looks like a valid Duration but the validator is complaining about my unit code of 'd': The value provided ('d') is not in the value set <a href=\"http://hl7.org/fhir/ValueSet/units-of-time\" target=\"_blank\" title=\"http://hl7.org/fhir/ValueSet/units-of-time\">http://hl7.org/fhir/ValueSet/units-of-time</a> (<a href=\"http://hl7.org/fhir/ValueSet/units-of-time\" target=\"_blank\" title=\"http://hl7.org/fhir/ValueSet/units-of-time\">http://hl7.org/fhir/ValueSet/units-of-time</a>, and a code is required from this value set)<br>\n2) I have a validator.pack generated by my IGuide and I'm specifying it on the command line but it is not handing my profile constraints. As an example, my drug prescription profile makes medicationCodeableConcept mandatory but the example I'm giving it doesn't have that.</p>",
        "id": 153862777,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1481311303
    },
    {
        "content": "<p>re #2 - My example declares in the meta/profile that it is a drug prescription, but that might not be enough?  I've also tried passing the profile URL on the command-line but that doesn't work:<br>\nError @ MedicationRequest (line 3, col48) : StructureDefinition reference \"StructureDefinition-canadaerx-drug-prescription.xml\" could not be resolved</p>",
        "id": 153862779,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1481311462
    },
    {
        "content": "<p>hmm. units of time is problematic because it's expanded by the server, not the validator. it's my budgie for terminology service connectivity issues. </p>",
        "id": 153862780,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1481311620
    },
    {
        "content": "<p>the error suggests that you aren't passing the full profile URL </p>",
        "id": 153862781,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1481311643
    },
    {
        "content": "<p>i tried both the filename and the full URL:<br>\nError @ MedicationRequest (line 3, col48) : StructureDefinition reference \"<a href=\"http://infoway-inforoute.ca/fhir/StructureDefinition/canadaerx-drug-prescription.xml\" target=\"_blank\" title=\"http://infoway-inforoute.ca/fhir/StructureDefinition/canadaerx-drug-prescription.xml\">http://infoway-inforoute.ca/fhir/StructureDefinition/canadaerx-drug-prescription.xml</a>\" could not be resolved</p>",
        "id": 153862783,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1481311678
    },
    {
        "content": "<p>how are you telling the validator about the ig? or is this inside the IG?</p>",
        "id": 153862784,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1481311715
    },
    {
        "content": "<p>it should be inside the IG:<br>\njava -Dfile.encoding=UTF-8 -jar ../framework/hl7files/org.hl7.fhir.validator.jar MedicationRequest-medrx0304.xml -defn igpack.zip -ig validator.pack  -profile <a href=\"http://infoway-inforoute.ca/fhir/StructureDefinition/canadaerx-drug-prescription.xml\" target=\"_blank\" title=\"http://infoway-inforoute.ca/fhir/StructureDefinition/canadaerx-drug-prescription.xml\">http://infoway-inforoute.ca/fhir/StructureDefinition/canadaerx-drug-prescription.xml</a></p>",
        "id": 153862785,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1481311763
    },
    {
        "content": "<p>where the validator.pack has been produced by the IGPublisher</p>",
        "id": 153862786,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1481311790
    },
    {
        "content": "<p>that should work</p>",
        "id": 153862789,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1481312200
    },
    {
        "content": "<p>ok, just checked in a few fixes. Wait for build 10546 to be built, and then try again with that validator. Also note that the canonical URL does not include the .xml</p>",
        "id": 153862818,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1481318235
    },
    {
        "content": "<p>I thought this should work but it doesn't :<br>\n   java -jar /Users/ehaas/Downloads/validator/org.hl7.fhir.validator.jar ${f} -defn \"${path}\"/output/definitions.xml.zip</p>\n<p>Where the definitions.xml.zip is generated by the IG.  <br>\n${f} is an an xml example instance</p>\n<p>get this: </p>\n<p>*FAILURE* validating /Users/ehaas/Documents/FHIR/US-Meds/examples/meddispense-1.xml:  error:1 warn:0 info:0<br>\n     Fatal @ MedicationDispense (line 1, col49) : This does not appear to be a FHIR resource (unknown namespace/name  <br>\n    '<a href=\"http://hl7.org/fhir::MedicationDispense\" target=\"_blank\" title=\"http://hl7.org/fhir::MedicationDispense\">http://hl7.org/fhir::MedicationDispense</a>')</p>\n<p>looking at Jean's stuff  it looks like I am missing something but I must confess haven't seen that documented anywhere.   Looked here : <a href=\"http://build.fhir.org/validation.html#jar\" target=\"_blank\" title=\"http://build.fhir.org/validation.html#jar\">http://build.fhir.org/validation.html#jar</a></p>",
        "id": 153862894,
        "sender_full_name": "Eric Haas",
        "timestamp": 1481403497
    },
    {
        "content": "<p>the bit about \"validator.pack\"  Oh and  the sample xml is valid.</p>",
        "id": 153862895,
        "sender_full_name": "Eric Haas",
        "timestamp": 1481403533
    },
    {
        "content": "<p>your validator is missing the base definitions?</p>",
        "id": 153862898,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1481404084
    },
    {
        "content": "<p>thanks for the updated documentation at  : <a href=\"http://build.fhir.org/validation.html#jar\" target=\"_blank\" title=\"http://build.fhir.org/validation.html#jar\">http://build.fhir.org/validation.html#jar</a></p>",
        "id": 153862954,
        "sender_full_name": "Eric Haas",
        "timestamp": 1481475205
    },
    {
        "content": "<p>Sweet!  this  works for local validation of IG examples.....</p>\n<div class=\"codehilite\"><pre>java -jar [path]/org.hl7.fhir.validator.jar my-example.xml -defn [path]/igpack.zip\n -ig [path]/validator.pack\n</pre></div>\n\n\n<p>but I get this warning:</p>\n<div class=\"codehilite\"><pre>  Warning @ MedicationDispense.medicationCodeableConcept (line 9, col29) : ValueSet\n  http://hl7.org/fhir/us/core/ValueSet/us-core-medication-codes not found\n</pre></div>\n\n\n<p>Since that is a dependency in the IG - am I missing something?</p>",
        "id": 153862959,
        "sender_full_name": "Eric Haas",
        "timestamp": 1481482783
    },
    {
        "content": "<p>maybe I should include the dependent packs in the other pack so there's no need to chase them in the validator</p>",
        "id": 153862966,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1481486287
    },
    {
        "content": "<p>so validator.pack would contains the dependencies ?</p>",
        "id": 153862971,
        "sender_full_name": "Eric Haas",
        "timestamp": 1481486916
    },
    {
        "content": "<p>yes it would. As it is now, you have to find it and supply the reference, and you might get the wrong vrsion</p>",
        "id": 153862972,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1481486947
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> </p>\n<p>I am using the following command with the official FHIR Validator from <a href=\"https://www.hl7.org/fhir/downloads.html\" target=\"_blank\" title=\"https://www.hl7.org/fhir/downloads.html\">https://www.hl7.org/fhir/downloads.html</a></p>\n<p>...<br>\njava -jar org.hl7.fhir.validator.jar dh-Patient-base-example-Max.xml -defn definitions.xml.zip -profile <a href=\"http://pyrohealth.net/test/stu3/fhir/StructureDefinition/8517d4e9-f668-43e7-9c82-85cd2d7011c9\" target=\"_blank\" title=\"http://pyrohealth.net/test/stu3/fhir/StructureDefinition/8517d4e9-f668-43e7-9c82-85cd2d7011c9\">http://pyrohealth.net/test/stu3/fhir/StructureDefinition/8517d4e9-f668-43e7-9c82-85cd2d7011c9</a> -output PublishedOutput004.xml<br>\n...</p>\n<p>I am getting the following error as in the attached snapshot <br>\n<a href=\"/user_uploads/10155/LXPkJJxbXHvinaee4I2AM8hg/2017-06-15_115927.jpg\" target=\"_blank\" title=\"2017-06-15_115927.jpg\">2017-06-15_115927.jpg</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/LXPkJJxbXHvinaee4I2AM8hg/2017-06-15_115927.jpg\" target=\"_blank\" title=\"2017-06-15_115927.jpg\"><img src=\"/user_uploads/10155/LXPkJJxbXHvinaee4I2AM8hg/2017-06-15_115927.jpg\"></a></div><p>I am concerened about this error &gt;&gt;&gt; StructureDefinition reference \"<a href=\"http://pyrohealth.net/test/stu3/fhir/StructureDefinition/8517d4e9-f668-43e7-9c82-85cd2d7011c9\" target=\"_blank\" title=\"http://pyrohealth.net/test/stu3/fhir/StructureDefinition/8517d4e9-f668-43e7-9c82-85cd2d7011c9\">http://pyrohealth.net/test/stu3/fhir/StructureDefinition/8517d4e9-f668-43e7-9c82-85cd2d7011c9</a>\" could not be resolved</p>\n<p>What is the reason I am getting this error ?</p>\n<p>Thanks.</p>",
        "id": 153893949,
        "sender_full_name": "Vikas Mittal",
        "timestamp": 1497492188
    },
    {
        "content": "<p>because the validator doesn't know about it </p>",
        "id": 153893956,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1497500322
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> . can you please give some more hint as where/which file to look into and probably what part can be having error. or may be any link of the documentation in relation to such errors. <br>\nAs I did add the \"-profile <a href=\"http://pyrohealth.net/test/stu3/fhir/StructureDefinition/8517d4e9-f668-43e7-9c82-85cd2d7011c9\" target=\"_blank\" title=\"http://pyrohealth.net/test/stu3/fhir/StructureDefinition/8517d4e9-f668-43e7-9c82-85cd2d7011c9\">http://pyrohealth.net/test/stu3/fhir/StructureDefinition/8517d4e9-f668-43e7-9c82-85cd2d7011c9</a>\" parameter in the command line while running the validator.</p>",
        "id": 153893957,
        "sender_full_name": "Vikas Mittal",
        "timestamp": 1497501117
    },
    {
        "content": "<p>then it should be resolved. I'd have to debug it  to know what's the problem</p>",
        "id": 153893958,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1497501181
    },
    {
        "content": "<p>Thanks Grahame. Do you need the patient xml file which I used? </p>",
        "id": 153893959,
        "sender_full_name": "Vikas Mittal",
        "timestamp": 1497501263
    },
    {
        "content": "<p>attaching here for your reference anyway. Cheers.<br>\n<a href=\"/user_uploads/10155/2yqr40LJn-ipl2PS1p6NvlOa/dh-Patient-base-example-Max.xml\" target=\"_blank\" title=\"dh-Patient-base-example-Max.xml\">dh-Patient-base-example-Max.xml</a> </p>",
        "id": 153893960,
        "sender_full_name": "Vikas Mittal",
        "timestamp": 1497501431
    }
]