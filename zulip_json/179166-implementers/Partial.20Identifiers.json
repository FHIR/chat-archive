[
    {
        "content": "<p>What is an appropriate way to express an 'identifier' resource where a portion of the identifier value must be suppressed due to security/legal or other reasons.  Examples: last 4 digits of a U.S. Social Security number, last 4 digits of a credit card number, etc.</p>",
        "id": 153821265,
        "sender_full_name": "Bruce Tietjen",
        "timestamp": 1460478305
    },
    {
        "content": "<p>The issue we specifically wish to address is the last 4 digits of the Social Security number. For legal reasons, using the full SSN must be limited to specific use cases.  Use of the last 4 digits is a more common situation and hopefully could be represented in much the same way that the full SSN is represented. The full SSN is represented using &lt;system value=\"http://hl7.org/fhir/sid/us-ssn\"/&gt; in the identifier. It would be helpful if there were a corresponding system for the last 4 digits -- maybe something like: &lt;system value=\"http://hl7.org/fhir/sid/us-ssn4\"/&gt;</p>",
        "id": 153821268,
        "sender_full_name": "Bruce Tietjen",
        "timestamp": 1460481661
    },
    {
        "content": "<p>Similar use-case can exist for credit card numbers, phone numbers, postal codes and a bunch of other things.  Options could include: Creating an extension called \"partial value\" that could appear in those data types.  Another alternative would be to have specific \"use\" types for partial identifiers, partial phone numbers, partial addresses, etc.  A third possibility would be to have a convention of replacing missing digits with leading asterisks and accept that incorrect matches could occur.</p>\n<p>Preferences?  Other ideas?</p>",
        "id": 153821271,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1460486842
    },
    {
        "content": "<p>There's an extension for this already</p>",
        "id": 153821286,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1460488345
    },
    {
        "content": "<p><a href=\"http://hl7-fhir.github.io/extension-rendered-value.html\" target=\"_blank\" title=\"http://hl7-fhir.github.io/extension-rendered-value.html\">http://hl7-fhir.github.io/extension-rendered-value.html</a></p>",
        "id": 153821287,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1460488383
    },
    {
        "content": "<p>Do you know why we didn't allow for it on string generally?  (Or at least on postal code?)</p>",
        "id": 153821295,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1460489933
    },
    {
        "content": "<p>I didn't define it</p>",
        "id": 153821303,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1460491307
    },
    {
        "content": "<p>If that is used then should really be including the subsetted met tag right?</p>",
        "id": 153821334,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1460497020
    },
    {
        "content": "<p>As shouldn't just be posting that resource back witgout knowning that the content wasn't complete.</p>",
        "id": 153821335,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1460497039
    },
    {
        "content": "<p>Now that I re-read this, seems a little odd to me, passing the sensitive data out and including some text to show with it. I would have thought that would be more approproate to have meta tag indiacting that content is not complete, and this extension (or one like it) to mark the fields that have been masked.<br>\nAnd require some different security context or action (break glass etc) to be able to get at the content that would then imply additional logging that the sensitive content was exposed.</p>",
        "id": 153821336,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1460497230
    },
    {
        "content": "<p>Thinking further on this, I think this part would be more likely for including a pre-formatted display content for a string, rather than masking the original value.<br>\nso ID stored as 55545352 but displayed to the user as (555) 45-352</p>",
        "id": 153821337,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1460497309
    },
    {
        "content": "<p>We don't want the SSN sent in identifier/value/@value as 1234.  Because that implies we've actually got a SNN.  Instead, we send identifier/value/extension/valueString.  That's completely safe.</p>",
        "id": 153821340,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1460497945
    },
    {
        "content": "<p>well, the whole case is kooky. The system needs the full identifier, but the user doesn't see it. But that implies a certain amount of trust in the system that isn't in the user. In other cases, you couldn't trust the user, and you wouldn't send an identifier at all</p>",
        "id": 153821341,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1460497961
    },
    {
        "content": "<p>You could choose to include the @value (and trust the system to not show it) or exclude the @value entirely and still send the extension (and not confuse anyone that an @value was actually present)</p>",
        "id": 153821346,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1460498087
    },
    {
        "content": "<p>For Credit card details, wouldn't pass PCIDSS testing if the value was in there. (Not that we currenlty have that data in FHIR - just an example)</p>",
        "id": 153821348,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1460498109
    },
    {
        "content": "<p>I think we are mixing 2 use cases, 1 for alternate displays of data, and another for masking sensitive content</p>",
        "id": 153821356,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1460498176
    },
    {
        "content": "<p>True, but their manifestations are the same.  Communicating a piece of data in a slot where a \"full\" set of data is expected, but communicating it in a way that represents what should be shown to the user, not what can be used for computation.  Whether what's to be displayed has masked content or represents the full data with separator characters added or dates turned into named months or whatever doesn't really matter.  From a computation and rendering perspective, the behavior is identical.</p>",
        "id": 153821385,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1460508008
    },
    {
        "content": "<p>And it supports both use-cases where the computable data is transmitted too and those where it's not.</p>",
        "id": 153821388,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1460508033
    },
    {
        "content": "<p>In terms of \"protected\" data, you'd want to be very cautious about sharing the computable value with any system that you weren't positive would protect it from being displayed to inappropriate users - including enforcing similar protections on down-stream systems.</p>",
        "id": 153821389,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1460508094
    },
    {
        "content": "<p>But that's about what data you agree to send, not whether the extension works.</p>",
        "id": 153821391,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1460508110
    },
    {
        "content": "<p>Yup, that covers it.</p>",
        "id": 153821402,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1460513155
    },
    {
        "content": "<p>You would NOT use the subsetted tag for this... subsetted is specifically for when less data is returned because of NON security issues (like the client asked for _summary). If this is masked then it needs to be tagged as masked... all for the very reason Brian points out. But I wanted to make it clear that there are many tags that need to be viewed by the recipient as indicating that the data is less than complete for different reasons.</p>",
        "id": 153821456,
        "sender_full_name": "John Moehrke",
        "timestamp": 1460549954
    },
    {
        "content": "<p>I do find this use-case really disturbing. You are willing to send HEALTH DATA to a recipient while not trusting them with a full SSN. I know the organizations that have this viewpoint; and I know why. They are causing pain wherever they interconnect. This is one of the prime reasons why Patient Identity Matching is problematic (not the only problem, but a big one).  Far better that healthcare be declared a legitimate use of the SSN.    sorry, rant with no solution.</p>",
        "id": 153821458,
        "sender_full_name": "John Moehrke",
        "timestamp": 1460550173
    },
    {
        "content": "<p>I think Bruce has the best solution. Give this 'type' of identifier a unique system.  Then the system can decide to return the full ssn, or the ssn fragment, or both.  The ssn is not a unique identifier anyway, there are duplicates and errors. so to consider the fragment not worthy, while considering ssn worthy, seems like an arbitrary rule. How much confidence is necessary before an identifier qualifies as an identifier? In the space of De-Identification, the fragment is still considered a \"Direct Identifier\". </p>",
        "id": 153821460,
        "sender_full_name": "John Moehrke",
        "timestamp": 1460550541
    },
    {
        "content": "<p>An identifier system where system+value is explicitly not unique is problematic...</p>",
        "id": 153821523,
        "sender_full_name": "Chris Grenz",
        "timestamp": 1460564650
    },
    {
        "content": "<p>Which is why you would include the value/@value</p>",
        "id": 153821527,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1460566176
    },
    {
        "content": "<p>(Or if you did, it would have to be the full value)</p>",
        "id": 153821528,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1460566192
    },
    {
        "content": "<p>Sorry...not following that last comment.</p>",
        "id": 153821530,
        "sender_full_name": "Chris Grenz",
        "timestamp": 1460566699
    },
    {
        "content": "<p>Even the full SSN is not explicitly unique. It is a best-effort... but there are plenty of documented cases where legitimately multiple people are assigned the same SSN. Even more cases where multiple are illegitimately using the same SSN.</p>",
        "id": 153821536,
        "sender_full_name": "John Moehrke",
        "timestamp": 1460569461
    },
    {
        "content": "<p>Right, but that's a quality/matching issue, not a situation where the design intent includes duplicates.</p>",
        "id": 153821537,
        "sender_full_name": "Chris Grenz",
        "timestamp": 1460569562
    },
    {
        "content": "<p>I agree. I very much would like to totally discourage any use of partial SSN... however I, nor HL7, can control that; so it is best to contain that.</p>",
        "id": 153821538,
        "sender_full_name": "John Moehrke",
        "timestamp": 1460569669
    },
    {
        "content": "<p>I'd argue that a partial SSN isn't an identifier (as in the built-in Patient.identifier) but rather some other attribute (extension ,maybe of type Identifier, maybe just string).</p>",
        "id": 153821539,
        "sender_full_name": "Chris Grenz",
        "timestamp": 1460569816
    },
    {
        "content": "<p>As an FYI for context, this gForge change request <a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=8665\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=8665\">http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=8665</a> is what led to the creation of the extension, <a href=\"http://hl7-fhir.github.io/extension-rendered-value.html\" target=\"_blank\" title=\"http://hl7-fhir.github.io/extension-rendered-value.html\">http://hl7-fhir.github.io/extension-rendered-value.html</a> -- specifically it allows determination of appropriate display to be performed by a server where formatting rules may not be known by or may be too complex to be performed by a client</p>",
        "id": 153821557,
        "sender_full_name": "Michelle (Moseman) Miller",
        "timestamp": 1460574260
    },
    {
        "content": "<p>You're conveying an SSN.  You're just not conveying all of it.  Which means that you can't put your string in Identifier/value/@value.  And because there's nothing specified there, you don't have to worry about it not being globally unique. </p>",
        "id": 153821598,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1460579531
    }
]