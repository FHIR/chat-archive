[
    {
        "content": "<p>I'm currently trying to figure out how to interpret the section on the PATCH operation about <a href=\"https://www.hl7.org/fhir/fhirpatch.html#anonymous\">Anonymous Types</a>. I'm looking for a solution on how to add an extension using a single PATCH operation to a resource. For me the part regarding \"a set of parts that are values are provided\" is not totally clear. I'm unsure how it's supposed to look like. I didn't find any example in the test case downloads either which would provide more than one value as a part.</p>\n<p>Say I've defined an \"Add\" operation with the path \"Patient\" and name \"extension\", would the following part be correct to add an extension?</p>\n<div class=\"codehilite\"><pre><span></span><code>{\n    &quot;name&quot;: &quot;value&quot;,\n    &quot;part&quot;: [\n        {\n            &quot;name&quot;: &quot;url&quot;,\n            &quot;valueUri&quot;: &quot;https://example.org/fhir/StructureDefinition/MyPatchExtension&quot;\n        },\n        {\n            &quot;name&quot;: &quot;value&quot;,\n            &quot;valueString&quot;: &quot;test&quot;\n        }\n    ]\n}\n</code></pre></div>\n<p>Or should the \"value\" part be repeating with a single part in it?</p>",
        "id": 237069236,
        "sender_full_name": "Alexander Zautke",
        "timestamp": 1619977923
    },
    {
        "content": "<p>Extending this to complex extensions (\"This pattern repeats as deep as necessary\")<br>\nMy initial guess would be the following:</p>\n<div class=\"codehilite\"><pre><span></span><code>{\n    &quot;name&quot;: &quot;value&quot;,\n    &quot;part&quot;: [\n        {\n            &quot;name&quot;: &quot;url&quot;,\n            &quot;valueUri&quot;: &quot;https://example.org/fhir/StructureDefinition/MyPatchExtension&quot;\n        },\n        {\n            &quot;name&quot;: &quot;extension&quot;,\n            &quot;part&quot;: [\n            {\n                &quot;name&quot;: &quot;url&quot;,\n                &quot;valueUrl&quot;: &quot;MyComplexExtensionElement&quot;\n            },\n            {\n                &quot;name&quot;: &quot;value&quot;,\n                &quot;valueString&quot;: &quot;test&quot;\n            }]\n        }]\n}\n</code></pre></div>\n<p>Anyone already experimented with this before?</p>",
        "id": 237070021,
        "sender_full_name": "Alexander Zautke",
        "timestamp": 1619978593
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> <span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span></p>",
        "id": 237070289,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1619978853
    },
    {
        "content": "<p>have you looked at the test cases? <a href=\"https://github.com/FHIR/fhir-test-cases/blob/master/r5/patch/fhir-path-tests.xml\">https://github.com/FHIR/fhir-test-cases/blob/master/r5/patch/fhir-path-tests.xml</a></p>",
        "id": 237267451,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1620103164
    },
    {
        "content": "<p>Yes, I only see two examples which are related to the anonymous type section (\"Add Anonymous Type\" and \"Delete Anonymous Type\"). Do you have a different case in mind which would cover the scenario mentioned above?</p>",
        "id": 237285535,
        "sender_full_name": "Alexander Zautke",
        "timestamp": 1620116389
    },
    {
        "content": "<p>no I hoped there was one already</p>",
        "id": 237299406,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1620123480
    },
    {
        "content": "<p>ok. so i think that your examples above are correct</p>",
        "id": 237436501,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1620186378
    }
]