[
    {
        "content": "<p>We discovered this while working directly with the <code>ValidationEngine</code> class in Java, but it is reproducible with the Desktop JAR validator.</p>\n<p>The HL7 Validator returns an invalid OperationOutcome.  The main issue we noticed is that it does not include an <code>OperationOutcome.issue</code> which has a cardinality of <code>1..1</code> in the base FHIR spec.  I'm not sure if this is related to the lack of suitable codes for OperationOutcomes when reporting successful outcomes which was discussed at DevDays and spawned <a href=\"https://jira.hl7.org/browse/FHIR-27840?filter=-2\">FHIR-27840</a>.</p>\n<p>For example trying to validate a simple patient ( e.g. <a href=\"/user_uploads/10155/FovwKEqbhqw55IVSg5agkmb8/patient.json\">patient.json</a> )</p>\n<div class=\"codehilite\"><pre><span></span><code>FHIR Validation tool Version <span class=\"m\">5</span>.0.7-SNAPSHOT <span class=\"o\">(</span>Git# 6bc790d98b04<span class=\"o\">)</span>. Built <span class=\"m\">2020</span>-06-07T08:35:37.25+10:00 <span class=\"o\">(</span><span class=\"m\">11</span> days old<span class=\"o\">)</span>\nDetected Java version: <span class=\"m\">11</span>.0.7 from /Library/Java/JavaVirtualMachines/adoptopenjdk-11.jdk/Contents/Home on x86_64 <span class=\"o\">(</span>64bit<span class=\"o\">)</span>. 4096MB available\nArguments: patient.json -output out.json\nDirectories: <span class=\"nv\">Current</span> <span class=\"o\">=</span> /Users/crowleyj/Downloads, Package <span class=\"nv\">Cache</span> <span class=\"o\">=</span> /Users/crowleyj/.fhir/packages\n  .. FHIR Version current, definitions from hl7.fhir.r5.core#current\n  .. connect to tx server @ http://tx.fhir.org\n    <span class=\"o\">(</span>vcurrent<span class=\"o\">)</span>\n  .. validate <span class=\"o\">[</span>patient.json<span class=\"o\">]</span>\n</code></pre></div>\n\n\n<p>This provides this operation outcome (<a href=\"/user_uploads/10155/Oer_6REpc98rpkhCSI0TvT-y/out.json\">out.json</a>)</p>\n<div class=\"codehilite\"><pre><span></span><code><span class=\"p\">{</span>\n  <span class=\"nt\">&quot;resourceType&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;OperationOutcome&quot;</span><span class=\"p\">,</span>\n  <span class=\"nt\">&quot;text&quot;</span> <span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"nt\">&quot;status&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;extensions&quot;</span><span class=\"p\">,</span>\n    <span class=\"nt\">&quot;div&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;&lt;div xmlns=\\&quot;http://www.w3.org/1999/xhtml\\&quot;&gt;&lt;p&gt;All OK&lt;/p&gt;&lt;/div&gt;&quot;</span>\n  <span class=\"p\">},</span>\n  <span class=\"nt\">&quot;extension&quot;</span> <span class=\"p\">:</span> <span class=\"p\">[{</span>\n    <span class=\"nt\">&quot;url&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;http://hl7.org/fhir/StructureDefinition/operationoutcome-file&quot;</span><span class=\"p\">,</span>\n    <span class=\"nt\">&quot;valueString&quot;</span> <span class=\"p\">:</span> <span class=\"s2\">&quot;patient.json&quot;</span>\n  <span class=\"p\">}]</span>\n</code></pre></div>\n\n\n<p>Subsequently trying to validate the provided OperationOutcome gives:</p>\n<div class=\"codehilite\"><pre><span></span><code>$ java -jar org.hl7.fhir.validator.jar out.json\nFHIR Validation tool Version <span class=\"m\">5</span>.0.7-SNAPSHOT <span class=\"o\">(</span>Git# 6bc790d98b04<span class=\"o\">)</span>. Built <span class=\"m\">2020</span>-06-07T08:35:37.25+10:00 <span class=\"o\">(</span><span class=\"m\">11</span> days old<span class=\"o\">)</span>\nDetected Java version: <span class=\"m\">11</span>.0.7 from /Library/Java/JavaVirtualMachines/adoptopenjdk-11.jdk/Contents/Home on x86_64 <span class=\"o\">(</span>64bit<span class=\"o\">)</span>. 4096MB available\nArguments: out.json\nDirectories: <span class=\"nv\">Current</span> <span class=\"o\">=</span> /Users/crowleyj/Downloads, Package <span class=\"nv\">Cache</span> <span class=\"o\">=</span> /Users/crowleyj/.fhir/packages\n  .. FHIR Version current, definitions from hl7.fhir.r5.core#current\n  .. connect to tx server @ http://tx.fhir.org\n    <span class=\"o\">(</span>vcurrent<span class=\"o\">)</span>\n  .. validate <span class=\"o\">[</span>out.json<span class=\"o\">]</span>\n*FAILURE* validating out.json:  error:2 warn:0 info:1\n  Error @ OperationOutcome.extension<span class=\"o\">[</span><span class=\"m\">0</span><span class=\"o\">]</span>.url <span class=\"o\">(</span>line <span class=\"m\">8</span>, col77<span class=\"o\">)</span> : URL value <span class=\"s2\">&quot;http://hl7.org/fhir/StructureDefinition/operationoutcome-file&quot;</span> does not resolve\n  Error @ OperationOutcome <span class=\"o\">(</span>line <span class=\"m\">1</span>, col2<span class=\"o\">)</span> : Profile http://hl7.org/fhir/StructureDefinition/OperationOutcome, Element <span class=\"s1\">&#39;OperationOutcome.issue&#39;</span>: minimum <span class=\"nv\">required</span> <span class=\"o\">=</span> <span class=\"m\">1</span>, but only found <span class=\"m\">0</span>\n  Information @ OperationOutcome.extension<span class=\"o\">[</span><span class=\"m\">0</span><span class=\"o\">]</span> <span class=\"o\">(</span>line <span class=\"m\">7</span>, col19<span class=\"o\">)</span> : Unknown extension http://hl7.org/fhir/StructureDefinition/operationoutcome-file\n</code></pre></div>\n\n\n<p>Let me know if we can help provide further information and, as always, thanks for the hard work on these tools!</p>",
        "id": 201325728,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1592514145
    },
    {
        "content": "<p>oops. I really though I had fixed that. But I missed it somehow. Fixed next release</p>",
        "id": 201339088,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1592523914
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code><span class=\"s2\">&quot;issue&quot;</span><span class=\"err\">:</span> <span class=\"p\">[</span>\n    <span class=\"p\">{</span>\n      <span class=\"nt\">&quot;severity&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;information&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;code&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;informational&quot;</span><span class=\"p\">,</span>\n      <span class=\"nt\">&quot;details&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"nt\">&quot;text&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;All OK&quot;</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">}</span>\n  <span class=\"p\">]</span>\n</code></pre></div>\n\n\n<p>From <a href=\"http://hl7.org/fhir/operationoutcome-example-allok.html\">http://hl7.org/fhir/operationoutcome-example-allok.html</a>. Note that \"All OK\" is subject to internationalization</p>",
        "id": 201339349,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1592524120
    }
]