[
    {
        "content": "<p>I'm working on some processing the snapshot from a structured definition but have a question about exactly how \"removal\" works.</p>\n<p>Eg I've been given a STU3 based StructureDefinition based upon <a href=\"http://hl7.org/fhir/StructureDefinition/Bundle\" target=\"_blank\" title=\"http://hl7.org/fhir/StructureDefinition/Bundle\">http://hl7.org/fhir/StructureDefinition/Bundle</a> (the profile has been authored with Firely Forge ) </p>\n<p>The Bundle.signature has been removed.</p>\n<p>The differential of the (xml based) profile file has <br>\n  id - Bundle.signature<br>\n  path/value - Bundle.signature<br>\n  max/value - 0</p>\n<p>The snapshot has a max 0 for the id &amp; path for Bundle.signature.</p>\n<p>All the \"children\" still have values to say that they are still in use, eg<br>\n<a href=\"http://Bundle.signature.id\" target=\"_blank\" title=\"http://Bundle.signature.id\">Bundle.signature.id</a>  min 0, max 1<br>\n  Bundle.signature.extension min 0, max *</p>\n<p>My question what is the rule/logic can be applied to determine what children have  also been removed because the parent has been removed.  </p>\n<p>In the above case – “Bundle.signature” is 0..0 – so then anything else with <br>\n  “id” <br>\nor <br>\n   “path” (?)</p>\n<p>which starts with “Bundle.signature” are no longer live?</p>\n<p>What actually determines a parent - or is it just  anything \"under\" something with  max of 0 has also been removed?</p>\n<p>Are  there any complexities with slices which need to be considered?</p>\n<p>Thanks</p>",
        "id": 154011982,
        "sender_full_name": "Msm123 Msm123",
        "timestamp": 1540411642
    },
    {
        "content": "<p>If an ancestor can't appear, then the children can't appear under that ancestor.  There are some places where types can be re-used, so cardinality of child elements might be relevant if the same backbone type gets referenced other places.</p>",
        "id": 154012070,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1540439950
    },
    {
        "content": "<p>I don't think my initial question has that clear. Let me try again.<br>\nI've copied/edited a fragment of the profile /StructureDefinition/snapshot/element[85]</p>\n<p>&lt;element id=\"Bundle.signature\"&gt;<br>\n    &lt;path value=\"Bundle.signature\"/&gt;<br>\n    &lt;short value=\"Digital Signature\"/&gt;<br>\n    &lt;min value=\"0\"/&gt;<br>\n    &lt;max value=\"0\"/&gt;<br>\n&lt;/element&gt;<br>\n&lt;element id=\"<a href=\"http://Bundle.signature.id\" target=\"_blank\" title=\"http://Bundle.signature.id\">Bundle.signature.id</a>\"&gt;<br>\n    &lt;path value=\"Bundle.signature.id\"/&gt;<br>\n    &lt;short value=\"xml:id (or equivalent in JSON)\"/&gt;<br>\n    &lt;min value=\"0\"/&gt;<br>\n    &lt;max value=\"1\"/&gt;<br>\n&lt;/element&gt;<br>\n&lt;element id=\"Bundle.signature.extension\"&gt;<br>\n    &lt;path value=\"Bundle.signature.extension\"/&gt;<br>\n    &lt;slicing&gt;<br>\n        ..<br>\n    &lt;/slicing&gt;  <br>\n    &lt;short value=\"Additional Content defined by implementations\"/&gt;<br>\n    &lt;min value=\"0\"/&gt;<br>\n    &lt;max value=\"*\"/&gt;<br>\n&lt;/element&gt;</p>\n<p>The 1st element has max of 0 - so its removed and therefore so have all the children.</p>\n<p>To identify children, is it a case of :-</p>\n<p>(1) Take the \"element id\" (\"Bundle.signature\") - and for the other elements, if the id  (string) \"starts\" with Bundle.signature then they're also \"dead\".<br>\n(2) Take the \"path value\" and for the other elements, if the path (string) \"starts\" with Bundle.signature then they're also \"dead\".<br>\n(3) Any other way?</p>\n<p>Thanks again</p>",
        "id": 154012335,
        "sender_full_name": "Msm123 Msm123",
        "timestamp": 1540541728
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"197193\">@Msm123 Msm123</span> Please note that you also have to take slicing into account, in order to transform a flattened list of element definitions into a connected tree. Slice names are reflected in element ids, e.g. <code>patient.identifier:ssn</code>.</p>",
        "id": 154012337,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1540544109
    }
]