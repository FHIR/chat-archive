[
    {
        "content": "<p>Dear All,<br>\nI am working with FHIR profiles and Is there any standard way of producing the Snapshot from differential statements? i am using forge-R4 and it produce only differential statements. The reason is, validation implementation require to have the Snapshot of the profile instead of differential statements.<br>\nThanks,<br>\nNadis Suraweera</p>",
        "id": 166800197,
        "sender_full_name": "Nadis Suraweera",
        "timestamp": 1559123731
    },
    {
        "content": "<p>If you open the \"Options\" drop-down menu, you can check the \"Save snapshot component\" option in the section \"Persistance Options\" (looks like it's off by default).</p>",
        "id": 166803101,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1559126766
    },
    {
        "content": "<p>which validator requires the snapshot?</p>",
        "id": 166808860,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1559132357
    },
    {
        "content": "<blockquote>\n<p>If you open the \"Options\" drop-down menu, you can check the \"Save snapshot component\" option in the section \"Persistance Options\" (looks like it's off by default).</p>\n</blockquote>\n<p>Thank you very much <span class=\"user-mention\" data-user-id=\"194703\">@Morten Ernebjerg</span> it solved the problem.. <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>",
        "id": 167762772,
        "sender_full_name": "Nadis Suraweera",
        "timestamp": 1560176253
    },
    {
        "content": "<blockquote>\n<p>which validator requires the snapshot?</p>\n</blockquote>\n<p>Hi Grahame,<br>\nHAPI FHIR validation expects snapshots rather than differential statements.. Tried the approach that <span class=\"user-mention\" data-user-id=\"194703\">@Morten Ernebjerg</span>  suggested and now it works fine..<br>\nThanks!.</p>",
        "id": 167763009,
        "sender_full_name": "Nadis Suraweera",
        "timestamp": 1560176411
    },
    {
        "content": "<p>that was a bug in the validator. It's fixed now in the standalone validator, but that isn't released as part of the HAPI validator yet</p>",
        "id": 167763111,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560176511
    },
    {
        "content": "<p>Hi,</p>\n<p>with FHIR Validation tool Version 3.8.12-SNAPSHOT - Built 2019-07-22T20:01:22.449Z - Git 80c305fa5d9b, I get errors like:</p>\n<div class=\"codehilite\"><pre><span></span>Error in snapshot generation: Differential for https://fhir.bbmri.de/StructureDefinition/BbmriBiobank with id: Organization.contact:head.purpose.coding.system has an element that is not marked with a snapshot match\n</pre></div>\n\n\n<p>For profiles exported from Forge without snapshot definitions.</p>",
        "id": 171896676,
        "sender_full_name": "Alexander Kiel",
        "timestamp": 1564333846
    },
    {
        "content": "<p>That means that the snapshot is being generated and there's inconsistencies between the snapshot and the differential - which generally means that there's a differential issue</p>",
        "id": 171897417,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1564335363
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> Thanks! Do you see an issue here? <a href=\"https://github.com/samply/bbmri-fhir-ig/blob/36dda1a8aae6489bd68b2901cd6d418c0f8145df/profile/BbmriBiobank.StructureDefinition.json#L182\" target=\"_blank\" title=\"https://github.com/samply/bbmri-fhir-ig/blob/36dda1a8aae6489bd68b2901cd6d418c0f8145df/profile/BbmriBiobank.StructureDefinition.json#L182\">https://github.com/samply/bbmri-fhir-ig/blob/36dda1a8aae6489bd68b2901cd6d418c0f8145df/profile/BbmriBiobank.StructureDefinition.json#L182</a></p>",
        "id": 171897798,
        "sender_full_name": "Alexander Kiel",
        "timestamp": 1564336140
    },
    {
        "content": "<p>The differential jumps directly from this: Organization.contact:head to Organization.contact:head.purpose.coding.system.  You need to have elements for Organization.contact:head.purpose and Organization.contact:head.purpose.coding to work with the publication tooling.  (Known limitation of the publication tools)</p>",
        "id": 171900275,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1564340870
    },
    {
        "content": "<p>This will be fixed in my next release - probably in a few hours time</p>",
        "id": 171911877,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1564362813
    },
    {
        "content": "<p>done.</p>",
        "id": 171920542,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1564379750
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"197470\">@Alexander Kiel</span> to be clear, actually there is nothing wrong with your profile, according to the FHIR spec. However, some tooling (specifically IG Publisher) is not yet capable of processing a sparse differential. You can work around this tooling limitation by (manually) adding missing parent elements to the differential (w/o any constraints).</p>",
        "id": 171930830,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1564392755
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191336\">@Michel Rutten</span> Thanks. Most of the issues are resolved with <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> last fix. Thanks for this. The only thing we (<span class=\"user-mention\" data-user-id=\"221444\">@Noemi Deppenwiese</span> ) see now is something like this:</p>\n<div class=\"codehilite\"><pre><span></span>Unable to generate snapshot for https://fhir.bbmri.de/StructureDefinition/BbmriNetworkMembership because\nAttempt to a slice an element that does not repeat: Reference.identifier/Reference.identifier from\nhttp://hl7.org/fhir/StructureDefinition/Reference in https://fhir.bbmri.de/StructureDefinition/BbmriNetworkMembership\n</pre></div>\n\n\n<p>Is this a problem in our profiles or can this be fixed in the validator also?</p>",
        "id": 171932564,
        "sender_full_name": "Alexander Kiel",
        "timestamp": 1564394641
    },
    {
        "content": "<p>It sounds like a problem in your profiles. You can’t slice something that doesn’t repeat</p>",
        "id": 171932852,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1564394897
    },
    {
        "content": "<p>After consulting the spec, it seems to be a error in our profiles since none of the elements in Reference repeat. IDK why Forge allowed me to slice identifier in the first place...</p>",
        "id": 171933485,
        "sender_full_name": "Noemi Deppenwiese",
        "timestamp": 1564395594
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> I think FHIR always allows you to type-slice a polymorphic element, regardless of the cardinality. For example, <code>ActivityDefinition.subject[x]</code> is 0...1</p>",
        "id": 171935143,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1564397289
    },
    {
        "content": "<p>Right. I should’ve said that too. But this doesn’t repeat and isn’t polymorphic</p>",
        "id": 171935222,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1564397386
    }
]