[
    {
        "content": "<p>Composition can have an image that uses data from a Binary. </p>\n<div class=\"codehilite\"><pre><span></span><code>&lt;td&gt;\n   &lt;img src=&quot;#imageResource&quot; alt=&quot;an image&quot;/&gt;\n&lt;/td&gt;\n</code></pre></div>\n<p>Does this have to be a contained resource, and not just another resource in the Bundle? The latter is not mentioned as a possibility and I can't see how it would work.</p>\n<p><a href=\"http://build.fhir.org/narrative.html#id\">http://build.fhir.org/narrative.html#id</a></p>\n<p>However a contained resource has to be referenced from the containing, but servers don't seem to be able to detect the image to resource link, and reject it because of constraint dom-3.</p>",
        "id": 224922476,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1612293822
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"248735\">@Lisa Nelson</span></p>",
        "id": 224923179,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1612294122
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192205\">@Lisa Nelson</span> (Lisa R Nelson) :-)</p>",
        "id": 224926400,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1612295521
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"203235\">@Ward Weistra</span> the firely server cannot recognise that a contained Binary resource is referenced by its container, either by noticing the \"src\" link (as above), or by this trick of using a dummy extension</p>\n<div class=\"codehilite\"><pre><span></span><code>&lt;contained&gt;\n    &lt;Binary&gt;\n            &lt;id value=&quot;imageResource&quot;/&gt;\n            &lt;contentType value=&quot;image/png&quot;/&gt;\n            &lt;data value=&quot;iVBORw0-snip-=&quot;/&gt;\n    &lt;/Binary&gt;\n&lt;/contained&gt;\n&lt;!-- If there is a contained resource that is not referenced by its container, servers may reject this.\nServers may not recognise that it is referenced by id, from the text.\nThis extension ensures there is a reference to the contained Binary that servers can see --&gt;\n&lt;extension url=&quot;http://example/fhir/extension/dummyValidationReference&quot;&gt;\n        &lt;valueReference&gt;\n              &lt;reference value=&quot;#imageResource&quot;/&gt;\n        &lt;/valueReference&gt;\n&lt;/extension&gt;\n</code></pre></div>",
        "id": 225004070,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1612352622
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191651\">@Rik Smithies</span> Thanks for the pointer, let me ask a real Firely Server expert!</p>",
        "id": 225019707,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1612361343
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191651\">@Rik Smithies</span> : Could you send me the full resource and the http request you're issuing?<br>\nPlus the version of Firely Server you're using (or is it the public one, hence currently version 4.0.0)?</p>",
        "id": 225032527,
        "sender_full_name": "Christiaan Knaap",
        "timestamp": 1612366668
    },
    {
        "content": "<p>sent, thanks</p>",
        "id": 225034766,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1612367562
    }
]