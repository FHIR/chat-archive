[
    {
        "content": "<p>Hi,</p>\n<p>I am following the tutorial to create a restful server - <a href=\"http://hapifhir.io/doc_rest_server.html\" target=\"_blank\" title=\"http://hapifhir.io/doc_rest_server.html\">http://hapifhir.io/doc_rest_server.html</a><br>\nUpon deployment, and access the Patient via /fhir/Patient/12345, I receive the following error:</p>\n<p>Can anyone help shed some light on a possible resolution?</p>\n<p>ca.uhn.fhir.context.ConfigurationException: Method uses the wrong Id datatype (IdDt / IdType) for the given context FHIR version: public org.hl7.fhir.instance.model.Patient resource.providers.RestfulPatientResourceProvider.getResourceById(ca.uhn.fhir.model.primitive.IdDt)<br>\n    ca.uhn.fhir.rest.param.ParameterUtil.findIdParameterIndex(ParameterUtil.java:175)<br>\n    ca.uhn.fhir.rest.server.method.ReadMethodBinding.&lt;init&gt;(ReadMethodBinding.java:60)<br>\n    ca.uhn.fhir.rest.server.method.BaseMethodBinding.bindMethod(BaseMethodBinding.java:475)<br>\n    ca.uhn.fhir.rest.server.RestfulServer.findResourceMethods(RestfulServer.java:291)<br>\n    ca.uhn.fhir.rest.server.RestfulServer.findResourceMethods(RestfulServer.java:280)<br>\n    ca.uhn.fhir.rest.server.RestfulServer.registerProviders(RestfulServer.java:1325)<br>\n    ca.uhn.fhir.rest.server.RestfulServer.init(RestfulServer.java:955)<br>\n    javax.servlet.GenericServlet.init(GenericServlet.java:158)<br>\n    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:506)<br>\n    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103)<br>\n    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:962)<br>\n    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:445)<br>\n    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1115)<br>\n    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:637)<br>\n    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:316)<br>\n    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)<br>\n    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)<br>\n    org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)<br>\n    java.lang.Thread.run(Thread.java:748)</p>\n<p>Thanks,</p>\n<p>Joel</p>",
        "id": 153917699,
        "sender_full_name": "Joel Francis",
        "timestamp": 1509926298
    },
    {
        "content": "<p>I think the issue is with using org.hl7.fhir.instance.model.Patient. The snippets in that tutorial should really show the imports... That example uses ca.uhn.fhir.model.dstu2.resource.Patient. Here is the link to the source <a href=\"https://github.com/jamesagnew/hapi-fhir/blob/364c18e06e03437f0ac478105891c8be440721b7/examples/src/main/java/example/RestfulPatientResourceProvider.java\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/blob/364c18e06e03437f0ac478105891c8be440721b7/examples/src/main/java/example/RestfulPatientResourceProvider.java\">https://github.com/jamesagnew/hapi-fhir/blob/364c18e06e03437f0ac478105891c8be440721b7/examples/src/main/java/example/RestfulPatientResourceProvider.java</a>.<br>\nHope that helps.</p>",
        "id": 153917701,
        "sender_full_name": "Christopher Schuler",
        "timestamp": 1509931952
    },
    {
        "content": "<blockquote>\n<p>I think the issue is with using org.hl7.fhir.instance.model.Patient. The snippets in that tutorial should really show the imports... That example uses ca.uhn.fhir.model.dstu2.resource.Patient. Here is the link to the source <a href=\"https://github.com/jamesagnew/hapi-fhir/blob/364c18e06e03437f0ac478105891c8be440721b7/examples/src/main/java/example/RestfulPatientResourceProvider.java\" target=\"_blank\" title=\"https://github.com/jamesagnew/hapi-fhir/blob/364c18e06e03437f0ac478105891c8be440721b7/examples/src/main/java/example/RestfulPatientResourceProvider.java\">https://github.com/jamesagnew/hapi-fhir/blob/364c18e06e03437f0ac478105891c8be440721b7/examples/src/main/java/example/RestfulPatientResourceProvider.java</a>.<br>\nHope that helps.</p>\n</blockquote>\n<p>Thanks <span class=\"user-mention\" data-user-id=\"191897\">@Christopher Schuler</span>  but what if I wanted to have restful server based on FHIR 3.0.1. I also had the DSTU 2.0 Patient imports and it gave me the same issue. I also set the context in the server setFhirContext(FhirContext.forDstu3()); Any other ideas?</p>",
        "id": 153917704,
        "sender_full_name": "Joel Francis",
        "timestamp": 1509935596
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191897\">@Christopher Schuler</span> , you were right. I had the wrong stu2 import for patient. It works now.  the read() works but the search() isn't getting invoked.</p>",
        "id": 153917780,
        "sender_full_name": "Joel Francis",
        "timestamp": 1509974555
    }
]