[
    {
        "content": "<p>Has anyone bothered to try out how FHIR could be fitted inside a CDA document? I'm sitting with an infrastructure where the lowest common denominator regarding the wireformat is CDA, but FHIR inside the CDA document is a valid approach. I'm guessing it should go inside the NonXMLBody somehow, but that forces me to use json. While I'm agnostic towards this inner format, the infrastructure is not. Is there somehow a way to put FHIR inside a CDA without it being too nasty?</p>",
        "id": 153866218,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484045362
    },
    {
        "content": "<p>why does it force you to use json? you could use xml in nonXmlBody</p>",
        "id": 153866221,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484049244
    },
    {
        "content": "<p>but it's a bit weird wrap fhir inside cda - why do you need to do that? I would have thought that the question would be stated differently, like 'how do we use FHIR inside XDS\"</p>",
        "id": 153866222,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484049291
    },
    {
        "content": "<p>The answer to Grahames question, how do we use FHIR inside XDS, is easy... XDS is content agnostic. So first set the DocumentEntry.mimeType appropriately <a href=\"http://build.fhir.org/http.html#mime-type\" target=\"_blank\" title=\"http://build.fhir.org/http.html#mime-type\">http://build.fhir.org/http.html#mime-type</a> </p>",
        "id": 153866223,
        "sender_full_name": "John Moehrke",
        "timestamp": 1484050033
    },
    {
        "content": "<p>The question of FHIR inside CDA... is as a nonXmlBody, encoded to contain it... right? Just like XDS-SD content-profile encapsulates PDF or TEXT. (also known as C62)</p>",
        "id": 153866224,
        "sender_full_name": "John Moehrke",
        "timestamp": 1484050219
    },
    {
        "content": "<p>I agree its a bit weird - but that part is politics - the wrapping FHIR inside CDA</p>",
        "id": 153866225,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484050317
    },
    {
        "content": "<p>I know XDS/XDR is an agnostic format</p>",
        "id": 153866226,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484050333
    },
    {
        "content": "<p>its just the name \"NonXMLBody\" ... does that not imply that xml is kinda forbidden right there?</p>",
        "id": 153866227,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484050370
    },
    {
        "content": "<p>it implies that it's not part of this xml </p>",
        "id": 153866228,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484050401
    },
    {
        "content": "<p>there's no rule that it can't be some other xml. </p>",
        "id": 153866229,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484050417
    },
    {
        "content": "<p>No, it just means it is not part of the CDA xml schema... And from CDA perspective it is a blob, and thus must be encoded as a blob.</p>",
        "id": 153866230,
        "sender_full_name": "John Moehrke",
        "timestamp": 1484050422
    },
    {
        "content": "<p>so the name should rather be noncdastructuredbody?</p>",
        "id": 153866231,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484050470
    },
    {
        "content": "<p>it is a sign of maturity, that good decisions back then, look odd today.</p>",
        "id": 153866232,
        "sender_full_name": "John Moehrke",
        "timestamp": 1484050520
    },
    {
        "content": "<p>so the name should have been different</p>",
        "id": 153866233,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484050613
    },
    {
        "content": "<p>?</p>",
        "id": 153866234,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484050614
    },
    {
        "content": "<p>names are hard. Perhaps your longer name would have been clearer. But the rules are clear: it's an ed of some content</p>",
        "id": 153866235,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484050663
    },
    {
        "content": "<p>right</p>",
        "id": 153866236,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484050679
    },
    {
        "content": "<p>actually, what nonXmlBody means is that it's not CDA narrative XML</p>",
        "id": 153866237,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484050680
    },
    {
        "content": "<p>that name keeps on givin'</p>",
        "id": 153866238,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484050705
    },
    {
        "content": "<p>but it is expected that the content is narrative - so the fhir would have to be a composition with narrative </p>",
        "id": 153866239,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484050738
    },
    {
        "content": "<p>at least, that's what's intended</p>",
        "id": 153866240,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484050745
    },
    {
        "content": "<p>okay ... so back to the issue: an amount of time have been invested into understanding CDA </p>",
        "id": 153866241,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484050769
    },
    {
        "content": "<p>and even some profiles have been developed</p>",
        "id": 153866242,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484050777
    },
    {
        "content": "<p>an infrastructure has also been established</p>",
        "id": 153866243,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484050790
    },
    {
        "content": "<p>based on XDS / XDR</p>",
        "id": 153866244,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484050797
    },
    {
        "content": "<p>now, given that the XDS/XDR part is kinda frozen ... untouchable</p>",
        "id": 153866245,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484050830
    },
    {
        "content": "<p>and the header part of the CDA is also kinda frozen ...</p>",
        "id": 153866246,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484050843
    },
    {
        "content": "<p>right. and the short path is, re-use the CDA as much as possible. While the long path is , just go to FHIR directly.  The short path is more expensive in the end, but politics often involves choosing a cheapaper option in the short term</p>",
        "id": 153866247,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484050852
    },
    {
        "content": "<p>we have the same dsicussion in Australia, and it's not resolved yet</p>",
        "id": 153866248,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484050863
    },
    {
        "content": "<p>right</p>",
        "id": 153866249,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484050875
    },
    {
        "content": "<p>i know my politics :) - which means that I've might been given a change to make a hybrid solution</p>",
        "id": 153866250,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484050917
    },
    {
        "content": "<p>And learn from history... any standard can be improved by making one-more-standard...</p>",
        "id": 153866251,
        "sender_full_name": "John Moehrke",
        "timestamp": 1484050954
    },
    {
        "content": "<p>reuse as much of the existing infrastructure as possible (read: no more money here) ... and use FHIR where it could actually make sense</p>",
        "id": 153866252,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484050971
    },
    {
        "content": "<p>well, what I've found so far in Australia is that as long as the back end is hard cda/xds, and you can't develop it, the amount of usefulness that can derived by hacking a FHIR interface over it (lipstick on a pig) is limited. </p>",
        "id": 153866253,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484051033
    },
    {
        "content": "<p>the case is here that only the XDS part and the CDA header is frozen</p>",
        "id": 153866254,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484051083
    },
    {
        "content": "<p>the rest is up for discussion</p>",
        "id": 153866255,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484051089
    },
    {
        "content": "<p>you can fhir-ise the xds part itself directly, and that's ok, but a small-ish benefit. once you start putting an API on top of a CDA based repository, you'll find all these rules about what you can't do with the API, and the benefit starts to get somewhat limited</p>",
        "id": 153866256,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484051098
    },
    {
        "content": "<p>I would recommend to pushback on some of the inflexibility you perceive. As I indicated the XD* metadata model intends to be content agnostic, with CDA vs FHIR being addressed fundimentally with the broadest metadata entry -- mimeType...   I do expect that the inflexibility might be true, caused by poorly implemented solutions that hard-coded too many things.</p>",
        "id": 153866257,
        "sender_full_name": "John Moehrke",
        "timestamp": 1484051115
    },
    {
        "content": "<p>still, so how do you support put and post when each granular put or post is a single act entry in a whole CDA document </p>",
        "id": 153866258,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484051142
    },
    {
        "content": "<p>XDS is not the problem</p>",
        "id": 153866259,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484051172
    },
    {
        "content": "<p>I'm encouraging consideration of a different model: a native FHIR interface, and throwing summary documents to the xds/cda repositroy</p>",
        "id": 153866260,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484051188
    },
    {
        "content": "<p>Grahame, If what you want is a http/REST api, then I very much agree with you... but if you want Document Sharing, and FHIR has a Document model; then XDS works great.</p>",
        "id": 153866261,
        "sender_full_name": "John Moehrke",
        "timestamp": 1484051196
    },
    {
        "content": "<p>its actually not XDS</p>",
        "id": 153866262,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484051213
    },
    {
        "content": "<p>its XDR</p>",
        "id": 153866263,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484051215
    },
    {
        "content": "<p>XDR has mimeType metadata element too.</p>",
        "id": 153866264,
        "sender_full_name": "John Moehrke",
        "timestamp": 1484051235
    },
    {
        "content": "<p>there is no need for retrieving documents</p>",
        "id": 153866265,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484051244
    },
    {
        "content": "<p>i only need XDR for transport basically</p>",
        "id": 153866266,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484051291
    },
    {
        "content": "<p>and I need to support the CDA headers</p>",
        "id": 153866267,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484051310
    },
    {
        "content": "<p>political reasons</p>",
        "id": 153866268,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484051314
    },
    {
        "content": "<p>Grahame, I agree... I just also see a Document Sharing as a needed thing. Documents, CDA and FHIR, have a characteristic not found in an API... that doesn't mean Docment is better than API, it doesn't mean API is better than Document... it is just two models.</p>",
        "id": 153866269,
        "sender_full_name": "John Moehrke",
        "timestamp": 1484051319
    },
    {
        "content": "<p>Jens, you have made it clear that you will need to encapsulate a FHIR Bundle inside the CDA transported in XDR... where in your case the XDR can only carry CDA... </p>",
        "id": 153866270,
        "sender_full_name": "John Moehrke",
        "timestamp": 1484051408
    },
    {
        "content": "<p>and CDA can carry FHIR</p>",
        "id": 153866271,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484051459
    },
    {
        "content": "<p>the question is: is it insane?</p>",
        "id": 153866272,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484051472
    },
    {
        "content": "<p>Jens, then what will your FHIR object look like, that is carried inside CDA?  Will it be just a FHIR Document Bundle?</p>",
        "id": 153866273,
        "sender_full_name": "John Moehrke",
        "timestamp": 1484051473
    },
    {
        "content": "<p>probably</p>",
        "id": 153866274,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484051487
    },
    {
        "content": "<p>CDA can carry anything... it is 'turtles all the way down'</p>",
        "id": 153866275,
        "sender_full_name": "John Moehrke",
        "timestamp": 1484051490
    },
    {
        "content": "<p>all the containers we are talking about can describe the contained content with a mimeType... thus they can contain anything.</p>",
        "id": 153866276,
        "sender_full_name": "John Moehrke",
        "timestamp": 1484051532
    },
    {
        "content": "<p>i know</p>",
        "id": 153866277,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484051541
    },
    {
        "content": "<p>i know it is technically possible</p>",
        "id": 153866278,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484051549
    },
    {
        "content": "<p>all the way down</p>",
        "id": 153866279,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484051552
    },
    {
        "content": "<p>and the FHIR object you have contained in the CDA, can contain CDA...</p>",
        "id": 153866280,
        "sender_full_name": "John Moehrke",
        "timestamp": 1484051555
    },
    {
        "content": "<p>hehe</p>",
        "id": 153866281,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484051561
    },
    {
        "content": "<p>okay ... lets not take it there ...</p>",
        "id": 153866282,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484051570
    },
    {
        "content": "<p>but is it insane?</p>",
        "id": 153866283,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484051574
    },
    {
        "content": "<p>fhir inside cda</p>",
        "id": 153866284,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484051580
    },
    {
        "content": "<p>(not fhir inside cda inside fhir inside cda insiden .....)</p>",
        "id": 153866285,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484051603
    },
    {
        "content": "<p>I would say not insane... because there is precedent in CDA containing TEXT or PDF or JPEG content... so processing of a received CDA is already looking for something mimeType described in the nonXmlBody</p>",
        "id": 153866286,
        "sender_full_name": "John Moehrke",
        "timestamp": 1484051643
    },
    {
        "content": "<p>the only thing is that it is schizophrenic </p>",
        "id": 153866287,
        "sender_full_name": "John Moehrke",
        "timestamp": 1484051712
    },
    {
        "content": "<p>the alternative is to go all the way down CDA - which i would consider sadistic given that CDA has not been used at all among the vendors so far</p>",
        "id": 153866288,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484051869
    },
    {
        "content": "<p>they have all used proprietary standards until now</p>",
        "id": 153866289,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484051893
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> a native FHIR interface is not an option - politically</p>",
        "id": 153866290,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484052012
    },
    {
        "content": "<p>it's not... quite... insane</p>",
        "id": 153866291,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484052101
    },
    {
        "content": "<p>thank you!</p>",
        "id": 153866292,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484052120
    },
    {
        "content": "<p>but if your only political option is insance, then it's not actually insane</p>",
        "id": 153866293,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1484052127
    },
    {
        "content": "<p>you're right</p>",
        "id": 153866294,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484052162
    },
    {
        "content": "<p>thank you guys! - you gave me the anwers I needed</p>",
        "id": 153866295,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484052269
    },
    {
        "content": "<p>I'll let you know what it all ends up with</p>",
        "id": 153866296,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484052296
    },
    {
        "content": "<p>(its only a national matter that's going to have high impact the next couple of years ;) )</p>",
        "id": 153866297,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1484052354
    }
]