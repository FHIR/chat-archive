[
    {
        "content": "<p>Can someone explain to me how the following:</p>\n<ul>\n<li><code>QuestionnaireResponse.item.answer.item</code></li>\n<li><code>QuestionnaireResponse.item.item</code></li>\n</ul>\n<p>are both different/necessary, and how each would be used?</p>",
        "id": 153844501,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1471697827
    },
    {
        "content": "<p>Also, why is <code>QuestionnaireResponse.item.linkId</code> optional and missing in the primary  example?</p>",
        "id": 153844502,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1471697959
    },
    {
        "content": "<p>The linkId is optional as some don't care about linking the values to the questions (such as going into a PDF or non structured result)<br>\n(and yes, I think its pointless to do this without those too)</p>",
        "id": 153844503,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1471698130
    },
    {
        "content": "<p>(just rechecking the spec on the answer.item one - assuming you were meaning the current STU3 ballot release.)</p>",
        "id": 153844504,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1471698156
    },
    {
        "content": "<p>Wait, so you <span class=\"user-mention\" data-user-id=\"191367\">@Brian Postlethwaite</span> agree that it's pointless to omit <code>linkId</code>?</p>",
        "id": 153844505,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1471698196
    },
    {
        "content": "<p>I sure do (agree that linkid is a must).<br>\nCan't relate questions back to answers without them (unless all questions were mandatory, and order important, but don't think is very safe without it)</p>",
        "id": 153844506,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1471698249
    },
    {
        "content": "<p>And it's not a huge effort to include them. OK, ballot comment :-)</p>",
        "id": 153844507,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1471698272
    },
    {
        "content": "<p>On the nested answers.items, .. I think it has something to do with accommodating repeating answers with groups below them -- but I don't know why we need to <strong>two</strong> recursive embedding points.</p>",
        "id": 153844508,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1471698403
    },
    {
        "content": "<p>Agreed. I'll have to go back and check what I did in my STU3 port of that stuff from May.</p>",
        "id": 153844509,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1471698500
    },
    {
        "content": "<p>Also, with <code>linkId</code>: is it incorrect  to flatten out a QuestionnaireResponse (from a Questionnaire with nested/grouped questions) and just tie them back with linkId? Just trying to get a handle on the expected Reponse-processing logic.</p>",
        "id": 153844510,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1471698587
    },
    {
        "content": "<p>Also, can anyone explain what the following means, in terms of concrete changes? I'm hoping to understand how QuestionnaireResponse works. </p>\n<blockquote>\n<p>QuestionnaireResponse is one of the Event resources in the FHIR Workflow specification. As such, it is expected to be adjusted to align with the event workflow pattern. Any concerns about performing such alignment are welcome as ballot comments and/or tracker items.</p>\n</blockquote>",
        "id": 153844511,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1471698698
    },
    {
        "content": "<p>No, don't flatten them out, will make things hard to reassociate grouped items, such as rows in a table (or worse tables on repeatable sections)</p>",
        "id": 153844512,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1471699290
    },
    {
        "content": "<p>(Sorry for the double negative there)</p>",
        "id": 153844513,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1471699312
    },
    {
        "content": "<p>I haven't looked into that part yet, but wouldn't expect any actual change to the Q/QR resources.</p>",
        "id": 153844514,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1471699361
    },
    {
        "content": "<p>OK, so I should ignore the warning note?  <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>  do you agree with this assessment? Any \"adjusting\" would be good to know about in advance. </p>",
        "id": 153844515,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1471699481
    },
    {
        "content": "<p>I would very much like to know if any further adjustment was going to occur...</p>",
        "id": 153844516,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1471700033
    },
    {
        "content": "<p>I think linkId is optional to support capturing of legacy questionnaires</p>",
        "id": 153844517,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1471700198
    },
    {
        "content": "<p>If I was creating those, I'd just put in a sequential value. But understand the point.</p>",
        "id": 153844518,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1471700666
    },
    {
        "content": "<p>We can always profile it up right.</p>",
        "id": 153844519,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1471700699
    },
    {
        "content": "<p>The reason for dual nesting is that  groups need to have nested items (and won't have answers), while questions with nesting may have nesting inside each answer</p>",
        "id": 153844522,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1471720707
    },
    {
        "content": "<p>linkId was indeed optional to support legacy, though we've discussed in the past whether it would be that hard to invent a linkId based on question sequence/nesting or something like that.  So I'd be ok with making it mandatory.</p>",
        "id": 153844523,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1471720781
    },
    {
        "content": "<p>This double nesting is basically impossible for me to understand. Why can't we <strong>just</strong> have nesting in answere.item? </p>",
        "id": 153844528,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1471754009
    },
    {
        "content": "<p>\"groups need to have nested items\" -- but isn't this confusing the requirements of QuestionnaireResponse with the requirements of Questionnaire? </p>",
        "id": 153844529,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1471754152
    },
    {
        "content": "<p>In other words, if you need to represent nested responses, use answer.item. You can do this even if the answer is blank. </p>",
        "id": 153844530,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1471754233
    },
    {
        "content": "<p>But having two points of recursive nesting is beyond my comprehension. </p>",
        "id": 153844531,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1471754264
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191339\">@Pascal Pfiffner</span> do you have experience working with nested items here? </p>",
        "id": 153844532,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1471754302
    },
    {
        "content": "<p>The response mirrors the questionnaire.  So if the questionnaire has a repeating group with 5 questions, then the QuestionnaireResponse will also have a repeating group item with 5 question items (and those questions would have their respective answers).  There's no \"answer\" at the group level to nest questions within.</p>",
        "id": 153844533,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1471763204
    },
    {
        "content": "<p>A) I'm also not sure I understand the difference between <code>QuestionnaireResponse.item.answer.item</code> and <code>QuestionnaireResponse.item.item</code>, the samples don't manage to enlighten me, I'd have to invest more time than I have ATM.</p>",
        "id": 153844543,
        "sender_full_name": "Pascal Pfiffner",
        "timestamp": 1471769686
    },
    {
        "content": "<p>B) I'm not sure making <code>linkId</code> mandatory is so clear-cut. Groups can also be used for logic reasons, e.g. if I'm going to skip 3 questions after a certain answer, I'll group these three questions and set the group's <code>enableWhen</code> accordingly, I won't care for <code>linkId</code>.</p>",
        "id": 153844544,
        "sender_full_name": "Pascal Pfiffner",
        "timestamp": 1471769816
    },
    {
        "content": "<p>Why would you not have a linkId on the group?</p>",
        "id": 153844552,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1471786617
    },
    {
        "content": "<p>In a questionnaire with 4 questions, where I'll only ask questions 2, 3 and 4 if, say, the answer is YES to the first one, I'm still only interested in the 4 questions, I don't really care that questions 2, 3 and 4 are in a group.</p>",
        "id": 153844553,
        "sender_full_name": "Pascal Pfiffner",
        "timestamp": 1471791317
    },
    {
        "content": "<p>But if the group repeats, you have to care.</p>",
        "id": 153844559,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1471804285
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> I'm still not getting it. Which by itself probably means this structure is too complicated. Why can't there be a single recursion point (embedded within item.answer, recognizing that sometimes item.answer.value could be missing)? </p>",
        "id": 153844589,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1471864862
    },
    {
        "content": "<p>Otherwise put: How can we say that the current QuestionnaireResponse mirrors Questionnaire when the former has two recursion points and the latter has just one? </p>",
        "id": 153844590,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1471865078
    },
    {
        "content": "<p>I'd actually suggest using the one outside the answer, which means you don't need the answer for the replicating group.<br>\nI must create some examples...</p>",
        "id": 153844592,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1471865930
    },
    {
        "content": "<p>Agreed, <span class=\"user-mention\" data-user-id=\"191367\">@Brian Postlethwaite</span> -- after reading the spec  carefully, I was just returning here to make this same point! </p>",
        "id": 153844593,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1471866033
    },
    {
        "content": "<p>And then the \"mirrored\" structure is clear. </p>",
        "id": 153844594,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1471866095
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> if there is a specific case where this breaks down, could you sketch an example to explain? </p>",
        "id": 153844595,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1471866141
    },
    {
        "content": "<blockquote>\n<p>But if the group repeats, you have to care.</p>\n</blockquote>\n<p>Sure, <strong>then</strong> I do. But in the questionnaires I've used so far that was never the case. However, in questionnaires of 30-40 questions, I have easily 4 or 5 non-repeating groups that merely exist to skip two or three questions. So if <code>linkId</code> becomes mandatory I'll be creating random group identifiers that nobody cares about for most questionnaires.</p>",
        "id": 153844603,
        "sender_full_name": "Pascal Pfiffner",
        "timestamp": 1471869890
    },
    {
        "content": "<p>And none of those questions are tables? (that's the most common case I see)</p>",
        "id": 153844604,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1471869958
    },
    {
        "content": "<p>Can you explain what you mean by \"questions\" as \"tables\", <span class=\"user-mention\" data-user-id=\"191367\">@Brian Postlethwaite</span> ?</p>",
        "id": 153844608,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1471871575
    },
    {
        "content": "<p>Say you have a questionnaire that has 2 pages (groups) and on page 2 there is a table of data.<br>\nThe table is therefore a repeating group within another group.</p>",
        "id": 153844610,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1471871664
    },
    {
        "content": "<p>I've mostly been using standardized questionnaires like WPAI and SF-36. The only times those have <code>repeat</code> is for multiple choice questions.</p>",
        "id": 153844611,
        "sender_full_name": "Pascal Pfiffner",
        "timestamp": 1471871668
    },
    {
        "content": "<p>Wait, why is the table a \"repeating group\"?</p>",
        "id": 153844612,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1471871789
    },
    {
        "content": "<p>A repeating group can be rendered as a table, or just a repeating section, like this example (sorry, DSTU2 format)<br>\n<a href=\"http://smartq.azurewebsites.net/Home/Survey?questionnaireId=https%3A%2F%2Fsqlonfhir-dstu2.azurewebsites.net%2Ffhir%2FQuestionnaire%2Fsample-nested-group&amp;fhirServiceUrl=https%3A%2F%2Fsqlonfhir-dstu2.azurewebsites.net%2Ffhir%2F\" target=\"_blank\" title=\"http://smartq.azurewebsites.net/Home/Survey?questionnaireId=https%3A%2F%2Fsqlonfhir-dstu2.azurewebsites.net%2Ffhir%2FQuestionnaire%2Fsample-nested-group&amp;fhirServiceUrl=https%3A%2F%2Fsqlonfhir-dstu2.azurewebsites.net%2Ffhir%2F\">http://smartq.azurewebsites.net/Home/Survey?questionnaireId=https%3A%2F%2Fsqlonfhir-dstu2.azurewebsites.net%2Ffhir%2FQuestionnaire%2Fsample-nested-group&amp;fhirServiceUrl=https%3A%2F%2Fsqlonfhir-dstu2.azurewebsites.net%2Ffhir%2F</a></p>",
        "id": 153844614,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1471872039
    },
    {
        "content": "<p>(Need to get my editor updated to STU3)</p>",
        "id": 153844615,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1471872063
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span>  Nesting questions inside an \"answer\" for a group that can't possibly have an answer would be very weird.  It would also change the semantics of the \"answer\" element.  <span class=\"user-mention\" data-user-id=\"191339\">@Pascal Pfiffner</span> yes, you'd have to make up an id for the group.  And you'd have to make up an id for all of your embedded instruction text too.  That's what making linkId mandatory would mean.  If we leave it that linkId is only required for those things that your system personally cares about, then it no longer works as an always present, generic referencing mechanism</p>",
        "id": 153844655,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1471886613
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> Can you explain why (as <span class=\"user-mention\" data-user-id=\"191367\">@Brian Postlethwaite</span> suggested) we couldn't just get by with <code>QuestionnaireResponse.item.item</code>, and eliminate <code>QuestionnaireResponse.item.answer.item</code>?  If this doesn't work, could you provide a specific example to help <span class=\"user-mention\" data-user-id=\"191367\">@Brian Postlethwaite</span> and me understand the design choice? Currently we don't get it.</p>",
        "id": 153844656,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1471886888
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> Alright, point taken.</p>",
        "id": 153844657,
        "sender_full_name": "Pascal Pfiffner",
        "timestamp": 1471887244
    },
    {
        "content": "<p>If we have a repeating question that works as a multiple choice question (e.g. asking for which meds a patient is taking), would I repeat that in <code>item.item</code> or <code>item.answer.item</code>?</p>",
        "id": 153844658,
        "sender_full_name": "Pascal Pfiffner",
        "timestamp": 1471887287
    },
    {
        "content": "<p>Question 1: Which of the following diseases do you have? (type = open-choice); nestedQuestion 1.1: \"When was the onset of the disease?\"<br>\nQuestionnaireResponse: { linkId=1, answer [ {answerValue=diabetes, item { linkId=1.1, answer= [ {answerValue=childhood} ] } }, {answerValue=heartDisease, item {linkId=1.1, answer=[ {answerValue=adult} ] } } ] }</p>",
        "id": 153844685,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1471902444
    },
    {
        "content": "<p>In that case the item.answer.item could easily fit into the item.item</p>",
        "id": 153844689,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1471907409
    },
    {
        "content": "<p>How?  item.item wouldn't associate childhood with the diabetes answer as opposed to heartDisease.  You'd end up with two answers, then two child questions</p>",
        "id": 153844696,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1471912998
    },
    {
        "content": "<p>if the question repeated, repeat at that point, not the answer point.</p>",
        "id": 153844697,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1471913309
    },
    {
        "content": "<p>I'm with Brian -- I can't see what having a separate recursion point adds in this scenario (and it creates confusion). The top question just repeats, and a linkId would make the correspondence clear. </p>",
        "id": 153844735,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1471918225
    },
    {
        "content": "<p>+1 on that Josh.</p>",
        "id": 153844736,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1471918397
    },
    {
        "content": "<p>Why echo the question text for each repetition?</p>",
        "id": 153844742,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1471922356
    },
    {
        "content": "<p>then why have the item without the answer?<br>\n(I think we only need/want one of them) or you need to document more clearly which types should use which nesting)</p>",
        "id": 153844743,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1471922789
    },
    {
        "content": "<p>If you have a group that contains another group, there's no answer to do the containing</p>",
        "id": 153844747,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1471923874
    },
    {
        "content": "<p>We can add a constraint about which gets used when</p>",
        "id": 153844748,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1471923891
    },
    {
        "content": "<p>(Submit a change request :))</p>",
        "id": 153844749,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1471923901
    },
    {
        "content": "<p>I still can't understand why we'd have two places.</p>",
        "id": 153844808,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1471968839
    },
    {
        "content": "<p>I submitted <a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=10481\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=10481\">GF#10481</a> to propose eliminating<br>\n<code>QuestionnaireResponse.item.answer.item</code> (<span class=\"user-mention\" data-user-id=\"191367\">@Brian Postlethwaite</span> please comment there if you agree)</p>",
        "id": 153844813,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1471971474
    }
]