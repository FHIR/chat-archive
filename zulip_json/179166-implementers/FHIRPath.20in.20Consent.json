[
    {
        "content": "<p>Can <em>Consent.provision.class</em> be used to withhold/disclosure of specific information using FHIRPath rather than a resource type?<br>\nFor example, if a patient decided to withhold only his/her gender, would it be possible to define <em>Patient.gender</em> in the <em>Consent.provision.code</em>?</p>",
        "id": 230537440,
        "sender_full_name": "Shamil Nizamov",
        "timestamp": 1615910010
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192587\">@David Pyke</span></p>",
        "id": 230538406,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1615910352
    },
    {
        "content": "<p>Boy, you're quick... <br>\nLOINC code LP189571-5 is    Gender identity, so yes, if you're using LOINC to define what's being suppressed, then that would work</p>",
        "id": 230538583,
        "sender_full_name": "David Pyke",
        "timestamp": 1615910405
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192587\">@David Pyke</span>, I'm not sure that's what's being asked (although that may be what they want). Can you use FHIRPath to define the elements to withold?</p>",
        "id": 230544014,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1615911565
    },
    {
        "content": "<p>WE haven't really worked with a use case to have an expression define the required filter.  That being said, it could be done but would need to be an extension</p>",
        "id": 230546032,
        "sender_full_name": "David Pyke",
        "timestamp": 1615912219
    },
    {
        "content": "<p>This is exactly what we are trying to avoid, i.e., using codes that (suddenly) may change. It's quite easier to define the restricted element by the FHIRPath. For example:</p>\n<div class=\"codehilite\"><pre><span></span><code>  &lt;provision&gt;\n    &lt;type value=&quot;deny&quot;/&gt;\n    ...\n    &lt;class&gt;\n      &lt;system value=&quot;http://hl7.org/fhir/resource-types&quot;/&gt;\n      &lt;code value=&quot;Patient&quot;/&gt;\n    &lt;/class&gt;\n    &lt;code&gt;\n      &lt;coding&gt;\n        &lt;system value=&quot;http://hl7.org/fhirpath&quot;/&gt;\n        &lt;code value=&quot;Patient.gender&quot;/&gt;\n      &lt;/coding&gt;\n    &lt;/code&gt;\n    ...\n  &lt;/provision&gt;\n</code></pre></div>\n<p>PS. Should I submit a ticket to consider including FHIRPath or may be to introduce a new element for that?</p>",
        "id": 230548552,
        "sender_full_name": "Shamil Nizamov",
        "timestamp": 1615913084
    },
    {
        "content": "<p>Yes please!</p>",
        "id": 230558219,
        "sender_full_name": "David Pyke",
        "timestamp": 1615916319
    },
    {
        "content": "<p>I would think you would have to define a new element to use fhirpath in, as if the binding is extensible it would be non-compliant to have a second way to represent \"patient's gender\" as a code.</p>",
        "id": 230558810,
        "sender_full_name": "ryan moehrke",
        "timestamp": 1615916545
    },
    {
        "content": "<p>Absolutely. We would need an element that uses an expression, kind of like <a href=\"http://hl7.org/fhir/metadatatypes.html#Expression\">http://hl7.org/fhir/metadatatypes.html#Expression</a></p>",
        "id": 230559726,
        "sender_full_name": "David Pyke",
        "timestamp": 1615916862
    },
    {
        "content": "<p>Why? Since the <em>.code</em> is CodeableConcept I should be able to use the following:</p>\n<div class=\"codehilite\"><pre><span></span><code>  &lt;code&gt;\n    &lt;coding&gt;\n      &lt;system value=&quot;http://loinc.org&quot;/&gt;\n      &lt;code value=&quot;76691-5&quot;/&gt;\n    &lt;/coding&gt;\n    &lt;coding&gt;\n      &lt;system value=&quot;http://hl7.org/fhirpath&quot;/&gt;\n      &lt;code value=&quot;Patient.gender&quot;/&gt;\n    &lt;/coding&gt;\n  &lt;/code&gt;\n</code></pre></div>",
        "id": 230560294,
        "sender_full_name": "Shamil Nizamov",
        "timestamp": 1615917003
    },
    {
        "content": "<p>You might be able to but people will likely want to do more than that so it may be better to set up FHIRPath expressions in the resource itself</p>",
        "id": 230561081,
        "sender_full_name": "David Pyke",
        "timestamp": 1615917285
    },
    {
        "content": "<p>And I don't believe FHIRPath is a registered code system so that may cause issues</p>",
        "id": 230561228,
        "sender_full_name": "David Pyke",
        "timestamp": 1615917339
    },
    {
        "content": "<p>I'm puzzled a bit, could you show an example with the FHIRPath expression in this context?<br>\nAnd I likely need to submit a ticket to include FHIRPath to the FHIR Terminology as well.</p>",
        "id": 230561849,
        "sender_full_name": "Shamil Nizamov",
        "timestamp": 1615917535
    },
    {
        "content": "<p>Creating FHIRPath as a codesystem is more than just a ticket.  That would be a major project.</p>",
        "id": 230562142,
        "sender_full_name": "David Pyke",
        "timestamp": 1615917617
    },
    {
        "content": "<p>FHIRPath isn't a code system.  It doesn't define \"concepts\".  It doesn't provide definitions.  It's a different thing.  An extension that points to Expression is a much better path</p>",
        "id": 230565534,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1615918856
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"192587\">David Pyke</span> <a href=\"#narrow/stream/179166-implementers/topic/FHIRPath.20in.20Consent/near/230558219\">said</a>:</p>\n<blockquote>\n<p>Yes please!</p>\n</blockquote>\n<p>Created: <a href=\"https://jira.hl7.org/browse/FHIR-31550\">FHIR-31550</a></p>",
        "id": 230567193,
        "sender_full_name": "Shamil Nizamov",
        "timestamp": 1615919554
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> <a href=\"#narrow/stream/179166-implementers/topic/FHIRPath.20in.20Consent/near/230565534\">said</a>:</p>\n<blockquote>\n<p>FHIRPath isn't a code system.  It doesn't define \"concepts\".  It doesn't provide definitions.  It's a different thing.  An extension that points to Expression is a much better path</p>\n</blockquote>\n<p>I know. But while waiting for a better option, and for internal use only, and trying to avoid extension which may be too much, such quick and dirty non compliant solution may work.</p>",
        "id": 230572664,
        "sender_full_name": "Shamil Nizamov",
        "timestamp": 1615921734
    },
    {
        "content": "<p>how would abusing a code be \"too much\" than just defining an extension which would be exactly what you need?</p>",
        "id": 230574007,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1615922270
    },
    {
        "content": "<p>A non-compliant solution should <em>never</em> be preferable to using an extension.  Extensions are normal and a completely reasonable way to handle special requirements.  Abusing core elements is not a good plan.</p>",
        "id": 230574910,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1615922638
    },
    {
        "content": "<p>I think this is the model that we are looking at in Permission</p>",
        "id": 230597123,
        "sender_full_name": "John Moehrke",
        "timestamp": 1615931551
    },
    {
        "content": "<p>what we need are some real examples to work on. theory has only taken us so far</p>",
        "id": 230597180,
        "sender_full_name": "John Moehrke",
        "timestamp": 1615931589
    },
    {
        "content": "<p>One downside to using FHIRPath for disclosure consent is that it would be tied to a specific attribute (or perhaps enumerated attributes). Using a \"do not disclose gender\" code would allow the server to target administrative sex, gender observations, and potentially things like certain procedures or conditions, etc.</p>",
        "id": 230632584,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1615951907
    },
    {
        "content": "<p>The trick(s) would be not to do that (only on ) the instance, but doing it on the profiles (\"all patient genders that leave this server\")<br>\nAnd on data class (\"all things tagged as potentially sensitive\")<br>\nAnd on clusters of data (\"whenever we see a Postal code AND a date of birth\")</p>",
        "id": 231794219,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1616676682
    },
    {
        "content": "<p>Is there an approach that does not have such downside?</p>",
        "id": 231794336,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1616676730
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192195\">@Shamil</span> the idea of providing additional content for the codes is close to the tagging of the data, but in this case you are tagging the actual value. I presume that can also be addressed by FHIRPath.</p>",
        "id": 231794679,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1616676916
    },
    {
        "content": "<p>It's not clear if your use case is <br>\na) Patient says \"I do not consent to sharing my gender data\"<br>\nb) hospital says \"in this system, for that purpose, with that entity, we do not share gender data\"</p>",
        "id": 231794860,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1616676975
    },
    {
        "content": "<p>a) is Consent<br>\nb) is Permission land</p>",
        "id": 231794919,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1616676998
    },
    {
        "content": "<p>Permission.dataScope is an Expression exactly for these purposes</p>",
        "id": 231795017,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1616677039
    }
]