[
    {
        "content": "<p>We are iterating over a large dataset, over a million records.  As we go through the links to get the next set of resource we encounter the Oracle message ORA-01975 Maximum number of expressions in a list is 1000.  Has anyone seen this and does it have anything to do with configuration settings?</p>",
        "id": 273510366,
        "sender_full_name": "Joe Atterberry",
        "timestamp": 1646063733
    },
    {
        "content": "<p>There is not quite enough info here for me to be confident in my response (e.g., what FHIR server is doing the access, etc.), but if I had to <em>guess</em>, I would say it is likely that the paging is being done by excluding records in a SQL <code>in</code> clause (e.g., <code>select ... where not in ({ids that have already been sent})</code>).</p>\n<p>Oracle has a limit of 1000 elements in a single <code>in</code> expression - you can get around it by having the code limit a single <code>in</code> to 1000 elements, then adding another list with an <code>or</code> joining them.</p>\n<p>Again, shooting from the hip without more info though.  Hope this helps!</p>",
        "id": 273511565,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1646064107
    },
    {
        "content": "<p>Hi Gino.  Can that be done on the server side?  HAPI generates the query so can we affect that somehow?  When we go to the next set of values using something like <a href=\"http://localhost:1111/my-fhir/v1?_getpages=fc2a0deb-bf8e-4556-ba57-7e7dcf9d6e4c&amp;_getpagesoffset=10&amp;_count=20&amp;_pretty=true&amp;_bundletype=searchset\">http://localhost:1111/my-fhir/v1?_getpages=fc2a0deb-bf8e-4556-ba57-7e7dcf9d6e4c&amp;_getpagesoffset=10&amp;_count=20&amp;_pretty=true&amp;_bundletype=searchset</a> can we change the query to add a list as you suggest? <span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span></p>",
        "id": 273518221,
        "sender_full_name": "Joe Atterberry",
        "timestamp": 1646066721
    },
    {
        "content": "<p>Hi Joe, if you are using HAPI, you may get a better response on the <a class=\"stream\" data-stream-id=\"179167\" href=\"/#narrow/stream/179167-hapi\">#hapi</a> stream.  I am not familiar enough with HAPI's code to offer more.</p>",
        "id": 273519637,
        "sender_full_name": "Gino Canessa",
        "timestamp": 1646067311
    },
    {
        "content": "<p>What version of HAPI FHIR are you using? If not 5.7.0, definitely start there. There are a few fixes for this kind of thing in this version.</p>",
        "id": 273521334,
        "sender_full_name": "James Agnew",
        "timestamp": 1646067920
    },
    {
        "content": "<p>..and if so, do you have a stack trace from the logs?</p>",
        "id": 273522956,
        "sender_full_name": "James Agnew",
        "timestamp": 1646068658
    },
    {
        "content": "<p>Yes, thank you.  We stumbled across bug <a href=\"https://github.com/hapifhir/hapi-fhir/issues/3123\">https://github.com/hapifhir/hapi-fhir/issues/3123</a> which was fixed in 5.6.0.  We're at 5.4.2 and accessing going to 5.6.2.  It looks like there are a few database changes we are going to have to make.  Thank you for your timely response.</p>",
        "id": 273568005,
        "sender_full_name": "Joe Atterberry",
        "timestamp": 1646089826
    }
]