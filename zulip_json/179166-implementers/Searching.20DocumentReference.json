[
    {
        "content": "<p>I'm attempting to query the <code>DocumentReference</code> endpoint and I'm running into a little trouble. I hope this is the right place to ask.</p>\n<p>I'd like to include the content of the clinical note in the results of a single FHIR query (rather than sending a subsequent request to the Binary endpoint). It seems like the <code>_include</code> querystring parameter should be able to provide this, using something like this:</p>\n<p><code>https://example.org/STU3/DocumentReference?patient=123456789&amp;class=clinical-notes&amp;_include=DocumentReference:content</code></p>\n<p>However, only resources of type <code>DocumentReference</code> are returned (no <code>Binary</code> resources in the <code>entry</code> array)</p>\n<p>My question is: 1) Is this something I'm doing wrong, 2) Is this something not supported by my FHIR instance (Epic STU3), or 3) Is this not supported by FHIR?</p>\n<p>The <a href=\"https://www.hl7.org/fhir/search.html#external\" target=\"_blank\" title=\"https://www.hl7.org/fhir/search.html#external\">FHIR Search document</a> seems to call out this exact use case (i.e., including binary resources), but it doesn't provide a sample query so I might have the syntax wrong.</p>\n<p>Thanks for taking a look!</p>\n<p>Best,<br>\nFord</p>",
        "id": 186024830,
        "sender_full_name": "Ford Parsons",
        "timestamp": 1579408180
    },
    {
        "content": "<p>Yes, there is something wrong: <code>_include</code> must  use a search parameter - and <code>content</code> is not a DocumentReference search parameter</p>",
        "id": 186025275,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1579409157
    },
    {
        "content": "<p>Also, I think Epic does not supports <code>_include</code>  at all</p>",
        "id": 186025322,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1579409222
    },
    {
        "content": "<p>Thanks for taking a look, <span class=\"user-mention\" data-user-id=\"191912\">@Michele Mottini</span> . That makes sense.</p>\n<p>Is there another technique that people are using to get the Binary content.attachment for a DocumentReference all in one request, or is it typical to use multiple requests?</p>",
        "id": 186026088,
        "sender_full_name": "Ford Parsons",
        "timestamp": 1579410921
    },
    {
        "content": "<p>I don't think it is possible</p>",
        "id": 186026136,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1579411007
    },
    {
        "content": "<p>Also, for what it's worth, Epic does appear to support <code>_include</code> (at least in their STU3 implementation). For example, this works: <code>https://example.org/STU3/MedicationRequest?patient=12345&amp;_include=MedicationRequest:medication</code>.</p>",
        "id": 186026144,
        "sender_full_name": "Ford Parsons",
        "timestamp": 1579411037
    },
    {
        "content": "<p>Thanks, appreciate your help <span class=\"user-mention\" data-user-id=\"191912\">@Michele Mottini</span></p>",
        "id": 186026185,
        "sender_full_name": "Ford Parsons",
        "timestamp": 1579411090
    },
    {
        "content": "<p>Did not even know they have a STU3 implementation now - I was talking about the good old DSTU2 one!</p>",
        "id": 186026280,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1579411329
    },
    {
        "content": "<p>They're just quietly iterating away in Wisconsin!<br>\nHere's some of their <a href=\"https://uscdi.epic.com/Specifications?api=491\" target=\"_blank\" title=\"https://uscdi.epic.com/Specifications?api=491\">STU3 documentation</a> if you're interested</p>",
        "id": 186026455,
        "sender_full_name": "Ford Parsons",
        "timestamp": 1579411719
    },
    {
        "content": "<p>(Sort of a strange choice to implement STU3, with everyone going to R4)</p>",
        "id": 186026630,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1579412130
    },
    {
        "content": "<p>Hey, I'm just a customer -- I'll take what I can get!</p>",
        "id": 186026772,
        "sender_full_name": "Ford Parsons",
        "timestamp": 1579412431
    },
    {
        "content": "<p>also note that the DocumentReference.content.attachment.url is not defined as a Reference, it is defined as a simple URL. It can be pointing at a Binary, but might be any URL. Thus asking to _include might only work when the attachment is saved as a Binary.</p>",
        "id": 186059039,
        "sender_full_name": "John Moehrke",
        "timestamp": 1579472030
    },
    {
        "content": "<p>Epic AppOrchard supports both DSTU2, STU3. They are adding R4 resources since 2019.</p>",
        "id": 186114986,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1579537070
    }
]