[
    {
        "content": "<p>Timing : event operation vs. repeat</p>\n<p>I'm not clear on how event vs repeat works.<br>\nExemple of timing:<br>\n    \"timing\": {<br>\n        \"event\": [<br>\n            \"2021-10-13T10:30:00Z\"<br>\n        ],<br>\n        \"repeat\": {<br>\n            \"boundsPeriod\": {<br>\n                \"start\": \"2021-10-13\",<br>\n                \"end\": \"2021-10-20\"<br>\n            },<br>\n            \"frequency\": 1,<br>\n            \"period\": 1,<br>\n            \"periodUnit\": \"d\",<br>\n            \"timeOfDay\": [<br>\n                \"07:00:00\",<br>\n                \"18:00:00\"<br>\n            ]<br>\n        }<br>\n    }</p>\n<p>Does it means :</p>\n<ul>\n<li>\n<p>the 2021-10-13T10:30:00Z dose is added to every day doses at 07:00 and 18:00<br>\n  i.e. operation: event + repeat<br>\nor</p>\n</li>\n<li>\n<p>no dose is scheduled as there is no match between 2021-10-13T10:30:00Z and the times of day 07:00 or 18:00<br>\n  i.e. operatioin event * repeat</p>\n</li>\n</ul>",
        "id": 257357026,
        "sender_full_name": "Olivier Boux",
        "timestamp": 1634128422
    },
    {
        "content": "<p>I think it's invalid - if you say 'once a day', you can't specify two times of the data</p>",
        "id": 257426739,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1634154737
    },
    {
        "content": "<p>Sorry, forget \"frequency\": 1<br>\nas I want \"repeat\" to express \"every day at 7h and 18h form 10/13/21 to 10/20/21\".<br>\nHow do I understand its combination with \"event\": [\"2021-10-13T10:30:00Z\"] ?</p>",
        "id": 257683847,
        "sender_full_name": "Olivier Boux",
        "timestamp": 1634297934
    },
    {
        "content": "<p>(I delete the frequency element because the timeOfDay element is more accurate)</p>",
        "id": 257685195,
        "sender_full_name": "Olivier Boux",
        "timestamp": 1634298735
    },
    {
        "content": "<p>I don't think you need 'event'.  You just need repeat.boundsRange, repeat.time</p>",
        "id": 257706096,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1634307901
    },
    {
        "content": "<p>Yes, I think so.<br>\nBut my question is, what does it mean when I get this mix of event and repeat?</p>\n<ul>\n<li>Is it allowed or not?</li>\n<li>If it is allowed, do I have to do the intersection of event and repeat (which gives the empty set) or do I have to do the union of event and repeat (which gives 17 time-stamped unit events)</li>\n</ul>",
        "id": 257770969,
        "sender_full_name": "Olivier Boux",
        "timestamp": 1634334935
    },
    {
        "content": "<p>My understanding is that if both are present, the events indicate the 'instantiation' of the repeat pattern.  If the two don't jive, then I think you've got an error.</p>",
        "id": 257773836,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1634336370
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> ?</p>",
        "id": 257774097,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1634336511
    },
    {
        "content": "<blockquote>\n<p>When both event and a repeating specification are provided, the list of events should be understood as an interpretation of the information in the repeat structure</p>\n</blockquote>",
        "id": 257777352,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1634338431
    },
    {
        "content": "<p>Right - but if the repeat structure says \"do this twice a day for 10 days\" and event lists 3 times on one day and nothing else, that's an error - correct?</p>",
        "id": 257778232,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1634338899
    },
    {
        "content": "<p>yes</p>",
        "id": 257778998,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1634339331
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179166-implementers/topic/Timing.20.3A.20event.20operation.20vs.2E.20repeat/near/257777352\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p>When both event and a repeating specification are provided, the list of events should be understood as an interpretation of the information in the repeat structure</p>\n</blockquote>\n</blockquote>\n<p>1st lesson in computer science: learning to read. Sorry.</p>\n<p>If, in practice, event and repeat are exclusive, wouldn't it be better to have an 11th rule (I suppose : event.empty() or repeat.emty()), like tim-10 (timeOfDay.empty() or when.empty())</p>",
        "id": 257832112,
        "sender_full_name": "Olivier Boux",
        "timestamp": 1634391092
    },
    {
        "content": "<p>They're not exclusive - and there's value in having both.  Some systems start with the 'repeat' timing and then generate an 'event' timing to be used by downstream systems that aren't bright enough to figure out the event timing and/or to realize the repeat expectations in a manner that aligns with organizational practices/optimizes workflows.</p>",
        "id": 257841395,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1634399894
    },
    {
        "content": "<p>Ok, I didn't imagine this use case.<br>\nThanks</p>",
        "id": 257978930,
        "sender_full_name": "Olivier Boux",
        "timestamp": 1634534985
    }
]