[
    {
        "content": "<p>Hi,</p>\n<p>I would like to map probability/likelihood to Conditions, meaning the given condition happened to 50 people out of 100. Actually the ratio, 0.5 would be sufficient.  How should i map it? My two ideas were </p>\n<ul>\n<li>add a custom extension to the given condition, which has the probability value</li>\n<li>using probability field of RiskAssessment,  and reference the condition. Which does not 100% fit, because it does not assess a risk.</li>\n</ul>\n<p>what is the preferred way to map this use case?</p>",
        "id": 247444107,
        "sender_full_name": "Bela Bara",
        "timestamp": 1627469398
    },
    {
        "content": "<p>I wouldn't map it at all. It's a calculation and as such is subject to change at any moment in time. Today your measurement is 50/100 tomorrow it could be 51/101 or 51/100. Math functions like this should be calculated just in time. How many people in the last year were diagnosed with X. You fetch the conditions with code = X and diagnosis data &gt; ago(1y)/ count (patients) [essentially]. That way tomorrow you might get a different value. Storing a value on a condition where you've done math is a (at a point in time in the past, this was a value).</p>\n<p>With that said, this is where extensions for custom interfaces come into play. If you want your server to calculate this value and store it (or just report it on the way out the door) you can make an extension on the Condition for your value. As an extension, only you and the consumers of your data that are in-the-know with your customization will know what it means.</p>",
        "id": 247452272,
        "sender_full_name": "Daniel Venton",
        "timestamp": 1627475587
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"335936\">Daniel Venton</span> <a href=\"#narrow/stream/179166-implementers/topic/Mapping.20probability.20of.20a.20condition/near/247452272\">said</a>:</p>\n<blockquote>\n<p>I wouldn't map it at all. It's a calculation and as such is subject to change at any moment in time. Today your measurement is 50/100 tomorrow it could be 51/101 or 51/100. Math functions like this should be calculated just in time. How many people in the last year were diagnosed with X. You fetch the conditions with code = X and diagnosis data &gt; ago(1y)/ count (patients) [essentially]. That way tomorrow you might get a different value. Storing a value on a condition where you've done math is a (at a point in time in the past, this was a value).</p>\n<p>With that said, this is where extensions for custom interfaces come into play. If you want your server to calculate this value and store it (or just report it on the way out the door) you can make an extension on the Condition for your value. As an extension, only you and the consumers of your data that are in-the-know with your customization will know what it means.</p>\n</blockquote>\n<p>Hey Daniel, thanks for your quick response. Actually the conditions are in a report and the measurement belongs to the current moment, so wonÂ´t be any need to recalculate the measurement with another date later. Also my first thought was to use extensions, sounds reasonable.</p>",
        "id": 247454190,
        "sender_full_name": "Bela Bara",
        "timestamp": 1627476870
    },
    {
        "content": "<p>This would be an Observation - which allows you to calculate a point-in-time value.  Ideally, the Observation would have a subject of a Group which would define the characteristics of the set of individuals the probability was calculated across (by age, gender, region, whatever).  The Observation could also indicate the period of time over which the probability was asserted to be true.</p>",
        "id": 247461050,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1627480131
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>  for your explanation, it helped a lot.</p>",
        "id": 247470344,
        "sender_full_name": "Bela Bara",
        "timestamp": 1627484273
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"428829\">Bela Bara</span> has marked this topic as resolved.</p>",
        "id": 247470354,
        "sender_full_name": "Notification Bot",
        "timestamp": 1627484277
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"428829\">@Bela Bara</span> <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>  If you are reporting the risk of a Condition for an individual I agree that would be best done in an Observation Resource.  If you are reporting the proportion of a Group that has the Condition (as a method to estimate the risk), this could use the Evidence Resource.</p>",
        "id": 247493523,
        "sender_full_name": "Brian Alper",
        "timestamp": 1627494958
    },
    {
        "content": "<p>True, though the use of Evidence is going to be primarily focused on the subset of systems that actually work in that space.  You won't see much (any?) of that in the current set of clinical systems, though it may penetrate in time.</p>",
        "id": 247524868,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1627511161
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"428829\">Bela Bara</span> has marked this topic as unresolved.</p>",
        "id": 247553495,
        "sender_full_name": "Notification Bot",
        "timestamp": 1627544838
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> <a href=\"#narrow/stream/179166-implementers/topic/Mapping.20probability.20of.20a.20condition/near/247461050\">said</a>:</p>\n<blockquote>\n<p>This would be an Observation - which allows you to calculate a point-in-time value.  Ideally, the Observation would have a subject of a Group which would define the characteristics of the set of individuals the probability was calculated across (by age, gender, region, whatever).  The Observation could also indicate the period of time over which the probability was asserted to be true.</p>\n</blockquote>\n<p>Can you provide an example how the structure would look like in case of using an Observation to record only the probability (50/100) of the condition without any additional information?</p>",
        "id": 247553633,
        "sender_full_name": "Bela Bara",
        "timestamp": 1627544990
    },
    {
        "content": "<p>Two options - do you have a code that allows you to say \"probability of Condition x\" or only a code that allows you to say \"probability of condition\"?  In the latter case, the Condition would need to be expressed as an Observations.component.</p>",
        "id": 247581495,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1627564627
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> <a href=\"#narrow/stream/179166-implementers/topic/Mapping.20probability.20of.20a.20condition/near/247581495\">said</a>:</p>\n<blockquote>\n<p>Two options - do you have a code that allows you to say \"probability of Condition x\" or only a code that allows you to say \"probability of condition\"?  In the latter case, the Condition would need to be expressed as an Observations.component.</p>\n</blockquote>\n<p>would that make sense in this format? what would be the ideal code of this kind of observation? As an additional information, the value will be the percentage (50% in the example) , instead of the 50/100 measurement.</p>\n<div class=\"codehilite\"><pre><span></span><code>{\n      &quot;resource&quot;: {\n        &quot;resourceType&quot;: &quot;Observation&quot;,\n        &quot;id&quot;: &quot;33eb9106-7e60-41d8-b0b8-1704cfc58f18&quot;,\n        &quot;meta&quot;: {\n          &quot;versionId&quot;: &quot;508cf963-5936-4baa-8273-571df3b7e802&quot;\n        },\n        &quot;text&quot;: {\n          &quot;status&quot;: &quot;generated&quot;,\n          &quot;div&quot;: &quot;&lt;div xmlns=\\&quot;http://www.w3.org/1999/xhtml\\&quot;&gt;&lt;div class=\\&quot;hapiHeaderText\\&quot;&gt;&lt;p&gt;Document &lt;span&gt;Observation/33eb9106-7e60-41d8-b0b8-1704cfc58f18/_history/508cf963-5936-4baa-8273-571df3b7e802&lt;/span&gt;&lt;/p&gt;&lt;/div&gt;&lt;table class=\\&quot;hapiPropertyTable\\&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;Coding Code&lt;/td&gt;&lt;td&gt;169282000&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;Coding Display:&lt;/td&gt;&lt;td&gt;Diagnostic data computerization&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&quot;\n        },\n        &quot;code&quot;: {\n          &quot;coding&quot;: [\n            {\n              &quot;system&quot;: &quot;http://snomed.info/sct&quot;,\n              &quot;code&quot;: &quot;169282000&quot;,\n              &quot;display&quot;: &quot;Diagnostic data computerization&quot;\n            }\n          ]\n        },\n        &quot;subject&quot;: {\n          &quot;reference&quot;: &quot;Patient/ba1e8d16-f4d5-4968-9a8a-93f1daab5f86&quot;\n        },\n        &quot;focus&quot;: [\n          {\n            &quot;reference&quot;: &quot;Condition/39a6ab7b-15e4-48d8-866a-6a5b08262447&quot;\n          }\n        ],\n        &quot;valueQuantity&quot;: {\n          &quot;value&quot;: 50,\n          &quot;unit&quot;: &quot;percent&quot;\n        }\n      }\n    }\n</code></pre></div>",
        "id": 247697738,
        "sender_full_name": "Bela Bara",
        "timestamp": 1627645911
    },
    {
        "content": "<p>If the observation is being made about a population, the subject should be a Group that defines the population, not an individual Patient.  I don't know if there's a standard LOINC or SNOMED code for this - but the code would either need to be specific to the condition or you'd need to communicate the condition as a Observation.component.value.</p>",
        "id": 247711471,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1627653560
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"428829\">Bela Bara</span> has marked this topic as resolved.</p>",
        "id": 247928354,
        "sender_full_name": "Notification Bot",
        "timestamp": 1627915779
    }
]