[
    {
        "content": "<p>here is a build branch that shows how media is merged into DocumentReference:  <a href=\"http://build.fhir.org/branches/moehrke-docRef/\" target=\"_blank\" title=\"http://build.fhir.org/branches/moehrke-docRef/\">http://build.fhir.org/branches/moehrke-docRef/</a></p>",
        "id": 168449940,
        "sender_full_name": "Eric Haas",
        "timestamp": 1560888002
    },
    {
        "content": "<p>Based on this outline here:  <a href=\"http://confluence.hl7.org:8090/display/IMIN/Draft+of+Change+Proposal+to+merge+Media+and+Document+Reference\" target=\"_blank\" title=\"http://confluence.hl7.org:8090/display/IMIN/Draft+of+Change+Proposal+to+merge+Media+and+Document+Reference\">http://confluence.hl7.org:8090/display/IMIN/Draft+of+Change+Proposal+to+merge+Media+and+Document+Reference</a></p>",
        "id": 168450174,
        "sender_full_name": "Eric Haas",
        "timestamp": 1560888124
    },
    {
        "content": "<p>Several HL7 workgroups will be voting on pushing these changes into the FHIR specification for Version R5 in the next 2 weeks.</p>",
        "id": 168450250,
        "sender_full_name": "Eric Haas",
        "timestamp": 1560888179
    },
    {
        "content": "<p>If anybody is really against this then let me know here.</p>",
        "id": 168450355,
        "sender_full_name": "Eric Haas",
        "timestamp": 1560888244
    },
    {
        "content": "<p>Updates to the DocumentReference Description and Scope and Usage have been made to reflect the merge and several new elements have been added to the Attachment data type  ( non breaking  changes )  as well.</p>",
        "id": 168450546,
        "sender_full_name": "Eric Haas",
        "timestamp": 1560888382
    },
    {
        "content": "<p>Any discussion on renaming of the resource has been pushed off until after the proposed merge.  And SHOULD NOT be discussed in this stream as is off topic.</p>",
        "id": 168450814,
        "sender_full_name": "Eric Haas",
        "timestamp": 1560888553
    },
    {
        "content": "<p>The changes to Attachment don't differentiate what's normative and what's not.  That needs to happen.  I have to admit that DocumentReference feels super-heavy for the purpose of Media.  Some of the elements that are \"core\" for the XDS use-case become more and more questionable as we generify the purpose of the resource to be metadata for 'everything' rather than just documents, and sometimes to not even be a reference at all.  The name is also now horrible.  I <em>really</em> want it to change before it gets locked down.  Yes, it's widely used under the old name, but the name doesn't reflect the scope at all anymore and it's super confusing and non-intuitive to most users.</p>",
        "id": 168470004,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1560907240
    },
    {
        "content": "<p>we have updated the introduction.  However Git is being fussy and unable to display it on the branch.  My local copy is below...</p>",
        "id": 168514968,
        "sender_full_name": "Eric Haas",
        "timestamp": 1560956775
    },
    {
        "content": "<p><a href=\"/user_uploads/10155/Yo3zPn1R0r0dCa_25vcQxPpn/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/Yo3zPn1R0r0dCa_25vcQxPpn/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/Yo3zPn1R0r0dCa_25vcQxPpn/pasted_image.png\"></a></div>",
        "id": 168515400,
        "sender_full_name": "Eric Haas",
        "timestamp": 1560956963
    },
    {
        "content": "<p>The problem is that we're defining the term \"document\" here in a way that's completely different from how we defined \"document\" here: <a href=\"http://build.fhir.org/documents.html\" target=\"_blank\" title=\"http://build.fhir.org/documents.html\">http://build.fhir.org/documents.html</a>.  And the only reason we're doing that is to avoid changing the name.  In my opinion, it's going to cause tremendous confusion for FHIR to overload the term 'document' that way.  Avoiding a name change is not a sufficient rationale to introduce such confusion.  \"RecordReference\", \"ArtifactReference\" or something else would avoid the need to overload the term 'document' and be much less confusing.</p>",
        "id": 168519912,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1560960040
    },
    {
        "content": "<blockquote>\n<p>The problem is that we're defining the term \"document\" here in a way that's completely different from how we defined \"document\" here: <a href=\"http://build.fhir.org/documents.html\" target=\"_blank\" title=\"http://build.fhir.org/documents.html\">http://build.fhir.org/documents.html</a>.  And the only reason we're doing that is to avoid changing the name.  In my opinion, it's going to cause tremendous confusion for FHIR to overload the term 'document' that way.  Avoiding a name change is not a sufficient rationale to introduce such confusion.  \"RecordReference\", \"ArtifactReference\" or something else would avoid the need to overload the term 'document' and be much less confusing.</p>\n</blockquote>\n<p>I have recommended a rename for this reason... but got pushback from the FHIR Product Manager, with the indication that the resource is in wide use today and thus rename would be too big of a change.</p>",
        "id": 168520349,
        "sender_full_name": "John Moehrke",
        "timestamp": 1560960364
    },
    {
        "content": "<blockquote>\n<p>The changes to Attachment don't differentiate what's normative and what's not.  That needs to happen.  I have to admit that DocumentReference feels super-heavy for the purpose of Media.  Some of the elements that are \"core\" for the XDS use-case become more and more questionable as we generify the purpose of the resource to be metadata for 'everything' rather than just documents, and sometimes to not even be a reference at all.  The name is also now horrible.  I <em>really</em> want it to change before it gets locked down.  Yes, it's widely used under the old name, but the name doesn't reflect the scope at all anymore and it's super confusing and non-intuitive to most users.</p>\n</blockquote>\n<p>Extra elements are all optional. Which elements specifically do you see as 'heavy'?<br>\nGood point on Attachment, I didn't think about this... I can look at how that happens.</p>",
        "id": 168520422,
        "sender_full_name": "John Moehrke",
        "timestamp": 1560960444
    },
    {
        "content": "<p>what I said about the renaming was that I insist we consult the community on it. I predict they will not find Lloyd's argument persuasive.</p>",
        "id": 168550024,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560982180
    },
    {
        "content": "<p>because Document is a generic term like template with a 1000 meanings anyway</p>",
        "id": 168550031,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1560982202
    },
    {
        "content": "<p>I'll bet that there aren't very many people (implementers or otherwise) outside of those in the FHIR community who have heard of this specific issue who would consider an audio file to be a document (just as one example).</p>",
        "id": 168561972,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1560997924
    },
    {
        "content": "<p>Or a picture of a wound.  Or a training video.</p>",
        "id": 168562899,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1560999523
    },
    {
        "content": "<p>The IHE XDS community is already well aware that  what XDS calls a \"document\" is in effect a \"Blob\". As such renaming shouldn't be an issue to them. I'd be in favor of a name change.</p>",
        "id": 168571584,
        "sender_full_name": "Ren√© Spronk",
        "timestamp": 1561014087
    },
    {
        "content": "<p>Late to the game here so I don't understand the subtleties of the arguments (for/against) but back <strong> before </strong> the days of even IHE XDS I remember the discussions about being able to represent and transport \"blobs\" of data in a payload, not just so-called \"documents\".   The idea back then was to be able to transport the artefacts of any medical procedure (or observation) that just so happens to be captured in an opaque binary format.   I tend to think of these as \"blobs\" and the stuff (yes, technical term ;-) ) around them as metadata describing the \"blob\".   Even V2 had the notion of 'text documents\" (MDM^T02) and reference documents (MDM^T01) that provided a distinction between the content of the document and its representation.</p>",
        "id": 168589163,
        "sender_full_name": "John Silva",
        "timestamp": 1561032260
    },
    {
        "content": "<p>I'd be ok with BlobReference too :)</p>",
        "id": 168590581,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1561033789
    },
    {
        "content": "<p>Discussing the name is off topic for this stream.  Whatever the name will be,  we want comments to any opposition to the rolling Media into The thing currently known as DocumenReference that John spent quite a bit of time putting together.</p>",
        "id": 168598297,
        "sender_full_name": "Eric Haas",
        "timestamp": 1561039395
    },
    {
        "content": "<p>Except for basedOn, <a href=\"http://build.fhir.org/branches/moehrke-docRef/documentreference.html\" target=\"_blank\" title=\"http://build.fhir.org/branches/moehrke-docRef/documentreference.html\">http://build.fhir.org/branches/moehrke-docRef/documentreference.html</a> is no different from <a href=\"http://build.fhir.org/documentreference.html\" target=\"_blank\" title=\"http://build.fhir.org/documentreference.html\">http://build.fhir.org/documentreference.html</a></p>",
        "id": 168600320,
        "sender_full_name": "Ren√© Spronk",
        "timestamp": 1561040807
    },
    {
        "content": "<p>Correct Rene, there is very little need to change DocumentReference. There have been some changes to the narrative, specifically scope.</p>",
        "id": 168600450,
        "sender_full_name": "John Moehrke",
        "timestamp": 1561040898
    },
    {
        "content": "<p>The renaming will help with the scope discussion. But that's off topic (officially)</p>",
        "id": 168600810,
        "sender_full_name": "Ren√© Spronk",
        "timestamp": 1561041125
    },
    {
        "content": "<p><a href=\"http://build.fhir.org/branches/moehrke-docRef/datatypes.html#Attachment\" target=\"_blank\" title=\"http://build.fhir.org/branches/moehrke-docRef/datatypes.html#Attachment\">http://build.fhir.org/branches/moehrke-docRef/datatypes.html#Attachment</a> why \"pages\"? And why duration in seconds instead of a normal time data type?</p>",
        "id": 168600840,
        "sender_full_name": "Ren√© Spronk",
        "timestamp": 1561041157
    },
    {
        "content": "<p>because that is what they were in Media... I was just asked to move them into Attachment.</p>",
        "id": 168600881,
        "sender_full_name": "John Moehrke",
        "timestamp": 1561041188
    },
    {
        "content": "<p>further refinement can be done post the agreement of the merger</p>",
        "id": 168600917,
        "sender_full_name": "John Moehrke",
        "timestamp": 1561041215
    },
    {
        "content": "<p>Well, we should really be asking those that have implemented Media. Coming from the DocumentReference side this merger doesn't seem to be a big deal. From the Media side the metadata options 'explode' by having this merger.</p>",
        "id": 168601183,
        "sender_full_name": "Ren√© Spronk",
        "timestamp": 1561041378
    },
    {
        "content": "<p>yes that seems the actionable question... I would point out that additional elements that are optional should not be seen as 'explosion', as if you don't use them then you have the same number of elements.</p>",
        "id": 168601343,
        "sender_full_name": "John Moehrke",
        "timestamp": 1561041492
    },
    {
        "content": "<p>I'm aware of that, but given that we aim to go for the 80% it doesn't really make sense to provide tons of metadata options if implementers are not going to (most of the time) implement them.</p>",
        "id": 168601534,
        "sender_full_name": "Ren√© Spronk",
        "timestamp": 1561041616
    },
    {
        "content": "<p>I am not against identifying these extra for discussion. I am not against moving them to core extensions... just don't like the \"too many elements\" argument that is not backed by details supporting that argument.</p>",
        "id": 168602459,
        "sender_full_name": "John Moehrke",
        "timestamp": 1561042271
    },
    {
        "content": "<p>&lt;humor&gt; <a href=\"https://www.youtube.com/watch?v=dCud8H7z7vU\" target=\"_blank\" title=\"https://www.youtube.com/watch?v=dCud8H7z7vU\">https://www.youtube.com/watch?v=dCud8H7z7vU</a> &lt;/humor&gt; -- \"There are simply too many notes.\"</p>\n<div class=\"youtube-video message_inline_image\"><a data-id=\"dCud8H7z7vU\" href=\"https://www.youtube.com/watch?v=dCud8H7z7vU\" target=\"_blank\" title=\"https://www.youtube.com/watch?v=dCud8H7z7vU\"><img src=\"https://i.ytimg.com/vi/dCud8H7z7vU/default.jpg\"></a></div>",
        "id": 168602640,
        "sender_full_name": "John Moehrke",
        "timestamp": 1561042377
    },
    {
        "content": "<p>It's not so much a question of \"too many elements\" as a lot of elements that are quite esoteric and XDS-specific which makes less sense given that the scope of the resource is so much broader.  Specifically:<br>\n- masterIdentifier is the most bothersome.  It doesn't even really make sense in a general document sense and is very much an IHE thing.  We don't define \"master\" identifiers anywhere else.  Suggest putting  an extension on one of the other identifiers<br>\n- docStatus - entered-in-error is redundant with status.  <br>\n- perhaps group docStatus, authenticator, custodian under a grouper so they can be excluded as a group if we don't want to make them extensions?<br>\n- securityLabel - the situations where the constraints on the reference and the constraints on the target differ seems pretty essoteric</p>",
        "id": 168603215,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1561042788
    },
    {
        "content": "<p>excellent points. I would agree that there are issues with these, even in an XDS world. So don't blame XDS for all problems. So lets discuss solutions.</p>",
        "id": 168604203,
        "sender_full_name": "John Moehrke",
        "timestamp": 1561043360
    },
    {
        "content": "<p>masterIdentifier could very easily go to an extension only used with XDS.. It is essentially XDS equivilant of the FHIR .id value...</p>",
        "id": 168604246,
        "sender_full_name": "John Moehrke",
        "timestamp": 1561043398
    },
    {
        "content": "<p>it is also not all that useful for a client to get the masterIdentifier except for making relationships... which in FHIR the relationships are done with .id values... so it is just a business identifier</p>",
        "id": 168604342,
        "sender_full_name": "John Moehrke",
        "timestamp": 1561043449
    },
    {
        "content": "<p>The docStatus and securityLabel are important as the lifecycle of the Binary is not perfectly aligned with the lifecycle of the DocumentReference.    Thus the .meta.security is the security labels on the DocumentReference, where .securityLabel is the security labels on the Binary.  and .status is the status of the DocumentReference while docStatus is the status of the Binary.</p>",
        "id": 168604569,
        "sender_full_name": "John Moehrke",
        "timestamp": 1561043597
    },
    {
        "content": "<p>note .custodian is NOT at all an XDS item. No idea why it is there or how it is expected to be used.</p>",
        "id": 168605023,
        "sender_full_name": "John Moehrke",
        "timestamp": 1561043894
    },
    {
        "content": "<p>.docStatus is also NOT an XDS item...</p>",
        "id": 168605083,
        "sender_full_name": "John Moehrke",
        "timestamp": 1561043954
    },
    {
        "content": "<p>.docStatus seems to come from mapping with Composition - <a href=\"http://build.fhir.org/documentreference-mappings.html#fhircomposition\" target=\"_blank\" title=\"http://build.fhir.org/documentreference-mappings.html#fhircomposition\">http://build.fhir.org/documentreference-mappings.html#fhircomposition</a></p>",
        "id": 168605133,
        "sender_full_name": "John Moehrke",
        "timestamp": 1561044001
    },
    {
        "content": "<p>ah, oops -- masterIdentifier is the identifier of the Binary (I forgot and thought it was the XDS DocumentEntry.entryUUID but it is not  <a href=\"http://build.fhir.org/documentreference-mappings.html#xds\" target=\"_blank\" title=\"http://build.fhir.org/documentreference-mappings.html#xds\">http://build.fhir.org/documentreference-mappings.html#xds</a><br>\nSo is .masterIdentifier better renamed to .attachmentIdentifier and move it into the .content group?</p>",
        "id": 168605381,
        "sender_full_name": "John Moehrke",
        "timestamp": 1561044144
    },
    {
        "content": "<p>or should the datatype Attachment have an .identifier element?</p>",
        "id": 168605439,
        "sender_full_name": "John Moehrke",
        "timestamp": 1561044205
    },
    {
        "content": "<p>docStatus would be meaningless for most binaries - even for many PDFs.  It really only applies to 'true' documents.  If we need to retain docStatus, custodian and authenticator as core, it'd be nice to group them and make clear \"these things are only relevant if you're doing 'true' documents.   And the dual places for \"entered-in-error\" is definitely a problem.</p>\n<p>Can you explain where the binary security labels and the reference security labels would be different?</p>\n<p>For masterIdentifier, I don't understand why it wouldn't just be another identifier in the collection</p>",
        "id": 168609914,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1561047292
    },
    {
        "content": "<p>so masterIdentifier is the identifier of the Binary. It would be wrong to say that identifier is the same identifier as the DocumentReference. ---- at least this is the explaination that I can come up with. I might be convinced that it could be just an .identifier... just want to make it clear that if someone looks for that identifier they need to know that they have found a metadata object (DocumentReference) that describes the thing they were looking for, and that if they really want that identifier they need to deference the attachment.</p>",
        "id": 168610232,
        "sender_full_name": "John Moehrke",
        "timestamp": 1561047523
    },
    {
        "content": "<p>as to securityLabel... A container can carry a more restrictive label than the data within.    Also, a security assessment can downgrade (de-classify) data.</p>",
        "id": 168610402,
        "sender_full_name": "John Moehrke",
        "timestamp": 1561047629
    },
    {
        "content": "<p>is it exceptional? Yes, it is... but the point is that the Binary needs a securityLabel... if it is not different, then don't fill it out. it has cardionality 0..*</p>",
        "id": 168610503,
        "sender_full_name": "John Moehrke",
        "timestamp": 1561047720
    },
    {
        "content": "<p>grouping as you mentioned (twice) is a fine recommendation..</p>",
        "id": 168610588,
        "sender_full_name": "John Moehrke",
        "timestamp": 1561047772
    },
    {
        "content": "<p>Why would it be wrong?</p>",
        "id": 168610735,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1561047893
    },
    {
        "content": "<p>well that is indeed my operational question... is it wrong to have DocumentReference.identifier that is equal to Composition.identifier (or CDA uniqueId)?   it seems that identifier is identifiying something one step away from DocumentReference</p>",
        "id": 168610865,
        "sender_full_name": "John Moehrke",
        "timestamp": 1561047984
    },
    {
        "content": "<p>The placer numbers and filler numbers for a given order commonly exist on the same instance even though they're talking about different things.  In terms of a reference, there's really no reason for it to have <em>any</em> identifiers that are distinct from the thing it's indexing.  It'll have a resource id, but I can't conceive of any reason why something would need to reference a reference by a \"business\" identifier that's distinct from a business identifier associated with the referenced item.</p>",
        "id": 168610868,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1561047991
    },
    {
        "content": "<p>Also, I'd expect the binary to be the thing that would typically have multiple identifiers - i.e. the CDA document, the PDF, the diagnostic image, etc.</p>",
        "id": 168610900,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1561048028
    },
    {
        "content": "<blockquote>\n<p>Also, I'd expect the binary to be the thing that would typically have multiple identifiers - i.e. the CDA document, the PDF, the diagnostic image, etc.</p>\n</blockquote>\n<p>what?</p>",
        "id": 168610932,
        "sender_full_name": "John Moehrke",
        "timestamp": 1561048078
    },
    {
        "content": "<p>those all have one unique identifier of an instance.</p>",
        "id": 168611034,
        "sender_full_name": "John Moehrke",
        "timestamp": 1561048129
    },
    {
        "content": "<p>if you revise them, you get a new unique identifier... which is a new DocumentReference.... where the new DocumentReference.relatesTo points at the previous version.</p>",
        "id": 168611085,
        "sender_full_name": "John Moehrke",
        "timestamp": 1561048173
    },
    {
        "content": "<p>If you don't have this kind of a unique ID per Binary (blob), then you could use FHIR Version management of DocumentReference.. but if you have this case then you don't have a Binary that is unique ID per instance (like CDA).</p>",
        "id": 168611391,
        "sender_full_name": "John Moehrke",
        "timestamp": 1561048347
    },
    {
        "content": "<p>this is why DocumentReference has both version vectors... FHIR Versions of DocumentReference, and new instance versions through DocumentReference.relatesTo</p>",
        "id": 168611467,
        "sender_full_name": "John Moehrke",
        "timestamp": 1561048408
    },
    {
        "content": "<p>note.. you are getting me more convinced that .masterIdentifier should just be a use of .identifier... Im fine with that... not sure if others are.</p>",
        "id": 168611633,
        "sender_full_name": "John Moehrke",
        "timestamp": 1561048489
    },
    {
        "content": "<p>i have never liked .masterIdentifier... especially never liked the name (I always must remind myself that it is actually attachment identifier).</p>",
        "id": 168611700,
        "sender_full_name": "John Moehrke",
        "timestamp": 1561048531
    },
    {
        "content": "<p>Documents, images, etc can be assigned identifiers by anyone who takes them into custody.  If you send a document to multiple systems, they could each assign their own \"business\" id to it.  (In some cases, more than one.)  No changes to the document made.</p>",
        "id": 168612180,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1561048884
    },
    {
        "content": "<p>On the other hand, the index entry wouldn't have any business identifier of its own.</p>",
        "id": 168612190,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1561048898
    },
    {
        "content": "<p>it sounds to me like we should just remove masterIdentifier.</p>",
        "id": 168626750,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1561058984
    },
    {
        "content": "<p>One challenge with master identifier, is if two DocumentReference point to the same document. Shouldn't each DocRef have an identifier, which is different and distinct from the think it points to? <br>\nWe had discussions in II about whether an accession number is an identifier of an imaging study or an identifier associated with the study. Our conclusion was the latter, and thus should not be stuffed into ImagingStudy.identifier.  For DocRef, masterIdentifier is not an identifier of the DocRef, but of the thing being referenced, and similarly should be in a separate element.<br>\nI agree though, the element name sucks.</p>",
        "id": 168641312,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1561071043
    },
    {
        "content": "<p>each docRef has a different id....</p>",
        "id": 168641850,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1561071715
    },
    {
        "content": "<p>Catching up - in general it seems a good idea to critically review the new DocumentReference, both to identify things that should be XDS-specific extensions, and to see if generalisations/groupings of similar elements are possible. identifier/Masteridentifier, type/category, facilityType/PracticeSetting (used interchangably in almost all XDS implementations) ?</p>",
        "id": 168659675,
        "sender_full_name": "Ren√© Spronk",
        "timestamp": 1561099343
    }
]