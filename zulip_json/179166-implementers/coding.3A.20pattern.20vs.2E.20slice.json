[
    {
        "content": "<p>I would like to receive a GTIN code (system = urn:oid:2.51.1.1) for Medication.code, but also allow other codes, e.g. local codes. Therefore I have used the patternCodeableConcept. But if I now set the minimum cardinality of the code itself to 1, the view in the Differential Table does not seem very intuitive to me (see screen shot). Is this as it should be or could it be adapted?<br>\nOr should I rather work via a slice? I could also work with a slice, that the code becomes 1..n, because we actually need 0..n.</p>\n<p><a href=\"/user_uploads/10155/a8iSlTjF4Vx1Drip3AvGmjCQ/patternCC.png\">patternCC.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/a8iSlTjF4Vx1Drip3AvGmjCQ/patternCC.png\" title=\"patternCC.png\"><img src=\"/user_uploads/10155/a8iSlTjF4Vx1Drip3AvGmjCQ/patternCC.png\"></a></div><div class=\"codehilite\"><pre><span></span><code>      &lt;element id=&quot;Medication.code&quot;&gt;\n         &lt;path value=&quot;Medication.code&quot;/&gt;\n         &lt;min value=&quot;1&quot;/&gt;\n         &lt;patternCodeableConcept&gt;\n            &lt;coding&gt;\n               &lt;system value=&quot;urn:oid:2.51.1.1&quot;/&gt;\n            &lt;/coding&gt;\n         &lt;/patternCodeableConcept&gt;\n      &lt;/element&gt;\n      &lt;element id=&quot;Medication.code.coding&quot;&gt;\n         &lt;path value=&quot;Medication.code.coding&quot;/&gt;\n         &lt;short value=&quot;GTIN code that identify this medication&quot;/&gt;\n         &lt;mapping&gt;\n            &lt;identity value=&quot;cda&quot;/&gt;\n            &lt;map value=&quot;.code&quot;/&gt;\n         &lt;/mapping&gt;\n         &lt;mapping&gt;\n            &lt;identity value=&quot;cda&quot;/&gt;\n            &lt;map value=&quot;.pharm:asContent.pharm:containerPackagedMedicine.pharm:code&quot;/&gt;\n         &lt;/mapping&gt;\n      &lt;/element&gt;\n      &lt;element id=&quot;Medication.code.coding.code&quot;&gt;\n         &lt;path value=&quot;Medication.code.coding.code&quot;/&gt;\n         &lt;min value=&quot;1&quot;/&gt;\n         &lt;max value=&quot;1&quot;/&gt;\n      &lt;/element&gt;\n</code></pre></div>",
        "id": 212086066,
        "sender_full_name": "Michaela Ziegler",
        "timestamp": 1601650912
    },
    {
        "content": "<p>I don't think you can (or should) mix pattern and additional rules like that. you'll have to slice coding and use the pattern as a patternCoding on one of them</p>",
        "id": 212134362,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1601676469
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"233842\">@Michaela Ziegler</span> Can you post what you have done to align with <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> recommendation please? I think this requirement of using a pattern as one slice to require a coding from a specific system, but also allowing other codings is common but not well documented.</p>",
        "id": 212596620,
        "sender_full_name": "Robert McClure",
        "timestamp": 1602093869
    },
    {
        "content": "<p>I did it as with the vital sign observations as a slice on the element coding (and not with the patternCoding). Because I only define the value of the system and I want to define additionally that a code should be given.<br>\n<a href=\"https://www.hl7.org/fhir/bodyheight.html\">Observation BodyHeight</a><br>\n<a href=\"http://build.fhir.org/ig/hl7ch/ch-emed/StructureDefinition-ch-emed-medication-medicationstatement.html\">CH EMED Medication</a></p>",
        "id": 212674094,
        "sender_full_name": "Michaela Ziegler",
        "timestamp": 1602155394
    }
]