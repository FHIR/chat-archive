[
    {
        "content": "<p>Our language is free-text from various source systems.  So we do not want to map to any particular language code in the Patient resource.  Instead we put it in the language.text as such,<br>\n                &lt;language&gt;<br>\n                    &lt;text value=\"French\" /&gt;<br>\n                &lt;/language&gt;<br>\nWhen I validated my Patient resource in the validator, I got an error,<br>\nError @ Patient.contained[2].communication[1].language (line 236, col27) : No code provided, and a code must be provided from the value set <a href=\"http://hl7.org/fhir/ValueSet/all-languages\" target=\"_blank\" title=\"http://hl7.org/fhir/ValueSet/all-languages\">http://hl7.org/fhir/ValueSet/all-languages</a> (max value set <a href=\"http://hl7.org/fhir/ValueSet/languages\" target=\"_blank\" title=\"http://hl7.org/fhir/ValueSet/languages\">http://hl7.org/fhir/ValueSet/languages</a>).</p>\n<p>This error seems to imply coding is mandatory with or without text.  The FHIR specification indicates coding and text are optional.<br>\nCan someone please confirm if coding is required regardless of the presence of text or if it's a bug in the validator?</p>\n<p>Thanks</p>",
        "id": 187970677,
        "sender_full_name": "Amy Li",
        "timestamp": 1581466764
    },
    {
        "content": "<p>Resource.language has a data type of <code>code</code>, not <code>CodeableConcept</code>.  'text' is only allowed in the latter.  Resource.language must be a code from bcp:47 - in your case it should be <code>&lt;language value=\"fr\"/&gt;</code></p>",
        "id": 187971121,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1581467171
    },
    {
        "content": "<p>without seeing your resource, it will be hard to debug.  The error path shows that it's looking at a contained resource?  That seems to me like its not validating Patient.communication.language which is a CodeableConcept, but the language element of your contained resource which is a code?</p>",
        "id": 187971124,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1581467172
    },
    {
        "content": "<p>Sorry, misread.  Patient.communication.language does allow for CodeableConcept.  However, it has a 'required' binding to AllLanguages - which means you <em>must</em> have a code from that value set.  Bare text isn't allowed.</p>",
        "id": 187971267,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1581467297
    },
    {
        "content": "<blockquote>\n<p>Sorry, misread.  Patient.communication.language does allow for CodeableConcept.  However, it has a 'required' binding to AllLanguages - which means you <em>must</em> have a code from that value set.  Bare text isn't allowed.</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> we should raise this in MnM because I suspect it is rather hard for spec readers to understand that the phrase \"but limited to\" is specifying a maximum value set which thus imposes a Required binding on the data element.  I couldn't find any discussion of the maxValueSet extension anywhere in the spec.</p>",
        "id": 187971907,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1581467966
    },
    {
        "content": "<p>Agree</p>",
        "id": 187972421,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1581468515
    },
    {
        "content": "<p>done #26028</p>",
        "id": 187984091,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1581487394
    },
    {
        "content": "<p>Thank you, Jean and Lloyd for the clarification.</p>",
        "id": 188245166,
        "sender_full_name": "Amy Li",
        "timestamp": 1581713377
    },
    {
        "content": "<p>In the STU3 spec for Patient.communication.language (<a href=\"http://hl7.org/fhir/STU3/patient-definitions.html#Patient.communication.language\" target=\"_blank\" title=\"http://hl7.org/fhir/STU3/patient-definitions.html#Patient.communication.language\">http://hl7.org/fhir/STU3/patient-definitions.html#Patient.communication.language</a>), there is this comment , <br>\n\"The structure aa-BB with this exact casing is one the most widely used notations for locale. However not all systems actually code this but instead have it as free text. Hence CodeableConcept instead of code as the data type.\"  <br>\nBased on this comment, we thought using Patient.communication.language.text would be sufficient.  Now my problem is to deal with data from source systems that don't code the languages.  Is there any suggestion on how I could support plain language names that are not coded?</p>\n<p>Thanks,</p>\n<p>Amy</p>",
        "id": 188254287,
        "sender_full_name": "Amy Li",
        "timestamp": 1581720050
    }
]