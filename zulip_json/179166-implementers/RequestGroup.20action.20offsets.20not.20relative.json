[
    {
        "content": "<p>What is the best way to capture offsets of related actions in RequestGroups that aren't relative?</p>\n<p>For example, I would like to say, \"after completing action A, do action B after 8am the next day\".</p>",
        "id": 267127302,
        "sender_full_name": "Kyle Thompson",
        "timestamp": 1641510223
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span></p>",
        "id": 267128773,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1641511133
    },
    {
        "content": "<p>The solution I am considering is to create new units to use in offsetRange which represents what I need. For example, \"1 &lt;need unit name&gt;\" would represent the next 8am, \"2 &lt;need unit name&gt;\" would represent the next next 8am, and so on.</p>",
        "id": 267628341,
        "sender_full_name": "Kyle Thompson",
        "timestamp": 1641927208
    },
    {
        "content": "<p>I wouldn't encourage that.  It's not really what units are for.</p>",
        "id": 267646499,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1641935960
    },
    {
        "content": "<p>Because the unit system I am thinking of defining isn't in UCUM?</p>",
        "id": 267649311,
        "sender_full_name": "Kyle Thompson",
        "timestamp": 1641937290
    },
    {
        "content": "<p>A unit is a type of measurement.  \"next 8am\" isn't a type of measurement.</p>",
        "id": 267651455,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1641938215
    },
    {
        "content": "<p>Sorry for my confusion on this topic. Is \"age\" considered a unit in FHIR? The \"next 8am\" \"unit\" I am contemplating is modelled based on age. Perhaps this is where my mistake is.</p>",
        "id": 267655515,
        "sender_full_name": "Kyle Thompson",
        "timestamp": 1641940011
    },
    {
        "content": "<p>No, age isn't a unit. days, weeks, or years, which can be used to measure age, are though.</p>",
        "id": 267655695,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1641940100
    },
    {
        "content": "<p>One of the criteria for being a unit is \"can you do math with it?\"  E.g. 2 days + 3 days = 5 days.  3 days * 2 = 6 days.  \"1 next 8am\" * 2 doesn't really make sense...</p>",
        "id": 267656585,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1641940577
    },
    {
        "content": "<p>Is that true? Temperature is a unit and you can't do math with it (at least not unrestricted math or any math). For example, -500 * 1 C doesn't make sense as -500 C doesn't exist.</p>",
        "id": 267656705,
        "sender_full_name": "Kyle Thompson",
        "timestamp": 1641940665
    },
    {
        "content": "<p>No but if the temp is 30 C and it goes up by 5 C then 30+5=35 C.</p>",
        "id": 267656875,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1641940760
    },
    {
        "content": "<p>And temp isn't a unit -- temp is measured in units; just like age.</p>",
        "id": 267656911,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1641940790
    },
    {
        "content": "<p>I understand the point. I think the problem with what I want to define can't be defined in an \"absolute\" sense. 1 next 8am doesn't make sense by itself. It needs a dateTime or make sense.</p>",
        "id": 267656923,
        "sender_full_name": "Kyle Thompson",
        "timestamp": 1641940794
    },
    {
        "content": "<p>And that's fair about temperature.</p>",
        "id": 267656989,
        "sender_full_name": "Kyle Thompson",
        "timestamp": 1641940815
    },
    {
        "content": "<p>I don't know the FHIR scheduling well, but it seems to me what you are trying to say is the \"next morning\" after an offset measured in days.</p>",
        "id": 267657165,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1641940954
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191380\">@Elliot Silver</span> yeah, that's exactly correct.</p>",
        "id": 267657182,
        "sender_full_name": "Kyle Thompson",
        "timestamp": 1641940968
    },
    {
        "content": "<p>I think you're going to need an extension.  However, would still like to hear from <span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span>.  (He may not have bandwidth until post-connectathon though.)</p>",
        "id": 267679827,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1641959638
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> Yeah, after everyone's feedback, this is where my mind was going too. I'll proceed using an extension. If Bryn (or anyone else) has any further thoughts on this topic, it would of course be welcome and much appreciated.</p>",
        "id": 267720815,
        "sender_full_name": "Kyle Thompson",
        "timestamp": 1641992721
    },
    {
        "content": "<p>I agree, an extension is necessary. You could potentially do something dynamic with an expression extension (something like this admittedly contrived example):</p>\n<div class=\"codehilite\" data-code-language=\"XML\"><pre><span></span><code><span class=\"nt\">&lt;action&gt;</span>\n  <span class=\"nt\">&lt;action</span> <span class=\"na\">id=</span><span class=\"s\">\"a\"</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;title</span> <span class=\"na\">value=</span><span class=\"s\">\"Do A\"</span><span class=\"nt\">/&gt;</span>\n  <span class=\"nt\">&lt;/action&gt;</span>\n  <span class=\"nt\">&lt;action</span> <span class=\"na\">id=</span><span class=\"s\">\"b\"</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;title</span> <span class=\"na\">value=</span><span class=\"s\">\"Do B after 8AM the next day\"</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;relatedAction&gt;</span>\n      <span class=\"nt\">&lt;actionId</span> <span class=\"na\">value=</span><span class=\"s\">\"a\"</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;relationship</span> <span class=\"na\">value=</span><span class=\"s\">\"after-end\"</span><span class=\"nt\">/&gt;</span>\n      <span class=\"nt\">&lt;offsetRange&gt;</span>\n        <span class=\"nt\">&lt;low&gt;</span>\n          <span class=\"nt\">&lt;extension</span> <span class=\"na\">url=</span><span class=\"s\">\"http://hl7.org/fhir/StructureDefinition/cqf-expression&gt;</span>\n<span class=\"s\">            &lt;valueExpression&gt;</span>\n<span class=\"s\">              &lt;language value=\"</span><span class=\"err\">text/cql-expression\"</span><span class=\"nt\">/&gt;</span>\n              <span class=\"nt\">&lt;expression</span> <span class=\"na\">value=</span><span class=\"s\">\"(date from ((%context.action.where(id = 'a').timing as dateTime) + 1 day)) + 8 hours\"</span><span class=\"nt\">/&gt;</span>\n            <span class=\"nt\">&lt;/valueExpression&gt;</span>\n          <span class=\"nt\">&lt;/extension&gt;</span>\n        <span class=\"nt\">&lt;/low&gt;</span>\n      <span class=\"nt\">&lt;/offsetRange&gt;</span>\n    <span class=\"nt\">&lt;/relatedAction&gt;</span>\n  <span class=\"nt\">&lt;/action&gt;</span>\n<span class=\"nt\">&lt;/action&gt;</span>\n</code></pre></div>",
        "id": 267962876,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1642130128
    }
]