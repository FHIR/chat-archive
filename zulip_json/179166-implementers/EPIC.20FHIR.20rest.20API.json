[
    {
        "content": "<p>Hi all, is it possible to send data to epic via a rest API and not via HL7 messages ?? I see the FHIR api is only for getting data, but is there a way to send data to epic with API calls?  I can't figure this out, could you help me? thanks a lot.</p>",
        "id": 274258823,
        "sender_full_name": "Ani Matevosyan",
        "timestamp": 1646506042
    },
    {
        "content": "<p>Go to <a href=\"https://fhir.epic.com/\">https://fhir.epic.com/</a> and look for any resource that says \"create\" or \"update\" - those are write operations that the Epic interface supports.  Their interface (and the interfaces of most EHRs) continues to evolve over time to have additional capabilities to both read and write data.</p>",
        "id": 274260160,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1646507805
    },
    {
        "content": "<p>thank you very much <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> but I don't find any \"create\" or \"update\" operation for the surgical cases, only CDS Hooks that haven't URL for calling (seems are related to HL7 messages )</p>",
        "id": 274261558,
        "sender_full_name": "Ani Matevosyan",
        "timestamp": 1646509746
    },
    {
        "content": "<p>There is Create on AllergyIntolerance, Communication, Condition, DocumentReference, Observation, Patient and QuestionnaireResponse that are not CDS-hooks.  Several of these would be relevant for surgical use-cases.  What you don't have (yet) is Procedure or Encounter.  You may be stuck using HL7 v2 or a custom API for those, at least for now.</p>",
        "id": 274261999,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1646510348
    },
    {
        "content": "<p>ok, but I must put surgical cases info in epic, is there another way to do it excepting the hl7 messages ( using app orchard or some other thing) ??</p>",
        "id": 274262763,
        "sender_full_name": "Ani Matevosyan",
        "timestamp": 1646511323
    },
    {
        "content": "<p>You'd have to reach out to Epic on that.</p>",
        "id": 274262819,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1646511380
    },
    {
        "content": "<p>ok, thank you</p>",
        "id": 274262909,
        "sender_full_name": "Ani Matevosyan",
        "timestamp": 1646511496
    },
    {
        "content": "<p>We can handle the Epic-specific question on <a href=\"mailto:open@epic.com\">open@epic.com</a>, but more generally, \"writing\" a surgical case involves:</p>\n<ol>\n<li>match or create a patient</li>\n<li>match or create an encounter</li>\n<li>match or create a surgical case (probably appointment)</li>\n<li>if the surgical case is completed, then post the log of that case as a Procedure (or set of procedures)</li>\n<li>if you are tracking billing, then post charges (ChargeItem)</li>\n<li>if the surgical case involves anesthesia, then document that, and submit anesthesia charges (which are known to be super complicated, and I've honestly no idea how to represent that in FHIR.  Probably ChargeItem with a ton of extensions).</li>\n</ol>\n<p>All this is to say: spoiler alert: we don't have FHIR support for writing surgical cases into Epic.</p>",
        "id": 274407466,
        "sender_full_name": "Cooper Thompson",
        "timestamp": 1646666994
    },
    {
        "content": "<p>Double spoiler: There isn't a way to create a surgical case into Epic via HL7 either</p>",
        "id": 275078807,
        "sender_full_name": "Brendan Keeler",
        "timestamp": 1647063286
    },
    {
        "content": "<p>Although there is a way to update existing cases originally created in Epic</p>",
        "id": 275078831,
        "sender_full_name": "Brendan Keeler",
        "timestamp": 1647063336
    },
    {
        "content": "<p>Thank you very much for your explanations</p>",
        "id": 275225453,
        "sender_full_name": "Ani Matevosyan",
        "timestamp": 1647259091
    },
    {
        "content": "<p>Also, on a more philosophical point, I'd argue that a REST API is not the right way to push surgical cases into an EHR   Using FHIR Messaging or something like that  (maybe transactions) seems better.  I say that because the matching logic (patient, encounter, case)  is really important to do right so you don't junk up the chart.  I'm not saying \"you\" specifically would junk it up - but just that if we have a wide range of apps doing matching in different ways, it would get really hard to manage.  Instead, we'd rather the server handle all that matching in a consistent way.  I suppose we <em>could</em>  use $match (for patient) and create similar options for Encounter and all the other records that need matching, but you still have the problem of doing the create, then possibly rolling back if you fail later.  I.e., if you fail to create the case, in theory we'd want to roll back any encounters or patients you created so those aren't lingering, but then you run into issues trying to delete stuff since EHRs normally won't let you do that.  So really you need to be 100% sure that everything will file before you create anything, which you can't really do with a REST API.  It seems much simpler to just send all the information you have a case and let a server match/create/update/delete everything based on their  consistent set of business rules.</p>",
        "id": 275237093,
        "sender_full_name": "Cooper Thompson",
        "timestamp": 1647265558
    },
    {
        "content": "<p>Also, normally an EHR will want to trigger a bunch of business processes when you \"write\" a case.  Stuff like triggering charges, tracking case report requirements, etc.  Triggering that based on a RESTful write is very tricky.  We'd really want an event-based trigger of some sort.  In the true REST model, we'd make the case submitter do all of that, but I haven't seen most apps have the appetite to track and notify on all the business processes that need to happen on the backend.</p>",
        "id": 275237954,
        "sender_full_name": "Cooper Thompson",
        "timestamp": 1647265930
    },
    {
        "content": "<p>ok <span class=\"user-mention\" data-user-id=\"191764\">@Cooper Thompson</span> thank you</p>",
        "id": 275244909,
        "sender_full_name": "Ani Matevosyan",
        "timestamp": 1647268858
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191764\">@Cooper Thompson</span> what's your take on using a transaction to alleviate the consistency concerns?</p>",
        "id": 275245198,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1647268995
    },
    {
        "content": "<p>A transaction with normal REST API operations isn't enough to handle the matching logic.  Transactions still rely on clients to own the matching logic and then do create/updates with the relevant references.  I don't think you can really embed $match operations in a transaction (but maybe I'm wrong?).    But even if you could embed operations, you still need reference updates to happen on sibling interactions in the transaction.</p>\n<p>For example, for the \"encounter matching\" logic, you'd need to somehow embed this logic in the transaction:</p>\n<ol>\n<li>Search for existing encounters</li>\n<li>Review the the results, pick the \"best\" one based on whatever your business logic is.</li>\n<li>Possibly create a new encounter if you don't find a matching encounter (or if you know ahead of time you need a new encounter)</li>\n<li>Submit the subsequent case create interactions with references to that \"best\" encounter.</li>\n</ol>\n<p>-- OR --</p>\n<ol>\n<li>Invoke an Encounter.$match operation (which could be designed create an encounter if needed).</li>\n<li>Use the encounter returned from that as the reference in your subsequent case create interactions.</li>\n</ol>\n<p>As far as I know, a transaction can't handle taking the output of one operation in the transaction and dynamically updating references in subsequent operations in the same transaction. </p>\n<p>Thus why I prefer messaging (or possibly operations).  You just send the info you have, and the server applies it's own business rules to do matching and everything else.</p>",
        "id": 275247616,
        "sender_full_name": "Cooper Thompson",
        "timestamp": 1647269982
    },
    {
        "content": "<p>Also, I don't know of a great way to submit an \"event\" using a transaction.  I suppose maybe MessageHeader.create?   Though that seems very odd.  Maybe other folks have ideas of how to trigger an event RESTfully (/transactionally).</p>",
        "id": 275250172,
        "sender_full_name": "Cooper Thompson",
        "timestamp": 1647270932
    },
    {
        "content": "<p>Yep makes sense, thanks for the answer.</p>",
        "id": 275251536,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1647271472
    },
    {
        "content": "<p>I guess I should point out that if you have an end user involved that is picking the right patient/encounter/etc., then REST API is much more reasonable (but you still have the event notification problem).  But I inferred that your surgical case creation was sending everything after-the-fact and didn't involve end user selecting everything they needed for the case submission.</p>",
        "id": 275252234,
        "sender_full_name": "Cooper Thompson",
        "timestamp": 1647271757
    },
    {
        "content": "<p>Also writing data in various draft states can be a technique to prevent triggering downstream logic too early. And as Cooper mentioned, transaction bundles with standard semantics rather than a dense set of special purpose messaging bundles.</p>",
        "id": 275255845,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1647273166
    },
    {
        "content": "<p>I was told that REST solved all problems, though</p>",
        "id": 275267430,
        "sender_full_name": "Brendan Keeler",
        "timestamp": 1647277479
    },
    {
        "content": "<p>I am shook</p>",
        "id": 275267446,
        "sender_full_name": "Brendan Keeler",
        "timestamp": 1647277487
    },
    {
        "content": "<p>Most of North America just changed to Daylight Saving.  How can REST solve that?</p>",
        "id": 275267549,
        "sender_full_name": "David Pyke",
        "timestamp": 1647277533
    },
    {
        "content": "<p>if you sleep in (REST) you are not bothered by needing to get to meetings that have already happened.. problem solved.</p>",
        "id": 275277998,
        "sender_full_name": "John Moehrke",
        "timestamp": 1647282181
    }
]