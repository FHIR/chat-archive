[
    {
        "content": "<p>We are experiencing a problem using AWS API Gateway and the FHIR standard for search modifiers. We are trying to support the 'exact' and 'contains' modifiers for string search terms. So, we want to be able to search in the following way:</p>\n<p><a href=\"http://fhir.example.com/ParactitionerRole?practitioner.family:exact=smith\" target=\"_blank\" title=\"http://fhir.example.com/ParactitionerRole?practitioner.family:exact=smith\">http://fhir.example.com/ParactitionerRole?practitioner.family:exact=smith</a></p>\n<p>However, the colon character between the parameter and the modifier is giving us problems and seems not to be supported by the AWS API Gateway that we are using to serve our API.</p>\n<p>Has anyone else come across this issue?</p>",
        "id": 153927577,
        "sender_full_name": "John Carter",
        "timestamp": 1515021962
    },
    {
        "content": "<p>This is us trying to meet the requirements of string-based search as defined here: <a href=\"https://www.hl7.org/fhir/search.html#string\" target=\"_blank\" title=\"https://www.hl7.org/fhir/search.html#string\">https://www.hl7.org/fhir/search.html#string</a> <br>\nThere is no problem with the default prefix based search behaviour. Rather the problem arises when introducing the colons for search modifiers. </p>\n<p>Some further information is that Amazon has got back to us saying that colons are not permitted under a query parameter name due to it being a reserved character as per <a href=\"https://tools.ietf.org/html/rfc3986#section-2.2\" target=\"_blank\" title=\"https://tools.ietf.org/html/rfc3986#section-2.2\">https://tools.ietf.org/html/rfc3986#section-2.2</a> </p>\n<p>There is no problem putting a colon in the value of a query parameter, rather it's a problem with having them as a part of the query parameter name itself. </p>\n<p>Example for valid/invalid query param names for AWS API Gateway: <br>\n<code>practitioner.given</code> --&gt; <code>VALID</code><br>\n<code>practitioner.given:exact</code> --&gt; <code>INVALID</code><br>\n<code>practitioner.given:contains</code> --&gt; <code>INVALID</code></p>",
        "id": 153927579,
        "sender_full_name": "Max Tuzzolino",
        "timestamp": 1515026775
    },
    {
        "content": "<p>You'll need to escape them - all URL characters in the search portion of the string need to be escaped when necessary.  So for \":\", you'll need to use <code>%3A</code></p>",
        "id": 153927585,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1515030526
    },
    {
        "content": "<p>Is anyone doing this through exposing their API through AWS API Gateway? </p>\n<p>Since you have to explicitly tell the gateway which parameters you are expecting, it complains upon entry: </p>\n<p>This happens with both <code>:</code> and <code>%3A</code> because colons and percentages are not valid characters. <br>\nIt's looking like something we need to bring back to Amazon.</p>\n<p><a href=\"/user_uploads/10155/qxMvjAShXiZTH_hVtgiMb83g/image.png\" target=\"_blank\" title=\"image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/qxMvjAShXiZTH_hVtgiMb83g/image.png\" target=\"_blank\" title=\"image.png\"><img src=\"/user_uploads/10155/qxMvjAShXiZTH_hVtgiMb83g/image.png\"></a></div>",
        "id": 153927586,
        "sender_full_name": "Max Tuzzolino",
        "timestamp": 1515031193
    },
    {
        "content": "<p>my read of that section (again) is that percent encoding is ok. I don't know where it says that parameters are URL components or subcomponents that can't contain \":\" (\"URI producing applications should percent-encode data octets that correspond to characters in the reserved set unless these characters are specifically allowed by the URI scheme to represent data in that component\")</p>",
        "id": 153927593,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1515050807
    }
]