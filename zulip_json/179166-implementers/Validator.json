[
    {
        "content": "<p>I'm looking at validating resources I've made against profiles and valuesets available on my filesystem, and the validator is erroring out with:</p>\n<p>\"FHIRException: fetching org.hl7.fhir.dstu3.model.StructureDefinition not done yet for URI '<a href=\"https://BLAH-DOMAIN.VAR/fhir/StructureDefinition/my-extension\" target=\"_blank\" title=\"https://BLAH-DOMAIN.VAR/fhir/StructureDefinition/my-extension\">https://BLAH-DOMAIN.VAR/fhir/StructureDefinition/my-extension</a>'\"</p>\n<p>I have BLAH-DOMAIN.VAR in there as a placeholder for the final Canonical URL. How can I make it ignore resolving it and use what's on my filesystem instead?</p>\n<p>And, a second question, can it search the filesystem at all or does everything have to be in one folder for it to resolve?</p>",
        "id": 153884666,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1492093770
    },
    {
        "content": "<p>You can pass the validator a validator.pack that contains the structure definitions you want it to be aware of when validating.  A validator.pack is basicly a zip file of structure definitions and vocabulary resources plus a <a href=\"http://version.info\" target=\"_blank\" title=\"http://version.info\">version.info</a> file - you can look at one from any of the published implementation guides to see what they look like.</p>",
        "id": 153884671,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1492094638
    },
    {
        "content": "<p>Brilliant thanks, will try</p>",
        "id": 153884674,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1492094928
    },
    {
        "content": "<p>Is JSON supported now? README says that it's not, but US Core uses json valuesets</p>",
        "id": 153884675,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1492095038
    },
    {
        "content": "<p>It uses JSON everything really. I guess it is supported</p>",
        "id": 153884676,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1492095057
    },
    {
        "content": "<p>Do I pass the validator.pack as the last argument?</p>",
        "id": 153884679,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1492095417
    },
    {
        "content": "<p>The validation packs are json but the validator only validates xml instances.   also there may be an issue with parsing the validator pack from us-core that is discussed <a href=\"https://chat.fhir.org/#narrow/near/73942/stream/committers/topic/IG.20Publisher.20enhancements\" target=\"_blank\" title=\"https://chat.fhir.org/#narrow/near/73942/stream/committers/topic/IG.20Publisher.20enhancements\">here</a></p>",
        "id": 153884680,
        "sender_full_name": "Eric Haas",
        "timestamp": 1492095601
    },
    {
        "content": "<p>I didn't know the validator only validates XML instances.  There's no reason why that *should* be the case.  If it's still true, please lodge a tracker item.  </p>",
        "id": 153884691,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1492096503
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191363\">@Vadim Peretokin</span> Order of arguments doesn't matter.  Just specify -ig followed by space followed by the name (and possibly relative or absolute path) to the IG pack</p>",
        "id": 153884692,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1492096553
    },
    {
        "content": "<p>last time I used it was only xml,  but it would be great if does both.  Let me know.</p>",
        "id": 153884694,
        "sender_full_name": "Eric Haas",
        "timestamp": 1492096698
    },
    {
        "content": "<p>It now says <code>+  .. load IG from validator.zip</code> and now errors fetching the base profile that the resources' profile derives from, even though the base profile is inside the validation zip.</p>",
        "id": 153884755,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1492157075
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> would you know if it can load base profiles that are inside the validation zip?</p>\n<p>I've double-checked and my setup looks right</p>",
        "id": 153884756,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1492157165
    },
    {
        "content": "<p>Pretty much flailing here. The error messages are confusing. I've put my profile into the validation zip, I point it at the validation zip, it loads the zip but when it tries to validate, it can't find the profile. I've triple-checked that the <code>meta.profile</code> matches <code>StructureDefinition.url</code></p>",
        "id": 153884764,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1492161261
    },
    {
        "content": "<p>Does the URL of your StructureDefinition agree with the id?</p>",
        "id": 153884821,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1492236945
    },
    {
        "content": "<p>should work. can you send me the set up so I can debug? </p>",
        "id": 153884858,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1492292533
    },
    {
        "content": "<p>and validator supports json everything now. I just have to fix the read me</p>",
        "id": 153884859,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1492292542
    },
    {
        "content": "<p>not working for me either anymore....  here is what I am using on the command line:</p>\n<div class=\"codehilite\"><pre>java -jar /Users/ehaas/Downloads/validator/org.hl7.fhir.validator.jar ${fs} -defn /Users/ehaas/Downloads/igpack.zip -ig &quot;${path}&quot;/output/validator.pack\n</pre></div>",
        "id": 153884861,
        "sender_full_name": "Eric Haas",
        "timestamp": 1492293120
    },
    {
        "content": "<p>getting an ig.pack error.  (note the link is broken in the CI build - using the STU3 version)</p>",
        "id": 153884862,
        "sender_full_name": "Eric Haas",
        "timestamp": 1492293202
    },
    {
        "content": "<p>.. load FHIR from /Users/ehaas/Downloads/igpack.zip<br>\n      .. connect to tx server @ <a href=\"http://fhir3.healthintersections.com.au/open\" target=\"_blank\" title=\"http://fhir3.healthintersections.com.au/open\">http://fhir3.healthintersections.com.au/open</a><br>\n     Exception in thread \"main\" org.hl7.fhir.exceptions.FHIRFormatError: Error parsing extension-definitions.xml:Unknown <br>\n     Content type @  START_TAG seen ...&lt;discriminator&gt;\\n                &lt;type value=\"value\"/&gt;... @94:38<br>\n    at org.hl7.fhir.dstu3.context.SimpleWorkerContext.loadFromFile(SimpleWorkerContext.java:169)</p>",
        "id": 153884863,
        "sender_full_name": "Eric Haas",
        "timestamp": 1492293236
    },
    {
        "content": "<p>lately I've been using the ig-publisher to validate instances.  ( add em in the examples folder and inspect the qa.html ) So I haven't used this tool in a while.</p>",
        "id": 153884864,
        "sender_full_name": "Eric Haas",
        "timestamp": 1492293690
    },
    {
        "content": "<p>so I just tried this, and it works for me - I used the current igpack, and the current validator from us core, and I had no problems validating one of the US core examples. </p>",
        "id": 153885076,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1492581269
    },
    {
        "content": "<p>Yes sorry its working - I forgot to unzip the latest validator so I was using the old one.   I works fine on my source xml examples but creates this mess on my source json examples....</p>",
        "id": 153885161,
        "sender_full_name": "Eric Haas",
        "timestamp": 1492619832
    },
    {
        "content": "<div class=\"codehilite\"><pre>  Erics-Air-2:US-Core ehaas$ bash validate2.sh\n  =================================================================\n  === Validate US-Core IG!!! Wed Apr 19 16:32:46 UTC 2017 ===\n  =================================================================\n  Type the file name of the resource that you want to check:\n  imm-1.json\n  validating /Users/ehaas/Documents/FHIR/US-Core/examples/imm-1.json...\n    .. load FHIR from /Users/ehaas/Downloads/igpack.zip\n    .. connect to tx server @ http://fhir3.healthintersections.com.au/open\n      (v3.0.0-11828)\n  +  .. load IG from /Users/ehaas/Documents/FHIR/US-Core/output/validator.pack\n    .. validate\n  *FAILURE* validating /Users/ehaas/Documents/FHIR/US-Core/examples/imm-1.json:  error:2 warn:0 info:0\n    Error @ Immunization.vaccineCode.coding[1] (line 8, col5) : Error org.hl7.fhir.dstu3.utils.client.EFhirClientException: Error unmarshalling resource: No Database Connections Available for &quot;Operation/Search&quot; (used: InUse 100 of 100: fhir.sweep 9hr (update IndexEntries set Flag = 2 where ResourceKey in (select ResourceKey from Ids where MasterResourceKey = 123743)),Operation/Search 9hr (select Resou.....\n</pre></div>",
        "id": 153885163,
        "sender_full_name": "Eric Haas",
        "timestamp": 1492620102
    },
    {
        "content": "<p>...with about a hundred more lines of error message stuff</p>",
        "id": 153885164,
        "sender_full_name": "Eric Haas",
        "timestamp": 1492620154
    },
    {
        "content": "<p>So it looks like the ig-publisher fixed my bad json?  Is it supposed to do that?</p>",
        "id": 153885165,
        "sender_full_name": "Eric Haas",
        "timestamp": 1492620336
    },
    {
        "content": "<p>The source json examples are missing '[]' and they magically appear in the output files....</p>",
        "id": 153885167,
        "sender_full_name": "Eric Haas",
        "timestamp": 1492621154
    },
    {
        "content": "<p>On another note.. Why the loads of text when the validator errors?  Its overwhelming and unhelpful...</p>",
        "id": 153885168,
        "sender_full_name": "Eric Haas",
        "timestamp": 1492621304
    },
    {
        "content": "<p>that error is a server side error - my server was broken. try again...</p>",
        "id": 153885415,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1492741954
    },
    {
        "content": "<p>Hello, I was hoping someone would be able to explain slices and extensions. The validator is flagging this part of my EOB Professional JSON: <a href=\"/user_uploads/10155/iN-blakaLXP4FWCLJu1zPRPa/Screen-Shot-2021-04-07-at-11.47.11-PM.png\">Screen-Shot-2021-04-07-at-11.47.11-PM.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/iN-blakaLXP4FWCLJu1zPRPa/Screen-Shot-2021-04-07-at-11.47.11-PM.png\" title=\"Screen-Shot-2021-04-07-at-11.47.11-PM.png\"><img src=\"/user_uploads/10155/iN-blakaLXP4FWCLJu1zPRPa/Screen-Shot-2021-04-07-at-11.47.11-PM.png\"></a></div><p>The error I get is:<br>\nError @ ExplanationOfBenefit.item[0].adjudication[1].category (line 244, col36) : None of the codings provided are in the value set <a href=\"http://hl7.org/fhir/us/carin-bb/ValueSet/C4BBAdjudicationCategoryDiscriminator\">http://hl7.org/fhir/us/carin-bb/ValueSet/C4BBAdjudicationCategoryDiscriminator</a> (<a href=\"http://hl7.org/fhir/us/carin-bb/ValueSet/C4BBAdjudicationCategoryDiscriminator\">http://hl7.org/fhir/us/carin-bb/ValueSet/C4BBAdjudicationCategoryDiscriminator</a>), and a coding from this value set is required) (codes = <a href=\"http://hl7.org/fhir/us/carin-bb/CodeSystem/C4BBPayerAdjudicationStatus#innetwork\">http://hl7.org/fhir/us/carin-bb/CodeSystem/C4BBPayerAdjudicationStatus#innetwork</a>).</p>\n<p>Any help in resolving this would be appreciated.</p>",
        "id": 233597535,
        "sender_full_name": "Andrew Cho",
        "timestamp": 1617853810
    },
    {
        "content": "<p>Are you validating against an implementation guide?<br>\nI used to get this error when referencing ValueSets that are not accessible to the validator. It was solved once I started to validate with the -IG parameter. You don't really need an IG resource there, you can put a folder that holds all the ValueSet, CodeSystem, StructureDefinition resource files.</p>",
        "id": 233614604,
        "sender_full_name": "Daniel Mechanik",
        "timestamp": 1617867938
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"361900\">@Daniel Mechanik</span> ,  I am using this for the ig param:  -ig <a href=\"http://hl7.org/fhir/us/carin-bb/\">http://hl7.org/fhir/us/carin-bb/</a></p>",
        "id": 233653179,
        "sender_full_name": "Andrew Cho",
        "timestamp": 1617889038
    },
    {
        "content": "<p>To add some more context, I based the part of the json on an example from the EOB Professional profile on the hl7 website.</p>",
        "id": 233655091,
        "sender_full_name": "Andrew Cho",
        "timestamp": 1617889821
    },
    {
        "content": "<p>The error you're getting isn't related to slices or extensions.  It's saying that adjudication.category is supposed to draw from a specific set of codes and in your instance, you're not drawing from that set of codes.</p>",
        "id": 233675051,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1617895872
    }
]