[
    {
        "content": "<p>hello all,  we are using HAPI-Fhir server,present i'm trying to test  RESTful API Operation in fhir.  as part of patient operations i looked at the $match. when i send a request to server  like this</p>\n<p>url :   <a href=\"http://fhirtest.uhn.ca/baseDstu3/Patient/$match\" target=\"_blank\" title=\"http://fhirtest.uhn.ca/baseDstu3/Patient/$match\">http://fhirtest.uhn.ca/baseDstu3/Patient/$match</a><br>\njson body:</p>\n<p>{<br>\n  \"resourceType\": \"Parameters\",<br>\n  \"id\": \"example\",<br>\n  \"parameter\": [<br>\n    {<br>\n      \"name\": \"resource\",<br>\n      \"resource\": {<br>\n        \"resourceType\": \"Patient\",<br>\n        \"identifier\": [<br>\n          {<br>\n            \"use\": \"usual\",<br>\n            \"type\": {<br>\n              \"coding\": [<br>\n                {<br>\n                  \"system\": \"<a href=\"http://hl7.org/fhir/v2/0203\" target=\"_blank\" title=\"http://hl7.org/fhir/v2/0203\">http://hl7.org/fhir/v2/0203</a>\",<br>\n                  \"code\": \"MR\"<br>\n                }<br>\n              ]<br>\n            },<br>\n            \"system\": \"urn:oid:1.2.36.146.595.217.0.1\",<br>\n            \"value\": \"12345\"<br>\n          }<br>\n        ],<br>\n        \"name\": [<br>\n          {<br>\n            \"family\": [<br>\n              \"Chalmers\"<br>\n            ],<br>\n            \"given\": [<br>\n              \"Peter\"<br>\n            ]<br>\n          }<br>\n        ],<br>\n        \"gender\": \"male\",<br>\n        \"birthDate\": \"1974-12-25\"<br>\n      }<br>\n    },<br>\n    {<br>\n      \"name\": \"count\",<br>\n      \"valueInteger\": \"3\"<br>\n    },<br>\n    {<br>\n      \"name\": \"onlyCertainMatches\",<br>\n      \"valueBoolean\": \"false\"<br>\n    }<br>\n  ]<br>\n}</p>\n<p>i'm getting this error .</p>\n<p>{<br>\n\"resourceType\": \"OperationOutcome\",<br>\n\"text\": {<br>\n\"status\": \"generated\",<br>\n\"div\": \"&lt;div xmlns=\"http://www.w3.org/1999/xhtml\"&gt;&lt;h1&gt;Operation Outcome&lt;/h1&gt;&lt;table border=\"0\"&gt;&lt;tr&gt;&lt;td style=\"font-weight: bold;\"&gt;ERROR&lt;/td&gt;&lt;td&gt;[]&lt;/td&gt;&lt;td&gt;&lt;pre&gt;Invalid request: The FHIR endpoint on this server does not know how to handle PUT operation[Patient/$match] with parameters [[]]&lt;/pre&gt;&lt;/td&gt; &lt;/tr&gt; &lt;/table&gt; &lt;/div&gt;\"<br>\n},<br>\n\"issue\": [<br>\n  {<br>\n\"severity\": \"error\",<br>\n\"code\": \"processing\",<br>\n\"diagnostics\": \"Invalid request: The FHIR endpoint on this server does not know how to handle PUT operation[Patient/$match] with parameters [[]]\"<br>\n}<br>\n],<br>\n}</p>\n<p>i dont know what params should i need to pass here.</p>",
        "id": 153893968,
        "sender_full_name": "Jayashree Surnar",
        "timestamp": 1497506648
    },
    {
        "content": "<p>does it work on <a href=\"http://test.fhir.org/r3\" target=\"_blank\" title=\"http://test.fhir.org/r3\">test.fhir.org/r3</a>?</p>",
        "id": 153893969,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1497506879
    },
    {
        "content": "<p>i didn't check there</p>",
        "id": 153893970,
        "sender_full_name": "Jayashree Surnar",
        "timestamp": 1497506937
    },
    {
        "content": "<p>that would be a good next step</p>",
        "id": 153893971,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1497507743
    },
    {
        "content": "<p>okay, i will check.</p>",
        "id": 153893972,
        "sender_full_name": "Jayashree Surnar",
        "timestamp": 1497507794
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> , i'm not getting how to perform $match operation here. so please help.</p>",
        "id": 153893973,
        "sender_full_name": "Jayashree Surnar",
        "timestamp": 1497508288
    },
    {
        "content": "<p>.</p>",
        "id": 153893976,
        "sender_full_name": "Jayashree Surnar",
        "timestamp": 1497511348
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> </p>\n<p>i'm getting 500 internal server error</p>\n<p>i did like this</p>\n<p>POST <a href=\"http://test.fhir.org/r3/Patient/$match\" target=\"_blank\" title=\"http://test.fhir.org/r3/Patient/$match\">http://test.fhir.org/r3/Patient/$match</a></p>\n<p>{<br>\n  \"resourceType\": \"Parameters\",<br>\n  \"id\": \"example\",<br>\n  \"parameter\": [<br>\n    {<br>\n      \"name\": \"resource\",<br>\n      \"resource\": {<br>\n        \"resourceType\": \"Patient\",<br>\n        \"identifier\": [<br>\n          {<br>\n            \"use\": \"usual\",<br>\n            \"type\": {<br>\n              \"coding\": [<br>\n                {<br>\n                  \"system\": \"<a href=\"http://hl7.org/fhir/v2/0203\" target=\"_blank\" title=\"http://hl7.org/fhir/v2/0203\">http://hl7.org/fhir/v2/0203</a>\",<br>\n                  \"code\": \"MR\"<br>\n                }<br>\n              ]<br>\n            },<br>\n            \"system\": \"urn:oid:1.2.36.146.595.217.0.1\",<br>\n            \"value\": \"12345\"<br>\n          }<br>\n        ],<br>\n        \"name\": [<br>\n          {<br>\n            \"family\": [<br>\n              \"Chalmers\"<br>\n            ],<br>\n            \"given\": [<br>\n              \"Peter\"<br>\n            ]<br>\n          }<br>\n        ],<br>\n        \"gender\": \"male\",<br>\n        \"birthDate\": \"1974-12-25\"<br>\n      }<br>\n    },<br>\n    {<br>\n      \"name\": \"count\",<br>\n      \"valueInteger\": \"3\"<br>\n    },<br>\n    {<br>\n      \"name\": \"onlyCertainMatches\",<br>\n      \"valueBoolean\": \"false\"<br>\n    }<br>\n  ]<br>\n}</p>",
        "id": 153894095,
        "sender_full_name": "Jayashree Surnar",
        "timestamp": 1497593458
    },
    {
        "content": "<p>.</p>",
        "id": 153894096,
        "sender_full_name": "Jayashree Surnar",
        "timestamp": 1497593475
    },
    {
        "content": "<p>hello all,we are using  HAPI-FHIR server  and developing the client(mobile app)i want to know whether HAPI-FHIR server supports $match operation, and whether it handles patient empi  and mpi or not? if yes. how?  any help<br>\nThank you</p>",
        "id": 153894112,
        "sender_full_name": "Jayashree Surnar",
        "timestamp": 1497601416
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> </p>",
        "id": 153894222,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1497623620
    },
    {
        "content": "<p>Hi, </p>\n<p>TL;DR: What is the suggested practise of searching for a patient understanding the normal issues with encounter selection (does this apply using FHIR?) - do you need to select a patient and their correct/active encounter for the med list query to work accurately? </p>\n<hr>\n<p>I am figuring out some use cases and matching them to current clinical workflows (based on system design). Say, you want to search for a patient, and obtain the list of their current medications.<br>\nObtaining a list of medications is easy.</p>\n<p>What are the ways (or best way) you can search for a patient?</p>\n<p>Noting that in the current eMR (Cerner in this case), correct encounter selection determines a lot of things that are recorded at the encounter level -- does this same requirement apply when obtaining a meds list using FHIR?<br>\n-&gt; IF yes, how do you select the patient + encounter combination correctly? <br>\nCan you find a patient through patient lists/location lists that a user has configured under eMR profile, or would it be a patient name query then an active encounter filter?</p>\n<p>-&gt; IF no, is the usual suggested practice of searching for a patient via name query with a filter of admission status +/- location filter?</p>\n<p>Apologies in advance if you find the structure of this post to be confusing/substandard. <br>\nthanks!</p>",
        "id": 214062429,
        "sender_full_name": "Jeremy R",
        "timestamp": 1603292571
    },
    {
        "content": "<p>Obtaining a list of medications is easy, obtaining a list of current medications is usually a notoriously hard thing to do.<br>\n A 2 step process to search for all encounters of a given patient, followed by a search for all medications (prescriptions, supplies, administrations) associated with an encounter is certainly possible.</p>",
        "id": 214077738,
        "sender_full_name": "René Spronk",
        "timestamp": 1603298097
    },
    {
        "content": "<p>There are a few different ways to grab medication information.  One is to just search the MedicationStatement, MedicaitonRequest and similar resources.  That gives you an 'unfiltered' view which, in some EHRs, might give you just the current meds, but in others might give you a whole lot of stuff that isn't necessarily current/authoritative. You can also search List to retrieve a curated medication list - either the 'current' list or an admitting list/discharge list/reconciled list, etc.</p>",
        "id": 214098470,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1603306891
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> Do you know of implementations that have used List ins such a manner (i.e. as a grouper for active medications) ?</p>",
        "id": 214148031,
        "sender_full_name": "René Spronk",
        "timestamp": 1603348480
    },
    {
        "content": "<p>I know the US EHR implementers have pushed back against using List in this way, though Grahame and I both think that's going to fall down at some point as it becomes necessary to expose and manipulate allergies, meds, conditions, etc. that <em>aren't</em> appropriate for inclusion on the global EHR lists.  (Also the need to expose and manage provider-specific lists)</p>",
        "id": 214225625,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1603390025
    },
    {
        "content": "<p>That's what I thought of, the use case where one could have multiple 'current medications lists', created by various different parties, for different purposes, at different times. If one manages one single list in the EHR, then List serves no real purpose, one could simply (e.g.) search for all MedicationUsage resources with an active status.</p>",
        "id": 214278577,
        "sender_full_name": "René Spronk",
        "timestamp": 1603435017
    },
    {
        "content": "<p>That is if MedicationList consists only of  MedicationUsages, right?</p>",
        "id": 214278672,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1603435117
    },
    {
        "content": "<p>That's why I used \"e.g.\" - if you only have 1 single List of MedicationUsages, you might as well omit the List resource. If you have multiple Lists (and there may be good reasons for doing so), then using List makes sense.</p>",
        "id": 214280512,
        "sender_full_name": "René Spronk",
        "timestamp": 1603437197
    },
    {
        "content": "<p>right</p>",
        "id": 214280730,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1603437431
    },
    {
        "content": "<p>Hi all, Is there a best practice approach to searching for a patient given potential issues with multiple active encounters in different facilities or no active encounters?<br>\nThanks!</p>\n<p><span class=\"user-mention silent\" data-user-id=\"196090\">Jeremy R</span> <a href=\"#narrow/stream/179166-implementers/topic/patient.20search/near/214062429\">said</a>:</p>\n<blockquote>\n<p>Hi, </p>\n<p>TL;DR: What is the suggested practise of searching for a patient understanding the normal issues with encounter selection (does this apply using FHIR?) - do you need to select a patient and their correct/active encounter for the med list query to work accurately? </p>\n<hr>\n<p>I am figuring out some use cases and matching them to current clinical workflows (based on system design). Say, you want to search for a patient, and obtain the list of their current medications.<br>\nObtaining a list of medications is easy.</p>\n<p>What are the ways (or best way) you can search for a patient?</p>\n<p>Noting that in the current eMR (Cerner in this case), correct encounter selection determines a lot of things that are recorded at the encounter level -- does this same requirement apply when obtaining a meds list using FHIR?<br>\n-&gt; IF yes, how do you select the patient + encounter combination correctly? <br>\nCan you find a patient through patient lists/location lists that a user has configured under eMR profile, or would it be a patient name query then an active encounter filter?</p>\n<p>-&gt; IF no, is the usual suggested practice of searching for a patient via name query with a filter of admission status +/- location filter?</p>\n<p>Apologies in advance if you find the structure of this post to be confusing/substandard. <br>\nthanks!</p>\n</blockquote>",
        "id": 214491687,
        "sender_full_name": "Jeremy R",
        "timestamp": 1603635426
    },
    {
        "content": "<p>Searching for patients isn't impacted by whether they have encounters or not - the Patient resource is a distinct resource from the Encounter resource.  It's certainly probably that multiple systems will have information about the same individual patient, so if you need to search multiple servers but want to present unique patients, you'll have to figure out a matching algorithm.  What constitutes and appropriate algorithm will depend on the nature of the patients you're retrieving and the nature of the systems you're retrieving them from</p>",
        "id": 214493928,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1603638279
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> <a href=\"#narrow/stream/179166-implementers/topic/patient.20search/near/214493928\">said</a>:</p>\n<blockquote>\n<p>Searching for patients isn't impacted by whether they have encounters or not - the Patient resource is a distinct resource from the Encounter resource.  It's certainly probably that multiple systems will have information about the same individual patient, so if you need to search multiple servers but want to present unique patients, you'll have to figure out a matching algorithm.  What constitutes and appropriate algorithm will depend on the nature of the patients you're retrieving and the nature of the systems you're retrieving them from</p>\n</blockquote>\n<p>Thanks, Lloyd, so more of a trial and error approach to curate the returned results?</p>",
        "id": 214500531,
        "sender_full_name": "Jeremy R",
        "timestamp": 1603646081
    },
    {
        "content": "<p>I don't know about trial &amp; error, but you'd have to have knowledge of the specific data.  Do the resources have shared identifiers?  Are there other markers you can use to link?  What are the costs/risks associated with combining the wrong patients vs. not combining matching patients?</p>",
        "id": 214508261,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1603655098
    },
    {
        "content": "<p>These will vary by environment</p>",
        "id": 214508269,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1603655111
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191320\">Lloyd McKenzie</span> <a href=\"#narrow/stream/179166-implementers/topic/patient.20search/near/214508261\">said</a>:</p>\n<blockquote>\n<p>I don't know about trial &amp; error, but you'd have to have knowledge of the specific data.  Do the resources have shared identifiers?  Are there other markers you can use to link?  What are the costs/risks associated with combining the wrong patients vs. not combining matching patients?</p>\n</blockquote>\n<p>trial and error in this context isn't on production. more aligned to assessing the domain in which we want to integrate with and determining the configuration required to obtain the most accurate/intended records. Do you know if there are some examples around with not so straight forward data for sandpits, or case examples?<br>\nThanks lloyd</p>",
        "id": 214560178,
        "sender_full_name": "Jeremy R",
        "timestamp": 1603710515
    },
    {
        "content": "<p>You could dig through the public test servers, but I don't have specific ones or data sets to point you at.</p>",
        "id": 214581348,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1603722996
    }
]