[
    {
        "content": "<p>Newbie here.  I'm trying to check if a fhir server supports us-core-allergyintolerance.  I tried  [fhir/baseR4]/metadata , but didn't give enough info.  So I tried [fhir/baseR4]/CapabilityStatement/us-core-allergyintolerance.   Doesn't seem to be the right way to get the Capability Statement.  Could get it to work for any profile.    Looking for an answer or even just point me to a place that will explain.</p>",
        "id": 223755076,
        "sender_full_name": "robert karp",
        "timestamp": 1611415994
    },
    {
        "content": "<p>[base]/metadata is the correct place to look.  If supported, it would be in the CapabilityStatement.rest.resource.supportedProfile.  However, there's no requirement for systems to declare all of their profiles, and no chance systems will declare every profile you might care about - or any guarantee that all of their data will comply with profiles they support.  In R5, we're exploring defining operations that will make it easier to ask simple questions about the capabilities of a system without having to download a 10+ megabyte capability statement, but nothing is landed yet.</p>",
        "id": 223756924,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1611418398
    },
    {
        "content": "<p>Aww ok.  If I wanted to download all the CapabilityStatements  is that just a GET [fhir base]/CapabilityStatement request?  I'm just looking at different ways to test a server setup.</p>",
        "id": 223757120,
        "sender_full_name": "robert karp",
        "timestamp": 1611418669
    },
    {
        "content": "<p>A given server should only have one CapabilityStatement that defines what it 'does' - and that's at the /meta endpoint.  The CapabilityStatement endpoint would be used if the server happens to act as a registry for CapabilityStatements - either providing a shared place to look up what a whole bunch of servers do, or more typically, CapabilityStatement defining requirements as part of one or more implementation guides.</p>",
        "id": 223757353,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1611418992
    },
    {
        "content": "<p>ok, I'm very new to FHIR trying to learn the API.  ty</p>",
        "id": 223757501,
        "sender_full_name": "robert karp",
        "timestamp": 1611419192
    },
    {
        "content": "<p>Could I try to request the structureDefinition from server?</p>",
        "id": 223759951,
        "sender_full_name": "robert karp",
        "timestamp": 1611422329
    },
    {
        "content": "<p>Not sure what you mean by \"the\" StructureDefinition.  Servers <em>may</em> have a StructureDefinition endpoint that contains the profiles they reference in their CapabilityStatement (if they reference any at all), but there's no requirement for them to do so and lots won't.</p>",
        "id": 223762264,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1611425412
    },
    {
        "content": "<p>I guess I need to read more about  profiles, Implementation Guides, Extensions and StructureDefinitions.  I don't think I'm understanding the relationships between them.  Any good links that explain this would be appreciated.</p>",
        "id": 223898613,
        "sender_full_name": "robert karp",
        "timestamp": 1611582434
    },
    {
        "content": "<p>StructureDefinition is a resource syntax used to exchange resource definitions, data type definitions, profiles and logical models.  (Only HL7 is allowed to define the first two).  Extensions are a special type of profile on the 'Extension' data type.  ImplementationGuides package up a whole bunch of artifacts - typically including various kinds of profiles and sometimes logical models too - that provide guidance on using FHIR to solve a particular interoperability problem.  CapabilityStatements are another type of artifact.  Every conformant FHIR server must expose a CapabilityStatement at their 'meta' endpoint that indicates what that server does.  The CapabilityStatement <em>may</em> point at profiles it supports or uses.  ImplementationGuides can also include CapabilityStatements that define what systems <em>should</em> do.  If you do a search on \"fhir implementation guide video\" or \"FHIR profiling video\", you'll find a bunch of recorded tutorials.</p>",
        "id": 223913668,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1611589008
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"383429\">robert karp</span> <a href=\"#narrow/stream/179166-implementers/topic/Check.20Server.20if.20Supported/near/223755076\">said</a>:</p>\n<blockquote>\n<p>Newbie here.  I'm trying to check if a fhir server supports us-core-allergyintolerance.  I tried  [fhir/baseR4]/metadata , but didn't give enough info.  So I tried [fhir/baseR4]/CapabilityStatement/us-core-allergyintolerance.   Doesn't seem to be the right way to get the Capability Statement.  Could get it to work for any profile.    Looking for an answer or even just point me to a place that will explain.</p>\n</blockquote>\n<p>There is no guaranteed method to tell if a server support certain profile. Some servers may publish that in profile or supportedProfile elements in CapabilityStatement.rest.resource. Some may indicate that in each resource's meta.profile. Some may not say at all.</p>",
        "id": 224079655,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1611684638
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> US core should start mandating that CapabilityStatement.implements refer to US Core</p>",
        "id": 224942022,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1612302580
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191410\">@Brett Marquard</span>  FYI.  <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  do you mean CapabilityStatement.instantiates or CapabilityStatement.implementationGuide?</p>",
        "id": 224951862,
        "sender_full_name": "Eric Haas",
        "timestamp": 1612308126
    },
    {
        "content": "<p>oh yes. Whoops. the second.</p>",
        "id": 224961793,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1612315126
    },
    {
        "content": "<p>This seems like it should apply not just to US Core but to all IGs</p>",
        "id": 224967122,
        "sender_full_name": "Eric Haas",
        "timestamp": 1612320032
    },
    {
        "content": "<p>it would be good policy in most cases, yes</p>",
        "id": 224968103,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1612321146
    },
    {
        "content": "<p>it does depend on the nature of the IG though</p>",
        "id": 224968109,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1612321157
    },
    {
        "content": "<p>The original question is asking if server support one specific profile not the whole ig. Does the .instantiate help resolve that?</p>",
        "id": 225046813,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1612372156
    },
    {
        "content": "<p>Only if the CapabilityStatements are narrow enough</p>",
        "id": 225050452,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1612373550
    },
    {
        "content": "<p>As per the Jira:  <a href=\"https://jira.hl7.org/browse/FHIR-30889\">FHIR-30889</a> and from this forum the requirement was to mandate the CapabilityStatement.implementationGuide refer to the US Core. However, in the version history (screenshot below) of the US Core, it is mentioned to mandate the CapabilityStatement.instantiates refering to the aforementioned Jira. The link on \"See Change here\" redirects me to the CapabilityStatement of US Core, however there is no mention of instantiates nor implementationGuide over there.  </p>\n<p><a href=\"/user_uploads/10155/T-QUPpR1ItX5WKxFfY8DJvnG/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/T-QUPpR1ItX5WKxFfY8DJvnG/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/T-QUPpR1ItX5WKxFfY8DJvnG/image.png\"></a></div><p>link to the version history: <a href=\"http://hl7.org/fhir/us/core/history.html\">http://hl7.org/fhir/us/core/history.html</a> </p>\n<p>Can you please confirm if the recommendation is to use implementationGuide but not instantiates for referring to a US Core? I see that it was confirmed earlier however wanted to make sure since the website is referring to instantiates.</p>",
        "id": 257044815,
        "sender_full_name": "Uday Kiran",
        "timestamp": 1633948893
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> <span class=\"user-mention\" data-user-id=\"191410\">@Brett Marquard</span></p>",
        "id": 257061921,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1633957763
    },
    {
        "content": "<p>4.0.1- ...I think we may have gotten mixed up in this commit and made change on <code>instantiates</code> . <br>\n...</p>\n<div class=\"codehilite\"><pre><span></span><code> &quot;instantiates&quot; : [\n    &quot;http://hl7.org/fhir/us/core/CapabilityStatement/us-core-server&quot;\n  ],\n  &quot;_instantiates&quot; : [\n    {\n      &quot;extension&quot; : [\n        {\n          &quot;url&quot; : &quot;http://hl7.org/fhir/StructureDefinition/capabilitystatement-expectation&quot;,\n          &quot;valueCode&quot; : &quot;SHALL&quot;\n        }\n      ]\n    }\n  ],\n</code></pre></div>",
        "id": 257068271,
        "sender_full_name": "Brett Marquard",
        "timestamp": 1633960807
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> is out this week, but before making any changes I want to make sure we aren't missing any discussions on this  <a href=\"https://github.com/HL7/US-Core/commit/8440f4d690745b108076d79cdb8cb5420e50566b#diff-d7f650a1fc6faf015a5d79e5fce224e3fdca0dcaeff57b6d3f881c2d4d73d593\">commit</a></p>",
        "id": 257068393,
        "sender_full_name": "Brett Marquard",
        "timestamp": 1633960852
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> , following up on the above query related to instantiates and implementationGuide. </p>\n<p>Also, curious to know if the following statement will change to implementationGuide as well? </p>\n<p><a href=\"/user_uploads/10155/NTEgwi_ThMJa5R0kQImsqpVm/image.png\">image.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/NTEgwi_ThMJa5R0kQImsqpVm/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/NTEgwi_ThMJa5R0kQImsqpVm/image.png\"></a></div><p>link: <a href=\"http://hl7.org/fhir/uv/bulkdata/STU1.0.1/operations/index.html\">http://hl7.org/fhir/uv/bulkdata/STU1.0.1/operations/index.html</a></p>",
        "id": 258347845,
        "sender_full_name": "Uday Kiran",
        "timestamp": 1634727492
    },
    {
        "content": "<p>Here is why it is <code>instantiates</code> and not  <code>implementationGuide</code> (or <code>imports</code>)</p>\n<ol>\n<li>instantiates:  <em>Reference to a canonical URL of another CapabilityStatement that this software implements. This capability statement is a published API description that corresponds to a business service. The server may actually implement a subset of the capability statement it claims to implement, so the capability statement must specify the full capability details.</em></li>\n<li>implementationGuide:  <em>A list of implementation guides that the server does (or should) support in their entirety.</em></li>\n<li>imports: <em>Reference to a canonical URL of another CapabilityStatement that this software adds to. The capability statement automatically includes everything in the other statement, and it is not duplicated, though the server may repeat the same resources, interactions and operations to add additional details to them.</em></li>\n</ol>\n<p>US Core Capabability Statements is used to document a set of <strong>expected</strong> requirements.  In other words it is not implementable  out of the box to be used to describe an actual implementation. For example,  it has a \"patient +1\" clause ...</p>\n<blockquote>\n<p>The US Core Server <strong>SHALL</strong>:</p>\n<p>Support the US Core Patient resource profile.<br>\nSupport at least one additional resource profile from the list of US Core Profiles.</p>\n</blockquote>\n<p>So there is no way to instantiate it without deciding exactly what parts you support and documenting them in your own capabilities.  Hence <code>instantiates</code> is the appropriate element to use to reference a requirements type CapabilityStatement provided in an implementation guide.  We discussed whether to document how to transform this <em>requirements</em> type to an <em>Instance</em> type CapabilityStatement, but for now that is an exercise left to the implementer.</p>",
        "id": 258388420,
        "sender_full_name": "Eric Haas",
        "timestamp": 1634743811
    },
    {
        "content": "<p>I get confused sometimes when these elements are about the US Core CapabilityStatement itself (e.g. title, kind -- which obviously are), and when they are defining requirements on implementations. To be clear here, the expectations is that implementation CapabilityStatements (served from /metadata) SHALL have 'instantiates' referencing this US Core CapabilityStatement?  Or are you not saying that?</p>",
        "id": 258412150,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1634752003
    },
    {
        "content": "<blockquote>\n<p>We discussed whether to document how to transform this requirements type to an Instance type CapabilityStatement, but for now that is an exercise left to the implementer.</p>\n</blockquote>\n<p>Has anyone tried representing these requirements as constraints in a CapabilityStatement profile (CapabilityStatement.kind='instance', CapabilityStatement.rest.resource is 2..n, CapabilityStatement.rest.resources includes Patient, CapabilityStatement.instantiates includes us core..')?  We are essentially doing this in a non-standard way within our tests. And I know I've made mistakes in our translation in the past.</p>",
        "id": 258413366,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1634752453
    },
    {
        "content": "<blockquote>\n<p>To be clear here, the expectations is that implementation CapabilityStatements (served from /metadata) SHALL have 'instantiates' referencing this US Core CapabilityStatement? </p>\n</blockquote>\n<p>Yes and use conformance expectation on everything that is an expectation.</p>",
        "id": 258434413,
        "sender_full_name": "Eric Haas",
        "timestamp": 1634760104
    },
    {
        "content": "<p>Thank you <span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span>   for clarifying on the difference among instantiates, implementationGuide and imports. This clarifies my question on the question related to the link [http://hl7.org/fhir/uv/bulkdata/STU1.0.1/operations/index.html]. The way I interpret from the above discussion is CapabilityStatement.instatiates will refer to the US Core profile ( as indicated in the specification: <a href=\"http://hl7.org/fhir/us/core/conformance-expectations.html\">http://hl7.org/fhir/us/core/conformance-expectations.html</a>) but not CapabilityStatement.implementationGuide as indicated in the Jira:  <a href=\"https://jira.hl7.org/browse/FHIR-30889\">FHIR-30889: mandating that CapabilityStatement.implementationGuide refer to US Core</a>? Please confirm if its otherwise.</p>",
        "id": 260621359,
        "sender_full_name": "Uday Kiran",
        "timestamp": 1636355534
    },
    {
        "content": "<p>I am confused by your question.   The tracker you referenced led to instantiates being used and the guidance on the page and CapabilityStatement.implementationGuide not being used.  We have provided no guidance on using .implementationGuide in US Core</p>",
        "id": 260673164,
        "sender_full_name": "Eric Haas",
        "timestamp": 1636385726
    },
    {
        "content": "<p>I apologize for the confusion. I was referring to the statements where I noticed a difference between the summary of the Jira: <a href=\"https://jira.hl7.org/browse/FHIR-30889\">FHIR-30889</a> which says to \"mandate CapabilityStatement.implementationGuide to the US Core\" and the US Core specification which says to mandate CapabilityStatement.instantiates. I was not sure which statement to follow, hence posted the question initially <a href=\"#narrow/stream/179166-implementers/topic/Check.20Server.20if.20Supported/near/257044815\">here</a>. However, based on the discussion above, we need to use .instantiates and ignore the summary in the Jira. This was just my interpretation, hence posted again for confirmation on this.</p>",
        "id": 260769099,
        "sender_full_name": "Uday Kiran",
        "timestamp": 1636448021
    },
    {
        "content": "<p>The JSON file (<a href=\"http://build.fhir.org/ig/HL7/US-Core/CapabilityStatement-us-core-server.json.html\">http://build.fhir.org/ig/HL7/US-Core/CapabilityStatement-us-core-server.json.html</a>) is more clear:<br>\na server SHALL instantiate <code>us-core-server</code> and SHOULD implement <code>bulk-data</code> and smart app lunch (?).</p>\n<p><span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> is the first url correct? </p>\n<div class=\"codehilite\"><pre><span></span><code>  &quot;implementationGuide&quot; : [\n    &quot;http://fhir-registry.smarthealthit.org&quot;,\n    &quot;http://hl7.org/fhir/uv/bulkdata/ImplementationGuide/hl7.fhir.uv.bulkdata&quot;\n  ],\n</code></pre></div>",
        "id": 260813456,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1636471378
    },
    {
        "content": "<p>from the current package:</p>\n<div class=\"codehilite\" data-code-language=\"JavaScript\"><pre><span></span><code><span class=\"p\">{</span>\n  <span class=\"s2\">\"resourceType\"</span><span class=\"o\">:</span> <span class=\"s2\">\"ImplementationGuide\"</span><span class=\"p\">,</span>\n  <span class=\"s2\">\"id\"</span><span class=\"o\">:</span> <span class=\"s2\">\"ig\"</span><span class=\"p\">,</span>\n  <span class=\"s2\">\"text\"</span><span class=\"o\">:</span> <span class=\"p\">{</span>\n    <span class=\"s2\">\"status\"</span><span class=\"o\">:</span> <span class=\"s2\">\"generated\"</span><span class=\"p\">,</span>\n    <span class=\"s2\">\"div\"</span><span class=\"o\">:</span> <span class=\"s2\">\"&lt;div xmlns=\\\"http://www.w3.org/1999/xhtml\\\"&gt;&lt;h2&gt;SMART Application Launch Framework&lt;/h2&gt;&lt;p&gt;The official URL for this implementation guide is: &lt;/p&gt;&lt;pre&gt;http://fhir-registry.smarthealthit.org/ImplementationGuide/ig&lt;/pre&gt;&lt;/div&gt;\"</span>\n  <span class=\"p\">},</span>\n  <span class=\"s2\">\"url\"</span><span class=\"o\">:</span> <span class=\"s2\">\"http://fhir-registry.smarthealthit.org/ImplementationGuide/ig\"</span><span class=\"p\">,</span>  <span class=\"c1\">//&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; I guess not :-(</span>\n  <span class=\"s2\">\"version\"</span><span class=\"o\">:</span> <span class=\"s2\">\"1.0.0\"</span><span class=\"p\">,</span>\n  <span class=\"s2\">\"name\"</span><span class=\"o\">:</span> <span class=\"s2\">\"SMART Application Launch Framework\"</span><span class=\"p\">,</span>\n<span class=\"err\">\\\\</span><span class=\"p\">...</span>\n</code></pre></div>",
        "id": 260826721,
        "sender_full_name": "Eric Haas",
        "timestamp": 1636477401
    },
    {
        "content": "<p>can you make a tracker as a technical correction?</p>",
        "id": 260826952,
        "sender_full_name": "Eric Haas",
        "timestamp": 1636477491
    },
    {
        "content": "<p>I think this changing too when we publish smart</p>",
        "id": 260827021,
        "sender_full_name": "Eric Haas",
        "timestamp": 1636477519
    },
    {
        "content": "<p><a href=\"https://jira.hl7.org/browse/FHIR-34281\">https://jira.hl7.org/browse/FHIR-34281</a></p>",
        "id": 260834155,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1636480455
    },
    {
        "content": "<p>There are now a good amount of EHR endpoints out there and I am guessing that most support at least one IG but that some of the vendors support a multitude of Implementation Guides.    When I teach people about FHIR I tell them trust me when they say R4 they mean this US Core spec, when they say DSTU they mean this Argonaut spec, etc.  Sure would be nice if they could be counted on to list the implementation guides they supported.  Do any prod fhir endpoints list IGs?</p>",
        "id": 266894829,
        "sender_full_name": "Virginia Lorenzi",
        "timestamp": 1641354427
    },
    {
        "content": "<p>Hi Virginia, not to answer your question directly, but \"supporting R4\" is definitely not \"supporting US Core\". Even if we ignore non-US servers (which have no particular need to support US Core), R4 and any profile are somewhat orthogonal concepts. <br>\nI can have a server that only supports one resource, e.g. Organization, but what it supports (which may not even be all of that resource), conforms to the R4 definition of Organization, not the STU3 version. <br>\nBasically, version is not a scope. An IG would say what scope/parts of FHIR you support (and would normally specify a certain target FHIR version also). But supporting a FHIR version says nothing about what parts of FHIR you support, only that what you do support conforms to how it is from R4.</p>",
        "id": 266922117,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1641380751
    }
]