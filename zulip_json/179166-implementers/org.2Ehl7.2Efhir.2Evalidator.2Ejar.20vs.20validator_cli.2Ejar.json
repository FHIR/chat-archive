[
    {
        "content": "<p>Hello, </p>\n<p><a href=\"http://hl7.org/fhir/validator/\">http://hl7.org/fhir/validator/</a> include two links.</p>\n<ul>\n<li>Download the validator under <a href=\"https://storage.googleapis.com/ig-build/org.hl7.fhir.validator.jar\">https://storage.googleapis.com/ig-build/org.hl7.fhir.validator.jar</a> that gives you org.hl7.fhir.validator.jar</li>\n<li>Validator Documentation that is linked to confluence <a href=\"https://confluence.hl7.org/display/FHIR/Using+the+FHIR+Validator\">https://confluence.hl7.org/display/FHIR/Using+the+FHIR+Validator</a></li>\n</ul>\n<p>But in confluence there is also a link to download the latest version of the validator that is different<br>\n<a href=\"https://github.com/hapifhir/org.hl7.fhir.core/releases/latest/download/validator_cli.jar\">https://github.com/hapifhir/org.hl7.fhir.core/releases/latest/download/validator_cli.jar</a> it gives you validator_cli.jar</p>\n<p>And It strange because I can validate this json <a href=\"/user_uploads/10155/NSjIPiRUQ-F6c9o_W6UX8pR-/mni-patientOverview-bundle-example1b.json\">mni-patientOverview-bundle-example1b.json</a> with org.hl7.fhir.validator.jar<br>\nusing command line java -Duser.language=en -jar org.hl7.fhir.validator.jar mni-patientOverview-bundle-example1.json -version 4.0 -ig <a href=\"https://mednet.swiss/fhir\">https://mednet.swiss/fhir</a></p>\n<p>But when I use validator_cli.jar with the same command line it returns me a Nullpointer exception,<br>\nbelow the stack trace:</p>\n<p>fhir<br>\nFHIR Validation tool Version 5.0.18 (Git# 18cf563e7875). Built 2020-08-03T21:07:57.905Z (57 hours old)<br>\nDetected Java version: 10.0.2 from C:\\Program Files\\Java\\jre-10.0.2 on amd64 (64bit). 2026MB available<br>\nArguments: mni-patientOverview-bundle-example1.json -version 4.0 -ig <a href=\"https://mednet.swiss/fhir\">https://mednet.swiss/fhir</a><br>\nDirectories: Current = C:\\Users\\david.gutknecht.NOVCOM\\Documents\\Projects\\mednet\\interface-documentation\\FHIR\\ImplementationGuide, Package Cache = C:\\Users\\david.gutknecht.NOVCOM\\.fhir\\packages<br>\n  .. FHIR Version 4.0, definitions from hl7.fhir.r4.core#4.0.1<br>\n  .. connect to tx server @ <a href=\"http://tx.fhir.org\">http://tx.fhir.org</a><br>\n    (v4.0.1)</p>\n<ul>\n<li>.. load IG from <a href=\"https://mednet.swiss/fhir\">https://mednet.swiss/fhir</a></li>\n<li>.. load IG from ch.fhir.ig.ch-core#1.0.0</li>\n<li>.. load IG from ch.fhir.ig.ch-epr-term#current</li>\n<li>.. load IG from ch.fhir.ig.ch-epr-term#2.0.3</li>\n<li>.. load IG from ch.fhir.ig.ch-emed#0.1.0</li>\n<li>.. load IG from ch.fhir.ig.ch-core#current<br>\n  .. validate [mni-patientOverview-bundle-example1.json]<br>\nTerminology server: Check for supported code systems for <a href=\"http://loinc.org\">http://loinc.org</a><br>\nValidation Infrastructure fail validating mni-patientOverview-bundle-example1.json: null<br>\nException in thread \"main\" org.hl7.fhir.exceptions.FHIRException: java.lang.NullPointerException<br>\n        at org.hl7.fhir.validation.ValidationEngine.validate(ValidationEngine.java:1263)<br>\n        at org.hl7.fhir.validation.cli.services.ValidationService.validateSources(ValidationService.java:73)<br>\n        at org.hl7.fhir.validation.Validator.main(Validator.java:208)<br>\nCaused by: java.lang.NullPointerException<br>\n        at org.hl7.fhir.utilities.cache.BasePackageCacheManager.getPackageId(BasePackageCacheManager.java:138)<br>\n        at org.hl7.fhir.utilities.cache.BasePackageCacheManager.getPackageId(BasePackageCacheManager.java:121)<br>\n        at org.hl7.fhir.utilities.cache.FilesystemPackageCacheManager.getPackageId(FilesystemPackageCacheManager.java:534)<br>\n        at org.hl7.fhir.validation.cli.services.StandAloneValidatorFetcher.resolveURL(StandAloneValidatorFetcher.java:65)<br>\n        at org.hl7.fhir.validation.ValidationEngine.resolveURL(ValidationEngine.java:1882)<br>\n        at org.hl7.fhir.validation.instance.InstanceValidator.checkPrimitive(InstanceValidator.java:1864)<br>\n        at org.hl7.fhir.validation.instance.InstanceValidator.checkChild(InstanceValidator.java:4003)<br>\n        at org.hl7.fhir.validation.instance.InstanceValidator.validateElement(InstanceValidator.java:3867)<br>\n        at org.hl7.fhir.validation.instance.InstanceValidator.checkChild(InstanceValidator.java:4130)<br>\n        at org.hl7.fhir.validation.instance.InstanceValidator.validateElement(InstanceValidator.java:3867)<br>\n        at org.hl7.fhir.validation.instance.InstanceValidator.startInner(InstanceValidator.java:3610)<br>\n        at org.hl7.fhir.validation.instance.InstanceValidator.start(InstanceValidator.java:3497)<br>\n        at org.hl7.fhir.validation.instance.InstanceValidator.validateResource(InstanceValidator.java:4595)<br>\n        at org.hl7.fhir.validation.instance.InstanceValidator.checkReference(InstanceValidator.java:2422)<br>\n        at org.hl7.fhir.validation.instance.InstanceValidator.checkChild(InstanceValidator.java:4024)<br>\n        at org.hl7.fhir.validation.instance.InstanceValidator.validateElement(InstanceValidator.java:3867)<br>\n        at org.hl7.fhir.validation.instance.InstanceValidator.startInner(InstanceValidator.java:3610)<br>\n        at org.hl7.fhir.validation.instance.InstanceValidator.start(InstanceValidator.java:3521)<br>\n        at org.hl7.fhir.validation.instance.InstanceValidator.validateResource(InstanceValidator.java:4595)<br>\n        at org.hl7.fhir.validation.instance.InstanceValidator.validateContains(InstanceValidator.java:3767)<br>\n        at org.hl7.fhir.validation.instance.InstanceValidator.checkChild(InstanceValidator.java:4038)<br>\n        at org.hl7.fhir.validation.instance.InstanceValidator.validateElement(InstanceValidator.java:3867)<br>\n        at org.hl7.fhir.validation.instance.InstanceValidator.checkChild(InstanceValidator.java:4055)<br>\n        at org.hl7.fhir.validation.instance.InstanceValidator.validateElement(InstanceValidator.java:3867)<br>\n        at org.hl7.fhir.validation.instance.InstanceValidator.startInner(InstanceValidator.java:3610)<br>\n        at org.hl7.fhir.validation.instance.InstanceValidator.start(InstanceValidator.java:3497)<br>\n        at org.hl7.fhir.validation.instance.InstanceValidator.validateResource(InstanceValidator.java:4595)<br>\n        at org.hl7.fhir.validation.instance.InstanceValidator.validate(InstanceValidator.java:685)<br>\n        at org.hl7.fhir.validation.instance.InstanceValidator.validate(InstanceValidator.java:538)<br>\n        at org.hl7.fhir.validation.ValidationEngine.validate(ValidationEngine.java:1352)<br>\n        at org.hl7.fhir.validation.ValidationEngine.validate(ValidationEngine.java:1256)<br>\n        ... 2 more</li>\n</ul>\n<p>Any idea ?</p>",
        "id": 206108961,
        "sender_full_name": "David Gutknecht",
        "timestamp": 1596695696
    },
    {
        "content": "<p>Maybe I found a part of the answer:<br>\nvalidator_cli.jar return : FHIR Validation tool Version 5.0.18 (Git# 18cf563e7875). Built 2020-08-03T21:07:57.905Z (57 hours old)<br>\norg.hl7.fhir.validator.jar returns : FHIR Validation tool Version 5.0.7-SNAPSHOT (Git# 6bc790d98b04). Built 2020-06-07T08:35:37.25+10:00 (60 days old)</p>",
        "id": 206109179,
        "sender_full_name": "David Gutknecht",
        "timestamp": 1596695986
    },
    {
        "content": "<p>the newer one linked from confluence is the latest one (validator_cli.jar)</p>",
        "id": 206109320,
        "sender_full_name": "Oliver Egger",
        "timestamp": 1596696157
    },
    {
        "content": "<p>can you refer to your ig locally? I assume the validator does not know hot resolve your ig <a href=\"https://mednet.swiss/fhir\">https://mednet.swiss/fhir</a> locally</p>",
        "id": 206109352,
        "sender_full_name": "Oliver Egger",
        "timestamp": 1596696210
    },
    {
        "content": "<p>This would mean that validator_cli generates some nullpointer exception</p>",
        "id": 206109361,
        "sender_full_name": "David Gutknecht",
        "timestamp": 1596696233
    },
    {
        "content": "<p>yes it looks like it cannot resolve a fhir ig package</p>",
        "id": 206109499,
        "sender_full_name": "Oliver Egger",
        "timestamp": 1596696392
    },
    {
        "content": "<p><a href=\"https://mednet.swiss/fhir\">https://mednet.swiss/fhir</a> is valid, and works with the older version of the validator<br>\nI just tryed with following command line :<br>\njava -Duser.language=en -jar validator_cli.jar mni-patientOverview-bundle-example1.json -version 4.0 -ig output/ <br>\nSame result</p>\n<p>Validation Infrastructure fail validating mni-patientOverview-bundle-example1.json: null<br>\nException in thread \"main\" org.hl7.fhir.exceptions.FHIRException: java.lang.NullPointerException<br>\n        at org.hl7.fhir.validation.ValidationEngine.validate(ValidationEngine.java:1263)<br>\n        at org.hl7.fhir.validation.cli.services.ValidationService.validateSources(ValidationService.java:73)<br>\n        at org.hl7.fhir.validation.Validator.main(Validator.java:208)<br>\nCaused by: java.lang.NullPointerException<br>\n        at org.hl7.fhir.utilities.cache.BasePackageCacheManager.getPackageId(BasePackageCacheManager.java:138)<br>\n        at org.hl7.fhir.utilities.cache.BasePackageCacheManager.getPackageId(BasePackageCacheManager.java:121)<br>\n        at org.hl7.fhir.utilities.cache.FilesystemPackageCacheManager.getPackageId(FilesystemPackageCacheManager.java:534)<br>\n        at org.hl7.fhir.validation.cli.services.StandAloneValidatorFetcher.resolveURL(StandAloneValidatorFetcher.java:65)<br>\n        at org.hl7.fhir.validation.ValidationEngine.resolveURL(ValidationEngine.java:1882)<br>\n        at org.hl7.fhir.validation.instance.InstanceValidator.checkPrimitive(InstanceValidator.java:1864)</p>",
        "id": 206109618,
        "sender_full_name": "David Gutknecht",
        "timestamp": 1596696546
    },
    {
        "content": "<p>already fixed that - next release</p>",
        "id": 206112244,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1596699519
    },
    {
        "content": "<p>Nice ! Thanks !!</p>",
        "id": 206113884,
        "sender_full_name": "David Gutknecht",
        "timestamp": 1596701066
    }
]