[
    {
        "content": "<p>It seems that there are two places to specify the multiplicity range for an extension, in the StructureDefinition for extension itself and in the SD for the resource that uses the extension.<br>\nIn a SD I used both options (accident) and Forge and the igPublisher processed it differently. Which is correct?</p>\n<p>Here is the example. I've defined a resource (Consent) that uses three extensions (Date, Decision and Provision). It specifies 1..1 of the second extension (Decision) and says nothing about the multiplicity range of the others. The SD for the first extension (Date) says that it is 1..1, the SDs of the second and third say nothing about their multiplicity.<br>\nConsent<br>\n-extension - Date (1..1)<br>\n-extension (1..1) - Decision<br>\n-extension - Provision</p>\n<p>Forge shows for Consent a multiplicity range for Date and Decision of 1..1, Provision is 0..* .  <br>\nThe igPublisher produces hierarchies for Consent with a multiplicity range for Date of 0..* , for Decision of 1..1, and Provision is 0..* . </p>\n<p>Is this expected behaviour?</p>",
        "id": 153915833,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1508892428
    },
    {
        "content": "<p>What's supposed to happen is that when an extension is referenced inside of a resource profile, the cardinality should be the same as or tighter than the root element of the extension definition.  So if the Extension is defined as 0..1, it's illegal for it to be referenced in a profile as 0..*.</p>",
        "id": 153915838,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1508901187
    },
    {
        "content": "<p>In the extension, Date, it is 1..1. The profile, Consent, says nothing about the cardinality range for Date. It has not expressly contradicted the extension. <br>\nHowever, the data hierarchy produced by the igPublisher shows 0..* .</p>",
        "id": 153915850,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1508904965
    },
    {
        "content": "<p>Has anyone else noticed this?</p>",
        "id": 153915851,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1508905053
    },
    {
        "content": "<p>can you make a task and I'll investigate next week</p>",
        "id": 153915853,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1508905314
    },
    {
        "content": "<p><a href=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=14090\" target=\"_blank\" title=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=14090\">#14090</a><br>\nDo you want any of the files that I'm using?</p>",
        "id": 153915859,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1508906146
    },
    {
        "content": "<p>I raised another ig query in <a href=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=14091\" target=\"_blank\" title=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=14091\">#4091</a><br>\nIt is about changes to element ids in StructureDefinition files.</p>",
        "id": 153915873,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1508913032
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> <br>\nany progress?</p>",
        "id": 153917273,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1509595440
    },
    {
        "content": "<p>Has anyone else noticed the igPublisher doing the following?<br>\nIt has replaced \"Immunization.<strong>explanation</strong>.reasonNotGiven\" with \"Immunization.<strong>reportOrigin</strong>.reasonNotGiven\"</p>\n<p>This in a file in the resource folder</p>\n<div class=\"codehilite\"><pre><span></span>&lt;element id=&quot;Immunization.reportOrigin&quot;&gt;\n  &lt;path value=&quot;Immunization.reportOrigin&quot; /&gt;\n  &lt;min value=&quot;1&quot; /&gt;\n  &lt;fixedCodeableConcept&gt;\n    &lt;text value=&quot;Australian Immunisation Register&quot; /&gt;\n  &lt;/fixedCodeableConcept&gt;\n&lt;/element&gt;\n&lt;element id=&quot;Immunization.explanation.reasonNotGiven&quot;&gt;\n  &lt;path value=&quot;Immunization.explanation.reasonNotGiven&quot; /&gt;\n</pre></div>\n\n\n<p>This in the produced file in the output folder</p>\n<div class=\"codehilite\"><pre><span></span>&lt;element id=&quot;Immunization.reportOrigin&quot;&gt;\n  &lt;path value=&quot;Immunization.reportOrigin&quot;/&gt;\n  &lt;min value=&quot;1&quot;/&gt;\n  &lt;fixedCodeableConcept&gt;\n    &lt;text value=&quot;Australian Immunisation Register&quot;/&gt;\n  &lt;/fixedCodeableConcept&gt;\n&lt;/element&gt;\n&lt;element id=&quot;Immunization.reportOrigin.reasonNotGiven&quot;&gt;\n  &lt;path value=&quot;Immunization.explanation.reasonNotGiven&quot;/&gt;\n</pre></div>\n\n\n<p>I've raised the issue <a href=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=14091\" target=\"_blank\" title=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=14091\">#14091</a></p>",
        "id": 153917700,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1509929299
    },
    {
        "content": "<p>Looks like this issue was answered by <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> in that issue you posted. I am pretty sure what he is saying is that you need <code>&lt;element id=\"Immunization.explanation&gt;</code> specified before you can have <code>&lt;element id=\"Immunization.explanation.reasonNotGiven\"&gt;</code>. Otherwise the publisher will replace that with the last occurring element id. Does that make sense? Please correct me if I am wrong Lloyd.</p>",
        "id": 153917702,
        "sender_full_name": "Christopher Schuler",
        "timestamp": 1509932829
    },
    {
        "content": "<p>I had not realised that from Lloyds previous post. Is that expected behaviour, or just a limitation of the igPublisher?</p>",
        "id": 153917705,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1509938869
    },
    {
        "content": "<p>it would be a bug in the IGpublisher</p>",
        "id": 153917706,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1509938909
    },
    {
        "content": "<p>Nice to know. Now I can work around it.</p>",
        "id": 153917707,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1509938967
    }
]