[
    {
        "content": "<p>I get a lot of \"Slicing cannot be evaluated: Profile based discriminators must have a type with a profile\", but I don't know what to do.</p>",
        "id": 272821765,
        "sender_full_name": "Michael van der Zel",
        "timestamp": 1645544986
    },
    {
        "content": "<p>Declare the 'type' element in the differential, not just the profile</p>",
        "id": 272825260,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1645546225
    },
    {
        "content": "<p>I get these errors for STU3 Profiles, was it a hard rule then too?<br>\nOther problem is that the profiles are not mine, but from our national institute.</p>",
        "id": 272829855,
        "sender_full_name": "Michael van der Zel",
        "timestamp": 1645547902
    },
    {
        "content": "<p>It has this in the differential element, is that what you mean <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> </p>\n<div class=\"codehilite\"><pre><span></span><code>&quot;type&quot;:  [ {\n  &quot;code&quot;: &quot;Reference&quot;,\n  &quot;targetProfile&quot;: &quot;http://fhir.nl/fhir/StructureDefinition/nl-core-patient&quot;\n   }\n]\n</code></pre></div>",
        "id": 272832450,
        "sender_full_name": "Michael van der Zel",
        "timestamp": 1645548886
    },
    {
        "content": "<p>Yes, that's what I meant.  It may be that in STU3, it only worked with \"profile\", not \"targetProfile\"?  I'm not sure...</p>",
        "id": 272833344,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1645549202
    },
    {
        "content": "<p>If I change the targetProfile to profile I get 3 times the above mentioned error... <span aria-label=\"flushed\" class=\"emoji emoji-1f633\" role=\"img\" title=\"flushed\">:flushed:</span></p>",
        "id": 272836054,
        "sender_full_name": "Michael van der Zel",
        "timestamp": 1645550254
    },
    {
        "content": "<p>I see now, 3 for each type.</p>",
        "id": 272836164,
        "sender_full_name": "Michael van der Zel",
        "timestamp": 1645550287
    },
    {
        "content": "<p>This is the profile: <a href=\"https://simplifier.net/packages/nictiz.fhir.nl.stu3.zib2017/1.3.6/files/118787\">https://simplifier.net/packages/nictiz.fhir.nl.stu3.zib2017/1.3.6/files/118787</a></p>",
        "id": 272836331,
        "sender_full_name": "Michael van der Zel",
        "timestamp": 1645550350
    },
    {
        "content": "<p>Here is how I sliced contained on profile:</p>\n<div class=\"codehilite\"><pre><span></span><code>      {\n        &quot;id&quot;: &quot;Organization.contained&quot;,\n        &quot;path&quot;: &quot;Organization.contained&quot;,\n        &quot;slicing&quot;: {\n          &quot;discriminator&quot;: [\n            {\n              &quot;type&quot;: &quot;profile&quot;,\n              &quot;path&quot;: &quot;$this&quot;\n            }\n          ],\n          &quot;rules&quot;: &quot;closed&quot;,\n          &quot;description&quot;: &quot;The specific resources that are needed for a Establishment organization.&quot;\n        },\n        &quot;min&quot;: 1\n      },\n      {\n        &quot;id&quot;: &quot;Organization.contained:BusinessOperation&quot;,\n        &quot;path&quot;: &quot;Organization.contained&quot;,\n        &quot;sliceName&quot;: &quot;BusinessOperation&quot;,\n        &quot;min&quot;: 1,\n        &quot;max&quot;: &quot;*&quot;,\n        &quot;type&quot;: [\n          {\n            &quot;code&quot;: &quot;HealthcareService&quot;,\n            &quot;profile&quot;: [\n              &quot;http://hl7.org/fhir/us/spl/StructureDefinition/EstablishmentBusinessOperation&quot;\n            ]\n          }\n        ],\n        &quot;mustSupport&quot;: true\n      },\n      {\n        &quot;id&quot;: &quot;Organization.contained:USAgentAffiliation&quot;,\n        &quot;path&quot;: &quot;Organization.contained&quot;,\n        &quot;sliceName&quot;: &quot;USAgentAffiliation&quot;,\n        &quot;min&quot;: 0,\n        &quot;max&quot;: &quot;1&quot;,\n        &quot;type&quot;: [\n          {\n            &quot;code&quot;: &quot;OrganizationAffiliation&quot;,\n            &quot;profile&quot;: [\n              &quot;http://hl7.org/fhir/us/spl/StructureDefinition/USAgentAffiliation&quot;\n            ]\n          }\n        ],\n        &quot;mustSupport&quot;: true\n      },\n      {\n        &quot;id&quot;: &quot;Organization.contained:USAgent&quot;,\n        &quot;path&quot;: &quot;Organization.contained&quot;,\n        &quot;sliceName&quot;: &quot;USAgent&quot;,\n        &quot;min&quot;: 0,\n        &quot;max&quot;: &quot;1&quot;,\n        &quot;type&quot;: [\n          {\n            &quot;code&quot;: &quot;Organization&quot;,\n            &quot;profile&quot;: [\n              &quot;http://hl7.org/fhir/us/spl/StructureDefinition/USAgentOrganization&quot;\n            ]\n          }\n        ],\n        &quot;mustSupport&quot;: true\n      },\n      {\n        &quot;id&quot;: &quot;Organization.contained:ImporterAffiliation&quot;,\n        &quot;path&quot;: &quot;Organization.contained&quot;,\n        &quot;sliceName&quot;: &quot;ImporterAffiliation&quot;,\n        &quot;min&quot;: 0,\n        &quot;max&quot;: &quot;*&quot;,\n        &quot;type&quot;: [\n          {\n            &quot;code&quot;: &quot;OrganizationAffiliation&quot;,\n            &quot;profile&quot;: [\n              &quot;http://hl7.org/fhir/us/spl/StructureDefinition/ImporterAffiliation&quot;\n            ]\n          }\n        ],\n        &quot;mustSupport&quot;: true\n      },\n      {\n        &quot;id&quot;: &quot;Organization.contained:Importer&quot;,\n        &quot;path&quot;: &quot;Organization.contained&quot;,\n        &quot;sliceName&quot;: &quot;Importer&quot;,\n        &quot;min&quot;: 0,\n        &quot;max&quot;: &quot;*&quot;,\n        &quot;type&quot;: [\n          {\n            &quot;code&quot;: &quot;Organization&quot;,\n            &quot;profile&quot;: [\n              &quot;http://hl7.org/fhir/us/spl/StructureDefinition/ImporterOrganization&quot;\n            ]\n          }\n        ],\n        &quot;mustSupport&quot;: true\n      },\n</code></pre></div>",
        "id": 272842198,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1645552795
    },
    {
        "content": "<p>it might not apply to what you are doing because Contained has resources directly and not via reference.</p>",
        "id": 272842401,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1645552837
    },
    {
        "content": "<p>I think I get it. This is sliced on entry, which is an array. But the discriminator is of type profile, but the profile is at the \"item\" attribute.<br>\nDon't know what to change to make this work, though :-(</p>\n<div class=\"codehilite\"><pre><span></span><code>    &lt;element id=&quot;List.entry&quot;&gt;\n      &lt;path value=&quot;List.entry&quot; /&gt;\n      &lt;slicing&gt;\n        &lt;discriminator&gt;\n          &lt;type value=&quot;profile&quot; /&gt;\n          &lt;path value=&quot;item.reference.resolve()&quot; /&gt;\n        &lt;/discriminator&gt;\n        &lt;rules value=&quot;open&quot; /&gt;\n      &lt;/slicing&gt;\n    &lt;/element&gt;\n    &lt;element id=&quot;List.entry:MedicationAgreement&quot;&gt;\n      &lt;path value=&quot;List.entry&quot; /&gt;\n      &lt;sliceName value=&quot;MedicationAgreement&quot; /&gt;\n    &lt;/element&gt;\n    &lt;element id=&quot;List.entry:MedicationAgreement.item&quot;&gt;\n      &lt;path value=&quot;List.entry.item&quot; /&gt;\n      &lt;type&gt;\n        &lt;code value=&quot;Reference&quot; /&gt;\n        &lt;targetProfile value=&quot;http://nictiz.nl/fhir/StructureDefinition/zib-MedicationAgreement&quot; /&gt;\n        &lt;aggregation value=&quot;bundled&quot; /&gt;\n      &lt;/type&gt;\n    &lt;/element&gt;\n</code></pre></div>",
        "id": 272855139,
        "sender_full_name": "Michael van der Zel",
        "timestamp": 1645558363
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191421\">@Michael van der Zel</span>  can you put this in a test case? Just an instance that shows the problem. I think that what you have there shouldn't give this error, and there's some problem in the discriminator evaluation somewhere, but just inspecting the code, I'm not sure</p>",
        "id": 273050022,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1645681428
    },
    {
        "content": "<p>I shall try.</p>",
        "id": 273071899,
        "sender_full_name": "Michael van der Zel",
        "timestamp": 1645698956
    },
    {
        "content": "<p>thanks. fixed next release</p>",
        "id": 273275945,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1645818267
    },
    {
        "content": "<p>Still getting a lot of \"Slicing cannot be evaluated: Could not match discriminator ([system]) for slice Medication.ingredient.item[x]:itemCodeableConcept.coding:ingredientCodeATCCodelijst in profile <a href=\"http://nictiz.nl/fhir/StructureDefinition/zib-Product\">http://nictiz.nl/fhir/StructureDefinition/zib-Product</a> - the discriminator [system] does not have fixed value, binding or existence assertions\", but all with the same Profile. Will investigate first.</p>",
        "id": 274532254,
        "sender_full_name": "Michael van der Zel",
        "timestamp": 1646741403
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 274614836,
        "sender_full_name": "Jake Lyn",
        "timestamp": 1646777365
    },
    {
        "content": "<p>New to FHIR, but generating an admit notification bundle, and getting errors in <a href=\"http://simplifier.net\">simplifier.net</a> of \"unknown symbol 'resolve', and using the java.jar validator, lots of \"does not match any known slice\" errors.    <br>\nTo validate, I tried to run the example bundle at <a href=\"https://hl7.org/fhir/us/davinci-alerts/STU1/Bundle-admit-notification-message-bundle-01.html\">https://hl7.org/fhir/us/davinci-alerts/STU1/Bundle-admit-notification-message-bundle-01.html</a> through, and I get the exact same errors.   Has anyone else experienced this?</p>",
        "id": 274614944,
        "sender_full_name": "Jake Lyn",
        "timestamp": 1646777418
    },
    {
        "content": "<p>Can you show us the profile? Usually has something to do with the discriminator.</p>",
        "id": 274651324,
        "sender_full_name": "Michael van der Zel",
        "timestamp": 1646810698
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"484431\">@Jake Lyn</span> The <code>unknown symbol 'resolve'</code> might not mean much, that's on Simplifier's side currently not supporting the <code>resolve()</code> FHIRPath function in validation.<br>\nHere is a snippet with that example: <a href=\"https://simplifier.net/snippet/wardweistra/32\">https://simplifier.net/snippet/wardweistra/32</a>. Can you indicate what slices the Java validator complains about?</p>",
        "id": 274670710,
        "sender_full_name": "Ward Weistra",
        "timestamp": 1646823174
    },
    {
        "content": "<p>I'm using the hl7.fhir.us.davinci-alerts profile.  Running that example Ward provided through the java validator, just about every entry gives a slicing warning with the exact same warning (slice 1-8 have this warning, and messageheader.focus[0]).</p>\n<p>This element does not match any known slicedefined_in_the_profilehttp://hl7.org/fhir/us/davinci-alerts/StructureDefinition/notifications-bundle<br>\nBundle.entry[1]: discriminator = true and (resource is MessageHeader)</p>\n<p>It also gives errors while it's trying to find the \"References\" for location, subject, individual, etc:<br>\nBundled or contained reference not found within the bundle/resource urn:uuid:06e1f0dd-5fbe-4480-9bb4-6b54ec02d31b</p>\n<p>almost seems like it has trouble with urn:uuid references</p>",
        "id": 274685252,
        "sender_full_name": "Jake Lyn",
        "timestamp": 1646831726
    },
    {
        "content": "<p>what exact parameters are you passing into the validator?</p>",
        "id": 275305019,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1647295978
    }
]