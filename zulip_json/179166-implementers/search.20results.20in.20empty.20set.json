[
    {
        "content": "<p>For the case where a request is proper, but for which zero results are found. Should we have defined results? This is not an access control restriction, the requester is authorized. This is not a wrong URL. This s a case where the query is fully proper, there is simply no results available for the query parameters. It seems some return 200 with an empty result, others return 404. Both cases seem to have OperationOutcome. But I am looking for guidance on the http error code.</p>",
        "id": 153870973,
        "sender_full_name": "John Moehrke",
        "timestamp": 1486733562
    },
    {
        "content": "<p>My vote would be: 200 (success) with an empty result.<br>\nThis is also what has been agreed to do on the Dutch national infrastructure (LSP - Landelijk Schakel Punt)</p>",
        "id": 153870974,
        "sender_full_name": "Arianne van de Wetering",
        "timestamp": 1486734542
    },
    {
        "content": "<p>The specification defines the following behavior for a successful search operation [see the spec at <a href=\"http://build.fhir.org/http.html#search]\" target=\"_blank\" title=\"http://build.fhir.org/http.html#search]\">http://build.fhir.org/http.html#search]</a>:</p>\n<p><strong>If the search succeeds, the return content is a Bundle with type = searchset containing the results of the search as a collection of resources in a defined order.</strong> The result collection can be long, so servers may use paging. If they do, they SHALL use the method described below (adapted from RFC 5005 (Feed Paging and Archiving ) for breaking the collection into pages if appropriate. <strong>The server MAY also return an OperationOutcome resource with additional information about the search; if one is sent it SHALL NOT include any errors, and it shall be marked with an entry mode of include.</strong></p>\n<p>(My interpretation) The inference for the returned HTTP response code is a 200(OK) - success with a payload. The last part describing the optionally returned OperationOutcome in my opinion does not fully define where the OperationOutcome is to be defined but, again by inference, I would say the OperationOutcome is returned as the only entry in the searchset Bundle. (Sounds like we need a gforge tracker to resolve this clarification.)</p>",
        "id": 153870976,
        "sender_full_name": "Richard Ettema",
        "timestamp": 1486735107
    },
    {
        "content": "<p>So, based on what I'm reading in the spec today, I would define a test case for the scenario of \"a search operation that is expected to return no matching entries\" with the following minimal assertions:</p>\n<ul>\n<li>HTTP response code = 200(OK)</li>\n<li>Response payload contains a FHIR Bundle resource type</li>\n<li>Bundle.type = searchset</li>\n<li>Bundle.total = 0 (if no OperationOutcome returned in Bundle.entry - need clarification to verify this behavior)</li>\n</ul>",
        "id": 153870978,
        "sender_full_name": "Richard Ettema",
        "timestamp": 1486736118
    },
    {
        "content": "<p>(comments and feedback welcomed)</p>",
        "id": 153870979,
        "sender_full_name": "Richard Ettema",
        "timestamp": 1486736151
    },
    {
        "content": "<p>We have had about 50% people who choose 200, while others use 404. This is even true of the current FHIR servers available for testing... So it seems it is not obious</p>",
        "id": 153871007,
        "sender_full_name": "John Moehrke",
        "timestamp": 1486750600
    },
    {
        "content": "<p>Ok. I just created tracker #12815 requesting clarification of the required behavior for a successful search response.</p>",
        "id": 153871013,
        "sender_full_name": "Richard Ettema",
        "timestamp": 1486752104
    },
    {
        "content": "<p>Wow, I was sure this was documented, but apparently not.  Correct answer is absolutely a 200 with an empty searchset Bundle.  We use 404 if you do a read and the specified id doesn't exist, but not for a search</p>",
        "id": 153871036,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1486760150
    },
    {
        "content": "<p>Can we get #12815 triaged and updated with the clarifications to apply to the spec?</p>",
        "id": 153871039,
        "sender_full_name": "Richard Ettema",
        "timestamp": 1486760328
    },
    {
        "content": "<p>Done.  We actually need guidance on HTTP codes for for PATCH.  And it might not be a bad idea to note that 404 is appropriate for delete and may sometimes be appropriate for update?</p>",
        "id": 153871043,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1486760898
    },
    {
        "content": "<p>I also just added my proposed updates to the search definition. Please review when you have a chance. Thanks.</p>",
        "id": 153871046,
        "sender_full_name": "Richard Ettema",
        "timestamp": 1486761834
    },
    {
        "content": "<p>Thanks. I will have IHE follow our resolution of <a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12815\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12815\">GF#12815</a></p>",
        "id": 153871393,
        "sender_full_name": "John Moehrke",
        "timestamp": 1487091239
    }
]