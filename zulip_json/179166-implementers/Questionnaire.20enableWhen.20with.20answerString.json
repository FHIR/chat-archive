[
    {
        "content": "<p>Hi all. What's the correct JSON format for \"enableWhen\" with answerString value in Questionnaire resource?  Depends it of item type? Can you give an example?</p>\n<p>It doesn't work form me:</p>\n<div class=\"codehilite\"><pre><span></span><code>  &quot;item&quot;: [{\n    &quot;linkId&quot;: &quot;1&quot;,\n  &quot;text&quot;: &quot;Sub-Item&quot;,\n  &quot;type&quot;: &quot;string&quot;,\n  &quot;enableWhen&quot;: [\n    {\n      &quot;question&quot;: &quot;4&quot;,\n      &quot;operator&quot;: &quot;=&quot;,\n      &quot;answerString&quot;: &quot;answerString example&quot;\n    }\n  ]\n  }]\n</code></pre></div>\n\n<p>the return through hapi was:</p>\n<p>\"type\": \"string\",<br>\n                    \"enableWhen\": [<br>\n                        {<br>\n                            \"question\": \"4\",<br>\n                            \"operator\": \"=\"<br>\n                        }<br>\n                    ]</p>\n<p>without answerString  :(</p>",
        "id": 247220968,
        "sender_full_name": "Fran del Río",
        "timestamp": 1627314350
    },
    {
        "content": "<p>The syntax looks right to me (though using enableWhen with strings seems odd - hopefully you're constraining the allowed values with answerOption?  <span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> - ideas what HAPI is doing here?</p>",
        "id": 247233049,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1627319896
    },
    {
        "content": "<p>Looks right to me. What happens if you POST it to <code>/Questionnaire/$validate</code>?</p>",
        "id": 247233704,
        "sender_full_name": "James Agnew",
        "timestamp": 1627320216
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191319\">James Agnew</span> <a href=\"#narrow/stream/179166-implementers/topic/Questionnaire.20enableWhen.20with.20answerString/near/247233704\">said</a>:</p>\n<blockquote>\n<p>Looks right to me. What happens if you POST it to <code>/Questionnaire/$validate</code>?</p>\n</blockquote>\n<p>Hi Lloyd &amp; James. No errors about enableWhen, only some warnings about missing system in valueCodings.<br>\nI'm attaching example json used on $validate. Can you see something wrong?</p>\n<p><a href=\"/user_uploads/10155/dD--c9tKR4qcOEegm8MSQH6T/Quest-enableWhen.json\">Quest-enableWhen.json</a></p>",
        "id": 247241762,
        "sender_full_name": "Fran del Río",
        "timestamp": 1627323751
    },
    {
        "content": "<p>I just uploaded that to the HAPI FHIR public server and it stores it correctly. See: <a href=\"http://hapi.fhir.org/baseR4/Questionnaire/EW#L52\">http://hapi.fhir.org/baseR4/Questionnaire/EW#L52</a></p>\n<p>Maybe check that you aren't using an outdated version of HAPI or the wrong version of the FHIR models?</p>",
        "id": 247243026,
        "sender_full_name": "James Agnew",
        "timestamp": 1627324342
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191319\">James Agnew</span> <a href=\"#narrow/stream/179166-implementers/topic/Questionnaire.20enableWhen.20with.20answerString/near/247243026\">said</a>:</p>\n<blockquote>\n<p>I just uploaded that to the HAPI FHIR public server and it stores it correctly. See: <a href=\"http://hapi.fhir.org/baseR4/Questionnaire/EW#L52\">http://hapi.fhir.org/baseR4/Questionnaire/EW#L52</a></p>\n<p>Maybe check that you aren't using an outdated version of HAPI or the wrong version of the FHIR models?</p>\n</blockquote>\n<p>Thanks again. </p>\n<p><em>Solved!</em>   I was returning a struct from my app to hapi, instead of a JSON string. Rarely were some labels omitted for this.</p>",
        "id": 247348383,
        "sender_full_name": "Fran del Río",
        "timestamp": 1627399435
    }
]