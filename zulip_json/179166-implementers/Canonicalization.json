[
    {
        "content": "<p><a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=18441\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=18441\">GF#18441</a> raises an issue associated with the canonicalization algorithms. The task resolution says:</p>",
        "id": 172748053,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565253509
    },
    {
        "content": "<blockquote>\n<p>The canonicalization algorithm should <em>not</em> normalize information within XML attribute values or JSON object properties (excepting XHTML, where normalization SHALL happen normally).  The change will be to restrict normalization to the XHTML content and to content outside XML attribute and JSON property values.</p>\n<p>Grahame will raise this with the community and see if this will actually impact anyone - and more importantly whether anyone objects to making this breaking change.</p>\n<p>If the community is agreeable, we will flag this in the R4 spec as having been fixed in the R5 spec and will fix it there.</p>\n<p>If the community is not agreeable, we will define new canonicalization algorithm URLs for the new \"corrected\" version.</p>\n</blockquote>",
        "id": 172748062,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565253525
    },
    {
        "content": "<p>does anyone have any issues with this?</p>",
        "id": 172748075,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1565253544
    },
    {
        "content": "<p>Looking at the GForge item, I think this is not well thought out. The canonicalization is mentioned in the context of digital signatures. The Signature data type explicitly references XML digital signature <a href=\"https://www.w3.org/TR/xmldsig-core1/\" target=\"_blank\" title=\"https://www.w3.org/TR/xmldsig-core1/\">https://www.w3.org/TR/xmldsig-core1/</a> that in turn requires use of Canonical XML <a href=\"https://www.w3.org/TR/xml-c14n11/\" target=\"_blank\" title=\"https://www.w3.org/TR/xml-c14n11/\">https://www.w3.org/TR/xml-c14n11/</a>. This means that XML attributes will be normalized, if XML dsig is used.</p>\n<p>Furthermore, I don't understand the issue raised - the canonicalization happens as part of the signature process, the canonical form is not sent over the wire.</p>",
        "id": 175930107,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1568742013
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191328\">@Ewout Kramer</span> <span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span></p>",
        "id": 176126616,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1568916918
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 176126629,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1568916931
    },
    {
        "content": "<p>the canonical form can be sent over the wire, or stored.</p>",
        "id": 176126742,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1568916984
    },
    {
        "content": "<p>but it's possible that the <span class=\"user-mention\" data-user-id=\"192685\">@Vassil Peytchev</span> is right about this - the question is how extensive are the use cases for canonicalisation on the wire... and they're small, I think</p>",
        "id": 176126966,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1568917109
    },
    {
        "content": "<p>he is right about this. This is mentioned pretty clearly in the xmldsig-core1 spec page.</p>",
        "id": 176127521,
        "sender_full_name": "Ewout Kramer",
        "timestamp": 1568917427
    },
    {
        "content": "<p>This is not even about canonicalisation on the wire - Lloyd is sitting next to us and is afraid that you can subtly change the meaning of a document by adding or removing spaces and tabs in markdown, and having no way for the receiver and sender to guarantee that this is caught.</p>",
        "id": 176127687,
        "sender_full_name": "Ewout Kramer",
        "timestamp": 1568917509
    },
    {
        "content": "<p>well, that'ss both true and <a href=\"http://false.in\" target=\"_blank\" title=\"http://false.in\">false.in</a> both ways</p>",
        "id": 176128269,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1568917887
    },
    {
        "content": "<p>xml canonicalization might normalise attributes, but we don't have to.</p>",
        "id": 176128283,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1568917905
    },
    {
        "content": "<p>on other hand, exchange is a worry we don't need to make supreme.</p>",
        "id": 176128324,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1568917922
    },
    {
        "content": "<p>and the fact that different markdowns collapse to the same signature text doesn't scare me very much</p>",
        "id": 176128362,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1568917938
    },
    {
        "content": "<p>Consider this:</p>\n<ul>\n<li>\n<p>Applications SHALL support the following:<br>\n     * US Core profiles a, b an c<br>\n     * Clinical genomics profiles<br>\n     * All profiles define in this IG</p>\n</li>\n<li>\n<p>Ensure you read usage the notes</p>\n</li>\n</ul>\n<p>vs. this:</p>\n<ul>\n<li>\n<p>Applications SHALL support the following:<br>\n     * US Core profiles a, b an c<br>\n     * Clinical genomics profiles</p>\n</li>\n<li>\n<p>All profiles define in this IG<br>\n     * Ensure you read usage notes</p>\n</li>\n</ul>",
        "id": 176145687,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1568929917
    },
    {
        "content": "<p>This is less likely to be a problem where the original author wasn't crafting content to allow manipulation.  But it'd be pretty easy for someone to craft content that <em>was</em> intended to allow manipulation</p>",
        "id": 176145776,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1568929983
    },
    {
        "content": "<p>The question was not, can canonicalization change the markdown. The question was, is the fact that it does a problem?</p>",
        "id": 176145777,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1568929983
    },
    {
        "content": "<p>The above change could have legal implications</p>",
        "id": 176145787,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1568930008
    },
    {
        "content": "<p>well, then, you should use json not xml. because you can't otherwise resolve that</p>",
        "id": 176145803,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1568930032
    },
    {
        "content": "<p>XML retains space in attributes.  It's the digital signature canonicalization that's the problem</p>",
        "id": 176145882,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1568930084
    },
    {
        "content": "<p>if you want to sign and be sure about markdown, use json not xml</p>",
        "id": 176145908,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1568930122
    },
    {
        "content": "<p>That could be part of the guidance we provide</p>",
        "id": 176149166,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1568933263
    },
    {
        "content": "<p>sure it should be</p>",
        "id": 176149771,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1568933912
    }
]