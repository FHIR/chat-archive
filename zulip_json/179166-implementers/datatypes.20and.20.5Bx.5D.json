[
    {
        "content": "<p>I'm looking at <code>Goal.target[x]</code>and one of the options is <code>targetQuantity</code>. This should really be <code>targetDuration</code>. Is it a tooling error that causes this?</p>",
        "id": 153816543,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1458309636
    },
    {
        "content": "<p>From Goal DSTU2 StructureDefinition, element definition for Goal.target[x]:</p>\n<div class=\"codehilite\"><pre>      &lt;type&gt;\n        &lt;code value=&quot;Quantity&quot;/&gt;\n        &lt;profile value=&quot;http://hl7.org/fhir/StructureDefinition/Duration&quot;/&gt;\n      &lt;/type&gt;\n</pre></div>\n\n\n<p>This week I discussed choice element renaming with Ewout. According to the spec, the [x] should be replaced by a base type, in this case Quantity.</p>",
        "id": 153816544,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1458309782
    },
    {
        "content": "<p>Ah, so this was intentional. In that case, let me just say I think we should reevaluate the decision. Because it makes tthe data models very difficult to understand.</p>",
        "id": 153816546,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1458311403
    },
    {
        "content": "<p>According to this approach, Duration, Money etc. are considered to be (official) profiles on Quantity, which is the actual core type.  Recently, I've been working on support for derived core types in Forge. Currently I consider Quantity to be the actual type name, and Money/Duration/... as a profile name. This is similar to derived profiles created by users, except that the canonical url starts with the standard prefix <a href=\"http://hl7.org/fhir/StructureDefinition\" target=\"_blank\" title=\"http://hl7.org/fhir/StructureDefinition\">http://hl7.org/fhir/StructureDefinition</a>. I'm still working on some nitty gritty details, but the approach seems to work.</p>",
        "id": 153816547,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1458311983
    },
    {
        "content": "<p>In the currently suggested approach, all derived profiles are treated equally, regardless of wether they are official (Money) or user-defined (e.g. Dollar profile): replace the [x] with the actual base type (e.g. Quantity). As far as I can determine right now, this does seem to simplify some of the type resolving logic, as opposed to defining special rules for official derived profiles.</p>",
        "id": 153816548,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1458312492
    },
    {
        "content": "<p>Ha! This issue again. Yes, it seems, except for Grahame, no one has realized this.  So the subtypes of Quantity aren't really subtypes, they are just profiles.  So, we had to change the serializer to turn valueAge into valueQuantity.  So, yes, it is intentional.  However, the current datatype page and valuets like <a href=\"http://hl7.org/fhir/valueset-defined-types.html\" target=\"_blank\" title=\"http://hl7.org/fhir/valueset-defined-types.html\">http://hl7.org/fhir/valueset-defined-types.html</a> still list those as \"types\". This is all very confusing. gForge #8916 and #9168 have been raised as a reaction to this.</p>",
        "id": 153816551,
        "sender_full_name": "Ewout Kramer",
        "timestamp": 1458312807
    },
    {
        "content": "<p>Duration is not a type, it's a profile on a type. So it cannot be in the serialization as a type. I'm not sure why this is causing such confusion</p>",
        "id": 153816579,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1458325176
    },
    {
        "content": "<p>It's causing such confusion because the field in the <code>Goal</code> resource is called <code>targetQuantity</code>, and this makes no sense. I can't read that field name and understand it. </p>",
        "id": 153816581,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1458325252
    },
    {
        "content": "<p>I'm not talking about data type definitions.</p>",
        "id": 153816583,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1458325357
    },
    {
        "content": "<p>I'm talking about reading the field name <code>Goal.targetQuantity</code> and (not!) understanding what it means.</p>",
        "id": 153816584,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1458325365
    },
    {
        "content": "<p>Yes that happened with other fields as well</p>",
        "id": 153816585,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1458325395
    },
    {
        "content": "<p>I'm sure it did. This is just the first one I happened to notice.</p>",
        "id": 153816587,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1458325410
    },
    {
        "content": "<p>I didn't like that outcome either. But you can't invent special cases to workaround that kind of stuff and still have something that actually works</p>",
        "id": 153816588,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1458325472
    },
    {
        "content": "<p>so is this really a publishing issue - ie what we read in the the JSON rendition is clear :</p>",
        "id": 153816704,
        "sender_full_name": "Eric Haas",
        "timestamp": 1458347244
    },
    {
        "content": "<p>\"targetQuantity\" : { Quantity(Duration) }</p>",
        "id": 153816705,
        "sender_full_name": "Eric Haas",
        "timestamp": 1458347246
    },
    {
        "content": "<p>in the structure is less clear when I read it since  I look at type and see \"Duration\" and think \"Duration\" so when targetQuantity popup I like Josh think its an error.</p>",
        "id": 153816706,
        "sender_full_name": "Eric Haas",
        "timestamp": 1458347462
    },
    {
        "content": "<p>maybe type should read  Quantity(Duration)</p>",
        "id": 153816707,
        "sender_full_name": "Eric Haas",
        "timestamp": 1458347507
    },
    {
        "content": "<p>Though thats not much better. Can't we just hide it :-)</p>",
        "id": 153816708,
        "sender_full_name": "Eric Haas",
        "timestamp": 1458347549
    },
    {
        "content": "<p>in the structure, we always replace the type with the profile name </p>",
        "id": 153816718,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1458372007
    },
    {
        "content": "<p>irrespective of where we are</p>",
        "id": 153816719,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1458372017
    },
    {
        "content": "<p>Its just that the words don't match one's expectation so reader is left puzzled like when you are drving down Main street and then next block the street name changes to Elm.   I don't how or if we can fix it but its an issue.</p>",
        "id": 153816728,
        "sender_full_name": "Eric Haas",
        "timestamp": 1458409713
    },
    {
        "content": "<p>I don't understand. The structure is quite specific: it shows both the element name, and the profile or type name. where is the uncertainty?</p>",
        "id": 153816739,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1458417895
    },
    {
        "content": "<p>The field \"targetQuantity\" just doesn't make sense. </p>",
        "id": 153816743,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1458421478
    },
    {
        "content": "<p>It sounds like you're giving a patient  a quantity as a goal (e.g. \"lose 25 pounds\"). But in fact it's describing a duration of time. </p>",
        "id": 153816744,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1458421517
    },
    {
        "content": "<p>What is the alternative work-around?  I don't think we want profile names manifesting in the wire format...</p>",
        "id": 153816747,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1458422497
    },
    {
        "content": "<p>Well, we could treat those profiles special as concrete types. That would be possible, but would make them special. </p>",
        "id": 153816752,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1458423178
    },
    {
        "content": "<p>Money and Duration might make sense as distinct.  Don't agree with \"Length\" (and not sure we even use it in the core spec).  There will be all sorts of profiles that are equivalent to that one.</p>",
        "id": 153816760,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1458429496
    },
    {
        "content": "<p>I don't really favour making them special. There's lot of places where you would use vanilla quantity for money or duration </p>",
        "id": 153816763,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1458432111
    },
    {
        "content": "<p>Does UCUM help us here?</p>",
        "id": 153816805,
        "sender_full_name": "Michael van der Zel",
        "timestamp": 1458468362
    },
    {
        "content": "<p>how would it help? </p>",
        "id": 153816806,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1458468606
    },
    {
        "content": "<p>It sounds to me we are looking for a clear separation of datatype vs specific unit families.</p>",
        "id": 153816808,
        "sender_full_name": "Michael van der Zel",
        "timestamp": 1458468697
    },
    {
        "content": "<p>E.g. by \"kind of quantity\".</p>",
        "id": 153816809,
        "sender_full_name": "Michael van der Zel",
        "timestamp": 1458468915
    },
    {
        "content": "<p>i agree with josh, if you aren't familiar with the Goal Resource targetQuantity sounds like the value the patient should accomplish. In the preparation phase for the last dev-days the students got confused by that a lot. <br>\nThe start of a goal is named \"start\" if target would be named \"end\" or something similar it could be less confusing for beginners </p>",
        "id": 153816810,
        "sender_full_name": "Patrick Werner",
        "timestamp": 1458469120
    },
    {
        "content": "<p>Ah. Now I see.  I see. I was confused also. I thought that target was the target of the goal. So I was thinking of a weight. Then I agree with Patrick that renaming it to \"end\" makes sense.</p>",
        "id": 153816812,
        "sender_full_name": "Michael van der Zel",
        "timestamp": 1458469882
    },
    {
        "content": "<p>And you think <code>endQuantity</code> would convey \"this is the amount of time it should take you to accomplish your goal\"  <span class=\"user-mention\" data-user-id=\"191421\">@Michael van der Zel</span>  and <span class=\"user-mention\" data-user-id=\"191451\">@Patrick Werner</span>  ?</p>",
        "id": 153816834,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1458486072
    },
    {
        "content": "<p>When would you use Qualtity in place of Money when you mean money - when you don't know the currency?</p>",
        "id": 153816836,
        "sender_full_name": "Paul Knapp",
        "timestamp": 1458494726
    },
    {
        "content": "<p>I think it would be clearer if we used the profile name rather than the base type as the name.</p>",
        "id": 153816837,
        "sender_full_name": "Paul Knapp",
        "timestamp": 1458494814
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span>  No I would say endDuration.</p>",
        "id": 153816839,
        "sender_full_name": "Michael van der Zel",
        "timestamp": 1458501463
    },
    {
        "content": "<p>of course we'd like it to say endDuration. But we wouldn't want the wire format to change for any other use of profiles, so that would make the special. And special cases are troublesome. But we did say that the primitives that are defined as derivations are actually data types , not profiles on the data types, so we could say that for these too - that would be the way which we would say they were special </p>",
        "id": 153816846,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1458510526
    },
    {
        "content": "<p>I do believe that this issue has missed the boat for Montreal connectathon though</p>",
        "id": 153816847,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1458510589
    },
    {
        "content": "<p>btw, I believe this issue has an FMM level of 2, since the highest FMM for a resource that is affected by this issue is 2 (Condition)</p>",
        "id": 153816848,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1458510707
    },
    {
        "content": "<p>It affects all uses of extensions too, I believe.</p>",
        "id": 153816918,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1458527536
    },
    {
        "content": "<p>yes, but that doesn't change my opinion on the FMM level</p>",
        "id": 153816921,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1458528938
    },
    {
        "content": "<p>Are extensions FMM2?</p>",
        "id": 153816924,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1458529739
    },
    {
        "content": "<p>we haven't said, as far as I'm aware</p>",
        "id": 153816925,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1458529782
    },
    {
        "content": "<p>This issue has caused me so much confusion in the last year.. I've gotten the implementation wrong, then corrected it, then realized the correction was only half right.</p>\n<p>If anyone cares, the status quo right now (at least if I understand it) is that profiled types like \"Money\" don't get serialized as <code>valueMoney</code>, but profiled primitive types such as markdown get serialized as <code>valueMarkdown</code> because they aren't really profiled types.</p>\n<p>It is certainly confusing. I think we should just plain say that any profiles defined in the core spec are distinct types and get serialized as such.</p>",
        "id": 153818164,
        "sender_full_name": "James Agnew",
        "timestamp": 1458942773
    },
    {
        "content": "<p>That had been my original intention, but Lloyd, in particular, was fiercely opposed to that</p>",
        "id": 153818166,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1458943251
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> what's your opposition? The fact that this continues to confuse even the so called experts tells me we have a problem :)</p>",
        "id": 153818171,
        "sender_full_name": "James Agnew",
        "timestamp": 1458943712
    },
    {
        "content": "<p>I'm comfortable with things like Money and perhaps Duration.  But \"Length\" is a sibling of what could be 50+ equivalent profiles (Volume, Mass, Area, Density . . .)  As well, it means that our profiles behave differently than everyone else's profiles, which creates change whenever we introduce a new profile and also creates pressure for people to want their profiles migrated into the international spec</p>",
        "id": 153818175,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1458948183
    },
    {
        "content": "<p>Lloyd thought that we should be consistent and not call them special. Also, it would be only place where we have explicit specialisation of a concrete type. (Though that wasnt Lloyds concern)</p>",
        "id": 153818178,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1458952450
    },
    {
        "content": "<p>Well, they've been pretty stable, that list. I don't think change should be such a concern to us</p>",
        "id": 153818179,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1458955811
    },
    {
        "content": "<p>Does anything use \"Length\"?</p>",
        "id": 153818185,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1458961846
    },
    {
        "content": "<p>Doesn't look like it </p>",
        "id": 153818188,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1458968470
    },
    {
        "content": "<p>one of the problems of treating those as types is that you can't use them as profiles on quantity in a profile - if you wanted to</p>",
        "id": 153818189,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1458968501
    },
    {
        "content": "<p>Yes.  And having both a type and a profile way of expressing them is clunky too.</p>",
        "id": 153818240,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1459001976
    }
]