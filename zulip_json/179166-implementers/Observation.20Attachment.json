[
    {
        "content": "<p>I just recently noticed that Attachment has been removed from observation.value in v4. I have been referencing from observation to binary resource from observation as valueAttachment. Is there some other way to do that?</p>",
        "id": 176558081,
        "sender_full_name": "Lauri Karppinen",
        "timestamp": 1569413821
    },
    {
        "content": "<p>Not really sure, but maybe \"derivedFrom\" attribute can achieve what you are looking for</p>",
        "id": 176558564,
        "sender_full_name": "Diego Bosca",
        "timestamp": 1569414248
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"196057\">@Lauri Karppinen</span> You can use derivedFrom and reference to a Media resource</p>",
        "id": 176570338,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1569422068
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"196057\">@Lauri Karppinen</span>  there was a lot of discussion going on during the last couple of months concerning Observation.valueAttachment, Media, DocumentReference etc (see also <a href=\"https://confluence.hl7.org/pages/viewpage.action?pageId=40735720\" target=\"_blank\" title=\"https://confluence.hl7.org/pages/viewpage.action?pageId=40735720\">https://confluence.hl7.org/pages/viewpage.action?pageId=40735720</a>).</p>\n<p>The current solution is, that Observation.valueAttachment will be brought back in R5 and as extension in R4, see also the motion from the last WGM in Atlanta: <a href=\"https://confluence.hl7.org/pages/viewpage.action?pageId=66916658#OOWGMMeetingMinutes:September16-20-Q2.1\" target=\"_blank\" title=\"https://confluence.hl7.org/pages/viewpage.action?pageId=66916658#OOWGMMeetingMinutes:September16-20-Q2.1\">https://confluence.hl7.org/pages/viewpage.action?pageId=66916658#OOWGMMeetingMinutes:September16-20-Q2.1</a><br>\nFurthermore the resource media will potentially be removed in R5, due to overlapping structure with the data type Attachment. If you take a look at the current version on <a href=\"http://build.fhir.org\" target=\"_blank\" title=\"http://build.fhir.org\">build.fhir.org</a> you already can see the upcoming changes.</p>",
        "id": 176574063,
        "sender_full_name": "Reinhard Egelkraut",
        "timestamp": 1569424195
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191890\">@Reinhard Egelkraut</span>  is correct.  he must have been in  Atlanta  :-).  You could use Media in R4 but Media has been deprecated and merged with DocumentReference  and valueAttachment returning in R5.   If the observation value is really  some other result value from a binary file then use derived from. ( for example  'X' detected and here is the the proof in this image ).  Otherwise I would recommend using a valueAttachment extension.  We voted on and approved adding  a standard extension  for valueAttachment to R4 for compatibility moving forward.</p>",
        "id": 176578386,
        "sender_full_name": "Eric Haas",
        "timestamp": 1569426566
    },
    {
        "content": "<p>Thanks for the answers. Should I already be able to find valueAttachment extension approved somewhere? I tried simplifier to find it but with no luck.</p>",
        "id": 176723710,
        "sender_full_name": "Lauri Karppinen",
        "timestamp": 1569568412
    },
    {
        "content": "<p>Not available yet the tracker was just approved. I will apply it soon. And then  would use this method to create the extension...... the extension would be <code>http://hl7.org/fhir/5.0/StructureDefinition/extension-Observation.valueAttachment</code></p>",
        "id": 176762414,
        "sender_full_name": "Eric Haas",
        "timestamp": 1569602222
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span>  Is this how you would expect the extension to be returned?</p>\n<p>resource\": {<br>\n    \"resourceType\": \"Observation\",<br>\n    \"id\": \"117276868\",<br>\n    \"extension\": [<br>\n         {  <br>\n             \"url\": \"<a href=\"http://hl7.org/fhir/5.0/StructureDefinition/extension-Observation.valueAttachment\" target=\"_blank\" title=\"http://hl7.org/fhir/5.0/StructureDefinition/extension-Observation.valueAttachment\">http://hl7.org/fhir/5.0/StructureDefinition/extension-Observation.valueAttachment</a>\",     <br>\n              \"valueAttachment\": {<br>\n                   \"data\": \"SomeBase64data\"<br>\n                   \"contentType\": \"application/xhtml\"<br>\n              }<br>\n         }<br>\n    ],<br>\n    ... <br>\n   \"dataAbsentReason\": {<br>\n      \"coding\": [<br>\n          {<br>\n               \"system\": \"<a href=\"http://terminology.hl7.org/CodeSystem/data-absent-reason\" target=\"_blank\" title=\"http://terminology.hl7.org/CodeSystem/data-absent-reason\">http://terminology.hl7.org/CodeSystem/data-absent-reason</a>\",<br>\n               \"code\": \"not-permitted\",<br>\n               \"display\": \"Not Permitted\"<br>\n          }<br>\n       ],<br>\n      \"text\": \"Not Permitted\"<br>\n   }</p>",
        "id": 178768790,
        "sender_full_name": "Kathy Pickering",
        "timestamp": 1571759474
    },
    {
        "content": "<p>The extension yes.  I would not have a dataAbsentReason (DAR) since the value is there as an extension.</p>",
        "id": 178793331,
        "sender_full_name": "Eric Haas",
        "timestamp": 1571774435
    }
]