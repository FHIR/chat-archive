[
    {
        "content": "<p>5:40 PM</p>\n<p>Hello,<br>\nI am using the Hapi Plain server. I wanted to do automatic audit when someone views a resource or update a resource. I see there are some interceptors Hook SERVERS_OUTGOING_RESPONSE. How can I create an audit event which can capture who, action(read/update/delete), what changed?. Also, for update, how can I find before and after changes?. Could you please give me some pointers ?. I did post this in hapi forum didn't get any response. This is a very common thing so wondering how others are doing auditing ?. Any pointers is appreciated. thanks. Nath</p>",
        "id": 193050445,
        "sender_full_name": "Nath",
        "timestamp": 1586183602
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span></p>",
        "id": 193050730,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1586183718
    },
    {
        "content": "<p>I can see 2 options:</p>\n<ul>\n<li>If you create a hook method on SERVERS_OUTGOING_RESPONSE, you should be able to add a parameter of type RequestDetails, and grab the input resource from that as well as other details about the incoming operation</li>\n<li>You could also have your resource providers manually broadcast your own <code>STORAGE_PRESHOW_RESOURCES</code> and <code>STORAGE_PRECOMMIT_RESOURCE_CREATED</code> / <code>STORAGE_PRECOMMIT_RESOURCE_UPDATED</code> events, and have your interceptor listen for those</li>\n</ul>\n<p>Option 1 would certainly be much easier. Option 2 is how a HAPI FHIR built-in audit interceptor will work whenever it gets written (we've been planning on doing this for ages..)</p>",
        "id": 193058493,
        "sender_full_name": "James Agnew",
        "timestamp": 1586186826
    },
    {
        "content": "<p>thanks <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> and <span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> . thanks for your valuable input. I will take a look.</p>",
        "id": 193059322,
        "sender_full_name": "Nath",
        "timestamp": 1586187174
    }
]