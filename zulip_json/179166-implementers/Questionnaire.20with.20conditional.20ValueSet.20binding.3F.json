[
    {
        "content": "<p>In a Questionnaire, can I make the \"binding\" to the permitted answers ValueSet conditional on the value of a previous question?<br>\nFor example, I may have a ValueSet of procedures for men and a different one for procedures for women and I want to use the appropriate ValueSet based on the answer to a male/female question item (yes, I know gender is more complex than this, but it's just an example)</p>",
        "id": 153869040,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1485305469
    },
    {
        "content": "<p>Not as part of core - meaning most systems wouldn't recognize it.  The easiest way to accomplish this behavior would be to have multiple questions and enable only one of them based on the answer to the previous question.</p>",
        "id": 153869043,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1485308056
    },
    {
        "content": "<p>Sorry Lloyd, I'm not sure I follow your advice. Could you expand a little, using Michael's  \"Gender Answer with conditional binding to Gender specific Px ValueSet\" example?  appreciated :-)</p>",
        "id": 153869048,
        "sender_full_name": "Donna Truran",
        "timestamp": 1485318750
    },
    {
        "content": "<p>&lt;q1 \"What's your gender (M/F)?\"&gt;<br>\n  &lt;q1.1 \"What healthcare conditions currently apply to you?\" (valueset includes pregnancy) enableWhen q1=F/&gt;<br>\n  &lt;q1.2 \"What healthcare conditions currently apply to you?\" (valueset includes prostate cancer) enableWhen q1=M/&gt;<br>\n&lt;/q1&gt;</p>",
        "id": 153869180,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1485393951
    },
    {
        "content": "<p>That's rather abbreviated/pseudo-coded, but hopefully it conveys the gist</p>",
        "id": 153869181,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1485393970
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-email=\"lloyd@lmckenzie.com\">@Lloyd McKenzie</span>  I now better understand this using this simple gender based example. I'm going to assume (!!! always dangerous) that I could use the same approach to do something more complex such as                                                                                                                                                                                                                                  &lt;q1 \"Clinical discipline?\" (Speech/Physiotherapy/Dietetics/Social Work/etc                                                                                               &lt;q1.1 \"Patient condition managed this encounter?\" (valueset Speech) enableWhen q1=Speech                                                              &lt;q1.2 \"Patient condition managed this encounter?\" (valueset Physiotherapy) enableWhen q1=Physiotherapy                                           &lt;q1.3 \"Patient condition managed this encounter?\" (valueset Dietetics) enableWhen q1=Dietetics                                                                    .... and so on.... for the 12 or so disciplines I might want to consolidate into a single questionnaire (for use in a multidisciplinary clinical practice?)  Stop me if I'm wrong! :-) thanks for your help.</p>",
        "id": 153869456,
        "sender_full_name": "Donna Truran",
        "timestamp": 1485740466
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> , that's the only solution I'd been able to come up with.</p>",
        "id": 153869457,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1485740870
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192192\">@Donna Truran</span> I'm afraid that's the only way supported right now.  You could certainly be more concise with a modifier extension - at the cost that all your client systems would have to customize to support it and you'd have to use custom validators and renderers, etc. too.  That doesn't mean that the current design has hit the proper sweet-spot though.  We could certainly have a discussion about whether this sort of behavior falls within what would be considered \"core\" - i.e. something that 80%-ish of the systems that deal with questionnaires would be able to handle.</p>",
        "id": 153869458,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1485744219
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span>  that's great Lloyd... this will work well enough for the mock-up/demonstration stuff I'm doing at the moment... we can get more elegant when we have more time :-) appreciate your help.... cheers</p>",
        "id": 153869459,
        "sender_full_name": "Donna Truran",
        "timestamp": 1485744451
    },
    {
        "content": "<p>I think that this space rapidly falls into an unmanageable are of super complexity</p>",
        "id": 153870147,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1486352730
    },
    {
        "content": "<p>one thing we could do to make this manageable is to define a cda-hook operation that you use to decide whether a question is enabled, and whether a more refined value set for possible answers can be presented based on other answers </p>",
        "id": 153870148,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1486352777
    },
    {
        "content": "<p>Is it possible to create a valueSet that has enableWhen options? For example, I'm working on a questionnaire that has a section on 'communicable diseases'. It consists of 10 items (i.e. pregnancy, sleep apnea, diabetes, etc). Ideally, I was hoping to make the valueSet consist of these 10 items + additional logic. If the patient says 'yes' to pregnancy, then an enableWhen logic would ask \"How many months?\" And, if the patient also selects 'diabetes', it would cause another question to appear under it such as \"What is your blood sugar?\"</p>",
        "id": 179551993,
        "sender_full_name": "Glory Kim",
        "timestamp": 1572541175
    },
    {
        "content": "<p>That sounds like the enableWhen is tied to specific answers, not to a value set.  It's certainly fine if the list of choices is a value set.  If you want to tie enabling to membership of the answer in a particular value set (e.g. if one of the selected concommittent meds was an ACE inhibitor), you could do that with the enableWhenExpression extension</p>",
        "id": 179552241,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1572541288
    },
    {
        "content": "<p>Thanks Lloyd. I've found the extension here (<a href=\"http://build.fhir.org/ig/HL7/sdc/expressions.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/sdc/expressions.html\">http://build.fhir.org/ig/HL7/sdc/expressions.html</a>) but am unsure how to actually use the expression extension. Clicking on the <code>enableWhenExpression</code> leads me to a 404. For example, what is it's canonical url and how can I reference it?</p>",
        "id": 179564451,
        "sender_full_name": "Glory Kim",
        "timestamp": 1572548112
    },
    {
        "content": "<p>It's not yet available at the canonical URL - we need to publish the next version of SDC before that can happen - which is now looking like December or January.  The link is here: <a href=\"http://build.fhir.org/ig/HL7/sdc/extension-sdc-questionnaire-enableWhenExpression.html\" target=\"_blank\" title=\"http://build.fhir.org/ig/HL7/sdc/extension-sdc-questionnaire-enableWhenExpression.html\">http://build.fhir.org/ig/HL7/sdc/extension-sdc-questionnaire-enableWhenExpression.html</a></p>",
        "id": 179564650,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1572548262
    },
    {
        "content": "<p>It allows you to use FHIRPath.</p>",
        "id": 179564733,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1572548290
    }
]