[
    {
        "content": "<p>Hi, </p>\n<p>Have a question regarding how to best handle prefixes in search params.  Our FHIR-application is mainly a facade towards a legacy system, mapping fhir -&gt; legace and back. As such, the legacy app does not have the functionality needed to support prefixes, e.g a date will most often be treated as an implicit 'ge ' with no option to reverse the condition (and we are unlikely to get that support implemented). </p>\n<p>So, as I see it there's a few ways to handle this:</p>\n<p>1) We try to solve things programatically, i.e there's no prefix on a data param so defaults to eq, or a prefix the legacy search does not supprt, we do normal search and then apply our own filter logic to fulfill the constraint given. Might not work for all variants and might yield a complex and not very maintainable code. <br>\n2) We ignore prefixes all together. This seems to be the worst solution, someone searches with prefixes, we ignore prefixes and give back results that does not match what the user think they should get. <br>\n3) We simply check prefixes in our searches, and if it is not one of those that the legacy service supports, we generate an error. </p>\n<p>My gut feeling is that:</p>\n<p>#1 is probably the best and would be standard compliant, <br>\n#3 might be easiest to implement but might violate at least the spirit of the standard and <br>\n#2 is right out, it would both violate the standard and would risk external actors on our system to get erroneous data</p>\n<p>So, which is the best option in our case? is #3 acceptable? Or is #1 the only option if we want our app to behave in a good manner?</p>",
        "id": 240796165,
        "sender_full_name": "Stefan Lindstrom",
        "timestamp": 1622442269
    },
    {
        "content": "<p>FHIR calls these prefixes comparators (http//build.fhir.org/searchparameter-definitions.html#SearchParameter.comparator).</p>\n<p>From a practical perspective I'm not sure I have good advice here other than \"not (2)\". It's fine not to support a search parameter at all (aa long as you're not trying to support a specific implementation guide requiring it) .</p>\n<p>As far as the standard goes, you could technically use <a href=\"http://build.fhir.org/capabilitystatement-definitions.html#CapabilityStatement.rest.resource.searchParam\">http://build.fhir.org/capabilitystatement-definitions.html#CapabilityStatement.rest.resource.searchParam</a> and <a href=\"http://build.fhir.org/searchparameter.html\">http://build.fhir.org/searchparameter.html</a> to create your own search parameters describing how your server works, but there's no computable way to say that you <em>require</em> a comparator.</p>",
        "id": 240830006,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1622465593
    },
    {
        "content": "<p>Bottom line, your gut sense seems well tuned.</p>",
        "id": 240830056,
        "sender_full_name": "Josh Mandel",
        "timestamp": 1622465632
    },
    {
        "content": "<p>Thanks for your input. Seems our team might have a bit of implementation work ahead of us :)</p>",
        "id": 241138084,
        "sender_full_name": "Stefan Lindstrom",
        "timestamp": 1622635004
    }
]