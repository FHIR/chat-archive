[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192576\">@Robert Scanlon</span> I hope it is okay to mention you here directly since you have been so active on the crucible issues. If you prefer bug reports somewhere else, please tell me where I should submit them.</p>\n<p>I noticed that my format tests fail at <a href=\"https://projectcrucible.org/servers/5c89107d04ebd024be000000#5c98c75d04ebd03124000011/format001/FT07\" target=\"_blank\" title=\"https://projectcrucible.org/servers/5c89107d04ebd024be000000#5c98c75d04ebd03124000011/format001/FT07\">https://projectcrucible.org/servers/5c89107d04ebd024be000000#5c98c75d04ebd03124000011/format001/FT07</a> due to a wrong response code. Now crucible does expect 415 when it sends an invalid accept header: \"Accept: application/foobar\". According to the http specs, the proper header here would actually be 406 ( <a href=\"https://tools.ietf.org/html/rfc7231#section-6.5.6\" target=\"_blank\" title=\"https://tools.ietf.org/html/rfc7231#section-6.5.6\">https://tools.ietf.org/html/rfc7231#section-6.5.6</a> ) . This is not clearly defined in STU3 which just says to follow http semantics but is better defined in R4 (<a href=\"http://hl7.org/fhir/http.html#mime-type\" target=\"_blank\" title=\"http://hl7.org/fhir/http.html#mime-type\">http://hl7.org/fhir/http.html#mime-type</a> -- last bullet in \"implementation note\").</p>\n<p>To summarize: if the Content-Type is wrong 415 is the correct response, if accepts/_format is wrong then 406 is the correct answer. It would be great if crucible could get updated to support either 415 or 406 if the accept/_format is wrong.</p>\n<p>The next test (<a href=\"https://projectcrucible.org/servers/5c89107d04ebd024be000000#5c98c75d04ebd03124000011/format001/FT08\" target=\"_blank\" title=\"https://projectcrucible.org/servers/5c89107d04ebd024be000000#5c98c75d04ebd03124000011/format001/FT08\">https://projectcrucible.org/servers/5c89107d04ebd024be000000#5c98c75d04ebd03124000011/format001/FT08</a>) fails due to the same reason but it has a twist: here you are sending an invalid Accept header as well as _format, which means you aren't really testing if _format alone is enough. It would be good to drop the Accept header from this request.</p>",
        "id": 161637771,
        "sender_full_name": "Florian Apolloner",
        "timestamp": 1553516981
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"213323\">@Florian Apolloner</span> -- there is a specific <a class=\"stream\" data-stream-id=\"179204\" href=\"/#narrow/stream/179204-crucible\">#crucible</a> stream on here, so that is probably the best place to post these questions / issues in the future because this is a tool-specific.  Either there or the GitHub issues for crucible works (<a href=\"https://github.com/fhir-crucible/crucible/issues\" target=\"_blank\" title=\"https://github.com/fhir-crucible/crucible/issues\">https://github.com/fhir-crucible/crucible/issues</a>).</p>",
        "id": 161639821,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1553518617
    },
    {
        "content": "<p>It does appear that this test needs to be updated now that FHIR adds clarifying information in R4.  We'll take a closer look and will update here as soon as possible. Thanks!</p>",
        "id": 161641452,
        "sender_full_name": "Robert Scanlon",
        "timestamp": 1553519714
    }
]