[
    {
        "content": "<p>NCPDP has a question about their product identification code system.  They use an 11-level \"NDC\" which takes the three parts of FDA's NDC and uses the larger of the numbers, 5-4-2 for labeler code, product code, package code.  I'm pretty sure that they can't just use the FDA NDC code system URL since the codes are different, but since they are different algorithmically, I could be wrong on this.  My take is that someone (probably the NCPDP) would need to define a code system for them.  Does this make sense?</p>",
        "id": 161067370,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1552922932
    },
    {
        "content": "<p>so they're just picking a particular NDC code?</p>",
        "id": 161088510,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552937368
    },
    {
        "content": "<p>I believe this is the same unofficial \"normalized\" 11-digit NDC format that we've discussed previously - it's not published by FDA,  but a lot of people use and rely on it, like apparently NCPDP and drug database vendors like Multum (and I believe FDB and others, as well).  I think we do need to get something in place for it.  We have some older threads on this, too, that maybe we should dig up.  We just haven't landed on anything in particular yet, as I recall.</p>",
        "id": 161089112,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1552937854
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> yes, that is exactly it.  <br>\n<span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> NDC's can be 4-4-2, 5-3-2, or 5-4-1 (labeler, product, package respectively) and the NCPDP formula takes these three parts and inserts a '0' (I think) where needed so that it becomes 5-4-2.</p>",
        "id": 161091960,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1552939929
    },
    {
        "content": "<p>yes we definitely need to land this. <span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> can we accelerate this?</p>",
        "id": 161093785,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552941319
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191405\">@Rob Hausam</span> <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> I believe that it is actually NCPDP that has created the formula and the US formularies/catalog have adopted it.  At least that was the impression that I got from my recent NCPDP call.</p>",
        "id": 161094412,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1552941738
    },
    {
        "content": "<p>Sure.  I don't see why not.  I think we just need to decide where the \"unofficial source of truth\" for the 11 digit codes is going to be hosted.  I was just looking earlier today about what to load to <a href=\"http://tx.fhir.org\" target=\"_blank\" title=\"http://tx.fhir.org\">tx.fhir.org</a> for NDC, since we need it for IPS.  So far we used the official format with dashes in our IPS example, but it makes sense to go ahead and deal with the 11 digit format, too.  I have the full current NDC download as of today.  But it's released daily, so ongoing maintenance has to be considered and could be a significant challenge.  To be reasonably reliable and useful, I think we would need a plan  to update it at least monthly?</p>",
        "id": 161094583,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1552941858
    },
    {
        "content": "<p>how many codes in NDC?</p>",
        "id": 161094692,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552941937
    },
    {
        "content": "<p>~126,260 as of 3/18/2019</p>",
        "id": 161094878,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1552942050
    },
    {
        "content": "<p>yep</p>",
        "id": 161094904,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1552942074
    },
    {
        "content": "<p>a little big for a code system resource then</p>",
        "id": 161095053,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552942164
    },
    {
        "content": "<p>hmm, that's the number of product codes, there are ~241,000 package codes and I think that's the actual NDCs (still learning my way around the code system)</p>",
        "id": 161095091,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1552942193
    },
    {
        "content": "<p>yep</p>",
        "id": 161095163,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1552942211
    },
    {
        "content": "<p>yes - the \"official\" NDCs are the package codes<br>\nI've never seen the product codes used independently, but they are distributed that way now and those may be useful for organizing, searching, etc.</p>",
        "id": 161095293,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1552942322
    },
    {
        "content": "<p>I'll have to look into it. How is it released?</p>",
        "id": 161095295,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552942322
    },
    {
        "content": "<p>tab delimited text, or Excel</p>",
        "id": 161095370,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1552942355
    },
    {
        "content": "<p>I'll add it to my list</p>",
        "id": 161095444,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552942415
    },
    {
        "content": "<p>is there any release of the 11 digit codes?</p>",
        "id": 161096964,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552943609
    },
    {
        "content": "<p>Not an official release that I've seen.  All of the drug database vendors have them but they are generated by a formula so I haven't seen anyone release them officially</p>",
        "id": 161097757,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1552944336
    },
    {
        "content": "<p>do we think that the product ids have a use without the package code?</p>",
        "id": 161099452,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552945819
    },
    {
        "content": "<p>I think they may be useful for organizing and searching (and probably picklists, etc.) as I mentioned.  I don't think there is any \"official\" use so far that I am aware of for the product codes.</p>",
        "id": 161103763,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1552949550
    },
    {
        "content": "<p>is it an is-a relationship?</p>",
        "id": 161104429,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1552950160
    },
    {
        "content": "<p>I'm not sure that I would necessarily consider it to be a true is-a relationship - but if you decided to represent it that way I don't think anyone would have trouble understanding or using it.</p>",
        "id": 161105095,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1552950770
    },
    {
        "content": "<p>I think I would consider it to be more like an \"axis\" model as in LOINC (e.g. it might be analogous to a LOINC axis like COMPONENT as it's related to the entire LOINC code).</p>",
        "id": 161105537,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1552951152
    },
    {
        "content": "<p>Why is that too big for a CodeSystem resource?</p>",
        "id": 161215727,
        "sender_full_name": "Jim Steel",
        "timestamp": 1553057466
    },
    {
        "content": "<p>Good question.  What actually is \"too big\"?  I would be able to generate a CodeSystem resource for the full NDC (for a particular daily release) - if it's useful to do that.  In the meantime I have a CodeSystem resource with a few example NDC codes about ready to push to the packages repo.</p>",
        "id": 161305343,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1553128876
    },
    {
        "content": "<p>I'm not interested in trying generate a code system resource with 360k codes</p>",
        "id": 161306219,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1553129839
    },
    {
        "content": "<p>What are you thinking about for NDC now - both for the official release with 10-digit codes and for the unofficial 11-digit codes that we've been discussing?</p>",
        "id": 161306473,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1553130172
    },
    {
        "content": "<p>so the 11 digit code for 0002-0800-01 would be 00002080001 ?</p>",
        "id": 161306957,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1553130723
    },
    {
        "content": "<p>yes</p>",
        "id": 161306985,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1553130796
    },
    {
        "content": "<p>and there's no 11 digit code for just 0002-0800 ?</p>",
        "id": 161306995,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1553130813
    },
    {
        "content": "<p>right</p>",
        "id": 161307006,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1553130838
    },
    {
        "content": "<p>The 11 digit codes are for the package<br>\ntheoretically you could have normalized 9 digit product codes, but I haven't seen that</p>",
        "id": 161307095,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1553130939
    },
    {
        "content": "<p>ok so I think they should have the same code system, and we should define a property so that you can separate them</p>",
        "id": 161307366,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1553131320
    },
    {
        "content": "<p>I expect the 11 digit codes probably should be a code system supplement, since they don't come from the official publisher - FDA</p>",
        "id": 161307529,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1553131511
    },
    {
        "content": "<p>probably.</p>",
        "id": 161307539,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1553131532
    },
    {
        "content": "<p>how do we identify it as a supplement?</p>",
        "id": 161307548,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1553131558
    },
    {
        "content": "<p>using CodeSystem.supplements (in R4)</p>",
        "id": 161307620,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1553131634
    },
    {
        "content": "<p>ok I'll have NDC support up on <a href=\"http://tx.fhir.org\" target=\"_blank\" title=\"http://tx.fhir.org\">tx.fhir.org</a> in the next couple of hours</p>",
        "id": 161307621,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1553131638
    },
    {
        "content": "<p>the 11-digit codes are basically equivalences for the \"real\" code so could we make the 11-digit code a property of the \"real\" code?</p>",
        "id": 161307674,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1553131691
    },
    {
        "content": "<p>that doesn't make the 11 digit codes real codes that can be used in Coding.code, which is the goal here</p>",
        "id": 161307701,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1553131756
    },
    {
        "content": "<p>true, okay</p>",
        "id": 161307708,
        "sender_full_name": "Jean Duteau",
        "timestamp": 1553131770
    },
    {
        "content": "<p>we've said the supplements can't define new codes<br>\nso that might argue for a separate code system<br>\nit would be sort of like the legacy SNOMED identifiers - we decided on a different system for them</p>",
        "id": 161307820,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1553131922
    },
    {
        "content": "<p>yes we have said that. Do we want to do that though? It would make it easier to say 'just 11 digit codes' but they're purely equivalent codes, yes?</p>",
        "id": 161307893,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1553132029
    },
    {
        "content": "<p>yes, they are purely equivalent - each 10 digit code (in all three formats) generates a unique 11 digit code<br>\nyou can't deterministically go from the 11 digit code back to the original 10 digit code, as you don't know which format was used, but that shouldn't matter</p>",
        "id": 161308058,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1553132180
    },
    {
        "content": "<p>well, for the moment, <a href=\"http://tx.fhir.org\" target=\"_blank\" title=\"http://tx.fhir.org\">tx.fhir.org</a> is using the same code system</p>",
        "id": 161309302,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1553133795
    },
    {
        "content": "<p><a href=\"http://tx.fhir.org/r4/CodeSystem/$lookup?system=http://hl7.org/fhir/sid/ndc&amp;code=00002080001\" target=\"_blank\" title=\"http://tx.fhir.org/r4/CodeSystem/$lookup?system=http://hl7.org/fhir/sid/ndc&amp;code=00002080001\">http://tx.fhir.org/r4/CodeSystem/$lookup?system=http://hl7.org/fhir/sid/ndc&amp;code=00002080001</a></p>",
        "id": 161309772,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1553134349
    },
    {
        "content": "<p><a href=\"http://tx.fhir.org/r4/CodeSystem/$lookup?system=http://hl7.org/fhir/sid/ndc&amp;code=0002-0800-01\" target=\"_blank\" title=\"http://tx.fhir.org/r4/CodeSystem/$lookup?system=http://hl7.org/fhir/sid/ndc&amp;code=0002-0800-01\">http://tx.fhir.org/r4/CodeSystem/$lookup?system=http://hl7.org/fhir/sid/ndc&amp;code=0002-0800-01</a></p>",
        "id": 161309775,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1553134357
    },
    {
        "content": "<p>Code system supplements <em>CANNOT</em> define new codes - only new properties and relationships for existing codes.  If you have distinct codes, you have a distinct code system.  No way around that.</p>",
        "id": 161310534,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1553135352
    },
    {
        "content": "<p>yeah so? we said that but it doesn't close out this discussion</p>",
        "id": 161310957,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1553135890
    },
    {
        "content": "<p>We either declare that the codes are implicitly part of the NDC code system and in the usage description allow them to be treated as such, or we define a separate code system.  So the question is really whether the maintainer of SDC will let us get away with doing the former.</p>",
        "id": 161311223,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1553136253
    },
    {
        "content": "<p>right those are the choices. I don't think that NDC publisher will understand or care</p>",
        "id": 161311488,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1553136689
    },
    {
        "content": "<p>Right, but will they not understand and care and say \"no\" or \"yes\".  (Neither understanding nor caring are required to provide an answer :))</p>",
        "id": 161311574,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1553136795
    },
    {
        "content": "<p>that may be true (what Grahame said) - but I think we need to find out</p>",
        "id": 161311586,
        "sender_full_name": "Rob Hausam",
        "timestamp": 1553136817
    },
    {
        "content": "<p>fda.. I guess I'll ask <span class=\"user-mention\" data-user-id=\"197015\">@Mary Ann Slack</span></p>",
        "id": 161313094,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1553138658
    }
]