[
    {
        "content": "<p>Hello Everyone,</p>\n<p>I am getting started with learning the FHIR Api for c# and I would like to ask a question on how i can validate an incoming Bundle request through a POST request to make sure its valid. I receive it as JSON.</p>\n<p>I am also looking for documentation on the C# FHIR Api it seems like documentation is incomplete?</p>",
        "id": 153974435,
        "sender_full_name": "Yener Topal",
        "timestamp": 1531211749
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191347\">@Mirjam Baltus</span> <span class=\"user-mention\" data-user-id=\"191328\">@Ewout Kramer</span> ?</p>",
        "id": 153974865,
        "sender_full_name": "Ren√© Spronk",
        "timestamp": 1531378370
    },
    {
        "content": "<p>Documentation is indeed not covering validation. Basics are simple. Create a new Validator and call Validate() on your resource POCO. You can find an example of its use in <a href=\"https://github.com/ewoutkramer/Furore.Fhir.ValidationDemo/blob/master/MainForm.cs\" target=\"_blank\" title=\"https://github.com/ewoutkramer/Furore.Fhir.ValidationDemo/blob/master/MainForm.cs\">https://github.com/ewoutkramer/Furore.Fhir.ValidationDemo/blob/master/MainForm.cs</a></p>",
        "id": 153974909,
        "sender_full_name": "Christiaan Knaap",
        "timestamp": 1531401196
    },
    {
        "content": "<blockquote>\n<p>Documentation is indeed not covering validation. Basics are simple. Create a new Validator and call Validate() on your resource POCO. You can find an example of its use in <a href=\"https://github.com/ewoutkramer/Furore.Fhir.ValidationDemo/blob/master/MainForm.cs\" target=\"_blank\" title=\"https://github.com/ewoutkramer/Furore.Fhir.ValidationDemo/blob/master/MainForm.cs\">https://github.com/ewoutkramer/Furore.Fhir.ValidationDemo/blob/master/MainForm.cs</a></p>\n</blockquote>\n<p>Can I apply this validation for my case? I am receiving a Bundle message in JSON:<br>\nThis is my code:</p>\n<div class=\"codehilite\"><pre><span></span>        Bundle bundle = new FhirJsonParser().Parse&lt;Bundle&gt;(resource.ToString());\n\n        OperationOutcome result = null;\n\n        ValidationSettings settings = ValidationSettings.Default;\n        settings.EnableXsdValidation = true;\n        settings.Trace = true;\n        settings.ResourceResolver = this.CombinedSource;\n\n        var validator = new Hl7.Fhir.Validation.Validator(settings);\n        result = validator.Validate(bundle);\n</pre></div>\n\n\n<p>I receive the error:  \"Unable to resolve reference to profile '<a href=\"http://hl7.org/fhir/StructureDefinition/Bundle\" target=\"_blank\" title=\"http://hl7.org/fhir/StructureDefinition/Bundle\">http://hl7.org/fhir/StructureDefinition/Bundle</a>' (at Bundle)\"</p>\n<p>Not sure if this is how its supposed to work but that given url in the error has been changed to \"<a href=\"http://hl7.org/fhir/bundle.html\" target=\"_blank\" title=\"http://hl7.org/fhir/bundle.html\">http://hl7.org/fhir/bundle.html</a>\" I believe.</p>\n<p>Just need confirmation if i did it right, i can read the bundle perfectly fine, atm the validator doesn't seem to work for my case.</p>",
        "id": 153975387,
        "sender_full_name": "Yener Topal",
        "timestamp": 1531728505
    },
    {
        "content": "<p>I think the <a class=\"stream\" data-stream-id=\"179171\" href=\"/#narrow/stream/179171-dotnet\">#dotnet</a> stream is a better fit for .NET API specifics.<br>\n<span class=\"user-mention\" data-user-id=\"191347\">@Mirjam Baltus</span> : can you spot an error in the code?</p>",
        "id": 153975474,
        "sender_full_name": "Christiaan Knaap",
        "timestamp": 1531749879
    },
    {
        "content": "<p>I'm not sure what's in the CombinedSource for the ResourceResolver. You need the specification to validate against, so one of the sources should be pointing to the specification.zip. One of the ways to do that, is: <br>\n            var source = new CachedResolver(ZipSource.CreateValidationSource());</p>\n<p>Of course you can combine sources with a MultiResolver, for example joining the specs with your own directory containing StructureDefinitions.</p>",
        "id": 153975493,
        "sender_full_name": "Mirjam Baltus",
        "timestamp": 1531755633
    },
    {
        "content": "<blockquote>\n<p>I'm not sure what's in the CombinedSource for the ResourceResolver. You need the specification to validate against, so one of the sources should be pointing to the specification.zip. One of the ways to do that, is: <br>\n            var source = new CachedResolver(ZipSource.CreateValidationSource());</p>\n<p>Of course you can combine sources with a MultiResolver, for example joining the specs with your own directory containing StructureDefinitions.</p>\n</blockquote>\n<div class=\"codehilite\"><pre><span></span>              string profilePath = @&quot;C:\\Users\\Yener\\Source\\Repos\\first-stam-rep\\packages\\Hl7.Fhir.Specification.STU3.0.96.0\\contentFiles\\any\\any&quot;;\n              DirectorySource = new CachedResolver(new DirectorySource(profilePath, includeSubdirectories: true));\n              CombinedSource = new MultiResolver(DirectorySource);\n</pre></div>\n\n\n<p>This is how I set up the resolver. Because ZipSource.CreateValidationSource gave me an error I think i need to setup something before i can use that method.</p>",
        "id": 153975673,
        "sender_full_name": "Yener Topal",
        "timestamp": 1531812569
    }
]