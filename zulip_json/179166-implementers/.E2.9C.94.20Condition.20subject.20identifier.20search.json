[
    {
        "content": "<p>We're hoping to implement a search on our R4 Conditions' <code>subject.identifiers</code> but haven't found a way that returns any results. The base case is POSTing to <code>/fhir/Condition/_search?subject.identifier=1234</code>.  Is this expected or are we approaching it incorrectly?  We've tried some of the obvious variations:</p>\n<ul>\n<li><code>subject:identifier=1234</code></li>\n<li><code>subject:identifier=|1234</code></li>\n<li><code>subject:Patient=1234</code></li>\n</ul>\n<p>From an example Condition payload that we can search correctly using the condition's own identifiers:</p>\n<div class=\"codehilite\"><pre><span></span><code>{\n  ...\n  &quot;subject&quot;: {\n    &quot;display&quot;: &quot;&lt;User[122081] active&gt;&quot;,\n    &quot;identifier&quot;: {\n      &quot;assigner&quot;: {\n        &quot;reference&quot;: &quot;https://example.com&quot;\n      },\n      &quot;period&quot;: {},\n      &quot;system&quot;: &quot;https://example.com&quot;,\n      &quot;type&quot;: {\n        &quot;text&quot;: &quot;Autoincrement&quot;\n      },\n      &quot;use&quot;: &quot;official&quot;,\n      &quot;value&quot;: &quot;122081&quot;\n    },\n    &quot;type&quot;: &quot;Patient&quot;\n  },\n  ...\n}\n</code></pre></div>",
        "id": 259540647,
        "sender_full_name": "Autumn Valenta",
        "timestamp": 1635521271
    },
    {
        "content": "<p>subject.identifier is the correct syntax.  However, it's possible the server doesn't support that particular form of chaining (or chaining at all).  Have you looked at the CapabilityStatement for the server to see what search parameters it claims to support?</p>",
        "id": 259543199,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1635522350
    },
    {
        "content": "<p>I think the problem is that POST?<br>\nYou should either <code>GET  /fhir/Condition?subject.identifier=1234</code> or <code>POST /fhir/Condition/_search</code> putting the search conditions in the POST body</p>",
        "id": 259555237,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1635527540
    },
    {
        "content": "<p>POST with URL parameters is allowed, but I am not sure if that means <code>POST /fhir/Condition?subject.identifier=1234</code> or the example in the OP...</p>",
        "id": 259558247,
        "sender_full_name": "Vassil Peytchev",
        "timestamp": 1635528958
    },
    {
        "content": "<p>FHIR does allow post with search parameters:<br>\n<code>POST  [base]/[type]/_search{?[parameters]{&amp;_format=[mime-type]}}</code></p>",
        "id": 259558376,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1635529016
    },
    {
        "content": "<p>Isn't the whole purpose of the POST to put the search parameters in the body?</p>",
        "id": 259564813,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1635531905
    },
    {
        "content": "<p>At least some of them.  However mix &amp; match is allowed</p>",
        "id": 259564963,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1635531975
    },
    {
        "content": "<p>Our server definitely does not allow it ... maybe it is not the only one?</p>",
        "id": 259565124,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1635532080
    },
    {
        "content": "<p>There was a tracker item where FHIR-I agreed to make clear that it's legal to do this within FHIR.  I don't know that it's prohibited to enforce server-specific limitations - though I'd only do so if there were good reasons for doing so...</p>",
        "id": 259570276,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1635534687
    },
    {
        "content": "<p>This appears to be my Condition.subject SearchParameter info.  Am I reading this correctly that it only supports <code>subject:missing</code> and <code>subject.type</code> ?</p>\n<div class=\"codehilite\"><pre><span></span><code>    {\n        &quot;definition&quot;: &quot;http://hl7.org/fhir/SearchParameter/Condition-subject&quot;,\n        &quot;extension&quot;: [\n            {\n                &quot;url&quot;: &quot;https://g.co/fhir/StructureDefinition/CapabilityStatementSearchParameterModifiers&quot;,\n                &quot;valueCoding&quot;: {\n                    &quot;code&quot;: &quot;missing&quot;,\n                    &quot;system&quot;: &quot;http://hl7.org/fhir/ValueSet/search-modifier-code&quot;\n                }\n            },\n            {\n                &quot;url&quot;: &quot;https://g.co/fhir/StructureDefinition/CapabilityStatementSearchParameterModifiers&quot;,\n                &quot;valueCoding&quot;: {\n                    &quot;code&quot;: &quot;type&quot;,\n                    &quot;system&quot;: &quot;http://hl7.org/fhir/ValueSet/search-modifier-code&quot;\n                }\n            }\n        ],\n        &quot;name&quot;: &quot;subject&quot;,\n        &quot;type&quot;: &quot;reference&quot;\n    },\n</code></pre></div>",
        "id": 259584779,
        "sender_full_name": "Autumn Valenta",
        "timestamp": 1635542421
    },
    {
        "content": "<p>Or perhaps <code>subject:type</code> is more accurate.  Still sifting through the response and looking over parts</p>",
        "id": 259584868,
        "sender_full_name": "Autumn Valenta",
        "timestamp": 1635542501
    },
    {
        "content": "<p>For future references, I'm using the Google Healthcare FHIR system for R4</p>",
        "id": 259584968,
        "sender_full_name": "Autumn Valenta",
        "timestamp": 1635542545
    },
    {
        "content": "<p>It might be.  The extensions are Google-specific - <span class=\"user-mention\" data-user-id=\"197072\">@Paul Church</span>?<br>\nThe 'standard' way to convey what modifiers are supported is to list them in SearchParameter.modifier...</p>",
        "id": 259703869,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1635559312
    },
    {
        "content": "<p>As reflected in the capability statement, the Google implementation doesn't support :identifier. You can also find this documented in the <a href=\"https://cloud.google.com/healthcare/docs/fhir\">FHIR conformance statement</a></p>",
        "id": 259799746,
        "sender_full_name": "Paul Church",
        "timestamp": 1635703060
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"453647\">Autumn Valenta</span> has marked this topic as resolved.</p>",
        "id": 260005023,
        "sender_full_name": "Notification Bot",
        "timestamp": 1635864344
    }
]