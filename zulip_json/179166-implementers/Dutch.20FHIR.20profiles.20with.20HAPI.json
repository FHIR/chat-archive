[
    {
        "content": "<p>Hello! I want to create FHIR server with support for Dutch FHIR profiles <a href=\"https://simplifier.net/NictizSTU3-Zib2017\" target=\"_blank\" title=\"https://simplifier.net/NictizSTU3-Zib2017\">https://simplifier.net/NictizSTU3-Zib2017</a> . The easiest way is to use Vonk server from Simplifier supplied with required profiles. But the goal is to create server based on HAPI. As I understood I have to create a lot of java classes to use them instead of default DSTU3 classes. Am I right? If yes, is it possible to convert definitions from XML using some tool/plugin?</p>",
        "id": 154707370,
        "sender_full_name": "Aliaksei Maiseyeu",
        "timestamp": 1547021614
    },
    {
        "content": "<p>Yes we are also wondering if we need to generate classes for every profile, or does it work out of the box? And would that be by hand?</p>",
        "id": 154726848,
        "sender_full_name": "Jan-Marc Verlinden",
        "timestamp": 1547043874
    },
    {
        "content": "<p>The standard classes support every profile - no need to create special ones</p>",
        "id": 154727344,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1547044279
    },
    {
        "content": "<p>Yes, but what about for instance the Dutch profiles we have to use for MedMij, so the special classes? Any idea?</p>",
        "id": 154727699,
        "sender_full_name": "Jan-Marc Verlinden",
        "timestamp": 1547044513
    },
    {
        "content": "<p>Just use the standard classes for those resources? what does not work?</p>",
        "id": 154727874,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1547044621
    },
    {
        "content": "<p>Those work, but we are looking at for instance the nl-core-patient extended profiles.</p>",
        "id": 154727913,
        "sender_full_name": "Jan-Marc Verlinden",
        "timestamp": 1547044654
    },
    {
        "content": "<p>Yes - what prevent you to use the standard Patient class for that? For what I see it defines some extensions - that you can set / read using the standard Patient class</p>",
        "id": 154728243,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1547044877
    },
    {
        "content": "<p>Because from what I understand this standard profile is extended for the dutch profile, so I assume the class should be extended</p>",
        "id": 154729044,
        "sender_full_name": "Jan-Marc Verlinden",
        "timestamp": 1547045520
    },
    {
        "content": "<p>According to <a href=\"http://hapifhir.io/doc_extensions.html#_toc_custom_resource_types\" target=\"_blank\" title=\"http://hapifhir.io/doc_extensions.html#_toc_custom_resource_types\">http://hapifhir.io/doc_extensions.html#_toc_custom_resource_types</a> this documentation, we should create/have additional java classes for additional profiles</p>",
        "id": 154729157,
        "sender_full_name": "Aliaksei Maiseyeu",
        "timestamp": 1547045616
    },
    {
        "content": "<p>Extensions are built into the base model and, so long as the profiles are available, the standard code can dynamically validate against any profiles it's aware of.  You'd only need custom code if you wanted to have special helper methods that hid what was an extension vs. what wasn't.  It's up to you whether that provides sufficient value for the work.</p>",
        "id": 154730938,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1547046974
    },
    {
        "content": "<p>Sorry for my lack of knowledge :-),  let me repeat: you state that the Dutch extended profiles do not need the Java classes to extend because they are adapted?</p>",
        "id": 154732457,
        "sender_full_name": "Jan-Marc Verlinden",
        "timestamp": 1547048085
    },
    {
        "content": "<p><em>If</em> the Dutch profiles are FHIR compliant - i.e. they didn't tweak the schema but instead use standard mechanisms to extend &amp; constrain (and I believe this to be true, though I haven't actually looked at the profiles), then the standard Java code will be able to handle all of the extensions and, if you have access to the StructureDefinitions, ValueSets and other artifacts from the Dutch implementation guide, you'll be able to validate instances to ensure they're valid against those profiles.  <span class=\"user-mention\" data-user-id=\"191825\">@Tom de Jong</span> <span class=\"user-mention\" data-user-id=\"191372\">@René Spronk</span> any further guidance?</p>",
        "id": 154733966,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1547049144
    },
    {
        "content": "<p>Great, many thanks!!</p>",
        "id": 154734156,
        "sender_full_name": "Jan-Marc Verlinden",
        "timestamp": 1547049308
    },
    {
        "content": "<p>Maybe the question is indeed for <span class=\"user-mention\" data-user-id=\"191372\">@René Spronk</span> or <span class=\"user-mention\" data-user-id=\"191834\">@Tom de Jong</span>: in Vonk we can actually see the Dutch profile at <a href=\"https://stu3.simplifier.net/NictizSTU3-Zib2017/StructureDefinition/nl-core-patient\" target=\"_blank\" title=\"https://stu3.simplifier.net/NictizSTU3-Zib2017/StructureDefinition/nl-core-patient\">https://stu3.simplifier.net/NictizSTU3-Zib2017/StructureDefinition/nl-core-patient</a> but for HAPI we do not <a href=\"http://hapi.fhir.org/baseDstu3/StructureDefinition/nl-core-patient\" target=\"_blank\" title=\"http://hapi.fhir.org/baseDstu3/StructureDefinition/nl-core-patient\">http://hapi.fhir.org/baseDstu3/StructureDefinition/nl-core-patient</a> . Any idea what happens?</p>",
        "id": 154735554,
        "sender_full_name": "Jan-Marc Verlinden",
        "timestamp": 1547050427
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191375\">@Alexander Henket</span> and <span class=\"user-mention\" data-user-id=\"192301\">@Ardon Toonstra</span> are closely involved with the project, maybe they'd know.</p>\n<p>In general, AFAIK, <a href=\"http://registry.fhir.org\" target=\"_blank\" title=\"http://registry.fhir.org\">registry.fhir.org</a> only contains a subset of the profiles as available on <a href=\"http://Simplifier.net\" target=\"_blank\" title=\"http://Simplifier.net\">Simplifier.net</a>, that could be the underlying reason if <a href=\"http://hapi.fhir.org\" target=\"_blank\" title=\"http://hapi.fhir.org\">hapi.fhir.org</a> solely uses <a href=\"http://registry.fhir.org\" target=\"_blank\" title=\"http://registry.fhir.org\">registry.fhir.org</a> as its souce for profiles.  And: there are two 'active' STU3 profiles with the very same canonical URL ( <a href=\"http://fhir.nl/fhir/StructureDefinition/nl-core-patient\" target=\"_blank\" title=\"http://fhir.nl/fhir/StructureDefinition/nl-core-patient\">http://fhir.nl/fhir/StructureDefinition/nl-core-patient</a> ) and the same versionId on <a href=\"http://Simplifier.net\" target=\"_blank\" title=\"http://Simplifier.net\">Simplifier.net</a>, one of which was created/updated a couple of days ago. Perhaps this causes issues - but all of the above is mere speculation, I'll leave further comments to those much more in the know about the creation of profiles and the use of profile registries.</p>",
        "id": 154737388,
        "sender_full_name": "René Spronk",
        "timestamp": 1547051775
    },
    {
        "content": "<p>The 'Dutch profiles' are HL7 FHIR compliant (we haven't tweaked schema's).  The <a href=\"https://simplifier.net/nictizstu3-zib2017/\" target=\"_blank\" title=\"https://simplifier.net/nictizstu3-zib2017/\">Nictiz STU3 Zib2017</a> project contains the profiles in use for MedMij. All the StructureDefinitions, ValueSets and other artefacts are downloadable through Simplifier or resolvable through the stu3 API of Simplifier.  You can download an entire project as a zip file at the project level or another option is to get everything from this <a href=\"https://github.com/Nictiz/Nictiz-STU3-Zib2017\" target=\"_blank\" title=\"https://github.com/Nictiz/Nictiz-STU3-Zib2017\">GitHub repo</a>.</p>\n<p><span class=\"user-mention\" data-user-id=\"191372\">@René Spronk</span> There are no two 'active' versions of the profiles anymore. In addition, we are working on restructuring the projects and creating packages for the Dutch profiles.  However, this will take some time and will require good communication to all our implementers.</p>",
        "id": 154738784,
        "sender_full_name": "Ardon Toonstra",
        "timestamp": 1547052847
    },
    {
        "content": "<p>Regarding the HAPI implementation, unfortunatly, I am not the right person to give advice. I would expect that you can use all the FHIR profiles created. They are not depended on Vonk, or any particular server.</p>",
        "id": 154738957,
        "sender_full_name": "Ardon Toonstra",
        "timestamp": 1547052994
    },
    {
        "content": "<p>In addition: I think the Github link that syncs Github stuff into Simplifier, causes the StructureDefinition.meta.versionId to be static unless we update that manually. The only thing we update however is the StructureDefinition.version, which should not be the same for any profile in the retired project NictizSTU3 and the active project NictizSTU3-Zib2017.</p>",
        "id": 154739092,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1547053103
    },
    {
        "content": "<p>Suppose my guess for StructureDefinition.meta.versionId is right: would we need to flag this as an issue for Firely <span class=\"user-mention\" data-user-id=\"192301\">@Ardon Toonstra</span> ? It sort of makes sense that Simplifier does not update content while syncing, but on other hand it also limits the use of SD.meta.versionId and .lastUpdated. We might as well remove that entirely so as to avoid misunderstanding.</p>",
        "id": 154739291,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1547053251
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"192301\">@Ardon Toonstra</span> and <span class=\"user-mention\" data-user-id=\"191375\">@Alexander Henket</span> . I think now we are getting in more than just 1 discussion.. ;-), so I will only forcus on mine. What we found out is that the same nl-profiles do work in Vonk and they do not in HAPI. We have no clue about versioning in Github or Simplifier and old (or not so old) STU3 or NictizSTU3 or NictizSTU3-Zib2017 versions. We only hope there is one single version that does the trick for both Vonk as well as for HAPI.. :-)</p>",
        "id": 154821833,
        "sender_full_name": "Jan-Marc Verlinden",
        "timestamp": 1547105727
    },
    {
        "content": "<p>Sure, well we only supply exactly one version which works in Vonk and the Aegis Touchstone environments. If HAPI doesn't work, then this might be because we asked Aegis to tweak a few shortcomings of the STU3 validator. Disable broken invariants and improved sliced validation. These changes have been included in some cases in the official R4 validator that supports STU3 too. I do not know what validator code HAPI carries. My suggestion would be to ask on the conformance stream and include James Agnew in that.</p>",
        "id": 154824155,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1547109124
    },
    {
        "content": "<p>On the other hand I'm not sure what the exact problems are you are running into. In principle you should assume there should be no difference between the tools, but in practice you'll find that each tool has its strongholds and pitfalls</p>",
        "id": 154824272,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1547109311
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"197712\">@Jan-Marc Verlinden</span> have you uploaded the Dutch profiles to <code>http://hapi.fhir.org/baseDstu3/StructureDefinition</code> ?</p>",
        "id": 154824749,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1547110033
    },
    {
        "content": "<p>I don't think <a href=\"http://hapi.fhir.org\" target=\"_blank\" title=\"http://hapi.fhir.org\">hapi.fhir.org</a> by default mirrors Simplifier or <a href=\"http://registry.fhir.org\" target=\"_blank\" title=\"http://registry.fhir.org\">registry.fhir.org</a>, so expecting the content to be there as well won't work</p>",
        "id": 154824758,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1547110057
    }
]