[
    {
        "content": "<p>Hi, I was wondering whether it's allowed to have more than one target profile specified for a reference. Like so:<br>\n&lt;element id=\"Encounter.location.location\"&gt;<br>\n            &lt;path value=\"Encounter.location.location\"/&gt;<br>\n            &lt;type&gt;<br>\n                &lt;code value=\"Reference\"/&gt;<br>\n                &lt;targetProfile value=\"http://cihi.ca/fhir/irrs/StructureDefinition/irrs-location-mis-code\"/&gt;<br>\n                &lt;aggregation value=\"contained\"/&gt;<br>\n            &lt;/type&gt;<br>\n            &lt;type&gt;<br>\n                &lt;code value=\"Reference\"/&gt;<br>\n                &lt;targetProfile value=\"http://cihi.ca/fhir/irrs/StructureDefinition/irrs-location-bed-type\"/&gt;<br>\n                &lt;aggregation value=\"contained\"/&gt;<br>\n            &lt;/type&gt;<br>\n            &lt;mustSupport value=\"true\"/&gt;<br>\n        &lt;/element&gt;</p>",
        "id": 153921876,
        "sender_full_name": "Ross Shnaper",
        "timestamp": 1511887781
    },
    {
        "content": "<p>Yes, that's allowed.  Doing this would mean that there's a choice of instances that match the first profile and instances that match the second profile.</p>",
        "id": 153921877,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1511887871
    },
    {
        "content": "<p>That's weird because the validator always uses the first profile which has a different binding for Location.type and complains about the codes not being from that value set.</p>",
        "id": 153921878,
        "sender_full_name": "Ross Shnaper",
        "timestamp": 1511887946
    },
    {
        "content": "<p>Not sure why.  It <em>should</em> try validating against both and if it's valid against one, not complain about the other.  If that's not what you're seeing, then submit a change request with the problematic instance and profile attached.</p>",
        "id": 153921881,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1511888210
    },
    {
        "content": "<p>Thanks Lloyd, I just dug into the code and confirmed that is indeed a bug. I'll submit a change request.</p>",
        "id": 153921894,
        "sender_full_name": "Ross Shnaper",
        "timestamp": 1511890274
    },
    {
        "content": "<p>If you feel comfortable identifying the specific fix, that'd be even more welcome :)</p>",
        "id": 153921902,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1511891906
    },
    {
        "content": "<p>I might do just that ;) Still waiting to get access to GForge so that I can submit a ticket :/</p>",
        "id": 153922480,
        "sender_full_name": "Ross Shnaper",
        "timestamp": 1512105856
    },
    {
        "content": "<p>There are no pending users listed - check your spam folder for the registration response.</p>",
        "id": 153922537,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1512111636
    }
]