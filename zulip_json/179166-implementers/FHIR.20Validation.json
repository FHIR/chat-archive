[
    {
        "content": "<p>Hello, I can't seem to get the validation tools to work with a custom profile / structure definition. When I try;</p>\n<p>java -jar org.hl7.fhir.validator.jar patient.xml -defn validation-min.xml.zip -profile SitekitPatient.structuredefinition.xml</p>\n<p>I get a \"java.lang.IndexOutOfBoundsException\". My patient resource and profile definition are very simple.</p>",
        "id": 153854012,
        "sender_full_name": "Rob Walker",
        "timestamp": 1477340334
    },
    {
        "content": "<p>Patient resource example;</p>\n<p>&lt;Patient xmlns=\"<a href=\"http://hl7.org/fhir\" target=\"_blank\" title=\"http://hl7.org/fhir\">http://hl7.org/fhir</a>\"&gt;<br>\n  &lt;id value=\"example\"/&gt;<br>\n  &lt;gender value=\"male\"/&gt;<br>\n&lt;/Patient&gt;</p>",
        "id": 153854013,
        "sender_full_name": "Rob Walker",
        "timestamp": 1477340602
    },
    {
        "content": "<p>Profile example;<br>\n&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;<br>\n&lt;StructureDefinition xmlns=\"<a href=\"http://hl7.org/fhir\" target=\"_blank\" title=\"http://hl7.org/fhir\">http://hl7.org/fhir</a>\"&gt;<br>\n  &lt;meta&gt;<br>\n    &lt;lastUpdated value=\"2016-10-24T20:24:09.779+01:00\" /&gt;<br>\n  &lt;/meta&gt;<br>\n  &lt;url value=\"<a href=\"http://sitekit.net/fhir/patient\" target=\"_blank\" title=\"http://sitekit.net/fhir/patient\">http://sitekit.net/fhir/patient</a>\" /&gt;<br>\n  &lt;name value=\"SK-Patient\" /&gt;<br>\n  &lt;status value=\"draft\" /&gt;<br>\n  &lt;fhirVersion value=\"1.0.2\" /&gt;<br>\n  &lt;kind value=\"resource\" /&gt;<br>\n  &lt;constrainedType value=\"Patient\" /&gt;<br>\n  &lt;abstract value=\"false\" /&gt;<br>\n  &lt;base value=\"<a href=\"http://hl7.org/fhir/StructureDefinition/Patient\" target=\"_blank\" title=\"http://hl7.org/fhir/StructureDefinition/Patient\">http://hl7.org/fhir/StructureDefinition/Patient</a>\" /&gt;<br>\n  &lt;differential&gt;<br>\n    &lt;element&gt;<br>\n      &lt;path value=\"Patient\" /&gt;<br>\n      &lt;type&gt;<br>\n        &lt;code value=\"Patient\" /&gt;<br>\n      &lt;/type&gt;<br>\n    &lt;/element&gt;<br>\n    &lt;element&gt;<br>\n      &lt;path value=\"Patient.gender\" /&gt;<br>\n      &lt;min value=\"1\" /&gt;<br>\n      &lt;fixedCode value=\"male\" /&gt;<br>\n    &lt;/element&gt;<br>\n  &lt;/differential&gt;<br>\n&lt;/StructureDefinition&gt;</p>",
        "id": 153854015,
        "sender_full_name": "Rob Walker",
        "timestamp": 1477340676
    },
    {
        "content": "<p>I've also tried to validate via <a href=\"http://fhir2.healthintersections.com.au/open/Patient/$validate?profile=http://hl7.org/fhir/StructureDefinition/SitekitPatient\" target=\"_blank\" title=\"http://fhir2.healthintersections.com.au/open/Patient/$validate?profile=http://hl7.org/fhir/StructureDefinition/SitekitPatient\">http://fhir2.healthintersections.com.au/open/Patient/$validate?profile=http://hl7.org/fhir/StructureDefinition/SitekitPatient</a> (having managed to successfully post the structure definition in an earlier request). I get back a http 500 Access violation at address 0000000000A8EE60 in module 'FHIRServer.exe'. Read of address 0000000000000060</p>",
        "id": 153854017,
        "sender_full_name": "Rob Walker",
        "timestamp": 1477340851
    },
    {
        "content": "<p>I tried something similar with the Hapi server (<a href=\"http://fhirtest.uhn.ca/baseDstu2\" target=\"_blank\" title=\"http://fhirtest.uhn.ca/baseDstu2\">http://fhirtest.uhn.ca/baseDstu2</a>), but couldn't manage to POST my StructureDefinition profile - the server returned HTTP 500 : Failed to call access method.</p>",
        "id": 153854020,
        "sender_full_name": "Rob Walker",
        "timestamp": 1477341027
    },
    {
        "content": "<p>I ill try and get to this in about 24 hours time</p>",
        "id": 153854076,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1477387180
    },
    {
        "content": "<p>Nice one, thanks Grahame.</p>",
        "id": 153854219,
        "sender_full_name": "Rob Walker",
        "timestamp": 1477422827
    },
    {
        "content": "<p>I just noticed today (or rather, someone in my tutorial did) that the server updates a resouce, when the $validate-Operation is called and passes. I don't think thats what the operation is supposed to do...?</p>",
        "id": 153854352,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1477498972
    },
    {
        "content": "<p>Which server?</p>",
        "id": 153854355,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1477502266
    },
    {
        "content": "<p>Grahame's DSTU2 endpoint</p>",
        "id": 153854521,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1477568454
    },
    {
        "content": "<p>hmm. can you create a bug report on <a href=\"https://github.com/grahamegrieve/fhirserver\" target=\"_blank\" title=\"https://github.com/grahamegrieve/fhirserver\">https://github.com/grahamegrieve/fhirserver</a> please</p>",
        "id": 153854524,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1477570685
    },
    {
        "content": "<p>um. no. <br>\nCould not reproduce. </p>",
        "id": 153854605,
        "sender_full_name": "Simone Heckmann",
        "timestamp": 1477670399
    },
    {
        "content": "<p>Is there a definitive list anywhere which describes all of the things that a validation routine should check?</p>",
        "id": 153855953,
        "sender_full_name": "Tim Coates",
        "timestamp": 1478604419
    },
    {
        "content": "<p>no. There isn't. Partly because there can be no definitive list, and also because it would be (a) lots of work and (b) quite duplicative. </p>",
        "id": 153855955,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1478604542
    },
    {
        "content": "<p>the reference validation routines are in the java build tool that are made available as the validator. This is the most complete documentation there is </p>",
        "id": 153855956,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1478604568
    },
    {
        "content": "<p>But (AFAIK) the source code for the validator isn't released, so the only validation possible is to use the compiled validator? Agree that recreating one it could be a duplication of effort, but I'm surprised it's not even possible.</p>",
        "id": 153855957,
        "sender_full_name": "Tim Coates",
        "timestamp": 1478605445
    },
    {
        "content": "<p>I didn't say it wasn't possible. Just that we hadn't done it. </p>",
        "id": 153855959,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1478606132
    },
    {
        "content": "<p>and of course the validator source is released. </p>",
        "id": 153855960,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1478606133
    },
    {
        "content": "<p><a href=\"http://gforge.hl7.org/svn/fhir/trunk/build/implementations/java/org.hl7.fhir.dstu3/src/org/hl7/fhir/dstu3/validation/InstanceValidator.java\" target=\"_blank\" title=\"http://gforge.hl7.org/svn/fhir/trunk/build/implementations/java/org.hl7.fhir.dstu3/src/org/hl7/fhir/dstu3/validation/InstanceValidator.java\">http://gforge.hl7.org/svn/fhir/trunk/build/implementations/java/org.hl7.fhir.dstu3/src/org/hl7/fhir/dstu3/validation/InstanceValidator.java</a></p>",
        "id": 153855961,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1478606163
    },
    {
        "content": "<p>I'm sorry, that was clearly my misunderstanding.</p>",
        "id": 153855971,
        "sender_full_name": "Tim Coates",
        "timestamp": 1478611482
    },
    {
        "content": "<p>social &gt; FHIR validation Today</p>\n<p>Mitul Adhia: Hello ,</p>\n<p>Currently i am trying validator.zip to validate against the profile which i have publish on my web server(tomcat local server). Also in resource i have changed the meta profile to the web server url but it is not validating the resouce against the said profile ..</p>\n<p>java -jar validator/org.hl7.fhir.validator.jar patient.xml -profile <a href=\"http://localhost:8888/WebApplication1/patient_profile.xml\" target=\"_blank\" title=\"http://localhost:8888/WebApplication1/patient_profile.xml\">http://localhost:8888/WebApplication1/patient_profile.xml</a></p>\n<p>It returns error <br>\nFAILURE validating patient.xml: error:1 warn:1 info:0<br>\nError @ Patient (line 1, col76) : StructureDefinition reference \"<a href=\"http://localhost:8888/WebApplication1/patient_profile.xml\" target=\"_blank\" title=\"http://localhost:8888/WebApplication1/patient_profile.xml\">http://localhost:8888/WebApplication1/patient_profile.xml</a>\" could not be resolved<br>\nWarning @ Patient.meta.profile[0] (line 1, col76) : StructureDefinition reference \"<a href=\"http://localhost:8888/WebApplication1/patient_profile.xml\" target=\"_blank\" title=\"http://localhost:8888/WebApplication1/patient_profile.xml\">http://localhost:8888/WebApplication1/patient_profile.xml</a>\" could not be resolved</p>",
        "id": 153894330,
        "sender_full_name": "Mitul Adhia",
        "timestamp": 1497871837
    },
    {
        "content": "<p>hm. I don't think I've got around to actually fetching structure definitions yet. can you make a task for me to do that? I'll try and get to it this week</p>",
        "id": 153894337,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1497874148
    },
    {
        "content": "<p>Sure ...</p>\n<p>Consider the example given in the link <a href=\"https://www.hl7.org/fhir/validation.html\" target=\"_blank\" title=\"https://www.hl7.org/fhir/validation.html\">https://www.hl7.org/fhir/validation.html</a></p>\n<p>Is it possible to validate the resource against a profile saved locally on my system ?<br>\nIn the above mention link the profile definitions are packed in zip file . If i do not change anything inside the profile definition  validation of resource goes fine .But in case I do change in the cardinality inside heartrate profile (defined inside profiles-others.xml within definitions.xml.zip) and run the validation still the result is success . Instead I would expect that the validation should report error saying required elements were not found , etc ..in case i change the cardinality in profile and do not pass it in resource .</p>\n<p>java -jar validator/org.hl7.fhir.validator.jar observation-example-heart-rate.xml -defn definitions.xml.zip</p>\n<p>So my question ares <br>\n1)  whether local validation of resource against the profiles saved locally are supported or not ?<br>\n2) In case if i keep my profile on any test server (locally in tomcat) then whether it is possible to test against that profile .What changes I have to adapt it ?</p>\n<p>java -jar validator/org.hl7.fhir.validator.jar patient.xml  -profile <a href=\"http://localhost:8888/WebApplication1/patient_profile.xml\" target=\"_blank\" title=\"http://localhost:8888/WebApplication1/patient_profile.xml\">http://localhost:8888/WebApplication1/patient_profile.xml</a></p>\n<p>Best Regards,<br>\nMitul</p>",
        "id": 153894361,
        "sender_full_name": "Mitul Adhia",
        "timestamp": 1497880603
    },
    {
        "content": "<p>should be fixed now in the latest validator from <a href=\"http://build.fhir.org\" target=\"_blank\" title=\"http://build.fhir.org\">build.fhir.org</a></p>",
        "id": 153894646,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1498014832
    },
    {
        "content": "<p>Ok will download the validator.zip and re run the scenario ..</p>\n<p>So in case if I have profile saved locally will it be possible to test a resource against that ?</p>",
        "id": 153894659,
        "sender_full_name": "Mitul Adhia",
        "timestamp": 1498026457
    },
    {
        "content": "<p>yes</p>",
        "id": 153894660,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1498026478
    },
    {
        "content": "<p>-profile {your profile url]</p>",
        "id": 153894662,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1498026489
    },
    {
        "content": "<p>if the profile isn't actually available at it's canonical URL:</p>",
        "id": 153894663,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1498026504
    },
    {
        "content": "<p>-profile [your profile url] @ [the actual location]</p>",
        "id": 153894664,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1498026523
    },
    {
        "content": "<p>actual location can be a file name or a url </p>",
        "id": 153894665,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1498026537
    },
    {
        "content": "<p>If it is file system then C:\\test\\myprofile.xml ?</p>",
        "id": 153894666,
        "sender_full_name": "Mitul Adhia",
        "timestamp": 1498026557
    },
    {
        "content": "<p>yes </p>",
        "id": 153894667,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1498026581
    },
    {
        "content": "<p>Can i test this in json format ?</p>",
        "id": 153894668,
        "sender_full_name": "Mitul Adhia",
        "timestamp": 1498026693
    },
    {
        "content": "<p>I tested that but facing issue shown below ..<br>\njava -jar validator/org.hl7.fhir.validator.jar observation-example-heart-rate.xml -profile C:/ebooks/FHIR/examples/heart_rate_profile.xml</p>\n<p>Exception in thread \"main\" java.lang.Error: org.hl7.fhir.exceptions.FHIRException: fetching org.hl7.fhir.dstu3.model.StructureDefinition not done yet for URI 'C:/ebooks/FHIR/examples/heart_rate_profile.xml'<br>\n        at org.hl7.fhir.dstu3.context.SimpleWorkerContext.fetchResource(SimpleWorkerContext.java:378)<br>\n        at org.hl7.fhir.dstu3.validation.InstanceValidator$ResourceProfiles.addProfile(InstanceValidator.java:238)<br>\n        at org.hl7.fhir.dstu3.validation.InstanceValidator$ResourceProfiles.addProfiles(InstanceValidator.java:228)<br>\n        at org.hl7.fhir.dstu3.validation.InstanceValidator.validateResource(InstanceValidator.java:3398)<br>\n        at org.hl7.fhir.dstu3.validation.InstanceValidator.validate(InstanceValidator.java:532)<br>\n        at org.hl7.fhir.dstu3.validation.InstanceValidator.validate(InstanceValidator.java:382)<br>\n        at org.hl7.fhir.dstu3.validation.ValidationEngine.validate(ValidationEngine.java:473)<br>\n        at org.hl7.fhir.dstu3.validation.ValidationEngine.validate(ValidationEngine.java:401)<br>\n        at org.hl7.fhir.dstu3.validation.Validator.main(Validator.java:248)<br>\nCaused by: org.hl7.fhir.exceptions.FHIRException: fetching org.hl7.fhir.dstu3.model.StructureDefinition not done yet for URI 'C:/ebooks/FHIR/examples/heart_rate_profile.xml'<br>\n        at org.hl7.fhir.dstu3.context.SimpleWorkerContext.fetchResourceWithException(SimpleWorkerContext.java:448)<br>\n        at org.hl7.fhir.dstu3.context.SimpleWorkerContext.fetchResource(SimpleWorkerContext.java:376)<br>\n        ... 8 more</p>",
        "id": 153894676,
        "sender_full_name": "Mitul Adhia",
        "timestamp": 1498029658
    },
    {
        "content": "<p>what was your command line?</p>",
        "id": 153894677,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1498029684
    },
    {
        "content": "<p>java -jar validator/org.hl7.fhir.validator.jar observation-example-heart-rate.xml -profile C:/ebooks/FHIR/examples/heart_rate_profile.xml</p>",
        "id": 153894678,
        "sender_full_name": "Mitul Adhia",
        "timestamp": 1498029701
    },
    {
        "content": "<p>so you need to use the 2nd form:</p>\n<div class=\"codehilite\"><pre><span></span>-profile [url] @ C:/ebooks/FHIR/examples/heart_rate_profile.xml\n</pre></div>",
        "id": 153894680,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1498030715
    },
    {
        "content": "<p>java -jar org.hl7.fhir.validator.jar observation-example-heart-rate.xml -profile [http://hl7.org/fhir/StructureDefinition/heartrate] @ C:/ebooks/FHIR/examples/heart_rate_profile.xml</p>",
        "id": 153894683,
        "sender_full_name": "Mitul Adhia",
        "timestamp": 1498032528
    },
    {
        "content": "<p>Exception in thread \"main\" java.io.IOException: File @ does not exist<br>\n        at org.hl7.fhir.dstu3.validation.ValidationEngine.handleSource(ValidationEngine.java:443)<br>\n        at org.hl7.fhir.dstu3.validation.ValidationEngine.handleSources(ValidationEngine.java:418)<br>\n        at org.hl7.fhir.dstu3.validation.ValidationEngine.validate(ValidationEngine.java:396)<br>\n        at org.hl7.fhir.dstu3.validation.Validator.main(Validator.java:248)</p>",
        "id": 153894684,
        "sender_full_name": "Mitul Adhia",
        "timestamp": 1498032541
    },
    {
        "content": "<p>Same issue if I run : java -jar org.hl7.fhir.validator.jar observation-example-heart-rate.xml -profile [url] @ C:/ebooks/FHIR/examples/heart_rate_profile.xml</p>",
        "id": 153894685,
        "sender_full_name": "Mitul Adhia",
        "timestamp": 1498034734
    },
    {
        "content": "<p>Looks like character @ is used as File location </p>",
        "id": 153894686,
        "sender_full_name": "Mitul Adhia",
        "timestamp": 1498034766
    },
    {
        "content": "<p>i don't understand that</p>",
        "id": 153894688,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1498035048
    },
    {
        "content": "<p>what happens if you don't use the []</p>",
        "id": 153894689,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1498035063
    },
    {
        "content": "<p>After running command without [] same issue as above ..</p>\n<p>ava -jar org.hl7.fhir.validator.jar observation-example-heart-rate.xml -profile url @ C:/ebooks/FHIR/examples/heart_rate_profile.xml</p>",
        "id": 153894690,
        "sender_full_name": "Mitul Adhia",
        "timestamp": 1498035319
    },
    {
        "content": "<p>Is the official Java implementation of the FHIR validator a stand-alone tool? Every time I run it, it connects to a server, even though I've downloaded the definition file locally. Here's the command I'm using: </p>\n<p>```</p>\n<p>$ java -jar validator/org.hl7.fhir.validator.jar my_patient.json -defn definitions.xml.zip <br>\n  .. load FHIR from definitions.xml.zip<br>\n  .. connect to tx server @ <a href=\"http://tx.fhir.org/r3\" target=\"_blank\" title=\"http://tx.fhir.org/r3\">http://tx.fhir.org/r3</a></p>\n<div class=\"codehilite\"><pre><span></span>\n</pre></div>",
        "id": 153894755,
        "sender_full_name": "Craig Finch",
        "timestamp": 1498059397
    },
    {
        "content": "<p>The terminology server is used to expand value sets and be able to validate codes.  Value sets based on code systems like SNOMED can't necessarily be enumerated, so you need a service to evaluate them.  You can explicitly set the terminology server to \"na\" as a command-line parameter if you want to run stand-alone.  However, if you don't have embedded expansions for all of your value sets, you won't be able to validate codes against the value sets that are missing embedded expansions.</p>",
        "id": 153894784,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1498064028
    },
    {
        "content": "<p>Does the Java app send any or all of my FHIR document to the server, or does it only request validation of codes? I ask because I'm in the United States and subject to HIPAA, which forbids sending protected health information to outside parties. I need to know if I can run the Java validator on \"production\" FHIR data that may contain actual patient health information. </p>",
        "id": 153894968,
        "sender_full_name": "Craig Finch",
        "timestamp": 1498148381
    },
    {
        "content": "<p>It only validates codes.  The only thing going over the wire would be codes, display names, code system URIs and value set URIs (possibly collected together into batches.)  That said, it's possible that there could be a leak of information.  If an attacker knew someone was visiting a particular clinic and were to monitor (typically non-encrypted) vocabulary look-up calls, it's possible that by combining the calls with known information, additional insights could be gained.  <span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span>, any thoughts on this?</p>",
        "id": 153894985,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1498156521
    },
    {
        "content": "<p>If the system works as Lloyd describes, then one could show that this is a properly de-identified dataset. As Lloyd points out, there are some indirect identifiers, specifically in the traffic analysis (where is the request from, and when) which could be coorelated to patient visit. Especially if the service was used in realtime, vs batched with a bulk of the days work.  A trick that could be used, but might also invalidate the use as a FHIR validator is 'differential privacy' where noise is added.  As I said, if the system works as Lloyd has described. A proper de-identification analysis would do a system inspection to assure it functions as expected.   This is not a de-identification tutorial... so specific PIA should be done.   See my article and others on De-Identification <a href=\"https://healthcaresecprivacy.blogspot.com/2013/05/de-identification-data-chemistry.html\" target=\"_blank\" title=\"https://healthcaresecprivacy.blogspot.com/2013/05/de-identification-data-chemistry.html\">https://healthcaresecprivacy.blogspot.com/2013/05/de-identification-data-chemistry.html</a></p>",
        "id": 153894987,
        "sender_full_name": "John Moehrke",
        "timestamp": 1498157353
    },
    {
        "content": "<p>Thank you for the detailed response. At this point, I just foresee developers using it by hand during debugging or troubleshooting, so I'm not as concerned about the sort of sophisticated correlation attack that may be possible if it were used to validate \"real time\" production data.</p>",
        "id": 153894988,
        "sender_full_name": "Craig Finch",
        "timestamp": 1498157543
    },
    {
        "content": "<p>I've been experimenting with the Java validator and using <a href=\"http://tx.fhir.org/r3\" target=\"_blank\" title=\"http://tx.fhir.org/r3\">http://tx.fhir.org/r3</a> to validate FHIR. I've noticed differences between them. There are some cases in which the Java validator crashes, but the reference API validates the JSON. In other cases, the Java app complains when the API doesn't. Any suggestions?</p>",
        "id": 153894990,
        "sender_full_name": "Craig Finch",
        "timestamp": 1498157777
    },
    {
        "content": "<p>The other possibility is to set up your own terminology server that you talk to in-house</p>",
        "id": 153894992,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1498157969
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> I would definitely set up my own in-house terminology server if we were going to validate large quantities of messages. Any thoughts about what to do when the reference API server's validation differs from the Java tool?</p>",
        "id": 153895000,
        "sender_full_name": "Craig Finch",
        "timestamp": 1498160626
    },
    {
        "content": "<p>ask us here</p>",
        "id": 153895001,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1498161686
    },
    {
        "content": "<p>but the java validation is correct. updating the validation running on the server is on my todo list</p>",
        "id": 153895002,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1498161710
    },
    {
        "content": "<p>Thank you. Next week, I may have some time to put together some JSON examples that are valid JSON and appear to be valid FHIR, but crash the Java tool.</p>",
        "id": 153895009,
        "sender_full_name": "Craig Finch",
        "timestamp": 1498162605
    },
    {
        "content": "<p>great</p>",
        "id": 153895012,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1498163069
    },
    {
        "content": "<p>I'll add them to the test cases if you contribute them</p>",
        "id": 153895013,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1498163090
    },
    {
        "content": "<p>Hi all,when I am trying to validate a profile  java -jar validator/org.hl7.fhir.validator.jar diagnosticreport-example.xml -profile @ C:\\Users\\User\\Documents\\Forge\\CBC_Panel.structuredefinition.xml ,an exception is getting displayed as in the screenshot below</p>\n<p><a href=\"/user_uploads/10155/us5mvYHfHXFzzz3StPscYCgl/validation-exception.PNG\" target=\"_blank\" title=\"validation-exception.PNG\">validation-exception.PNG</a> <br>\nPlease suggest me any solution. Thank you</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/us5mvYHfHXFzzz3StPscYCgl/validation-exception.PNG\" target=\"_blank\" title=\"validation-exception.PNG\"><img src=\"/user_uploads/10155/us5mvYHfHXFzzz3StPscYCgl/validation-exception.PNG\"></a></div>",
        "id": 153895066,
        "sender_full_name": "Pranitha Sruthi",
        "timestamp": 1498221267
    },
    {
        "content": "<p>java can't find your file... a path/current directory issue.</p>",
        "id": 153895134,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1498253169
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> Thanks for your response.  How can I fix it?</p>",
        "id": 153895270,
        "sender_full_name": "Pranitha Sruthi",
        "timestamp": 1498537397
    },
    {
        "content": "<p>Where do i find list of all FHIR resources name for STU-3 release? currently i am checking manually one-by one from <a href=\"https://www.hl7.org/fhir/resourcelist.html\" target=\"_blank\" title=\"https://www.hl7.org/fhir/resourcelist.html\">https://www.hl7.org/fhir/resourcelist.html</a>.</p>\n<p>I have generated Java Classes from FHIR XSD, will any generated class help me to get FHIR resources name? </p>",
        "id": 153895271,
        "sender_full_name": "suresh sargar",
        "timestamp": 1498540933
    },
    {
        "content": "<p>I don't understand what you mean 'get the name'?</p>",
        "id": 153895273,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1498544637
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  currently i have lookup list where i have to maintain resource name list manually. so i will fetch each resource one-by-one load that class using Reflection API and get the fields.</p>\n<p>i want to know if there is any class where i can get list of resource name so that i can avoid lookup dependency and which will be more correct.</p>",
        "id": 153895280,
        "sender_full_name": "suresh sargar",
        "timestamp": 1498546734
    },
    {
        "content": "<p>what name? the name in the xsd that you generated from? </p>",
        "id": 153895281,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1498546759
    },
    {
        "content": "<p>Yes ,XSD generates &lt;ResourceName&gt;.java  e.g for  Patient  it's Patient.java and same for all other resources. now if i get list which will have all the names i can iterate through one by one.</p>",
        "id": 153895282,
        "sender_full_name": "suresh sargar",
        "timestamp": 1498546917
    },
    {
        "content": "<p>well, you could easily generate that list from the xsd too. Or you could generate it from profiles-resources.xml, which is in the downloads from the spec. </p>",
        "id": 153895283,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1498548324
    },
    {
        "content": "<p>or you should just use HAPI - which I highly recommend, since it sounds like you don't have a lot of experience with generating code?</p>",
        "id": 153895284,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1498548353
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> ,<br>\nI downloaded the latest FHIR validator today from <a href=\"http://build.fhir.org/downloads.html\" target=\"_blank\" title=\"http://build.fhir.org/downloads.html\">http://build.fhir.org/downloads.html</a></p>\n<p>But I am getting the following error from that <br>\n.<br>\n.<br>\n  .. load FHIR from definitions.xml.zip<br>\n  .. connect to tx server @ <a href=\"http://tx.fhir.org/r3\" target=\"_blank\" title=\"http://tx.fhir.org/r3\">http://tx.fhir.org/r3</a><br>\nException in thread \"main\" java.lang.Error: Missing <a href=\"http://version.info\" target=\"_blank\" title=\"http://version.info\">version.info</a>?<br>\n        at org.hl7.fhir.r4.validation.ValidationEngine.getVersionFromPack(ValidationEngine.java:210)<br>\n        at org.hl7.fhir.r4.validation.ValidationEngine.loadDefinitions(ValidationEngine.java:185)<br>\n        at org.hl7.fhir.r4.validation.ValidationEngine.&lt;init&gt;(ValidationEngine.java:178)<br>\n        at org.hl7.fhir.r4.validation.Validator.main(Validator.java:249)</p>\n<p>.<br>\n.<br>\nIs it an issue with the validator or i am not using the right command?</p>",
        "id": 153895337,
        "sender_full_name": "Vikas Mittal",
        "timestamp": 1498612807
    },
    {
        "content": "<p>Use the igpack.zip corresponding to the FHIR version that you are using.</p>",
        "id": 153895463,
        "sender_full_name": "Anand Mohan Tumuluri",
        "timestamp": 1498663447
    },
    {
        "content": "<p>Thanks heaps Anand. I did try that. There were some other issues with that. logged here <a href=\"https://chat.fhir.org/#narrow/near/83314/stream/implementers/topic/Using.20the.20FHIR.20validator\" target=\"_blank\" title=\"https://chat.fhir.org/#narrow/near/83314/stream/implementers/topic/Using.20the.20FHIR.20validator\">https://chat.fhir.org/#narrow/near/83314/stream/implementers/topic/Using.20the.20FHIR.20validator</a></p>\n<p>Then i saw a conversation here so thought of trying that <br>\n<a href=\"https://chat.fhir.org/#narrow/near/83726/stream/implementers/topic/FHIR.20validation\" target=\"_blank\" title=\"https://chat.fhir.org/#narrow/near/83726/stream/implementers/topic/FHIR.20validation\">https://chat.fhir.org/#narrow/near/83726/stream/implementers/topic/FHIR.20validation</a></p>\n<p>Then got this issue! :(<br>\n<a href=\"https://chat.fhir.org/#narrow/near/84702/stream/implementers/topic/FHIR.20validation\" target=\"_blank\" title=\"https://chat.fhir.org/#narrow/near/84702/stream/implementers/topic/FHIR.20validation\">https://chat.fhir.org/#narrow/near/84702/stream/implementers/topic/FHIR.20validation</a></p>",
        "id": 153895590,
        "sender_full_name": "Vikas Mittal",
        "timestamp": 1498710529
    },
    {
        "content": "<p>Can instances have a reference to their StructureDefinition, in other words can an instance claim conformance? I understand that it is very useful to validate instances against some profile, instances can be compliant to multiple profiles. I suspect there is a very good reason not to include a reference back to the profile, but I forgot.</p>",
        "id": 153897604,
        "sender_full_name": "Michael van der Zel",
        "timestamp": 1500625808
    },
    {
        "content": "<p>I think you're looking for <a href=\"http://www.hl7.org/fhir/resource-definitions.html#Meta.profile\" target=\"_blank\" title=\"http://www.hl7.org/fhir/resource-definitions.html#Meta.profile\">http://www.hl7.org/fhir/resource-definitions.html#Meta.profile</a> ?</p>",
        "id": 153897606,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1500630869
    },
    {
        "content": "<p>Yes! Now I remember. Wisdom of the crowd.</p>",
        "id": 153897608,
        "sender_full_name": "Michael van der Zel",
        "timestamp": 1500631819
    },
    {
        "content": "<p>note that resources can claim to conform to a profile, but that might be a lie. If a server needs resources that conform to a particular profile, it can simply verify that they do, irrespective of what they claim</p>",
        "id": 153897615,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1500634046
    },
    {
        "content": "<p>where making the claim becomes useful is to save processing time, and to find the relevant resources - so making the claim is a denormalization for preformance reasons. That's a perfectly valid thing to do, but often people seem to think there is more to it than that</p>",
        "id": 153897616,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1500634099
    },
    {
        "content": "<p>Would it be a use of Provenance? That is a server that has validated the profiles, can make a Provenance statement? This has not been modeled, but wouldn't take much to do... if it is useful</p>",
        "id": 153897659,
        "sender_full_name": "John Moehrke",
        "timestamp": 1500638616
    },
    {
        "content": "<p>actually, that could be useful. Do you want to knock up an example?</p>",
        "id": 153898024,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1500969049
    },
    {
        "content": "<p>create a GF task...  :-)</p>",
        "id": 153898080,
        "sender_full_name": "John Moehrke",
        "timestamp": 1500992202
    },
    {
        "content": "<p>Hi, I'm new to this FHIR chat so sorry if this question has already been asked.</p>\n<p>In another stream I asked about experience with the Newtonsoft's JSchema JSON validator.   Is the discussion here about FHIR JSON schema validation or something else?   If you have experience with FHIR JSON schema validation can you take a look at the topic I started titled \"FHIR JSON Schema Validation\"?   <br>\nThanks in advance,<br>\n   John</p>",
        "id": 153898085,
        "sender_full_name": "John Silva",
        "timestamp": 1500994480
    },
    {
        "content": "<p>I download the offical FHIR Validator (validator.zip) from <a href=\"http://build.fhir.org/downloads.html\" target=\"_blank\" title=\"http://build.fhir.org/downloads.html\">http://build.fhir.org/downloads.html</a></p>\n<p>The readme within the zip file references <br>\n- Class org.hl7.fhir.tools.validator.Validator<br>\nwhich does not exist within the jar. </p>\n<p>Does anyone know if there is updated readme or is there other instructions for use published that I could access?</p>",
        "id": 153964138,
        "sender_full_name": "Joyce Dunlop",
        "timestamp": 1527016451
    },
    {
        "content": "<p>I just downloaded it, and it says org.hl7.fhir.r4.validation.ValidationEngine which is correct</p>",
        "id": 153964141,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527016819
    },
    {
        "content": "<p>From: <a href=\"http://build.fhir.org/validator.zip\" target=\"_blank\" title=\"http://build.fhir.org/validator.zip\">http://build.fhir.org/validator.zip</a></p>",
        "id": 153964142,
        "sender_full_name": "Joyce Dunlop",
        "timestamp": 1527016908
    },
    {
        "content": "<p>yes that's where I got it from</p>",
        "id": 153964143,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527016920
    },
    {
        "content": "<p>ah it's the /? command, not  the readme</p>",
        "id": 153964144,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527016962
    },
    {
        "content": "<p>should say org.hl7.fhir.r4.validation.ValidationEngine</p>",
        "id": 153964145,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527016970
    },
    {
        "content": "<p>Ok thanks</p>",
        "id": 153964146,
        "sender_full_name": "Joyce Dunlop",
        "timestamp": 1527017007
    },
    {
        "content": "<p>fixed - will take about 45min to be posted</p>",
        "id": 153964147,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527017074
    },
    {
        "content": "<p>Thanks Again!</p>",
        "id": 153964151,
        "sender_full_name": "Joyce Dunlop",
        "timestamp": 1527017127
    },
    {
        "content": "<p>Will there be a new Jar in the zip you uploaded.  I am not finding a validation engine in the jar I downloaded a few minutes ago.</p>",
        "id": 153964155,
        "sender_full_name": "Joyce Dunlop",
        "timestamp": 1527017777
    },
    {
        "content": "<p>I'm pretty sure it's there. how are you looking for it?</p>",
        "id": 153964157,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527017940
    },
    {
        "content": "<p>from within intellij  - the it did not resolve I opened the zip with 7-zip</p>",
        "id": 153964158,
        "sender_full_name": "Joyce Dunlop",
        "timestamp": 1527018083
    },
    {
        "content": "<p>and what did you see in 7-zip?</p>",
        "id": 153964159,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527018127
    },
    {
        "content": "<p>Directory org.hl7.fhir.r4.validation exists but no classes</p>",
        "id": 153964160,
        "sender_full_name": "Joyce Dunlop",
        "timestamp": 1527018164
    },
    {
        "content": "<p>I see org.hl7.fhir.validator.jar\\org\\hl7\\fhir\\r4\\validation\\InstanceValidator.class</p>",
        "id": 153964161,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527018217
    },
    {
        "content": "<p>let me delete what I have and get a fresh download</p>",
        "id": 153964162,
        "sender_full_name": "Joyce Dunlop",
        "timestamp": 1527018234
    },
    {
        "content": "<p>I see it in the jar now - thanks</p>",
        "id": 153964163,
        "sender_full_name": "Joyce Dunlop",
        "timestamp": 1527018488
    },
    {
        "content": "<p>great</p>",
        "id": 153964165,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527018577
    },
    {
        "content": "<p>Is there an igpack.zip file for us core profiles?  I found the validation.pack and format specific definitions, but neither of these work with the validation jar.</p>",
        "id": 153964365,
        "sender_full_name": "Joyce Dunlop",
        "timestamp": 1527096103
    },
    {
        "content": "<p>last time I used the validator I used it as follows:</p>\n<div class=\"codehilite\"><pre><span></span>java -jar {path}/validator/org.hl7.fhir.validator.jar {file to be validated} -defn{path/igpack.zip -ig {path}/output/validator.pack\n</pre></div>\n\n\n<p>There is no igpack.zip produced from the IG,  that is from the FHIR specification: <a href=\"http://hl7.org/fhir/igpack.zip\" target=\"_blank\" title=\"http://hl7.org/fhir/igpack.zip\"> Download Link</a></p>",
        "id": 153964378,
        "sender_full_name": "Eric Haas",
        "timestamp": 1527097610
    },
    {
        "content": "<p>you should now do this:</p>\n<div class=\"codehilite\"><pre><span></span>java -jar {path}/validator/org.hl7.fhir.validator.jar {file to be validated} -defn -hl7.fhir.core-3.0.1 -ig hl7.fhir.us.core-1.01\n</pre></div>",
        "id": 153964395,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527098820
    },
    {
        "content": "<p>the packages are [url]/package.tgz</p>",
        "id": 153964396,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527098833
    },
    {
        "content": "<p>the validation.pack was specifically designed for the validator, so it should work, but we are migrating to package.tgz now</p>",
        "id": 153964397,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527098870
    },
    {
        "content": "<p>Eric's version executed but did not provide the validation I expected.  Grahame,  I got an exception  without the -defn  igpack.zip  when I added it back I got the following <a href=\"/user_uploads/10155/I9p3aKxjvJqn7jdhFUPikatn/Error.txt\" target=\"_blank\" title=\"Error.txt\">Error.txt</a> .</p>",
        "id": 153964406,
        "sender_full_name": "Joyce Dunlop",
        "timestamp": 1527099843
    },
    {
        "content": "<p>Two more attempts<br>\n<a href=\"/user_uploads/10155/0DHUoYO4L3CZy5YuzElY8M3J/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/0DHUoYO4L3CZy5YuzElY8M3J/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/0DHUoYO4L3CZy5YuzElY8M3J/pasted_image.png\"></a></div>",
        "id": 153964422,
        "sender_full_name": "Joyce Dunlop",
        "timestamp": 1527101457
    },
    {
        "content": "<p>ok I just started a build - it will complete in about 20min - download and try again then</p>",
        "id": 153964500,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527116613
    },
    {
        "content": "<p>Is there any change the validator will be made available via Maven?</p>",
        "id": 153964513,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1527129423
    },
    {
        "content": "<p>yes, there's a non zero chance. What it actually is depends on whether someone wants to volunteer to help out making it happen</p>",
        "id": 153964514,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527130814
    },
    {
        "content": "<p>Happy to help :-)  Just need to know where / how to start</p>",
        "id": 153964521,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1527132251
    },
    {
        "content": "<ul>\n<li>I have experience in doing this for other projects, but not building the validator</li>\n</ul>",
        "id": 153964522,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1527132303
    },
    {
        "content": "<p>well, the validator is already built by a travis project, and posted to <a href=\"http://build.fhir.org\" target=\"_blank\" title=\"http://build.fhir.org\">build.fhir.org</a>. The question is, is a maven release done everytime, or is that something done manually.</p>",
        "id": 153964527,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527137716
    },
    {
        "content": "<p>Is Maven Central the target, or is there an HL7 / other maven repository to use?</p>",
        "id": 153964535,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1527140819
    },
    {
        "content": "<p>I don't think we have any standard</p>",
        "id": 153964540,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527141576
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191315\">@Josh Mandel</span> or <span class=\"user-mention\" data-user-id=\"191359\">@Bryn Rhodes</span> may have an opinion</p>",
        "id": 153964541,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527141596
    },
    {
        "content": "<p>Good Morning - I got the new zip - thanks you - Here are two more attempts.  I had cut/copied hl7.fhir.us.core-1.01 from earlier then tried it with hl7.fhir.us.core-1.0.1 neither seem to resolve. <a href=\"/user_uploads/10155/K2eGAZcA41aqt20tcotp-KQG/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/K2eGAZcA41aqt20tcotp-KQG/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/K2eGAZcA41aqt20tcotp-KQG/pasted_image.png\"></a></div>",
        "id": 153964605,
        "sender_full_name": "Joyce Dunlop",
        "timestamp": 1527171624
    },
    {
        "content": "<p>What is the difference between the Validator you release and discuss here and the one in the frameworks? I.g Hapi FHIR</p>",
        "id": 153964626,
        "sender_full_name": "Thomas Johansen",
        "timestamp": 1527183794
    },
    {
        "content": "<p>it's the same code base. HAPI generally releases a lot later than the validator, which is trunk.</p>",
        "id": 153964637,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527184702
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> , <span class=\"user-mention\" data-user-id=\"191343\">@Michael Lawley</span> we've done this for the UCUM validator, happy to do it for the validator as well. For the UCUM validator, we publish it to Maven Central under org.fhir. Would this be the same target?</p>",
        "id": 153964707,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1527198504
    },
    {
        "content": "<p>I guess so.</p>",
        "id": 153964713,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527201141
    },
    {
        "content": "<p>I would have expected org.hl7.fhir since that matches the internal package naming, but I'll defer to FHIR chiefs :)</p>",
        "id": 153964714,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1527201153
    },
    {
        "content": "<p>trouble for me is, I don't know how to push the ucum stuff, but that's pretty stable. The validator, on the other hand, we turn stuff around on that ASAP</p>",
        "id": 153964715,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527201173
    },
    {
        "content": "<p>well, I did rename the ucum package for that, so the ucum package is consistent. I'm not renaming the validator code</p>",
        "id": 153964716,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527201202
    },
    {
        "content": "<p>I don't think it needs to match</p>",
        "id": 153964717,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1527201227
    },
    {
        "content": "<p>There's a target in the mvn build that publishes, but there's also a manual step involving logging into the Sonatype repository. We could automate that step, but there's some research/development there.</p>",
        "id": 153964730,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1527201936
    },
    {
        "content": "<p>And just like the UCUM stuff, the validator would need to be broken out into it's own project.</p>",
        "id": 153964731,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1527201951
    },
    {
        "content": "<p>define 'own project'</p>",
        "id": 153964732,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527201972
    },
    {
        "content": "<p>but: I think I want to release the validator manually. probably</p>",
        "id": 153964733,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527201986
    },
    {
        "content": "<p>not automatically as part of the build? not sure - no one has commented about that bit</p>",
        "id": 153964734,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527202001
    },
    {
        "content": "<p>That's why it's the default for publishing with sonatype, so there's a manual gate on that final push to publication.</p>",
        "id": 153964735,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1527202050
    },
    {
        "content": "<p>By 'own project', I just mean that it needs to have be able to build with it's own (preferably mvn, but could be gradle) project.</p>",
        "id": 153964736,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1527202084
    },
    {
        "content": "<p>well, it includes all the run time relevant parts of the build. So sure, why not</p>",
        "id": 153964737,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527202134
    },
    {
        "content": "<p>Can you point me to the code?</p>",
        "id": 153964738,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1527202176
    },
    {
        "content": "<p>in the build, the following folders:<br>\n- implementations\\java\\org.hl7.fhir.convertors<br>\n- implementations\\java\\org.hl7.fhir.dstu2<br>\n- implementations\\java\\org.hl7.fhir.dstu2016may<br>\n- implementations\\java\\org.hl7.fhir.dstu3<br>\n- implementations\\java\\org.hl7.fhir.r4<br>\n- implementations\\java\\org.hl7.fhir.rdf<br>\n- implementations\\java\\org.hl7.fhir.utilities<br>\n- implementations\\java\\org.hl7.fhir.validation</p>",
        "id": 153964739,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527202277
    },
    {
        "content": "<p>Why wouldn't you want it published automatically?<br>\nThere are separate repositories for snapshot and stable builds</p>",
        "id": 153964744,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1527202691
    },
    {
        "content": "<p>I'm not sure what the pros and cons are</p>",
        "id": 153964745,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527202755
    },
    {
        "content": "<p>FWIW I use the following maven build plugin in one of my projects:</p>\n<div class=\"codehilite\"><pre><span></span>        <span class=\"nt\">&lt;plugin&gt;</span>\n          <span class=\"nt\">&lt;groupId&gt;</span>org.sonatype.plugins<span class=\"nt\">&lt;/groupId&gt;</span>\n          <span class=\"nt\">&lt;artifactId&gt;</span>nexus-staging-maven-plugin<span class=\"nt\">&lt;/artifactId&gt;</span>\n          <span class=\"nt\">&lt;version&gt;</span>1.6.7<span class=\"nt\">&lt;/version&gt;</span>\n          <span class=\"nt\">&lt;extensions&gt;</span>true<span class=\"nt\">&lt;/extensions&gt;</span>\n          <span class=\"nt\">&lt;configuration&gt;</span>\n            <span class=\"nt\">&lt;serverId&gt;</span>ossrh<span class=\"nt\">&lt;/serverId&gt;</span>\n            <span class=\"nt\">&lt;nexusUrl&gt;</span>https://oss.sonatype.org/<span class=\"nt\">&lt;/nexusUrl&gt;</span>\n            <span class=\"nt\">&lt;autoReleaseAfterClose&gt;</span>true<span class=\"nt\">&lt;/autoReleaseAfterClose&gt;</span>\n          <span class=\"nt\">&lt;/configuration&gt;</span>\n        <span class=\"nt\">&lt;/plugin&gt;</span>\n</pre></div>",
        "id": 153964746,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1527202780
    },
    {
        "content": "<p>We use the below script to automate cloning of RI from github, reorganize sources into the structure expected by Maven, set versions, etc</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"ch\">#!/usr/bin/env bash</span>\ngit clone https://github.com/hl7-fhir/fhir-svn\n<span class=\"nb\">cd</span> fhir-svn/implementations/java\n<span class=\"nb\">export</span> <span class=\"nv\">VERSION</span><span class=\"o\">=</span><span class=\"nv\">$1</span>-<span class=\"sb\">`</span>git rev-parse --short HEAD<span class=\"sb\">`</span>\n<span class=\"k\">for</span> f in <span class=\"sb\">`</span>ls -bd org.*<span class=\"sb\">`</span><span class=\"p\">;</span> <span class=\"k\">do</span>\n    <span class=\"nb\">pushd</span> <span class=\"nv\">$f</span>/src\n    rm -r ../../../../../fhirtoolkit/<span class=\"si\">${</span><span class=\"nv\">f</span><span class=\"p\">//org.hl7.fhir./</span><span class=\"si\">}</span>/src\n    find . -type f -not -name <span class=\"s2\">&quot;*.java&quot;</span> -exec ditto <span class=\"s2\">&quot;{}&quot;</span> ../../../../../fhirtoolkit/<span class=\"si\">${</span><span class=\"nv\">f</span><span class=\"p\">//org.hl7.fhir./</span><span class=\"si\">}</span>/src/main/resources/<span class=\"s2\">&quot;{}&quot;</span> <span class=\"se\">\\;</span>\n    find . -type f -name <span class=\"s2\">&quot;*.java&quot;</span> -exec ditto <span class=\"s2\">&quot;{}&quot;</span> ../../../../../fhirtoolkit/<span class=\"si\">${</span><span class=\"nv\">f</span><span class=\"p\">//org.hl7.fhir./</span><span class=\"si\">}</span>/src/main/java/<span class=\"s2\">&quot;{}&quot;</span> <span class=\"se\">\\;</span>\n    <span class=\"nb\">popd</span>\n    <span class=\"nb\">pushd</span> ../../../fhirtoolkit/<span class=\"si\">${</span><span class=\"nv\">f</span><span class=\"p\">//org.hl7.fhir./</span><span class=\"si\">}</span>/src/main/java\n    <span class=\"k\">for</span> t in <span class=\"sb\">`</span>grep -l -R --include<span class=\"o\">=</span>*.java <span class=\"s2\">&quot;org.junit&quot;</span> *<span class=\"sb\">`</span><span class=\"p\">;</span> <span class=\"k\">do</span>\n        ditto <span class=\"nv\">$t</span> ../../test/java/<span class=\"nv\">$t</span><span class=\"p\">;</span>\n        <span class=\"k\">if</span> <span class=\"o\">[[</span> <span class=\"nv\">$t</span> <span class=\"o\">=</span>~ ValidationEngineTests.java$ <span class=\"o\">]]</span><span class=\"p\">;</span> <span class=\"k\">then</span>\n            <span class=\"nb\">echo</span> <span class=\"s2\">&quot;Not removing ValidationEngineTests.java from sources&quot;</span>\n        <span class=\"k\">else</span>\n            rm -f <span class=\"nv\">$t</span>\n        <span class=\"k\">fi</span>\n    <span class=\"k\">done</span>\n    <span class=\"nb\">popd</span>\n<span class=\"k\">done</span>\n<span class=\"nb\">cd</span> ../../../\nrm -rf fhir-svn\n<span class=\"nb\">cd</span>  fhirtoolkit\nmvn versions:set -DnewVersion<span class=\"o\">=</span><span class=\"si\">${</span><span class=\"nv\">VERSION</span><span class=\"si\">}</span>\n</pre></div>\n\n\n<p>So far, the script served us well and I only have to ignore RoundTripTests to have a successful build after running this script.</p>",
        "id": 153964770,
        "sender_full_name": "Anand Mohan Tumuluri",
        "timestamp": 1527206584
    },
    {
        "content": "<p>But if someone could publish RI's artifacts to Maven Central, that would be seriously awesome.</p>",
        "id": 153964771,
        "sender_full_name": "Anand Mohan Tumuluri",
        "timestamp": 1527206644
    },
    {
        "content": "<p>well, we usually say that HAPI is the way this is done - you should use the code in HAPI</p>",
        "id": 153964772,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527206698
    },
    {
        "content": "<p>The last time (early last year) I needed profile validation, HAPI did not have the validation capabilities that were there in RI like validating cardinality rules in extensions, etc. I know that it has improved now but its still considerable effort to move from RI's IWorkerContext to HAPI's ValidationSupport. Till then, we are married to RI.</p>",
        "id": 153964773,
        "sender_full_name": "Anand Mohan Tumuluri",
        "timestamp": 1527207230
    },
    {
        "content": "<p>umm, they are the same code</p>",
        "id": 153964774,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527207282
    },
    {
        "content": "<blockquote>\n<p>it's the same code base. HAPI generally releases a lot later than the validator, which is trunk.</p>\n</blockquote>\n<p>That was exactly my problem</p>",
        "id": 153964776,
        "sender_full_name": "Anand Mohan Tumuluri",
        "timestamp": 1527207342
    },
    {
        "content": "<p>so is it up to date now?</p>",
        "id": 153964777,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527207410
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> do we have any policy about turn around times?</p>",
        "id": 153964778,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527208124
    },
    {
        "content": "<p>HAPI FHIR releases on a predictable 2 month cycle. The current stable version (3.3.0) was released in late March and contains the latest RI validator from that time. The next release (3.4.0) will happen within the next few days and will have the latest version as of the day we release. So bottom line we're never more than 2 months behind.</p>",
        "id": 153964781,
        "sender_full_name": "James Agnew",
        "timestamp": 1527209707
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> ValidationEngine doesn't seem to be present in 3.3.0?  Although it was in 3.2.0 I believe, but was non-functional.</p>",
        "id": 153964790,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1527219221
    },
    {
        "content": "<p>That was deliberately removed as I didn't see any use case for keeping it in the HAPI FHIR JARs. Do you have one?</p>",
        "id": 153964837,
        "sender_full_name": "James Agnew",
        "timestamp": 1527249734
    },
    {
        "content": "<p>Oops, I had forgotten that it had been neutered.  Our real need is for mechanism that allows delegation of TX operations to an external service. This is what the reference implementation <code>ValidationEngine</code> offers.  Unfortunately this is not what <code>FhirInstanceValidator</code> offers; it only delegates a very small amount of work to the supplied <code>IValidationSupport</code> instance, with a lot of work being captured by <code>HapiWorkerContext</code> and the private inner class <code>WorkerContextWrapper</code></p>",
        "id": 153965103,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1527503818
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> naturally we think being able to externalise terminology capability is a very useful thing. Are there any key design issues we should be aware of that block this functionality from being brought in from the RI code?</p>",
        "id": 153965137,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1527545239
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191343\">@Michael Lawley</span>  I'm definitely very supportive of expanding IValidationSupport and/or moving logic out of HapiWorkerContext if that's what it takes to allow for externalized terminology services. That kind of use case was exactly the intended design, and I would have thought it would already be possible although I'm sure I'm missing some nuance of what's happenining inside HapiValidationSupport.</p>",
        "id": 153965204,
        "sender_full_name": "James Agnew",
        "timestamp": 1527588335
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> great news - I'm now digging further into these APIs after looking at how ValidateCommand is implemented.  Will let you know how this goes.</p>",
        "id": 153965982,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1527722042
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 153966080,
        "sender_full_name": "Dave Carlson",
        "timestamp": 1527777158
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  The org.hl7.fhir.validator.jar seems to have an old FhirVersionEnum - I can not select R4.  Is this something you can update and republish?  Is there a source jar for the org.hl7.fhir.validator.jar that I could reference to save time from decompiling the classes.</p>",
        "id": 153966086,
        "sender_full_name": "Joyce Dunlop",
        "timestamp": 1527781297
    },
    {
        "content": "<p>Anyone know what the canonical url is for us core to supply to validator -profile parameter?  <a href=\"http://hl7.org/fhir/us/core\" target=\"_blank\" title=\"http://hl7.org/fhir/us/core\">http://hl7.org/fhir/us/core</a>  did not work.<br>\n<a href=\"/user_uploads/10155/Mx-1vVe7vbirrapCr3at4pt4/pasted_image.png\" target=\"_blank\" title=\"pasted_image.png\">pasted image</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/Mx-1vVe7vbirrapCr3at4pt4/pasted_image.png\" target=\"_blank\" title=\"pasted image\"><img src=\"/user_uploads/10155/Mx-1vVe7vbirrapCr3at4pt4/pasted_image.png\"></a></div>",
        "id": 153966095,
        "sender_full_name": "Joyce Dunlop",
        "timestamp": 1527784943
    },
    {
        "content": "<p>try this:</p>\n<p>1) download the latest validator from the current build.</p>\n<p><code>java -jar ${path1}/validator/org.hl7.fhir.validator.jar ${path2}${file to validated} -defn hl7.fhir.core-3.0.1 -ig hl7.fhir.us.core-1.0.1</code></p>\n<p>where the ${} is a variable that you supply.</p>",
        "id": 153966099,
        "sender_full_name": "Eric Haas",
        "timestamp": 1527791316
    },
    {
        "content": "<p>hl7.fhir.core-3.0.1  and  hl7.fhir.us.core-1.0.1 are the package file names that GG was talking about above..</p>\n<p>here is a list of some package names</p>\n<p> hl7.fhir.core-3.0.1<br>\n hl7.fhir.core-current<br>\n hl7.fhir.us.core-1.0.1<br>\n hl7.fhir.us.core-1.1.0<br>\n hl7.fhir.us.core-current</p>",
        "id": 153966100,
        "sender_full_name": "Eric Haas",
        "timestamp": 1527791446
    },
    {
        "content": "<p>I have the validator working until I tried to add the -profile  to validate against.  It was my understanding -ig would make the profile resources available to the validator and the -profile would work as an alternative to resource.meta.profile to determine which profile to validate the resource against.</p>",
        "id": 153966109,
        "sender_full_name": "Joyce Dunlop",
        "timestamp": 1527793334
    },
    {
        "content": "<p>Sorry for not answering the question...</p>\n<div class=\"codehilite\"><pre><span></span>java -jar ${path1}/validator/org.hl7.fhir.validator.jar ${path2}${file to validated} -defn hl7.fhir.core-3.0.1 -ig hl7.fhir.us.core-1.0.1 -profile ${canonical url for profile}\n</pre></div>\n\n\n<p>does work...</p>\n<p>try this for canonical uri  :</p>\n<p><code>\"http://hl7.org/fhir/us/core/StructureDefinition/{profile id}|{version}\"</code>  (note: you need the  '\"'(double quotes)  so bash doesn't get confused)</p>\n<p>for example: <br>\n<code>\"http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient|1.0.1\"</code></p>",
        "id": 153966111,
        "sender_full_name": "Eric Haas",
        "timestamp": 1527795376
    },
    {
        "content": "<p>actually, I don't think that the validator supports the |{version} bit yet</p>",
        "id": 153966121,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527799790
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span>  That worked...a bit disappointed that is has to know the specific patient concept url ,  instead of just the general profile.   I  was hoping there would be some magic to interrogate the resouceType of the incoming file.  I can get this to work though. Thanks!</p>",
        "id": 153966126,
        "sender_full_name": "Joyce Dunlop",
        "timestamp": 1527801388
    },
    {
        "content": "<p>An IG might contain multiple profiles for a specific resource type. Unless the IG says that a profile is global, the validator has no other way know that you intend a particular profile when you reference an IG</p>",
        "id": 153966128,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527801501
    },
    {
        "content": "<p>To be valid US core resource,  the incoming resource needs to be validated against any/all of the profile/resourceType specific resources of the IG?  So to run this locally in Java I need to determine if there needs to be multiple calls per resourceType?</p>",
        "id": 153966132,
        "sender_full_name": "Joyce Dunlop",
        "timestamp": 1527802202
    },
    {
        "content": "<p>well, it depends on the Ig - but if the IG defines multiple profiles for a resource - such as Observation - then you'll have to decide which you are validating against.</p>",
        "id": 153966135,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527804247
    },
    {
        "content": "<p>Good Morning,  <br>\nMy understanding of Resource.meta.profile would be used for a resource to claim that it is compliant with a profile.  Is there a recommendation on how to tag a resource as compliant or not compliant with a variety of profiles?  The data I am validating is not owned by my server just ingested so communicating at the first level - yes/no to compliance but eventually having the resource carry the   non-compliance messages would be ideal.  <br>\nThanks,<br>\nJoyce</p>",
        "id": 153966451,
        "sender_full_name": "Joyce Dunlop",
        "timestamp": 1527865122
    },
    {
        "content": "<p>you an list multiple profiles. we don't have a way to say that the resource doesn't conform to a profile</p>",
        "id": 153966492,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1527882816
    },
    {
        "content": "<p>so I finally got to this, and wrote some documentation:  <a href=\"http://wiki.hl7.org/index.php?title=Using_the_FHIR_Validator\" target=\"_blank\" title=\"http://wiki.hl7.org/index.php?title=Using_the_FHIR_Validator\">http://wiki.hl7.org/index.php?title=Using_the_FHIR_Validator</a></p>",
        "id": 153966635,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1528092701
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>   Is org.hl7.fhir.validator.jar open source?  If so, is there a repo that I can access?<br>\nThanks,<br>\nJoyce</p>",
        "id": 153966747,
        "sender_full_name": "Joyce Dunlop",
        "timestamp": 1528140813
    },
    {
        "content": "<p>yes. it currently lives in the FHIR svn. moving to github is planned but we haven't found time to deal with all the dependency issues. see <a href=\"http://gforge.hl7.org/svn/fhir/trunk\" target=\"_blank\" title=\"http://gforge.hl7.org/svn/fhir/trunk\">http://gforge.hl7.org/svn/fhir/trunk</a></p>",
        "id": 153966792,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1528149160
    },
    {
        "content": "<p>build\\implementations\\java\\org.hl7.fhir.validation</p>",
        "id": 153966793,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1528149179
    }
]