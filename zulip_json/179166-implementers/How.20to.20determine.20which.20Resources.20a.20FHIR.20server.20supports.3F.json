[
    {
        "content": "<p>Is there a standardized query or something that is part of a FHIR server's conformance statement that allows a programmatic (API) way of determining which FHIR resources a server supports?</p>",
        "id": 153922292,
        "sender_full_name": "John Silva",
        "timestamp": 1512052141
    },
    {
        "content": "<p>Well - yes, the capability statement spells out the resources the server supports along with the operations and search parameters the resource. What are you looking at specifically?</p>",
        "id": 153922296,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1512052441
    },
    {
        "content": "<p>Thanks Vadim.   I was looking for an API query method that would return the list of supported FHIR resources, e.g.</p>\n<p><a href=\"http://fhir.hl7fundamentals.org/baseDstu3?Resources\" target=\"_blank\" title=\"http://fhir.hl7fundamentals.org/baseDstu3?Resources\">http://fhir.hl7fundamentals.org/baseDstu3?Resources</a>  (or <a href=\"http://fhir.hl7fundamentals.org/baseDstu3/Resources\" target=\"_blank\" title=\"http://fhir.hl7fundamentals.org/baseDstu3/Resources\">http://fhir.hl7fundamentals.org/baseDstu3/Resources</a> )</p>\n<p>This is so a UI for searching could determine which FHIR resources a server supports.  For example, the ClinFHIR server supports a query build which provides a choice list for choosing which FHIR resource to query  ( <a href=\"http://clinfhir.com/query.html\" target=\"_blank\" title=\"http://clinfhir.com/query.html\">http://clinfhir.com/query.html</a> ) --- it would be helpful if this Resource list contained only those resources the specific server supports, not simply the full list of HL7 specified resources.</p>",
        "id": 153922297,
        "sender_full_name": "John Silva",
        "timestamp": 1512053164
    },
    {
        "content": "<p><a href=\"http://hl7.org/fhir/capabilitystatement.html\" target=\"_blank\" title=\"http://hl7.org/fhir/capabilitystatement.html\">http://hl7.org/fhir/capabilitystatement.html</a> </p>\n<blockquote>\n<p>the capability statement describes the capabilities of a deployed and configured solution available at a particular access point or set of access points. The statement describes exactly how to interface with that deployed solution and thus provides for a degree of self-configuration of software solutions. </p>\n</blockquote>\n<p>It's exactly what you are asking for, it's not just a full list of FHIR resources :)</p>",
        "id": 153922298,
        "sender_full_name": "Vadim Peretokin",
        "timestamp": 1512053610
    },
    {
        "content": "<p>Yes, but I checked some of the FHIR public servers out there (finding the list from those on ClinFHIR's query page) and not many of them return the rest-&gt;resources list of supported resources, some do not even support the CapabilityStatement!   So, theoretically it is supposed to be there but maybe in practice implementations aren't supporting it.</p>\n<p><a href=\"http://fhir.hl7fundamentals.org/baseDstu3/CapabilityStatement\" target=\"_blank\" title=\"http://fhir.hl7fundamentals.org/baseDstu3/CapabilityStatement\">http://fhir.hl7fundamentals.org/baseDstu3/CapabilityStatement</a><br>\n<a href=\"https://syntheticmass.mitre.org/fhir/CapabilityStatement\" target=\"_blank\" title=\"https://syntheticmass.mitre.org/fhir/CapabilityStatement\">https://syntheticmass.mitre.org/fhir/CapabilityStatement</a><br>\n<a href=\"http://snapp.clinfhir.com:8081/baseDstu3/CapabilityStatement\" target=\"_blank\" title=\"http://snapp.clinfhir.com:8081/baseDstu3/CapabilityStatement\">http://snapp.clinfhir.com:8081/baseDstu3/CapabilityStatement</a><br>\n<a href=\"http://52.72.172.54:8080/fhir/baseDstu2/CapabilityStatement\" target=\"_blank\" title=\"http://52.72.172.54:8080/fhir/baseDstu2/CapabilityStatement\">http://52.72.172.54:8080/fhir/baseDstu2/CapabilityStatement</a></p>\n<p><a href=\"http://sqlonfhir-stu3.azurewebsites.net/fhir/CapabilityStatement\" target=\"_blank\" title=\"http://sqlonfhir-stu3.azurewebsites.net/fhir/CapabilityStatement\">http://sqlonfhir-stu3.azurewebsites.net/fhir/CapabilityStatement</a>  (returns a very style'd HTML page)<br>\n<a href=\"https://stu3.simplifier.net/open/CapabilityStatement\" target=\"_blank\" title=\"https://stu3.simplifier.net/open/CapabilityStatement\">https://stu3.simplifier.net/open/CapabilityStatement</a>  (does but is returning HTML -- probably just need to set headers correctly to get JSON or XML)</p>",
        "id": 153922325,
        "sender_full_name": "John Silva",
        "timestamp": 1512066477
    },
    {
        "content": "<p>Not speaking for all the others, but the sqlonfhir server will return a HTML rendering if you come in from a browser, if you pass in the Accept header with either xml or json, it will return you the type you'e requests. Others are likely the same too.</p>",
        "id": 153922382,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1512075880
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"194183\">@John Silva</span> servers SHALL support the capability statement. That's what the spec says. If they aren't, adding an additional way to get the same information won't change their choice to not conform - just increase it's likelihood.</p>",
        "id": 153922399,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1512076646
    },
    {
        "content": "<p>I wasn't suggesting adding and additional mechanism -- just noting that some of the public servers out there do not support it even though it's a \"SHALL' requirement ;-)     <span class=\"user-mention\" data-user-id=\"191367\">@Brian Postlethwaite</span>  yes, I used PostMan with the Accept header and was able to retrieve XML or JSON version of the CapabilityStatement on some of the servers, thanks.</p>",
        "id": 153922453,
        "sender_full_name": "John Silva",
        "timestamp": 1512080687
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"194183\">@John Silva</span>  I haven't checked all those servers you listed, but at least the first few DO have a CapabilityStatement, published at the metadata endpoint. EG: <a href=\"https://syntheticmass.mitre.org/fhir/metadata?_format=json\" target=\"_blank\" title=\"https://syntheticmass.mitre.org/fhir/metadata?_format=json\">https://syntheticmass.mitre.org/fhir/metadata?_format=json</a> returns a CapabilityStatement</p>",
        "id": 153922831,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1512417639
    },
    {
        "content": "<p><a href=\"http://hl7.org/fhir/stu3/http.html#capabilities\" target=\"_blank\" title=\"http://hl7.org/fhir/stu3/http.html#capabilities\">http://hl7.org/fhir/stu3/http.html#capabilities</a><br>\nor <a href=\"http://hl7.org/fhir/dstu2/http.html#conformance\" target=\"_blank\" title=\"http://hl7.org/fhir/dstu2/http.html#conformance\">http://hl7.org/fhir/dstu2/http.html#conformance</a></p>",
        "id": 153922832,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1512417772
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  is it ever supposed to be published directly out of a \"CapabilityStatement\" resource in addition to the metadata endpoint?</p>",
        "id": 153922833,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1512417798
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191356\">@Jenni Syed</span>   -- but when I tried this, even with PostMan and the Content Type header set to 'application/fhir_json' it didn't return the CapabilityStatement at this URL:   <a href=\"https://syntheticmass.mitre.org/fhir/CapabilityStatement\" target=\"_blank\" title=\"https://syntheticmass.mitre.org/fhir/CapabilityStatement\">https://syntheticmass.mitre.org/fhir/CapabilityStatement</a></p>",
        "id": 153922841,
        "sender_full_name": "John Silva",
        "timestamp": 1512421565
    },
    {
        "content": "<p>I don't think it should - but looking to Grahame for sanity check</p>",
        "id": 153922842,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1512421602
    },
    {
        "content": "<p>It should use that URL I posted above. CapabilityStatement is a \"weird\" resource that's available at /metadata instead of /CapabilityStatement</p>",
        "id": 153922843,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1512421686
    },
    {
        "content": "<p>To clarify: it's always available at /metadata</p>",
        "id": 153922844,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1512421717
    },
    {
        "content": "<p>I've not seen it available at /CapabilityStatement before</p>",
        "id": 153922845,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1512421729
    },
    {
        "content": "<p>[base]/CapabilityStatement would be different - that would be the endpoint where a system would host CapabilityStatements of others - e.g. if it was a registry.</p>",
        "id": 153922846,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1512423020
    },
    {
        "content": "<p>The capability statement for a specific server is always made available at [base]/metadata</p>",
        "id": 153922847,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1512423044
    },
    {
        "content": "<p>The statement that the capability statement for a specific server is available at [base]/metadata is, I think, clear from the docs. However the previous statement about what is available at [base]/CapabilityStatement is not as clear. Perhaps some additional text on the resource page would help?</p>",
        "id": 153922850,
        "sender_full_name": "Andy Stechishin",
        "timestamp": 1512424426
    },
    {
        "content": "<p>Feel free to submit a change request :)</p>",
        "id": 153922855,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1512428317
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191356\">@Jenni Syed</span> yes you're right and I missed that. thanks<br>\n<span class=\"user-mention\" data-user-id=\"191369\">@Andy Stechishin</span> : the difference between these two is found at <a href=\"http://build.fhir.org/http.html#capabilities\" target=\"_blank\" title=\"http://build.fhir.org/http.html#capabilities\">http://build.fhir.org/http.html#capabilities</a></p>",
        "id": 153922856,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1512428476
    },
    {
        "content": "<p>Clear enough for me</p>",
        "id": 153922857,
        "sender_full_name": "Andy Stechishin",
        "timestamp": 1512429258
    },
    {
        "content": "<p>Should server include CapabilityStatement resource in /metadata response?</p>",
        "id": 153923242,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1512588886
    },
    {
        "content": "<p>if it supports it like a normal resource</p>",
        "id": 153923256,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1512592676
    },
    {
        "content": "<p>Given that the spec states  \"All servers are required to support the capabilities interaction\"...and \"shall\" return a Capability Statement (that term links to the eponymous resource) from a GET [base]/metadata request - isn't  it the case that a Server shall return a CapabilityStatement resource in response to that request?</p>",
        "id": 153923266,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1512596268
    },
    {
        "content": "<p>yes, but that's not the question</p>",
        "id": 153923267,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1512596522
    },
    {
        "content": "<p>Thought that I'd answered Yunwei's question - other than my reading of the optionality requirement is that it's 'shall' rather than 'should'.</p>",
        "id": 153923277,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1512601695
    },
    {
        "content": "<ul>\n<li>servers are required to return a capbilities statement for /metadata. </li>\n<li>servers are not required to support anything at /CapabilityStatement - and doing so says nothing about the server itself</li>\n<li>for the same reason, servers are not required to talk about the /CapabilityStatement resource in the CapabilityStatement they return from /meta - unless hey provide services at /CapabilityStatement</li>\n</ul>",
        "id": 153923279,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1512603008
    },
    {
        "content": "<p>Thanks for the clarification. At one time, I believe (please confirm <span class=\"user-mention\" data-user-id=\"191370\">@Richard Ettema</span>) that Touchstone failed the Capability Statement that my server returned from a /metadata request because it didn't cite support for the CapabilityStatement resource.</p>",
        "id": 153923283,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1512603893
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191364\">@Peter Jordan</span> - Yes, that does sound familiar. I'll be verifying that today to make sure we're not reporting a false negative.  Thanks.</p>",
        "id": 153923371,
        "sender_full_name": "Richard Ettema",
        "timestamp": 1512658184
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191364\">@Peter Jordan</span> Your previous failures were due to a check of the ETag header. The capabilities (/metadata) tests previously had an assert to check for the existence of the ETag header. The ETag header is a <strong>SHOULD support</strong>. This has been updated in the current tests so that they now have a warningOnly set for these asserts.</p>",
        "id": 153923393,
        "sender_full_name": "Richard Ettema",
        "timestamp": 1512662388
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191370\">@Richard Ettema</span>. The ETag header error comes from another (HAPI-based) server that I've been testing. If at all possible, I'm really seeking advice as to whether a Capability Statement, returned from a /metadata request, should contain a reference to the CapabilityStatement resource. At one time my Terminology Server didn't do this and I'm pretty sure that Touchstone reported that as an error.</p>",
        "id": 153923470,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1512678587
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191364\">@Peter Jordan</span> As Grahame stated (above), a FHIR server does not have to support the CapabilityStatement resource type. This means that a FHIR server's capablities (/metadata) returned CapabilityStatement does not need to contain a rest.resource entry for the CapabiltyStatement resource type. I'll be testing this (negative) test case out in Touchstone over the next couple of days and let you know.  -Thanks.</p>",
        "id": 153923925,
        "sender_full_name": "Richard Ettema",
        "timestamp": 1512842548
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"194183\">@John Silva</span> For stating the intended response format you should use the Accept header. The Content-Type header is about the format of data you send to the server.</p>",
        "id": 153924684,
        "sender_full_name": "Christiaan Knaap",
        "timestamp": 1513155802
    },
    {
        "content": "<p>Lloyd, wow, that's not very clear (from what I could read in the specs and from what answers I've seen posted here.)   I'm also not clear then if the metadata info would really give a client the list of known FHIR resources supported by a particular server!    I want to be able to retrieve this information programmatically.   Can you point us to the spec page where it defines the metadata page?</p>",
        "id": 153924734,
        "sender_full_name": "John Silva",
        "timestamp": 1513172124
    },
    {
        "content": "<p><a href=\"http://hl7.org/fhir/http.html#capabilities\" target=\"_blank\" title=\"http://hl7.org/fhir/http.html#capabilities\">http://hl7.org/fhir/http.html#capabilities</a></p>",
        "id": 153924738,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1513172719
    },
    {
        "content": "<p>This interaction SHOULD return a CapabilityStatement resource that describes the supported features, including a list of supported resources.</p>",
        "id": 153924739,
        "sender_full_name": "Michel Rutten",
        "timestamp": 1513172838
    },
    {
        "content": "<p>And Lloyd wasn't part of the conversation... :)</p>",
        "id": 153924757,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1513180710
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"194183\">@John Silva</span> sorry to be late to the conversation - the clinFHIR query tool does list the available resources based on the conformance/capabilityStatement resource, and the search parameters also are derived from that statement - or at least they should be!</p>",
        "id": 153924822,
        "sender_full_name": "David Hay",
        "timestamp": 1513185111
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191321\">@David Hay</span>  -- I'll try it later.   I'm still trying to figure out from the response (the metadata) how it \"makes known\" the set of supported FHIR resources.   I tried querying for /metadata?format=application/json on the HL7 FHIR3 website and it seemed like all the resources were under extensions; maybe that's true that their implementation has done extensions for every FHIR resource, I'm not sure.    I've looked at the spec page for CapabilityStatement and it seems like the rest property has a resource property (array) under it that would be where I'd expect to find the set of supported FHIR resources -- I just haven't seen this on the FHIR servers I've queried.</p>",
        "id": 153925072,
        "sender_full_name": "John Silva",
        "timestamp": 1513205983
    },
    {
        "content": "<p>the FHIR website itself is a static set of html that isn't quite conformant to itself. That's a work in progress - making the spec conform to itself when it's hosted by a dumb IIS server</p>",
        "id": 153925073,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1513206173
    },
    {
        "content": "<p>you will absolutely get this from the test server. Let's try something:</p>",
        "id": 153925074,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1513206201
    },
    {
        "content": "<p><a href=\"http://test.fhir.org/r3/metadata?_graphql={rest{resource{type}}}\" target=\"_blank\" title=\"http://test.fhir.org/r3/metadata?_graphql={rest{resource{type}}}\">http://test.fhir.org/r3/metadata?_graphql={rest{resource{type}}}</a>  - but no, I haven't hooked up graphQL to my server metadata operation. but in principle that's the operation you want</p>",
        "id": 153925075,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1513206399
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"194183\">@John Silva</span> </p>\n<p>here's a code snippet:<br>\n```resourceCreatorSvc.getConformanceResource($scope.server.url).then(<br>\n            function (data) {<br>\n                $scope.standardResourceTypes= []   //resource types supported by this server...<br>\n                data.data.rest[0].resource.forEach(function(res){   ///just look in the first element...<br>\n                      $scope.standardResourceTypes.push({name:res.type})<br>\n                      ...</p>\n<div class=\"codehilite\"><pre><span></span>\n</pre></div>",
        "id": 153925084,
        "sender_full_name": "David Hay",
        "timestamp": 1513210492
    },
    {
        "content": "<p>And you'd need to know the server supported _graphql before you could rely on that approach to get the information :)</p>",
        "id": 153926359,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1513728349
    }
]