[
    {
        "content": "<p>Anyone know where to start in regards changing the DataSource on FHIR Spark Server? </p>",
        "id": 153855307,
        "sender_full_name": "Con McGourty",
        "timestamp": 1478181081
    },
    {
        "content": "<p>I know nothing about the project itself - but <a href=\"https://github.com/furore-fhir/spark/blob/master/src/Spark/Web.Release.config\" target=\"_blank\" title=\"https://github.com/furore-fhir/spark/blob/master/src/Spark/Web.Release.config\">https://github.com/furore-fhir/spark/blob/master/src/Spark/Web.Release.config</a> looks interesting</p>",
        "id": 153855308,
        "sender_full_name": "Geoff Low",
        "timestamp": 1478181209
    },
    {
        "content": "<p>Con, is your goal to point to a different MongoDb server, or to implement a different kind of database (like SQL)?</p>",
        "id": 153855311,
        "sender_full_name": "Martijn Harthoorn",
        "timestamp": 1478184376
    },
    {
        "content": "<p>I'm looking to implement an SQL server specifically. </p>",
        "id": 153855312,
        "sender_full_name": "Con McGourty",
        "timestamp": 1478184452
    },
    {
        "content": "<p>There is a bit of documentation here:<br>\n<a href=\"https://github.com/furore-fhir/spark/wiki/Fitting-Spark-in-my-environment\" target=\"_blank\" title=\"https://github.com/furore-fhir/spark/wiki/Fitting-Spark-in-my-environment\">https://github.com/furore-fhir/spark/wiki/Fitting-Spark-in-my-environment</a></p>",
        "id": 153855313,
        "sender_full_name": "Martijn Harthoorn",
        "timestamp": 1478184499
    },
    {
        "content": "<p>You basically have to implement your own Store.</p>",
        "id": 153855314,
        "sender_full_name": "Martijn Harthoorn",
        "timestamp": 1478184517
    },
    {
        "content": "<p>And if you want to implement your own search index, things get a lot more complicated.</p>",
        "id": 153855315,
        "sender_full_name": "Martijn Harthoorn",
        "timestamp": 1478184535
    },
    {
        "content": "<p>But search is a complicated topic ;)</p>",
        "id": 153855316,
        "sender_full_name": "Martijn Harthoorn",
        "timestamp": 1478184541
    },
    {
        "content": "<p>You can find the MongoFhirStore here:<br>\n<a href=\"https://github.com/furore-fhir/spark/blob/dstu2/develop/src/Spark.Mongo/Store/MongoFhirStore.cs\" target=\"_blank\" title=\"https://github.com/furore-fhir/spark/blob/dstu2/develop/src/Spark.Mongo/Store/MongoFhirStore.cs\">https://github.com/furore-fhir/spark/blob/dstu2/develop/src/Spark.Mongo/Store/MongoFhirStore.cs</a></p>",
        "id": 153855317,
        "sender_full_name": "Martijn Harthoorn",
        "timestamp": 1478184612
    },
    {
        "content": "<p>is there anywhere I can get test data on my localhost to test out the api calls? </p>\n<p>I have sql servers full of data but no MongoDb to work with</p>",
        "id": 153855318,
        "sender_full_name": "Con McGourty",
        "timestamp": 1478184959
    },
    {
        "content": "<p>There's a SimpleStore implementation here: <a href=\"https://github.com/cqframework/cds-on-fhir/tree/master/Src/net/CQF/GuidanceService/Store\" target=\"_blank\" title=\"https://github.com/cqframework/cds-on-fhir/tree/master/Src/net/CQF/GuidanceService/Store\">https://github.com/cqframework/cds-on-fhir/tree/master/Src/net/CQF/GuidanceService/Store</a></p>",
        "id": 153855330,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1478194009
    },
    {
        "content": "<p>It's based on an older version of the Spark service, but I believe the Store implementation is still functional.</p>",
        "id": 153855331,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1478194029
    },
    {
        "content": "<p>It's just file based, so you can just drop resource files in directories and it will serve them up.</p>",
        "id": 153855332,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1478194059
    },
    {
        "content": "<p>Would it be able to implement a SQL DB?</p>",
        "id": 153855333,
        "sender_full_name": "Con McGourty",
        "timestamp": 1478194081
    },
    {
        "content": "<p>Also Thank you</p>",
        "id": 153855334,
        "sender_full_name": "Con McGourty",
        "timestamp": 1478194095
    },
    {
        "content": "<p>What type of SQL DBMS?</p>",
        "id": 153855335,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1478194110
    },
    {
        "content": "<p>Microsoft Management Studio DB</p>",
        "id": 153855336,
        "sender_full_name": "Con McGourty",
        "timestamp": 1478194144
    },
    {
        "content": "<p>or either a service feeding form a MS Management Studio</p>",
        "id": 153855337,
        "sender_full_name": "Con McGourty",
        "timestamp": 1478194162
    },
    {
        "content": "<p>I'm completely new to all this</p>",
        "id": 153855338,
        "sender_full_name": "Con McGourty",
        "timestamp": 1478194204
    },
    {
        "content": "<p>So your tables are in an MS SQL Server, and I imagine they're things like Patient and Medication, etc. Right?</p>",
        "id": 153855339,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1478194231
    },
    {
        "content": "<p>YesYes</p>",
        "id": 153855340,
        "sender_full_name": "Con McGourty",
        "timestamp": 1478194246
    },
    {
        "content": "<p>Using just the Spark server, you'd have to implement a Store that transformed the content from the tables into FHIR resources.</p>",
        "id": 153855342,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1478194309
    },
    {
        "content": "<p>That would be a lot of C# code.</p>",
        "id": 153855343,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1478194319
    },
    {
        "content": "<p>There is a tech that could help, but it would also be a fairly heavy lift, including learning the tech involved:</p>",
        "id": 153855344,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1478194378
    },
    {
        "content": "<p>What would you recommend me do instead?</p>",
        "id": 153855345,
        "sender_full_name": "Con McGourty",
        "timestamp": 1478194406
    },
    {
        "content": "<p>Let me back up, you're trying to stand up a FHIR server on top of your existing data that could expose your content as FHIR resources?</p>",
        "id": 153855346,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1478194455
    },
    {
        "content": "<p>yes</p>",
        "id": 153855347,
        "sender_full_name": "Con McGourty",
        "timestamp": 1478194545
    },
    {
        "content": "<p>I have it set up out of the box with MongoDB, or at least I think I do. There is no data to work with</p>",
        "id": 153855348,
        "sender_full_name": "Con McGourty",
        "timestamp": 1478194571
    },
    {
        "content": "<p>If you just want to set up a Spark test server that you can play with, you could stand one up with MongoDB and then load it with bundles.</p>",
        "id": 153855349,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1478194619
    },
    {
        "content": "<p>bundles?</p>",
        "id": 153855350,
        "sender_full_name": "Con McGourty",
        "timestamp": 1478194633
    },
    {
        "content": "<p>A Bundle is a collection of FHIR resources, and a FHIR Server can accept a POST of a bundle at its root that will load all the resources in the Bundle.</p>",
        "id": 153855351,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1478194711
    },
    {
        "content": "<p>e.g.: <a href=\"https://github.com/cqframework/payerextract/blob/master/resources/bundle-load-patient-12214.json\" target=\"_blank\" title=\"https://github.com/cqframework/payerextract/blob/master/resources/bundle-load-patient-12214.json\">https://github.com/cqframework/payerextract/blob/master/resources/bundle-load-patient-12214.json</a></p>",
        "id": 153855352,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1478194724
    },
    {
        "content": "<p>Right and I post this though the API then?</p>",
        "id": 153855353,
        "sender_full_name": "Con McGourty",
        "timestamp": 1478194808
    },
    {
        "content": "<p>Yes, and the Spark server should just push that into the MongoDB.</p>",
        "id": 153855354,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1478194828
    },
    {
        "content": "<p>That directory has a bunch of bundles, they're STU3 (1.6) though.</p>",
        "id": 153855355,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1478194859
    },
    {
        "content": "<p>yeah thats loads of data to work with </p>",
        "id": 153855356,
        "sender_full_name": "Con McGourty",
        "timestamp": 1478194887
    },
    {
        "content": "<p>thank you</p>",
        "id": 153855357,
        "sender_full_name": "Con McGourty",
        "timestamp": 1478194890
    },
    {
        "content": "<p>I'll give you the full story, Ive given a task</p>",
        "id": 153855358,
        "sender_full_name": "Con McGourty",
        "timestamp": 1478194907
    },
    {
        "content": "<p>to create a FHIR server that will either call other services or read directly form our MS SQL server DB, Am I going down the right track with this Spark Server If im looking for an easy-ish  tranisation to a new DataSource? </p>",
        "id": 153855359,
        "sender_full_name": "Con McGourty",
        "timestamp": 1478195005
    },
    {
        "content": "<p>Or what would you recoomend?</p>",
        "id": 153855360,
        "sender_full_name": "Con McGourty",
        "timestamp": 1478195086
    },
    {
        "content": "<p>Well, yes, but it's a long road, there's a lot involved in that transformation from your local structures to the FHIR resources.</p>",
        "id": 153855361,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1478195117
    },
    {
        "content": "<p>Spark can definitely provide the scaffolding, but the transformation logic, and supporting indexed read/write against the SQL Server as your data source is non-trivial.</p>",
        "id": 153855362,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1478195147
    },
    {
        "content": "<p>You could start by just doing a simple transform to support say a GET on Patient to get a feel for how much is involved.</p>",
        "id": 153855363,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1478195297
    },
    {
        "content": "<p>Okay, no other way of getting around this? </p>",
        "id": 153855364,
        "sender_full_name": "Con McGourty",
        "timestamp": 1478195367
    },
    {
        "content": "<p>Here's an open source data federation tech that we've been extending to support this use case, but it's a work in progress:</p>",
        "id": 153855365,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1478195371
    },
    {
        "content": "<p><a href=\"https://github.com/DBCG/Dataphor/tree/RESTfulCLI\" target=\"_blank\" title=\"https://github.com/DBCG/Dataphor/tree/RESTfulCLI\">https://github.com/DBCG/Dataphor/tree/RESTfulCLI</a></p>",
        "id": 153855366,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1478195376
    },
    {
        "content": "<p>What is this software doing, parsing my current data in my MS SQl? </p>",
        "id": 153855367,
        "sender_full_name": "Con McGourty",
        "timestamp": 1478195815
    },
    {
        "content": "<p>Providing access to current data in whatever source system it's in, yes. In your case, MSSQL.</p>",
        "id": 153855368,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1478195885
    },
    {
        "content": "<p>Thank you, this is a great starting point</p>",
        "id": 153855369,
        "sender_full_name": "Con McGourty",
        "timestamp": 1478196091
    },
    {
        "content": "<p>Would it be okay to contact you in the future if I run into issues? </p>",
        "id": 153855370,
        "sender_full_name": "Con McGourty",
        "timestamp": 1478196143
    },
    {
        "content": "<p>Yes, please feel free to reach out.</p>",
        "id": 153855371,
        "sender_full_name": "Bryn Rhodes",
        "timestamp": 1478196168
    },
    {
        "content": "<p>Thank you, Ill send you a mail now - <a href=\"mailto:bryn@databaseconsultinggroup.com\" title=\"mailto:bryn@databaseconsultinggroup.com\">bryn@databaseconsultinggroup.com</a></p>",
        "id": 153855372,
        "sender_full_name": "Con McGourty",
        "timestamp": 1478196197
    }
]