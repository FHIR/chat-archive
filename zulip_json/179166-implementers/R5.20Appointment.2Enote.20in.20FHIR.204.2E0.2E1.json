[
    {
        "content": "<p>Hello everyone,</p>\n<p>I am looking for a way to implement comments for Appointments in FHIR 4.0.1.with a <code>0..*</code> relationship instead of <code>0..1</code> and also need additional data about each comment's author and a timestamp. <br>\nI discovered that R5 already is supposed to provide exactly what I want with the <code>Appointment.note 0..* Annotation</code> <br>\n(see <a href=\"https://hl7.org/fhir/5.0.0-snapshot1/appointment.html\">https://hl7.org/fhir/5.0.0-snapshot1/appointment.html</a>, <a href=\"https://jira.hl7.org/browse/FHIR-19521\">https://jira.hl7.org/browse/FHIR-19521</a>).</p>\n<p>Are there any best practices doing this in FHIR 4.0.1 or even an existing extension?<br>\nAny hints on how to implement this correctly with fsh are much appreciated!</p>\n<p>Best regards</p>",
        "id": 273069109,
        "sender_full_name": "Samuel Brendler",
        "timestamp": 1645697273
    },
    {
        "content": "<p>There are guidelines for using a 'standard' extension URL to adopt data elements defined in a different version of FHIR - see <a href=\"http://build.fhir.org/versions.html#extensions\">http://build.fhir.org/versions.html#extensions</a></p>",
        "id": 273148149,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1645735971
    },
    {
        "content": "<p>Thanks a lot for the response!</p>\n<p>I added the following to my sushi-config.yaml </p>\n<div class=\"codehilite\"><pre><span></span><code>dependencies:\n  hl7.fhir.extensions.r5: 4.0.1\n</code></pre></div>\n<p>and changed MyCustomAppointment:</p>\n<div class=\"codehilite\"><pre><span></span><code>Profile:        MyCustomAppointment\nParent:         Appointment\nId:             my-custom-appointment\nTitle:          &quot;My Custom Appointment Profile&quot;\nDescription:    &quot;My Custom Profile for appointment data.&quot;\n\n* extension contains http://hl7.org/fhir/5.0/StructureDefinition/extension-Appointment.note named note 0..1\n</code></pre></div>\n<p>Running <code>sushi .</code> reports no errors or warnings, but when I try to generate the IG with <code>./_genonce.sh</code> I receive the following error:</p>\n<div class=\"codehilite\"><pre><span></span><code>Publishing Content Failed: Error generating snapshot for My Custom Appointment Profile(my-custom-appointment): Unable to generate snapshot for http://example.com/fhir/CustomProfiles/4.0.1/StructureDefinition/my-custom-appointment in /home/myuser/APIs/fhir-api/fsh-generated/resources/StructureDefinition-my-custom-appointment (00:23.0596)\n                                                                                 (00:23.0597)\nUse -? to get command line help                                                  (00:23.0597)\n                                                                                 (00:23.0597)\nStack Dump (for debugging):                                                      (00:23.0597)\njava.lang.Exception: Error generating snapshot for My Custom Appointment Profile(my-custom-appointment): Unable to generate snapshot for http://example.com/fhir/CustomProfiles/4.0.1/StructureDefinition/my-custom-appointment in /home/myuser/APIs/fhir-api/fsh-generated/resources/StructureDefinition-my-custom-appointment\n        at org.hl7.fhir.igtools.publisher.Publisher.generateSnapshots(Publisher.java:5403)\n        at org.hl7.fhir.igtools.publisher.Publisher.loadConformance(Publisher.java:4665)\n        at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:1005)\n        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:856)\n        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:10005)\nCaused by: org.hl7.fhir.exceptions.FHIRException: Unable to generate snapshot for http://example.com/fhir/CustomProfiles/4.0.1/StructureDefinition/my-custom-appointment in /home/myuser/APIs/fhir-api/fsh-generated/resources/StructureDefinition-my-custom-appointment\n        at org.hl7.fhir.igtools.publisher.Publisher.generateSnapshot(Publisher.java:5456)\n        at org.hl7.fhir.igtools.publisher.Publisher.generateSnapshots(Publisher.java:5401)\n        ... 4 more\nCaused by: org.hl7.fhir.exceptions.FHIRException: Reference to unknown extension http://hl7.org/fhir/5.0/StructureDefinition/extension-Appointment.note\n        at org.hl7.fhir.r5.conformance.ProfileUtilities.processPaths(ProfileUtilities.java:1167)\n        at org.hl7.fhir.r5.conformance.ProfileUtilities.processPaths(ProfileUtilities.java:1533)\n        at org.hl7.fhir.r5.conformance.ProfileUtilities.generateSnapshot(ProfileUtilities.java:658)\n        at org.hl7.fhir.igtools.publisher.Publisher.generateSnapshot(Publisher.java:5451)\n        ... 5 more\n</code></pre></div>\n<p>Is this due to R5 not yet being released?</p>\n<p>I also tried with a snapshot URL but sushi didn't like that:<br>\n<code>* extension contains http://hl7.org/fhir/5.0.0-snapshot1/StructureDefinition/extension-Appointment.note named note 0..1</code></p>",
        "id": 273216807,
        "sender_full_name": "Samuel Brendler",
        "timestamp": 1645788287
    },
    {
        "content": "<p>Any input would be much appreciated</p>",
        "id": 273522667,
        "sender_full_name": "Samuel Brendler",
        "timestamp": 1646068496
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 273528290,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1646070857
    },
    {
        "content": "<p>no that should work - how can I reproduce?</p>",
        "id": 273539651,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1646075900
    },
    {
        "content": "<p>Thanks for the responses <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> </p>\n<p>I created a simple example based on a vanilla sushi project on github where you can try it yourself.</p>\n<p>Steps to reproduce (on Linux):</p>\n<div class=\"codehilite\"><pre><span></span><code>git clone https://github.com/iroCheese/demo-fhir-appointment-profile.git\ncd demo-fhir-appointment-profile\n./_updatePublisher.sh\n./_genonce.sh\n</code></pre></div>\n<p>The relevant changes are in <a href=\"https://github.com/iroCheese/demo-fhir-appointment-profile/commit/997550f69e51aefc56125590f8fb85fb974cc6f3\">this commit</a>.</p>",
        "id": 273621525,
        "sender_full_name": "Samuel Brendler",
        "timestamp": 1646131889
    },
    {
        "content": "<p>Can anyone reproduce this?</p>",
        "id": 274373446,
        "sender_full_name": "Samuel Brendler",
        "timestamp": 1646649317
    },
    {
        "content": "<p>Hey Hi</p>",
        "id": 274407536,
        "sender_full_name": "Jay B",
        "timestamp": 1646667006
    }
]