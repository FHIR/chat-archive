[
    {
        "content": "<p>The definition of required says \"To be conformant, instances of this element SHALL include a code from the specified value set\". But this is wrong - the element doesn't have to have a value, and so the definition should say \"To be conformant, codes in this element SHALL be from the specified value set\" - <a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12223\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=12223\">GF#12223</a></p>",
        "id": 153851924,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1475624378
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> This is actually something we just discussed in the DAF group at the WGM and it sounds like many are relying on that SHALL include rather than all SHALL be. This is primarily valueable as the definition for use with codeableConcept: you can include translations, as long as you also include something from that value set. But not <em>all</em> translations must be from that value set. For things like code, the current definition would limit it to a single code that can only be from that value set, right?</p>",
        "id": 153851927,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1475625049
    },
    {
        "content": "<p>yes, ok. my definition was focused only code. let</p>",
        "id": 153851928,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1475626201
    },
    {
        "content": "<p>let's try again:</p>",
        "id": 153851929,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1475626206
    },
    {
        "content": "<p>To be conformant, codes in this element SHALL be from the specified value set. For code, if a value is present, it SHALL be in the value set. For Coding, if a code or a system is present, the code SHALL be in the value set. For a CodeableConcept, if a text and/or at least one coding are present, there SHALL be a code from the specified value set in the codings</p>",
        "id": 153851930,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1475631188
    },
    {
        "content": "<p>not, ah, so brief</p>",
        "id": 153851931,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1475631197
    },
    {
        "content": "<p>Correct &gt; brief! This is a useful clarification, thanks.</p>",
        "id": 153851932,
        "sender_full_name": "James Butler",
        "timestamp": 1475631410
    },
    {
        "content": "<p>So, for clarity, a \"required\" binding could be satisfied by an extension (say, the null flavor extension) since only \"if a code or a system is present\"?</p>",
        "id": 153851933,
        "sender_full_name": "Chris Grenz",
        "timestamp": 1475631624
    },
    {
        "content": "<p>Also, does the presence of CodeableConcept.text make any difference to the binding?</p>",
        "id": 153851934,
        "sender_full_name": "Chris Grenz",
        "timestamp": 1475631729
    },
    {
        "content": "<p>that's correct. Unless additional rules are made in a profile, a required binding does not apply if an extension present.</p>",
        "id": 153851935,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1475631767
    },
    {
        "content": "<p>but .text is specifically different - you cannot provide just text with a required binding</p>",
        "id": 153851937,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1475631783
    },
    {
        "content": "<p>The extension thing is non-obvious and should be called out (as it should also be in elementdefinition.min where a required element may have only an extension and no value).</p>",
        "id": 153851940,
        "sender_full_name": "Chris Grenz",
        "timestamp": 1475631864
    },
    {
        "content": "<p>it's tripped up my devs over and over....</p>",
        "id": 153851941,
        "sender_full_name": "Chris Grenz",
        "timestamp": 1475631891
    },
    {
        "content": "<p>That does clarify the required binding and is how I understand it.  and yes  extension are tricky - I think guidance for extensions belongs in the extensibility page and not where define the bindings - it muddies the waters.  </p>",
        "id": 153852032,
        "sender_full_name": "Eric Haas",
        "timestamp": 1475684136
    },
    {
        "content": "<p>The .text comment is a complication. So, in essence, if a field is bound as required you are stating that IRL that field can *never* be freetext? (or of a propietary code that cannot be mapped)</p>",
        "id": 153852040,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1475685858
    },
    {
        "content": "<p>that's HL7's standing policy, yes. Which is why we rarely bind clinical content as required. </p>",
        "id": 153852041,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1475685907
    },
    {
        "content": "<p>usually, they are extensible, which means that they can be free text and/or a local code that cannot be mapped</p>",
        "id": 153852042,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1475685973
    },
    {
        "content": "<p>There's not a way to bind with that right now, correct? IE: if you can code it, it MUST be in this value set, but freetext allowed if uncodeable. Extensible means you can add outside codes, which may not be what you want.</p>",
        "id": 153852043,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1475686006
    },
    {
        "content": "<p>in other words you want a binding to say \"either these codes or free text\"</p>",
        "id": 153852077,
        "sender_full_name": "Eric Haas",
        "timestamp": 1475706550
    },
    {
        "content": "<p>right now, we don't have a concise way to say that combination. Is there much use case for it?</p>",
        "id": 153852079,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1475707433
    },
    {
        "content": "<p>Created a test to validate this behavior on the existing servers.  Grahame's is standard? Good thing to clarify!</p>\n<p>Text ONLY</p>\n<div class=\"codehilite\"><pre><span class=\"nt\">&lt;Patient</span> <span class=\"na\">xmlns=</span><span class=\"s\">&quot;http://hl7.org/fhir&quot;</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;id</span> <span class=\"na\">value=</span><span class=\"s\">&quot;test-patient-1&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;meta&gt;</span>\n        <span class=\"nt\">&lt;profile</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://hl7.org/fhir/StructureDefinition/Patient&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/meta&gt;</span>\n    <span class=\"nt\">&lt;name&gt;</span>\n        <span class=\"nt\">&lt;text</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Testing, Mrs. Annette M.D.&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/name&gt;</span>\n    <span class=\"nt\">&lt;maritalStatus&gt;</span>\n        <span class=\"nt\">&lt;text</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Married&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/maritalStatus&gt;</span>\n<span class=\"nt\">&lt;/Patient&gt;</span>\n</pre></div>\n\n\n<p><a href=\"http://fhir3.healthintersections.com.au/open\" target=\"_blank\" title=\"http://fhir3.healthintersections.com.au/open\">http://fhir3.healthintersections.com.au/open</a>: Rejected<br>\n<a href=\"http://wildfhir.aegis.net/fhir1-6-0\" target=\"_blank\" title=\"http://wildfhir.aegis.net/fhir1-6-0\">http://wildfhir.aegis.net/fhir1-6-0</a>: Accepted (201)<br>\n<a href=\"http://fhirtest.uhn.ca/baseDstu3\" target=\"_blank\" title=\"http://fhirtest.uhn.ca/baseDstu3\">http://fhirtest.uhn.ca/baseDstu3</a>: Accepted (200)<br>\n<a href=\"http://spark.furore.com/fhir\" target=\"_blank\" title=\"http://spark.furore.com/fhir\">http://spark.furore.com/fhir</a>: Accepted (200)</p>\n<p>Code ONLY (no system):</p>\n<div class=\"codehilite\"><pre><span class=\"nt\">&lt;Patient</span> <span class=\"na\">xmlns=</span><span class=\"s\">&quot;http://hl7.org/fhir&quot;</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;id</span> <span class=\"na\">value=</span><span class=\"s\">&quot;test-patient-1&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;meta&gt;</span>\n        <span class=\"nt\">&lt;profile</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://hl7.org/fhir/StructureDefinition/Patient&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/meta&gt;</span>\n    <span class=\"nt\">&lt;name&gt;</span>\n        <span class=\"nt\">&lt;text</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Testing, Mrs. Annette M.D.&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/name&gt;</span>\n    <span class=\"nt\">&lt;maritalStatus&gt;</span>\n        <span class=\"nt\">&lt;coding&gt;</span>\n            <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">&quot;M&quot;</span> <span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;/coding&gt;</span>\n    <span class=\"nt\">&lt;/maritalStatus&gt;</span>\n<span class=\"nt\">&lt;/Patient&gt;</span>\n</pre></div>\n\n\n<p><a href=\"http://fhir3.healthintersections.com.au/open\" target=\"_blank\" title=\"http://fhir3.healthintersections.com.au/open\">http://fhir3.healthintersections.com.au/open</a>: Rejected<br>\n<a href=\"http://wildfhir.aegis.net/fhir1-6-0\" target=\"_blank\" title=\"http://wildfhir.aegis.net/fhir1-6-0\">http://wildfhir.aegis.net/fhir1-6-0</a>: Accepted (201)<br>\n<a href=\"http://fhirtest.uhn.ca/baseDstu3\" target=\"_blank\" title=\"http://fhirtest.uhn.ca/baseDstu3\">http://fhirtest.uhn.ca/baseDstu3</a>: Accepted (200)<br>\n<a href=\"http://spark.furore.com/fhir\" target=\"_blank\" title=\"http://spark.furore.com/fhir\">http://spark.furore.com/fhir</a>: Accepted (200)</p>\n<p>System ONLY (no code):</p>\n<div class=\"codehilite\"><pre><span class=\"nt\">&lt;Patient</span> <span class=\"na\">xmlns=</span><span class=\"s\">&quot;http://hl7.org/fhir&quot;</span><span class=\"nt\">&gt;</span>\n    <span class=\"nt\">&lt;id</span> <span class=\"na\">value=</span><span class=\"s\">&quot;test-patient-1&quot;</span> <span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;meta&gt;</span>\n        <span class=\"nt\">&lt;profile</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://hl7.org/fhir/StructureDefinition/Patient&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/meta&gt;</span>\n    <span class=\"nt\">&lt;name&gt;</span>\n        <span class=\"nt\">&lt;text</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Testing, Mrs. Annette M.D.&quot;</span><span class=\"nt\">/&gt;</span>\n    <span class=\"nt\">&lt;/name&gt;</span>\n    <span class=\"nt\">&lt;maritalStatus&gt;</span>\n        <span class=\"nt\">&lt;coding&gt;</span>\n            <span class=\"nt\">&lt;system</span> <span class=\"na\">value=</span><span class=\"s\">&quot;http://hl7.org/fhir/v3/MaritalStatus&quot;</span> <span class=\"nt\">/&gt;</span>\n        <span class=\"nt\">&lt;/coding&gt;</span>\n    <span class=\"nt\">&lt;/maritalStatus&gt;</span>\n<span class=\"nt\">&lt;/Patient&gt;</span>\n</pre></div>\n\n\n<p><a href=\"http://fhir3.healthintersections.com.au/open\" target=\"_blank\" title=\"http://fhir3.healthintersections.com.au/open\">http://fhir3.healthintersections.com.au/open</a>: Rejected<br>\n<a href=\"http://wildfhir.aegis.net/fhir1-6-0\" target=\"_blank\" title=\"http://wildfhir.aegis.net/fhir1-6-0\">http://wildfhir.aegis.net/fhir1-6-0</a>: Accepted (201)<br>\n<a href=\"http://fhirtest.uhn.ca/baseDstu3\" target=\"_blank\" title=\"http://fhirtest.uhn.ca/baseDstu3\">http://fhirtest.uhn.ca/baseDstu3</a>: Accepted (200)<br>\n<a href=\"http://spark.furore.com/fhir\" target=\"_blank\" title=\"http://spark.furore.com/fhir\">http://spark.furore.com/fhir</a>: Accepted (200)</p>",
        "id": 153852703,
        "sender_full_name": "Chris Grenz",
        "timestamp": 1476292581
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191351\">@Chris Grenz</span> For wildfhir I currently do not have validation enabled on the resource payload of the create or update operations. I'll let you know when I have that turned on. -Thanks.</p>",
        "id": 153852706,
        "sender_full_name": "Richard Ettema",
        "timestamp": 1476294324
    },
    {
        "content": "<p>All those are not valid, because the marital status binding is required. </p>",
        "id": 153852720,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1476301606
    },
    {
        "content": "<p>there is at least one task for PA to fix the definition of Marital status to be a code or not a required binding</p>",
        "id": 153852721,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1476301625
    },
    {
        "content": "<p>Good, I interpreted correctly!  Only your server is rejecting them today.  Richard mentioned that Wildfhir isn't doing validation, so that makes sense.  But I think the others are - they rejected a bogus gender code.</p>",
        "id": 153852733,
        "sender_full_name": "Chris Grenz",
        "timestamp": 1476307171
    },
    {
        "content": "<p>Not trying to call anyone out on their implementation!  Just using the implementations as a test to determine how consistently we're all interpreting the standard.</p>",
        "id": 153852734,
        "sender_full_name": "Chris Grenz",
        "timestamp": 1476307245
    },
    {
        "content": "<p>hapi should be the same, since it's using my validator underneath </p>",
        "id": 153852735,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1476307359
    },
    {
        "content": "<p>hmmm...not what I saw today</p>",
        "id": 153852736,
        "sender_full_name": "Chris Grenz",
        "timestamp": 1476307415
    },
    {
        "content": "<p>Maybe my assumption of validation on write is bogus</p>",
        "id": 153852737,
        "sender_full_name": "Chris Grenz",
        "timestamp": 1476307432
    },
    {
        "content": "<p>Chris, spark currently is not doing validation. Only what the parser can not deal with is rejected. We will have validation re-enabled soon.</p>",
        "id": 153852769,
        "sender_full_name": "Martijn Harthoorn",
        "timestamp": 1476351604
    },
    {
        "content": "<p>Hi Chis,</p>",
        "id": 153853041,
        "sender_full_name": "Kevan Riley",
        "timestamp": 1476760302
    },
    {
        "content": "<p>Were you able to get any Patient Resource with MaritalStatus to post agaist Health Intersectiosn server?</p>",
        "id": 153853042,
        "sender_full_name": "Kevan Riley",
        "timestamp": 1476760343
    },
    {
        "content": "<p>If a take a Patient Resource that validates ok on HealthIntersections, and add the following, I get erros aobut the Code:</p>",
        "id": 153853043,
        "sender_full_name": "Kevan Riley",
        "timestamp": 1476760676
    },
    {
        "content": "<p>&lt;maritalStatus&gt;<br>\n        &lt;coding&gt;<br>\n            &lt;system value=\"<a href=\"http://hl7.org/fhir/marital-status\" target=\"_blank\" title=\"http://hl7.org/fhir/marital-status\">http://hl7.org/fhir/marital-status</a>\" /&gt;<br>\n            &lt;code value=\"T\" /&gt;<br>\n        &lt;/coding&gt;<br>\n        &lt;text value=\"Domestic Partner\" /&gt;<br>\n    &lt;/maritalStatus&gt;</p>",
        "id": 153853044,
        "sender_full_name": "Kevan Riley",
        "timestamp": 1476760688
    },
    {
        "content": "<p>(I also updated the Coding.System value to \"<a href=\"http://hl7.org/fhir/ValueSet/marital-status\" target=\"_blank\" title=\"http://hl7.org/fhir/ValueSet/marital-status\">http://hl7.org/fhir/ValueSet/marital-status</a>\", still \"None of the codes provided are in the value set... blah blah blah...) </p>",
        "id": 153853045,
        "sender_full_name": "Kevan Riley",
        "timestamp": 1476760926
    },
    {
        "content": "<p>I think the system is supposed to be \"<a href=\"http://hl7.org/fhir/v3/MaritalStatus\" target=\"_blank\" title=\"http://hl7.org/fhir/v3/MaritalStatus\">http://hl7.org/fhir/v3/MaritalStatus</a>\" - it should be an URI for the code system rather than for the value set.</p>",
        "id": 153853097,
        "sender_full_name": "Igor Sirkovich",
        "timestamp": 1476814362
    },
    {
        "content": "<p>right. that shouldn't change the outcome</p>",
        "id": 153853104,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1476819944
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>  to Use case for \"required to be from this value set, unless uncoded/freetext\". That is most of the Argonaut profiles. EG: a vital sign must have a loinc code unless it's freetext. Allergy must be RxNorm, NDF-RT, SNOMED unless freetext, etc</p>",
        "id": 153853419,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1476984083
    },
    {
        "content": "<p>DataAbsentReason for most of Argonaut is only brought in on value[x] type fields</p>",
        "id": 153853420,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1476984140
    },
    {
        "content": "<p>Why don't the argonaut profiles allow for local codes?</p>",
        "id": 153853455,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1476992128
    },
    {
        "content": "<p>I'm guessing because in the grand scheme of integration, those aren't usually very helpful for a realtime app that wants to run on multiple vendor systems</p>",
        "id": 153853509,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1476996189
    },
    {
        "content": "<p>It doesn't prevent them - requried means you could add a local as long as you have one from the required. But they don't help much from a interop side</p>",
        "id": 153853511,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1476996223
    },
    {
        "content": "<p>Also, some of these are *truely* freetext in the source system - not coded</p>",
        "id": 153853512,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1476996237
    },
    {
        "content": "<p>Agree that sometimes these are truly free text</p>",
        "id": 153853516,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1476996398
    },
    {
        "content": "<p>and I agree that local codes are not usually helpful. but this is not the same as 'not helpful', and I don't see that there's a reason to prohibit them </p>",
        "id": 153853517,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1476996429
    },
    {
        "content": "<p>so this is just a standard extensibole binding then</p>",
        "id": 153853518,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1476996459
    },
    {
        "content": "<p>To clarify the Argo discussion.  We define a lot of extensible and required binding with standard codes.  We also clarified that free text only is OK for extensible. ( Because the core is unclear on this )  We did not say anything about this for required bindings.   and so the \"use this code or free text\" discussion here is new.   And translation were always allowed.  <span class=\"user-mention\" data-user-id=\"191356\">@Jenni Syed</span>  is this something we need to address on the next argo call.    Do we need a <br>\n<em>Freetextonly</em> extension for required?</p>",
        "id": 153853538,
        "sender_full_name": "Eric Haas",
        "timestamp": 1476997752
    },
    {
        "content": "<p>required does not allow free text. It has to be coded. Except if you have extensions... maybe there's a problem there. And did you create a task about the lack of clarity?</p>",
        "id": 153853539,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1476997887
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191401\">@Eric Haas</span> I think we've clarified where text only is required, may want a quick inventory of what we're defining extensible vs. required so we know where the 'freetext' isn't really allowed by core FHIR. I would hate to add an extension to cover this use case, so maybe it becomes extensible? but then we can't require the specific coding without an invariant.</p>",
        "id": 153853540,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1476997913
    },
    {
        "content": "<p>would like to know the use cases for 'required or text'?</p>",
        "id": 153853541,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1476998024
    },
    {
        "content": "<p>OK I'll  do the inventory,  make the task for more clarity in core  and I don't know you mean by the invariant</p>",
        "id": 153853542,
        "sender_full_name": "Eric Haas",
        "timestamp": 1476998035
    },
    {
        "content": "<p>Yeah <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> it's probably just extensible and they can provide a local code if they want. We just avoided the local code conversation I believe there since it didn't help solve some of the use cases/concerns</p>",
        "id": 153853543,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1476998114
    },
    {
        "content": "<p>If the EHR only has free text for an element with a required binding .  e.g medication code  as a hypothetical example</p>",
        "id": 153853544,
        "sender_full_name": "Eric Haas",
        "timestamp": 1476998149
    },
    {
        "content": "<p>I may have to re-review our internal \"required\" bindings b/c the freetext limitation was not something I was aware of</p>",
        "id": 153853545,
        "sender_full_name": "Jenni Syed",
        "timestamp": 1476998176
    }
]