[
    {
        "content": "<p>Hi everyone! I'm currently playing with Observation.class and i try to get ValueQuantity to receive value parameters at number or string, but i can't. I'm working in JAVA with Eclipse software. <br>\nI tried to perform observation.getValue().toString() and i got rare numbers and letters (ie: ca.uhn.fhir.model.dstu2.composite.QuantityDt@144ada6e)<br>\nThanks! </p>",
        "id": 153854950,
        "sender_full_name": "Alvaro Riquelme Godoy",
        "timestamp": 1477961012
    },
    {
        "content": "<p>You need to check what type of value is contained in the Observation and use the appropriate getter (or check the type returned by <code>getValue()</code>)</p>\n<div class=\"codehilite\"><pre>if(observation.hasValueQuantity()) {\n   QuantityDt quantity = observation.getValueQuantity();\n   // TODO do stuff with quantity\n} else if(observation.hasValueStringType()) {\n   //...\n</pre></div>",
        "id": 153854951,
        "sender_full_name": "Rowan Foster",
        "timestamp": 1477961705
    },
    {
        "content": "<p>We tried using this, but the three methods mentioned are not recognized by our environment. We're working with a bundle of the resource, if it's any help. <br>\nWe alse checked the observation.class file, and we didn't find this methods either.<br>\nThank you for the help!</p>",
        "id": 153854957,
        "sender_full_name": "Alvaro Riquelme Godoy",
        "timestamp": 1477964804
    },
    {
        "content": "<p>What version of HAPI are you using?</p>\n<p>You could just check the type as I mentioned eg</p>\n<div class=\"codehilite\"><pre>Type value = observation.getValue();\nif(value instanceof QuantityDt) {\n    QuantityDt valueAsQuantity = (QuantityDt)value;\n    // TODO do stuff with valueAsQuantity\n}\n</pre></div>",
        "id": 153854959,
        "sender_full_name": "Rowan Foster",
        "timestamp": 1477966631
    },
    {
        "content": "<p>Hi, I'm working with Alvaro, we're using HAPI dstu2 1.4. And we checked the type of observation.getValue() is IDatatype. So we couldn't run the codes that you've sent. Thanks again for the help. If you think that it has to do with the HAPI version, which one do you suggest?</p>",
        "id": 153855111,
        "sender_full_name": "Marcela Aguirre Jerez",
        "timestamp": 1478114294
    },
    {
        "content": "<p>Hi Marcela,</p>\n<p>The code above that Rowan posted should work, although it has one minor correction:</p>\n<div class=\"codehilite\"><pre><span class=\"n\">IDatatype</span> <span class=\"n\">value</span> <span class=\"o\">=</span> <span class=\"n\">observation</span><span class=\"o\">.</span><span class=\"na\">getValue</span><span class=\"o\">();</span>\n<span class=\"k\">if</span><span class=\"o\">(</span><span class=\"n\">value</span> <span class=\"k\">instanceof</span> <span class=\"n\">QuantityDt</span><span class=\"o\">)</span> <span class=\"o\">{</span>\n    <span class=\"n\">QuantityDt</span> <span class=\"n\">valueAsQuantity</span> <span class=\"o\">=</span> <span class=\"o\">(</span><span class=\"n\">QuantityDt</span><span class=\"o\">)</span><span class=\"n\">value</span><span class=\"o\">;</span>\n    <span class=\"c1\">// TODO do stuff with valueAsQuantity</span>\n<span class=\"o\">}</span>\n</pre></div>\n\n\n<p>Basically the field Observation.value has multiple allowed types per the FHIR spec, so you need to test which one is actually there via instanceof.</p>",
        "id": 153855607,
        "sender_full_name": "James Agnew",
        "timestamp": 1478314253
    },
    {
        "content": "<p>Meant to tag you <span class=\"user-mention\" data-user-id=\"192076\">@Marcela Aguirre Jerez</span> </p>",
        "id": 153855608,
        "sender_full_name": "James Agnew",
        "timestamp": 1478314310
    },
    {
        "content": "<p>Thank you <span class=\"user-mention\" data-user-id=\"191319\">@James Agnew</span> !!</p>",
        "id": 153855621,
        "sender_full_name": "Marcela Aguirre Jerez",
        "timestamp": 1478360440
    }
]