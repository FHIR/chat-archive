[
    {
        "content": "<p>Hi ,<br>\nI have a question on how to query combined resources. I have a MedicationStatement linked with a Medication that includes the ingredient using Snomed Code as shown below. <br>\nI wanted to ask if there is a way to fetch MedicationStatement based on ingredient of Medication that is linked</p>\n<p>Thanks !!!</p>\n<p>{<br>\n      \"resource\": {<br>\n        \"resourceType\": \"Medication\",<br>\n        \"text\": {<br>\n          \"status\": \"generated\",<br>\n          \"div\": \"&lt;div xmlns='<a href=\"http://www.w3.org/1999/xhtml'&gt;Heparin&lt;a\" target=\"_blank\" title=\"http://www.w3.org/1999/xhtml'&gt;Heparin&lt;a\">http://www.w3.org/1999/xhtml'&gt;Heparin&lt;a</a> name='mm'/&gt;&lt;/div&gt;\"<br>\n        },<br>\n        \"id\": \"cf-1549540582337\",<br>\n        \"ingredient\": [<br>\n          {<br>\n            \"itemCodeableConcept\": {<br>\n              \"coding\": [<br>\n                {<br>\n                  \"code\": \"372877000\",<br>\n                  \"system\": \"<a href=\"http://snomed.info/sct\" target=\"_blank\" title=\"http://snomed.info/sct\">http://snomed.info/sct</a>\",<br>\n                  \"display\": \"Heparin\"<br>\n                }<br>\n              ]<br>\n            }<br>\n          }<br>\n        ]<br>\n      }<br>\n    },<br>\n    {<br>\n      \"resource\": {<br>\n        \"resourceType\": \"MedicationStatement\",<br>\n        \"text\": {<br>\n          \"status\": \"generated\",<br>\n          \"div\": \"&lt;div xmlns='<a href=\"http://www.w3.org/1999/xhtml'&gt;Heparin&lt;a\" target=\"_blank\" title=\"http://www.w3.org/1999/xhtml'&gt;Heparin&lt;a\">http://www.w3.org/1999/xhtml'&gt;Heparin&lt;a</a> name='mm'/&gt;&lt;/div&gt;\"<br>\n        },<br>\n        \"id\": \"cf-1549540671859\",<br>\n        \"subject\": {<br>\n          \"reference\": \"Patient/cf-1549443666155\"<br>\n        },<br>\n        \"medicationReference\": {<br>\n          \"reference\": \"Medication/cf-1549540582337\"<br>\n        }<br>\n      }<br>\n    },</p>",
        "id": 157771770,
        "sender_full_name": "Nikolaos Tselas",
        "timestamp": 1549541439
    },
    {
        "content": "<p>At a workflow level, are you looking for all the medications anyone in in the system is taking that have that ingredient (in the case of a recall or something)?</p>",
        "id": 157778894,
        "sender_full_name": "Michael Donnelly",
        "timestamp": 1549548531
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191936\">@Michael Donnelly</span>  for your response. I am looking all the medications of a specific Patient based on ingredient.<br>\nI can retrieve all MedicationStatements using something like this:<br>\n<a href=\"http://fhirtest.uhn.ca/baseDstu3/MedicationStatement?subject=Patient/cf-1549443666155\" target=\"_blank\" title=\"http://fhirtest.uhn.ca/baseDstu3/MedicationStatement?subject=Patient/cf-1549443666155\">http://fhirtest.uhn.ca/baseDstu3/MedicationStatement?subject=Patient/cf-1549443666155</a></p>\n<p>So every Medication is linked to a Medication that contains the ingredient.<br>\nMy question is how can I fetch the medication that contains a specific ingredient?</p>",
        "id": 157779213,
        "sender_full_name": "Nikolaos Tselas",
        "timestamp": 1549548829
    },
    {
        "content": "<p>Do you want to search for <br>\n1. Medications that have the ingredient<br>\n2. MedicationStatements that have a Medication that have the ingredient<br>\n3. Something else?</p>",
        "id": 157779622,
        "sender_full_name": "Michael Donnelly",
        "timestamp": 1549549185
    },
    {
        "content": "<p>If it is possible I want both Medication &amp; MedicationStatement containing an Ingredient of specific Patient :</p>\n<p>1. Medications of patient A, that contain ingredient X<br>\n2. MedicationStatements of patient A, that contain the Medication which ingredient is X</p>",
        "id": 157779861,
        "sender_full_name": "Nikolaos Tselas",
        "timestamp": 1549549341
    },
    {
        "content": "<p>The FHIR standard may have chained queries that do what you want, but I definitely wouldn't assume servers have implemented them.  I'd break it into smaller pieces.  </p>\n<ul>\n<li><a href=\"http://hl7.org/implement/standards/fhir/medication.html\" target=\"_blank\" title=\"http://hl7.org/implement/standards/fhir/medication.html\">Medication</a> has search parameters:<ul>\n<li><strong>ingredient</strong> - Reference to a Substance or to another Medication (for compounds)</li>\n<li><strong>ingredient-code</strong> - CodableConcept for Medication.ingredient</li>\n</ul>\n</li>\n<li><a href=\"http://hl7.org/implement/standards/fhir/medicationstatement.html\" target=\"_blank\" title=\"http://hl7.org/implement/standards/fhir/medicationstatement.html\">MedicationStatement</a><ul>\n<li>patient - you know this part already</li>\n<li><strong>medication</strong> - Reference to a Medication</li>\n</ul>\n</li>\n</ul>\n<p>I'd search for <code>[base]/Medication?ingredient=http%3A%2F%2Fsnomed.info%2Fsct|386983007</code>to get the Medications with Alprazolam as an ingredient.  Then for each of medication returned I'd search <code>[base]/MedicationStatement?patient=cf-1549443666155&amp;medication=thatMed</code>.</p>",
        "id": 157781640,
        "sender_full_name": "Michael Donnelly",
        "timestamp": 1549550692
    },
    {
        "content": "<p>FHIR allows you to combine the latter into <code>[base]/MedicationStatement?patient=cf-1549443666155&amp;medication=med1,med2,med3</code> or combine the whole thing into <code>[base]/MedicationStatement?patient=cf-1549443666155&amp;medication.ingredient=http%3A%2F%2Fsnomed.info%2Fsct|386983007</code>.  But I wouldn't develop that without first confirming that the FHIR server(s) I was likely to work with actually supported that chain.</p>",
        "id": 157781975,
        "sender_full_name": "Michael Donnelly",
        "timestamp": 1549550941
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191759\">@Melva Peters</span> Is this something we want to build a short-cut search parameter for?</p>",
        "id": 157785799,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1549554068
    },
    {
        "content": "<p>I'll raise a tracker item for Pharmacy Work Group to consider</p>",
        "id": 157803391,
        "sender_full_name": "Melva Peters",
        "timestamp": 1549566337
    },
    {
        "content": "<p>GF tracker added 20364 <a href=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=20364\" target=\"_blank\" title=\"https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=20364\">https://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=20364</a></p>",
        "id": 157803697,
        "sender_full_name": "Melva Peters",
        "timestamp": 1549566562
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191936\">@Michael Donnelly</span> ! You were really helpful !</p>",
        "id": 157849074,
        "sender_full_name": "Nikolaos Tselas",
        "timestamp": 1549621430
    }
]