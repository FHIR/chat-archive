[
    {
        "content": "<p>I have gotten reports that validation fails, if an attribute with an optional datatype e.g. value[x] is only constrained on datatype. Which would mean that an Observation.value[x] constrained to string, without any other profiling done to the value[x] field, will not validate. Differential looks like this:<br>\n,<br>\n      {<br>\n        \"id\" : \"Observation.value[x]\",<br>\n        \"path\" : \"Observation.value[x]\",<br>\n        \"type\" : [<br>\n          {<br>\n            \"code\" : \"string\"<br>\n          }<br>\n        ]<br>\n      },</p>\n<p>Has anyone else experienced this? If yes, why is it that it doesn't validate?</p>",
        "id": 210508101,
        "sender_full_name": "Kirstine Rosenbeck Gøeg",
        "timestamp": 1600430020
    },
    {
        "content": "<p>can you provide a full profile and an instance? I'm not quite sure what you mean</p>",
        "id": 210508325,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1600430175
    },
    {
        "content": "<p>I have both a profile and an example on this one: <a href=\"http://build.fhir.org/ig/Kirstinerosenbeck/FKInfo/branches/master/StructureDefinition-KLCommonCareSocialInformation.html\">http://build.fhir.org/ig/Kirstinerosenbeck/FKInfo/branches/master/StructureDefinition-KLCommonCareSocialInformation.html</a><br>\n(I know the profile has a stupid name, because everything is \"information\", and that the IG has a silly path - it is a work i progress)</p>",
        "id": 210509252,
        "sender_full_name": "Kirstine Rosenbeck Gøeg",
        "timestamp": 1600430791
    },
    {
        "content": "<p>so I validated this resource against the profile <a href=\"http://kl.dk/fhir/common/caresocial/StructureDefinition/KLCommonCareSocialInformation\">http://kl.dk/fhir/common/caresocial/StructureDefinition/KLCommonCareSocialInformation</a> using the package from that branch:</p>\n<div class=\"codehilite\" data-code-language=\"JSON\"><pre><span></span><code><span class=\"p\">{</span>\n  <span class=\"nt\">\"resourceType\"</span> <span class=\"p\">:</span> <span class=\"s2\">\"Observation\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"id\"</span> <span class=\"p\">:</span> <span class=\"s2\">\"MobilityInformation\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"meta\"</span> <span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"nt\">\"profile\"</span> <span class=\"p\">:</span> <span class=\"p\">[</span>\n      <span class=\"s2\">\"http://kl.dk/fhir/common/caresocial/StructureDefinition/KLCommonCareSocialInformation\"</span>\n    <span class=\"p\">]</span>\n  <span class=\"p\">},</span>\n  <span class=\"nt\">\"status\"</span> <span class=\"p\">:</span> <span class=\"s2\">\"final\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"code\"</span> <span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"nt\">\"coding\"</span> <span class=\"p\">:</span> <span class=\"p\">[</span>\n      <span class=\"p\">{</span>\n        <span class=\"nt\">\"system\"</span> <span class=\"p\">:</span> <span class=\"s2\">\"urn:oid:1.2.208.176.2.21\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"code\"</span> <span class=\"p\">:</span> <span class=\"s2\">\"J3\"</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"display\"</span> <span class=\"p\">:</span> <span class=\"s2\">\"Mobilitet\"</span>\n      <span class=\"p\">}</span>\n    <span class=\"p\">]</span>\n  <span class=\"p\">},</span>\n  <span class=\"nt\">\"subject\"</span> <span class=\"p\">:</span> <span class=\"p\">{</span>\n    <span class=\"nt\">\"reference\"</span> <span class=\"p\">:</span> <span class=\"s2\">\"Patient/Judith\"</span>\n  <span class=\"p\">},</span>\n  <span class=\"nt\">\"effectiveDateTime\"</span> <span class=\"p\">:</span> <span class=\"s2\">\"2020-08-11T15:28:17-01:00\"</span><span class=\"p\">,</span>\n  <span class=\"nt\">\"valueString\"</span> <span class=\"p\">:</span> <span class=\"s2\">\"Judith har faldtendens, men er meget dedikeret ift. at lære at bruge sin rollator indendørs og udendørs, og desuden går hun en tur på 30min hver dag\"</span>\n<span class=\"p\">}</span>\n</code></pre></div>",
        "id": 210856118,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1600773561
    },
    {
        "content": "<p>I got this output:</p>",
        "id": 210856122,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1600773565
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>|FHIR Validation tool Version 5.1.11-SNAPSHOT (Git# 8a11bd2e9b6f). Built 2020-09-16T06:48:26.711+10:00 (6 days old)\n  Java:   1.8.0_251 from C:\\Program Files\\Java\\jre1.8.0_251 on amd64 (64bit). 14526MB available\n  Paths:  Current = c:\\temp, Package Cache = C:\\Users\\graha\\.fhir\\packages\n  Params: C:\\temp\\mobility.json -ig C:\\temp\\package-dk.tgz -profile http://kl.dk/fhir/common/caresocial/StructureDefinition/KLCommonCareSocialInformation\nScanning for versions (no -version parameter):\n  Package C:\\temp\\package-dk.tgz: 4.0\n-&gt; use version 4.0\nLoading\n  Load FHIR v4.0 from hl7.fhir.r4.core#4.0.1 - 4575 resources (00:03.0826)\n  Terminology server http://tx.fhir.org - Version 1.0.349 (00:02.0927)\n  Load C:\\temp\\package-dk.tgz+  .. load IG from hl7.fhir.us.core#3.1.0 - 228 resources (00:00.0922)\n  Get set...  go (00:00.0002)\nValidating\n  Profiles: [http://kl.dk/fhir/common/caresocial/StructureDefinition/KLCommonCareSocialInformation]\n  Validate C:\\temp\\mobility.json 00:00.0116\nDone. Times: Loading: 00:08.0168, validation: 00:00.0116\n\n*FAILURE*: 1 errors, 0 warnings, 1 notes\n  Error @ Observation.code (line 11, col17) : None of the codes provided are in the value set http://kl.dk/fhir/common/caresocial/ValueSet/KLInformationCodes (http://kl.dk/fhir/common/caresocial/ValueSet/KLInformationCodes), and a code from this value set is required) (codes = urn:oid:1.2.208.176.2.21#J3)\n  Information @ Observation.code.coding[0] (line 12, col8) : Code System URI &#39;urn:oid:1.2.208.176.2.21&#39; is unknown so the code cannot be validated\n</code></pre></div>",
        "id": 210856127,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1600773572
    },
    {
        "content": "<p>Thanks. That is an expected error - sorry I didn't catch that before I decided this was a great example.  No errors regarding the validation of valueString so that is great. Wonder if <span class=\"user-mention\" data-user-id=\"256845\">@Signe Hejgaard Kristoffersen</span> could remember more details about what it is that won't validate in their system?</p>",
        "id": 210969825,
        "sender_full_name": "Kirstine Rosenbeck Gøeg",
        "timestamp": 1600848015
    }
]