[
    {
        "content": "<p>Hi all,<br>\nI'm getting the following error while validating (with the HAPI FHIR validation framework) a MedicationStatement: <em>The value provided ('d') is not in the value set <a href=\"http://hl7.org/fhir/ValueSet/units-of-time|4.0.0\" target=\"_blank\" title=\"http://hl7.org/fhir/ValueSet/units-of-time|4.0.0\">http://hl7.org/fhir/ValueSet/units-of-time|4.0.0</a> (<a href=\"http://hl7.org/fhir/ValueSet/units-of-time\" target=\"_blank\" title=\"http://hl7.org/fhir/ValueSet/units-of-time\">http://hl7.org/fhir/ValueSet/units-of-time</a>, and a code is required from this value set) (error message = Unknown code[d] in system[(none)])</em></p>\n<p>This is the code that I use for creating the instance of Timing:</p>\n<div class=\"codehilite\"><pre><span></span>Timing timing = new Timing();\n        timing.setRepeat((new Timing.TimingRepeatComponent())\n                .setFrequency(2)\n                .setPeriod(1)\n                .setPeriodUnit(Timing.UnitsOfTime.D)\n                .addTimeOfDay(&quot;08:00:00&quot;)\n                .addTimeOfDay(&quot;20:00:00&quot;));\n</pre></div>\n\n\n<p>and this is the corresponding generated JSON:</p>\n<div class=\"codehilite\"><pre><span></span>            &quot;timing&quot;: {\n              &quot;repeat&quot;: {\n                &quot;frequency&quot;: 2,\n                &quot;period&quot;: 1,\n                &quot;periodUnit&quot;: &quot;d&quot;,\n                &quot;timeOfDay&quot;: [\n                  &quot;08:00:00&quot;,\n                  &quot;20:00:00&quot;\n                ]\n              }\n            }\n</pre></div>\n\n\n<p>The error is quite clear to understand, but I do not understand how to provide also the system (\"<a href=\"http://unitsofmeasure.org\" target=\"_blank\" title=\"http://unitsofmeasure.org\">http://unitsofmeasure.org</a>\") to periodUnit, because the Timing java class only allows using only Timing.UnitsOfTime in method setPeriodUnit(). </p>\n<p>The version I'm using is R4 version 4.1.0</p>\n<p>Thanks<br>\nAlessio Graziani</p>",
        "id": 190966331,
        "sender_full_name": "Alessio Graziani",
        "timestamp": 1584530337
    },
    {
        "content": "<p>I'd say the validation has it wrong - <code>periodUnit</code> is a code, so does not have (nor need) a system, and <code>d</code> is a valid code</p>",
        "id": 190979444,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1584538273
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span></p>",
        "id": 190983787,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1584540223
    },
    {
        "content": "<p>looks like a HAPI issue around hosting the validator to me .</p>",
        "id": 191062585,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1584580378
    },
    {
        "content": "<p>What else should I do to get help for this potential issue? I also added an item on the Google HAPI groups...</p>",
        "id": 191130330,
        "sender_full_name": "Alessio Graziani",
        "timestamp": 1584632020
    },
    {
        "content": "<p>HAPI is doing a lot of work to address issues like this in release5 of HAPI - so try in the R5 candidate</p>",
        "id": 192168446,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1585479581
    }
]