[
    {
        "content": "<p>Hi,</p>\n<p>I've a question about CapabilityStatement.rest.resource.searchInclude.</p>\n<p>To my knowledge, normally you would include the resource path here. How does this work if you would want to use an include on a custom search parameter defined in an extension?</p>\n<p>Would you use a FHIR path expression like this?</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"nt\">&lt;resource&gt;</span>\n           <span class=\"nt\">&lt;type</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Procedure&quot;</span> <span class=\"nt\">/&gt;</span>\n           <span class=\"nt\">&lt;interaction&gt;</span>\n               <span class=\"nt\">&lt;code</span> <span class=\"na\">value=</span><span class=\"s\">&quot;search-type&quot;</span> <span class=\"nt\">/&gt;</span>\n           <span class=\"nt\">&lt;/interaction&gt;</span>\n           <span class=\"nt\">&lt;searchInclude</span> <span class=\"na\">value=</span><span class=\"s\">&quot;Procedure. extension(&#39;http://example.com/extensionURL&#39;)&quot;</span> <span class=\"nt\">/&gt;</span>\n</pre></div>",
        "id": 179832117,
        "sender_full_name": "Eduard de Rijcke",
        "timestamp": 1572873771
    },
    {
        "content": "<p>I do not think a resource path goes there - it is the actual value to use for the _include parameter - eg Procedue:custom-search-parameter  - where that is the name of the search parameter corresponding to that extension</p>",
        "id": 179832771,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1572874224
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"191912\">@Michele Mottini</span> ,<br>\nThat would have been my first guess as well. However, if I look at the CapabilityStatement examples in the FHIR spec I see that a path is used.</p>\n<p>So for <a href=\"https://www.hl7.org/fhir/stu3/capabilitystatement-base.xml.html\" target=\"_blank\" title=\"https://www.hl7.org/fhir/stu3/capabilitystatement-base.xml.html\">https://www.hl7.org/fhir/stu3/capabilitystatement-base.xml.html</a> a path is used in .searchInclude while in .searchParameter.name the searchparameter name is used.</p>",
        "id": 179843648,
        "sender_full_name": "Ardon Toonstra",
        "timestamp": 1572881780
    },
    {
        "content": "<p>Seems wrong to me - and they are not even exactly the path :</p>\n<div class=\"codehilite\"><pre><span></span>       &lt;searchInclude value=&quot;Account.subject&quot;/&gt;\n      &lt;searchInclude value=&quot;Account.patient&quot;/&gt;\n</pre></div>",
        "id": 179844251,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1572882172
    },
    {
        "content": "<p>I noticed that public test servers behave differently:</p>\n<p>HAPI does something like this: &lt;searchInclude value=\"Specimen:collector\"/&gt;<br>\nVONK does: &lt;searchInclude value=\"Specimen.collector\" /&gt;<br>\nFor some reason, I can’t collect the CS of Grahame’s server.</p>",
        "id": 179844808,
        "sender_full_name": "Ardon Toonstra",
        "timestamp": 1572882514
    },
    {
        "content": "<p>Maybe its not the path but the resource type followed by the search parameter name. The CS resource is not really precise on what's expected here</p>",
        "id": 179845062,
        "sender_full_name": "Ardon Toonstra",
        "timestamp": 1572882693
    },
    {
        "content": "<p>what you would put there is what the client is allowed to put in the _include statement when searching on that resource type</p>",
        "id": 179865685,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1572895415
    },
    {
        "content": "<p>see <a href=\"https://build.fhir.org/ig/HL7/US-Core-R4/CapabilityStatement-us-core-server.json.html\" target=\"_blank\" title=\"https://build.fhir.org/ig/HL7/US-Core-R4/CapabilityStatement-us-core-server.json.html\">US Cores's CapStatement</a> for an example of how this is done.</p>",
        "id": 179888012,
        "sender_full_name": "Eric Haas",
        "timestamp": 1572910202
    },
    {
        "content": "<p>Thank you. For now it's clear what to do at the CapabilityStatements with the US Core's CapStatement example. </p>\n<p>At the CS of Grahame's server (R3 &amp; R4) the is no examples of &lt;searchInclude value=\".....\"/&gt;. We have only found _includes in the search parameter &lt;searchParam&gt; it self but I think this is not the same as a searchInclude, isn't it?</p>",
        "id": 179921089,
        "sender_full_name": "Eduard de Rijcke",
        "timestamp": 1572951820
    },
    {
        "content": "<p><a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=25175\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=25175\">GF#25175</a></p>",
        "id": 179931641,
        "sender_full_name": "Michele Mottini",
        "timestamp": 1572960837
    },
    {
        "content": "<p>Where's the spec language that says it should be [resource]:[search params]? The [resource].[search params] format is the only one I've ever seen, so we implemented that.</p>",
        "id": 179940450,
        "sender_full_name": "Paul Church",
        "timestamp": 1572966365
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span>Parameter values for both _include and _revinclude have three parts, separated by a : character\n</pre></div>\n\n\n<p>Source: <a href=\"https://hl7.org/fhir/STU3/Search.html#include\" target=\"_blank\" title=\"https://hl7.org/fhir/STU3/Search.html#include\">https://hl7.org/fhir/STU3/Search.html#include</a></p>",
        "id": 179941462,
        "sender_full_name": "Eduard de Rijcke",
        "timestamp": 1572967049
    },
    {
        "content": "<p>I don't think it's self-evident that that implies what the capability statement should look like. It describes a parameter of the form <code>a:b:c</code>.</p>\n<p>To be clear I agree that the proposed change is good, I just think it needs additional language in the definition of the capability statement to define the form of resource.searchInclude/searchRevInclude.</p>",
        "id": 179942341,
        "sender_full_name": "Paul Church",
        "timestamp": 1572967609
    },
    {
        "content": "<p>I agree and recommend logging a tracker</p>",
        "id": 179956366,
        "sender_full_name": "Eric Haas",
        "timestamp": 1572975616
    }
]