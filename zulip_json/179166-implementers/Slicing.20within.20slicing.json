[
    {
        "content": "<p>Hallo everyone, <br>\nI have a question concerning the slicing within a slicing. <br>\nWe are trying to profile the wound size, consisting of length, width, area and (optionally) depth. We are profiling this as one observation with many components (see <a href=\"https://simplifier.net/ewundbericht/positherawoundsize\">https://simplifier.net/ewundbericht/positherawoundsize</a>). <br>\nWe sliced the component, our discriminator is <code>code(pattern)</code>,  so we have a pattern on code of the component.<br>\nNow we also want to slice the code in order to allow more than one coding (e.g. one mandatory loinc, one optional snomed). This again we sliced with <code>$this(pattern)</code> as discriminator.</p>\n<p>We also have an example for this profile (<a href=\"https://simplifier.net/ewundbericht/observation-example\">https://simplifier.net/ewundbericht/observation-example</a> ). When we validate our example against this profile we get the following error: </p>\n<div class=\"codehilite\"><pre><span></span><code>Invalid : Value does not match pattern\n&#39;{&quot;system&quot;:&quot;http://loinc.org&quot;,&quot;code&quot;:&quot;39126-8&quot;}&#39;\nObservation.component[0].code[0].coding[1]\n</code></pre></div>\n\n\n<p>When we delete the snomed code in our example, everything is fine.</p>\n<p>Has anyone an idea how we can change our profile so that different codings are possible?<br>\nThanks in advance to any contributions on this topic.</p>",
        "id": 201370490,
        "sender_full_name": "Mareike Przysucha",
        "timestamp": 1592560101
    },
    {
        "content": "<p>you could setup the first slice with patternCodeableConcept then local codes will be allowed and you don't need to do a slicing within a slicing, see <a href=\"https://github.com/FHIR/fhir-test-cases/blob/master/validator/observation-bp-profile.xml\">https://github.com/FHIR/fhir-test-cases/blob/master/validator/observation-bp-profile.xml</a> for an example</p>",
        "id": 201377972,
        "sender_full_name": "Oliver Egger",
        "timestamp": 1592566240
    },
    {
        "content": "<p>Thank you Oliver, that was exactly the problem: I missed the patternCodeableConcepts. Now it works.</p>",
        "id": 201391215,
        "sender_full_name": "Mareike Przysucha",
        "timestamp": 1592574176
    }
]