[
    {
        "content": "<p>We have V3 input that we create FHIR output for. Sometimes this input has NullFlavors present with an explanation of why the value is not present. If I don't have data, but I know why, I'd like to state that.</p>\n<p>In FHIR an element SHALL have a @value or a child element and the .Net validator errors on a construct like this.</p>\n<p>&lt;route&gt;<br>\n    &lt;extension url=\"<a href=\"http://hl7.org/fhir/StructureDefinition/iso21090-nullFlavor\" target=\"_blank\" title=\"http://hl7.org/fhir/StructureDefinition/iso21090-nullFlavor\">http://hl7.org/fhir/StructureDefinition/iso21090-nullFlavor</a>\"&gt;<br>\n        &lt;valueCode=\"NAV\"/&gt;<br>\n    &lt;/extension&gt;<br>\n&lt;/route&gt;</p>\n<p>The official invariant in FHIR will not bark, because extension is a child element, but the .Net validator will.</p>\n<p>ele-1: All FHIR elements must have a @value or children (expression : hasValue() | (children().count() &gt; id.count()))</p>\n<p>Who is right? <span class=\"user-mention\" data-user-id=\"191328\">@Ewout Kramer</span>, <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>?</p>",
        "id": 153970453,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1529412211
    },
    {
        "content": "<p>Including an extension means \"route\" has a child.  And that child has a value.  So the invariant is satisfied.  If the .Net validator complains, it's in error.</p>",
        "id": 153970469,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1529412849
    },
    {
        "content": "<p>yes. .net validator is wrong. but I think the problem is deeper than that around an edge case issue in FHIRPath that is clarified in the forth coming FHIRPath spec</p>",
        "id": 153970495,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1529415812
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> does that mean that R4 will raise an error with that change implemented, or will the current status quo remain in place (@value or child, regardless what type)</p>",
        "id": 153970511,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1529416757
    },
    {
        "content": "<p>umm i'm not sure</p>",
        "id": 153970583,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1529430401
    },
    {
        "content": "<p>The only reason the .NET validator would draw wrong conclusions here is if the FHIRPath statement is incorrect - at least as far as I can see in the code. Now, there have been some problems with ele-1 since the publication of STU3.  </p>\n<p>I have heard that we have released some tools with an older version (pre-technical update) of STU3, which had an incorrect FHIRPath statement for ele-1. Also, the current one still is incorrect (it uses a | where it really means or).  <span class=\"user-mention\" data-user-id=\"191375\">@Alexander Henket</span>: if you could give me more details about when this exactly occurs, I can probably determine the cause.</p>",
        "id": 153972794,
        "sender_full_name": "Ewout Kramer",
        "timestamp": 1530525652
    },
    {
        "content": "<p>This is Simplifier validation. JIRA SD-138. <span class=\"user-mention\" data-user-id=\"191437\">@Arianne van de Wetering</span> Do you have a full example for Ewout</p>",
        "id": 153972800,
        "sender_full_name": "Alexander Henket",
        "timestamp": 1530526378
    },
    {
        "content": "<blockquote>\n<p>This is Simplifier validation. JIRA SD-138. <span class=\"user-mention\" data-user-id=\"191437\">@Arianne van de Wetering</span> Do you have a full example for Ewout</p>\n</blockquote>\n<p>Done, in a private message to Ewout<br>\n<span class=\"emoji emoji-1f609\" title=\"wink\">:wink:</span></p>",
        "id": 153972864,
        "sender_full_name": "Arianne van de Wetering",
        "timestamp": 1530539292
    }
]