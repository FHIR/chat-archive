[
    {
        "content": "<p>I was working with the FHIR validation jar file org.hl7.fhir.validator, and  I have got some doubts :<br>\n1). I need to validate , STU2 , DSTU3 and R4 , where can I get a stable jar which will validate all these versions .<br>\n2). What are the valid parameters which I need to pass in the -version argument of the jar file , in the documentation the valid values are given as 1.0,1.4 and 3.0 , but  I need to validate R4 as well , so is 4.0 a valid value for the version argument .<br>\n3). There is -out argument to convert the output of the validation into OperationOutcome , but it comes in xml format , is there a way to convert it into json without using a explicit parser .<br>\n4). At times the validation takes a lot of time to connect to the tx server , there is -ig argument tag which can be used to give the path of locally saved implementation guides , is this a correct approach , I mean is there a way to automatically sync my local  ig repo with remote one .</p>",
        "id": 180202176,
        "sender_full_name": "Vivek Kumar Yadav",
        "timestamp": 1573187934
    },
    {
        "content": "<ol>\n<li>the same jar for all versions</li>\n<li>4.0 is a valid argument. where is it that this was not documented?</li>\n<li>if you nominate a -output parameter than ends with .json, you'll get json format<br>\n4a. yes, it connects to the terminology server. Should only take 1-2 secs. If you want to batch it up in a server, or process  etc, you should either use org.hl7.fhir.r5.validation.NativeHostServices or a full HAPI framework<br>\n4b. -ig with just the package id is the best way, and the package will be cached locally if you do</li>\n</ol>",
        "id": 180202408,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1573188317
    },
    {
        "content": "<p><a href=\"https://fhir.github.io/latest-ig-publisher/org.hl7.fhir.validator.jar\" target=\"_blank\" title=\"https://fhir.github.io/latest-ig-publisher/org.hl7.fhir.validator.jar\">https://fhir.github.io/latest-ig-publisher/org.hl7.fhir.validator.jar</a> is always the current one and you should use</p>",
        "id": 180202424,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1573188354
    },
    {
        "content": "<p>Hi folks, I would like to validate an STU3 resource, what is the possible values for <code>-ig</code> or <code>-defn</code> params ? I tried passing <code>-ig hl7.fhir.core#3.0.2</code> as param and end up getting the following error:  <code>Fatal @ Task (line 1, col2) : This does not appear to be a FHIR resource (unknown name 'Task')</code>. While debugging this code through intellij, I found that the code is not able to pick up structure definitions. Is there anything I am missing here ?  The resource I am validating is actually a valid resource, with <code>resourceType</code> property set to <code>Task</code></p>",
        "id": 180266204,
        "sender_full_name": "sreenivasagopalan ananthakrishna",
        "timestamp": 1573243433
    },
    {
        "content": "<p>btw, I am using the latest version of the official validator jar downloaded form the FHIR website.</p>",
        "id": 180266577,
        "sender_full_name": "sreenivasagopalan ananthakrishna",
        "timestamp": 1573243499
    },
    {
        "content": "<blockquote>\n<p><a href=\"https://fhir.github.io/latest-ig-publisher/org.hl7.fhir.validator.jar\" target=\"_blank\" title=\"https://fhir.github.io/latest-ig-publisher/org.hl7.fhir.validator.jar\">https://fhir.github.io/latest-ig-publisher/org.hl7.fhir.validator.jar</a> is always the current one and you should use</p>\n</blockquote>\n<p>Thanks for your response .</p>",
        "id": 180307667,
        "sender_full_name": "Vivek Kumar Yadav",
        "timestamp": 1573296933
    },
    {
        "content": "<blockquote>\n<ol>\n<li>the same jar for all versions</li>\n<li>4.0 is a valid argument. where is it that this was not documented?</li>\n<li>if you nominate a -output parameter than ends with .json, you'll get json format<br>\n4a. yes, it connects to the terminology server. Should only take 1-2 secs. If you want to batch it up in a server, or process  etc, you should either use org.hl7.fhir.r5.validation.NativeHostServices or a full HAPI framework<br>\n4b. -ig with just the package id is the best way, and the package will be cached locally if you do</li>\n</ol>\n</blockquote>\n<p>Thanks for your response .</p>",
        "id": 180307671,
        "sender_full_name": "Vivek Kumar Yadav",
        "timestamp": 1573296950
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"248919\">@sreenivasagopalan ananthakrishna</span> - oops I mixed fixing something up when we reorganised the packages. Will be fixed next release (within 24 hours). In the meantime, use the -version parameter </p>\n<p>I updated the documentation here: <a href=\"https://confluence.hl7.org/display/FHIR/Using+the+FHIR+Validator\" target=\"_blank\" title=\"https://confluence.hl7.org/display/FHIR/Using+the+FHIR+Validator\">https://confluence.hl7.org/display/FHIR/Using+the+FHIR+Validator</a></p>",
        "id": 180331784,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1573333908
    },
    {
        "content": "<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"248919\">sreenivasagopalan ananthakrishna</span> - oops I mixed fixing something up when we reorganised the packages. Will be fixed next release (within 24 hours). In the meantime, use the -version parameter </p>\n<p>I updated the documentation here: <a href=\"https://confluence.hl7.org/display/FHIR/Using+the+FHIR+Validator\" target=\"_blank\" title=\"https://confluence.hl7.org/display/FHIR/Using+the+FHIR+Validator\">https://confluence.hl7.org/display/FHIR/Using+the+FHIR+Validator</a></p>\n</blockquote>\n<p>Thanks will check it out!</p>",
        "id": 180468309,
        "sender_full_name": "sreenivasagopalan ananthakrishna",
        "timestamp": 1573514212
    },
    {
        "content": "<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"248919\">sreenivasagopalan ananthakrishna</span> - oops I mixed fixing something up when we reorganised the packages. Will be fixed next release (within 24 hours). In the meantime, use the -version parameter </p>\n<p>I updated the documentation here: <a href=\"https://confluence.hl7.org/display/FHIR/Using+the+FHIR+Validator\" target=\"_blank\" title=\"https://confluence.hl7.org/display/FHIR/Using+the+FHIR+Validator\">https://confluence.hl7.org/display/FHIR/Using+the+FHIR+Validator</a></p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> I am back on this task of validating custom profiles. My observation is that the Validation tool is not able to validate even examples bundled as part of the definition files. For example:</p>\n<div class=\"codehilite\"><pre><span></span>11:44 $ java -jar org.hl7.fhir.validator.jar task-example.json -version 3.2.0\nFHIR Validator Build ??\nArguments: task-example.json -version 3.2.0\n  .. connect to tx server @ http://tx.fhir.org\n  .. definitions from hl7.fhir.core#3.2.0\n    (v3.2.0-null)\n  .. validate [task-example.json]\n*FAILURE* validating task-example.json:  error:1 warn:0 info:0\n  Fatal @ Task (line 1, col2) : This does not appear to be a FHIR resource (unknown name &#39;Task&#39;)\n</pre></div>\n\n\n<p>I have tried both version 3.0.2 and 3.2.0. Both are giving same issue. WIth version 3.0.2, the definition files are not even downloaded in the cache.  All I see is a package.json which refers to other resources.  I do see a reference to <code>StructureDefinition-Taskjson</code> as part of the 3.2.0 cache, but the file extension seems to be incorrect in the downloaded package,  Is it supposed to be <code>`StructureDefinition-Task.json</code> instead ? </p>\n<div class=\"codehilite\"><pre><span></span>âœ” ~/.fhir/packages/hl7.fhir.core#3.2.0/package\n11:52 $ ls StructureDefinition-task-*\nStructureDefinition-task-candidateListjson  StructureDefinition-task-replacesjson\n</pre></div>\n\n\n<p>I renamed <code>StructureDefinition-Taskjson</code> to <code>StructureDefinition-Task.json</code>, but now I get this following error:</p>\n<div class=\"codehilite\"><pre><span></span>11:45 $ java -jar org.hl7.fhir.validator.jar task-example.json -version 3.2.0\nFHIR Validator Build ??\nArguments: task-example.json -version 3.2.0\n  .. connect to tx server @ http://tx.fhir.org\n  .. definitions from hl7.fhir.core#3.2.0\nError loading StructureDefinition-Task.json: Unknown FHIRVersion code &#39;3.2.0&#39;\nException in thread &quot;main&quot; org.hl7.fhir.exceptions.FHIRException: Error loading StructureDefinition-Task.json: Unknown FHIRVersion code &#39;3.2.0&#39;\n        at org.hl7.fhir.r4.context.SimpleWorkerContext.fromDefinitions(SimpleWorkerContext.java:197)\n        at org.hl7.fhir.r4.validation.ValidationEngine.loadDefinitions(ValidationEngine.java:300)\n        at org.hl7.fhir.r4.validation.ValidationEngine.loadInitialDefinitions(ValidationEngine.java:262)\n        at org.hl7.fhir.r4.validation.ValidationEngine.&lt;init&gt;(ValidationEngine.java:287)\n        at org.hl7.fhir.r4.validation.Validator.main(Validator.java:347)\nCaused by: java.lang.IllegalArgumentException: Unknown FHIRVersion code &#39;3.2.0&#39;\n        at org.hl7.fhir.r4.model.Enumerations$FHIRVersionEnumFactory.fromCode(Enumerations.java:10202)\n        at org.hl7.fhir.r4.model.Enumerations$FHIRVersionEnumFactory.fromCode(Enumerations.java:1)\n        at org.hl7.fhir.r4.formats.JsonParser.parseEnumeration(JsonParser.java:104)\n        at org.hl7.fhir.r4.formats.JsonParser.parseStructureDefinitionProperties(JsonParser.java:23559)\n        at org.hl7.fhir.r4.formats.JsonParser.parseStructureDefinition(JsonParser.java:23478)\n        at org.hl7.fhir.r4.formats.JsonParser.parseResource(JsonParser.java:27655)\n        at org.hl7.fhir.r4.formats.JsonParserBase.parse(JsonParserBase.java:92)\n        at org.hl7.fhir.r4.context.SimpleWorkerContext.loadFromFileJson(SimpleWorkerContext.java:257)\n        at org.hl7.fhir.r4.context.SimpleWorkerContext.loadDefinitionItem(SimpleWorkerContext.java:206)\n        at org.hl7.fhir.r4.context.SimpleWorkerContext.fromDefinitions(SimpleWorkerContext.java:194)\n</pre></div>\n\n\n<p>Is it possible to get definition files for <code>3.0.2</code> if <code>3.2.0</code> is not supported?</p>",
        "id": 180850154,
        "sender_full_name": "sreenivasagopalan ananthakrishna",
        "timestamp": 1573836709
    },
    {
        "content": "<p><code>-version</code> specifies the FHIR spec version.  There is no FHIR 3.2.0, only 3.0.0, 3.0.1, and 3.0.2 in the 3.x series<br>\nSo, 3.0.2 is the correct latest version to use.<br>\nOut of interest, are you able to use 3.0.1?</p>",
        "id": 180902203,
        "sender_full_name": "Michael Lawley",
        "timestamp": 1573890990
    },
    {
        "content": "<p>the validator supports stated versions 3.0, 3.0.0, 3.0.1, and 3.0.2. It all works for me. 3.2.0 won't work.</p>",
        "id": 180916179,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1573917939
    },
    {
        "content": "<blockquote>\n<p>the validator supports stated versions 3.0, 3.0.0, 3.0.1, and 3.0.2. It all works for me. 3.2.0 won't work.</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> <span class=\"user-mention\" data-user-id=\"191343\">@Michael Lawley</span>  thanks for the reply!  can you please provide the exact command and definition file link for version <code>3.0.2</code>. It doesn't seem to work for me as the definition files are not getting fetched.  Here is what I have in the cache folder:</p>\n<div class=\"codehilite\"><pre><span></span>$ ls ~/.fhir/packages/hl7.fhir.core#3.0.2/package/\npackage.json\n</pre></div>",
        "id": 181164448,
        "sender_full_name": "sreenivasagopalan ananthakrishna",
        "timestamp": 1574205265
    },
    {
        "content": "<p>the package hl7.fhir.core#3.0.2 is empty - it just expresses dependency on the other packages for R3. But this should not be a factor for you. All of the ways of invoking the validator documented here <a href=\"https://confluence.hl7.org/display/FHIR/Using+the+FHIR+Validator\" target=\"_blank\" title=\"https://confluence.hl7.org/display/FHIR/Using+the+FHIR+Validator\">https://confluence.hl7.org/display/FHIR/Using+the+FHIR+Validator</a> work for me. If they don't for you, post your parameters, and the output from the validator</p>",
        "id": 181179685,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1574225328
    }
]