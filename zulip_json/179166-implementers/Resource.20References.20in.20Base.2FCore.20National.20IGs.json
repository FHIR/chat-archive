[
    {
        "content": "<p>I'm seeking best practices when a national base resource profile contains a reference to another resource that is also profiled in the base IG. For example, should Location.managingOrganization in a NzLocation Profile refer to NzOrganization and/or Organization? I've seen examples of all 3 approaches - sometimes within the same IG - so am wondering which one(s) to follow and the rationale.</p>",
        "id": 272068541,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1644980753
    },
    {
        "content": "<p>There should be some thought applied to it. Do we require that this organization meets the requirements of a NzOrganization, or would any organization do? I’ve encountered this with Practitioner, where for example local Practitioners have a license number, but we might receive records of referencing foreign Practitioners, which won’t have local licence numbers, so we have to allow non-profiled Practitioners for, e.g. Observations.</p>",
        "id": 272069020,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1644981311
    },
    {
        "content": "<p>Another thing that's an option is to declare NzOrganization as 'global' - which means that all references to Organization are automatically treated as NzOrganization</p>",
        "id": 272069284,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1644981611
    },
    {
        "content": "<p>In a national base profile I'd like leaving the references to Core, that way you can still say in a conformance statement that instances of PractitionerRole must conform to PractitionerRole-NZ but instances of Organization do not need to conform to Organization-NZ.</p>",
        "id": 272073141,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1644986658
    },
    {
        "content": "<p>More flexibility in the conformance statement.</p>",
        "id": 272073156,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1644986698
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> the 'global' flag didnt work in the tooling last time I checked</p>",
        "id": 272077645,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1644992364
    },
    {
        "content": "<p>it's still on my todo list.</p>",
        "id": 272082920,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1644997944
    },
    {
        "content": "<p>here's a picture of that list nicely wrapped in a cover <span aria-label=\"grinning face with smiling eyes\" class=\"emoji emoji-1f601\" role=\"img\" title=\"grinning face with smiling eyes\">:grinning_face_with_smiling_eyes:</span> <a href=\"/user_uploads/10155/-HfwecDJyeqz84kDSsEbT0Rg/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/-HfwecDJyeqz84kDSsEbT0Rg/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/-HfwecDJyeqz84kDSsEbT0Rg/image.png\"></a></div>",
        "id": 272083158,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1644998140
    },
    {
        "content": "<p>Thanks for the helpful responses. I particularly like the option to declare profiles as 'global' and hope that makes it to the top of Grahame's list before too long.  </p>\n<p>I am aware of the dangers of constraining out elements in national profiles, as that may hinder implementers with requirements that we may not be aware of - for example there was a proposal to remove the suburb element from the NZ Address Profile (as that's not part of the NZ Postal Address standard) until the need for some systems to store holiday home addresses in Australia was surfaced. The obvious trade-off is with being too flexible and permitting use of core resources when NZ-specific ones should be used (e.g. because they contain the required identifiers and vocabulary).</p>",
        "id": 272213328,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1645072440
    },
    {
        "content": "<p>actually it looks like it's implemented to me. Does someone want to test it out?</p>",
        "id": 272213877,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1645073049
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191316\">Grahame Grieve</span> <a href=\"#narrow/stream/179166-implementers/topic/Resource.20References.20in.20Base.2FCore.20National.20IGs/near/272213877\">said</a>:</p>\n<blockquote>\n<p>actually it looks like it's implemented to me. Does someone want to test it out?</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"191321\">@David Hay</span> , <span class=\"user-mention\" data-user-id=\"195365\">@Daniel Thomson</span> , <span class=\"user-mention\" data-user-id=\"195045\">@John Carter</span>  - thoughts?</p>",
        "id": 272336150,
        "sender_full_name": "Peter Jordan",
        "timestamp": 1645138490
    },
    {
        "content": "<p>I still prefer the flavour referenced by <span class=\"user-mention\" data-user-id=\"191380\">@Elliot Silver</span> in this thread... in our National IG we provide the option to refer both to an NZ one or to the base/core one. My thinking is that in the National IG I want us to be very prescriptive in defining exactly what the NZ version is supposed to look like (for example an NZaddress DOES have suburb, DOES NOT have state, and the postcode is 4 digits), but still recognise that users have a need to deal with non-NZ instances as well. I think that encourages precision but allows for flexibility in a way that's easy to understand.</p>",
        "id": 272346030,
        "sender_full_name": "John Carter",
        "timestamp": 1645145516
    },
    {
        "content": "<p>You can't have a choice of two types where one is based on the other.  It's going to confuse the validator because the instance ends up resolving to both.</p>",
        "id": 272351430,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1645150287
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> Here's an example of what I would like to see us do in NZ... are you saying this isn't good practice?: <a href=\"http://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-au-organization.html\">http://build.fhir.org/ig/hl7au/au-fhir-base/StructureDefinition-au-organization.html</a> (see the address element in particular)</p>",
        "id": 272759287,
        "sender_full_name": "John Carter",
        "timestamp": 1645503958
    },
    {
        "content": "<p>Two concerns:</p>\n<ul>\n<li>Listing 'Identifier' plus a bunch of profiles of Identifier doesn't actually accomplish anything.  None of the constraints present in the other profiles will ever come into play</li>\n<li>My experience has been that the validator gets unhappy when there are multiple profiles that are valid, though it's possible that's now been addressed.</li>\n</ul>",
        "id": 272760499,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1645505711
    },
    {
        "content": "<blockquote>\n<p>Two concerns:</p>\n<ul>\n<li>Listing 'Identifier' plus a bunch of profiles of Identifier doesn't actually accomplish anything.  None of the constraints present in the other profiles will ever come into play</li>\n</ul>\n</blockquote>\n<p>One major intent of AU Base is to provide guidance with minimal restricting. Restriction is to be in profiles derived from AU Base profiles. Listing identifier and a bunch of its profiles supports</p>\n<ul>\n<li>Not restricting what is valid</li>\n<li>Displaying relevant profiles of identifier </li>\n<li>Encouraging profiles of (say Organization) to be derived with unwanted variations of Identifier excluded</li>\n</ul>",
        "id": 272767420,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1645514085
    },
    {
        "content": "<blockquote>\n<p>Two concerns:</p>\n<ul>\n<li>My experience has been that the validator gets unhappy when there are multiple profiles that are valid, though it's possible that's now been addressed.</li>\n</ul>\n</blockquote>\n<p>The validator gives warnings or informations, not errors.</p>",
        "id": 272767572,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1645514278
    },
    {
        "content": "<p>Warnings and information messages can still be confusing to implementers...</p>",
        "id": 272807096,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1645538900
    }
]