[
    {
        "content": "<p>We are writing a platform that supports any kind of FHIR resources and treat them in a generic way. We can show lists of any kind of resource. For those lists, we want to create a 'Filter' option. <br>\nBy processing the CapabilityStatement (/metadata), we can get a list of 'searchParam's as well a list of 'searchInclude's. Some search parameters can be used for showing as fields in the Filter Fields, when they are of type <code>token</code>, <code>string</code> or <code>date</code>. Then those param names and values can be added to the search URL.</p>\n<p>The difficulty comes when we want to go beyond the resource scope, let say the <strong>'performer'</strong> entry in ProcedureRequest's <em>searchParam</em>, matching the <strong>'ProcedureRequest.performer'</strong> as present in the <em>searchInclude</em> list. There is no information in the CapabilityStatement about the type of that reference (Practitioner | Organization | Patient | Device | RelatedPerson | HealthcareService, according to the FHIR spec), so we cannot offer a list of fields for those nested fields.<br>\nMoreover, it is not suggested that 'performer' is associated to 'ProcedureRequest.performer', in order to automatically include it in the URL when that filter is selected. We just infer that from the specification website.</p>\n<p>It seems there is missing a <strong>'referenceType'</strong> attribute for each search parameter with type 'reference' as a single string or an array of strings, as well as an <strong>'include'</strong> attribute for mentioning the associated searchInclude, like:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"p\">{</span>\n    <span class=\"nt\">&quot;type&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;ProcedureRequest&quot;</span><span class=\"p\">,</span>\n    <span class=\"nt\">&quot;searchParam&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n        <span class=\"p\">{</span>\n            <span class=\"nt\">&quot;name&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;performer&quot;</span><span class=\"p\">,</span>\n            <span class=\"nt\">&quot;definition&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;http://hl7.org/etcâ€¦&quot;</span><span class=\"p\">,</span>\n            <span class=\"nt\">&quot;type&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;reference&quot;</span><span class=\"p\">,</span>\n            <span class=\"nt\">&quot;documentation&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;Requested performer&quot;</span><span class=\"p\">,</span>\n            <span class=\"err\">/*</span> <span class=\"err\">Suggested</span> <span class=\"err\">attributes</span> <span class=\"err\">*/</span>\n            <span class=\"nt\">&quot;referenceType&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span> <span class=\"s2\">&quot;Practitioner&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;Organization&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;Patient&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;Device&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;RelatedPerson&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;HealthcareService&quot;</span> <span class=\"p\">],</span>\n            <span class=\"nt\">&quot;include&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;ProcedureRequest:performer&quot;</span>\n        <span class=\"p\">}</span>\n   <span class=\"p\">]</span>\n<span class=\"p\">}</span>\n</pre></div>\n\n\n<p>Is that something we can suggest to be added to the standard?<br>\nOur intent is to make CapabilityStatement more digestible by applications rather than the human eye.<br>\n<span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> <span class=\"user-mention\" data-user-id=\"191757\">@Christiaan Knaap</span></p>",
        "id": 153971985,
        "sender_full_name": "Jaime Olivares",
        "timestamp": 1530055120
    },
    {
        "content": "<p>we used to have this, but stripped it out. The search parameter now only contains name, definition, type, and a reference to a full set of information in a search parameter resource</p>",
        "id": 153972005,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1530072785
    },
    {
        "content": "<p>where everything you can think of can be found</p>",
        "id": 153972006,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1530072796
    },
    {
        "content": "<blockquote>\n<p>and a reference to a full set of information in  a search parameter resource where everything you can think of can be found</p>\n</blockquote>\n<p>Are you talking about the URL in \"definition\" ?<br>\nIf that's the case. That URL usually points to a verbose html document, which an application cannot parse.</p>",
        "id": 153972085,
        "sender_full_name": "Jaime Olivares",
        "timestamp": 1530108919
    },
    {
        "content": "<p>Based on this URL, you can look up all search parameters in the search-parameters.json / .xml which is provided in the FHIR Definitions .zip. See <a href=\"https://www.hl7.org/fhir/downloads.html\" target=\"_blank\" title=\"https://www.hl7.org/fhir/downloads.html\">https://www.hl7.org/fhir/downloads.html</a></p>",
        "id": 153972123,
        "sender_full_name": "Alexander Zautke",
        "timestamp": 1530121476
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"193430\">@Alexander Zautke</span>, although not automatable with such degree of dispersion, we can compile our own SearchParams.json file.</p>",
        "id": 153972377,
        "sender_full_name": "Jaime Olivares",
        "timestamp": 1530192327
    },
    {
        "content": "<p>You could ask the server for the search parameter by the URL in the definition. As might be a custom one, not one from the standard.</p>",
        "id": 153973296,
        "sender_full_name": "Brian Postlethwaite",
        "timestamp": 1530686583
    }
]