[
    {
        "content": "<p>what am I doing wrong?</p>\n<p>patient.setId(IdDt.newRandomUuid());</p>\n<div class=\"codehilite\"><pre><span></span>    Observation observation = new Observation();\n    observation.setStatus(ObservationStatus.FINAL);\n    observation\n            .getCode()\n            .addCoding()\n            .setSystem(&quot;http://loinc.org&quot;)\n            .setCode(&quot;789-8&quot;)\n            .setDisplay(&quot;Erythrocytes [#/volume] in Blood by Automated count&quot;);\n    observation.setValue(\n            new Quantity()\n                    .setValue(4.12)\n                    .setUnit(&quot;10 trillion/L&quot;)\n                    .setSystem(&quot;http://unitsofmeasure.org&quot;)\n                    .setCode(&quot;10*12/L&quot;));\n    observation.setSubject(new Reference(patient.getId()));\n\n    //reporte diagnostico \n    DiagnosticReport diagnosticom = new DiagnosticReport();\n    diagnosticom.setStatus(DiagnosticReportStatus.FINAL);\n    diagnosticom.getCode().addCoding().setSystem(&quot;s&quot;).setCode(&quot;78&quot;).setDisplay(&quot;:&quot;);\ndiagnosticom.getCode().setText(&quot;Some Diagnostic Report&quot;);\n\ndiagnosticom.addResult().setReference(&quot;Observation/1&quot;);\ndiagnosticom.addResult().setReference(&quot;Observation/2&quot;);\ndiagnosticom.addResult().setReference(&quot;Observation/3&quot;);\n\n/*Narrative narrative = new Narrative();\nmyGen.generateNarrative(ctx, diagnosticom, narrative);\nString output = narrative.getDiv().getValueAsString();\n\nourLog.info(output);\nassertThat(output, StringContains.containsString(diagnosticom.getCode().getTextElement().getValue()));*/\n    diagnosticom.setSubject(new Reference(patient.getId()));\n\n    // Create a bundle that will be used as a transaction\n\n    Bundle bundle = new Bundle();\n    bundle.setType(BundleType.TRANSACTION);\n\n    bundle.addEntry()\n            .setFullUrl(patient.getId())\n            .setResource(patient)\n            .getRequest()\n            .setUrl(&quot;Patient&quot;)\n            .setIfNoneExist(&quot;identifier=http://acme.org/mrns|12345&quot;)\n            .setMethod(HTTPVerb.POST);\n    bundle.addEntry()\n            .setResource(observation)\n            .getRequest()\n            .setUrl(&quot;Observation&quot;)\n            .setMethod(HTTPVerb.POST);\n    bundle.addEntry()\n            .setResource(diagnosticom)\n            .getRequest()\n            .setUrl(&quot;diagnostico&quot;)\n            .setMethod(HTTPVerb.POST);\n\n    ctx.newXmlParser().setPrettyPrint(true).encodeResourceToString(bundle);\n    //System.out.println(&quot;uno: &quot;+ctx.newXmlParser().setPrettyPrint(true).encodeResourceToString(bundle));\n    Bundle resp = client.transaction().withBundle(bundle).execute();\n    ctx.newXmlParser().setPrettyPrint(true).encodeResourceToString(resp);\n</pre></div>",
        "id": 165850492,
        "sender_full_name": "Luis EC",
        "timestamp": 1558041962
    },
    {
        "content": "<p>what's the error? Is this HAPI?</p>",
        "id": 165855122,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1558046066
    },
    {
        "content": "<p>I mark error in these two lines but I can not understand why<br>\nBundle resp = client.transaction().withBundle(bundle).execute();<br>\nctx.newXmlParser().setPrettyPrint(true).encodeResourceToString(resp)</p>",
        "id": 165857971,
        "sender_full_name": "Luis EC",
        "timestamp": 1558048964
    },
    {
        "content": "<p>You mean your developer environment is flagging those lines as being in error?  What do the error messages say?</p>",
        "id": 165858612,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1558049555
    }
]