[
    {
        "content": "<p>I'm trying to use a JSON ImplementationGuide resource to run the publisher, and it's failing. \"unable to parse XML\".  Is there a way to make it OK with a json file or must the IG resource file be in XML?</p>",
        "id": 153936656,
        "sender_full_name": "Travis Stenerson",
        "timestamp": 1518215505
    },
    {
        "content": "<p>looks to me like json should be ok, but it does require you to have .json in the file name</p>",
        "id": 153936659,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1518215891
    },
    {
        "content": "<p>if it does, put a stack dump here</p>",
        "id": 153936660,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1518215909
    },
    {
        "content": "<p>It does. Here's the output:<br>\n(how do I code block markup this? got it)</p>\n<div class=\"codehilite\"><pre><span></span>Stack Dump (for debugging):                                                      (20.0200sec)\njava.lang.Exception: Unable to parse XML for ...\\Evinance-DSS-IG\n        at org.hl7.fhir.igtools.publisher.Publisher.loadFromXml(Publisher.java:1894)\n        at org.hl7.fhir.igtools.publisher.Publisher.load(Publisher.java:1345)\n        at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:378)\n        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:352)\n        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:4087)\nException in thread &quot;main&quot; java.lang.NullPointerException\n        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:4097)\n</pre></div>",
        "id": 153936661,
        "sender_full_name": "Travis Stenerson",
        "timestamp": 1518216347
    },
    {
        "content": "<p>oh right. I looked at the wrong line. I'll try and fix this in the next 24 hours</p>",
        "id": 153936662,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1518216551
    },
    {
        "content": "<p>Thanks Grahame.</p>",
        "id": 153936663,
        "sender_full_name": "Travis Stenerson",
        "timestamp": 1518216682
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"196572\">@Travis Stenerson</span>   I think we have colloquially called the two different key definitions files \"ig.json\" (the ig-publisher definitions file) and \"ig.xml\" (the implementation guide resource).  ( I'm not sure the auto-publisher will work if you call them anything else  )  Anyway be aware of this if you hear these names being bantied about.   Meanwhile I'll try to call them something else...  :-)</p>",
        "id": 153936675,
        "sender_full_name": "Eric Haas",
        "timestamp": 1518219839
    },
    {
        "content": "<p>it was working fine with the XML ImplementationGuide resource and ig build file called something other than ig.json/ig.xml (the name you can see above). I've begun making more use of the python client library for creating resources, trying to streamline IG creation since I'm managing a few, and it doesn't have an as_xml() method unfortunately (as far as I can tell). I suppose I can write one if only the XML resource is usable for the publisher.</p>",
        "id": 153936793,
        "sender_full_name": "Travis Stenerson",
        "timestamp": 1518296354
    },
    {
        "content": "<p>wait for the next build to success (13036) and then try again</p>",
        "id": 153936796,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1518296767
    },
    {
        "content": "<p>Sorry Grahame I didn't understand that. Wait for 13036?</p>",
        "id": 153936811,
        "sender_full_name": "Travis Stenerson",
        "timestamp": 1518316171
    },
    {
        "content": "<p>yes it's built now, so try with the latest IG publisher from <a href=\"http://build.fhir.org\" target=\"_blank\" title=\"http://build.fhir.org\">build.fhir.org</a></p>",
        "id": 153936822,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1518317322
    },
    {
        "content": "<p>Thanks! I'll try it out Monday.</p>",
        "id": 153936844,
        "sender_full_name": "Travis Stenerson",
        "timestamp": 1518319952
    },
    {
        "content": "<p>Hi Grahame, is the download link updated on <a href=\"http://build.fhir.org\" target=\"_blank\" title=\"http://build.fhir.org\">build.fhir.org</a>? I am still getting a 69.3 MB file, same size as the previous, and the error persists. Did I use the wrong link? <a href=\"http://build.fhir.org/org.hl7.fhir.igpublisher.jar\" target=\"_blank\" title=\"http://build.fhir.org/org.hl7.fhir.igpublisher.jar\">http://build.fhir.org/org.hl7.fhir.igpublisher.jar</a></p>",
        "id": 153936920,
        "sender_full_name": "Travis Stenerson",
        "timestamp": 1518452515
    },
    {
        "content": "<p>13036 is not posted... I don't know why</p>",
        "id": 153936939,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1518463813
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"196572\">@Travis Stenerson</span> try again</p>",
        "id": 153936971,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1518468762
    },
    {
        "content": "<p>Seems to work. But I am getting a weird error now from extensions :</p>\n<div class=\"codehilite\"><pre><span></span>Error parsing path\\StructureDefinitions\\request-group-code: com.google.gson.JsonObject cannot be cast to com.google.gson.JsonArray(38.0953sec)\n</pre></div>",
        "id": 153936997,
        "sender_full_name": "Travis Stenerson",
        "timestamp": 1518476789
    },
    {
        "content": "<p>Do you have a \"pattern\" element declared that's not valid?  (e.g. forgetting to wrap the \"coding\" element inside an array)</p>",
        "id": 153936999,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1518477313
    },
    {
        "content": "<p>I don't think so. My differential hasn't changed though I've been using a very old publisher until now. Differential.element is below:</p>\n<div class=\"codehilite\"><pre><span></span>[\n            {\n                &quot;id&quot;: &quot;Extension&quot;,\n                &quot;path&quot;: &quot;Extension&quot;\n            },\n            {\n                &quot;id&quot;: &quot;Extension.url&quot;,\n                &quot;path&quot;: &quot;Extension.url&quot;,\n                &quot;fixedUri&quot;: &quot;http://evinance.com/fhir-DSTU3/StructureDefinition/request-group-code&quot;\n            },\n            {\n                &quot;id&quot;: &quot;Extension.valueCodeableConcept&quot;,\n                &quot;path&quot;: &quot;Extension.valueCodeableConcept&quot;,\n                &quot;min&quot;: 1,\n                &quot;max&quot;: &quot;1&quot;,\n                &quot;type&quot;: [\n                    {\n                        &quot;code&quot;: &quot;CodeableConcept&quot;\n                    }\n                ]\n            }\n        ]\n</pre></div>",
        "id": 153937001,
        "sender_full_name": "Travis Stenerson",
        "timestamp": 1518477771
    },
    {
        "content": "<p>Is there any stack trace associated with that error?</p>",
        "id": 153937002,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1518478023
    },
    {
        "content": "<p>Yes:</p>\n<div class=\"codehilite\"><pre><span></span>Stack Dump (for debugging):                                                      (38.0958sec)\njava.lang.Exception: Error parsing path\\StructureDefinitions\\request-group-code: com.google.gson.JsonObject cannot be cast to com.google.gson.JsonArray\n        at org.hl7.fhir.igtools.publisher.Publisher.load(Publisher.java:1940)\n        at org.hl7.fhir.igtools.publisher.Publisher.loadConformance(Publisher.java:1676)\n        at org.hl7.fhir.igtools.publisher.Publisher.createIg(Publisher.java:382)\n        at org.hl7.fhir.igtools.publisher.Publisher.execute(Publisher.java:352)\n        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:4087)\nCaused by: java.lang.ClassCastException: com.google.gson.JsonObject cannot be cast to com.google.gson.JsonArray\n        at com.google.gson.JsonObject.getAsJsonArray(JsonObject.java:172)\n        at org.hl7.fhir.dstu3.formats.JsonParser.parseStructureDefinitionProperties(JsonParser.java:17058)\n        at org.hl7.fhir.dstu3.formats.JsonParser.parseStructureDefinition(JsonParser.java:17013)\n        at org.hl7.fhir.dstu3.formats.JsonParser.parseResource(JsonParser.java:19745)\n        at org.hl7.fhir.dstu3.formats.JsonParserBase.parse(JsonParserBase.java:90)\n        at org.hl7.fhir.dstu3.formats.ParserBase.parse(ParserBase.java:58)\n        at org.hl7.fhir.igtools.publisher.Publisher.parse(Publisher.java:2163)\n        at org.hl7.fhir.igtools.publisher.Publisher.load(Publisher.java:1937)\n        ... 4 more\nException in thread &quot;main&quot; java.lang.NullPointerException\n        at org.hl7.fhir.igtools.publisher.Publisher.main(Publisher.java:4097)\n</pre></div>",
        "id": 153937003,
        "sender_full_name": "Travis Stenerson",
        "timestamp": 1518478072
    },
    {
        "content": "<p>Can you show the whole resource?</p>",
        "id": 153937018,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1518486465
    },
    {
        "content": "<p>While you're discussing the IG Publisher ... has anyone created a dockerized version of this?  This would save a bunch of effort in setting one up.  Thanks.   (I did Google for one and only found a 'test one' that seemed to be a person's attempt at creating one.)</p>",
        "id": 153937021,
        "sender_full_name": "John Silva",
        "timestamp": 1518487159
    },
    {
        "content": "<p>See <a href=\"https://chat.fhir.org/#narrow/stream/implementers/subject/ig.20publisher.20as.20Docker.20image\" target=\"_blank\" title=\"https://chat.fhir.org/#narrow/stream/implementers/subject/ig.20publisher.20as.20Docker.20image\">https://chat.fhir.org/#narrow/stream/implementers/subject/ig.20publisher.20as.20Docker.20image</a></p>",
        "id": 153937023,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1518487898
    },
    {
        "content": "<p>I had found this Dockerfile someone has on GitHub; haven't tried to create a docker image from it yet though.</p>\n<p><a href=\"https://github.com/robstwd/assorted-dockerfiles/blob/master/alpine-fhir-ig-publisher/Dockerfile\" target=\"_blank\" title=\"https://github.com/robstwd/assorted-dockerfiles/blob/master/alpine-fhir-ig-publisher/Dockerfile\">https://github.com/robstwd/assorted-dockerfiles/blob/master/alpine-fhir-ig-publisher/Dockerfile</a></p>",
        "id": 153937120,
        "sender_full_name": "John Silva",
        "timestamp": 1518534207
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> Yes, thank you. it's in the codeblock below. I just create the differential and run the publisher, it's always worked with an older version of the jar file.</p>\n<p>edit: I found the error. I forgot to make contact an array. Thanks for the help.</p>",
        "id": 153937125,
        "sender_full_name": "Travis Stenerson",
        "timestamp": 1518534492
    },
    {
        "content": "<p>FYI we are trying to move these IG questions to the <a href=\"https://chat.fhir.org/#narrow/stream/IG.20creation\" target=\"_blank\" title=\"https://chat.fhir.org/#narrow/stream/IG.20creation\">IG creation</a>  stream</p>",
        "id": 153937183,
        "sender_full_name": "Eric Haas",
        "timestamp": 1518541785
    },
    {
        "content": "<p>Didn't know that stream existed. Thanks Eric.</p>",
        "id": 153937193,
        "sender_full_name": "Travis Stenerson",
        "timestamp": 1518547107
    }
]