[
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> in the current build of FHIR the server is responsible for initiating communication regarding Subscriptions see <a href=\"http://build.fhir.org/subscription.html#12.23.6.1\" target=\"_blank\" title=\"http://build.fhir.org/subscription.html#12.23.6.1\">http://build.fhir.org/subscription.html#12.23.6.1</a>. This can be impossbile in many network topologies and require jump hosts. IMO the server also becomes stateful with regards to the client/endpoint.<br>\nI suggest looking at Server Sent Events as it overcomes most of these problems. (<a href=\"https://www.w3.org/TR/2011/WD-eventsource-20110208/\" target=\"_blank\" title=\"https://www.w3.org/TR/2011/WD-eventsource-20110208/\">https://www.w3.org/TR/2011/WD-eventsource-20110208/</a>)</p>",
        "id": 153868779,
        "sender_full_name": "Christian Jonigkeit",
        "timestamp": 1485173127
    },
    {
        "content": "<p>Also, if one is buying all the way into the HTTP REST principles, web sockets doesn't seem all that clean as it is not based on HTTP and the communication channel changes from an HTTP endpoint to a Websockets endpoint. Websockets seems like a great fit for some event driven architecture but not so much REST</p>",
        "id": 153868780,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1485174927
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191328\">@Ewout Kramer</span> - have you done any SignalR-prototype with FHIR yet?</p>",
        "id": 153868789,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1485182848
    },
    {
        "content": "<p>Just a heads up that Grahame's on vacation with minimal internet access for the next week or so, so he may be slower to respond than usual.</p>",
        "id": 153868799,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1485187905
    },
    {
        "content": "<p>Well, <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> your opinion is just as valued in this discussion :) - any input?</p>",
        "id": 153868846,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1485213507
    },
    {
        "content": "<p>Believe me, if I had an opinion, I wouldn't have hesitated to share it :)</p>",
        "id": 153868850,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1485219448
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> - there is a pretty good description on <a href=\"https://jersey.java.net/documentation/latest/sse.html#d0e11463\" target=\"_blank\" title=\"https://jersey.java.net/documentation/latest/sse.html#d0e11463\">https://jersey.java.net/documentation/latest/sse.html#d0e11463</a> between the different types of eventing mechanisms. That might trigger an opinion of yours ... ;)</p>",
        "id": 153868917,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1485246123
    },
    {
        "content": "<p>No, I have never played with signalR....</p>",
        "id": 153869087,
        "sender_full_name": "Ewout Kramer",
        "timestamp": 1485356582
    },
    {
        "content": "<p>I can see it supports SSE.  What I wonder about is the cost attached to keeping open all these connections for a long time. That might not fit some usecases but not all, so SSE would be an additional choice for a subscription protocol. </p>",
        "id": 153869092,
        "sender_full_name": "Ewout Kramer",
        "timestamp": 1485357597
    },
    {
        "content": "<p>(and \"just\" as a side note, is SSE still not supported under IE nor Edge?)</p>",
        "id": 153869096,
        "sender_full_name": "Ewout Kramer",
        "timestamp": 1485357725
    },
    {
        "content": "<p>In my experience it is easier to have the server shipping updates out to clients on existing connections initiated by the client instead of having the server to initiate the connection. The latter usually requires multiple firewall issues, whereas the former requires fever.  It is correct that the server is required to keep the connections alive - those connections can however be distributed across servers given the proper architecture (a scalable one that is, which aligns with REST principles). (and you are right about the browser stuff - IE and Edge seems to be non-supporters of this, but I wouldn't let those browsers dictate this design).</p>",
        "id": 153869209,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1485421043
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191539\">@Torben M. Hagensen</span> - any take on this?</p>",
        "id": 153869350,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1485519372
    },
    {
        "content": "<p>We have only had the need for pushing data to clients on mobile devices where we use the push frameworks for Android and IOS.</p>",
        "id": 153869480,
        "sender_full_name": "Torben M. Hagensen",
        "timestamp": 1485786860
    },
    {
        "content": "<p>Sure! I can certainly see the usecase of client-initiated subscriptions....  I am just getting my head around it and wonder whether there is experience about the cost of keeping all those connections open if you happen to be in a situation where clients connect for days, weeks or months...  </p>",
        "id": 153869482,
        "sender_full_name": "Ewout Kramer",
        "timestamp": 1485787036
    },
    {
        "content": "<p>-</p>",
        "id": 153869572,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1485854157
    },
    {
        "content": "<p>SSE is not on the list because no one asked us for this. There is a profusion of candidates for this, and we need to be sparing in what we add to the list. I haven't heard any specific reason that SSE is better than websockets?</p>",
        "id": 153870154,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1486353627
    },
    {
        "content": "<p>I won't argue that SSE is generally better than websockets. I would say it has other qualities than websockets (just like rest-hooks, email/sms and so on - email, really?). There is an abundance of discussions and analyses on the sentence \"SSE vs  websockets\" which probably explains is better than me (ie. <a href=\"http://streamdata.io/blog/server-sent-events/\" target=\"_blank\" title=\"http://streamdata.io/blog/server-sent-events/\">http://streamdata.io/blog/server-sent-events/</a> - theres a nice image on <a href=\"http://stackoverflow.com/questions/11077857/what-are-long-polling-websockets-server-sent-events-sse-and-comet\" target=\"_blank\" title=\"http://stackoverflow.com/questions/11077857/what-are-long-polling-websockets-server-sent-events-sse-and-comet\">http://stackoverflow.com/questions/11077857/what-are-long-polling-websockets-server-sent-events-sse-and-comet</a> aswell). For something called 'subscription' (ie. changes to something outlined in the criteria/(predicate)) SSE sounds like a great fit for an event driven mechanism on a RESTful architecture.</p>",
        "id": 153870391,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1486420099
    },
    {
        "content": "<p>Allow me to draw the attention to my very rough example implementation of SSE and FHIR combined on <a href=\"https://github.com/jkiddo/hapi-fhir/tree/master/example-projects/hapi-fhir-jaxrs-sse\" target=\"_blank\" title=\"https://github.com/jkiddo/hapi-fhir/tree/master/example-projects/hapi-fhir-jaxrs-sse\">https://github.com/jkiddo/hapi-fhir/tree/master/example-projects/hapi-fhir-jaxrs-sse</a>. It does not use the Subscription(and criteria) resource (yet) - but it illustrates how it can work (which it does) :-)</p>",
        "id": 153875348,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1488924798
    }
]