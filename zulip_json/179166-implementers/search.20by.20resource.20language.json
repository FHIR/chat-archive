[
    {
        "content": "<p>is this possible?</p>",
        "id": 230039357,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1615560060
    },
    {
        "content": "<p>If you could, I'd expect the search parameter to be defined here: <a href=\"https://build.fhir.org/resource#search\">https://build.fhir.org/resource#search</a></p>\n<p>You can submit a change request to add it if you've got a use-case</p>",
        "id": 230040027,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1615560315
    },
    {
        "content": "<p>yes thanks just wanted to confirm. In multi-language situations, such as product information leaflets for a supranational entity e.g. EU (or a country that has multiple languages, I assume), there is a need to search by language.</p>",
        "id": 230040551,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1615560507
    },
    {
        "content": "<p>Searching by Resource.language won't necessarily tell you whether the resource includes translations</p>",
        "id": 230041306,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1615560820
    },
    {
        "content": "<p>In general, we still haven't done a lot of work here</p>",
        "id": 230041334,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1615560832
    },
    {
        "content": "<p>yes that is true. There can be translations, and you can also use xml:lang inside the text of a document, I believe.</p>",
        "id": 230041520,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1615560897
    },
    {
        "content": "<p>The only one that could be easily searchable would be \"_language\"</p>",
        "id": 230041648,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1615560948
    },
    {
        "content": "<p>For this use case a language specific resource is probably more acceptable to the users.</p>",
        "id": 230041895,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1615561032
    },
    {
        "content": "<p>No one wants to be a \"secondary\" language</p>",
        "id": 230041936,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1615561052
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191651\">@Rik Smithies</span>  I would second a  the request for such a search parameter - I was also surprised that it does not exists.  For us, one concrete use case is that we have Questionnaires in multiple languages, recognizable by the value in the <code>language</code> element. Then it definitely makes sense to asks for e.g. all Questionnaires in German. It is true that one can specify a preferred language using that <code>Accept-Language</code> HTTP header (see <a href=\"https://www.hl7.org/fhir/languages.html##http\">here in the spec</a>). But I find it confusing to have to go outside the normal search language for a single parameter and the <code>_format</code> parameter already doubles smt. that can also be specified by headers.</p>",
        "id": 230053372,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1615564919
    },
    {
        "content": "<p>As a workaround, I guess,  you can use Meta.tag and duplicate language there. It is searchable.</p>",
        "id": 230059732,
        "sender_full_name": "Pash",
        "timestamp": 1615566938
    },
    {
        "content": "<p>thanks <span class=\"user-mention\" data-user-id=\"194703\">@Morten Ernebjerg</span> . I have not noticed that page before. Strange that it is not linked from some of the places like <a href=\"http://hl7.org/fhir/narrative.html#lang\">http://hl7.org/fhir/narrative.html#lang</a><br>\nThat indicates that not all text has to have a primary language, and a secondary translation. <br>\nI was also thinking that resource.language could benefit from being 0..*. There would then be not always be a \"primary\" language, but that is probably a good thing. <br>\nIt would allow searching for any resource that has text in that language.<br>\n<span class=\"user-mention\" data-user-id=\"352507\">@Pash</span> that is a good idea for the short term yes, better than an extension</p>",
        "id": 230059920,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1615566997
    },
    {
        "content": "<p>I also wonder how many servers support the http Accept-Language header</p>",
        "id": 230060212,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1615567106
    },
    {
        "content": "<p>Some documents do have multiple languages, though it would not be common for other resources to mix them</p>",
        "id": 230060479,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1615567212
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191651\">@Rik Smithies</span> Yes, I also think that page is easy to miss, which in a sense is an indication that (as Lloyd said) this  is relatively untravelled territory. </p>\n<p>Re. multiple languages. I see you point. In our specific use case where we provide the same resources in multiple languages, the language is always unique and serves to differentiate between different linguistic flavours of the same questionnaire (similar how <code>Questionnaire.version</code> differentiates between versions). But I suppose even then, one could have multiple languages. On ingredient lists on foods, Danish, Swedish, and Norweigan are often squashed into one entry because they are deemed  \"sufficiently interoperable\" <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span>. Either way, being able to search it seems useful.</p>",
        "id": 230062198,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1615567851
    },
    {
        "content": "<p>I have a drug leaflet here that is in Finnish and Swedish in one document. I will make a proposal.</p>",
        "id": 230064038,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1615568546
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191651\">@Rik Smithies</span> I created a I18n presentation for our training courses, and I did ask the authors of the main public servers whether they supported Accept-Language, but it appears none of them support this out of the box.</p>",
        "id": 230146804,
        "sender_full_name": "René Spronk",
        "timestamp": 1615622939
    },
    {
        "content": "<p>Do you happen to have implementation experience with multi-lingual support ? That is, where it's of importance to search for, or persist, FHIR data in multiple languages? I'll be presenting on the topic of 'multi language support in FHIR' at the upcoming DevDays, and it would be nice to add some project based guidance / best practices to the presentation. Any hints or best practices ?</p>",
        "id": 234123597,
        "sender_full_name": "René Spronk",
        "timestamp": 1618217101
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191372\">@René Spronk</span> Very worthy topic! We do a lot for work with questionnaires in multiple languages, running in web or native apps. To keep things simple for the apps, we create language-specific versions of the \"definitional artifacts\" (Questionnaires and associated ValueSets) so that the apps can simply grab them off the shelf to match the current language setting. An example of this is our <a href=\"https://simplifier.net/guide/Covid-19Pre-TestPatientAssessment/Questionnaire\">IG to document the FHIR output of a COVID-19 questionnaire app</a> that supports both English and German (also discussed this a bit in my community talk at the last DevDays). We went about it as follows (though I think it's too early to sell this as best practice <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span> ):</p>\n<ul>\n<li>Use very simplistic (custom) templating to generate language-specific Questionnaire instances from a single template</li>\n<li>Generate language-specific extensions of ValueSets from CodeSystems (or code system supplements) with translations in the <code>CodeSystem.concept.designation</code> element</li>\n<li>Always fill the <code>language</code> element in these resources (and the generated QuestionnaireResponses)</li>\n<li>Where needed,  serve the \"definitional artifacts\" using a custom service that allows asking for a resource in a particular language.</li>\n</ul>",
        "id": 234129130,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1618220004
    },
    {
        "content": "<p>Re: language specific value sets: using the $expand displayLanguage parameter? What about HTTP Language support, should displayLanguage not be present ?</p>",
        "id": 234147362,
        "sender_full_name": "René Spronk",
        "timestamp": 1618230008
    },
    {
        "content": "<p>Re: definitional artifacts - need not be a 'custom' service in case of HTTP Language support (but I realize few systems actually support this right now)</p>",
        "id": 234147435,
        "sender_full_name": "René Spronk",
        "timestamp": 1618230061
    },
    {
        "content": "<p>Thanks for the comments - I didn't have anything on Questionnaires up to now. Could your 'custom templating' have been done using FHIR extensions to some sort of 'master questionnaire' as well? (I'm not saying that this would be asier to implement, just asking for the sake of clarification) <span class=\"user-mention\" data-user-id=\"194703\">@Morten Ernebjerg</span></p>",
        "id": 234147692,
        "sender_full_name": "René Spronk",
        "timestamp": 1618230194
    },
    {
        "content": "<p>Our set-up is a little unusual because we have an end-to-end encrypted system, meaning that the data server is \"blind\" (holds only encrypted data it cannot read) and so the clients have to do the heavy lifting.  Accordingly, we cannot use a normal powerful FHIR server with a REST-interface to run everything over - we tend to have smaller back-end services with quite targeted functionalities. I'm not an expert on the service for the definitional resources, but I don't think it used a FHIIR API since it was entirely internal and very focussed on very specific tasks (and needed to support language-based retrieval <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span> ) . ValueSets were pre-expanded when the underlying code system changed and then stored for serving. All in all, this is presumably quite different from the server-centric situation in most places, but like you indicate one could take some of the same approaches with a normal FHIR server.</p>\n<p>I suppose one could embed translations in a single Questionnaire through extensions or designations, though I must admit I never though it through deeply. One important goal for us was to make the final resources as simple as possible for the clients to handle, so for us it made sense to move the heavy lifting to \"compile time\" (definitional resource update) and generate multiple single-language artifacts up front. I build the tooling in TypeScript  during the early hectic COVID-19 days, so templating was also simply faster than full (or even partial) extension support.</p>",
        "id": 234166158,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1618236947
    },
    {
        "content": "<p>You could do this here:</p>\n<div class=\"codehilite\"><pre><span></span><code>      &quot;text&quot;: &quot;Check the box if the following statement is true.  The average air speed velocity of a laden European swallow is greater than a laden African swallow.&quot;,\n      &quot;_text&quot; : {\n        &quot;extension&quot; : [\n          {\n            &quot;extension&quot; : [\n              {\n                &quot;url&quot; : &quot;lang&quot;,\n                &quot;valueCode&quot; : &quot;de&quot;\n              },\n              {\n                &quot;url&quot; : &quot;content&quot;,\n                &quot;valueString&quot; : &quot;Bitte hier ankreuzen, wenn die folgende Aussage wahr ist: Die Höchstgeschwindigkeit der unbeladenen europäischen Schwalbe ist höher als die der unbeladenen afrikanischen Schwalbe.&quot;\n              }\n            ],\n            &quot;url&quot; : &quot;http://hl7.org/fhir/StructureDefinition/translation&quot;\n          }\n        ]\n      },\n</code></pre></div>\n<p>I have a feeling there must be more elegant ways than to attach 15 lines of extra JSON per language to each text element.</p>",
        "id": 234189472,
        "sender_full_name": "Tilo Christ",
        "timestamp": 1618245009
    },
    {
        "content": "<p>Feel free to use the \"I^\"  based  FHIR-syntax ;-)</p>",
        "id": 234276597,
        "sender_full_name": "René Spronk",
        "timestamp": 1618296671
    },
    {
        "content": "<p>I have added <a href=\"https://jira.hl7.org/browse/FHIR-32020\">https://jira.hl7.org/browse/FHIR-32020</a> for searching on meta.language</p>",
        "id": 236756092,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1619734769
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191651\">@Rik Smithies</span> excellent <span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span> (btw, <code>language</code> is a top level property in <code>Resource</code> it's not inside <code>meta</code>)</p>",
        "id": 236790336,
        "sender_full_name": "Morten Ernebjerg",
        "timestamp": 1619763027
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191651\">Rik Smithies</span> <a href=\"#narrow/stream/179166-implementers/topic/search.20by.20resource.20language/near/230064038\">said</a>:</p>\n<blockquote>\n<p>I have a drug leaflet here that is in Finnish and Swedish in one document. I will make a proposal.</p>\n</blockquote>\n<p>I believe <span class=\"user-mention\" data-user-id=\"408801\">@Craig Anderson</span> and I are also very interested in this as we are looking into filtering package leaflets based on language</p>",
        "id": 247310361,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1627377263
    },
    {
        "content": "<p>For questionnaires (and presumably for product leaflets), I wouldn't do many resources - rather one resource with translations. I agree with the need for \"search for resources that declare this language\" <br>\nbut I expect the functionality to be <br>\n\"get me this resource and display the content in this language\"</p>",
        "id": 247311274,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1627377964
    },
    {
        "content": "<p>Wait a moment ... you can actually filter/search by language using HAPI:<br>\n<a href=\"/user_uploads/10155/LJ1k51qyI_I4wS6YkhWGsYaQ/image.png\">image.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/10155/LJ1k51qyI_I4wS6YkhWGsYaQ/image.png\" title=\"image.png\"><img src=\"/user_uploads/10155/LJ1k51qyI_I4wS6YkhWGsYaQ/image.png\"></a></div><ul>\n<li>and it actually works as intended</li>\n</ul>",
        "id": 247311494,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1627378142
    },
    {
        "content": "<p>that does not make it standardized though</p>",
        "id": 247311541,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1627378184
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span> I guess that depends on the use case. For me the translation MUST be authorized one, meaning that the translation should be mastered and preferrably not executed by the client but instead be provided by the backend</p>",
        "id": 247311688,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1627378284
    },
    {
        "content": "<p>Right, same here</p>",
        "id": 247311708,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1627378304
    },
    {
        "content": "<p>The translation is authorized, but i'd only have one resource. One resource with authorized translations, instead of N authorized translated resources</p>",
        "id": 247311787,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1627378348
    },
    {
        "content": "<p>In that case you don't need language as search parameter</p>",
        "id": 247311870,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1627378438
    },
    {
        "content": "<p>and you would have to update the entire resource whenever you would change the wording for just one of the languages</p>",
        "id": 247311958,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1627378498
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191832\">@Jose Costa Teixeira</span> or am I missing your point?</p>",
        "id": 247314567,
        "sender_full_name": "Jens Villadsen",
        "timestamp": 1627380429
    },
    {
        "content": "<p>you are correct</p>",
        "id": 247314842,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1627380612
    },
    {
        "content": "<p>(you'll have to update the published artifact with all the translations when you need to change an accent in one of the languages)</p>",
        "id": 247314897,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1627380658
    },
    {
        "content": "<p>this discussion is the same we're having in <a class=\"stream\" data-stream-id=\"179255\" href=\"/#narrow/stream/179255-questionnaire\">#questionnaire</a> which is a good candidate for requiring translations</p>",
        "id": 247314966,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1627380706
    },
    {
        "content": "<p>The idea of multiple languages may work in some resources, but it's not so good for documents.<br>\nThere the granularity reflects that of the source documents and the business process.<br>\nIf they are authored in different places at different times it isn't practical to combine them into one resource. They want to stay as a single document in one language and not one document with alternating paragraphs. The document will be authored differently, could be dated, signed etc, so it may need to be a single document in one language.</p>",
        "id": 247318796,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1627383803
    },
    {
        "content": "<p>Right, if we use documents that are themselves authored in different languages, I think that is valid. <br>\nIf the document is issued from content that is itself multilingual, we can rely on the translation features (Sure, we could have a different construct, but it is what we have to express the same thing in different languages). <br>\nA discharge summary is a document that is authored in one language.</p>",
        "id": 247326515,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1627389138
    },
    {
        "content": "<p>A questionnaire would be authored in one language and then can be translated string by string (as translators do).</p>",
        "id": 247326642,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1627389236
    },
    {
        "content": "<p>I'll have to check around here (3 languages), but a product leaflet is a collection of information, much of it is hopefully coded, and I don't see why I wouldn't use the translation extension for the content - which doesn't invalidate that I could still have create a $document which contains only the selected language. But that document is no longer the master, I think.</p>",
        "id": 247326812,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1627389345
    },
    {
        "content": "<p>(as opposed to the discharge summary, where the physician will only produce content in one language)</p>",
        "id": 247326891,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1627389386
    },
    {
        "content": "<p>Product leaflets are moving towards coded, but for a long time at least there will be a document version that represents what the patient will read. And structured info but not directly in the same resource yet.</p>\n<p>In theory all this could be in one clever resource, but the document resource is not really meant to be set of documents or parts  capable of being partly rendered on demand.</p>\n<p>An issue with a translation is that it seems it is always one primary language plus a translation. That is not always politically correct.</p>",
        "id": 247333697,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1627393044
    },
    {
        "content": "<p>We visited those arguments against some time ago, which is why I mentioned my perspective.</p>",
        "id": 247347281,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1627398932
    },
    {
        "content": "<p>In terms of main language, yes, especially when people want  to find arguments. So far I've escaped this by making things in English and then translating to the official languaes</p>",
        "id": 247347571,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1627399056
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191427\">Jens Villadsen</span> <a href=\"#narrow/stream/179166-implementers/topic/search.20by.20resource.20language/near/247310361\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"191651\">Rik Smithies</span> <a href=\"#narrow/stream/179166-implementers/topic/search.20by.20resource.20language/near/230064038\">said</a>:</p>\n<blockquote>\n<p>I have a drug leaflet here that is in Finnish and Swedish in one document. I will make a proposal.</p>\n</blockquote>\n<p>I believe <span class=\"user-mention silent\" data-user-id=\"408801\">Craig Anderson</span> and I are also very interested in this as we are looking into filtering package leaflets based on language</p>\n</blockquote>\n<p>Might have responded to the wrong thread so repeating here again. I believe each language should be a separate document. However, we’ll add this to our list of questions for EMA to confirm for us.</p>",
        "id": 253105445,
        "sender_full_name": "Craig Anderson",
        "timestamp": 1631545621
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"191427\">Jens Villadsen</span> <a href=\"#narrow/stream/179166-implementers/topic/search.20by.20resource.20language/near/247310361\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"191651\">Rik Smithies</span> <a href=\"#narrow/stream/179166-implementers/topic/search.20by.20resource.20language/near/230064038\">said</a>:</p>\n<blockquote>\n<p>I have a drug leaflet here that is in Finnish and Swedish in one document. I will make a proposal.</p>\n</blockquote>\n<p>I believe <span class=\"user-mention silent\" data-user-id=\"408801\">Craig Anderson</span> and I are also very interested in this as we are looking into filtering package leaflets based on language</p>\n</blockquote>\n<p>Hey <span class=\"user-mention\" data-user-id=\"191651\">@Rik Smithies</span> , confirmed with EMA this morning that all languages are separate documents. Then each document tracked within the List (Master List).</p>",
        "id": 253283740,
        "sender_full_name": "Craig Anderson",
        "timestamp": 1631638272
    },
    {
        "content": "<p>hi <span class=\"user-mention\" data-user-id=\"408801\">@Craig Anderson</span> I am not sure we have completely ruled out multiple language documents at EMA. In general if there is a translation, then that becomes another FHIR document. But product documents originated in multiple languages do exit. We still need to search by language, whether it is one or multiple I guess.</p>",
        "id": 253296608,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1631643026
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191651\">@Rik Smithies</span>, correct. Just mean that if you have a Greek, Norwegian and English PIL then that means three documents. You wouldn’t merge all three languages into one document. And yes, regardless user would probably want to search by language</p>",
        "id": 253314135,
        "sender_full_name": "Craig Anderson",
        "timestamp": 1631649550
    },
    {
        "content": "<p>translations would result in a transform. This is the concept available in DocumentReference.relatesTo</p>",
        "id": 253314896,
        "sender_full_name": "John Moehrke",
        "timestamp": 1631649795
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"408801\">@Craig Anderson</span> indeed there is no merging.<br>\n<span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span> we don't plan to use DocumentReference.relatesTo. It implies one is the main one and the other secondary, which is not always the case. Unless both point at each other, which then means you have to change the original to add a translation. It doesn't work well for a set of documents in multiple languages (e.g. 10 languages). Also there are other relationships between documents that are just as important but aren't covered by relatesTo, so it would need different mechanisms. We settled on using List as an external index.</p>",
        "id": 253319473,
        "sender_full_name": "Rik Smithies",
        "timestamp": 1631651606
    },
    {
        "content": "<p>would welcome comments to help improve DocumentReference</p>",
        "id": 253321686,
        "sender_full_name": "John Moehrke",
        "timestamp": 1631652587
    }
]