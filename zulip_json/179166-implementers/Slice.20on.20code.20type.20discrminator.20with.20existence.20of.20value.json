[
    {
        "content": "<p>Hello, I try to create a Slice on CommunicationRequest resource on status field and I would like to say : \"status = active only if communication request have at least one recipient\" do you know how to do that with a slice or constraint ? <br>\nThanks</p>",
        "id": 182459511,
        "sender_full_name": "Laureen Loison",
        "timestamp": 1575386823
    },
    {
        "content": "<p>That should be a constraint, not a slice.  Slice is for repeating elements within a resource, not for the resource as a whole.</p>",
        "id": 182475603,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1575395127
    },
    {
        "content": "<p>Great, thanks, I try with this constraint add in Forge but no errors comes ... <br>\nHere it's my try :<br>\n         {<br>\n            \"key\": \"cmr-1\",<br>\n            \"severity\": \"error\",<br>\n            \"human\": \"if status = active we must have a recipient,\",<br>\n            \"expression\": \"status != 'active' | recipient.exists()\"<br>\n          }<br>\nDo you thing it's a correct expression ? Should I need to add a xpath ?<br>\nThanks</p>",
        "id": 182476692,
        "sender_full_name": "Laureen Loison",
        "timestamp": 1575395769
    },
    {
        "content": "<p>It should be <code>status != 'active' or recipient.exists()</code></p>",
        "id": 182479389,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1575397361
    },
    {
        "content": "<blockquote>\n<p>It should be <code>status != 'active' or recipient.exists()</code></p>\n</blockquote>\n<p>I try but he didn't work. I have no error on my validation, have you got an other idea ?</p>",
        "id": 182546717,
        "sender_full_name": "Laureen Loison",
        "timestamp": 1575458626
    },
    {
        "content": "<p>The invariant is being declared on \"CommunicationRequest\" root element, correct?  How are you trying to validate?</p>",
        "id": 182553338,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1575464794
    },
    {
        "content": "<p>Oh sorry I think the constraint should be declared on \"CommunicationRequest.status\" field, I try and it's work perfectly, thank you</p>",
        "id": 182559705,
        "sender_full_name": "Laureen Loison",
        "timestamp": 1575469491
    },
    {
        "content": "<p>Constraints always have to appear on an ancestor (typically the nearest ancestor) that contains all elements referenced by the constraint.  Paths are expressed with respect to the element the constraint appears on.</p>",
        "id": 182562180,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1575471141
    }
]