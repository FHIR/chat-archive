[
    {
        "content": "<p>We are implementing clinical notes using a <code>DocumentReference</code> resource, encoding the text as base64 but we need them to be searchable by content. Storing them as base64 means we can't query them efficiently. We are considering extending <code>DocumentReference.content</code> but then <code>attachment</code> is required and we would have to keep them both. Is there another resource more suited to this problem or a better extension?</p>",
        "id": 159014619,
        "sender_full_name": "Orlando Osorio",
        "timestamp": 1550696582
    },
    {
        "content": "<p>there's no requirement that you store the same format as you have on the API. I store the content alongside the raw resource in an internal indexable format</p>",
        "id": 159014919,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1550696811
    },
    {
        "content": "<p>Not necessarily a good solution, but often systems will do a index of the content and place searchable words into either .description or .context.event ( Yes, all searchable words, not just clinical act codes.)  This does require that you can pre-process the document into a useful and reasonable set of searchable words.</p>",
        "id": 159015378,
        "sender_full_name": "John Moehrke",
        "timestamp": 1550697175
    },
    {
        "content": "<p>We are using Aidbox as a fhir server, it would have to be supported there, <span class=\"user-mention\" data-user-id=\"191318\">@nicola (RIO/SS)</span></p>",
        "id": 159015523,
        "sender_full_name": "Orlando Osorio",
        "timestamp": 1550697291
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> do you inline attachment into document reference if it’s text?  What if it’s html or jpeg? How do you specify search by document content? I think, document with plain text is important corner case to think about - i.e. support explicitly by something like DocRef.content.value[x] ?!</p>",
        "id": 159041833,
        "sender_full_name": "nicola (RIO/SS)",
        "timestamp": 1550726220
    },
    {
        "content": "<p>Or like <span class=\"user-mention\" data-user-id=\"191404\">@John Moehrke</span> said - something like DocRef.content.summary as text</p>",
        "id": 159041909,
        "sender_full_name": "nicola (RIO/SS)",
        "timestamp": 1550726368
    },
    {
        "content": "<p>in my server <em>if</em> the content is attached (not by reference) I make a copy of it in another database table for indexing</p>",
        "id": 159044421,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1550730355
    },
    {
        "content": "<p>what is a search parameter to find docs with a specific text?</p>",
        "id": 159046500,
        "sender_full_name": "nicola (RIO/SS)",
        "timestamp": 1550733499
    },
    {
        "content": "<p>hmm, could that be a query parameter on DocRef?  It would not need to be supported by everyone...</p>",
        "id": 159070161,
        "sender_full_name": "John Moehrke",
        "timestamp": 1550758335
    },
    {
        "content": "<p>as a query parameter it would not be worse than not having the query parameter... so if a server supported it, then it would reduce the number of entries returned...  Could start as simply text query parameter, with other query parameters of more power.  Or is there an example of a type of query parmeter elsewhere that is more powerful than string word search?</p>",
        "id": 159070329,
        "sender_full_name": "John Moehrke",
        "timestamp": 1550758498
    },
    {
        "content": "<p>there's already a query parameter, one of the generic ones</p>",
        "id": 159104831,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1550783574
    },
    {
        "content": "<p>ah. so one could use _text?</p>",
        "id": 159112098,
        "sender_full_name": "John Moehrke",
        "timestamp": 1550789116
    },
    {
        "content": "<p>so we could just add some clarification on the DocumentReference page that the _text and _content query parameter could/should not only search over the DocumentReference resource but also the attachment bits...</p>",
        "id": 159112208,
        "sender_full_name": "John Moehrke",
        "timestamp": 1550789210
    },
    {
        "content": "<p>yes that would be a good clariifcation</p>",
        "id": 159120583,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1550798521
    },
    {
        "content": "<p><a href=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=20417\" target=\"_blank\" title=\"http://gforge.hl7.org/gf/project/fhir/tracker/?action=TrackerItemEdit&amp;tracker_item_id=20417\">GF#20417</a></p>",
        "id": 159153639,
        "sender_full_name": "John Moehrke",
        "timestamp": 1550839405
    }
]