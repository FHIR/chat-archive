[
    {
        "content": "<p>Hi guys,</p>\n<p>We have a use case that I am looking into solutions for storing and processing medical images to detect a visual signal for pneumonia in them. We are going to use RSNA Pneumonia Detection Challenge dataset: <a href=\"https://www.kaggle.com/c/rsna-pneumonia-detection-challenge/data\" target=\"_blank\" title=\"https://www.kaggle.com/c/rsna-pneumonia-detection-challenge/data\">https://www.kaggle.com/c/rsna-pneumonia-detection-challenge/data</a>. All provided images are in DICOM format.</p>\n<p>The algorithm will be predicting whether pneumonia exists in a given image. It will do so by predicting bounding boxes around areas of the lung. Samples without bounding boxes are negative and contain no definitive evidence of pneumonia. Samples with bounding boxes indicate evidence of pneumonia.</p>\n<p>The format will be: patientId confidence x-min y-min width height.</p>\n<p>For patientIds with multiple predicted bounding boxes: 0004cfab-14fd-4e49-80ba-63a80b6bddd6,0.5 0 0 100 100 0.5 0 0 100 100, etc.</p>\n<p>We plan to store medical images in the Media resource.</p>\n<p>Will it be correct to represent results found by the prediction algorithm as Observations, with components for bounding boxes? Where to put the prediction results (pneumonia/no pneumonia) - Observation, RiskAssessment, something else?</p>\n<table>\n<thead>\n<tr>\n<th>FHIR</th>\n<th>Value</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Observation.code</td>\n<td>prediction results</td>\n<td></td>\n</tr>\n<tr>\n<td>Observation.subject</td>\n<td>patientId</td>\n<td></td>\n</tr>\n<tr>\n<td>Observation.focus</td>\n<td>Media</td>\n<td></td>\n</tr>\n<tr>\n<td>Observation.component(0).code</td>\n<td>confidence</td>\n<td></td>\n</tr>\n<tr>\n<td>Observation.component(0).valueQuantity.value</td>\n<td>0.5</td>\n<td></td>\n</tr>\n<tr>\n<td>Observation.component(1).code</td>\n<td>x-min</td>\n<td>the upper-left x coordinate of the bounding box</td>\n</tr>\n<tr>\n<td>Observation.component(1).valueInteger</td>\n<td>0</td>\n<td></td>\n</tr>\n<tr>\n<td>Observation.component(2).code</td>\n<td>y-min</td>\n<td>the upper-left y coordinate of the bounding box</td>\n</tr>\n<tr>\n<td>Observation.component(2).valueInteger</td>\n<td>0</td>\n<td></td>\n</tr>\n<tr>\n<td>Observation.component(3).code</td>\n<td>width</td>\n<td>the width of the bounding box</td>\n</tr>\n<tr>\n<td>Observation.component(3).valueInteger</td>\n<td>100</td>\n<td></td>\n</tr>\n<tr>\n<td>Observation.component(4).code</td>\n<td>height</td>\n<td>the height of the bounding box</td>\n</tr>\n<tr>\n<td>Observation.component(4).valueInteger</td>\n<td>100</td>\n<td></td>\n</tr>\n<tr>\n<td>Observation.component(5).code</td>\n<td>Target</td>\n<td>indicating whether this sample has evidence of pneumonia</td>\n</tr>\n<tr>\n<td>Observation.component(5).valueBoolean</td>\n<td>true/false</td>\n<td></td>\n</tr>\n<tr>\n<td>RiskAssessment.basis</td>\n<td>Media (X-Ray) and/or Observations (predicted bounding boxes)</td>\n<td></td>\n</tr>\n<tr>\n<td>RiskAssessment.prediction.outcome</td>\n<td>pneumonia/no pneumonia</td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<p>Thanks</p>",
        "id": 191574705,
        "sender_full_name": "Aleksandra Pavlyshina",
        "timestamp": 1585036190
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191380\">@Elliot Silver</span> <span class=\"user-mention\" data-user-id=\"197037\">@Jonathan Whitby</span> <span class=\"user-mention\" data-user-id=\"191960\">@Brad Genereaux</span></p>",
        "id": 191605546,
        "sender_full_name": "John Moehrke",
        "timestamp": 1585055007
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"191329\">@Aleksandra Pavlyshina</span> There is work-in-progress on a mechanism to better associate observations with specific images and overlays (<a href=\"https://confluence.hl7.org/display/IMIN/ImagingReference+as+an+Extension+to+DocumentReference\" target=\"_blank\" title=\"https://confluence.hl7.org/display/IMIN/ImagingReference+as+an+Extension+to+DocumentReference\">https://confluence.hl7.org/display/IMIN/ImagingReference+as+an+Extension+to+DocumentReference</a>). In the interim your approach looks reasonable to me.</p>\n<p>It is worth noting that in R4.2+ the Media resource has been merged with the DocumentReference resource so you might consider using DocumentReference instead.</p>\n<p>In terms of storing the prediction result it might make sense to store it as both an Observation and a RiskAssessment (with the Observation as a basis). RiskAssessment is relatively immature so it may not be as widely supported by downstream systems.</p>",
        "id": 191617338,
        "sender_full_name": "Jonathan Whitby",
        "timestamp": 1585060209
    },
    {
        "content": "<p>Also consider whether to use a DICOM Structured Report for this. DICOM SR has templates for defining bounding boxes and findings. As <span class=\"user-mention\" data-user-id=\"197037\">@Jonathan Whitby</span> mentions, work is in progress to reference SR content in FHIR.</p>",
        "id": 191649994,
        "sender_full_name": "Elliot Silver",
        "timestamp": 1585072792
    },
    {
        "content": "<p>Thank you <span class=\"user-mention\" data-user-id=\"197037\">@Jonathan Whitby</span> <span class=\"user-mention\" data-user-id=\"191380\">@Elliot Silver</span></p>",
        "id": 191755054,
        "sender_full_name": "Aleksandra Pavlyshina",
        "timestamp": 1585147401
    }
]