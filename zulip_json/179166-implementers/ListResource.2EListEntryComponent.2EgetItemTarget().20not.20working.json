[
    {
        "content": "<p>Hi, I'm converting my code to FHIR STU3 and I'm trying to get the Organizatin Resource referenced by a List.entry[x].item.reference by calling getItemTarget() on the ListEntryComponent, but it always returns NULL although the resource is there (see <em>if (organizations.get(i).getItemTarget())</em> ). What can be wrong?</p>\n<p>Here is part of the code I'm using:</p>\n<p>. . .</p>\n<div class=\"codehilite\"><pre><span></span>  if (entries0.get(e).getReference().equals(&quot;List/g1&quot;)) {\n\n            //get the organizations list\n            var organizations =  entries0.get(e).getResource().getEntry();\n\n            for (var i = 0; i &lt; organizations.size(); i++) {\n\n                var orgReference = organizations.get(i).getItem();\n\n                if (orgReference.hasReference()) {\n\n                    //if the reference resolves, Organization.type must be present\n                    if (organizations.get(i).getItemTarget() &amp;&amp; \n                        organizations.get(i).getItemTarget().getResourceType() == fhirPackageStruct.ResourceType.Organization) {\n\n                        list1OrgTypeSystem = organizations.get(i).getItemTarget().getTypeFirstRep().getCodingFirstRep().getSystem().equals(&quot;http://spms.min-saude.pt/pds/codings/nn_organization_types&quot;);\n                        throwIfTrue(!list1OrgTypeSystem,&#39;Composition.section[0].entry[&#39;+e+&#39;].entry[&#39;+i+&#39;].item &#39; + orgReference.getReference(), &quot;INVALID Organization.type.system. Expected: http://spms.min-saude.pt/pds/codings/nn_organization_types&quot;);\n                    }\n                    else {\n                        throw &#39;srcTransf validateNNDocumentProfile: não foi encontrado o recurso referenciado por &#39; + orgReference.getReference() + &#39; da lista de instituições de seguimento da grávida.&#39;;\n                    }\n\n                    orgReference = orgReference.getReference().toLowerCase();\n                }\n\n                if (orgReference.equals(&quot;organization/hospital&quot;)) {\n\n                    section0HospMotive = organizations.get(i).getItemTarget().getExtension().isEmpty();\n                    throwIfTrue(section0HospMotive,&#39;Composition.section[0].entry[&#39;+e+&#39;].entry[&#39;+i+&#39;].item (Organization/Hospital)&#39;, &quot;MISSING FOLLOWUP MOTIVE EXTENSION&quot;);\n                }\n            }   \n        }\n</pre></div>\n\n\n<p>. . .</p>\n<p>Can you please help me? Thank you!!</p>",
        "id": 153890103,
        "sender_full_name": "Patricia Alves",
        "timestamp": 1494948920
    }
]