[
    {
        "content": "<p>We are producing AllergyIntolerance resources from ADT messages, and we're trying to work out what to do with <a href=\"http://hl7.org/fhir/allergyintolerance-definitions.html#AllergyIntolerance.reaction.severity\" target=\"_blank\" title=\"http://hl7.org/fhir/allergyintolerance-definitions.html#AllergyIntolerance.reaction.severity\">reaction.severity</a> if we can't map to one of the required codes. We'd like to provide an extension containing the original unmapped value, and a <a href=\"http://hl7.org/fhir/extension-data-absent-reason.html\" target=\"_blank\" title=\"http://hl7.org/fhir/extension-data-absent-reason.html\">reason code</a> explaining that it couldn't be mapped, and the natural place to put this is in the (otherwise empty) severity element itself.<br>\nHowever the definitions of <a href=\"http://hl7.org/fhir/terminologies.html#required\" target=\"_blank\" title=\"http://hl7.org/fhir/terminologies.html#required\">required binding</a> and the <a href=\"http://hl7.org/fhir/extensibility.html#1.17.0.2.2\" target=\"_blank\" title=\"http://hl7.org/fhir/extensibility.html#1.17.0.2.2\">absent reason extension</a> seem to conflict a little - first, it's not clear whether we're allowed to have a code with a required binding and no value, and second, whether data-absent-reason can or should be applied to elements with a minimum cardinality of zero.<br>\nAny thoughts?</p>",
        "id": 153845994,
        "sender_full_name": "James Butler",
        "timestamp": 1472682335
    },
    {
        "content": "<p>Yes and yes.  This is valid:</p>\n<div class=\"codehilite\"><pre>&lt;severity&gt;\n        &lt;extension url=&quot;http://hl7.org/fhir/StructureDefinition/data-absent-reason&quot;&gt;\n            &lt;valueCode value=&quot;unsupported&quot;/&gt;\n        &lt;/extension&gt;\n    &lt;/severity&gt;\n</pre></div>",
        "id": 153845995,
        "sender_full_name": "Eric Haas",
        "timestamp": 1472689574
    },
    {
        "content": "<p>Excellent, thanks. I might put in a request to change the wording of <a href=\"http://hl7.org/fhir/terminologies.html#required\" target=\"_blank\" title=\"http://hl7.org/fhir/terminologies.html#required\">required</a> - \"To be conformant, instances of this element SHALL include a code from the specified value set\" would seem to preclude it.</p>",
        "id": 153845996,
        "sender_full_name": "James Butler",
        "timestamp": 1472689727
    },
    {
        "content": "<p>The binding refers to the code to use in the element.  I think that part is clear.  What I did notice is that there isn't really a data absent reason code that describes your use case of \"can't map it \".   ( there was a  STU3 change in this valueset that I was not aware of)  Should be  'OTH'</p>",
        "id": 153845999,
        "sender_full_name": "Eric Haas",
        "timestamp": 1472690403
    },
    {
        "content": "<p>To me, the \"...SHALL include a code from...\" implies that you can't have a severity with no code.</p>",
        "id": 153846000,
        "sender_full_name": "James Butler",
        "timestamp": 1472690678
    },
    {
        "content": "<p>+1</p>",
        "id": 153846006,
        "sender_full_name": "Richard Townley-O'Neill",
        "timestamp": 1472692268
    },
    {
        "content": "<p>I'd like to revive this old thread.  Based on <a href=\"http://build.fhir.org/terminologies.html#code\" target=\"_blank\" title=\"http://build.fhir.org/terminologies.html#code\">http://build.fhir.org/terminologies.html#code</a>, I'm wondering if its allowed to set data-absent-reason for a CodeableConcept element with a required binding (required via a profile).  It seems like not to me due to the following statement \"at least one Coding element SHALL be present\".</p>",
        "id": 153909361,
        "sender_full_name": "Lee Surprenant",
        "timestamp": 1505925898
    },
    {
        "content": "<p>I think you can have the extension, but you still need to have a coding</p>",
        "id": 153909536,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1505949690
    },
    {
        "content": "<p>Hey, I want to do data absent reason for Formulary coverageplan status &amp; mode, both are datatype of  \"code\". Any suggestions how to do that?</p>",
        "id": 241357580,
        "sender_full_name": "Dhivakar Siddhu",
        "timestamp": 1622706121
    },
    {
        "content": "<p>You can't.  If an element has type 'code', that means it has a required binding.  If an element has a required binding in order to include the element, you MUST have a value from the specified value set.  If the element is mandatory, then you can't include the containing element.  If the containing element is the resource, then you can't create an instance that conforms to the profile.</p>",
        "id": 241400750,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1622731569
    },
    {
        "content": "<p>If you think there are mandatory elements that aren't reasonable to populate, then please provide that as feedback to the IG authors using the 'propose a change' link.  In the interim, you'll need to decide whether to be non-conformant or to suppress some of your data.</p>",
        "id": 241400900,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1622731624
    },
    {
        "content": "<p>We are also trying to conform fhir standards on null values especially dates . can anybody help?</p>",
        "id": 241776521,
        "sender_full_name": "Rey Limosenero",
        "timestamp": 1623072797
    },
    {
        "content": "<p>Can you be more specific?</p>",
        "id": 241777418,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1623073182
    },
    {
        "content": "<p>ah yes, we are getting nulls on 1..1 fields. ex issued in the diagnosticreport profile. so we want to implement the dataabsentreason \"unknown\". but can't find the snippet for the implementation.</p>",
        "id": 241779443,
        "sender_full_name": "Rey Limosenero",
        "timestamp": 1623074014
    },
    {
        "content": "<p>Which IG are you implementing? DiagnosticReport.issued in base FHIR is optional.</p>",
        "id": 241780567,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1623074499
    },
    {
        "content": "<p>Hello Yunwei, we are implementing USCore and specifically  US Core DiagnosticReport Lab</p>",
        "id": 241780772,
        "sender_full_name": "Justin Miller",
        "timestamp": 1623074584
    },
    {
        "content": "<p>Also we are using FHIR r4</p>",
        "id": 241781683,
        "sender_full_name": "Rey Limosenero",
        "timestamp": 1623074954
    },
    {
        "content": "<p>JSON or XML?</p>",
        "id": 241786117,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1623076723
    },
    {
        "content": "<p>Json</p>",
        "id": 241786414,
        "sender_full_name": "Justin Miller",
        "timestamp": 1623076860
    },
    {
        "content": "<p>\"_issued\": {<br>\n  \"extension\":[<br>\n    {<br>\n      \"url\":\"<a href=\"http://hl7.org/fhir/StructureDefinition/data-absent-reason\">http://hl7.org/fhir/StructureDefinition/data-absent-reason</a>\",<br>\n      \"valueCode\":\"unknown\"<br>\n    }<br>\n  ]<br>\n}</p>",
        "id": 241787989,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1623077424
    },
    {
        "content": "<p>US Core has a very specific guidance on missing data for required non-coded element: <a href=\"http://hl7.org/fhir/us/core/general-guidance.html#missing-data\">http://hl7.org/fhir/us/core/general-guidance.html#missing-data</a></p>\n<blockquote>\n<p>For non-coded data elements, use the DataAbsentReason Extension in the data type</p>\n<div class=\"codehilite\"><pre><span></span><code>Use the code unknown - The value is expected to exist but is not known.\n</code></pre></div>\n\n</blockquote>\n<p>Look <span class=\"user-mention\" data-user-id=\"191320\">@Lloyd McKenzie</span> 's code segment <span aria-label=\"point up\" class=\"emoji emoji-1f446\" role=\"img\" title=\"point up\">:point_up:</span></p>",
        "id": 241788181,
        "sender_full_name": "Yunwei Wang",
        "timestamp": 1623077520
    },
    {
        "content": "<p>@Lloyd McKenzie thanks, but we are figuring out how to do that in the code. We are using hapifhir  and a code snippet would be really useful. :)</p>",
        "id": 241792496,
        "sender_full_name": "Rey Limosenero",
        "timestamp": 1623079071
    },
    {
        "content": "<p>That you might need to ask on <a class=\"stream\" data-stream-id=\"179167\" href=\"/#narrow/stream/179167-hapi\">#hapi</a></p>",
        "id": 241797998,
        "sender_full_name": "Lloyd McKenzie",
        "timestamp": 1623081141
    },
    {
        "content": "<p>Thanks! we figured it out</p>",
        "id": 241925809,
        "sender_full_name": "Rey Limosenero",
        "timestamp": 1623161672
    }
]