[
    {
        "content": "<p>kpshek milestoned <a href=\"https://github.com/cds-hooks/docs/issues/119\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/119\">Issue #119</a></p>",
        "id": 153920858,
        "sender_full_name": "Github Notifications",
        "timestamp": 1511306189
    },
    {
        "content": "<p>kpshek opened <a href=\"https://github.com/cds-hooks/docs/issues/119\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/119\">Issue #119</a></p>\n<blockquote>\n<p>Today, the <code>patient</code> and <code>encounter</code> parameters are defined in the request to the CDS Service. However, what if we have hooks that:</p>\n<ul>\n<li>\n<p>Do not have a patient in context. For instance, consider a hook <code>ehr-launch</code> that is invoked as soon as the user launches the EHR application.</p>\n</li>\n<li>\n<p>Have more than one patient in context. For instance, consider a hook <code>patientlist-view</code> that is invoked when the user is viewing their patient list.</p>\n</li>\n</ul>\n<p>In both of these scenarios, that current location of our <code>patient</code> and <code>encounter</code> parameters is not optimal. Either the parameters are <code>null</code> (or not set) or they are not set and instead superseded by a more appropriate parameter in the <code>context</code> in the CDS Service request.</p>\n<p>The proposal to address this would be to remove <code>patient</code> and <code>encounter</code> from the CDS Service request and instead place these as parameters in the <code>context</code> object when appropriate for a given hook. For the three hooks we've defined and implemented today (<code>patient-view</code>, <code>medication-prescribe</code>, <code>order-review</code>), they would all include <code>patient</code> and <code>encounter</code>.</p>\n<p>In offline discussion with @brynrhodes and @isaacvetter, we all agreed this would be a good change to make for 1.0. While this is technically a breaking change, it will serve us better down the road as we start implementing and supporting new hooks in which there is no patient or no single patient in context. Additionally, this is a minor change as we're simply just moving where in the JSON structure these parameters are read.</p>\n<p>Given that it is a breaking change, we would appreciate thoughts from the rest of the community.</p>\n</blockquote>",
        "id": 153920859,
        "sender_full_name": "Github Notifications",
        "timestamp": 1511306189
    },
    {
        "content": "<p>kensaku-kawamoto <a href=\"https://github.com/cds-hooks/docs/issues/119#issuecomment-346204665\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/119#issuecomment-346204665\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/119\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/119\">Issue #119</a></p>\n<blockquote>\n<p>I think it's a reasonable change and a good idea.</p>\n</blockquote>",
        "id": 153920865,
        "sender_full_name": "Github Notifications",
        "timestamp": 1511310422
    },
    {
        "content": "<p>grahamegrieve <a href=\"https://github.com/cds-hooks/docs/issues/119#issuecomment-346206496\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/119#issuecomment-346206496\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/119\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/119\">Issue #119</a></p>\n<blockquote>\n<p>so to be clear, this is a significant change because you are replacing the ids of the these things with the whole resource. That's.... potentially significant. I'm making sure that this is clear</p>\n<p>I'm in favor of this change. It works for my existing use cases, that include some where patient and encounter are not in context, and some where they are </p>\n</blockquote>",
        "id": 153920866,
        "sender_full_name": "Github Notifications",
        "timestamp": 1511311036
    },
    {
        "content": "<p>kpshek <a href=\"https://github.com/cds-hooks/docs/issues/119#issuecomment-346207637\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/119#issuecomment-346207637\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/119\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/119\">Issue #119</a></p>\n<blockquote>\n<blockquote>\n<p>so to be clear, this is a significant change because you are replacing the ids of the these things with the whole resource. That's.... potentially significant. I'm making sure that this is clear</p>\n</blockquote>\n<p>That is <strong>not</strong> what I'm proposing. Both the <code>patient</code> and <code>encounter</code> parameters would continue to just be the ids still.</p>\n</blockquote>",
        "id": 153920867,
        "sender_full_name": "Github Notifications",
        "timestamp": 1511311469
    },
    {
        "content": "<p>brynrhodes <a href=\"https://github.com/cds-hooks/docs/issues/119#issuecomment-346211384\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/119#issuecomment-346211384\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/119\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/119\">Issue #119</a></p>\n<blockquote>\n<blockquote>\n<p>so to be clear, this is a significant change because you are replacing the ids of the these things with the whole resource. That's.... potentially significant. I'm making sure that this is clear</p>\n</blockquote>\n<p>It would depend on the hook though, right? A hook could define the <code>patient</code> parameter as the resource, or it could define it as a <code>patientId</code> parameter. I see that as another advantage of this approach, it would be up to the hook to specify what it would actually provide.</p>\n</blockquote>",
        "id": 153920869,
        "sender_full_name": "Github Notifications",
        "timestamp": 1511312807
    },
    {
        "content": "<p>kpshek <a href=\"https://github.com/cds-hooks/docs/issues/119#issuecomment-346211723\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/119#issuecomment-346211723\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/119\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/119\">Issue #119</a></p>\n<blockquote>\n<p>Correct, each hook defines the <code>context</code> object as it sees fit. However, we're not proposing we start sending the full Patient and Encounter resource in place of the ids we're sending today. For the 3 hooks we've defined today, it would continue to be ids.</p>\n</blockquote>",
        "id": 153920870,
        "sender_full_name": "Github Notifications",
        "timestamp": 1511312925
    },
    {
        "content": "<p>grahamegrieve <a href=\"https://github.com/cds-hooks/docs/issues/119#issuecomment-346218079\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/119#issuecomment-346218079\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/119\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/119\">Issue #119</a></p>\n<blockquote>\n<blockquote>\n<p>That is not what I'm proposing</p>\n</blockquote>\n<p>but context is an array of resources....</p>\n</blockquote>",
        "id": 153920873,
        "sender_full_name": "Github Notifications",
        "timestamp": 1511315244
    },
    {
        "content": "<p>jmandel <a href=\"https://github.com/cds-hooks/docs/issues/119#issuecomment-346225302\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/119#issuecomment-346225302\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/119\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/119\">Issue #119</a></p>\n<blockquote>\n<p>Not if we land#39 appropriately -- which I think is increasingly critical if we make sense the change proposed here. Doing this change without #39 would be very messy.</p>\n</blockquote>",
        "id": 153920879,
        "sender_full_name": "Github Notifications",
        "timestamp": 1511318029
    },
    {
        "content": "<p>grahamegrieve <a href=\"https://github.com/cds-hooks/docs/issues/119#issuecomment-346230258\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/119#issuecomment-346230258\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/119\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/119\">Issue #119</a></p>\n<blockquote>\n<p>really? that's not evident to me from the description of #39 </p>\n</blockquote>",
        "id": 153920884,
        "sender_full_name": "Github Notifications",
        "timestamp": 1511320112
    },
    {
        "content": "<p>kpshek <a href=\"https://github.com/cds-hooks/docs/issues/119#issuecomment-346272584\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/119#issuecomment-346272584\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/119\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/119\">Issue #119</a></p>\n<blockquote>\n<blockquote>\n<p>but context is an array of resources....</p>\n</blockquote>\n<p>Today, we document it as \"Hook-specific contextual data that the CDS service will need\". #39 is going to clearly define how a new hook is defined. Related to this, <code>context</code> is an object with keys/values specific to each individual hook. From an earlier comment from me on #39:</p>\n<blockquote>\n<p>From <a href=\"https://chat.fhir.org/#narrow/stream/cds-hooks/subject/docs.20.2F.20Issue.20.2336.20Context.20as.20a.20list.20of.20FHIR.20Resources\" target=\"_blank\" title=\"https://chat.fhir.org/#narrow/stream/cds-hooks/subject/docs.20.2F.20Issue.20.2336.20Context.20as.20a.20list.20of.20FHIR.20Resources\">some Zulip discussion on this issue</a>, we're proposing that context is always a JSON object. Furthermore, context is defined per hook which each hook defining the individual keys and values (both the JSON value type and the content) within the context JSON object.</p>\n</blockquote>\n</blockquote>",
        "id": 153920954,
        "sender_full_name": "Github Notifications",
        "timestamp": 1511337883
    },
    {
        "content": "<p>WWie <a href=\"https://github.com/cds-hooks/docs/issues/119#issuecomment-346650121\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/119#issuecomment-346650121\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/119\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/119\">Issue #119</a></p>\n<blockquote>\n<p>I am in favor of that change. The patient and encounter Ids are indeed context but not always part of the active context. Putting them in the context object as optional makes sense. And putting more work into defining what context objects are and where they are well-defined vs. customizable will go a long way making this framework more robust.</p>\n<p>We are looking into various scenarios where we would want to invoke a hook where the context would be a \"class of patients\", e.g. \"Any patient with diagnosis X , Y or Z and age between 50 and 75\". Having to still put a value into a high-level attribute like patient or encounter would make it a bit awkward to use. So would having to ignore a high-level parameter in the hook call.</p>\n</blockquote>",
        "id": 153921308,
        "sender_full_name": "Github Notifications",
        "timestamp": 1511451817
    },
    {
        "content": "<p>robs16 <a href=\"https://github.com/cds-hooks/docs/issues/119#issuecomment-359472035\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/119#issuecomment-359472035\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/119\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/119\">Issue #119</a></p>\n<blockquote>\n<p>How does this interact with the prefetch requirements for a <a href=\"http://Patient.id\" target=\"_blank\" title=\"http://Patient.id\">Patient.id</a> replacement? I mean if you are going down the road of these items being part of the context (and I think that might be reasonable), it seems that the prefetch replacements need to be defined somewhat dynamically. </p>\n</blockquote>",
        "id": 153929955,
        "sender_full_name": "Github Notifications",
        "timestamp": 1516637139
    },
    {
        "content": "<p>kpshek assigned <a href=\"https://github.com/cds-hooks/docs/issues/119\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/119\">Issue #119</a></p>",
        "id": 153932926,
        "sender_full_name": "Github Notifications",
        "timestamp": 1517240816
    },
    {
        "content": "<p>kpshek <a href=\"https://github.com/cds-hooks/docs/issues/119#issuecomment-361287513\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/119#issuecomment-361287513\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/119\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/119\">Issue #119</a></p>\n<blockquote>\n<p>This issue has been addressed by PR #109 and #153 </p>\n</blockquote>",
        "id": 153932927,
        "sender_full_name": "Github Notifications",
        "timestamp": 1517240836
    },
    {
        "content": "<p>kpshek closed <a href=\"https://github.com/cds-hooks/docs/issues/119\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/119\">Issue #119</a></p>",
        "id": 153932928,
        "sender_full_name": "Github Notifications",
        "timestamp": 1517240836
    }
]