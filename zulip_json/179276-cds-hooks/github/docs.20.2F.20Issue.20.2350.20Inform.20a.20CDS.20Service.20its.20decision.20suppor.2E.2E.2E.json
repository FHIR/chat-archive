[
    {
        "content": "<p>kpshek edited <a href=\"https://github.com/cds-hooks/docs/issues/50\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50\">Issue #50</a></p>\n<blockquote>\n<p>In discussion with @brynrhodes and <span class=\"user-mention\" data-user-email=\"isaacvetter@gmail.com\" data-user-id=\"558\">@Isaac Vetter</span> regarding aligning Clinical Reasoning and CDS Hooks, one of the topics of discussion was around how Clinical Reasoning allows the EHR to include to the CDS service that it should evaluate it's rules at the specified date/time (<code>evaluteAt</code> field). This is used for testing or debugging purposes in Clinical Reasoning.</p>\n<p><a href=\"https://tools.ietf.org/html/rfc7089#section-2.1.1\" target=\"_blank\" title=\"https://tools.ietf.org/html/rfc7089#section-2.1.1\">rfc7089</a> defines an <code>Accept-Datetime</code> HTTP request header to accomplish this same functional goal. In our case, the EHR would send the <code>Accept-Datetime</code> HTTP header in the CDS Service request. The CDS Service would evaluate it's decision support logic as of this given datetime.</p>\n<p>Per rfc7089, the CDS Service should also return a response header in this scenario with the <code>Memento-Datetime</code> HTTP header set to the datetime the decision support was evaluated at.</p>\n<p>It is worth mentioning that in order for the decision support rules to be evaluated at an arbitrary datetime, all services and systems used by the CDS Service must be capable of supporting this concept. This includes both the EHR and FHIR server who must be capable of querying FHIR resources at the given datetime.</p>\n</blockquote>",
        "id": 153892386,
        "sender_full_name": "Github Notifications",
        "timestamp": 1496726407
    },
    {
        "content": "<p>euvitudo <a href=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-306385709\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-306385709\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/50\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50\">Issue #50</a></p>\n<blockquote>\n<blockquote>\n<blockquote>\n<p>So you don't intend for cds-hooks to become a standard?<br>\nOf course I want CDS Hooks to be a standard. <img alt=\"ðŸ˜„\" class=\"emoji\" src=\"/static/generated/emoji/images/emoji/unicode/1f604.png\" title=\"ðŸ˜„\"> Sorry, my original comment wasn't clear. What I intended to get across was that it didn't matter to me that RFC 7089 wasn't a standard because most of everything that we're creating also isn't a standard right now. At any rate, this is moot because I agree with you that using RFC 7089 is a good choice. <img alt=\"ðŸ˜œ\" class=\"emoji\" src=\"/static/generated/emoji/images/emoji/unicode/1f61c.png\" title=\"ðŸ˜œ\"></p>\n</blockquote>\n</blockquote>\n<p>That's the thing--I don't agree that RFC 7089 itself is a good choice.</p>\n<blockquote>\n<blockquote>\n<p>In my mind the CDS Hooks Discovery mechanism is indeed equivalent to a CapabilityStatement. Also in my mind is the fact there's no way around defining it as such.</p>\n</blockquote>\n<p>I agree our Discovery endpoint is closely related to the CapabilityStatement in FHIR. I'm just trying to keep it as simple as possible for as long as possible. <img alt=\"ðŸ˜„\" class=\"emoji\" src=\"/static/generated/emoji/images/emoji/unicode/1f604.png\" title=\"ðŸ˜„\"></p>\n</blockquote>\n<p>I think you misunderstand again--I don't think the Discovery endpoint should be a CapabilityStatement, but it should express what the service is capable of and is meant to do.  Hence the intent of the Discovery endpoint is similar to the CapabilityStatement.</p>\n<blockquote>\n<p>So, if we want to support time zones we need to use an ISO 8601 timestamp and a time zone. However, if we align on UTC, we will not have this issue.</p>\n</blockquote>\n<p>Fair enough.  You are correct--something I guess I've forgotten.</p>\n</blockquote>",
        "id": 153892387,
        "sender_full_name": "Github Notifications",
        "timestamp": 1496726841
    },
    {
        "content": "<p>euvitudo <a href=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-306385933\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-306385933\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/50\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50\">Issue #50</a></p>\n<blockquote>\n<p>To clarify--call the header support something else.  Don't call it RFC 7089. </p>\n</blockquote>",
        "id": 153892388,
        "sender_full_name": "Github Notifications",
        "timestamp": 1496726944
    },
    {
        "content": "<p>kpshek <a href=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-306386393\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-306386393\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/50\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50\">Issue #50</a></p>\n<blockquote>\n<p><span class=\"user-mention\" data-user-email=\"euvitudo@gmail.com\" data-user-id=\"821\">@Phillip Warner</span> - We agree, I just had a crucial typo (that's what I get for writing comments at midnight). I agree RFC 7089 is <strong>not</strong> a good choice. I think we're all good on this point. <img alt=\"ðŸ˜„\" class=\"emoji\" src=\"/static/generated/emoji/images/emoji/unicode/1f604.png\" title=\"ðŸ˜„\"> </p>\n</blockquote>",
        "id": 153892389,
        "sender_full_name": "Github Notifications",
        "timestamp": 1496727173
    },
    {
        "content": "<p>euvitudo <a href=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-306398246\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-306398246\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/50\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50\">Issue #50</a></p>\n<blockquote>\n<p>@kpshek How would you suggest a CDS Service advertise that it is capable of evaluating at a specified time?</p>\n</blockquote>",
        "id": 153892406,
        "sender_full_name": "Github Notifications",
        "timestamp": 1496731922
    },
    {
        "content": "<p>alextdejong <a href=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-309118865\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-309118865\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/50\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50\">Issue #50</a></p>\n<blockquote>\n<p>Even if the CDS Service is capable of doing this, if the FHIR resources used are not capable of this, it still would not work, correct? I am not suggesting it would not be worthwhile for the CDS Services to advertise it; it just does not automatically means it would actually work when calling the CDS service.</p>\n</blockquote>",
        "id": 153894254,
        "sender_full_name": "Github Notifications",
        "timestamp": 1497642629
    },
    {
        "content": "<p>brynrhodes <a href=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-314223425\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-314223425\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/50\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50\">Issue #50</a></p>\n<blockquote>\n<p>Can we do this with just a custom header and have it be optional, but systems that don't support it would throw?</p>\n</blockquote>",
        "id": 153896503,
        "sender_full_name": "Github Notifications",
        "timestamp": 1499717824
    },
    {
        "content": "<p>kpshek assigned <a href=\"https://github.com/cds-hooks/docs/issues/50\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50\">Issue #50</a></p>",
        "id": 153896504,
        "sender_full_name": "Github Notifications",
        "timestamp": 1499717843
    },
    {
        "content": "<p>euvitudo <a href=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-314823397\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-314823397\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/50\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50\">Issue #50</a></p>\n<blockquote>\n<p>@brynrhodes Any custom headers (header names/keys) that are not understood should be ignored.</p>\n<p>For example, if a specified-time header were provided and the system threw an error that it didn't understand the specified-time header, then in reality it does understand it sufficiently to throw the error.  Rather contradictory in my mind.</p>\n</blockquote>",
        "id": 153896750,
        "sender_full_name": "Github Notifications",
        "timestamp": 1499876869
    },
    {
        "content": "<p>isaacvetter <a href=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-314846285\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-314846285\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/50\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50\">Issue #50</a></p>\n<blockquote>\n<p>I think that I agree with you, <span class=\"user-mention\" data-user-email=\"euvitudo@gmail.com\" data-user-id=\"821\">@Phillip Warner</span>, but is there a simple existing method for the EHR to know that the CDS service didn't understand the header?</p>\n</blockquote>",
        "id": 153896758,
        "sender_full_name": "Github Notifications",
        "timestamp": 1499881885
    },
    {
        "content": "<p>euvitudo <a href=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-314848588\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-314848588\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/50\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50\">Issue #50</a></p>\n<blockquote>\n<p>I wouldn't think so.  If it's not an explicit part of the standard, then how would a service even know how to handle the header (or, for the case where, e.g., specified-time is included in the request standard, the data element in the actual request)?</p>\n<p>To wit: If it's not part of the standard, then there's no way of knowing.</p>\n</blockquote>",
        "id": 153896760,
        "sender_full_name": "Github Notifications",
        "timestamp": 1499882375
    },
    {
        "content": "<p>euvitudo <a href=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-314851526\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-314851526\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/50\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50\">Issue #50</a></p>\n<blockquote>\n<p>I suppose an alternative is to add an element to the response indicating the time at which the CDS evaluation occurred.  It wouldn't necessarily need be tied to a specified-time header, but would need to be part of every response.</p>\n</blockquote>",
        "id": 153896761,
        "sender_full_name": "Github Notifications",
        "timestamp": 1499882981
    },
    {
        "content": "<p>kpshek <a href=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-318154106\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-318154106\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/50\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50\">Issue #50</a></p>\n<blockquote>\n<p>After further thought, I don't think this is something we should tackle right now. My main reasoning is that the FHIR server would need to support the ability to retrieve data at a given point in time. FHIR doesn't support this today so even if we added a field to the CDS Hooks API somewhere, it is unclear how the FHIR endpoint would also honor this.</p>\n<p>Additionally, while I see there is a place for this use case (primarily for testing), I think it is fairly limited right now (especially since FHIR isn't capable of this today).</p>\n<p>I propose we defer this until this is addressed within FHIR. I'd appreciate the thoughts from @brynrhodes and <span class=\"user-mention\" data-user-email=\"isaacvetter@gmail.com\" data-user-id=\"558\">@Isaac Vetter</span> on this particular issue too.</p>\n</blockquote>",
        "id": 153898451,
        "sender_full_name": "Github Notifications",
        "timestamp": 1501096506
    },
    {
        "content": "<p>euvitudo <a href=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-318156800\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-318156800\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/50\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50\">Issue #50</a></p>\n<blockquote>\n<p>@kpshek Could you elaborate why you don't think FHIR has the ability to retrieve data at a given point in time?  Many (all?) of the search operations include the ability to include date constraints (e.g., lt2017-01-01, etc.) that makes this use case feasible.</p>\n</blockquote>",
        "id": 153898455,
        "sender_full_name": "Github Notifications",
        "timestamp": 1501097181
    },
    {
        "content": "<p>brynrhodes <a href=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-318173521\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-318173521\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/50\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50\">Issue #50</a></p>\n<blockquote>\n<p><span class=\"user-mention\" data-user-email=\"euvitudo@gmail.com\" data-user-id=\"821\">@Phillip Warner</span> it's not just returning data at a point in time, but returning what the data _was_ at that point in time that is the difficulty. FHIR supports versioning so in theory an engine could do it, but none of the production-track implementations I'm aware of support this functionality.</p>\n</blockquote>",
        "id": 153898471,
        "sender_full_name": "Github Notifications",
        "timestamp": 1501101092
    },
    {
        "content": "<p>grahamegrieve <a href=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-318202872\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-318202872\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/50\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50\">Issue #50</a></p>\n<blockquote>\n<p>\"What decision support was shown to user U for patient P last week on May 30, 2017 8:00am\" - that's an audit functionality that is supportable. \"What decision support would have been shown to user U for patient P last week on May 30, 2017 8:00am\" - that's tricky, because there's a lot of moving parts that change independently of each other. </p>\n<p>It's correct that FHIR doesn't try to enable this; I've only ever seen one system that could behave like this (it had an insert only database), and even then, it was fragile because changes to configuration intersected with changes to the code, and cross-cut the ability to retrieve old records exactly as they were. And consistent with my experience, no one has asked for it (till now)</p>\n</blockquote>",
        "id": 153898501,
        "sender_full_name": "Github Notifications",
        "timestamp": 1501108589
    },
    {
        "content": "<p>kpshek <a href=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-318211485\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-318211485\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/50\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50\">Issue #50</a></p>\n<blockquote>\n<p>Well put @grahamegrieve. This issue wasn't trying to address the auditing capability you referred to. It really was to try and explore the latter use case which as you've confirmed, is not possible today.</p>\n</blockquote>",
        "id": 153898507,
        "sender_full_name": "Github Notifications",
        "timestamp": 1501111449
    },
    {
        "content": "<p>isaacvetter <a href=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-318547165\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-318547165\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/50\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50\">Issue #50</a></p>\n<blockquote>\n<p>Hey <span class=\"user-mention\" data-user-email=\"euvitudo@gmail.com\" data-user-id=\"821\">@Phillip Warner</span>  - I've started a comment on this thread a few times today, let me know if I can give you a call to talk through this. I want to ensure that your voice and needs are heard and given appropriate weight. </p>\n<p>Perhaps due to the relatively simple, early use-cases for the standard, there isn't much call for this feature. Further, we can't figure out a way to accommodate it without weakening the current, appealingly simple CDS request message. Based upon the above few posts and my knowledge of my own FHIR server and roadmap, there's not widespread support for \"point-in-time\" FHIR queries. </p>\n<p>For these reasons, I think that it makes sense to defer an _evaluateAt_ feature until at least one of the above statements is no longer true. </p>\n<p>Isaac </p>\n</blockquote>",
        "id": 153898936,
        "sender_full_name": "Github Notifications",
        "timestamp": 1501212273
    },
    {
        "content": "<p>euvitudo <a href=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-318555980\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-318555980\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/50\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50\">Issue #50</a></p>\n<blockquote>\n<p>Hey <span class=\"user-mention\" data-user-email=\"isaacvetter@gmail.com\" data-user-id=\"558\">@Isaac Vetter</span> - given the above, it seems reasonable to defer.</p>\n</blockquote>",
        "id": 153898944,
        "sender_full_name": "Github Notifications",
        "timestamp": 1501215967
    },
    {
        "content": "<p>kpshek labeled <a href=\"https://github.com/cds-hooks/docs/issues/50\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50\">Issue #50</a></p>",
        "id": 153899224,
        "sender_full_name": "Github Notifications",
        "timestamp": 1501253310
    },
    {
        "content": "<p>kpshek <a href=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-318672208\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-318672208\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/50\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50\">Issue #50</a></p>\n<blockquote>\n<p>Thanks everyone -- labeling this as deferred for now.</p>\n</blockquote>",
        "id": 153899225,
        "sender_full_name": "Github Notifications",
        "timestamp": 1501253329
    },
    {
        "content": "<p>kpshek closed <a href=\"https://github.com/cds-hooks/docs/issues/50\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50\">Issue #50</a></p>",
        "id": 153899226,
        "sender_full_name": "Github Notifications",
        "timestamp": 1501253329
    },
    {
        "content": "<p>kpshek demilestoned <a href=\"https://github.com/cds-hooks/docs/issues/50\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50\">Issue #50</a></p>",
        "id": 153899227,
        "sender_full_name": "Github Notifications",
        "timestamp": 1501253334
    },
    {
        "content": "<p>kensaku-kawamoto <a href=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-318691976\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-318691976\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/50\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50\">Issue #50</a></p>\n<blockquote>\n<p>In the interim, we will plan to either (i) create a proprietary extension to support this notion of a specified time or (ii) do that at the level of the decision engine underlying CDS Hooks.  E.g., if we pursue (ii), we can still do what we currently do -- create dozens or hundreds of test cases for a CDS module with static input test data (e.g., a FHIR bundle), have the CDS module evaluate this information at a given specified time, and to verify that the end result/output is as expected in statically defined expectations.  I agree that for real-time/dynamic CDS Hooks usages, the specified time is tricky to get working and may not be worth the effort.  As long as the ability to get consistent evaluation results from a static set of test case data is there, I would be fine.  Also would need to be able to evaluate consistency of behavior that is date/time dependent, e.g., making sure that an after-hours alert (such as \"for ECHO outside of business hours, please page XYZ\") can be tested at boundary conditions without actually running them at 4:59pm vs 5:00pm on a Monday, on Labor Day, etc.</p>\n</blockquote>",
        "id": 153899251,
        "sender_full_name": "Github Notifications",
        "timestamp": 1501257426
    },
    {
        "content": "<p>kpshek <a href=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-318694391\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50#issuecomment-318694391\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/50\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/50\">Issue #50</a></p>\n<blockquote>\n<p>Thanks @kensaku-kawamoto - please let us know how this goes for you</p>\n</blockquote>",
        "id": 153899271,
        "sender_full_name": "Github Notifications",
        "timestamp": 1501257912
    }
]