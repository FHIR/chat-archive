[
    {
        "content": "<p>bvdh opened <a href=\"https://github.com/cds-hooks/docs/issues/82\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82\">Issue #82</a></p>\n<blockquote>\n<p>In the current specification, including prefetch information is optional. <br>\nI suggest that we have optional and required prefetched data.<br>\nOptional prefetch indicates that the CDS Service would appreciate the data.<br>\nMandatory prefetch indicates that the CDS Service depends on the data.</p>\n<p>This would make simple CDS Services that do not require FHIR repository access possible.</p>\n</blockquote>",
        "id": 153905014,
        "sender_full_name": "Github Notifications",
        "timestamp": 1504887991
    },
    {
        "content": "<p>rongchen <a href=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-328267524\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-328267524\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/82\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82\">Issue #82</a></p>\n<blockquote>\n<p>Agree, having mandatory prefetch will make EHR/CDS integration easier.</p>\n</blockquote>",
        "id": 153905120,
        "sender_full_name": "Github Notifications",
        "timestamp": 1504951384
    },
    {
        "content": "<p>robs16 <a href=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-328280416\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-328280416\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/82\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82\">Issue #82</a></p>\n<blockquote>\n<p>I can see your point for simple CDS services, but it also forces that complexity on the caller. Generally I think it is good to have an indicator that the data is mandatory for the CDS service to run successfully. However, if the caller does not want to provide this data as part of the request, the service should pull it via FHIR calls. </p>\n</blockquote>",
        "id": 153905142,
        "sender_full_name": "Github Notifications",
        "timestamp": 1504967078
    },
    {
        "content": "<p>olbrich <a href=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-328282815\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-328282815\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/82\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82\">Issue #82</a></p>\n<blockquote>\n<p>I thought the goal of the prefetch was to provide a performance optimization and as such it would only be optional.  Defining the contract of what is required to actually make use of a CDS service can be described in an implementation guide and the service itself could check for required resources in the Capability statement at the time the service is registered with the EHR.</p>\n</blockquote>",
        "id": 153905150,
        "sender_full_name": "Github Notifications",
        "timestamp": 1504969551
    },
    {
        "content": "<p>grahamegrieve <a href=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-328289938\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-328289938\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/82\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82\">Issue #82</a></p>\n<blockquote>\n<p>There are cases where there's no prospect of contacting the EHR server - the CDS hooks provider is outside the trust boundary. So in this case, prefetch is more than a performance optimization</p>\n</blockquote>",
        "id": 153905207,
        "sender_full_name": "Github Notifications",
        "timestamp": 1504976341
    },
    {
        "content": "<p>bdoolittle <a href=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-328295144\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-328295144\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/82\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82\">Issue #82</a></p>\n<blockquote>\n<p>Prefetch can enable the use of CDS-Hooks for an EHR service that may not have a FHIR server.</p>\n</blockquote>",
        "id": 153905324,
        "sender_full_name": "Github Notifications",
        "timestamp": 1504981499
    },
    {
        "content": "<p>rongchen <a href=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-328295820\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-328295820\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/82\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82\">Issue #82</a></p>\n<blockquote>\n<p>That's exactly what I have in mind, to use CDS-Hooks for EHRs that have no FHIR server.</p>\n</blockquote>",
        "id": 153905340,
        "sender_full_name": "Github Notifications",
        "timestamp": 1504982283
    },
    {
        "content": "<p>olbrich <a href=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-328298276\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-328298276\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/82\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82\">Issue #82</a></p>\n<blockquote>\n<p>@rongchen as I understand this, you are trying to cover the case where a cds-service requires certain data and it is incapable of querying a FHIR server for the data (either because of networking/connectivity issues or because the cds-service just doesn't implement the logic to go get the data).</p>\n<p>If the cds service is capable of getting the data, then the prefetch would not be 'required', but might be 'optional'.  In any case, what would be the point of having the standard define the prefetch data as 'required'?  Would something on the EHR side process the requests differently, or is this just something you would need to consider when you are configuring installing the cds hook the first time around with each EHR?</p>\n</blockquote>",
        "id": 153905392,
        "sender_full_name": "Github Notifications",
        "timestamp": 1504984957
    },
    {
        "content": "<p>rongchen <a href=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-328326199\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-328326199\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/82\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82\">Issue #82</a></p>\n<blockquote>\n<p>@olbrich our usecase here is to integrate our cds services with EHR that has no FHIR server. So there is no querying a FHIR server for the data in our scenario. The initial cds request has to be complete with all required data. That's why prefetched data is mandatory in our case.</p>\n<p>As I described in <a href=\"https://github.com/cds-hooks/docs/issues/78\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/78\">issue 78</a>, we found CDS-Hooks to be interesting and generic enough to be used in any EHR/CDS integration even when FHIR is not used (there are lots of these legacy EHRs in the market). The common building blocks of Cards, Suggestions and Decisions are useful in CDS regardless which kind of clinical models (FHIR, CIMI or openEHR) are used.  </p>\n</blockquote>",
        "id": 153905726,
        "sender_full_name": "Github Notifications",
        "timestamp": 1505030071
    },
    {
        "content": "<p>robs16 <a href=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-328340369\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-328340369\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/82\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82\">Issue #82</a></p>\n<blockquote>\n<p>@rongchen you convinced me. I have often used requests in testing without a FHIR server explicitly to ensure that the test is not impacted by external data. I can see the value in supporting this generally. So if you have a prefetch marked mandatory and a FHIR server, but the prefetch data is not provided, should the service attempt to retrieve that data or should it assume it is null?</p>\n</blockquote>",
        "id": 153905730,
        "sender_full_name": "Github Notifications",
        "timestamp": 1505047418
    },
    {
        "content": "<p>kensaku-kawamoto <a href=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-328364183\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-328364183\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/82\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82\">Issue #82</a></p>\n<blockquote>\n<p>I agree this would be a useful feature, in particular around Graham's comment: \"There are cases where there's no prospect of contacting the EHR server - the CDS hooks provider is outside the trust boundary. So in this case, prefetch is more than a performance optimization.\" From a healthcare provider system perspective, we would feel much more comfortable doing an interaction with an external CDS service that we \"push\" data to, rather than giving it access to our FHIR server. </p>\n</blockquote>",
        "id": 153905950,
        "sender_full_name": "Github Notifications",
        "timestamp": 1505070171
    },
    {
        "content": "<p>rongchen <a href=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-328630340\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-328630340\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/82\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82\">Issue #82</a></p>\n<blockquote>\n<p>@robs16 Thanks! </p>\n<blockquote>\n<p>If prefetch marked mandatory and a FHIR server, but the prefetch data is not provided..</p>\n</blockquote>\n<p>I think the service should return error pointing at missing data. That's what mandatory means to me.</p>\n</blockquote>",
        "id": 153906302,
        "sender_full_name": "Github Notifications",
        "timestamp": 1505157311
    },
    {
        "content": "<p>robs16 <a href=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-328810404\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-328810404\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/82\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82\">Issue #82</a></p>\n<blockquote>\n<p>There is the case where the data doesn't exist, but is mandatory - for example maybe you want some particular vital observations that occurred in the last 24 hours. In this case the caller could fill in essentially an empty prefetch (bundle with no entries), so I guess that would satisfy the prefetch having a value, vs a null or missing mandatory prefetch item which should result in a 400.</p>\n</blockquote>",
        "id": 153906925,
        "sender_full_name": "Github Notifications",
        "timestamp": 1505211777
    },
    {
        "content": "<p>rongchen <a href=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-328825630\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-328825630\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/82\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82\">Issue #82</a></p>\n<blockquote>\n<p>In such case, I would think the EHR should not make the cds request with empty prefetch, say for a MEWS score calculation when the vital signs are required. The cds service will surely not be able to cope with the missing data, and return an error.</p>\n<p>This requires some extra work on the EHR side makes sure cds requests are not made when there are missing data. </p>\n</blockquote>",
        "id": 153906927,
        "sender_full_name": "Github Notifications",
        "timestamp": 1505216045
    },
    {
        "content": "<p>brynrhodes labeled <a href=\"https://github.com/cds-hooks/docs/issues/82\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82\">Issue #82</a></p>",
        "id": 153907044,
        "sender_full_name": "Github Notifications",
        "timestamp": 1505239315
    },
    {
        "content": "<p>kpshek <a href=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-328948814\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-328948814\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/82\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82\">Issue #82</a></p>\n<blockquote>\n<p>TODO - Summarize WGM Q2 discussion</p>\n<p>Proposal: Leave as-is (explain reasoning). Discussion around strengthening prefetch documentation either in the spec or in a future IG (desire to keep spec simple/concise and balance with understanding these complexities)</p>\n<p>(Kevin will update this comment later)</p>\n</blockquote>",
        "id": 153907081,
        "sender_full_name": "Github Notifications",
        "timestamp": 1505242749
    },
    {
        "content": "<p>isaacvetter <a href=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-328959273\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-328959273\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/82\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82\">Issue #82</a></p>\n<blockquote>\n<p>Hey Everybody,</p>\n<p>We talked about this issue during the CDS/CQI working group joint session today (Tues at Q2).</p>\n<p>Pre-fetch is clearly valuable for more than performance optimization. There are real-world cases where the cds service doesn't have access to the FHIR server for \"callback\" queries. This lack of access may be due to health system security policies or even a scenario where the clinical workflow system doesn't have a FHIR server at all.</p>\n<p>In these cases, a specific implementation requires that the content to be pre-fetch'd, but the actual service should be able to accept the desired pre-fetch'd resource or alternatively query for that same resource against the clinical system's FHIR server.</p>\n<p>To the same point, the access to data, granted to a cds service is not and should not be governed by the cds service's discovery endpoint. Rather, that data access is governed by its OAuth2 scopes and the permissions of the current user.</p>\n<p>Ultimately, whether a pre-fetch'd resource is required by a specific implementation, can only be determined during the specific implementation. CDS Services should be capable of querying the FHIR Server if the data needed is not provided in the prefetch.</p>\n</blockquote>",
        "id": 153907100,
        "sender_full_name": "Github Notifications",
        "timestamp": 1505244650
    },
    {
        "content": "<p>grahamegrieve <a href=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-328973266\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-328973266\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/82\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82\">Issue #82</a></p>\n<blockquote>\n<p>Issac: I'm having trouble parsing this:<br>\n\"There are real-world cases where the cds service doesn't have access to the FHIR server for \"callback\" queries\" then \"In these cases .. the actual service should be able to ... query for that same resource against the clinical system's FHIR server.\"</p>\n</blockquote>",
        "id": 153907103,
        "sender_full_name": "Github Notifications",
        "timestamp": 1505247739
    },
    {
        "content": "<p>isaacvetter <a href=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-328999746\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-328999746\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/82\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82\">Issue #82</a></p>\n<blockquote>\n<p>@grahamegrieve - yes, I can see now why that would be confusing. I added more words in the hope that it will be clearer.</p>\n</blockquote>",
        "id": 153907195,
        "sender_full_name": "Github Notifications",
        "timestamp": 1505254485
    },
    {
        "content": "<p>grahamegrieve <a href=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-329009946\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-329009946\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/82\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82\">Issue #82</a></p>\n<blockquote>\n<p>ok that made much more sense. I can go with that - if we agree to add it as documentation to the spec</p>\n</blockquote>",
        "id": 153907232,
        "sender_full_name": "Github Notifications",
        "timestamp": 1505257904
    },
    {
        "content": "<p>olbrich <a href=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-329052023\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-329052023\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/82\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82\">Issue #82</a></p>\n<blockquote>\n<p>There is another scenario to consider.  A CDS service that is unwilling or unable to make FHIR requests to the caller under any circumstances.  I would expect that such a service would simply document that the prefetch is require in an implementation guide and return an error code if it was invoked without the required prefetch data.</p>\n</blockquote>",
        "id": 153907283,
        "sender_full_name": "Github Notifications",
        "timestamp": 1505274988
    },
    {
        "content": "<p>isaacvetter <a href=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-329206193\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-329206193\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/82\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82\">Issue #82</a></p>\n<blockquote>\n<p>Hey @olbrich ,</p>\n<blockquote>\n<p>A CDS service that is unwilling or unable to make FHIR requests to the caller under any circumstances</p>\n</blockquote>\n<p>Ultimately, access to the FHIR server is the big win, compared to other in-production, external CDS specs. Enabling the cds service to access additional data without modifying EHR configuration or settings, perhaps even dynamically based upon details about the patient/user/clinical scenario, etc, is a boon to the cds service.</p>\n<p>I think that a \"A CDS service that is unwilling or unable to make FHIR requests\" is not really a CDS Hooks service or at least is definitely not fully implementing the specification and is not a scenario that we should encourage. </p>\n<p>Assuming such a service does occur in production, I agree that the approach you've outlined would be natural.</p>\n<p>Isaac</p>\n</blockquote>",
        "id": 153907412,
        "sender_full_name": "Github Notifications",
        "timestamp": 1505316754
    },
    {
        "content": "<p>bdoolittle <a href=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-329215978\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-329215978\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/82\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82\">Issue #82</a></p>\n<blockquote>\n<p>hey @olbrich and <span class=\"user-mention\" data-user-email=\"isaacvetter@gmail.com\" data-user-id=\"558\">@Isaac Vetter</span>, I agree that \"a CDS service [or EHR] that is unwilling or unable to make FHIR requests is not really a CDS Hooks service.\" This would be a partial implementation of the 1.0 specification. However, the discussion touches on a deeper (out of 1.0 scope) issue, <a href=\"https://github.com/cds-hooks/docs/issues/78\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/78\">__#78__</a>, regarding CDS Hooks' ability to be flexible in the clinical data model it uses.</p>\n</blockquote>",
        "id": 153907424,
        "sender_full_name": "Github Notifications",
        "timestamp": 1505318657
    },
    {
        "content": "<p>isaacvetter <a href=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-329407116\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-329407116\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/82\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82\">Issue #82</a></p>\n<blockquote>\n<p>Hey <span class=\"user-mention\" data-user-email=\"bdoolittle@athenahealth.com\" data-user-id=\"1891\">@brian doolittle</span> - I think that you concern is actually better represented in #76, not #78. Concerns?</p>\n<p>Hey @bvdh , @rongchen , @olbrich - with the above discussion/resolution are you okay with this issue being closed upon adding some documentation to the spec around expectations of clients, per Grahame?</p>\n</blockquote>",
        "id": 153908082,
        "sender_full_name": "Github Notifications",
        "timestamp": 1505376538
    },
    {
        "content": "<p>olbrich <a href=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-329441679\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-329441679\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/82\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82\">Issue #82</a></p>\n<blockquote>\n<p><span class=\"user-mention\" data-user-email=\"isaacvetter@gmail.com\" data-user-id=\"558\">@Isaac Vetter</span> yes. </p>\n</blockquote>",
        "id": 153908092,
        "sender_full_name": "Github Notifications",
        "timestamp": 1505384997
    },
    {
        "content": "<p>rongchen <a href=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-329704274\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82#issuecomment-329704274\">commented</a> on <a href=\"https://github.com/cds-hooks/docs/issues/82\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82\">Issue #82</a></p>\n<blockquote>\n<p><span class=\"user-mention\" data-user-email=\"isaacvetter@gmail.com\" data-user-id=\"558\">@Isaac Vetter</span> yes.</p>\n</blockquote>",
        "id": 153908710,
        "sender_full_name": "Github Notifications",
        "timestamp": 1505460440
    },
    {
        "content": "<p>isaacvetter assigned <a href=\"https://github.com/cds-hooks/docs/issues/82\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82\">Issue #82</a></p>",
        "id": 153913344,
        "sender_full_name": "Github Notifications",
        "timestamp": 1507652533
    },
    {
        "content": "<p>isaacvetter closed <a href=\"https://github.com/cds-hooks/docs/issues/82\" target=\"_blank\" title=\"https://github.com/cds-hooks/docs/issues/82\">Issue #82</a></p>",
        "id": 153916842,
        "sender_full_name": "Github Notifications",
        "timestamp": 1509395946
    }
]