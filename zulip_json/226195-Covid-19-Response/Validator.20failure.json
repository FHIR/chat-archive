[
    {
        "content": "<p>URL value \"<a href=\"http://hl7.org/fhir/us/saner/Measure/CDCPatientImpactAndHospitalCapacity\">http://hl7.org/fhir/us/saner/Measure/CDCPatientImpactAndHospitalCapacity</a>\" does not resolve</p>",
        "id": 197477705,
        "sender_full_name": "David Pyke",
        "timestamp": 1589403979
    },
    {
        "content": "<p>URL value '<a href=\"http://hl7.org/fhir/us/saner/Measure/FEMADailyHospitalCOVID19Reporting\">http://hl7.org/fhir/us/saner/Measure/FEMADailyHospitalCOVID19Reporting</a>' does not resolve</p>",
        "id": 197478910,
        "sender_full_name": "sean zitello",
        "timestamp": 1589404623
    },
    {
        "content": "<p>@Davd: Do you also receive these Warnings for CDC:   None of the codes provided are in the value set <a href=\"http://hl7.org/fhir/ValueSet/measure-population\">http://hl7.org/fhir/ValueSet/measure-population</a> (<a href=\"http://hl7.org/fhir/ValueSet/measure-population\">http://hl7.org/fhir/ValueSet/measure-population</a>, and a code should come from this value set unless it has no suitable code) (codes = <a href=\"http://hl7.org/fhir/us/saner/CodeSystem/MeasurePopulationSystem#numBedsOcc\">http://hl7.org/fhir/us/saner/CodeSystem/MeasurePopulationSystem#numBedsOcc</a></p>",
        "id": 197479308,
        "sender_full_name": "sean zitello",
        "timestamp": 1589404839
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192587\">@David Pyke</span> could you share the resource (or a pointer to the example if its in the IG) you are trying to validate on <a href=\"https://infernotest.healthit.gov/validator/\">https://infernotest.healthit.gov/validator/</a>?</p>",
        "id": 197479557,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1589404947
    },
    {
        "content": "<p><a href=\"https://drive.google.com/open?id=10n0Gg3Zg2VuIaTQ6iW-bZ8Ilyga9w_Cu\">https://drive.google.com/open?id=10n0Gg3Zg2VuIaTQ6iW-bZ8Ilyga9w_Cu</a></p>",
        "id": 197479678,
        "sender_full_name": "David Pyke",
        "timestamp": 1589404984
    },
    {
        "content": "<p>It's the Epic JSON one in the sample dir in the gdrive</p>",
        "id": 197479736,
        "sender_full_name": "David Pyke",
        "timestamp": 1589405018
    },
    {
        "content": "<p>Validating against the public health measure report</p>",
        "id": 197479812,
        "sender_full_name": "David Pyke",
        "timestamp": 1589405045
    },
    {
        "content": "<p>Gotcha, thanks!  Looking into it now...</p>",
        "id": 197479843,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1589405072
    },
    {
        "content": "<p>Measure definition for CDCPatientImpactAndHospitalCapacity:  1.  Is the second population code \"numbeds\" (SERVER) or \"numBeds\" (IG:definitions.zip). 2.  Should each population.code.coding include a code from <a href=\"http://terminology.hl7.org/CodeSystem/measure-population\">http://terminology.hl7.org/CodeSystem/measure-population</a>\".  Only the first population has this for CDC, but all do for FEMA and they do not throw validation warnings.</p>",
        "id": 197482158,
        "sender_full_name": "sean zitello",
        "timestamp": 1589406596
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192587\">@David Pyke</span> we were able to fix the error last night (we were mounting a volume into the docker container in production that was overwriting some things it shouldn't have).  I was able to validate the example MeasureReport you provided and a Measure example from the spec against the PublicHealthMeasure Profile.</p>\n<p><span class=\"user-mention\" data-user-id=\"191387\">@Keith Boone</span> This issue made me noticed that the <code>PublicHealthMeasureReport.subject</code> is a reference to a US Core Profile not a SANER Resource Location Profile.  Is that intentional?  The SANER Resource Location Profile is based off the US Core Profile so I figure this might be an oversight.</p>",
        "id": 197546111,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1589460013
    },
    {
        "content": "<p>So how are you able to validate against  \"measure\": \"<a href=\"http://hl7.org/fhir/us/saner/StructureDefinition/PublicHealthMeasure\">http://hl7.org/fhir/us/saner/StructureDefinition/PublicHealthMeasure</a>\",  when the HL7 FHIR Validator can't?</p>",
        "id": 197546404,
        "sender_full_name": "David Pyke",
        "timestamp": 1589460176
    },
    {
        "content": "<p>We load the resources into the validator directly.  Typically, the desktop validator retrieves the IG resources from the package registry and stores them locally (<code>~/.fhir</code> by default).  The SANER IG is not in the package registry (<a href=\"http://packages.fhir.org\">packages.fhir.org</a>) though.</p>\n<p>You could probably load them in there yourself, but the better way to do it with the desktop jar would be to pass the directory of containing the IGs if you want to use the desktop jar:</p>\n<p>i.e.<br>\n<code>-ig hl7.fhir.us.saner#current </code> flag tells the validator to look for the ig in <a href=\"http://packages.fhir.org\">packages.fhir.org</a><br>\n<code>-g ./my-dir</code> flag tells the validator to look for the ig in the <code>my-dir</code> directory (I didn't try this locally so there might be a syntax error, but you can read more in the validator docs here: (<a href=\"https://confluence.hl7.org/display/FHIR/Using+the+FHIR+Validator\">https://confluence.hl7.org/display/FHIR/Using+the+FHIR+Validator</a> look at the <code>Loading an Implementation Guide</code> section.)</p>\n<p>We're using the same HL7 validator code (<a href=\"https://github.com/inferno-community/fhir-validator-wrapper\">source here</a>), just wrapped in a web service which reduces some of the jar initialization overhead and makes it accessible over the web.</p>",
        "id": 197547359,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1589460688
    },
    {
        "content": "<p>Hopefully that helps. We use, and appreciate, the validator a lot so I can try and help troubleshoot more if you'd like.  Also, if there is a feature of the web based validator that you'd like to see let us know and we can try and add it (source for that is on GitHub too)!</p>",
        "id": 197547658,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1589460818
    },
    {
        "content": "<p>The command I'm using is <br>\njava -jar ./org.hl7.fhir.validator.jar -ig hl7.fhir.us.saner#current -version 4.0.1 [File]</p>",
        "id": 197552361,
        "sender_full_name": "David Pyke",
        "timestamp": 1589462466
    },
    {
        "content": "<p>Here's an example to show you what I mean.</p>\n<p>All examples are performed against this resource to keep us on the same page: <a href=\"/user_uploads/10155/TO6P1Qn8AAViHsU__lF_IbPt/cdc-patient-impact.json\">cdc-patient-impact.json</a> </p>\n<p><strong>TLDR: <a href=\"http://build.fhir.org/ig/HL7/fhir-saner/definitions.json.zip\">Download the IG</a> and use <code>java -jar ./org.hl7.fhir.validator.jar -ig [IG Folder] -version 4.0.1 [File]</code></strong></p>\n<hr>\n<p>More details:</p>\n<h1>Package Registry Method (the command you're using)</h1>\n<p>This is the command you are using:</p>\n<p><code>java -jar ./org.hl7.fhir.validator.jar -ig hl7.fhir.us.saner#current -version 4.0.1 cdc-patient-impact.json </code></p>\n<p>Gives: <code>Error @ Measure.url (line 13, col86) : URL value \"http://hl7.org/fhir/us/saner/Measure/CDCPatientImpactAndHospitalCapacity\" does not resolve</code></p>\n<p>Because SANER is not on <a href=\"http://packages.fhir.org\">packages.fhir.org</a></p>\n<h1>Local Method</h1>\n<p><a href=\"http://build.fhir.org/ig/HL7/fhir-saner/definitions.json.zip\">Download the SANER IG</a></p>\n<p><code>java -jar ./org.hl7.fhir.validator.jar -ig ./definitions.json -version 4.0.1 cdc-patient-impact.json </code></p>\n<p>This will work.  Note that I use <code>-ig ./definitions.json</code> which is the directory containing the IG resources</p>",
        "id": 197555134,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1589463633
    },
    {
        "content": "<p>Okay, thank you.  I'll fix it.</p>",
        "id": 197555383,
        "sender_full_name": "David Pyke",
        "timestamp": 1589463728
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"192587\">@David Pyke</span> I'd appreciate your feedback, if you have any, on <a href=\"http://infernotest.healthit.gov/validator\">infernotest.healthit.gov/validator</a> and what features would make it more useful to you.  As a completely open source project we define success on others using it and it being useful to them.  The UI is a little rough, but feedback from folks like yourself helps us determine what to work on or whether its worth working on at all.</p>",
        "id": 197555937,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1589463891
    },
    {
        "content": "<p>It would be very nice if it could pull the profile from the meta tag, if it exists, rather than me selecting it.</p>",
        "id": 197564147,
        "sender_full_name": "David Pyke",
        "timestamp": 1589467000
    },
    {
        "content": "<blockquote>\n<p>It would be very nice if it could pull the profile from the meta tag, if it exists</p>\n</blockquote>\n<p>it does</p>",
        "id": 197605382,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1589484181
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"197651\">@Reece Adamson</span> this command</p>\n<blockquote>\n<p>java -jar ./org.hl7.fhir.validator.jar -ig hl7.fhir.us.saner#current -version 4.0.1 [File]</p>\n</blockquote>\n<p>that works fine. Your method of downloading the igs does not work. Please do not use or recommend it</p>",
        "id": 197605519,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1589484247
    },
    {
        "content": "<p>Noted. sorry about that, I thought it was a valid option based on the docs.</p>",
        "id": 197609407,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1589486247
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"197651\">Reece Adamson</span> <a href=\"#narrow/stream/226195-Covid-19-Response/topic/Validator.20failure/near/197555134\">said</a>:</p>\n<blockquote>\n<p>Here's an example to show you what I mean.</p>\n<p>All examples are performed against this resource to keep us on the same page: <a href=\"/user_uploads/10155/TO6P1Qn8AAViHsU__lF_IbPt/cdc-patient-impact.json\">cdc-patient-impact.json</a> </p>\n<p><strong>TLDR: <a href=\"http://build.fhir.org/ig/HL7/fhir-saner/definitions.json.zip\">Download the IG</a> and use <code>java -jar ./org.hl7.fhir.validator.jar -ig [IG Folder] -version 4.0.1 [File]</code></strong></p>\n<hr>\n<p>More details:</p>\n<h1>Package Registry Method (the command you're using)</h1>\n<p>This is the command you are using:</p>\n<p><code>java -jar ./org.hl7.fhir.validator.jar -ig hl7.fhir.us.saner#current -version 4.0.1 cdc-patient-impact.json </code></p>\n<p>Gives: <code>Error @ Measure.url (line 13, col86) : URL value \"http://hl7.org/fhir/us/saner/Measure/CDCPatientImpactAndHospitalCapacity\" does not resolve</code></p>\n<p>Because SANER is not on <a href=\"http://packages.fhir.org\">packages.fhir.org</a></p>\n<h1>Local Method</h1>\n<p><a href=\"http://build.fhir.org/ig/HL7/fhir-saner/definitions.json.zip\">Download the SANER IG</a></p>\n<p><code>java -jar ./org.hl7.fhir.validator.jar -ig ./definitions.json -version 4.0.1 cdc-patient-impact.json </code></p>\n<p>This will work.  Note that I use <code>-ig ./definitions.json</code> which is the directory containing the IG resources</p>\n</blockquote>\n<p>Hi Reese, I didn't realize you answered this ... Thanks, so much.<br>\nFollowup: is there some doc maybe that would help me understand what parts of validation fail when package is not on <a href=\"http://packages.fhir.org\">packages.fhir.org</a>.   How many of the .contained zip files would I expect to have uncompress when using a local IG?</p>",
        "id": 198817299,
        "sender_full_name": "sean zitello",
        "timestamp": 1590524862
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"201686\">@sean zitello</span> <strong>Do not use this approach</strong>.  I had assumed this would work based on the <a href=\"https://confluence.hl7.org/display/FHIR/Using+the+FHIR+Validator#UsingtheFHIRValidator-LoadinganimplementationGuide\">validator documentation here</a>, but this is not the case.  I am unable to edit my original post to clarify that advice.</p>\n<p>This is probably a question for <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span>: What is the best way to validate resources against an IG that is not on <a href=\"http://packages.fhir.org\">packages.fhir.org</a>?</p>",
        "id": 198905328,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1590591958
    },
    {
        "content": "<p>Or even better, what's the best way to get the IG into <a href=\"http://packages.fhir.org\">packages.fhir.org</a>?</p>",
        "id": 199035984,
        "sender_full_name": "Keith Boone",
        "timestamp": 1590678829
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"197651\">Reece Adamson</span> <a href=\"#narrow/stream/226195-Covid-19-Response/topic/Validator.20failure/near/198905328\">said</a>:</p>\n<blockquote>\n<p>What is the best way to validate resources against an IG that is not on <a href=\"http://packages.fhir.org\">packages.fhir.org</a>?</p>\n</blockquote>\n<p>I presume that once you get the package into your local cache, the validator can use it.</p>",
        "id": 199039434,
        "sender_full_name": "Jose Costa Teixeira",
        "timestamp": 1590680247
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"197651\">Reece Adamson</span> <a href=\"#narrow/stream/226195-Covid-19-Response/topic/Validator.20failure/near/198905328\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"201686\">sean zitello</span> <strong>Do not use this approach</strong>.  I had assumed this would work based on the <a href=\"https://confluence.hl7.org/display/FHIR/Using+the+FHIR+Validator#UsingtheFHIRValidator-LoadinganimplementationGuide\">validator documentation here</a>, but this is not the case.  I am unable to edit my original post to clarify that advice.</p>\n</blockquote>\n<p>I regularly use the validator with local folders instead of packages. I have all conformance resources in one flat folder and point it to that. Maybe the .json in the folder name confuses the validator?</p>",
        "id": 199040488,
        "sender_full_name": "Noemi Deppenwiese",
        "timestamp": 1590680731
    },
    {
        "content": "<p>maybe. what's the stack?</p>",
        "id": 199828798,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1591321342
    },
    {
        "content": "<p>you can get your packages into <a href=\"http://packages.fhir.org\">packages.fhir.org</a> by publishing and registering an RSS feed like <a href=\"http://hl7.org/fhir/packages-feed.xml\">http://hl7.org/fhir/packages-feed.xml</a></p>",
        "id": 199828809,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1591321373
    },
    {
        "content": "<p>or you can upload via simplifier if you have an account</p>",
        "id": 199828815,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1591321383
    },
    {
        "content": "<p>Is there a way to validate with the desktop jar against a local IG without having to use <a href=\"http://packages.fhir.org\">packages.fhir.org</a>?</p>",
        "id": 199921597,
        "sender_full_name": "Reece Adamson",
        "timestamp": 1591384350
    },
    {
        "content": "<p>I could point to a lot of feeds that gave: HL7 - 404 File Not Found, but I don't think that's what you meant <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> <br>\nWhere would such a feed be registered to?</p>",
        "id": 199982387,
        "sender_full_name": "Keith Boone",
        "timestamp": 1591460339
    },
    {
        "content": "<p>you register the feed in <a href=\"https://github.com/FHIR/ig-registry/blob/master/fhir-ig-list.json\">https://github.com/FHIR/ig-registry/blob/master/fhir-ig-list.json</a></p>",
        "id": 199991866,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1591475490
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"197651\">@Reece Adamson</span> - that depends on what exactly you are doing. Do you mean by 'local' that you built it locally?</p>",
        "id": 199991909,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1591475528
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"197651\">Reece Adamson</span> <a href=\"#narrow/stream/226195-Covid-19-Response/topic/Validator.20failure/near/199921597\">said</a>:</p>\n<blockquote>\n<p>Is there a way to validate with the desktop jar against a local IG without having to use <a href=\"http://packages.fhir.org\">packages.fhir.org</a>?</p>\n</blockquote>\n<p>If it helps any, you can validate against a locally built IG by referring to its output validator pack file. As a demonstration..</p>\n<ul>\n<li>clone the HL7 BSER repostory <a href=\"https://github.com/HL7/bser\">https://github.com/HL7/bser</a> (as an example)</li>\n<li>build the IG with the FHIR IG publisher (usual command <code>java -jar path/to/publisher.jar -ig ig.ini</code>)</li>\n<li>note the generated output file <code>validator-bser.pack</code> (which doesn't exist without the previous step)</li>\n<li>then from the root directory of the BSER IG, validate a random example against a corresponding profile, with this command</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><code>java -jar path/to/validator.jar -version 4.0.1 input/resources/condition/condition-BSeR-Diagnosis-eve-everywoman-diabetes.xml -ig output/validator-bser.pack -profile http://hl7.org/fhir/us/bser/StructureDefinition/BSeR-Diagnosis\n</code></pre></div>\n\n\n<p>So for your locally built IG, find the corresponding pack file in the output folder and use that for the <code>-ig</code> switch .</p>",
        "id": 199995684,
        "sender_full_name": "Rob Eastwood",
        "timestamp": 1591482026
    },
    {
        "content": "<p>this does work, though at some stage the .pack will be removed - it's deprecated. An alternative way to go about this:</p>\n<ul>\n<li>clone the HL7 BSER repostory <a href=\"https://github.com/HL7/bser\">https://github.com/HL7/bser</a> (as an example)</li>\n<li>build the IG with the FHIR IG publisher (usual command java -jar path/to/publisher.jar -ig ig.ini)</li>\n<li>from any directory, validate a random example against a corresponding profile, with this command</li>\n</ul>\n<div class=\"codehilite\"><pre><span></span><code>java -jar path/to/validator.jar -version 4.0.1 input/resources/condition/condition-BS -ig hl7.fhir.us.bser#dev\n</code></pre></div>\n\n\n<p>The #dev says to use the local build that you did. Though this will also work:</p>\n<div class=\"codehilite\"><pre><span></span><code>java -jar path/to/validator.jar -version 4.0.1 input/resources/condition/condition-BSeR-Diagnosis-eve-everywoman-diabetes.xml -ig output/package.tgz -profile http://hl7.org/fhir/us/bser/StructureDefinition/BSeR-Diagnosis\n</code></pre></div>\n\n\n<p>Package.tgz has replaced validator.pack</p>",
        "id": 200001402,
        "sender_full_name": "Grahame Grieve",
        "timestamp": 1591492739
    },
    {
        "content": "<p>Excellent; thank you very much <span class=\"user-mention\" data-user-id=\"191316\">@Grahame Grieve</span> for the improved options.</p>",
        "id": 200014583,
        "sender_full_name": "Rob Eastwood",
        "timestamp": 1591519462
    }
]